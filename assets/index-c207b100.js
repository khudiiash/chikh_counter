var WA=Object.defineProperty;var YA=(e,t,n)=>t in e?WA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ct=(e,t,n)=>(YA(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sp(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ie={},_o=[],Qn=()=>{},qA=()=>!1,Eh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ap=e=>e.startsWith("onUpdate:"),Pe=Object.assign,xp=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},KA=Object.prototype.hasOwnProperty,Jt=(e,t)=>KA.call(e,t),Et=Array.isArray,yo=e=>Th(e)==="[object Map]",_w=e=>Th(e)==="[object Set]",Rt=e=>typeof e=="function",me=e=>typeof e=="string",ni=e=>typeof e=="symbol",ue=e=>e!==null&&typeof e=="object",yw=e=>(ue(e)||Rt(e))&&Rt(e.then)&&Rt(e.catch),bw=Object.prototype.toString,Th=e=>bw.call(e),GA=e=>Th(e).slice(8,-1),ww=e=>Th(e)==="[object Object]",Cp=e=>me(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Wa=Sp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ih=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},XA=/-(\w)/g,Un=Ih(e=>e.replace(XA,(t,n)=>n?n.toUpperCase():"")),QA=/\B([A-Z])/g,Ki=Ih(e=>e.replace(QA,"-$1").toLowerCase()),Sh=Ih(e=>e.charAt(0).toUpperCase()+e.slice(1)),tu=Ih(e=>e?`on${Sh(e)}`:""),ki=(e,t)=>!Object.is(e,t),eu=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},mf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},vf=e=>{const t=parseFloat(e);return isNaN(t)?e:t},JA=e=>{const t=me(e)?Number(e):NaN;return isNaN(t)?e:t};let hv;const Ah=()=>hv||(hv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function en(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=me(s)?nx(s):en(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(me(e)||ue(e))return e}const ZA=/;(?![^(]*\))/g,tx=/:([^]+)/,ex=/\/\*[^]*?\*\//g;function nx(e){const t={};return e.replace(ex,"").split(ZA).forEach(n=>{if(n){const s=n.split(tx);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function oe(e){let t="";if(me(e))t=e;else if(Et(e))for(let n=0;n<e.length;n++){const s=oe(e[n]);s&&(t+=s+" ")}else if(ue(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function sx(e){if(!e)return null;let{class:t,style:n}=e;return t&&!me(t)&&(e.class=oe(t)),n&&(e.style=en(n)),e}const ix="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rx=Sp(ix);function Ew(e){return!!e||e===""}const Tw=e=>!!(e&&e.__v_isRef===!0),pn=e=>me(e)?e:e==null?"":Et(e)||ue(e)&&(e.toString===bw||!Rt(e.toString))?Tw(e)?pn(e.value):JSON.stringify(e,Iw,2):String(e),Iw=(e,t)=>Tw(t)?Iw(e,t.value):yo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[Sd(s,r)+" =>"]=i,n),{})}:_w(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Sd(n))}:ni(t)?Sd(t):ue(t)&&!Et(t)&&!ww(t)?String(t):t,Sd=(e,t="")=>{var n;return ni(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vn;class ox{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vn,!t&&vn&&(this.index=(vn.scopes||(vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=vn;try{return vn=this,t()}finally{vn=n}}}on(){++this._on===1&&(this.prevScope=vn,vn=this)}off(){this._on>0&&--this._on===0&&(vn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ax(){return vn}let le;const Ad=new WeakSet;class Sw{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vn&&vn.active&&vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ad.has(this)&&(Ad.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,dv(this),Cw(this);const t=le,n=Jn;le=this,Jn=!0;try{return this.fn()}finally{Pw(this),le=t,Jn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Dp(t);this.deps=this.depsTail=void 0,dv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ad.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_f(this)&&this.run()}get dirty(){return _f(this)}}let Aw=0,Ya,qa;function xw(e,t=!1){if(e.flags|=8,t){e.next=qa,qa=e;return}e.next=Ya,Ya=e}function Pp(){Aw++}function kp(){if(--Aw>0)return;if(qa){let t=qa;for(qa=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ya;){let t=Ya;for(Ya=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Cw(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pw(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Dp(s),lx(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function _f(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(kw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function kw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===fl)||(e.globalVersion=fl,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!_f(e))))return;e.flags|=2;const t=e.dep,n=le,s=Jn;le=e,Jn=!0;try{Cw(e);const i=e.fn(e._value);(t.version===0||ki(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{le=n,Jn=s,Pw(e),e.flags&=-3}}function Dp(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Dp(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function lx(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Jn=!0;const Dw=[];function Ks(){Dw.push(Jn),Jn=!1}function Gs(){const e=Dw.pop();Jn=e===void 0?!0:e}function dv(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=le;le=void 0;try{t()}finally{le=n}}}let fl=0;class cx{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rp{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!le||!Jn||le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==le)n=this.activeLink=new cx(le,this),le.deps?(n.prevDep=le.depsTail,le.depsTail.nextDep=n,le.depsTail=n):le.deps=le.depsTail=n,Rw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=le.depsTail,n.nextDep=void 0,le.depsTail.nextDep=n,le.depsTail=n,le.deps===n&&(le.deps=s)}return n}trigger(t){this.version++,fl++,this.notify(t)}notify(t){Pp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{kp()}}}function Rw(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Rw(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Tu=new WeakMap,Ir=Symbol(""),yf=Symbol(""),pl=Symbol("");function Je(e,t,n){if(Jn&&le){let s=Tu.get(e);s||Tu.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Rp),i.map=s,i.key=n),i.track()}}function Bs(e,t,n,s,i,r){const o=Tu.get(e);if(!o){fl++;return}const a=l=>{l&&l.trigger()};if(Pp(),t==="clear")o.forEach(a);else{const l=Et(e),c=l&&Cp(n);if(l&&n==="length"){const u=Number(s);o.forEach((d,f)=>{(f==="length"||f===pl||!ni(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(pl)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Ir)),yo(e)&&a(o.get(yf)));break;case"delete":l||(a(o.get(Ir)),yo(e)&&a(o.get(yf)));break;case"set":yo(e)&&a(o.get(Ir));break}}kp()}function ux(e,t){const n=Tu.get(e);return n&&n.get(t)}function io(e){const t=Ht(e);return t===e?t:(Je(t,"iterate",pl),$n(e)?t:t.map(je))}function xh(e){return Je(e=Ht(e),"iterate",pl),e}const hx={__proto__:null,[Symbol.iterator](){return xd(this,Symbol.iterator,je)},concat(...e){return io(this).concat(...e.map(t=>Et(t)?io(t):t))},entries(){return xd(this,"entries",e=>(e[1]=je(e[1]),e))},every(e,t){return Ds(this,"every",e,t,void 0,arguments)},filter(e,t){return Ds(this,"filter",e,t,n=>n.map(je),arguments)},find(e,t){return Ds(this,"find",e,t,je,arguments)},findIndex(e,t){return Ds(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ds(this,"findLast",e,t,je,arguments)},findLastIndex(e,t){return Ds(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ds(this,"forEach",e,t,void 0,arguments)},includes(...e){return Cd(this,"includes",e)},indexOf(...e){return Cd(this,"indexOf",e)},join(e){return io(this).join(e)},lastIndexOf(...e){return Cd(this,"lastIndexOf",e)},map(e,t){return Ds(this,"map",e,t,void 0,arguments)},pop(){return wa(this,"pop")},push(...e){return wa(this,"push",e)},reduce(e,...t){return fv(this,"reduce",e,t)},reduceRight(e,...t){return fv(this,"reduceRight",e,t)},shift(){return wa(this,"shift")},some(e,t){return Ds(this,"some",e,t,void 0,arguments)},splice(...e){return wa(this,"splice",e)},toReversed(){return io(this).toReversed()},toSorted(e){return io(this).toSorted(e)},toSpliced(...e){return io(this).toSpliced(...e)},unshift(...e){return wa(this,"unshift",e)},values(){return xd(this,"values",je)}};function xd(e,t,n){const s=xh(e),i=s[t]();return s!==e&&!$n(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const dx=Array.prototype;function Ds(e,t,n,s,i,r){const o=xh(e),a=o!==e&&!$n(e),l=o[t];if(l!==dx[t]){const d=l.apply(e,r);return a?je(d):d}let c=n;o!==e&&(a?c=function(d,f){return n.call(this,je(d),f,e)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function fv(e,t,n,s){const i=xh(e);let r=n;return i!==e&&($n(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,je(a),l,e)}),i[t](r,...s)}function Cd(e,t,n){const s=Ht(e);Je(s,"iterate",pl);const i=s[t](...n);return(i===-1||i===!1)&&Hl(n[0])?(n[0]=Ht(n[0]),s[t](...n)):i}function wa(e,t,n=[]){Ks(),Pp();const s=Ht(e)[t].apply(e,n);return kp(),Gs(),s}const fx=Sp("__proto__,__v_isRef,__isVue"),Mw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ni));function px(e){ni(e)||(e=String(e));const t=Ht(this);return Je(t,"has",e),t.hasOwnProperty(e)}class Ow{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Ix:$w:r?Vw:Nw).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Et(t);if(!i){let l;if(o&&(l=hx[n]))return l;if(n==="hasOwnProperty")return px}const a=Reflect.get(t,n,Fe(t)?t:s);return(ni(n)?Mw.has(n):fx(n))||(i||Je(t,"get",n),r)?a:Fe(a)?o&&Cp(n)?a:a.value:ue(a)?i?Bw(a):Ko(a):a}}class Lw extends Ow{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=$i(r);if(!$n(s)&&!$i(s)&&(r=Ht(r),s=Ht(s)),!Et(t)&&Fe(r)&&!Fe(s))return l?!1:(r.value=s,!0)}const o=Et(t)&&Cp(n)?Number(n)<t.length:Jt(t,n),a=Reflect.set(t,n,s,Fe(t)?t:i);return t===Ht(i)&&(o?ki(s,r)&&Bs(t,"set",n,s):Bs(t,"add",n,s)),a}deleteProperty(t,n){const s=Jt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Bs(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!ni(n)||!Mw.has(n))&&Je(t,"has",n),s}ownKeys(t){return Je(t,"iterate",Et(t)?"length":Ir),Reflect.ownKeys(t)}}class gx extends Ow{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const mx=new Lw,vx=new gx,_x=new Lw(!0);const bf=e=>e,Ic=e=>Reflect.getPrototypeOf(e);function yx(e,t,n){return function(...s){const i=this.__v_raw,r=Ht(i),o=yo(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?bf:t?Iu:je;return!t&&Je(r,"iterate",l?yf:Ir),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Sc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function bx(e,t){const n={get(i){const r=this.__v_raw,o=Ht(r),a=Ht(i);e||(ki(i,a)&&Je(o,"get",i),Je(o,"get",a));const{has:l}=Ic(o),c=t?bf:e?Iu:je;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Je(Ht(i),"iterate",Ir),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Ht(r),a=Ht(i);return e||(ki(i,a)&&Je(o,"has",i),Je(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Ht(a),c=t?bf:e?Iu:je;return!e&&Je(l,"iterate",Ir),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return Pe(n,e?{add:Sc("add"),set:Sc("set"),delete:Sc("delete"),clear:Sc("clear")}:{add(i){!t&&!$n(i)&&!$i(i)&&(i=Ht(i));const r=Ht(this);return Ic(r).has.call(r,i)||(r.add(i),Bs(r,"add",i,i)),this},set(i,r){!t&&!$n(r)&&!$i(r)&&(r=Ht(r));const o=Ht(this),{has:a,get:l}=Ic(o);let c=a.call(o,i);c||(i=Ht(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?ki(r,u)&&Bs(o,"set",i,r):Bs(o,"add",i,r),this},delete(i){const r=Ht(this),{has:o,get:a}=Ic(r);let l=o.call(r,i);l||(i=Ht(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&Bs(r,"delete",i,void 0),c},clear(){const i=Ht(this),r=i.size!==0,o=i.clear();return r&&Bs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=yx(i,e,t)}),n}function Mp(e,t){const n=bx(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Jt(n,i)&&i in s?n:s,i,r)}const wx={get:Mp(!1,!1)},Ex={get:Mp(!1,!0)},Tx={get:Mp(!0,!1)};const Nw=new WeakMap,Vw=new WeakMap,$w=new WeakMap,Ix=new WeakMap;function Sx(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ax(e){return e.__v_skip||!Object.isExtensible(e)?0:Sx(GA(e))}function Ko(e){return $i(e)?e:Op(e,!1,mx,wx,Nw)}function Fw(e){return Op(e,!1,_x,Ex,Vw)}function Bw(e){return Op(e,!0,vx,Tx,$w)}function Op(e,t,n,s,i){if(!ue(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ax(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function bo(e){return $i(e)?bo(e.__v_raw):!!(e&&e.__v_isReactive)}function $i(e){return!!(e&&e.__v_isReadonly)}function $n(e){return!!(e&&e.__v_isShallow)}function Hl(e){return e?!!e.__v_raw:!1}function Ht(e){const t=e&&e.__v_raw;return t?Ht(t):e}function xx(e){return!Jt(e,"__v_skip")&&Object.isExtensible(e)&&mf(e,"__v_skip",!0),e}const je=e=>ue(e)?Ko(e):e,Iu=e=>ue(e)?Bw(e):e;function Fe(e){return e?e.__v_isRef===!0:!1}function Nt(e){return Uw(e,!1)}function Lp(e){return Uw(e,!0)}function Uw(e,t){return Fe(e)?e:new Cx(e,t)}class Cx{constructor(t,n){this.dep=new Rp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ht(t),this._value=n?t:je(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||$n(t)||$i(t);t=s?t:Ht(t),ki(t,n)&&(this._rawValue=t,this._value=s?t:je(t),this.dep.trigger())}}function ft(e){return Fe(e)?e.value:e}const Px={get:(e,t,n)=>t==="__v_raw"?e:ft(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Fe(i)&&!Fe(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function jw(e){return bo(e)?e:new Proxy(e,Px)}function kx(e){const t=Et(e)?new Array(e.length):{};for(const n in e)t[n]=Hw(e,n);return t}class Dx{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return ux(Ht(this._object),this._key)}}class Rx{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Mx(e,t,n){return Fe(e)?e:Rt(e)?new Rx(e):ue(e)&&arguments.length>1?Hw(e,t,n):Nt(e)}function Hw(e,t,n){const s=e[t];return Fe(s)?s:new Dx(e,t,n)}class Ox{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Rp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&le!==this)return xw(this,!0),!0}get value(){const t=this.dep.track();return kw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Lx(e,t,n=!1){let s,i;return Rt(e)?s=e:(s=e.get,i=e.set),new Ox(s,i,n)}const Ac={},Su=new WeakMap;let pr;function Nx(e,t=!1,n=pr){if(n){let s=Su.get(n);s||Su.set(n,s=[]),s.push(e)}}function Vx(e,t,n=ie){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=R=>i?R:$n(R)||i===!1||i===0?Us(R,1):Us(R);let u,d,f,p,m=!1,_=!1;if(Fe(e)?(d=()=>e.value,m=$n(e)):bo(e)?(d=()=>c(e),m=!0):Et(e)?(_=!0,m=e.some(R=>bo(R)||$n(R)),d=()=>e.map(R=>{if(Fe(R))return R.value;if(bo(R))return c(R);if(Rt(R))return l?l(R,2):R()})):Rt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Ks();try{f()}finally{Gs()}}const R=pr;pr=u;try{return l?l(e,3,[p]):e(p)}finally{pr=R}}:d=Qn,t&&i){const R=d,O=i===!0?1/0:i;d=()=>Us(R(),O)}const y=ax(),T=()=>{u.stop(),y&&y.active&&xp(y.effects,u)};if(r&&t){const R=t;t=(...O)=>{R(...O),T()}}let k=_?new Array(e.length).fill(Ac):Ac;const D=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(t){const O=u.run();if(i||m||(_?O.some((N,I)=>ki(N,k[I])):ki(O,k))){f&&f();const N=pr;pr=u;try{const I=[O,k===Ac?void 0:_&&k[0]===Ac?[]:k,p];k=O,l?l(t,3,I):t(...I)}finally{pr=N}}}else u.run()};return a&&a(D),u=new Sw(d),u.scheduler=o?()=>o(D,!1):D,p=R=>Nx(R,!1,u),f=u.onStop=()=>{const R=Su.get(u);if(R){if(l)l(R,4);else for(const O of R)O();Su.delete(u)}},t?s?D(!0):k=u.run():o?o(D.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function Us(e,t=1/0,n){if(t<=0||!ue(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Fe(e))Us(e.value,t,n);else if(Et(e))for(let s=0;s<e.length;s++)Us(e[s],t,n);else if(_w(e)||yo(e))e.forEach(s=>{Us(s,t,n)});else if(ww(e)){for(const s in e)Us(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Us(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zl(e,t,n,s){try{return s?e(...s):e()}catch(i){Ch(i,t,n)}}function Zn(e,t,n,s){if(Rt(e)){const i=zl(e,t,n,s);return i&&yw(i)&&i.catch(r=>{Ch(r,t,n)}),i}if(Et(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Zn(e[r],t,n,s));return i}}function Ch(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ie;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(r){Ks(),zl(r,null,10,[e,l,c]),Gs();return}}$x(e,n,i,s,o)}function $x(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const un=[];let as=-1;const wo=[];let mi=null,ao=0;const zw=Promise.resolve();let Au=null;function Cr(e){const t=Au||zw;return e?t.then(this?e.bind(this):e):t}function Fx(e){let t=as+1,n=un.length;for(;t<n;){const s=t+n>>>1,i=un[s],r=gl(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function Np(e){if(!(e.flags&1)){const t=gl(e),n=un[un.length-1];!n||!(e.flags&2)&&t>=gl(n)?un.push(e):un.splice(Fx(t),0,e),e.flags|=1,Ww()}}function Ww(){Au||(Au=zw.then(qw))}function Bx(e){Et(e)?wo.push(...e):mi&&e.id===-1?mi.splice(ao+1,0,e):e.flags&1||(wo.push(e),e.flags|=1),Ww()}function pv(e,t,n=as+1){for(;n<un.length;n++){const s=un[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;un.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Yw(e){if(wo.length){const t=[...new Set(wo)].sort((n,s)=>gl(n)-gl(s));if(wo.length=0,mi){mi.push(...t);return}for(mi=t,ao=0;ao<mi.length;ao++){const n=mi[ao];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}mi=null,ao=0}}const gl=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qw(e){const t=Qn;try{for(as=0;as<un.length;as++){const n=un[as];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),zl(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;as<un.length;as++){const n=un[as];n&&(n.flags&=-2)}as=-1,un.length=0,Yw(),Au=null,(un.length||wo.length)&&qw()}}let Ne=null,Kw=null;function xu(e){const t=Ne;return Ne=e,Kw=e&&e.type.__scopeId||null,t}function be(e,t=Ne,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Iv(-1);const r=xu(t);let o;try{o=e(...i)}finally{xu(r),s._d&&Iv(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Cu(e,t){if(Ne===null)return e;const n=Lh(Ne),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=ie]=t[i];r&&(Rt(r)&&(r={mounted:r,updated:r}),r.deep&&Us(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function or(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Ks(),Zn(l,n,8,[e.el,a,e,t]),Gs())}}const Ux=Symbol("_vte"),Gw=e=>e.__isTeleport,vi=Symbol("_leaveCb"),xc=Symbol("_enterCb");function jx(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ss(()=>{e.isMounted=!0}),s1(()=>{e.isUnmounting=!0}),e}const Dn=[Function,Array],Xw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dn,onEnter:Dn,onAfterEnter:Dn,onEnterCancelled:Dn,onBeforeLeave:Dn,onLeave:Dn,onAfterLeave:Dn,onLeaveCancelled:Dn,onBeforeAppear:Dn,onAppear:Dn,onAfterAppear:Dn,onAppearCancelled:Dn},Qw=e=>{const t=e.subTree;return t.component?Qw(t.component):t},Hx={name:"BaseTransition",props:Xw,setup(e,{slots:t}){const n=S1(),s=jx();return()=>{const i=t.default&&t1(t.default(),!0);if(!i||!i.length)return;const r=Jw(i),o=Ht(e),{mode:a}=o;if(s.isLeaving)return Pd(r);const l=gv(r);if(!l)return Pd(r);let c=wf(l,o,s,n,d=>c=d);l.type!==tn&&ml(l,c);let u=n.subTree&&gv(n.subTree);if(u&&u.type!==tn&&!yr(l,u)&&Qw(n).type!==tn){let d=wf(u,o,s,n);if(ml(u,d),a==="out-in"&&l.type!==tn)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},Pd(r);a==="in-out"&&l.type!==tn?d.delayLeave=(f,p,m)=>{const _=Zw(s,u);_[String(u.key)]=u,f[vi]=()=>{p(),f[vi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Jw(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==tn){t=n;break}}return t}const zx=Hx;function Zw(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function wf(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:_,onBeforeAppear:y,onAppear:T,onAfterAppear:k,onAppearCancelled:D}=t,R=String(e.key),O=Zw(n,e),N=(w,x)=>{w&&Zn(w,s,9,x)},I=(w,x)=>{const C=x[1];N(w,x),Et(w)?w.every(A=>A.length<=1)&&C():w.length<=1&&C()},b={mode:o,persisted:a,beforeEnter(w){let x=l;if(!n.isMounted)if(r)x=y||l;else return;w[vi]&&w[vi](!0);const C=O[R];C&&yr(e,C)&&C.el[vi]&&C.el[vi](),N(x,[w])},enter(w){let x=c,C=u,A=d;if(!n.isMounted)if(r)x=T||c,C=k||u,A=D||d;else return;let S=!1;const dt=w[xc]=J=>{S||(S=!0,J?N(A,[w]):N(C,[w]),b.delayedLeave&&b.delayedLeave(),w[xc]=void 0)};x?I(x,[w,dt]):dt()},leave(w,x){const C=String(e.key);if(w[xc]&&w[xc](!0),n.isUnmounting)return x();N(f,[w]);let A=!1;const S=w[vi]=dt=>{A||(A=!0,x(),dt?N(_,[w]):N(m,[w]),w[vi]=void 0,O[C]===e&&delete O[C])};O[C]=e,p?I(p,[w,S]):S()},clone(w){const x=wf(w,t,n,s,i);return i&&i(x),x}};return b}function Pd(e){if(Ph(e))return e=Fi(e),e.children=null,e}function gv(e){if(!Ph(e))return Gw(e.type)&&e.children?Jw(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Rt(n.default))return n.default()}}function ml(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ml(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function t1(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===re?(o.patchFlag&128&&i++,s=s.concat(t1(o.children,t,a))):(t||o.type!==tn)&&s.push(a!=null?Fi(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function on(e,t){return Rt(e)?(()=>Pe({name:e.name},t,{setup:e}))():e}function e1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ka(e,t,n,s,i=!1){if(Et(e)){e.forEach((m,_)=>Ka(m,t&&(Et(t)?t[_]:t),n,s,i));return}if(Eo(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ka(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Lh(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ie?a.refs={}:a.refs,d=a.setupState,f=Ht(d),p=d===ie?()=>!1:m=>Jt(f,m);if(c!=null&&c!==l&&(me(c)?(u[c]=null,p(c)&&(d[c]=null)):Fe(c)&&(c.value=null)),Rt(l))zl(l,a,12,[o,u]);else{const m=me(l),_=Fe(l);if(m||_){const y=()=>{if(e.f){const T=m?p(l)?d[l]:u[l]:l.value;i?Et(T)&&xp(T,r):Et(T)?T.includes(r)||T.push(r):m?(u[l]=[r],p(l)&&(d[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else m?(u[l]=o,p(l)&&(d[l]=o)):_&&(l.value=o,e.k&&(u[e.k]=o))};o?(y.id=-1,In(y,n)):y()}}}Ah().requestIdleCallback;Ah().cancelIdleCallback;const Eo=e=>!!e.type.__asyncLoader,Ph=e=>e.type.__isKeepAlive;function Wx(e,t){n1(e,"a",t)}function Yx(e,t){n1(e,"da",t)}function n1(e,t,n=He){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(kh(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Ph(i.parent.vnode)&&qx(s,t,n,i),i=i.parent}}function qx(e,t,n,s){const i=kh(t,e,s,!0);Go(()=>{xp(s[t],i)},n)}function kh(e,t,n=He,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ks();const a=Yl(n),l=Zn(t,n,e,o);return a(),Gs(),l});return s?i.unshift(r):i.push(r),r}}const si=e=>(t,n=He)=>{(!yl||e==="sp")&&kh(e,(...s)=>t(...s),n)},Kx=si("bm"),Ss=si("m"),Gx=si("bu"),Xx=si("u"),s1=si("bum"),Go=si("um"),Qx=si("sp"),Jx=si("rtg"),Zx=si("rtc");function tC(e,t=He){kh("ec",e,t)}const Vp="components",eC="directives";function $s(e,t){return $p(Vp,e,!0,t)||e}const i1=Symbol.for("v-ndc");function r1(e){return me(e)?$p(Vp,e,!1)||e:e||i1}function nC(e){return $p(eC,e)}function $p(e,t,n=!0,s=!1){const i=Ne||He;if(i){const r=i.type;if(e===Vp){const a=jC(r,!1);if(a&&(a===t||a===Un(t)||a===Sh(Un(t))))return r}const o=mv(i[e]||r[e],t)||mv(i.appContext[e],t);return!o&&s?r:o}}function mv(e,t){return e&&(e[t]||e[Un(t)]||e[Sh(Un(t))])}function Cn(e,t,n,s){let i;const r=n&&n[s],o=Et(e);if(o||me(e)){const a=o&&bo(e);let l=!1,c=!1;a&&(l=!$n(e),c=$i(e),e=xh(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?Iu(je(e[u])):je(e[u]):e[u],u,void 0,r&&r[u])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r&&r[a])}else if(ue(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r&&r[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r&&r[l])}}else i=[];return n&&(n[s]=i),i}function Dh(e,t,n={},s,i){if(Ne.ce||Ne.parent&&Eo(Ne.parent)&&Ne.parent.ce)return t!=="default"&&(n.name=t),ut(),jn(re,null,[Pt("slot",n,s&&s())],64);let r=e[t];r&&r._c&&(r._d=!1),ut();const o=r&&o1(r(n)),a=n.key||o&&o.key,l=jn(re,{key:(a&&!ni(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function o1(e){return e.some(t=>_l(t)?!(t.type===tn||t.type===re&&!o1(t.children)):!0)?e:null}function sC(e,t){const n={};for(const s in e)n[t&&/[A-Z]/.test(s)?`on:${s}`:tu(s)]=e[s];return n}const Ef=e=>e?A1(e)?Lh(e):Ef(e.parent):null,Ga=Pe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ef(e.parent),$root:e=>Ef(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fp(e),$forceUpdate:e=>e.f||(e.f=()=>{Np(e.update)}),$nextTick:e=>e.n||(e.n=Cr.bind(e.proxy)),$watch:e=>IC.bind(e)}),kd=(e,t)=>e!==ie&&!e.__isScriptSetup&&Jt(e,t),iC={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(kd(s,t))return o[t]=1,s[t];if(i!==ie&&Jt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Jt(c,t))return o[t]=3,r[t];if(n!==ie&&Jt(n,t))return o[t]=4,n[t];Tf&&(o[t]=0)}}const u=Ga[t];let d,f;if(u)return t==="$attrs"&&Je(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==ie&&Jt(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,Jt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return kd(i,t)?(i[t]=n,!0):s!==ie&&Jt(s,t)?(s[t]=n,!0):Jt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==ie&&Jt(e,o)||kd(t,o)||(a=r[0])&&Jt(a,o)||Jt(s,o)||Jt(Ga,o)||Jt(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Jt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function vv(e){return Et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Tf=!0;function rC(e){const t=Fp(e),n=e.proxy,s=e.ctx;Tf=!1,t.beforeCreate&&_v(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:_,deactivated:y,beforeDestroy:T,beforeUnmount:k,destroyed:D,unmounted:R,render:O,renderTracked:N,renderTriggered:I,errorCaptured:b,serverPrefetch:w,expose:x,inheritAttrs:C,components:A,directives:S,filters:dt}=t;if(c&&oC(c,s,null),o)for(const ot in o){const gt=o[ot];Rt(gt)&&(s[ot]=gt.bind(n))}if(i){const ot=i.call(n,n);ue(ot)&&(e.data=Ko(ot))}if(Tf=!0,r)for(const ot in r){const gt=r[ot],Vt=Rt(gt)?gt.bind(n,n):Rt(gt.get)?gt.get.bind(n,n):Qn,W=!Rt(gt)&&Rt(gt.set)?gt.set.bind(n):Qn,St=K({get:Vt,set:W});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>St.value,set:et=>St.value=et})}if(a)for(const ot in a)a1(a[ot],s,n,ot);if(l){const ot=Rt(l)?l.call(n):l;Reflect.ownKeys(ot).forEach(gt=>{Di(gt,ot[gt])})}u&&_v(u,e,"c");function at(ot,gt){Et(gt)?gt.forEach(Vt=>ot(Vt.bind(n))):gt&&ot(gt.bind(n))}if(at(Kx,d),at(Ss,f),at(Gx,p),at(Xx,m),at(Wx,_),at(Yx,y),at(tC,b),at(Zx,N),at(Jx,I),at(s1,k),at(Go,R),at(Qx,w),Et(x))if(x.length){const ot=e.exposed||(e.exposed={});x.forEach(gt=>{Object.defineProperty(ot,gt,{get:()=>n[gt],set:Vt=>n[gt]=Vt})})}else e.exposed||(e.exposed={});O&&e.render===Qn&&(e.render=O),C!=null&&(e.inheritAttrs=C),A&&(e.components=A),S&&(e.directives=S),w&&e1(e)}function oC(e,t,n=Qn){Et(e)&&(e=If(e));for(const s in e){const i=e[s];let r;ue(i)?"default"in i?r=bn(i.from||s,i.default,!0):r=bn(i.from||s):r=bn(i),Fe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function _v(e,t,n){Zn(Et(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function a1(e,t,n,s){let i=s.includes(".")?b1(n,s):()=>n[s];if(me(e)){const r=t[e];Rt(r)&&dn(i,r)}else if(Rt(e))dn(i,e.bind(n));else if(ue(e))if(Et(e))e.forEach(r=>a1(r,t,n,s));else{const r=Rt(e.handler)?e.handler.bind(n):t[e.handler];Rt(r)&&dn(i,r,e)}}function Fp(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>Pu(l,c,o,!0)),Pu(l,t,o)),ue(t)&&r.set(t,l),l}function Pu(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Pu(e,r,n,!0),i&&i.forEach(o=>Pu(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=aC[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const aC={data:yv,props:bv,emits:bv,methods:Ma,computed:Ma,beforeCreate:cn,created:cn,beforeMount:cn,mounted:cn,beforeUpdate:cn,updated:cn,beforeDestroy:cn,beforeUnmount:cn,destroyed:cn,unmounted:cn,activated:cn,deactivated:cn,errorCaptured:cn,serverPrefetch:cn,components:Ma,directives:Ma,watch:cC,provide:yv,inject:lC};function yv(e,t){return t?e?function(){return Pe(Rt(e)?e.call(this,this):e,Rt(t)?t.call(this,this):t)}:t:e}function lC(e,t){return Ma(If(e),If(t))}function If(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function cn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ma(e,t){return e?Pe(Object.create(null),e,t):t}function bv(e,t){return e?Et(e)&&Et(t)?[...new Set([...e,...t])]:Pe(Object.create(null),vv(e),vv(t??{})):t}function cC(e,t){if(!e)return t;if(!t)return e;const n=Pe(Object.create(null),e);for(const s in t)n[s]=cn(e[s],t[s]);return n}function l1(){return{app:null,config:{isNativeTag:qA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uC=0;function hC(e,t){return function(s,i=null){Rt(s)||(s=Pe({},s)),i!=null&&!ue(i)&&(i=null);const r=l1(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:uC++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:C1,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&Rt(u.install)?(o.add(u),u.install(c,...d)):Rt(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||Pt(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),d&&t?t(p,u):e(p,u,f),l=!0,c._container=u,u.__vue_app__=c,Lh(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Zn(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=To;To=c;try{return u()}finally{To=d}}};return c}}let To=null;function Di(e,t){if(He){let n=He.provides;const s=He.parent&&He.parent.provides;s===n&&(n=He.provides=Object.create(s)),n[e]=t}}function bn(e,t,n=!1){const s=He||Ne;if(s||To){let i=To?To._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Rt(t)?t.call(s&&s.proxy):t}}const c1={},u1=()=>Object.create(c1),h1=e=>Object.getPrototypeOf(e)===c1;function dC(e,t,n,s=!1){const i={},r=u1();e.propsDefaults=Object.create(null),d1(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:Fw(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function fC(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Ht(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Rh(e.emitsOptions,f))continue;const p=t[f];if(l)if(Jt(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const m=Un(f);i[m]=Sf(l,a,m,p,e,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{d1(e,t,i,r)&&(c=!0);let u;for(const d in a)(!t||!Jt(t,d)&&((u=Ki(d))===d||!Jt(t,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Sf(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Jt(t,d))&&(delete r[d],c=!0)}c&&Bs(e.attrs,"set","")}function d1(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Wa(l))continue;const c=t[l];let u;i&&Jt(i,u=Un(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Rh(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Ht(n),c=a||ie;for(let u=0;u<r.length;u++){const d=r[u];n[d]=Sf(i,l,d,c[d],e,!Jt(c,d))}}return o}function Sf(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Jt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Rt(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=Yl(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ki(n))&&(s=!0))}return s}const pC=new WeakMap;function f1(e,t,n=!1){const s=n?pC:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!Rt(e)){const u=d=>{l=!0;const[f,p]=f1(d,t,!0);Pe(o,f),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return ue(e)&&s.set(e,_o),_o;if(Et(r))for(let u=0;u<r.length;u++){const d=Un(r[u]);wv(d)&&(o[d]=ie)}else if(r)for(const u in r){const d=Un(u);if(wv(d)){const f=r[u],p=o[d]=Et(f)||Rt(f)?{type:f}:Pe({},f),m=p.type;let _=!1,y=!0;if(Et(m))for(let T=0;T<m.length;++T){const k=m[T],D=Rt(k)&&k.name;if(D==="Boolean"){_=!0;break}else D==="String"&&(y=!1)}else _=Rt(m)&&m.name==="Boolean";p[0]=_,p[1]=y,(_||Jt(p,"default"))&&a.push(d)}}const c=[o,a];return ue(e)&&s.set(e,c),c}function wv(e){return e[0]!=="$"&&!Wa(e)}const Bp=e=>e[0]==="_"||e==="$stable",Up=e=>Et(e)?e.map(us):[us(e)],gC=(e,t,n)=>{if(t._n)return t;const s=be((...i)=>Up(t(...i)),n);return s._c=!1,s},p1=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Bp(i))continue;const r=e[i];if(Rt(r))t[i]=gC(i,r,s);else if(r!=null){const o=Up(r);t[i]=()=>o}}},g1=(e,t)=>{const n=Up(t);e.slots.default=()=>n},m1=(e,t,n)=>{for(const s in t)(n||!Bp(s))&&(e[s]=t[s])},mC=(e,t,n)=>{const s=e.slots=u1();if(e.vnode.shapeFlag&32){const i=t.__;i&&mf(s,"__",i,!0);const r=t._;r?(m1(s,t,n),n&&mf(s,"_",r,!0)):p1(t,s)}else t&&g1(e,t)},vC=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=ie;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:m1(i,t,n):(r=!t.$stable,p1(t,i)),o=t}else t&&(g1(e,t),o={default:1});if(r)for(const a in i)!Bp(a)&&o[a]==null&&delete i[a]},In=DC;function _C(e){return yC(e)}function yC(e,t){const n=Ah();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=Qn,insertStaticContent:m}=e,_=(P,M,V,j=null,B=null,z=null,st=void 0,G=null,X=!!M.dynamicChildren)=>{if(P===M)return;P&&!yr(P,M)&&(j=F(P),et(P,B,z,!0),P=null),M.patchFlag===-2&&(X=!1,M.dynamicChildren=null);const{type:Y,ref:pt,shapeFlag:nt}=M;switch(Y){case Mh:y(P,M,V,j);break;case tn:T(P,M,V,j);break;case Md:P==null&&k(M,V,j,st);break;case re:A(P,M,V,j,B,z,st,G,X);break;default:nt&1?O(P,M,V,j,B,z,st,G,X):nt&6?S(P,M,V,j,B,z,st,G,X):(nt&64||nt&128)&&Y.process(P,M,V,j,B,z,st,G,X,lt)}pt!=null&&B?Ka(pt,P&&P.ref,z,M||P,!M):pt==null&&P&&P.ref!=null&&Ka(P.ref,null,z,P,!0)},y=(P,M,V,j)=>{if(P==null)s(M.el=a(M.children),V,j);else{const B=M.el=P.el;M.children!==P.children&&c(B,M.children)}},T=(P,M,V,j)=>{P==null?s(M.el=l(M.children||""),V,j):M.el=P.el},k=(P,M,V,j)=>{[P.el,P.anchor]=m(P.children,M,V,j,P.el,P.anchor)},D=({el:P,anchor:M},V,j)=>{let B;for(;P&&P!==M;)B=f(P),s(P,V,j),P=B;s(M,V,j)},R=({el:P,anchor:M})=>{let V;for(;P&&P!==M;)V=f(P),i(P),P=V;i(M)},O=(P,M,V,j,B,z,st,G,X)=>{M.type==="svg"?st="svg":M.type==="math"&&(st="mathml"),P==null?N(M,V,j,B,z,st,G,X):w(P,M,B,z,st,G,X)},N=(P,M,V,j,B,z,st,G)=>{let X,Y;const{props:pt,shapeFlag:nt,transition:ht,dirs:yt}=P;if(X=P.el=o(P.type,z,pt&&pt.is,pt),nt&8?u(X,P.children):nt&16&&b(P.children,X,null,j,B,Dd(P,z),st,G),yt&&or(P,null,j,"created"),I(X,P,P.scopeId,st,j),pt){for(const At in pt)At!=="value"&&!Wa(At)&&r(X,At,null,pt[At],z,j);"value"in pt&&r(X,"value",null,pt.value,z),(Y=pt.onVnodeBeforeMount)&&rs(Y,j,P)}yt&&or(P,null,j,"beforeMount");const mt=bC(B,ht);mt&&ht.beforeEnter(X),s(X,M,V),((Y=pt&&pt.onVnodeMounted)||mt||yt)&&In(()=>{Y&&rs(Y,j,P),mt&&ht.enter(X),yt&&or(P,null,j,"mounted")},B)},I=(P,M,V,j,B)=>{if(V&&p(P,V),j)for(let z=0;z<j.length;z++)p(P,j[z]);if(B){let z=B.subTree;if(M===z||E1(z.type)&&(z.ssContent===M||z.ssFallback===M)){const st=B.vnode;I(P,st,st.scopeId,st.slotScopeIds,B.parent)}}},b=(P,M,V,j,B,z,st,G,X=0)=>{for(let Y=X;Y<P.length;Y++){const pt=P[Y]=G?_i(P[Y]):us(P[Y]);_(null,pt,M,V,j,B,z,st,G)}},w=(P,M,V,j,B,z,st)=>{const G=M.el=P.el;let{patchFlag:X,dynamicChildren:Y,dirs:pt}=M;X|=P.patchFlag&16;const nt=P.props||ie,ht=M.props||ie;let yt;if(V&&ar(V,!1),(yt=ht.onVnodeBeforeUpdate)&&rs(yt,V,M,P),pt&&or(M,P,V,"beforeUpdate"),V&&ar(V,!0),(nt.innerHTML&&ht.innerHTML==null||nt.textContent&&ht.textContent==null)&&u(G,""),Y?x(P.dynamicChildren,Y,G,V,j,Dd(M,B),z):st||gt(P,M,G,null,V,j,Dd(M,B),z,!1),X>0){if(X&16)C(G,nt,ht,V,B);else if(X&2&&nt.class!==ht.class&&r(G,"class",null,ht.class,B),X&4&&r(G,"style",nt.style,ht.style,B),X&8){const mt=M.dynamicProps;for(let At=0;At<mt.length;At++){const Ft=mt[At],ke=nt[Ft],Ee=ht[Ft];(Ee!==ke||Ft==="value")&&r(G,Ft,ke,Ee,B,V)}}X&1&&P.children!==M.children&&u(G,M.children)}else!st&&Y==null&&C(G,nt,ht,V,B);((yt=ht.onVnodeUpdated)||pt)&&In(()=>{yt&&rs(yt,V,M,P),pt&&or(M,P,V,"updated")},j)},x=(P,M,V,j,B,z,st)=>{for(let G=0;G<M.length;G++){const X=P[G],Y=M[G],pt=X.el&&(X.type===re||!yr(X,Y)||X.shapeFlag&198)?d(X.el):V;_(X,Y,pt,null,j,B,z,st,!0)}},C=(P,M,V,j,B)=>{if(M!==V){if(M!==ie)for(const z in M)!Wa(z)&&!(z in V)&&r(P,z,M[z],null,B,j);for(const z in V){if(Wa(z))continue;const st=V[z],G=M[z];st!==G&&z!=="value"&&r(P,z,G,st,B,j)}"value"in V&&r(P,"value",M.value,V.value,B)}},A=(P,M,V,j,B,z,st,G,X)=>{const Y=M.el=P?P.el:a(""),pt=M.anchor=P?P.anchor:a("");let{patchFlag:nt,dynamicChildren:ht,slotScopeIds:yt}=M;yt&&(G=G?G.concat(yt):yt),P==null?(s(Y,V,j),s(pt,V,j),b(M.children||[],V,pt,B,z,st,G,X)):nt>0&&nt&64&&ht&&P.dynamicChildren?(x(P.dynamicChildren,ht,V,B,z,st,G),(M.key!=null||B&&M===B.subTree)&&v1(P,M,!0)):gt(P,M,V,pt,B,z,st,G,X)},S=(P,M,V,j,B,z,st,G,X)=>{M.slotScopeIds=G,P==null?M.shapeFlag&512?B.ctx.activate(M,V,j,st,X):dt(M,V,j,B,z,st,X):J(P,M,X)},dt=(P,M,V,j,B,z,st)=>{const G=P.component=VC(P,j,B);if(Ph(P)&&(G.ctx.renderer=lt),$C(G,!1,st),G.asyncDep){if(B&&B.registerDep(G,at,st),!P.el){const X=G.subTree=Pt(tn);T(null,X,M,V)}}else at(G,P,M,V,B,z,st)},J=(P,M,V)=>{const j=M.component=P.component;if(PC(P,M,V))if(j.asyncDep&&!j.asyncResolved){ot(j,M,V);return}else j.next=M,j.update();else M.el=P.el,j.vnode=M},at=(P,M,V,j,B,z,st)=>{const G=()=>{if(P.isMounted){let{next:nt,bu:ht,u:yt,parent:mt,vnode:At}=P;{const _e=_1(P);if(_e){nt&&(nt.el=At.el,ot(P,nt,st)),_e.asyncDep.then(()=>{P.isUnmounted||G()});return}}let Ft=nt,ke;ar(P,!1),nt?(nt.el=At.el,ot(P,nt,st)):nt=At,ht&&eu(ht),(ke=nt.props&&nt.props.onVnodeBeforeUpdate)&&rs(ke,mt,nt,At),ar(P,!0);const Ee=Rd(P),ln=P.subTree;P.subTree=Ee,_(ln,Ee,d(ln.el),F(ln),P,B,z),nt.el=Ee.el,Ft===null&&kC(P,Ee.el),yt&&In(yt,B),(ke=nt.props&&nt.props.onVnodeUpdated)&&In(()=>rs(ke,mt,nt,At),B)}else{let nt;const{el:ht,props:yt}=M,{bm:mt,m:At,parent:Ft,root:ke,type:Ee}=P,ln=Eo(M);if(ar(P,!1),mt&&eu(mt),!ln&&(nt=yt&&yt.onVnodeBeforeMount)&&rs(nt,Ft,M),ar(P,!0),ht&&Wt){const _e=()=>{P.subTree=Rd(P),Wt(ht,P.subTree,P,B,null)};ln&&Ee.__asyncHydrate?Ee.__asyncHydrate(ht,P,_e):_e()}else{ke.ce&&ke.ce._def.shadowRoot!==!1&&ke.ce._injectChildStyle(Ee);const _e=P.subTree=Rd(P);_(null,_e,V,j,P,B,z),M.el=_e.el}if(At&&In(At,B),!ln&&(nt=yt&&yt.onVnodeMounted)){const _e=M;In(()=>rs(nt,Ft,_e),B)}(M.shapeFlag&256||Ft&&Eo(Ft.vnode)&&Ft.vnode.shapeFlag&256)&&P.a&&In(P.a,B),P.isMounted=!0,M=V=j=null}};P.scope.on();const X=P.effect=new Sw(G);P.scope.off();const Y=P.update=X.run.bind(X),pt=P.job=X.runIfDirty.bind(X);pt.i=P,pt.id=P.uid,X.scheduler=()=>Np(pt),ar(P,!0),Y()},ot=(P,M,V)=>{M.component=P;const j=P.vnode.props;P.vnode=M,P.next=null,fC(P,M.props,j,V),vC(P,M.children,V),Ks(),pv(P),Gs()},gt=(P,M,V,j,B,z,st,G,X=!1)=>{const Y=P&&P.children,pt=P?P.shapeFlag:0,nt=M.children,{patchFlag:ht,shapeFlag:yt}=M;if(ht>0){if(ht&128){W(Y,nt,V,j,B,z,st,G,X);return}else if(ht&256){Vt(Y,nt,V,j,B,z,st,G,X);return}}yt&8?(pt&16&&jt(Y,B,z),nt!==Y&&u(V,nt)):pt&16?yt&16?W(Y,nt,V,j,B,z,st,G,X):jt(Y,B,z,!0):(pt&8&&u(V,""),yt&16&&b(nt,V,j,B,z,st,G,X))},Vt=(P,M,V,j,B,z,st,G,X)=>{P=P||_o,M=M||_o;const Y=P.length,pt=M.length,nt=Math.min(Y,pt);let ht;for(ht=0;ht<nt;ht++){const yt=M[ht]=X?_i(M[ht]):us(M[ht]);_(P[ht],yt,V,null,B,z,st,G,X)}Y>pt?jt(P,B,z,!0,!1,nt):b(M,V,j,B,z,st,G,X,nt)},W=(P,M,V,j,B,z,st,G,X)=>{let Y=0;const pt=M.length;let nt=P.length-1,ht=pt-1;for(;Y<=nt&&Y<=ht;){const yt=P[Y],mt=M[Y]=X?_i(M[Y]):us(M[Y]);if(yr(yt,mt))_(yt,mt,V,null,B,z,st,G,X);else break;Y++}for(;Y<=nt&&Y<=ht;){const yt=P[nt],mt=M[ht]=X?_i(M[ht]):us(M[ht]);if(yr(yt,mt))_(yt,mt,V,null,B,z,st,G,X);else break;nt--,ht--}if(Y>nt){if(Y<=ht){const yt=ht+1,mt=yt<pt?M[yt].el:j;for(;Y<=ht;)_(null,M[Y]=X?_i(M[Y]):us(M[Y]),V,mt,B,z,st,G,X),Y++}}else if(Y>ht)for(;Y<=nt;)et(P[Y],B,z,!0),Y++;else{const yt=Y,mt=Y,At=new Map;for(Y=mt;Y<=ht;Y++){const Ie=M[Y]=X?_i(M[Y]):us(M[Y]);Ie.key!=null&&At.set(Ie.key,Y)}let Ft,ke=0;const Ee=ht-mt+1;let ln=!1,_e=0;const is=new Array(Ee);for(Y=0;Y<Ee;Y++)is[Y]=0;for(Y=yt;Y<=nt;Y++){const Ie=P[Y];if(ke>=Ee){et(Ie,B,z,!0);continue}let H;if(Ie.key!=null)H=At.get(Ie.key);else for(Ft=mt;Ft<=ht;Ft++)if(is[Ft-mt]===0&&yr(Ie,M[Ft])){H=Ft;break}H===void 0?et(Ie,B,z,!0):(is[H-mt]=Y+1,H>=_e?_e=H:ln=!0,_(Ie,M[H],V,null,B,z,st,G,X),ke++)}const tr=ln?wC(is):_o;for(Ft=tr.length-1,Y=Ee-1;Y>=0;Y--){const Ie=mt+Y,H=M[Ie],tt=Ie+1<pt?M[Ie+1].el:j;is[Y]===0?_(null,H,V,tt,B,z,st,G,X):ln&&(Ft<0||Y!==tr[Ft]?St(H,V,tt,2):Ft--)}}},St=(P,M,V,j,B=null)=>{const{el:z,type:st,transition:G,children:X,shapeFlag:Y}=P;if(Y&6){St(P.component.subTree,M,V,j);return}if(Y&128){P.suspense.move(M,V,j);return}if(Y&64){st.move(P,M,V,lt);return}if(st===re){s(z,M,V);for(let nt=0;nt<X.length;nt++)St(X[nt],M,V,j);s(P.anchor,M,V);return}if(st===Md){D(P,M,V);return}if(j!==2&&Y&1&&G)if(j===0)G.beforeEnter(z),s(z,M,V),In(()=>G.enter(z),B);else{const{leave:nt,delayLeave:ht,afterLeave:yt}=G,mt=()=>{P.ctx.isUnmounted?i(z):s(z,M,V)},At=()=>{nt(z,()=>{mt(),yt&&yt()})};ht?ht(z,mt,At):At()}else s(z,M,V)},et=(P,M,V,j=!1,B=!1)=>{const{type:z,props:st,ref:G,children:X,dynamicChildren:Y,shapeFlag:pt,patchFlag:nt,dirs:ht,cacheIndex:yt}=P;if(nt===-2&&(B=!1),G!=null&&(Ks(),Ka(G,null,V,P,!0),Gs()),yt!=null&&(M.renderCache[yt]=void 0),pt&256){M.ctx.deactivate(P);return}const mt=pt&1&&ht,At=!Eo(P);let Ft;if(At&&(Ft=st&&st.onVnodeBeforeUnmount)&&rs(Ft,M,P),pt&6)qt(P.component,V,j);else{if(pt&128){P.suspense.unmount(V,j);return}mt&&or(P,null,M,"beforeUnmount"),pt&64?P.type.remove(P,M,V,lt,j):Y&&!Y.hasOnce&&(z!==re||nt>0&&nt&64)?jt(Y,M,V,!1,!0):(z===re&&nt&384||!B&&pt&16)&&jt(X,M,V),j&&kt(P)}(At&&(Ft=st&&st.onVnodeUnmounted)||mt)&&In(()=>{Ft&&rs(Ft,M,P),mt&&or(P,null,M,"unmounted")},V)},kt=P=>{const{type:M,el:V,anchor:j,transition:B}=P;if(M===re){Mt(V,j);return}if(M===Md){R(P);return}const z=()=>{i(V),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(P.shapeFlag&1&&B&&!B.persisted){const{leave:st,delayLeave:G}=B,X=()=>st(V,z);G?G(P.el,z,X):X()}else z()},Mt=(P,M)=>{let V;for(;P!==M;)V=f(P),i(P),P=V;i(M)},qt=(P,M,V)=>{const{bum:j,scope:B,job:z,subTree:st,um:G,m:X,a:Y,parent:pt,slots:{__:nt}}=P;Ev(X),Ev(Y),j&&eu(j),pt&&Et(nt)&&nt.forEach(ht=>{pt.renderCache[ht]=void 0}),B.stop(),z&&(z.flags|=8,et(st,P,M,V)),G&&In(G,M),In(()=>{P.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},jt=(P,M,V,j=!1,B=!1,z=0)=>{for(let st=z;st<P.length;st++)et(P[st],M,V,j,B)},F=P=>{if(P.shapeFlag&6)return F(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const M=f(P.anchor||P.el),V=M&&M[Ux];return V?f(V):M};let it=!1;const Z=(P,M,V)=>{P==null?M._vnode&&et(M._vnode,null,null,!0):_(M._vnode||null,P,M,null,null,null,V),M._vnode=P,it||(it=!0,pv(),Yw(),it=!1)},lt={p:_,um:et,m:St,r:kt,mt:dt,mc:b,pc:gt,pbc:x,n:F,o:e};let Ot,Wt;return t&&([Ot,Wt]=t(lt)),{render:Z,hydrate:Ot,createApp:hC(Z,Ot)}}function Dd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ar({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function bC(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function v1(e,t,n=!1){const s=e.children,i=t.children;if(Et(s)&&Et(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=_i(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&v1(o,a)),a.type===Mh&&(a.el=o.el),a.type===tn&&!a.el&&(a.el=o.el)}}function wC(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function _1(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_1(t)}function Ev(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const EC=Symbol.for("v-scx"),TC=()=>bn(EC);function y1(e,t){return jp(e,null,t)}function dn(e,t,n){return jp(e,t,n)}function jp(e,t,n=ie){const{immediate:s,deep:i,flush:r,once:o}=n,a=Pe({},n),l=t&&s||!t&&r!=="post";let c;if(yl){if(r==="sync"){const p=TC();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Qn,p.resume=Qn,p.pause=Qn,p}}const u=He;a.call=(p,m,_)=>Zn(p,u,m,_);let d=!1;r==="post"?a.scheduler=p=>{In(p,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(p,m)=>{m?p():Np(p)}),a.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=Vx(e,t,a);return yl&&(c?c.push(f):l&&f()),f}function IC(e,t,n){const s=this.proxy,i=me(e)?e.includes(".")?b1(s,e):()=>s[e]:e.bind(s,s);let r;Rt(t)?r=t:(r=t.handler,n=t);const o=Yl(this),a=jp(i,r.bind(s),n);return o(),a}function b1(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const SC=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Un(t)}Modifiers`]||e[`${Ki(t)}Modifiers`];function AC(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||ie;let i=n;const r=t.startsWith("update:"),o=r&&SC(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>me(u)?u.trim():u)),o.number&&(i=n.map(vf)));let a,l=s[a=tu(t)]||s[a=tu(Un(t))];!l&&r&&(l=s[a=tu(Ki(t))]),l&&Zn(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Zn(c,e,6,i)}}function w1(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!Rt(e)){const l=c=>{const u=w1(c,t,!0);u&&(a=!0,Pe(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(ue(e)&&s.set(e,null),null):(Et(r)?r.forEach(l=>o[l]=null):Pe(o,r),ue(e)&&s.set(e,o),o)}function Rh(e,t){return!e||!Eh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Jt(e,t[0].toLowerCase()+t.slice(1))||Jt(e,Ki(t))||Jt(e,t))}function Rd(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:m,inheritAttrs:_}=e,y=xu(e);let T,k;try{if(n.shapeFlag&4){const R=i||s,O=R;T=us(c.call(O,R,u,d,p,f,m)),k=a}else{const R=t;T=us(R.length>1?R(d,{attrs:a,slots:o,emit:l}):R(d,null)),k=t.props?a:xC(a)}}catch(R){Xa.length=0,Ch(R,e,1),T=Pt(tn)}let D=T;if(k&&_!==!1){const R=Object.keys(k),{shapeFlag:O}=D;R.length&&O&7&&(r&&R.some(Ap)&&(k=CC(k,r)),D=Fi(D,k,!1,!0))}return n.dirs&&(D=Fi(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&ml(D,n.transition),T=D,xu(y),T}const xC=e=>{let t;for(const n in e)(n==="class"||n==="style"||Eh(n))&&((t||(t={}))[n]=e[n]);return t},CC=(e,t)=>{const n={};for(const s in e)(!Ap(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function PC(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Tv(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==s[f]&&!Rh(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Tv(s,o,c):!0:!!o;return!1}function Tv(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Rh(n,r))return!0}return!1}function kC({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const E1=e=>e.__isSuspense;function DC(e,t){t&&t.pendingBranch?Et(e)?t.effects.push(...e):t.effects.push(e):Bx(e)}const re=Symbol.for("v-fgt"),Mh=Symbol.for("v-txt"),tn=Symbol.for("v-cmt"),Md=Symbol.for("v-stc"),Xa=[];let An=null;function ut(e=!1){Xa.push(An=e?null:[])}function RC(){Xa.pop(),An=Xa[Xa.length-1]||null}let vl=1;function Iv(e,t=!1){vl+=e,e<0&&An&&t&&(An.hasOnce=!0)}function T1(e){return e.dynamicChildren=vl>0?An||_o:null,RC(),vl>0&&An&&An.push(e),e}function vt(e,t,n,s,i,r){return T1(Q(e,t,n,s,i,r,!0))}function jn(e,t,n,s,i){return T1(Pt(e,t,n,s,i,!0))}function _l(e){return e?e.__v_isVNode===!0:!1}function yr(e,t){return e.type===t.type&&e.key===t.key}const I1=({key:e})=>e??null,nu=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?me(e)||Fe(e)||Rt(e)?{i:Ne,r:e,k:t,f:!!n}:e:null);function Q(e,t=null,n=null,s=0,i=null,r=e===re?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&I1(t),ref:t&&nu(t),scopeId:Kw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ne};return a?(Hp(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=me(n)?8:16),vl>0&&!o&&An&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&An.push(l),l}const Pt=MC;function MC(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===i1)&&(e=tn),_l(e)){const a=Fi(e,t,!0);return n&&Hp(a,n),vl>0&&!r&&An&&(a.shapeFlag&6?An[An.indexOf(e)]=a:An.push(a)),a.patchFlag=-2,a}if(HC(e)&&(e=e.__vccOpts),t){t=OC(t);let{class:a,style:l}=t;a&&!me(a)&&(t.class=oe(a)),ue(l)&&(Hl(l)&&!Et(l)&&(l=Pe({},l)),t.style=en(l))}const o=me(e)?1:E1(e)?128:Gw(e)?64:ue(e)?4:Rt(e)?2:0;return Q(e,t,n,s,i,o,r,!0)}function OC(e){return e?Hl(e)||h1(e)?Pe({},e):e:null}function Fi(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Wl(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&I1(c),ref:t&&t.ref?n&&r?Et(r)?r.concat(nu(t)):[r,nu(t)]:nu(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==re?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fi(e.ssContent),ssFallback:e.ssFallback&&Fi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ml(u,l.clone(u)),u}function Oh(e=" ",t=0){return Pt(Mh,null,e,t)}function nn(e="",t=!1){return t?(ut(),jn(tn,null,e)):Pt(tn,null,e)}function us(e){return e==null||typeof e=="boolean"?Pt(tn):Et(e)?Pt(re,null,e.slice()):_l(e)?_i(e):Pt(Mh,null,String(e))}function _i(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Fi(e)}function Hp(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Et(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Hp(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!h1(t)?t._ctx=Ne:i===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Rt(t)?(t={default:t,_ctx:Ne},n=32):(t=String(t),s&64?(n=16,t=[Oh(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wl(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=oe([t.class,s.class]));else if(i==="style")t.style=en([t.style,s.style]);else if(Eh(i)){const r=t[i],o=s[i];o&&r!==o&&!(Et(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function rs(e,t,n,s=null){Zn(e,t,7,[n,s])}const LC=l1();let NC=0;function VC(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||LC,r={uid:NC++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ox(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:f1(s,i),emitsOptions:w1(s,i),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:s.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=AC.bind(null,r),e.ce&&e.ce(r),r}let He=null;const S1=()=>He||Ne;let ku,Af;{const e=Ah(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};ku=t("__VUE_INSTANCE_SETTERS__",n=>He=n),Af=t("__VUE_SSR_SETTERS__",n=>yl=n)}const Yl=e=>{const t=He;return ku(e),e.scope.on(),()=>{e.scope.off(),ku(t)}},Sv=()=>{He&&He.scope.off(),ku(null)};function A1(e){return e.vnode.shapeFlag&4}let yl=!1;function $C(e,t=!1,n=!1){t&&Af(t);const{props:s,children:i}=e.vnode,r=A1(e);dC(e,s,r,t),mC(e,i,n||t);const o=r?FC(e,t):void 0;return t&&Af(!1),o}function FC(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,iC);const{setup:s}=n;if(s){Ks();const i=e.setupContext=s.length>1?UC(e):null,r=Yl(e),o=zl(s,e,0,[e.props,i]),a=yw(o);if(Gs(),r(),(a||e.sp)&&!Eo(e)&&e1(e),a){if(o.then(Sv,Sv),t)return o.then(l=>{Av(e,l,t)}).catch(l=>{Ch(l,e,0)});e.asyncDep=o}else Av(e,o,t)}else x1(e,t)}function Av(e,t,n){Rt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ue(t)&&(e.setupState=jw(t)),x1(e,n)}let xv;function x1(e,t,n){const s=e.type;if(!e.render){if(!t&&xv&&!s.render){const i=s.template||Fp(e).template;if(i){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,c=Pe(Pe({isCustomElement:r,delimiters:a},o),l);s.render=xv(i,c)}}e.render=s.render||Qn}{const i=Yl(e);Ks();try{rC(e)}finally{Gs(),i()}}}const BC={get(e,t){return Je(e,"get",""),e[t]}};function UC(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,BC),slots:e.slots,emit:e.emit,expose:t}}function Lh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(jw(xx(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ga)return Ga[n](e)},has(t,n){return n in t||n in Ga}})):e.proxy}function jC(e,t=!0){return Rt(e)?e.displayName||e.name:e.name||t&&e.__name}function HC(e){return Rt(e)&&"__vccOpts"in e}const K=(e,t)=>Lx(e,t,yl);function Do(e,t,n){const s=arguments.length;return s===2?ue(t)&&!Et(t)?_l(t)?Pt(e,null,[t]):Pt(e,t):Pt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&_l(n)&&(n=[n]),Pt(e,t,n))}const C1="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xf;const Cv=typeof window<"u"&&window.trustedTypes;if(Cv)try{xf=Cv.createPolicy("vue",{createHTML:e=>e})}catch{}const P1=xf?e=>xf.createHTML(e):e=>e,zC="http://www.w3.org/2000/svg",WC="http://www.w3.org/1998/Math/MathML",Vs=typeof document<"u"?document:null,Pv=Vs&&Vs.createElement("template"),YC={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Vs.createElementNS(zC,e):t==="mathml"?Vs.createElementNS(WC,e):n?Vs.createElement(e,{is:n}):Vs.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Vs.createTextNode(e),createComment:e=>Vs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Pv.innerHTML=P1(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Pv.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hi="transition",Ea="animation",bl=Symbol("_vtc"),k1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},qC=Pe({},Xw,k1),KC=e=>(e.displayName="Transition",e.props=qC,e),Nh=KC((e,{slots:t})=>Do(zx,GC(e),t)),lr=(e,t=[])=>{Et(e)?e.forEach(n=>n(...t)):e&&e(...t)},kv=e=>e?Et(e)?e.some(t=>t.length>1):e.length>1:!1;function GC(e){const t={};for(const A in e)A in k1||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=XC(i),_=m&&m[0],y=m&&m[1],{onBeforeEnter:T,onEnter:k,onEnterCancelled:D,onLeave:R,onLeaveCancelled:O,onBeforeAppear:N=T,onAppear:I=k,onAppearCancelled:b=D}=t,w=(A,S,dt,J)=>{A._enterCancelled=J,cr(A,S?u:a),cr(A,S?c:o),dt&&dt()},x=(A,S)=>{A._isLeaving=!1,cr(A,d),cr(A,p),cr(A,f),S&&S()},C=A=>(S,dt)=>{const J=A?I:k,at=()=>w(S,A,dt);lr(J,[S,at]),Dv(()=>{cr(S,A?l:r),Rs(S,A?u:a),kv(J)||Rv(S,s,_,at)})};return Pe(t,{onBeforeEnter(A){lr(T,[A]),Rs(A,r),Rs(A,o)},onBeforeAppear(A){lr(N,[A]),Rs(A,l),Rs(A,c)},onEnter:C(!1),onAppear:C(!0),onLeave(A,S){A._isLeaving=!0;const dt=()=>x(A,S);Rs(A,d),A._enterCancelled?(Rs(A,f),Lv()):(Lv(),Rs(A,f)),Dv(()=>{A._isLeaving&&(cr(A,d),Rs(A,p),kv(R)||Rv(A,s,y,dt))}),lr(R,[A,dt])},onEnterCancelled(A){w(A,!1,void 0,!0),lr(D,[A])},onAppearCancelled(A){w(A,!0,void 0,!0),lr(b,[A])},onLeaveCancelled(A){x(A),lr(O,[A])}})}function XC(e){if(e==null)return null;if(ue(e))return[Od(e.enter),Od(e.leave)];{const t=Od(e);return[t,t]}}function Od(e){return JA(e)}function Rs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[bl]||(e[bl]=new Set)).add(t)}function cr(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[bl];n&&(n.delete(t),n.size||(e[bl]=void 0))}function Dv(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let QC=0;function Rv(e,t,n,s){const i=e._endId=++QC,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=JC(e,t);if(!o)return s();const c=o+"end";let u=0;const d=()=>{e.removeEventListener(c,f),r()},f=p=>{p.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,f)}function JC(e,t){const n=window.getComputedStyle(e),s=m=>(n[m]||"").split(", "),i=s(`${hi}Delay`),r=s(`${hi}Duration`),o=Mv(i,r),a=s(`${Ea}Delay`),l=s(`${Ea}Duration`),c=Mv(a,l);let u=null,d=0,f=0;t===hi?o>0&&(u=hi,d=o,f=r.length):t===Ea?c>0&&(u=Ea,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?hi:Ea:null,f=u?u===hi?r.length:l.length:0);const p=u===hi&&/\b(transform|all)(,|$)/.test(s(`${hi}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function Mv(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Ov(n)+Ov(e[s])))}function Ov(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Lv(){return document.body.offsetHeight}function ZC(e,t,n){const s=e[bl];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Nv=Symbol("_vod"),tP=Symbol("_vsh"),eP=Symbol(""),nP=/(^|;)\s*display\s*:/;function sP(e,t,n){const s=e.style,i=me(n);let r=!1;if(n&&!i){if(t)if(me(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&su(s,a,"")}else for(const o in t)n[o]==null&&su(s,o,"");for(const o in n)o==="display"&&(r=!0),su(s,o,n[o])}else if(i){if(t!==n){const o=s[eP];o&&(n+=";"+o),s.cssText=n,r=nP.test(n)}}else t&&e.removeAttribute("style");Nv in e&&(e[Nv]=r?s.display:"",e[tP]&&(s.display="none"))}const Vv=/\s*!important$/;function su(e,t,n){if(Et(n))n.forEach(s=>su(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=iP(e,t);Vv.test(n)?e.setProperty(Ki(s),n.replace(Vv,""),"important"):e[s]=n}}const $v=["Webkit","Moz","ms"],Ld={};function iP(e,t){const n=Ld[t];if(n)return n;let s=Un(t);if(s!=="filter"&&s in e)return Ld[t]=s;s=Sh(s);for(let i=0;i<$v.length;i++){const r=$v[i]+s;if(r in e)return Ld[t]=r}return t}const Fv="http://www.w3.org/1999/xlink";function Bv(e,t,n,s,i,r=rx(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Fv,t.slice(6,t.length)):e.setAttributeNS(Fv,t,n):n==null||r&&!Ew(n)?e.removeAttribute(t):e.setAttribute(t,r?"":ni(n)?String(n):n)}function Uv(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?P1(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Ew(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function lo(e,t,n,s){e.addEventListener(t,n,s)}function rP(e,t,n,s){e.removeEventListener(t,n,s)}const jv=Symbol("_vei");function oP(e,t,n,s,i=null){const r=e[jv]||(e[jv]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=aP(t);if(s){const c=r[t]=uP(s,i);lo(e,a,c,l)}else o&&(rP(e,a,o,l),r[t]=void 0)}}const Hv=/(?:Once|Passive|Capture)$/;function aP(e){let t;if(Hv.test(e)){t={};let s;for(;s=e.match(Hv);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ki(e.slice(2)),t]}let Nd=0;const lP=Promise.resolve(),cP=()=>Nd||(lP.then(()=>Nd=0),Nd=Date.now());function uP(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Zn(hP(s,n.value),t,5,[s])};return n.value=e,n.attached=cP(),n}function hP(e,t){if(Et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const zv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,dP=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?ZC(e,s,o):t==="style"?sP(e,n,s):Eh(t)?Ap(t)||oP(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):fP(e,t,s,o))?(Uv(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Bv(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!me(s))?Uv(e,Un(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Bv(e,t,s,o))};function fP(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&zv(t)&&Rt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return zv(t)&&me(n)?!1:t in e}const Wv=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Et(t)?n=>eu(t,n):t};function pP(e){e.target.composing=!0}function Yv(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Vd=Symbol("_assign"),qv={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[Vd]=Wv(i);const r=s||i.props&&i.props.type==="number";lo(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=vf(a)),e[Vd](a)}),n&&lo(e,"change",()=>{e.value=e.value.trim()}),t||(lo(e,"compositionstart",pP),lo(e,"compositionend",Yv),lo(e,"change",Yv))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[Vd]=Wv(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?vf(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},gP=["ctrl","shift","alt","meta"],mP={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>gP.some(n=>e[`${n}Key`]&&!t.includes(n))},zp=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=mP[t[o]];if(a&&a(i,t))return}return e(i,...r)})},vP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Kv=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=Ki(i.key);if(t.some(o=>o===r||vP[o]===r))return e(i)})},_P=Pe({patchProp:dP},YC);let Gv;function yP(){return Gv||(Gv=_C(_P))}const bP=(...e)=>{const t=yP().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=EP(s);if(!i)return;const r=t._component;!Rt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,wP(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function wP(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function EP(e){return me(e)?document.querySelector(e):e}const Gi=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},TP={__name:"App",setup(e){return(t,n)=>{const s=$s("router-view");return ut(),jn(s)}}},IP=Gi(TP,[["__scopeId","data-v-9e390217"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const co=typeof document<"u";function D1(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function SP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&D1(e.default)}const Qt=Object.assign;function $d(e,t){const n={};for(const s in t){const i=t[s];n[s]=ts(i)?i.map(e):e(i)}return n}const Qa=()=>{},ts=Array.isArray,R1=/#/g,AP=/&/g,xP=/\//g,CP=/=/g,PP=/\?/g,M1=/\+/g,kP=/%5B/g,DP=/%5D/g,O1=/%5E/g,RP=/%60/g,L1=/%7B/g,MP=/%7C/g,N1=/%7D/g,OP=/%20/g;function Wp(e){return encodeURI(""+e).replace(MP,"|").replace(kP,"[").replace(DP,"]")}function LP(e){return Wp(e).replace(L1,"{").replace(N1,"}").replace(O1,"^")}function Cf(e){return Wp(e).replace(M1,"%2B").replace(OP,"+").replace(R1,"%23").replace(AP,"%26").replace(RP,"`").replace(L1,"{").replace(N1,"}").replace(O1,"^")}function NP(e){return Cf(e).replace(CP,"%3D")}function VP(e){return Wp(e).replace(R1,"%23").replace(PP,"%3F")}function $P(e){return e==null?"":VP(e).replace(xP,"%2F")}function wl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const FP=/\/$/,BP=e=>e.replace(FP,"");function Fd(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=zP(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:wl(o)}}function UP(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Xv(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function jP(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Ro(t.matched[s],n.matched[i])&&V1(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ro(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function V1(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!HP(e[n],t[n]))return!1;return!0}function HP(e,t){return ts(e)?Qv(e,t):ts(t)?Qv(t,e):e===t}function Qv(e,t){return ts(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function zP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const di={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var El;(function(e){e.pop="pop",e.push="push"})(El||(El={}));var Ja;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ja||(Ja={}));function WP(e){if(!e)if(co){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),BP(e)}const YP=/^[^#]+#/;function qP(e,t){return e.replace(YP,"#")+t}function KP(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Vh=()=>({left:window.scrollX,top:window.scrollY});function GP(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=KP(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Jv(e,t){return(history.state?history.state.position-t:-1)+e}const Pf=new Map;function XP(e,t){Pf.set(e,t)}function QP(e){const t=Pf.get(e);return Pf.delete(e),t}let JP=()=>location.protocol+"//"+location.host;function $1(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Xv(l,"")}return Xv(n,e)+s+i}function ZP(e,t,n,s){let i=[],r=[],o=null;const a=({state:f})=>{const p=$1(e,location),m=n.value,_=t.value;let y=0;if(f){if(n.value=p,t.value=f,o&&o===m){o=null;return}y=_?f.position-_.position:0}else s(p);i.forEach(T=>{T(n.value,m,{delta:y,type:El.pop,direction:y?y>0?Ja.forward:Ja.back:Ja.unknown})})};function l(){o=n.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return r.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(Qt({},f.state,{scroll:Vh()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Zv(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Vh():null}}function tk(e){const{history:t,location:n}=window,s={value:$1(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:JP()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),n[u?"replace":"assign"](f)}}function o(l,c){const u=Qt({},t.state,Zv(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=Qt({},i.value,t.state,{forward:l,scroll:Vh()});r(u.current,u,!0);const d=Qt({},Zv(s.value,l,null),{position:u.position+1},c);r(l,d,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function ek(e){e=WP(e);const t=tk(e),n=ZP(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Qt({location:"",base:e,go:s,createHref:qP.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function nk(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),ek(e)}function sk(e){return typeof e=="string"||e&&typeof e=="object"}function F1(e){return typeof e=="string"||typeof e=="symbol"}const B1=Symbol("");var t_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(t_||(t_={}));function Mo(e,t){return Qt(new Error,{type:e,[B1]:!0},t)}function Ms(e,t){return e instanceof Error&&B1 in e&&(t==null||!!(e.type&t))}const e_="[^/]+?",ik={sensitive:!1,strict:!1,start:!0,end:!0},rk=/[.+*?^${}()[\]/\\]/g;function ok(e,t){const n=Qt({},ik,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=40+(n.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(rk,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:_,optional:y,regexp:T}=f;r.push({name:m,repeatable:_,optional:y});const k=T||e_;if(k!==e_){p+=10;try{new RegExp(`(${k})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${m}" (${k}): `+R.message)}}let D=_?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(D=y&&c.length<2?`(?:/${D})`:"/"+D),y&&(D+="?"),i+=D,p+=20,y&&(p+=-8),_&&(p+=-20),k===".*"&&(p+=-50)}u.push(p)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=r[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:_,optional:y}=p,T=m in c?c[m]:"";if(ts(T)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const k=ts(T)?T.join("/"):T;if(!k)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=k}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function ak(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function U1(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=ak(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(n_(s))return 1;if(n_(i))return-1}return i.length-s.length}function n_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const lk={type:0,value:""},ck=/[a-zA-Z0-9_]/;function uk(e){if(!e)return[[]];if(e==="/")return[[lk]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:ck.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function hk(e,t,n){const s=ok(uk(e.path),n),i=Qt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function dk(e,t){const n=[],s=new Map;t=o_({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function r(d,f,p){const m=!p,_=i_(d);_.aliasOf=p&&p.record;const y=o_(t,d),T=[_];if("alias"in d){const R=typeof d.alias=="string"?[d.alias]:d.alias;for(const O of R)T.push(i_(Qt({},_,{components:p?p.record.components:_.components,path:O,aliasOf:p?p.record:_})))}let k,D;for(const R of T){const{path:O}=R;if(f&&O[0]!=="/"){const N=f.record.path,I=N[N.length-1]==="/"?"":"/";R.path=f.record.path+(O&&I+O)}if(k=hk(R,f,y),p?p.alias.push(k):(D=D||k,D!==k&&D.alias.push(k),m&&d.name&&!r_(k)&&o(d.name)),j1(k)&&l(k),_.children){const N=_.children;for(let I=0;I<N.length;I++)r(N[I],k,p&&p.children[I])}p=p||k}return D?()=>{o(D)}:Qa}function o(d){if(F1(d)){const f=s.get(d);f&&(s.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=gk(d,n);n.splice(f,0,d),d.record.name&&!r_(d)&&s.set(d.record.name,d)}function c(d,f){let p,m={},_,y;if("name"in d&&d.name){if(p=s.get(d.name),!p)throw Mo(1,{location:d});y=p.record.name,m=Qt(s_(f.params,p.keys.filter(D=>!D.optional).concat(p.parent?p.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),d.params&&s_(d.params,p.keys.map(D=>D.name))),_=p.stringify(m)}else if(d.path!=null)_=d.path,p=n.find(D=>D.re.test(_)),p&&(m=p.parse(_),y=p.record.name);else{if(p=f.name?s.get(f.name):n.find(D=>D.re.test(f.path)),!p)throw Mo(1,{location:d,currentLocation:f});y=p.record.name,m=Qt({},f.params,d.params),_=p.stringify(m)}const T=[];let k=p;for(;k;)T.unshift(k.record),k=k.parent;return{name:y,path:_,params:m,matched:T,meta:pk(T)}}e.forEach(d=>r(d));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function s_(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function i_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:fk(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function fk(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function r_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function pk(e){return e.reduce((t,n)=>Qt(t,n.meta),{})}function o_(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function gk(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;U1(e,t[r])<0?s=r:n=r+1}const i=mk(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function mk(e){let t=e;for(;t=t.parent;)if(j1(t)&&U1(e,t)===0)return t}function j1({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function vk(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(M1," "),o=r.indexOf("="),a=wl(o<0?r:r.slice(0,o)),l=o<0?null:wl(r.slice(o+1));if(a in t){let c=t[a];ts(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function a_(e){let t="";for(let n in e){const s=e[n];if(n=NP(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(ts(s)?s.map(r=>r&&Cf(r)):[s&&Cf(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function _k(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=ts(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const yk=Symbol(""),l_=Symbol(""),$h=Symbol(""),H1=Symbol(""),kf=Symbol("");function Ta(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function yi(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Mo(4,{from:n,to:t})):f instanceof Error?l(f):sk(f)?l(Mo(2,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Bd(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(D1(l)){const u=(l.__vccOpts||l)[t];u&&r.push(yi(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=SP(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const p=(d.__vccOpts||d)[t];return p&&yi(p,n,s,o,a,i)()}))}}return r}function c_(e){const t=bn($h),n=bn(H1),s=K(()=>{const l=ft(e.to);return t.resolve(l)}),i=K(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Ro.bind(null,u));if(f>-1)return f;const p=u_(l[c-2]);return c>1&&u_(u)===p&&d[d.length-1].path!==p?d.findIndex(Ro.bind(null,l[c-2])):f}),r=K(()=>i.value>-1&&Ik(n.params,s.value.params)),o=K(()=>i.value>-1&&i.value===n.matched.length-1&&V1(n.params,s.value.params));function a(l={}){if(Tk(l)){const c=t[ft(e.replace)?"replace":"push"](ft(e.to)).catch(Qa);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:K(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function bk(e){return e.length===1?e[0]:e}const wk=on({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:c_,setup(e,{slots:t}){const n=Ko(c_(e)),{options:s}=bn($h),i=K(()=>({[h_(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[h_(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&bk(t.default(n));return e.custom?r:Do("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),Ek=wk;function Tk(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ik(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!ts(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function u_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const h_=(e,t,n)=>e??t??n,Sk=on({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=bn(kf),i=K(()=>e.route||s.value),r=bn(l_,0),o=K(()=>{let c=ft(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=K(()=>i.value.matched[o.value]);Di(l_,K(()=>o.value+1)),Di(yk,a),Di(kf,i);const l=Nt();return dn(()=>[l.value,a.value,e.name],([c,u,d],[f,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ro(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,d=a.value,f=d&&d.components[u];if(!f)return d_(n.default,{Component:f,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=Do(f,Qt({},m,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return d_(n.default,{Component:y,route:c})||y}}});function d_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ak=Sk;function xk(e){const t=dk(e.routes,e),n=e.parseQuery||vk,s=e.stringifyQuery||a_,i=e.history,r=Ta(),o=Ta(),a=Ta(),l=Lp(di);let c=di;co&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=$d.bind(null,F=>""+F),d=$d.bind(null,$P),f=$d.bind(null,wl);function p(F,it){let Z,lt;return F1(F)?(Z=t.getRecordMatcher(F),lt=it):lt=F,t.addRoute(lt,Z)}function m(F){const it=t.getRecordMatcher(F);it&&t.removeRoute(it)}function _(){return t.getRoutes().map(F=>F.record)}function y(F){return!!t.getRecordMatcher(F)}function T(F,it){if(it=Qt({},it||l.value),typeof F=="string"){const M=Fd(n,F,it.path),V=t.resolve({path:M.path},it),j=i.createHref(M.fullPath);return Qt(M,V,{params:f(V.params),hash:wl(M.hash),redirectedFrom:void 0,href:j})}let Z;if(F.path!=null)Z=Qt({},F,{path:Fd(n,F.path,it.path).path});else{const M=Qt({},F.params);for(const V in M)M[V]==null&&delete M[V];Z=Qt({},F,{params:d(M)}),it.params=d(it.params)}const lt=t.resolve(Z,it),Ot=F.hash||"";lt.params=u(f(lt.params));const Wt=UP(s,Qt({},F,{hash:LP(Ot),path:lt.path})),P=i.createHref(Wt);return Qt({fullPath:Wt,hash:Ot,query:s===a_?_k(F.query):F.query||{}},lt,{redirectedFrom:void 0,href:P})}function k(F){return typeof F=="string"?Fd(n,F,l.value.path):Qt({},F)}function D(F,it){if(c!==F)return Mo(8,{from:it,to:F})}function R(F){return I(F)}function O(F){return R(Qt(k(F),{replace:!0}))}function N(F){const it=F.matched[F.matched.length-1];if(it&&it.redirect){const{redirect:Z}=it;let lt=typeof Z=="function"?Z(F):Z;return typeof lt=="string"&&(lt=lt.includes("?")||lt.includes("#")?lt=k(lt):{path:lt},lt.params={}),Qt({query:F.query,hash:F.hash,params:lt.path!=null?{}:F.params},lt)}}function I(F,it){const Z=c=T(F),lt=l.value,Ot=F.state,Wt=F.force,P=F.replace===!0,M=N(Z);if(M)return I(Qt(k(M),{state:typeof M=="object"?Qt({},Ot,M.state):Ot,force:Wt,replace:P}),it||Z);const V=Z;V.redirectedFrom=it;let j;return!Wt&&jP(s,lt,Z)&&(j=Mo(16,{to:V,from:lt}),St(lt,lt,!0,!1)),(j?Promise.resolve(j):x(V,lt)).catch(B=>Ms(B)?Ms(B,2)?B:W(B):gt(B,V,lt)).then(B=>{if(B){if(Ms(B,2))return I(Qt({replace:P},k(B.to),{state:typeof B.to=="object"?Qt({},Ot,B.to.state):Ot,force:Wt}),it||V)}else B=A(V,lt,!0,P,Ot);return C(V,lt,B),B})}function b(F,it){const Z=D(F,it);return Z?Promise.reject(Z):Promise.resolve()}function w(F){const it=Mt.values().next().value;return it&&typeof it.runWithContext=="function"?it.runWithContext(F):F()}function x(F,it){let Z;const[lt,Ot,Wt]=Ck(F,it);Z=Bd(lt.reverse(),"beforeRouteLeave",F,it);for(const M of lt)M.leaveGuards.forEach(V=>{Z.push(yi(V,F,it))});const P=b.bind(null,F,it);return Z.push(P),jt(Z).then(()=>{Z=[];for(const M of r.list())Z.push(yi(M,F,it));return Z.push(P),jt(Z)}).then(()=>{Z=Bd(Ot,"beforeRouteUpdate",F,it);for(const M of Ot)M.updateGuards.forEach(V=>{Z.push(yi(V,F,it))});return Z.push(P),jt(Z)}).then(()=>{Z=[];for(const M of Wt)if(M.beforeEnter)if(ts(M.beforeEnter))for(const V of M.beforeEnter)Z.push(yi(V,F,it));else Z.push(yi(M.beforeEnter,F,it));return Z.push(P),jt(Z)}).then(()=>(F.matched.forEach(M=>M.enterCallbacks={}),Z=Bd(Wt,"beforeRouteEnter",F,it,w),Z.push(P),jt(Z))).then(()=>{Z=[];for(const M of o.list())Z.push(yi(M,F,it));return Z.push(P),jt(Z)}).catch(M=>Ms(M,8)?M:Promise.reject(M))}function C(F,it,Z){a.list().forEach(lt=>w(()=>lt(F,it,Z)))}function A(F,it,Z,lt,Ot){const Wt=D(F,it);if(Wt)return Wt;const P=it===di,M=co?history.state:{};Z&&(lt||P?i.replace(F.fullPath,Qt({scroll:P&&M&&M.scroll},Ot)):i.push(F.fullPath,Ot)),l.value=F,St(F,it,Z,P),W()}let S;function dt(){S||(S=i.listen((F,it,Z)=>{if(!qt.listening)return;const lt=T(F),Ot=N(lt);if(Ot){I(Qt(Ot,{replace:!0,force:!0}),lt).catch(Qa);return}c=lt;const Wt=l.value;co&&XP(Jv(Wt.fullPath,Z.delta),Vh()),x(lt,Wt).catch(P=>Ms(P,12)?P:Ms(P,2)?(I(Qt(k(P.to),{force:!0}),lt).then(M=>{Ms(M,20)&&!Z.delta&&Z.type===El.pop&&i.go(-1,!1)}).catch(Qa),Promise.reject()):(Z.delta&&i.go(-Z.delta,!1),gt(P,lt,Wt))).then(P=>{P=P||A(lt,Wt,!1),P&&(Z.delta&&!Ms(P,8)?i.go(-Z.delta,!1):Z.type===El.pop&&Ms(P,20)&&i.go(-1,!1)),C(lt,Wt,P)}).catch(Qa)}))}let J=Ta(),at=Ta(),ot;function gt(F,it,Z){W(F);const lt=at.list();return lt.length?lt.forEach(Ot=>Ot(F,it,Z)):console.error(F),Promise.reject(F)}function Vt(){return ot&&l.value!==di?Promise.resolve():new Promise((F,it)=>{J.add([F,it])})}function W(F){return ot||(ot=!F,dt(),J.list().forEach(([it,Z])=>F?Z(F):it()),J.reset()),F}function St(F,it,Z,lt){const{scrollBehavior:Ot}=e;if(!co||!Ot)return Promise.resolve();const Wt=!Z&&QP(Jv(F.fullPath,0))||(lt||!Z)&&history.state&&history.state.scroll||null;return Cr().then(()=>Ot(F,it,Wt)).then(P=>P&&GP(P)).catch(P=>gt(P,F,it))}const et=F=>i.go(F);let kt;const Mt=new Set,qt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:_,resolve:T,options:e,push:R,replace:O,go:et,back:()=>et(-1),forward:()=>et(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:at.add,isReady:Vt,install(F){const it=this;F.component("RouterLink",Ek),F.component("RouterView",Ak),F.config.globalProperties.$router=it,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(l)}),co&&!kt&&l.value===di&&(kt=!0,R(i.location).catch(Ot=>{}));const Z={};for(const Ot in di)Object.defineProperty(Z,Ot,{get:()=>l.value[Ot],enumerable:!0});F.provide($h,it),F.provide(H1,Fw(Z)),F.provide(kf,l);const lt=F.unmount;Mt.add(F),F.unmount=function(){Mt.delete(F),Mt.size<1&&(c=di,S&&S(),S=null,l.value=di,kt=!1,ot=!1),lt()}}};function jt(F){return F.reduce((it,Z)=>it.then(()=>w(Z)),Promise.resolve())}return qt}function Ck(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>Ro(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Ro(c,l))||i.push(l))}return[n,s,i]}function Yp(){return bn($h)}const Pk=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},kk=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},W1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),s.push(n[u],n[d],n[f],n[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(z1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):kk(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new Dk;const f=r<<2|a>>4;if(s.push(f),c!==64){const p=a<<4&240|c>>2;if(s.push(p),d!==64){const m=c<<6&192|d;s.push(m)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Dk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rk=function(e){const t=z1(e);return W1.encodeByteArray(t,!0)},Du=function(e){return Rk(e).replace(/\./g,"")},Y1=function(e){try{return W1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=()=>Mk().__FIREBASE_DEFAULTS__,Lk=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Nk=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Y1(e[1]);return t&&JSON.parse(t)},Fh=()=>{try{return Pk()||Ok()||Lk()||Nk()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},q1=e=>{var t,n;return(n=(t=Fh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Vk=e=>{const t=q1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},K1=()=>{var e;return(e=Fh())===null||e===void 0?void 0:e.config},G1=e=>{var t;return(t=Fh())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Du(JSON.stringify(n)),Du(JSON.stringify(o)),a].join(".")}const Za={};function Bk(){const e={prod:[],emulator:[]};for(const t of Object.keys(Za))Za[t]?e.emulator.push(t):e.prod.push(t);return e}function Uk(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let f_=!1;function Q1(e,t){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||Za[e]===t||Za[e]||f_)return;Za[e]=t;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=Bk().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{f_=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Uk(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),y=document.getElementById(_)||document.createElement("a"),T=n("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const D=f.element;a(D),u(y,_);const R=c();l(k,T),D.append(k,m,y,R),document.body.appendChild(D)}r?(m.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function Hk(){var e;const t=(e=Fh())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wk(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Yk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qk(){const e=sn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Kk(){return!Hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gk(){try{return typeof indexedDB=="object"}catch{return!1}}function Xk(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="FirebaseError";class ii extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Qk,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?Jk(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ii(i,a,s)}}function Jk(e,t){return e.replace(Zk,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const Zk=/\{\$([^}]+)}/g;function tD(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Pr(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(p_(r)&&p_(o)){if(!Pr(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function p_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Oa(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function La(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function eD(e,t){const n=new nD(e,t);return n.subscribe.bind(n)}class nD{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");sD(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Ud),i.error===void 0&&(i.error=Ud),i.complete===void 0&&(i.complete=Ud);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sD(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e){return e&&e._delegate?e._delegate:e}class kr{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new $k;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oD(t))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=gr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gr){return this.instances.has(t)}getOptions(t=gr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rD(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=gr){return this.component?this.component.multipleInstances?t:gr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rD(e){return e===gr?void 0:e}function oD(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new iD(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bt||(Bt={}));const lD={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},cD=Bt.INFO,uD={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},hD=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=uD[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class qp{constructor(t){this.name=t,this._logLevel=cD,this._logHandler=hD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...t),this._logHandler(this,Bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...t),this._logHandler(this,Bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...t),this._logHandler(this,Bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...t),this._logHandler(this,Bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...t),this._logHandler(this,Bt.ERROR,...t)}}const dD=(e,t)=>t.some(n=>e instanceof n);let g_,m_;function fD(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pD(){return m_||(m_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J1=new WeakMap,Df=new WeakMap,Z1=new WeakMap,jd=new WeakMap,Kp=new WeakMap;function gD(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Ri(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&J1.set(n,e)}).catch(()=>{}),Kp.set(t,e),t}function mD(e){if(Df.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Df.set(e,t)}let Rf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Df.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Z1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function vD(e){Rf=e(Rf)}function _D(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Hd(this),t,...n);return Z1.set(s,t.sort?t.sort():[t]),Ri(s)}:pD().includes(e)?function(...t){return e.apply(Hd(this),t),Ri(J1.get(this))}:function(...t){return Ri(e.apply(Hd(this),t))}}function yD(e){return typeof e=="function"?_D(e):(e instanceof IDBTransaction&&mD(e),dD(e,fD())?new Proxy(e,Rf):e)}function Ri(e){if(e instanceof IDBRequest)return gD(e);if(jd.has(e))return jd.get(e);const t=yD(e);return t!==e&&(jd.set(e,t),Kp.set(t,e)),t}const Hd=e=>Kp.get(e);function bD(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Ri(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ri(o.result),l.oldVersion,l.newVersion,Ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const wD=["get","getKey","getAll","getAllKeys","count"],ED=["put","add","delete","clear"],zd=new Map;function v_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(zd.get(t))return zd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=ED.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||wD.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zd.set(t,r),r}vD(e=>({...e,get:(t,n,s)=>v_(t,n)||e.get(t,n,s),has:(t,n)=>!!v_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ID(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function ID(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Mf="@firebase/app",__="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new qp("@firebase/app"),SD="@firebase/app-compat",AD="@firebase/analytics-compat",xD="@firebase/analytics",CD="@firebase/app-check-compat",PD="@firebase/app-check",kD="@firebase/auth",DD="@firebase/auth-compat",RD="@firebase/database",MD="@firebase/data-connect",OD="@firebase/database-compat",LD="@firebase/functions",ND="@firebase/functions-compat",VD="@firebase/installations",$D="@firebase/installations-compat",FD="@firebase/messaging",BD="@firebase/messaging-compat",UD="@firebase/performance",jD="@firebase/performance-compat",HD="@firebase/remote-config",zD="@firebase/remote-config-compat",WD="@firebase/storage",YD="@firebase/storage-compat",qD="@firebase/firestore",KD="@firebase/ai",GD="@firebase/firestore-compat",XD="firebase",QD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="[DEFAULT]",JD={[Mf]:"fire-core",[SD]:"fire-core-compat",[xD]:"fire-analytics",[AD]:"fire-analytics-compat",[PD]:"fire-app-check",[CD]:"fire-app-check-compat",[kD]:"fire-auth",[DD]:"fire-auth-compat",[RD]:"fire-rtdb",[MD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[LD]:"fire-fn",[ND]:"fire-fn-compat",[VD]:"fire-iid",[$D]:"fire-iid-compat",[FD]:"fire-fcm",[BD]:"fire-fcm-compat",[UD]:"fire-perf",[jD]:"fire-perf-compat",[HD]:"fire-rc",[zD]:"fire-rc-compat",[WD]:"fire-gcs",[YD]:"fire-gcs-compat",[qD]:"fire-fst",[GD]:"fire-fst-compat",[KD]:"fire-vertex","fire-js":"fire-js",[XD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,ZD=new Map,Lf=new Map;function y_(e,t){try{e.container.addComponent(t)}catch(n){Xs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Oo(e){const t=e.name;if(Lf.has(t))return Xs.debug(`There were multiple attempts to register component ${t}.`),!1;Lf.set(t,e);for(const n of Ru.values())y_(n,e);for(const n of ZD.values())y_(n,e);return!0}function Gp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new ql("app","Firebase",tR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=QD;function tE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Of,automaticDataCollectionEnabled:!0},t),i=s.name;if(typeof i!="string"||!i)throw Mi.create("bad-app-name",{appName:String(i)});if(n||(n=K1()),!n)throw Mi.create("no-options");const r=Ru.get(i);if(r){if(Pr(n,r.options)&&Pr(s,r.config))return r;throw Mi.create("duplicate-app",{appName:i})}const o=new aD(i);for(const l of Lf.values())o.addComponent(l);const a=new eR(n,s,o);return Ru.set(i,a),a}function eE(e=Of){const t=Ru.get(e);if(!t&&e===Of&&K1())return tE();if(!t)throw Mi.create("no-app",{appName:e});return t}function Oi(e,t,n){var s;let i=(s=JD[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}Oo(new kr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firebase-heartbeat-database",sR=1,Tl="firebase-heartbeat-store";let Wd=null;function nE(){return Wd||(Wd=bD(nR,sR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Tl)}catch(n){console.warn(n)}}}}).catch(e=>{throw Mi.create("idb-open",{originalErrorMessage:e.message})})),Wd}async function iR(e){try{const n=(await nE()).transaction(Tl),s=await n.objectStore(Tl).get(sE(e));return await n.done,s}catch(t){if(t instanceof ii)Xs.warn(t.message);else{const n=Mi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xs.warn(n.message)}}}async function b_(e,t){try{const s=(await nE()).transaction(Tl,"readwrite");await s.objectStore(Tl).put(t,sE(e)),await s.done}catch(n){if(n instanceof ii)Xs.warn(n.message);else{const s=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(s.message)}}}function sE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=1024,oR=30;class aR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=w_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>oR){const o=uR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Xs.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=w_(),{heartbeatsToSend:s,unsentEntries:i}=lR(this._heartbeatsCache.heartbeats),r=Du(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Xs.warn(n),""}}}function w_(){return new Date().toISOString().substring(0,10)}function lR(e,t=rR){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),E_(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),E_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class cR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gk()?Xk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return b_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function E_(e){return Du(JSON.stringify({version:2,heartbeats:e})).length}function uR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(e){Oo(new kr("platform-logger",t=>new TD(t),"PRIVATE")),Oo(new kr("heartbeat",t=>new aR(t),"PRIVATE")),Oi(Mf,__,e),Oi(Mf,__,"esm2017"),Oi("fire-js","")}hR("");var dR="firebase",fR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(dR,fR,"app");function Xp(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function iE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pR=iE,rE=new ql("auth","Firebase",iE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new qp("@firebase/auth");function gR(e,...t){Mu.logLevel<=Bt.WARN&&Mu.warn(`Auth (${Qo}): ${e}`,...t)}function iu(e,...t){Mu.logLevel<=Bt.ERROR&&Mu.error(`Auth (${Qo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e,...t){throw Qp(e,...t)}function fs(e,...t){return Qp(e,...t)}function oE(e,t,n){const s=Object.assign(Object.assign({},pR()),{[t]:n});return new ql("auth","Firebase",s).create(t,{appName:e.name})}function Ys(e){return oE(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qp(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return rE.create(e,...t)}function Tt(e,t,...n){if(!e)throw Qp(t,...n)}function js(e){const t="INTERNAL ASSERTION FAILED: "+e;throw iu(t),new Error(t)}function Qs(e,t){e||js(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function mR(){return T_()==="http:"||T_()==="https:"}function T_(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mR()||Wk()||"connection"in navigator)?navigator.onLine:!0}function _R(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qs(n>t,"Short delay should be less than long delay!"),this.isMobile=jk()||Yk()}get(){return vR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(e,t){Qs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wR=new Gl(3e4,6e4);function Xi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Qi(e,t,n,s,i={}){return lE(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=Kl(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},r);return zk()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Xo(e.emulatorConfig.host)&&(c.credentials="include"),aE.fetch()(await cE(e,e.config.apiHost,n,a),c)})}async function lE(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},yR),t);try{const i=new TR(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Cc(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cc(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Cc(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Cc(e,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw oE(e,u,c);es(e,u)}}catch(i){if(i instanceof ii)throw i;es(e,"network-request-failed",{message:String(i)})}}async function Xl(e,t,n,s,i={}){const r=await Qi(e,t,n,s,i);return"mfaPendingCredential"in r&&es(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function cE(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?Jp(e.config,i):`${e.config.apiScheme}://${i}`;return bR.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function ER(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(fs(this.auth,"network-request-failed")),wR.get())})}}function Cc(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=fs(e,t,s);return i.customData._tokenResponse=n,i}function I_(e){return e!==void 0&&e.enterprise!==void 0}class IR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return ER(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SR(e,t){return Qi(e,"GET","/v2/recaptchaConfig",Xi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(e,t){return Qi(e,"POST","/v1/accounts:delete",t)}async function Ou(e,t){return Qi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xR(e,t=!1){const n=Hn(e),s=await n.getIdToken(t),i=Zp(s);Tt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:tl(Yd(i.auth_time)),issuedAtTime:tl(Yd(i.iat)),expirationTime:tl(Yd(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Yd(e){return Number(e)*1e3}function Zp(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y1(n);return i?JSON.parse(i):(iu("Failed to decode base64 JWT payload"),null)}catch(i){return iu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function S_(e){const t=Zp(e);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ii&&CR(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function CR({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(e){var t;const n=e.auth,s=await e.getIdToken(),i=await Il(e,Ou(n,{idToken:s}));Tt(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?uE(r.providerUserInfo):[],a=DR(e.providerData,o),l=e.isAnonymous,c=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Vf(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function kR(e){const t=Hn(e);await Lu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function DR(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function uE(e){return e.map(t=>{var{providerId:n}=t,s=Xp(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(e,t){const n=await lE(e,{},async()=>{const s=Kl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await cE(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Xo(e.emulatorConfig.host)&&(l.credentials="include"),aE.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MR(e,t){return Qi(e,"POST","/v2/accounts:revokeToken",Xi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):S_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const n=S_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await RR(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Io;return s&&(Tt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(Tt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(Tt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t){Tt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Gn{constructor(t){var{uid:n,auth:s,stsTokenManager:i}=t,r=Xp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Il(this,this.stsTokenManager.getToken(this.auth,t));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xR(this,t)}reload(){return kR(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Gn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Lu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Ys(this.auth));const t=await this.getIdToken();return await Il(this,AR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,i,r,o,a,l,c,u;const d=(s=n.displayName)!==null&&s!==void 0?s:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,k=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:D,emailVerified:R,isAnonymous:O,providerData:N,stsTokenManager:I}=n;Tt(D&&I,t,"internal-error");const b=Io.fromJSON(this.name,I);Tt(typeof D=="string",t,"internal-error"),fi(d,t.name),fi(f,t.name),Tt(typeof R=="boolean",t,"internal-error"),Tt(typeof O=="boolean",t,"internal-error"),fi(p,t.name),fi(m,t.name),fi(_,t.name),fi(y,t.name),fi(T,t.name),fi(k,t.name);const w=new Gn({uid:D,auth:t,email:f,emailVerified:R,displayName:d,isAnonymous:O,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:b,createdAt:T,lastLoginAt:k});return N&&Array.isArray(N)&&(w.providerData=N.map(x=>Object.assign({},x))),y&&(w._redirectEventId=y),w}static async _fromIdTokenResponse(t,n,s=!1){const i=new Io;i.updateFromServerResponse(n);const r=new Gn({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Lu(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];Tt(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?uE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),a=new Io;a.updateFromIdToken(s);const l=new Gn({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Vf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function Hs(e){Qs(e instanceof Function,"Expected a class definition");let t=A_.get(e);return t?(Qs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,A_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}hE.type="NONE";const x_=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(e,t,n){return`firebase:${e}:${t}:${n}`}class So{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=ru(this.userKey,i.apiKey,r),this.fullPersistenceKey=ru("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ou(this.auth,{idToken:t}).catch(()=>{});return n?Gn._fromGetAccountInfoResponse(this.auth,n,t):null}return Gn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new So(Hs(x_),t,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||Hs(x_);const o=ru(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await Ou(t,{idToken:u}).catch(()=>{});if(!f)break;d=await Gn._fromGetAccountInfoResponse(t,f,u)}else d=Gn._fromJSON(t,u);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new So(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new So(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(gE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vE(t))return"Blackberry";if(_E(t))return"Webos";if(fE(t))return"Safari";if((t.includes("chrome/")||pE(t))&&!t.includes("edge/"))return"Chrome";if(mE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dE(e=sn()){return/firefox\//i.test(e)}function fE(e=sn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function pE(e=sn()){return/crios\//i.test(e)}function gE(e=sn()){return/iemobile/i.test(e)}function mE(e=sn()){return/android/i.test(e)}function vE(e=sn()){return/blackberry/i.test(e)}function _E(e=sn()){return/webos/i.test(e)}function tg(e=sn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function OR(e=sn()){var t;return tg(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function LR(){return qk()&&document.documentMode===10}function yE(e=sn()){return tg(e)||mE(e)||_E(e)||vE(e)||/windows phone/i.test(e)||gE(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(e,t=[]){let n;switch(e){case"Browser":n=C_(sn());break;case"Worker":n=`${C_(sn())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(e,t={}){return Qi(e,"GET","/v2/passwordPolicy",Xi(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=6;class FR{constructor(t){var n,s,i,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:$R,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,i,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P_(this),this.idTokenSubscription=new P_(this),this.beforeStateQueue=new NR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hs(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await So.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ou(this,{idToken:t}),s=await Gn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Lu(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_R()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Mn(this.app))return Promise.reject(Ys(this));const n=t?Hn(t):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Mn(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await VR(this),n=new FR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ql("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await MR(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hs(t)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[Hs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&gR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ur(e){return Hn(e)}class P_{constructor(t){this.auth=t,this.observer=null,this.addObserver=eD(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UR(e){Bh=e}function wE(e){return Bh.loadJS(e)}function jR(){return Bh.recaptchaEnterpriseScript}function HR(){return Bh.gapiScript}function zR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class WR{constructor(){this.enterprise=new YR}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class YR{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const qR="recaptcha-enterprise",EE="NO_RECAPTCHA";class KR{constructor(t){this.type=qR,this.auth=Ur(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{SR(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new IR(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;I_(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(EE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WR().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&I_(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jR();l.length!==0&&(l+=a),wE(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ia(e,t,n,s=!1,i=!1){const r=new KR(e);let o;if(i)o=EE;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function $f(e,t,n,s,i){var r,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ia(e,t,n,n==="getOobCode");return s(e,a)}else return s(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ia(e,t,n,n==="getOobCode");return s(e,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=e._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Ia(e,t,n);return s(e,a).catch(async l=>{var c;if(((c=e._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Ia(e,t,n,!1,!0);return s(e,u)}return Promise.reject(l)})}else{const a=await Ia(e,t,n,!1,!0);return s(e,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(e,t){const n=Gp(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Pr(r,t??{}))return i;es(i,"already-initialized")}return n.initialize({options:t})}function XR(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Hs);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function QR(e,t,n){const s=Ur(e);Tt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),r=TE(t),{host:o,port:a}=JR(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Tt(Pr(c,s.config.emulator)&&Pr(u,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,Xo(o)?(X1(`${r}//${o}${l}`),Q1("Auth",!0)):i||ZR()}function TE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function JR(e){const t=TE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:k_(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:k_(o)}}}function k_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ZR(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(t){return js("not implemented")}_linkToIdToken(t,n){return js("not implemented")}_getReauthenticationResolver(t){return js("not implemented")}}async function tM(e,t){return Qi(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(e,t){return Xl(e,"POST","/v1/accounts:signInWithPassword",Xi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(e,t){return Xl(e,"POST","/v1/accounts:signInWithEmailLink",Xi(e,t))}async function sM(e,t){return Xl(e,"POST","/v1/accounts:signInWithEmailLink",Xi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends eg{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new Sl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Sl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $f(t,n,"signInWithPassword",eM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nM(t,{email:this._email,oobCode:this._password});default:es(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $f(t,s,"signUpPassword",tM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sM(t,{idToken:n,email:this._email,oobCode:this._password});default:es(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(e,t){return Xl(e,"POST","/v1/accounts:signInWithIdp",Xi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="http://localhost";class Dr extends eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Dr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=n,r=Xp(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Dr(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ao(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ao(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ao(t,n)}buildRequest(){const t={requestUri:iM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Kl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oM(e){const t=Oa(La(e)).link,n=t?Oa(La(t)).deep_link_id:null,s=Oa(La(e)).deep_link_id;return(s?Oa(La(s)).link:null)||s||n||t||e}class ng{constructor(t){var n,s,i,r,o,a;const l=Oa(La(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,d=rM((i=l.mode)!==null&&i!==void 0?i:null);Tt(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=oM(t);try{return new ng(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(t,n){return Sl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=ng.parseLink(n);return Tt(s,"argument-error"),Sl._fromEmailAndCode(t,s.code,s.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends IE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Ql{constructor(){super("facebook.com")}static credential(t){return Dr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bi.credentialFromTaggedObject(t)}static credentialFromError(t){return bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bi.credential(t.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Dr._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wi.credentialFromTaggedObject(t)}static credentialFromError(t){return wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return wi.credential(n,s)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Ql{constructor(){super("github.com")}static credential(t){return Dr._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ei.credentialFromTaggedObject(t)}static credentialFromError(t){return Ei.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ei.credential(t.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Ql{constructor(){super("twitter.com")}static credential(t,n){return Dr._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ti.credentialFromTaggedObject(t)}static credentialFromError(t){return Ti.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ti.credential(n,s)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(e,t){return Xl(e,"POST","/v1/accounts:signUp",Xi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await Gn._fromIdTokenResponse(t,s,i),o=D_(s);return new Rr({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=D_(s);return new Rr({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function D_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends ii{constructor(t,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new Nu(t,n,s,i)}}function SE(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(e,r,t,s):r})}async function lM(e,t,n=!1){const s=await Il(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Rr._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(e,t,n=!1){const{auth:s}=e;if(Mn(s.app))return Promise.reject(Ys(s));const i="reauthenticate";try{const r=await Il(e,SE(s,i,t,e),n);Tt(r.idToken,s,"internal-error");const o=Zp(r.idToken);Tt(o,s,"internal-error");const{sub:a}=o;return Tt(e.uid===a,s,"user-mismatch"),Rr._forOperation(e,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&es(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AE(e,t,n=!1){if(Mn(e.app))return Promise.reject(Ys(e));const s="signIn",i=await SE(e,s,t),r=await Rr._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function uM(e,t){return AE(Ur(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(e){const t=Ur(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function hM(e,t,n){if(Mn(e.app))return Promise.reject(Ys(e));const s=Ur(e),o=await $f(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aM,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xE(e),l}),a=await Rr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function dM(e,t,n){return Mn(e.app)?Promise.reject(Ys(e)):uM(Hn(e),Jo.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&xE(e),s})}function fM(e,t,n,s){return Hn(e).onIdTokenChanged(t,n,s)}function pM(e,t,n){return Hn(e).beforeAuthStateChanged(t,n)}function gM(e){return Hn(e).signOut()}const Vu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vu,"1"),this.storage.removeItem(Vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=1e3,vM=10;class PE extends CE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);LR()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,vM):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}PE.type="LOCAL";const _M=PE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends CE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kE.type="SESSION";const DE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Uh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await yM(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=sg("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(){return window}function wM(e){ps().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){return typeof ps().WorkerGlobalScope<"u"&&typeof ps().importScripts=="function"}async function EM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TM(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function IM(){return RE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebaseLocalStorageDb",SM=1,$u="firebaseLocalStorage",OE="fbase_key";class Jl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jh(e,t){return e.transaction([$u],t?"readwrite":"readonly").objectStore($u)}function AM(){const e=indexedDB.deleteDatabase(ME);return new Jl(e).toPromise()}function Ff(){const e=indexedDB.open(ME,SM);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore($u,{keyPath:OE})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains($u)?t(s):(s.close(),await AM(),t(await Ff()))})})}async function R_(e,t,n){const s=jh(e,!0).put({[OE]:t,value:n});return new Jl(s).toPromise()}async function xM(e,t){const n=jh(e,!1).get(t),s=await new Jl(n).toPromise();return s===void 0?null:s.value}function M_(e,t){const n=jh(e,!0).delete(t);return new Jl(n).toPromise()}const CM=800,PM=3;class LE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ff(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>PM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(IM()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await EM(),!this.activeServiceWorker)return;this.sender=new bM(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||TM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ff();return await R_(t,Vu,"1"),await M_(t,Vu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>R_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>xM(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>M_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=jh(i,!1).getAll();return new Jl(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LE.type="LOCAL";const kM=LE;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(e,t){return t?Hs(t):(Tt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends eg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ao(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ao(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ao(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function RM(e){return AE(e.auth,new ig(e),e.bypassAuthState)}function MM(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),cM(n,new ig(e),e.bypassAuthState)}async function OM(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),lM(n,new ig(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return RM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return MM;default:es(this.auth,"internal-error")}}resolve(t){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Gl(2e3,1e4);class mo extends NE{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Qs(this.filter.length===1,"Popup operations only handle one event");const t=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,LM.get())};t()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="pendingRedirect",ou=new Map;class VM extends NE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=ou.get(this.auth._key());if(!t){try{const s=await $M(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}ou.set(this.auth._key(),t)}return this.bypassAuthState||ou.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $M(e,t){const n=UM(t),s=BM(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function FM(e,t){ou.set(e._key(),t)}function BM(e){return Hs(e._redirectPersistence)}function UM(e){return ru(NM,e.config.apiKey,e.name)}async function jM(e,t,n=!1){if(Mn(e.app))return Promise.reject(Ys(e));const s=Ur(e),i=DM(s,t),o=await new VM(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=10*60*1e3;class zM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!WM(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!VE(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(fs(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=HM&&this.cachedEventUids.clear(),this.cachedEventUids.has(O_(t))}saveEventToCache(t){this.cachedEventUids.add(O_(t)),this.lastProcessedEventTime=Date.now()}}function O_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function VE({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function WM(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VE(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(e,t={}){return Qi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KM=/^https?/;async function GM(e){if(e.config.emulator)return;const{authorizedDomains:t}=await YM(e);for(const n of t)try{if(XM(n))return}catch{}es(e,"unauthorized-domain")}function XM(e){const t=Nf(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!KM.test(n))return!1;if(qM.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Gl(3e4,6e4);function L_(){const e=ps().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function JM(e){return new Promise((t,n)=>{var s,i,r;function o(){L_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{L_(),n(fs(e,"network-request-failed"))},timeout:QM.get()})}if(!((i=(s=ps().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((r=ps().gapi)===null||r===void 0)&&r.load)o();else{const a=zR("iframefcb");return ps()[a]=()=>{gapi.load?o():n(fs(e,"network-request-failed"))},wE(`${HR()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw au=null,t})}let au=null;function ZM(e){return au=au||JM(e),au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new Gl(5e3,15e3),eO="__/auth/iframe",nO="emulator/auth/iframe",sO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rO(e){const t=e.config;Tt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Jp(t,nO):`https://${e.config.authDomain}/${eO}`,s={apiKey:t.apiKey,appName:e.name,v:Qo},i=iO.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Kl(s).slice(1)}`}async function oO(e){const t=await ZM(e),n=ps().gapi;return Tt(n,e,"internal-error"),t.open({where:document.body,url:rO(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sO,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=fs(e,"network-request-failed"),a=ps().setTimeout(()=>{r(o)},tO.get());function l(){ps().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lO=500,cO=600,uO="_blank",hO="http://localhost";class N_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dO(e,t,n,s=lO,i=cO){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},aO),{width:s.toString(),height:i.toString(),top:r,left:o}),c=sn().toLowerCase();n&&(a=pE(c)?uO:n),dE(c)&&(t=t||hO,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(OR(c)&&a!=="_self")return fO(t||"",a),new N_(null);const d=window.open(t||"",a,u);Tt(d,e,"popup-blocked");try{d.focus()}catch{}return new N_(d)}function fO(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="__/auth/handler",gO="emulator/auth/handler",mO=encodeURIComponent("fac");async function V_(e,t,n,s,i,r){Tt(e.config.authDomain,e,"auth-domain-config-required"),Tt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Qo,eventId:i};if(t instanceof IE){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",tD(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,d]of Object.entries(r||{}))o[u]=d}if(t instanceof Ql){const u=t.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${mO}=${encodeURIComponent(l)}`:"";return`${vO(e)}?${Kl(a).slice(1)}${c}`}function vO({config:e}){return e.emulator?Jp(e,gO):`https://${e.authDomain}/${pO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class _O{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=jM,this._overrideRedirectResult=FM}async _openPopup(t,n,s,i){var r;Qs((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await V_(t,n,s,Nf(),i);return dO(t,o,sg())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await V_(t,n,s,Nf(),i);return wM(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(Qs(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await oO(t),s=new zM(t);return n.register("authEvent",i=>(Tt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(qd,{type:qd},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[qd];o!==void 0&&n(!!o),es(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GM(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return yE()||fE()||tg()}}const yO=_O;var $_="@firebase/auth",F_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EO(e){Oo(new kr("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Tt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bE(e)},c=new BR(s,i,r,l);return XR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Oo(new kr("auth-internal",t=>{const n=Ur(t.getProvider("auth").getImmediate());return(s=>new bO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi($_,F_,wO(e)),Oi($_,F_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=5*60,IO=G1("authIdTokenMaxAge")||TO;let B_=null;const SO=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>IO)return;const i=n==null?void 0:n.token;B_!==i&&(B_=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function AO(e=eE()){const t=Gp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=GR(e,{popupRedirectResolver:yO,persistence:[kM,_M,DE]}),s=G1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=SO(r.toString());pM(n,o,()=>o(n.currentUser)),fM(n,a=>o(a))}}const i=q1("auth");return i&&QR(n,`http://${i}`),n}function xO(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}UR({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=fs("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",xO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EO("Browser");var U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,$E;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,b){function w(){}w.prototype=b.prototype,I.D=b.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(x,C,A){for(var S=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)S[dt-2]=arguments[dt];return b.prototype[C].apply(x,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,b,w){w||(w=0);var x=Array(16);if(typeof b=="string")for(var C=0;16>C;++C)x[C]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(C=0;16>C;++C)x[C]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=I.g[0],w=I.g[1],C=I.g[2];var A=I.g[3],S=b+(A^w&(C^A))+x[0]+3614090360&4294967295;b=w+(S<<7&4294967295|S>>>25),S=A+(C^b&(w^C))+x[1]+3905402710&4294967295,A=b+(S<<12&4294967295|S>>>20),S=C+(w^A&(b^w))+x[2]+606105819&4294967295,C=A+(S<<17&4294967295|S>>>15),S=w+(b^C&(A^b))+x[3]+3250441966&4294967295,w=C+(S<<22&4294967295|S>>>10),S=b+(A^w&(C^A))+x[4]+4118548399&4294967295,b=w+(S<<7&4294967295|S>>>25),S=A+(C^b&(w^C))+x[5]+1200080426&4294967295,A=b+(S<<12&4294967295|S>>>20),S=C+(w^A&(b^w))+x[6]+2821735955&4294967295,C=A+(S<<17&4294967295|S>>>15),S=w+(b^C&(A^b))+x[7]+4249261313&4294967295,w=C+(S<<22&4294967295|S>>>10),S=b+(A^w&(C^A))+x[8]+1770035416&4294967295,b=w+(S<<7&4294967295|S>>>25),S=A+(C^b&(w^C))+x[9]+2336552879&4294967295,A=b+(S<<12&4294967295|S>>>20),S=C+(w^A&(b^w))+x[10]+4294925233&4294967295,C=A+(S<<17&4294967295|S>>>15),S=w+(b^C&(A^b))+x[11]+2304563134&4294967295,w=C+(S<<22&4294967295|S>>>10),S=b+(A^w&(C^A))+x[12]+1804603682&4294967295,b=w+(S<<7&4294967295|S>>>25),S=A+(C^b&(w^C))+x[13]+4254626195&4294967295,A=b+(S<<12&4294967295|S>>>20),S=C+(w^A&(b^w))+x[14]+2792965006&4294967295,C=A+(S<<17&4294967295|S>>>15),S=w+(b^C&(A^b))+x[15]+1236535329&4294967295,w=C+(S<<22&4294967295|S>>>10),S=b+(C^A&(w^C))+x[1]+4129170786&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^C&(b^w))+x[6]+3225465664&4294967295,A=b+(S<<9&4294967295|S>>>23),S=C+(b^w&(A^b))+x[11]+643717713&4294967295,C=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(C^A))+x[0]+3921069994&4294967295,w=C+(S<<20&4294967295|S>>>12),S=b+(C^A&(w^C))+x[5]+3593408605&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^C&(b^w))+x[10]+38016083&4294967295,A=b+(S<<9&4294967295|S>>>23),S=C+(b^w&(A^b))+x[15]+3634488961&4294967295,C=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(C^A))+x[4]+3889429448&4294967295,w=C+(S<<20&4294967295|S>>>12),S=b+(C^A&(w^C))+x[9]+568446438&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^C&(b^w))+x[14]+3275163606&4294967295,A=b+(S<<9&4294967295|S>>>23),S=C+(b^w&(A^b))+x[3]+4107603335&4294967295,C=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(C^A))+x[8]+1163531501&4294967295,w=C+(S<<20&4294967295|S>>>12),S=b+(C^A&(w^C))+x[13]+2850285829&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^C&(b^w))+x[2]+4243563512&4294967295,A=b+(S<<9&4294967295|S>>>23),S=C+(b^w&(A^b))+x[7]+1735328473&4294967295,C=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(C^A))+x[12]+2368359562&4294967295,w=C+(S<<20&4294967295|S>>>12),S=b+(w^C^A)+x[5]+4294588738&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^C)+x[8]+2272392833&4294967295,A=b+(S<<11&4294967295|S>>>21),S=C+(A^b^w)+x[11]+1839030562&4294967295,C=A+(S<<16&4294967295|S>>>16),S=w+(C^A^b)+x[14]+4259657740&4294967295,w=C+(S<<23&4294967295|S>>>9),S=b+(w^C^A)+x[1]+2763975236&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^C)+x[4]+1272893353&4294967295,A=b+(S<<11&4294967295|S>>>21),S=C+(A^b^w)+x[7]+4139469664&4294967295,C=A+(S<<16&4294967295|S>>>16),S=w+(C^A^b)+x[10]+3200236656&4294967295,w=C+(S<<23&4294967295|S>>>9),S=b+(w^C^A)+x[13]+681279174&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^C)+x[0]+3936430074&4294967295,A=b+(S<<11&4294967295|S>>>21),S=C+(A^b^w)+x[3]+3572445317&4294967295,C=A+(S<<16&4294967295|S>>>16),S=w+(C^A^b)+x[6]+76029189&4294967295,w=C+(S<<23&4294967295|S>>>9),S=b+(w^C^A)+x[9]+3654602809&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^C)+x[12]+3873151461&4294967295,A=b+(S<<11&4294967295|S>>>21),S=C+(A^b^w)+x[15]+530742520&4294967295,C=A+(S<<16&4294967295|S>>>16),S=w+(C^A^b)+x[2]+3299628645&4294967295,w=C+(S<<23&4294967295|S>>>9),S=b+(C^(w|~A))+x[0]+4096336452&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~C))+x[7]+1126891415&4294967295,A=b+(S<<10&4294967295|S>>>22),S=C+(b^(A|~w))+x[14]+2878612391&4294967295,C=A+(S<<15&4294967295|S>>>17),S=w+(A^(C|~b))+x[5]+4237533241&4294967295,w=C+(S<<21&4294967295|S>>>11),S=b+(C^(w|~A))+x[12]+1700485571&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~C))+x[3]+2399980690&4294967295,A=b+(S<<10&4294967295|S>>>22),S=C+(b^(A|~w))+x[10]+4293915773&4294967295,C=A+(S<<15&4294967295|S>>>17),S=w+(A^(C|~b))+x[1]+2240044497&4294967295,w=C+(S<<21&4294967295|S>>>11),S=b+(C^(w|~A))+x[8]+1873313359&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~C))+x[15]+4264355552&4294967295,A=b+(S<<10&4294967295|S>>>22),S=C+(b^(A|~w))+x[6]+2734768916&4294967295,C=A+(S<<15&4294967295|S>>>17),S=w+(A^(C|~b))+x[13]+1309151649&4294967295,w=C+(S<<21&4294967295|S>>>11),S=b+(C^(w|~A))+x[4]+4149444226&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~C))+x[11]+3174756917&4294967295,A=b+(S<<10&4294967295|S>>>22),S=C+(b^(A|~w))+x[2]+718787259&4294967295,C=A+(S<<15&4294967295|S>>>17),S=w+(A^(C|~b))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+A&4294967295}s.prototype.u=function(I,b){b===void 0&&(b=I.length);for(var w=b-this.blockSize,x=this.B,C=this.h,A=0;A<b;){if(C==0)for(;A<=w;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<b;)if(x[C++]=I.charCodeAt(A++),C==this.blockSize){i(this,x),C=0;break}}else for(;A<b;)if(x[C++]=I[A++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=b},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;var w=8*this.o;for(b=I.length-8;b<I.length;++b)I[b]=w&255,w/=256;for(this.u(I),I=Array(16),b=w=0;4>b;++b)for(var x=0;32>x;x+=8)I[w++]=this.g[b]>>>x&255;return I};function r(I,b){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=b(I)}function o(I,b){this.h=b;for(var w=[],x=!0,C=I.length-1;0<=C;C--){var A=I[C]|0;x&&A==b||(w[C]=A,x=!1)}this.g=w}var a={};function l(I){return-128<=I&&128>I?r(I,function(b){return new o([b|0],0>b?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return y(c(-I));for(var b=[],w=1,x=0;I>=w;x++)b[x]=I/w|0,w*=4294967296;return new o(b,0)}function u(I,b){if(I.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I.charAt(0)=="-")return y(u(I.substring(1),b));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(b,8)),x=d,C=0;C<I.length;C+=8){var A=Math.min(8,I.length-C),S=parseInt(I.substring(C,C+A),b);8>A?(A=c(Math.pow(b,A)),x=x.j(A).add(c(S))):(x=x.j(w),x=x.add(c(S)))}return x}var d=l(0),f=l(1),p=l(16777216);e=o.prototype,e.m=function(){if(_(this))return-y(this).m();for(var I=0,b=1,w=0;w<this.g.length;w++){var x=this.i(w);I+=(0<=x?x:4294967296+x)*b,b*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(m(this))return"0";if(_(this))return"-"+y(this).toString(I);for(var b=c(Math.pow(I,6)),w=this,x="";;){var C=R(w,b).g;w=T(w,C.j(b));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=C,m(w))return A+x;for(;6>A.length;)A="0"+A;x=A+x}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function m(I){if(I.h!=0)return!1;for(var b=0;b<I.g.length;b++)if(I.g[b]!=0)return!1;return!0}function _(I){return I.h==-1}e.l=function(I){return I=T(this,I),_(I)?-1:m(I)?0:1};function y(I){for(var b=I.g.length,w=[],x=0;x<b;x++)w[x]=~I.g[x];return new o(w,~I.h).add(f)}e.abs=function(){return _(this)?y(this):this},e.add=function(I){for(var b=Math.max(this.g.length,I.g.length),w=[],x=0,C=0;C<=b;C++){var A=x+(this.i(C)&65535)+(I.i(C)&65535),S=(A>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);x=S>>>16,A&=65535,S&=65535,w[C]=S<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function T(I,b){return I.add(y(b))}e.j=function(I){if(m(this)||m(I))return d;if(_(this))return _(I)?y(this).j(y(I)):y(y(this).j(I));if(_(I))return y(this.j(y(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var b=this.g.length+I.g.length,w=[],x=0;x<2*b;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<I.g.length;C++){var A=this.i(x)>>>16,S=this.i(x)&65535,dt=I.i(C)>>>16,J=I.i(C)&65535;w[2*x+2*C]+=S*J,k(w,2*x+2*C),w[2*x+2*C+1]+=A*J,k(w,2*x+2*C+1),w[2*x+2*C+1]+=S*dt,k(w,2*x+2*C+1),w[2*x+2*C+2]+=A*dt,k(w,2*x+2*C+2)}for(x=0;x<b;x++)w[x]=w[2*x+1]<<16|w[2*x];for(x=b;x<2*b;x++)w[x]=0;return new o(w,0)};function k(I,b){for(;(I[b]&65535)!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function D(I,b){this.g=I,this.h=b}function R(I,b){if(m(b))throw Error("division by zero");if(m(I))return new D(d,d);if(_(I))return b=R(y(I),b),new D(y(b.g),y(b.h));if(_(b))return b=R(I,y(b)),new D(y(b.g),b.h);if(30<I.g.length){if(_(I)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var w=f,x=b;0>=x.l(I);)w=O(w),x=O(x);var C=N(w,1),A=N(x,1);for(x=N(x,2),w=N(w,2);!m(x);){var S=A.add(x);0>=S.l(I)&&(C=C.add(w),A=S),x=N(x,1),w=N(w,1)}return b=T(I,C.j(b)),new D(C,b)}for(C=d;0<=I.l(b);){for(w=Math.max(1,Math.floor(I.m()/b.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),A=c(w),S=A.j(b);_(S)||0<S.l(I);)w-=x,A=c(w),S=A.j(b);m(A)&&(A=f),C=C.add(A),I=T(I,S)}return new D(C,I)}e.A=function(I){return R(this,I).h},e.and=function(I){for(var b=Math.max(this.g.length,I.g.length),w=[],x=0;x<b;x++)w[x]=this.i(x)&I.i(x);return new o(w,this.h&I.h)},e.or=function(I){for(var b=Math.max(this.g.length,I.g.length),w=[],x=0;x<b;x++)w[x]=this.i(x)|I.i(x);return new o(w,this.h|I.h)},e.xor=function(I){for(var b=Math.max(this.g.length,I.g.length),w=[],x=0;x<b;x++)w[x]=this.i(x)^I.i(x);return new o(w,this.h^I.h)};function O(I){for(var b=I.g.length+1,w=[],x=0;x<b;x++)w[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(w,I.h)}function N(I,b){var w=b>>5;b%=32;for(var x=I.g.length-w,C=[],A=0;A<x;A++)C[A]=0<b?I.i(A+w)>>>b|I.i(A+w+1)<<32-b:I.i(A+w);return new o(C,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,$E=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Li=o}).apply(typeof U_<"u"?U_:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,Na,BE,lu,Bf,UE,jE,HE;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,v){return h==Array.prototype||h==Object.prototype||(h[g]=v.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var g=0;g<h.length;++g){var v=h[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function i(h,g){if(g)t:{var v=s;h=h.split(".");for(var E=0;E<h.length-1;E++){var L=h[E];if(!(L in v))break t;v=v[L]}h=h[h.length-1],E=v[h],g=g(E),g!=E&&g!=null&&t(v,h,{configurable:!0,writable:!0,value:g})}}function r(h,g){h instanceof String&&(h+="");var v=0,E=!1,L={next:function(){if(!E&&v<h.length){var $=v++;return{value:g($,h[$]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return r(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,v){return h.call.apply(h.bind,arguments)}function d(h,g,v){if(!h)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function f(h,g,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(h,g){var v=Array.prototype.slice.call(arguments,1);return function(){var E=v.slice();return E.push.apply(E,arguments),h.apply(this,E)}}function m(h,g){function v(){}v.prototype=g.prototype,h.aa=g.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(E,L,$){for(var rt=Array(arguments.length-2),se=2;se<arguments.length;se++)rt[se-2]=arguments[se];return g.prototype[L].apply(E,rt)}}function _(h){const g=h.length;if(0<g){const v=Array(g);for(let E=0;E<g;E++)v[E]=h[E];return v}return[]}function y(h,g){for(let v=1;v<arguments.length;v++){const E=arguments[v];if(l(E)){const L=h.length||0,$=E.length||0;h.length=L+$;for(let rt=0;rt<$;rt++)h[L+rt]=E[rt]}else h.push(E)}}class T{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(h){return/^[\s\xa0]*$/.test(h)}function D(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function R(h){return R[" "](h),h}R[" "]=function(){};var O=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function N(h,g,v){for(const E in h)g.call(v,h[E],E,h)}function I(h,g){for(const v in h)g.call(void 0,h[v],v,h)}function b(h){const g={};for(const v in h)g[v]=h[v];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(h,g){let v,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(v in E)h[v]=E[v];for(let $=0;$<w.length;$++)v=w[$],Object.prototype.hasOwnProperty.call(E,v)&&(h[v]=E[v])}}function C(h){var g=1;h=h.split(":");const v=[];for(;0<g&&h.length;)v.push(h.shift()),g--;return h.length&&v.push(h.join(":")),v}function A(h){a.setTimeout(()=>{throw h},0)}function S(){var h=Vt;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class dt{constructor(){this.h=this.g=null}add(g,v){const E=J.get();E.set(g,v),this.h?this.h.next=E:this.g=E,this.h=E}}var J=new T(()=>new at,h=>h.reset());class at{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,gt=!1,Vt=new dt,W=()=>{const h=a.Promise.resolve(void 0);ot=()=>{h.then(St)}};var St=()=>{for(var h;h=S();){try{h.h.call(h.g)}catch(v){A(v)}var g=J;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}gt=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return h}();function qt(h,g){if(kt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,E=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(O){t:{try{R(g.nodeName);var L=!0;break t}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=h.fromElement:v=="mouseout"&&(g=h.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:jt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&qt.aa.h.call(this)}}m(qt,kt);var jt={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),it=0;function Z(h,g,v,E,L){this.listener=h,this.proxy=null,this.src=g,this.type=v,this.capture=!!E,this.ha=L,this.key=++it,this.da=this.fa=!1}function lt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ot(h){this.src=h,this.g={},this.h=0}Ot.prototype.add=function(h,g,v,E,L){var $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);var rt=P(h,g,E,L);return-1<rt?(g=h[rt],v||(g.fa=!1)):(g=new Z(g,this.src,$,!!E,L),g.fa=v,h.push(g)),g};function Wt(h,g){var v=g.type;if(v in h.g){var E=h.g[v],L=Array.prototype.indexOf.call(E,g,void 0),$;($=0<=L)&&Array.prototype.splice.call(E,L,1),$&&(lt(g),h.g[v].length==0&&(delete h.g[v],h.h--))}}function P(h,g,v,E){for(var L=0;L<h.length;++L){var $=h[L];if(!$.da&&$.listener==g&&$.capture==!!v&&$.ha==E)return L}return-1}var M="closure_lm_"+(1e6*Math.random()|0),V={};function j(h,g,v,E,L){if(E&&E.once)return st(h,g,v,E,L);if(Array.isArray(g)){for(var $=0;$<g.length;$++)j(h,g[$],v,E,L);return null}return v=yt(v),h&&h[F]?h.K(g,v,c(E)?!!E.capture:!!E,L):B(h,g,v,!1,E,L)}function B(h,g,v,E,L,$){if(!g)throw Error("Invalid event type");var rt=c(L)?!!L.capture:!!L,se=nt(h);if(se||(h[M]=se=new Ot(h)),v=se.add(g,v,E,rt,$),v.proxy)return v;if(E=z(),v.proxy=E,E.src=h,E.listener=v,h.addEventListener)Mt||(L=rt),L===void 0&&(L=!1),h.addEventListener(g.toString(),E,L);else if(h.attachEvent)h.attachEvent(Y(g.toString()),E);else if(h.addListener&&h.removeListener)h.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return v}function z(){function h(v){return g.call(h.src,h.listener,v)}const g=pt;return h}function st(h,g,v,E,L){if(Array.isArray(g)){for(var $=0;$<g.length;$++)st(h,g[$],v,E,L);return null}return v=yt(v),h&&h[F]?h.L(g,v,c(E)?!!E.capture:!!E,L):B(h,g,v,!0,E,L)}function G(h,g,v,E,L){if(Array.isArray(g))for(var $=0;$<g.length;$++)G(h,g[$],v,E,L);else E=c(E)?!!E.capture:!!E,v=yt(v),h&&h[F]?(h=h.i,g=String(g).toString(),g in h.g&&($=h.g[g],v=P($,v,E,L),-1<v&&(lt($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete h.g[g],h.h--)))):h&&(h=nt(h))&&(g=h.g[g.toString()],h=-1,g&&(h=P(g,v,E,L)),(v=-1<h?g[h]:null)&&X(v))}function X(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[F])Wt(g.i,h);else{var v=h.type,E=h.proxy;g.removeEventListener?g.removeEventListener(v,E,h.capture):g.detachEvent?g.detachEvent(Y(v),E):g.addListener&&g.removeListener&&g.removeListener(E),(v=nt(g))?(Wt(v,h),v.h==0&&(v.src=null,g[M]=null)):lt(h)}}}function Y(h){return h in V?V[h]:V[h]="on"+h}function pt(h,g){if(h.da)h=!0;else{g=new qt(g,this);var v=h.listener,E=h.ha||h.src;h.fa&&X(h),h=v.call(E,g)}return h}function nt(h){return h=h[M],h instanceof Ot?h:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(h){return typeof h=="function"?h:(h[ht]||(h[ht]=function(g){return h.handleEvent(g)}),h[ht])}function mt(){et.call(this),this.i=new Ot(this),this.M=this,this.F=null}m(mt,et),mt.prototype[F]=!0,mt.prototype.removeEventListener=function(h,g,v,E){G(this,h,g,v,E)};function At(h,g){var v,E=h.F;if(E)for(v=[];E;E=E.F)v.push(E);if(h=h.M,E=g.type||g,typeof g=="string")g=new kt(g,h);else if(g instanceof kt)g.target=g.target||h;else{var L=g;g=new kt(E,h),x(g,L)}if(L=!0,v)for(var $=v.length-1;0<=$;$--){var rt=g.g=v[$];L=Ft(rt,E,!0,g)&&L}if(rt=g.g=h,L=Ft(rt,E,!0,g)&&L,L=Ft(rt,E,!1,g)&&L,v)for($=0;$<v.length;$++)rt=g.g=v[$],L=Ft(rt,E,!1,g)&&L}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var v=h.g[g],E=0;E<v.length;E++)lt(v[E]);delete h.g[g],h.h--}}this.F=null},mt.prototype.K=function(h,g,v,E){return this.i.add(String(h),g,!1,v,E)},mt.prototype.L=function(h,g,v,E){return this.i.add(String(h),g,!0,v,E)};function Ft(h,g,v,E){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,$=0;$<g.length;++$){var rt=g[$];if(rt&&!rt.da&&rt.capture==v){var se=rt.listener,Be=rt.ha||rt.src;rt.fa&&Wt(h.i,rt),L=se.call(Be,E)!==!1&&L}}return L&&!E.defaultPrevented}function ke(h,g,v){if(typeof h=="function")v&&(h=f(h,v));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Ee(h){h.g=ke(()=>{h.g=null,h.i&&(h.i=!1,Ee(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class ln extends et{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(h){et.call(this),this.h=h,this.g={}}m(_e,et);var is=[];function tr(h){N(h.g,function(g,v){this.g.hasOwnProperty(v)&&X(g)},h),h.g={}}_e.prototype.N=function(){_e.aa.N.call(this),tr(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ie=a.JSON.stringify,H=a.JSON.parse,tt=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function xt(){}xt.prototype.h=null;function Gt(h){return h.h||(h.h=h.i())}function Se(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){kt.call(this,"d")}m(kn,kt);function Cs(){kt.call(this,"c")}m(Cs,kt);var Yn={},er=null;function Jr(){return er=er||new mt}Yn.La="serverreachability";function Zr(h){kt.call(this,Yn.La,h)}m(Zr,kt);function ai(h){const g=Jr();At(g,new Zr(g))}Yn.STAT_EVENT="statevent";function cc(h,g){kt.call(this,Yn.STAT_EVENT,h),this.stat=g}m(cc,kt);function De(h){const g=Jr();At(g,new cc(g,h))}Yn.Ma="timingevent";function ha(h,g){kt.call(this,Yn.Ma,h),this.size=g}m(ha,kt);function nr(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function EA(h,g,v,E,L,$){h.info(function(){if(h.g)if($)for(var rt="",se=$.split("&"),Be=0;Be<se.length;Be++){var Kt=se[Be].split("=");if(1<Kt.length){var Ye=Kt[0];Kt=Kt[1];var qe=Ye.split("_");rt=2<=qe.length&&qe[1]=="type"?rt+(Ye+"="+Kt+"&"):rt+(Ye+"=redacted&")}}else rt=null;else rt=$;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+g+`
`+v+`
`+rt})}function TA(h,g,v,E,L,$,rt){h.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+g+`
`+v+`
`+$+" "+rt})}function to(h,g,v,E){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+SA(h,v)+(E?" "+E:"")})}function IA(h,g){h.info(function(){return"TIMEOUT: "+g})}da.prototype.info=function(){};function SA(h,g){if(!h.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var E=v[h];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var rt=1;rt<L.length;rt++)L[rt]=""}}}}return Ie(v)}catch{return g}}var uc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fd;function hc(){}m(hc,xt),hc.prototype.g=function(){return new XMLHttpRequest},hc.prototype.i=function(){return{}},fd=new hc;function li(h,g,v,E){this.j=h,this.i=g,this.l=v,this.R=E||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xm}function xm(){this.i=null,this.g="",this.h=!1}var Cm={},pd={};function gd(h,g,v){h.L=1,h.v=gc(Ps(g)),h.m=v,h.P=!0,Pm(h,null)}function Pm(h,g){h.F=Date.now(),dc(h),h.A=Ps(h.v);var v=h.A,E=h.R;Array.isArray(E)||(E=[String(E)]),Hm(v.i,"t",E),h.C=0,v=h.j.J,h.h=new xm,h.g=av(h.j,v?g:null,!h.m),0<h.O&&(h.M=new ln(f(h.Y,h,h.g),h.O)),g=h.U,v=h.g,E=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(is[0]=L.toString()),L=is);for(var $=0;$<L.length;$++){var rt=j(v,L[$],E||g.handleEvent,!1,g.h||g);if(!rt)break;g.g[rt.key]=rt}g=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),ai(),EA(h.i,h.u,h.A,h.l,h.R,h.m)}li.prototype.ca=function(h){h=h.target;const g=this.M;g&&ks(h)==3?g.j():this.Y(h)},li.prototype.Y=function(h){try{if(h==this.g)t:{const qe=ks(this.g);var g=this.g.Ba();const so=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||Xm(this.g)))){this.J||qe!=4||g==7||(g==8||0>=so?ai(3):ai(2)),md(this);var v=this.g.Z();this.X=v;e:if(km(this)){var E=Xm(this.g);h="";var L=E.length,$=ks(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),fa(this);var rt="";break e}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(E[g],{stream:!($&&g==L-1)});E.length=0,this.h.g+=h,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=v==200,TA(this.i,this.u,this.A,this.l,this.R,qe,v),this.o){if(this.T&&!this.K){e:{if(this.g){var se,Be=this.g;if((se=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(se)){var Kt=se;break e}}Kt=null}if(v=Kt)to(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,v);else{this.o=!1,this.s=3,De(12),sr(this),fa(this);break t}}if(this.P){v=!0;let qn;for(;!this.J&&this.C<rt.length;)if(qn=AA(this,rt),qn==pd){qe==4&&(this.s=4,De(14),v=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Cm){this.s=4,De(15),to(this.i,this.l,rt,"[Invalid Chunk]"),v=!1;break}else to(this.i,this.l,qn,null),vd(this,qn);if(km(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||rt.length!=0||this.h.h||(this.s=1,De(16),v=!1),this.o=this.o&&v,!v)to(this.i,this.l,rt,"[Invalid Chunked Response]"),sr(this),fa(this);else if(0<rt.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),Td(Ye),Ye.M=!0,De(11))}}else to(this.i,this.l,rt,null),vd(this,rt);qe==4&&sr(this),this.o&&!this.J&&(qe==4?sv(this.j,this):(this.o=!1,dc(this)))}else HA(this.g),v==400&&0<rt.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),sr(this),fa(this)}}}catch{}finally{}};function km(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function AA(h,g){var v=h.C,E=g.indexOf(`
`,v);return E==-1?pd:(v=Number(g.substring(v,E)),isNaN(v)?Cm:(E+=1,E+v>g.length?pd:(g=g.slice(E,E+v),h.C=E+v,g)))}li.prototype.cancel=function(){this.J=!0,sr(this)};function dc(h){h.S=Date.now()+h.I,Dm(h,h.I)}function Dm(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=nr(f(h.ba,h),g)}function md(h){h.B&&(a.clearTimeout(h.B),h.B=null)}li.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(IA(this.i,this.A),this.L!=2&&(ai(),De(17)),sr(this),this.s=2,fa(this)):Dm(this,this.S-h)};function fa(h){h.j.G==0||h.J||sv(h.j,h)}function sr(h){md(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,tr(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function vd(h,g){try{var v=h.j;if(v.G!=0&&(v.g==h||_d(v.h,h))){if(!h.K&&_d(v.h,h)&&v.G==3){try{var E=v.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)wc(v),yc(v);else break t;Ed(v),De(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=nr(f(v.Za,v),6e3));if(1>=Om(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else rr(v,11)}else if((h.K||v.g==h)&&wc(v),!k(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let Kt=L[g];if(v.T=Kt[0],Kt=Kt[1],v.G==2)if(Kt[0]=="c"){v.K=Kt[1],v.ia=Kt[2];const Ye=Kt[3];Ye!=null&&(v.la=Ye,v.j.info("VER="+v.la));const qe=Kt[4];qe!=null&&(v.Aa=qe,v.j.info("SVER="+v.Aa));const so=Kt[5];so!=null&&typeof so=="number"&&0<so&&(E=1.5*so,v.L=E,v.j.info("backChannelRequestTimeoutMs_="+E)),E=v;const qn=h.g;if(qn){const Tc=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tc){var $=E.h;$.g||Tc.indexOf("spdy")==-1&&Tc.indexOf("quic")==-1&&Tc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(yd($,$.h),$.h=null))}if(E.D){const Id=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(E.ya=Id,he(E.I,E.D,Id))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),E=v;var rt=h;if(E.qa=ov(E,E.J?E.ia:null,E.W),rt.K){Lm(E.h,rt);var se=rt,Be=E.L;Be&&(se.I=Be),se.B&&(md(se),dc(se)),E.g=rt}else ev(E);0<v.i.length&&bc(v)}else Kt[0]!="stop"&&Kt[0]!="close"||rr(v,7);else v.G==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?rr(v,7):wd(v):Kt[0]!="noop"&&v.l&&v.l.ta(Kt),v.v=0)}}ai(4)}catch{}}var xA=class{constructor(h,g){this.g=h,this.map=g}};function Rm(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mm(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Om(h){return h.h?1:h.g?h.g.size:0}function _d(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function yd(h,g){h.g?h.g.add(g):h.h=g}function Lm(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}Rm.prototype.cancel=function(){if(this.i=Nm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nm(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const v of h.g.values())g=g.concat(v.D);return g}return _(h.i)}function CA(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],v=h.length,E=0;E<v;E++)g.push(h[E]);return g}g=[],v=0;for(E in h)g[v++]=h[E];return g}function PA(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var v=0;v<h;v++)g.push(v);return g}g=[],v=0;for(const E in h)g[v++]=E;return g}}}function Vm(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var v=PA(h),E=CA(h),L=E.length,$=0;$<L;$++)g.call(void 0,E[$],v&&v[$],h)}var $m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kA(h,g){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var E=h[v].indexOf("="),L=null;if(0<=E){var $=h[v].substring(0,E);L=h[v].substring(E+1)}else $=h[v];g($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ir(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ir){this.h=h.h,fc(this,h.j),this.o=h.o,this.g=h.g,pc(this,h.s),this.l=h.l;var g=h.i,v=new ma;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Fm(this,v),this.m=h.m}else h&&(g=String(h).match($m))?(this.h=!1,fc(this,g[1]||"",!0),this.o=pa(g[2]||""),this.g=pa(g[3]||"",!0),pc(this,g[4]),this.l=pa(g[5]||"",!0),Fm(this,g[6]||"",!0),this.m=pa(g[7]||"")):(this.h=!1,this.i=new ma(null,this.h))}ir.prototype.toString=function(){var h=[],g=this.j;g&&h.push(ga(g,Bm,!0),":");var v=this.g;return(v||g=="file")&&(h.push("//"),(g=this.o)&&h.push(ga(g,Bm,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ga(v,v.charAt(0)=="/"?MA:RA,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ga(v,LA)),h.join("")};function Ps(h){return new ir(h)}function fc(h,g,v){h.j=v?pa(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function pc(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function Fm(h,g,v){g instanceof ma?(h.i=g,NA(h.i,h.h)):(v||(g=ga(g,OA)),h.i=new ma(g,h.h))}function he(h,g,v){h.i.set(g,v)}function gc(h){return he(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function pa(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ga(h,g,v){return typeof h=="string"?(h=encodeURI(h).replace(g,DA),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function DA(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bm=/[#\/\?@]/g,RA=/[#\?:]/g,MA=/[#\?]/g,OA=/[#\?@]/g,LA=/#/g;function ma(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function ci(h){h.g||(h.g=new Map,h.h=0,h.i&&kA(h.i,function(g,v){h.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}e=ma.prototype,e.add=function(h,g){ci(this),this.i=null,h=eo(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(g),this.h+=1,this};function Um(h,g){ci(h),g=eo(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function jm(h,g){return ci(h),g=eo(h,g),h.g.has(g)}e.forEach=function(h,g){ci(this),this.g.forEach(function(v,E){v.forEach(function(L){h.call(g,L,E,this)},this)},this)},e.na=function(){ci(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let E=0;E<g.length;E++){const L=h[E];for(let $=0;$<L.length;$++)v.push(g[E])}return v},e.V=function(h){ci(this);let g=[];if(typeof h=="string")jm(this,h)&&(g=g.concat(this.g.get(eo(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)g=g.concat(h[v])}return g},e.set=function(h,g){return ci(this),this.i=null,h=eo(this,h),jm(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},e.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function Hm(h,g,v){Um(h,g),0<v.length&&(h.i=null,h.g.set(eo(h,g),_(v)),h.h+=v.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var E=g[v];const $=encodeURIComponent(String(E)),rt=this.V(E);for(E=0;E<rt.length;E++){var L=$;rt[E]!==""&&(L+="="+encodeURIComponent(String(rt[E]))),h.push(L)}}return this.i=h.join("&")};function eo(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function NA(h,g){g&&!h.j&&(ci(h),h.i=null,h.g.forEach(function(v,E){var L=E.toLowerCase();E!=L&&(Um(this,E),Hm(this,L,v))},h)),h.j=g}function VA(h,g){const v=new da;if(a.Image){const E=new Image;E.onload=p(ui,v,"TestLoadImage: loaded",!0,g,E),E.onerror=p(ui,v,"TestLoadImage: error",!1,g,E),E.onabort=p(ui,v,"TestLoadImage: abort",!1,g,E),E.ontimeout=p(ui,v,"TestLoadImage: timeout",!1,g,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=h}else g(!1)}function $A(h,g){const v=new da,E=new AbortController,L=setTimeout(()=>{E.abort(),ui(v,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:E.signal}).then($=>{clearTimeout(L),$.ok?ui(v,"TestPingServer: ok",!0,g):ui(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ui(v,"TestPingServer: error",!1,g)})}function ui(h,g,v,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(v)}catch{}}function FA(){this.g=new tt}function BA(h,g,v){const E=v||"";try{Vm(h,function(L,$){let rt=L;c(L)&&(rt=Ie(L)),g.push(E+$+"="+encodeURIComponent(rt))})}catch(L){throw g.push(E+"type="+encodeURIComponent("_badmap")),L}}function mc(h){this.l=h.Ub||null,this.j=h.eb||!1}m(mc,xt),mc.prototype.g=function(){return new vc(this.l,this.j)},mc.prototype.i=function(h){return function(){return h}}({});function vc(h,g){mt.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(vc,mt),e=vc.prototype,e.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,_a(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zm(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function zm(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?va(this):_a(this),this.readyState==3&&zm(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,va(this))},e.Qa=function(h){this.g&&(this.response=h,va(this))},e.ga=function(){this.g&&va(this)};function va(h){h.readyState=4,h.l=null,h.j=null,h.v=null,_a(h)}e.setRequestHeader=function(h,g){this.u.append(h,g)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=g.next();return h.join(`\r
`)};function _a(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Wm(h){let g="";return N(h,function(v,E){g+=E,g+=":",g+=v,g+=`\r
`}),g}function bd(h,g,v){t:{for(E in v){var E=!1;break t}E=!0}E||(v=Wm(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):he(h,g,v))}function ye(h){mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ye,mt);var UA=/^https?$/i,jA=["POST","PUT"];e=ye.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,g,v,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fd.g(),this.v=this.o?Gt(this.o):Gt(fd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch($){Ym(this,$);return}if(h=v||"",v=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)v.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const $ of E.keys())v.set($,E.get($));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jA,g,void 0))||E||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,rt]of v)this.g.setRequestHeader($,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gm(this),this.u=!0,this.g.send(h),this.u=!1}catch($){Ym(this,$)}};function Ym(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,qm(h),_c(h)}function qm(h){h.A||(h.A=!0,At(h,"complete"),At(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,At(this,"complete"),At(this,"abort"),_c(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_c(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Km(this):this.bb())},e.bb=function(){Km(this)};function Km(h){if(h.h&&typeof o<"u"&&(!h.v[1]||ks(h)!=4||h.Z()!=2)){if(h.u&&ks(h)==4)ke(h.Ea,0,h);else if(At(h,"readystatechange"),ks(h)==4){h.h=!1;try{const rt=h.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var E;if(E=rt===0){var L=String(h.D).match($m)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),E=!UA.test(L?L.toLowerCase():"")}v=E}if(v)At(h,"complete"),At(h,"success");else{h.m=6;try{var $=2<ks(h)?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.Z()+"]",qm(h)}}finally{_c(h)}}}}function _c(h,g){if(h.g){Gm(h);const v=h.g,E=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||At(h,"ready");try{v.onreadystatechange=E}catch{}}}function Gm(h){h.I&&(a.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ks(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ks(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),H(g)}};function Xm(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function HA(h){const g={};h=(h.g&&2<=ks(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<h.length;E++){if(k(h[E]))continue;var v=C(h[E]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=g[L]||[];g[L]=$,$.push(v)}I(g,function(E){return E.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(h,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||g}function Qm(h){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ya("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ya("baseRetryDelayMs",5e3,h),this.cb=ya("retryDelaySeedMs",1e4,h),this.Wa=ya("forwardChannelMaxRetries",2,h),this.wa=ya("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Rm(h&&h.concurrentRequestLimit),this.Da=new FA,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Qm.prototype,e.la=8,e.G=1,e.connect=function(h,g,v,E){De(0),this.W=h,this.H=g||{},v&&E!==void 0&&(this.H.OSID=v,this.H.OAID=E),this.F=this.X,this.I=ov(this,null,this.W),bc(this)};function wd(h){if(Jm(h),h.G==3){var g=h.U++,v=Ps(h.I);if(he(v,"SID",h.K),he(v,"RID",g),he(v,"TYPE","terminate"),ba(h,v),g=new li(h,h.j,g),g.L=2,g.v=gc(Ps(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=av(g.j,null),g.g.ea(g.v)),g.F=Date.now(),dc(g)}rv(h)}function yc(h){h.g&&(Td(h),h.g.cancel(),h.g=null)}function Jm(h){yc(h),h.u&&(a.clearTimeout(h.u),h.u=null),wc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function bc(h){if(!Mm(h.h)&&!h.s){h.s=!0;var g=h.Ga;ot||W(),gt||(ot(),gt=!0),Vt.add(g,h),h.B=0}}function zA(h,g){return Om(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=nr(f(h.Ga,h,g),iv(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new li(this,this.j,h);let $=this.o;if(this.S&&($?($=b($),x($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var E=this.i[v];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break e}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=tv(this,L,g),v=Ps(this.I),he(v,"RID",h),he(v,"CVER",22),this.D&&he(v,"X-HTTP-Session-Id",this.D),ba(this,v),$&&(this.O?g="headers="+encodeURIComponent(String(Wm($)))+"&"+g:this.m&&bd(v,this.m,$)),yd(this.h,L),this.Ua&&he(v,"TYPE","init"),this.P?(he(v,"$req",g),he(v,"SID","null"),L.T=!0,gd(L,v,null)):gd(L,v,g),this.G=2}}else this.G==3&&(h?Zm(this,h):this.i.length==0||Mm(this.h)||Zm(this))};function Zm(h,g){var v;g?v=g.l:v=h.U++;const E=Ps(h.I);he(E,"SID",h.K),he(E,"RID",v),he(E,"AID",h.T),ba(h,E),h.m&&h.o&&bd(E,h.m,h.o),v=new li(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),g&&(h.i=g.D.concat(h.i)),g=tv(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),yd(h.h,v),gd(v,E,g)}function ba(h,g){h.H&&N(h.H,function(v,E){he(g,E,v)}),h.l&&Vm({},function(v,E){he(g,E,v)})}function tv(h,g,v){v=Math.min(h.i.length,v);var E=h.l?f(h.l.Na,h.l,h):null;t:{var L=h.i;let $=-1;for(;;){const rt=["count="+v];$==-1?0<v?($=L[0].g,rt.push("ofs="+$)):$=0:rt.push("ofs="+$);let se=!0;for(let Be=0;Be<v;Be++){let Kt=L[Be].g;const Ye=L[Be].map;if(Kt-=$,0>Kt)$=Math.max(0,L[Be].g-100),se=!1;else try{BA(Ye,rt,"req"+Kt+"_")}catch{E&&E(Ye)}}if(se){E=rt.join("&");break t}}}return h=h.i.splice(0,v),g.D=h,E}function ev(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;ot||W(),gt||(ot(),gt=!0),Vt.add(g,h),h.v=0}}function Ed(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=nr(f(h.Fa,h),iv(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,nv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=nr(f(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),yc(this),nv(this))};function Td(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function nv(h){h.g=new li(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=Ps(h.qa);he(g,"RID","rpc"),he(g,"SID",h.K),he(g,"AID",h.T),he(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&he(g,"TO",h.ja),he(g,"TYPE","xmlhttp"),ba(h,g),h.m&&h.o&&bd(g,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=gc(Ps(g)),v.m=null,v.P=!0,Pm(v,h)}e.Za=function(){this.C!=null&&(this.C=null,yc(this),Ed(this),De(19))};function wc(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function sv(h,g){var v=null;if(h.g==g){wc(h),Td(h),h.g=null;var E=2}else if(_d(h.h,g))v=g.D,Lm(h.h,g),E=1;else return;if(h.G!=0){if(g.o)if(E==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;E=Jr(),At(E,new ha(E,v)),bc(h)}else ev(h);else if(L=g.s,L==3||L==0&&0<g.X||!(E==1&&zA(h,g)||E==2&&Ed(h)))switch(v&&0<v.length&&(g=h.h,g.i=g.i.concat(v)),L){case 1:rr(h,5);break;case 4:rr(h,10);break;case 3:rr(h,6);break;default:rr(h,2)}}}function iv(h,g){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*g}function rr(h,g){if(h.j.info("Error code "+g),g==2){var v=f(h.fb,h),E=h.Xa;const L=!E;E=new ir(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fc(E,"https"),gc(E),L?VA(E.toString(),v):$A(E.toString(),v)}else De(2);h.G=0,h.l&&h.l.sa(g),rv(h),Jm(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function rv(h){if(h.G=0,h.ka=[],h.l){const g=Nm(h.h);(g.length!=0||h.i.length!=0)&&(y(h.ka,g),y(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function ov(h,g,v){var E=v instanceof ir?Ps(v):new ir(v);if(E.g!="")g&&(E.g=g+"."+E.g),pc(E,E.s);else{var L=a.location;E=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var $=new ir(null);E&&fc($,E),g&&($.g=g),L&&pc($,L),v&&($.l=v),E=$}return v=h.D,g=h.ya,v&&g&&he(E,v,g),he(E,"VER",h.la),ba(h,E),E}function av(h,g,v){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new ye(new mc({eb:v})):new ye(h.pa),g.Ha(h.J),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function lv(){}e=lv.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ec(){}Ec.prototype.g=function(h,g){return new Tn(h,g)};function Tn(h,g){mt.call(this),this.g=new Qm(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!k(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new no(this)}m(Tn,mt),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){wd(this.g)},Tn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Ie(h),h=v);g.i.push(new xA(g.Ya++,h)),g.G==3&&bc(g)},Tn.prototype.N=function(){this.g.l=null,delete this.j,wd(this.g),delete this.g,Tn.aa.N.call(this)};function cv(h){kn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){t:{for(const v in g){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}m(cv,kn);function uv(){Cs.call(this),this.status=1}m(uv,Cs);function no(h){this.g=h}m(no,lv),no.prototype.ua=function(){At(this.g,"a")},no.prototype.ta=function(h){At(this.g,new cv(h))},no.prototype.sa=function(h){At(this.g,new uv)},no.prototype.ra=function(){At(this.g,"b")},Ec.prototype.createWebChannel=Ec.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,HE=function(){return new Ec},jE=function(){return Jr()},UE=Yn,Bf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uc.NO_ERROR=0,uc.TIMEOUT=8,uc.HTTP_ERROR=6,lu=uc,Am.COMPLETE="complete",BE=Am,Se.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Na=Se,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,FE=ye}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const j_="@firebase/firestore",H_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new qp("@firebase/firestore");function uo(){return Mr.logLevel}function ct(e,...t){if(Mr.logLevel<=Bt.DEBUG){const n=t.map(rg);Mr.debug(`Firestore (${Zo}): ${e}`,...n)}}function Js(e,...t){if(Mr.logLevel<=Bt.ERROR){const n=t.map(rg);Mr.error(`Firestore (${Zo}): ${e}`,...n)}}function Bi(e,...t){if(Mr.logLevel<=Bt.WARN){const n=t.map(rg);Mr.warn(`Firestore (${Zo}): ${e}`,...n)}}function rg(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,zE(e,s,n)}function zE(e,t,n){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Js(s),new Error(s)}function Zt(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||zE(t,i,s)}function Lt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends ii{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}}class PO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kO{constructor(t){this.t=t,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Zt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ni,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ni)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Zt(typeof s.accessToken=="string",31837,{l:s}),new WE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new Qe(t)}}class DO{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RO{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new DO(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MO{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Zt(this.o===void 0,3512);const s=r=>{r.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,ct("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new z_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new z_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=OO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function $t(e,t){return e<t?-1:e>t?1:0}function Uf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=e.codePointAt(n),i=t.codePointAt(n);if(s!==i){if(s<128&&i<128)return $t(s,i);{const r=YE(),o=LO(r.encode(W_(e,n)),r.encode(W_(t,n)));return o!==0?o:$t(s,i)}}n+=s>65535?2:1}return $t(e.length,t.length)}function W_(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function LO(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return $t(e[n],t[n]);return $t(e.length,t.length)}function Lo(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="__name__";class cs{constructor(t,n,s){n===void 0?n=0:n>t.length&&It(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&It(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return cs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof cs?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=cs.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return $t(t.length,n.length)}static compareSegments(t,n){const s=cs.isNumericId(t),i=cs.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?cs.extractNumericId(t).compare(cs.extractNumericId(n)):Uf(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Li.fromString(t.substring(4,t.length-2))}}class pe extends cs{construct(t,n,s){return new pe(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new _t(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const NO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends cs{construct(t,n,s){return new ze(t,n,s)}static isValidIdentifier(t){return NO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y_}static keyField(){return new ze([Y_])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new _t(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new _t(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new _t(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.path=t}static fromPath(t){return new wt(pe.fromString(t))}static fromName(t){return new wt(pe.fromString(t).popFirst(5))}static empty(){return new wt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(e,t,n){if(!n)throw new _t(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function $O(e,t,n,s){if(t===!0&&s===!0)throw new _t(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function q_(e){if(!wt.isDocumentKey(e))throw new _t(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function qE(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function ag(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":It(12329,{type:typeof e})}function Al(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(e);throw new _t(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(e,t){const n={typeString:e};return t&&(n.value=t),n}function Zl(e,t){if(!qE(e))throw new _t(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new _t(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=-62135596800,G_=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*G_);return new fe(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<K_)throw new _t(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G_}_compareTo(t){return this.seconds===t.seconds?$t(this.nanoseconds,t.nanoseconds):$t(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Zl(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-K_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:xe("string",fe._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{static fromTimestamp(t){return new Dt(t)}static min(){return new Dt(new fe(0,0))}static max(){return new Dt(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function FO(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(s===1e9?new fe(n+1,0):new fe(n,s));return new Ui(i,wt.empty(),t)}function BO(e){return new Ui(e.readTime,e.key,xl)}class Ui{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Ui(Dt.min(),wt.empty(),xl)}static max(){return new Ui(Dt.max(),wt.empty(),xl)}}function UO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=wt.comparator(e.documentKey,t.documentKey),n!==0?n:$t(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==jO)throw e;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,s)=>{n(t)})}static reject(t){return new U((n,s)=>{s(t)})}static waitFor(t){return new U((n,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},l=>s(l))}),o=!0,r===i&&n()})}static or(t){let n=U.resolve(!1);for(const s of t)n=n.next(i=>i?U.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new U((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(t,n){return new U((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}}function zO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Hh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function zh(e){return e==null}function Fu(e){return e===0&&1/e==-1/0}function WO(e){return typeof e=="number"&&Number.isInteger(e)&&!Fu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="";function YO(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=X_(t)),t=qO(e.get(n),t);return X_(t)}function qO(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case KE:n+="";break;default:n+=r}}return n}function X_(e){return e+KE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function GE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t,n){this.comparator=t,this.root=n||Ue.EMPTY}insert(t,n){return new ve(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ue.BLACK,null,null))}remove(t){return new ve(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ue.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new kc(this.root,t,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new kc(this.root,t,this.comparator,!0)}}class kc{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ue{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Ue.RED,this.left=i??Ue.EMPTY,this.right=r??Ue.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Ue(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ue.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ue.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw It(27949);return t+(this.isRed()?0:1)}}Ue.EMPTY=null,Ue.RED=!0,Ue.BLACK=!1;Ue.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new Ue(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.comparator=t,this.data=new ve(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(t){return new J_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Oe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Oe(this.comparator);return n.data=t,n}}class J_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this.fields=t,t.sort(ze.comparator)}static empty(){return new Xn([])}unionWith(t){let n=new Oe(ze.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Xn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Lo(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new XE("Invalid base64 string: "+r):r}}(t);return new We(n)}static fromUint8Array(t){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new We(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $t(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}We.EMPTY_BYTE_STRING=new We("");const KO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(e){if(Zt(!!e,39018),typeof e=="string"){let t=0;const n=KO.exec(e);if(Zt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Te(e.seconds),nanos:Te(e.nanos)}}function Te(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Hi(e){return typeof e=="string"?We.fromBase64String(e):We.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="server_timestamp",JE="__type__",ZE="__previous_value__",tT="__local_write_time__";function cg(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[JE])===null||n===void 0?void 0:n.stringValue)===QE}function Wh(e){const t=e.mapValue.fields[ZE];return cg(t)?Wh(t):t}function Cl(e){const t=ji(e.mapValue.fields[tT].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(t,n,s,i,r,o,a,l,c,u){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Bu="(default)";class Pl{constructor(t,n){this.projectId=t,this.database=n||Bu}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===Bu}isEqual(t){return t instanceof Pl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="__type__",nT="__max__",Dc={mapValue:{fields:{__type__:{stringValue:nT}}}},sT="__vector__",Uu="value";function zi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cg(e)?4:QO(e)?9007199254740991:XO(e)?10:11:It(28295,{value:e})}function ws(e,t){if(e===t)return!0;const n=zi(e);if(n!==zi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cl(e).isEqual(Cl(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=ji(i.timestampValue),a=ji(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return Hi(i.bytesValue).isEqual(Hi(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return Te(i.geoPointValue.latitude)===Te(r.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Te(i.integerValue)===Te(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Te(i.doubleValue),a=Te(r.doubleValue);return o===a?Fu(o)===Fu(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Lo(e.arrayValue.values||[],t.arrayValue.values||[],ws);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Q_(o)!==Q_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ws(o[l],a[l])))return!1;return!0}(e,t);default:return It(52216,{left:e})}}function kl(e,t){return(e.values||[]).find(n=>ws(n,t))!==void 0}function No(e,t){if(e===t)return 0;const n=zi(e),s=zi(t);if(n!==s)return $t(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return $t(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=Te(r.integerValue||r.doubleValue),l=Te(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Z_(e.timestampValue,t.timestampValue);case 4:return Z_(Cl(e),Cl(t));case 5:return Uf(e.stringValue,t.stringValue);case 6:return function(r,o){const a=Hi(r),l=Hi(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=$t(a[c],l[c]);if(u!==0)return u}return $t(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=$t(Te(r.latitude),Te(o.latitude));return a!==0?a:$t(Te(r.longitude),Te(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ty(e.arrayValue,t.arrayValue);case 10:return function(r,o){var a,l,c,u;const d=r.fields||{},f=o.fields||{},p=(a=d[Uu])===null||a===void 0?void 0:a.arrayValue,m=(l=f[Uu])===null||l===void 0?void 0:l.arrayValue,_=$t(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:ty(p,m)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===Dc.mapValue&&o===Dc.mapValue)return 0;if(r===Dc.mapValue)return 1;if(o===Dc.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Uf(l[d],u[d]);if(f!==0)return f;const p=No(a[l[d]],c[u[d]]);if(p!==0)return p}return $t(l.length,u.length)}(e.mapValue,t.mapValue);default:throw It(23264,{le:n})}}function Z_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return $t(e,t);const n=ji(e),s=ji(t),i=$t(n.seconds,s.seconds);return i!==0?i:$t(n.nanos,s.nanos)}function ty(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=No(n[i],s[i]);if(r)return r}return $t(n.length,s.length)}function Vo(e){return jf(e)}function jf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=ji(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Hi(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return wt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=jf(r);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${jf(n.fields[o])}`;return i+"}"}(e.mapValue):It(61005,{value:e})}function cu(e){switch(zi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wh(e);return t?16+cu(t):16;case 5:return 2*e.stringValue.length;case 6:return Hi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+cu(r),0)}(e.arrayValue);case 10:case 11:return function(s){let i=0;return jr(s.fields,(r,o)=>{i+=r.length+cu(o)}),i}(e.mapValue);default:throw It(13486,{value:e})}}function Hf(e){return!!e&&"integerValue"in e}function ug(e){return!!e&&"arrayValue"in e}function ey(e){return!!e&&"nullValue"in e}function ny(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uu(e){return!!e&&"mapValue"in e}function XO(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[eT])===null||n===void 0?void 0:n.stringValue)===sT}function el(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jr(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=el(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=el(e.arrayValue.values[n]);return t}return Object.assign({},e)}function QO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===nT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.value=t}static empty(){return new On({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!uu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=el(n)}setAll(t){let n=ze.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=el(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ws(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){jr(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new On(el(this.value))}}function iT(e){const t=[];return jr(e.fields,(n,s)=>{const i=new ze([n]);if(uu(s)){const r=iT(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Xn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ze(t,0,Dt.min(),Dt.min(),Dt.min(),On.empty(),0)}static newFoundDocument(t,n,s,i){return new Ze(t,1,n,Dt.min(),s,i,0)}static newNoDocument(t,n){return new Ze(t,2,n,Dt.min(),Dt.min(),On.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,Dt.min(),Dt.min(),On.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,n){this.position=t,this.inclusive=n}}function sy(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=wt.comparator(wt.fromName(o.referenceValue),n.key):s=No(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function iy(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ws(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(t,n="asc"){this.field=t,this.dir=n}}function JO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{}class Re extends rT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new t2(t,n,s):n==="array-contains"?new s2(t,s):n==="in"?new i2(t,s):n==="not-in"?new r2(t,s):n==="array-contains-any"?new o2(t,s):new Re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new e2(t,s):new n2(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Es extends rT{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new Es(t,n)}matches(t){return oT(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function oT(e){return e.op==="and"}function aT(e){return ZO(e)&&oT(e)}function ZO(e){for(const t of e.filters)if(t instanceof Es)return!1;return!0}function zf(e){if(e instanceof Re)return e.field.canonicalString()+e.op.toString()+Vo(e.value);if(aT(e))return e.filters.map(t=>zf(t)).join(",");{const t=e.filters.map(n=>zf(n)).join(",");return`${e.op}(${t})`}}function lT(e,t){return e instanceof Re?function(s,i){return i instanceof Re&&s.op===i.op&&s.field.isEqual(i.field)&&ws(s.value,i.value)}(e,t):e instanceof Es?function(s,i){return i instanceof Es&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&lT(o,i.filters[a]),!0):!1}(e,t):void It(19439)}function cT(e){return e instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`}(e):e instanceof Es?function(n){return n.op.toString()+" {"+n.getFilters().map(cT).join(" ,")+"}"}(e):"Filter"}class t2 extends Re{constructor(t,n,s){super(t,n,s),this.key=wt.fromName(s.referenceValue)}matches(t){const n=wt.comparator(t.key,this.key);return this.matchesComparison(n)}}class e2 extends Re{constructor(t,n){super(t,"in",n),this.keys=uT("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class n2 extends Re{constructor(t,n){super(t,"not-in",n),this.keys=uT("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function uT(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>wt.fromName(s.referenceValue))}class s2 extends Re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ug(n)&&kl(n.arrayValue,this.value)}}class i2 extends Re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&kl(this.value.arrayValue,n)}}class r2 extends Re{constructor(t,n){super(t,"not-in",n)}matches(t){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kl(this.value.arrayValue,n)}}class o2 extends Re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>kl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Pe=null}}function ry(e,t=null,n=[],s=[],i=null,r=null,o=null){return new a2(e,t,n,s,i,r,o)}function hg(e){const t=Lt(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>zf(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),zh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Vo(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Vo(s)).join(",")),t.Pe=n}return t.Pe}function dg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!JO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!lT(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!iy(e.startAt,t.startAt)&&iy(e.endAt,t.endAt)}function Wf(e){return wt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function l2(e,t,n,s,i,r,o,a){return new Yh(e,t,n,s,i,r,o,a)}function fg(e){return new Yh(e)}function oy(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function c2(e){return e.collectionGroup!==null}function nl(e){const t=Lt(e);if(t.Te===null){t.Te=[];const n=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oe(ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Hu(r,s))}),n.has(ze.keyField().canonicalString())||t.Te.push(new Hu(ze.keyField(),s))}return t.Te}function gs(e){const t=Lt(e);return t.Ie||(t.Ie=u2(t,nl(e))),t.Ie}function u2(e,t){if(e.limitType==="F")return ry(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Hu(i.field,r)});const n=e.endAt?new ju(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ju(e.startAt.position,e.startAt.inclusive):null;return ry(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Yf(e,t,n){return new Yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qh(e,t){return dg(gs(e),gs(t))&&e.limitType===t.limitType}function hT(e){return`${hg(gs(e))}|lt:${e.limitType}`}function ho(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>cT(i)).join(", ")}]`),zh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Vo(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Vo(i)).join(",")),`Target(${s})`}(gs(e))}; limitType=${e.limitType})`}function Kh(e,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):wt.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(e,t)&&function(s,i){for(const r of nl(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(s,i){return!(s.startAt&&!function(o,a,l){const c=sy(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,nl(s),i)||s.endAt&&!function(o,a,l){const c=sy(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,nl(s),i))}(e,t)}function h2(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dT(e){return(t,n)=>{let s=!1;for(const i of nl(e)){const r=d2(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function d2(e,t,n){const s=e.field.isKeyField()?wt.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?No(l,c):It(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return It(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jr(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new ve(wt.comparator);function Zs(){return f2}const fT=new ve(wt.comparator);function Va(...e){let t=fT;for(const n of e)t=t.insert(n.key,n);return t}function pT(e){let t=fT;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function br(){return sl()}function gT(){return sl()}function sl(){return new Hr(e=>e.toString(),(e,t)=>e.isEqual(t))}const p2=new ve(wt.comparator),g2=new Oe(wt.comparator);function Ut(...e){let t=g2;for(const n of e)t=t.add(n);return t}const m2=new Oe($t);function v2(){return m2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(t)?"-0":t}}function mT(e){return{integerValue:""+e}}function _2(e,t){return WO(t)?mT(t):pg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function y2(e,t,n){return e instanceof zu?function(i,r){const o={fields:{[JE]:{stringValue:QE},[tT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&cg(r)&&(r=Wh(r)),r&&(o.fields[ZE]=r),{mapValue:o}}(n,t):e instanceof Dl?_T(e,t):e instanceof Rl?yT(e,t):function(i,r){const o=vT(i,r),a=ay(o)+ay(i.Ee);return Hf(o)&&Hf(i.Ee)?mT(a):pg(i.serializer,a)}(e,t)}function b2(e,t,n){return e instanceof Dl?_T(e,t):e instanceof Rl?yT(e,t):n}function vT(e,t){return e instanceof Wu?function(s){return Hf(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class zu extends Gh{}class Dl extends Gh{constructor(t){super(),this.elements=t}}function _T(e,t){const n=bT(t);for(const s of e.elements)n.some(i=>ws(i,s))||n.push(s);return{arrayValue:{values:n}}}class Rl extends Gh{constructor(t){super(),this.elements=t}}function yT(e,t){let n=bT(t);for(const s of e.elements)n=n.filter(i=>!ws(i,s));return{arrayValue:{values:n}}}class Wu extends Gh{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function ay(e){return Te(e.integerValue||e.doubleValue)}function bT(e){return ug(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function w2(e,t){return e.field.isEqual(t.field)&&function(s,i){return s instanceof Dl&&i instanceof Dl||s instanceof Rl&&i instanceof Rl?Lo(s.elements,i.elements,ws):s instanceof Wu&&i instanceof Wu?ws(s.Ee,i.Ee):s instanceof zu&&i instanceof zu}(e.transform,t.transform)}class E2{constructor(t,n){this.version=t,this.transformResults=n}}class qs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qs}static exists(t){return new qs(void 0,t)}static updateTime(t){return new qs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xh{}function wT(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new TT(e.key,qs.none()):new tc(e.key,e.data,qs.none());{const n=e.data,s=On.empty();let i=new Oe(ze.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new zr(e.key,s,new Xn(i.toArray()),qs.none())}}function T2(e,t,n){e instanceof tc?function(i,r,o){const a=i.value.clone(),l=cy(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof zr?function(i,r,o){if(!hu(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=cy(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(ET(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function il(e,t,n,s){return e instanceof tc?function(r,o,a,l){if(!hu(r.precondition,o))return a;const c=r.value.clone(),u=uy(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,s):e instanceof zr?function(r,o,a,l){if(!hu(r.precondition,o))return a;const c=uy(r.fieldTransforms,l,o),u=o.data;return u.setAll(ET(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(e,t,n,s):function(r,o,a){return hu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function I2(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=vT(s.transform,i||null);r!=null&&(n===null&&(n=On.empty()),n.set(s.field,r))}return n||null}function ly(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Lo(s,i,(r,o)=>w2(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class tc extends Xh{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zr extends Xh{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ET(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function cy(e,t,n){const s=new Map;Zt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,b2(o,a,n[i]))}return s}function uy(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,y2(r,o,t))}return s}class TT extends Xh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S2 extends Xh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&T2(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=il(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=il(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=gT();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=wT(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Dt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,(n,s)=>ly(n,s))&&Lo(this.baseMutations,t.baseMutations,(n,s)=>ly(n,s))}}class gg{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Zt(t.mutations.length===s.length,58842,{Ve:t.mutations.length,me:s.length});let i=function(){return p2}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new gg(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,Yt;function P2(e){switch(e){case q.OK:return It(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return It(15467,{code:e})}}function IT(e){if(e===void 0)return Js("GRPC error has no .code"),q.UNKNOWN;switch(e){case Ae.OK:return q.OK;case Ae.CANCELLED:return q.CANCELLED;case Ae.UNKNOWN:return q.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return q.INTERNAL;case Ae.UNAVAILABLE:return q.UNAVAILABLE;case Ae.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ae.NOT_FOUND:return q.NOT_FOUND;case Ae.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ae.ABORTED:return q.ABORTED;case Ae.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ae.DATA_LOSS:return q.DATA_LOSS;default:return It(39323,{code:e})}}(Yt=Ae||(Ae={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=new Li([4294967295,4294967295],0);function hy(e){const t=YE().encode(e),n=new $E;return n.update(t),new Uint8Array(n.digest())}function dy(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Li([n,s],0),new Li([i,r],0)]}class mg{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(s<0)throw new $a(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Li.fromNumber(this.fe)}pe(t,n,s){let i=t.add(n.multiply(Li.fromNumber(s)));return i.compare(k2)===1&&(i=new Li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=hy(t),[s,i]=dy(n);for(let r=0;r<this.hashCount;r++){const o=this.pe(s,i,r);if(!this.ye(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new mg(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.fe===0)return;const n=hy(t),[s,i]=dy(n);for(let r=0;r<this.hashCount;r++){const o=this.pe(s,i,r);this.we(o)}}we(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,ec.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Qh(Dt.min(),i,new ve($t),Zs(),Ut())}}class ec{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new ec(s,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,n,s,i){this.Se=t,this.removedTargetIds=n,this.key=s,this.be=i}}class ST{constructor(t,n){this.targetId=t,this.De=n}}class AT{constructor(t,n,s=We.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class fy{constructor(){this.ve=0,this.Ce=py(),this.Fe=We.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Ut(),n=Ut(),s=Ut();return this.Ce.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:It(38017,{changeType:r})}}),new ec(this.Fe,this.Me,t,n,s)}ke(){this.xe=!1,this.Ce=py()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class D2{constructor(t){this.We=t,this.Ge=new Map,this.ze=Zs(),this.je=Rc(),this.Je=Rc(),this.He=new ve($t)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const s=this.tt(n);switch(t.state){case 0:this.nt(n)&&s.Be(t.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(t.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(t.resumeToken));break;default:It(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((s,i)=>{this.nt(i)&&n(i)})}it(t){const n=t.targetId,s=t.De.count,i=this.st(n);if(i){const r=i.target;if(Wf(r))if(s===0){const o=new wt(r.path);this.Xe(n,o,Ze.newNoDocument(o,Dt.min()))}else Zt(s===1,20013,{expectedCount:s});else{const o=this.ot(n);if(o!==s){const a=this._t(t),l=a?this.ut(a,t,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Hi(s).toUint8Array()}catch(l){if(l instanceof XE)return Bi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mg(o,i,r)}catch(l){return Bi(l instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(t,n,s){return n.De.count===s-this.ht(t,n.targetId)?0:2}ht(t,n){const s=this.We.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Xe(n,r,null),i++)}),i}Pt(t){const n=new Map;this.Ge.forEach((r,o)=>{const a=this.st(o);if(a){if(r.current&&Wf(a.target)){const l=new wt(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Ze.newNoDocument(l,t))}r.Ne&&(n.set(o,r.Le()),r.ke())}});let s=Ut();this.Je.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.ze.forEach((r,o)=>o.setReadTime(t));const i=new Qh(t,n,this.He,this.ze,s);return this.ze=Zs(),this.je=Rc(),this.Je=Rc(),this.He=new ve($t),i}Ze(t,n){if(!this.nt(t))return;const s=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,s){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new fy,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Oe($t),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Oe($t),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||ct("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new fy),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Rc(){return new ve(wt.comparator)}function py(){return new ve(wt.comparator)}const R2=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),M2=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),O2=(()=>({and:"AND",or:"OR"}))();class L2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function qf(e,t){return e.useProto3Json||zh(t)?t:{value:t}}function Yu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xT(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function N2(e,t){return Yu(e,t.toTimestamp())}function ms(e){return Zt(!!e,49232),Dt.fromTimestamp(function(n){const s=ji(n);return new fe(s.seconds,s.nanos)}(e))}function vg(e,t){return Kf(e,t).canonicalString()}function Kf(e,t){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function CT(e){const t=pe.fromString(e);return Zt(MT(t),10190,{key:t.toString()}),t}function Gf(e,t){return vg(e.databaseId,t.path)}function Kd(e,t){const n=CT(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wt(kT(n))}function PT(e,t){return vg(e.databaseId,t)}function V2(e){const t=CT(e);return t.length===4?pe.emptyPath():kT(t)}function Xf(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kT(e){return Zt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function gy(e,t,n){return{name:Gf(e,t),fields:n.value.mapValue.fields}}function $2(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:It(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Zt(u===void 0||typeof u=="string",58123),We.fromBase64String(u||"")):(Zt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),We.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?q.UNKNOWN:IT(c.code);return new _t(u,c.message||"")}(o);n=new AT(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Kd(e,s.document.name),r=ms(s.document.updateTime),o=s.document.createTime?ms(s.document.createTime):Dt.min(),a=new On({mapValue:{fields:s.document.fields}}),l=Ze.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new du(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Kd(e,s.document),r=s.readTime?ms(s.readTime):Dt.min(),o=Ze.newNoDocument(i,r),a=s.removedTargetIds||[];n=new du([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Kd(e,s.document),r=s.removedTargetIds||[];n=new du([],r,i,null)}else{if(!("filter"in t))return It(11601,{At:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new C2(i,r),a=s.targetId;n=new ST(a,o)}}return n}function F2(e,t){let n;if(t instanceof tc)n={update:gy(e,t.key,t.value)};else if(t instanceof TT)n={delete:Gf(e,t.key)};else if(t instanceof zr)n={update:gy(e,t.key,t.data),updateMask:K2(t.fieldMask)};else{if(!(t instanceof S2))return It(16599,{Rt:t.type});n={verify:Gf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof zu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw It(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:N2(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:It(27497)}(e,t.precondition)),n}function B2(e,t){return e&&e.length>0?(Zt(t!==void 0,14353),e.map(n=>function(i,r){let o=i.updateTime?ms(i.updateTime):ms(r);return o.isEqual(Dt.min())&&(o=ms(r)),new E2(o,i.transformResults||[])}(n,t))):[]}function U2(e,t){return{documents:[PT(e,t.path)]}}function j2(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=PT(e,i);const r=function(c){if(c.length!==0)return RT(Es.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:fo(f.field),direction:W2(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=qf(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:n,parent:i}}function H2(e){let t=V2(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Zt(s===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(d){const f=DT(d);return f instanceof Es&&aT(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new Hu(po(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,zh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new ju(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new ju(p,f)}(n.endAt)),l2(t,i,o,r,a,"F",l,c)}function z2(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function DT(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=po(n.unaryFilter.field);return Re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=po(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=po(n.unaryFilter.field);return Re.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=po(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(e):e.fieldFilter!==void 0?function(n){return Re.create(po(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Es.create(n.compositeFilter.filters.map(s=>DT(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(n.compositeFilter.op))}(e):It(30097,{filter:e})}function W2(e){return R2[e]}function Y2(e){return M2[e]}function q2(e){return O2[e]}function fo(e){return{fieldPath:e.canonicalString()}}function po(e){return ze.fromServerFormat(e.fieldPath)}function RT(e){return e instanceof Re?function(n){if(n.op==="=="){if(ny(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(ey(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ny(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(ey(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:Y2(n.op),value:n.value}}}(e):e instanceof Es?function(n){const s=n.getFilters().map(i=>RT(i));return s.length===1?s[0]:{compositeFilter:{op:q2(n.op),filters:s}}}(e):It(54877,{filter:e})}function K2(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function MT(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n,s,i,r=Dt.min(),o=Dt.min(),a=We.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Ai(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t){this.gt=t}}function X2(e){const t=H2({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Yf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.Dn=new J2}addToCollectionParentIndex(t,n){return this.Dn.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(Ui.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(Ui.min())}updateCollectionGroup(t,n,s){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class J2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new Oe(pe.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Oe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OT=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(OT,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new $o(0)}static ur(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="LruGarbageCollector",Z2=1048576;function _y([e,t],[n,s]){const i=$t(e,n);return i===0?$t(t,s):i}class tL{constructor(t){this.Tr=t,this.buffer=new Oe(_y),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();_y(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eL{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){ct(vy,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?ct(vy,"Ignoring IndexedDB error during garbage collection: ",n):await ta(n)}await this.Rr(3e5)})}}class nL{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return U.resolve(Hh.ue);const s=new tL(n);return this.Vr.forEachTarget(t,i=>s.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>s.Er(i))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.Vr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(my)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),my):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let s,i,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(s=d,a=Date.now(),this.removeTargets(t,s,n))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s))).next(d=>(c=Date.now(),uo()<=Bt.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d})))}}function sL(e,t){return new nL(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.changes=new Hr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?U.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&il(s.mutation,i,Xn.empty(),fe.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Ut()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Ut()){const i=br();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let o=Va();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=br();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Ut()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,i){let r=Zs();const o=sl(),a=function(){return sl()}();return n.forEach((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof zr)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),il(u.mutation,c,u.mutation.getFieldMask(),fe.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new rL(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const s=sl();let i=new ve((o,a)=>o-a),r=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||Xn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const d=(i.get(a.batchId)||Ut()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=gT();u.forEach(f=>{if(!r.has(f)){const p=wT(n.get(f),s.get(f));p!==null&&d.set(f,p),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return U.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,i){return function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):c2(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):U.resolve(br());let a=xl,l=r;return o.next(c=>U.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(u)?U.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,Ut())).next(u=>({batchId:a,changes:pT(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new wt(n)).next(s=>{let i=Va();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=Va();return this.indexManager.getCollectionParents(t,r).next(a=>U.forEach(a,l=>{const c=function(d,f){return new Yh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ze.newInvalidDocument(u)))});let a=Va();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&il(u.mutation,c,Xn.empty(),fe.now()),Kh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ms(i.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:X2(i.bundledQuery),readTime:ms(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.overlays=new ve(wt.comparator),this.kr=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const s=br();return U.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.wt(t,n,r)}),U.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.kr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.kr.delete(s)),U.resolve()}getOverlaysForCollection(t,n,s){const i=br(),r=n.length+1,o=new wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new ve((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=br(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=br(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return U.resolve(a)}wt(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(s.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new x2(n,s));let r=this.kr.get(n);r===void 0&&(r=Ut(),this.kr.set(n,r)),this.kr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.qr=new Oe(Le.Qr),this.$r=new Oe(Le.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const s=new Le(t,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Wr(new Le(t,n))}Gr(t,n){t.forEach(s=>this.removeReference(s,n))}zr(t){const n=new wt(new pe([])),s=new Le(n,t),i=new Le(n,t+1),r=[];return this.$r.forEachInRange([s,i],o=>{this.Wr(o),r.push(o.key)}),r}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new wt(new pe([])),s=new Le(n,t),i=new Le(n,t+1);let r=Ut();return this.$r.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new Le(t,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Le{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return wt.comparator(t.key,n.key)||$t(t.Hr,n.Hr)}static Ur(t,n){return $t(t.Hr,n.Hr)||wt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Oe(Le.Qr)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A2(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Le(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(t,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.Xr(s),r=i<0?0:i;return U.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?lg:this.er-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([s,i],o=>{const a=this.Zr(o.Hr);r.push(a)}),U.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Oe($t);return n.forEach(i=>{const r=new Le(i,0),o=new Le(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([r,o],a=>{s=s.add(a.Hr)})}),U.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;wt.isDocumentKey(r)||(r=r.child(""));const o=new Le(new wt(r),0);let a=new Oe($t);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Hr)),!0)},o),U.resolve(this.ei(a))}ei(t){const n=[];return t.forEach(s=>{const i=this.Zr(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Zt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return U.forEach(n.mutations,i=>{const r=new Le(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=s})}rr(t){}containsKey(t,n){const s=new Le(n,0),i=this.Yr.firstAfterOrEqual(s);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(t){this.ni=t,this.docs=function(){return new ve(wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return U.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let s=Zs();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ze.newInvalidDocument(i))}),U.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Zs();const o=n.path,a=new wt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||UO(BO(u),s)<=0||(i.has(u.key)||Kh(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return U.resolve(r)}getAllFromCollectionGroup(t,n,s,i){It(9500)}ri(t,n){return U.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new dL(this)}getSize(t){return U.resolve(this.size)}}class dL extends iL{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(s)}),U.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(t){this.persistence=t,this.ii=new Hr(n=>hg(n),dg),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.si=0,this.oi=new _g,this.targetCount=0,this._i=$o.ar()}forEachTarget(t,n){return this.ii.forEach((s,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),U.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new $o(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.hr(n),U.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.ii.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),U.waitFor(r).next(()=>i)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const s=this.ii.get(n)||null;return U.resolve(s)}addMatchingKeys(t,n,s){return this.oi.Kr(n,s),U.resolve()}removeMatchingKeys(t,n,s){this.oi.Gr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),U.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const s=this.oi.Jr(n);return U.resolve(s)}containsKey(t,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t,n){this.ai={},this.overlays={},this.ui=new Hh(0),this.ci=!1,this.ci=!0,this.li=new cL,this.referenceDelegate=t(this),this.hi=new fL(this),this.indexManager=new Q2,this.remoteDocumentCache=function(i){return new hL(i)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new G2(n),this.Ti=new aL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lL,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ai[t.toKey()];return s||(s=new uL(n,this.referenceDelegate),this.ai[t.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,s){ct("MemoryPersistence","Starting transaction:",t);const i=new pL(this.ui.next());return this.referenceDelegate.Ii(),s(i).next(r=>this.referenceDelegate.di(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(t,n){return U.or(Object.values(this.ai).map(s=>()=>s.containsKey(t,n)))}}class pL extends HO{constructor(t){super(),this.currentSequenceNumber=t}}class yg{constructor(t){this.persistence=t,this.Ai=new _g,this.Ri=null}static Vi(t){return new yg(t)}get mi(){if(this.Ri)return this.Ri;throw It(60996)}addReference(t,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),U.resolve()}removeReference(t,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.mi.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,s=>{const i=wt.fromPath(s);return this.fi(t,i).next(r=>{r||n.removeEntry(i,Dt.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class qu{constructor(t,n){this.persistence=t,this.gi=new Hr(s=>YO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=sL(this,n)}static Vi(t,n){return new qu(t,n)}Ii(){}di(t){return U.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(i=>s+i))}yr(t){let n=0;return this.gr(t,s=>{n++}).next(()=>n)}gr(t,n){return U.forEach(this.gi,(s,i)=>this.Sr(t,s,i).next(r=>r?U.resolve():n(i)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ri(t,o=>this.Sr(t,o,n).next(a=>{a||(s++,r.removeEntry(o,Dt.min()))})).next(()=>r.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),U.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.gi.set(s,t.currentSequenceNumber),U.resolve()}removeReference(t,n,s){return this.gi.set(s,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),U.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=cu(t.data.value)),n}Sr(t,n,s){return U.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return U.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Is=s,this.ds=i}static Es(t,n){let s=Ut(),i=Ut();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new bg(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Kk()?8:zO(sn())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ps(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ys(t,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new gL;return this.ws(t,n,o).next(a=>{if(r.result=a,this.Rs)return this.Ss(t,n,o,a.size)})}).next(()=>r.result)}Ss(t,n,s,i){return s.documentReadCount<this.Vs?(uo()<=Bt.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(uo()<=Bt.DEBUG&&ct("QueryEngine","Query:",ho(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.fs*i?(uo()<=Bt.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gs(n))):U.resolve())}ps(t,n){if(oy(n))return U.resolve(null);let s=gs(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yf(n,null,"F"),s=gs(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=Ut(...r);return this.gs.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(t,Yf(n,null,"F")):this.vs(t,c,n,l)}))})))}ys(t,n,s,i){return oy(n)||i.isEqual(Dt.min())?U.resolve(null):this.gs.getDocuments(t,s).next(r=>{const o=this.bs(n,r);return this.Ds(n,o,s,i)?U.resolve(null):(uo()<=Bt.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ho(n)),this.vs(t,o,n,FO(i,xl)).next(a=>a))})}bs(t,n){let s=new Oe(dT(t));return n.forEach((i,r)=>{Kh(t,r)&&(s=s.add(r))}),s}Ds(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ws(t,n,s){return uo()<=Bt.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",ho(n)),this.gs.getDocumentsMatchingQuery(t,n,Ui.min(),s)}vs(t,n,s,i){return this.gs.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="LocalStore",vL=3e8;class _L{constructor(t,n,s,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new ve($t),this.Ms=new Hr(r=>hg(r),dg),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(s)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new oL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function yL(e,t,n,s){return new _L(e,t,n,s)}async function NT(e,t){const n=Lt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Ns(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=Ut();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function bL(e,t){const n=Lt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=U.resolve();return f.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(_=>{const y=c.docVersions.get(m);Zt(y!==null,48541),_.version.compareTo(y)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=Ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function VT(e){const t=Lt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function wL(e,t){const n=Lt(e),s=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];t.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.hi.removeMatchingKeys(r,u.removedDocuments,d).next(()=>n.hi.addMatchingKeys(r,u.addedDocuments,d)));let p=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?p=p.withResumeToken(We.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,s)),i=i.insert(d,p),function(_,y,T){return _.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=vL?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,p,u)&&a.push(n.hi.updateTargetData(r,p))});let l=Zs(),c=Ut();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(EL(r,o,t.documentUpdates).next(u=>{l=u.Ls,c=u.ks})),!s.isEqual(Dt.min())){const u=n.hi.getLastRemoteSnapshotVersion(r).next(d=>n.hi.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return U.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Fs=i,r))}function EL(e,t,n){let s=Ut(),i=Ut();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let o=Zs();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Dt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ct(wg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function TL(e,t){const n=Lt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=lg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function IL(e,t){const n=Lt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.hi.getTargetData(s,t).next(r=>r?(i=r,U.resolve(i)):n.hi.allocateTargetId(s).next(o=>(i=new Ai(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Fs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(t,s.targetId)),s})}async function Qf(e,t,n){const s=Lt(e),i=s.Fs.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ea(o))throw o;ct(wg,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Fs=s.Fs.remove(t),s.Ms.delete(i.target)}function yy(e,t,n){const s=Lt(e);let i=Dt.min(),r=Ut();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Lt(l),f=d.Ms.get(u);return f!==void 0?U.resolve(d.Fs.get(f)):d.hi.getTargetData(c,u)}(s,o,gs(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.Cs.getDocumentsMatchingQuery(o,t,n?i:Dt.min(),n?r:Ut())).next(a=>(SL(s,h2(t),a),{documents:a,qs:r})))}function SL(e,t,n){let s=e.xs.get(t)||Dt.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.xs.set(t,s)}class by{constructor(){this.activeTargetIds=v2()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class AL{constructor(){this.Fo=new by,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,s){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new by,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="ConnectivityMonitor";class Ey{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ct(wy,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){ct(wy,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc=null;function Jf(){return Mc===null?Mc=function(){return 268435456+Math.round(2147483648*Math.random())}():Mc++,"0x"+Mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RestConnection",CL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PL{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${s}/databases/${i}`,this.Ko=this.databaseId.database===Bu?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(t,n,s,i,r){const o=Jf(),a=this.Go(t,n.toUriEncodedString());ct(Gd,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,r);const{host:c}=new URL(a),u=Xo(c);return this.jo(t,a,l,s,u).then(d=>(ct(Gd,`Received RPC '${t}' ${o}: `,d),d),d=>{throw Bi(Gd,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Jo(t,n,s,i,r,o){return this.Wo(t,n,s,i,r)}zo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>t[r]=i),s&&s.headers.forEach((i,r)=>t[r]=i)}Go(t,n){const s=CL[t];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke="WebChannelConnection";class DL extends PL{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,s,i,r){const o=Jf();return new Promise((a,l)=>{const c=new FE;c.setWithCredentials(!0),c.listenOnce(BE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case lu.NO_ERROR:const d=c.getResponseJson();ct(Ke,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case lu.TIMEOUT:ct(Ke,`RPC '${t}' ${o} timed out`),l(new _t(q.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:const f=c.getStatus();if(ct(Ke,`RPC '${t}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const _=function(T){const k=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(k)>=0?k:q.UNKNOWN}(m.status);l(new _t(_,m.message))}else l(new _t(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new _t(q.UNAVAILABLE,"Connection failed."));break;default:It(9055,{c_:t,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{ct(Ke,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(i);ct(Ke,`RPC '${t}' ${o} sending request:`,i),c.send(n,"POST",u,s,15)})}P_(t,n,s){const i=Jf(),r=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=HE(),a=jE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");ct(Ke,`Creating RPC '${t}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.T_(d);let f=!1,p=!1;const m=new kL({Ho:y=>{p?ct(Ke,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(f||(ct(Ke,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),ct(Ke,`RPC '${t}' stream ${i} sending:`,y),d.send(y))},Yo:()=>d.close()}),_=(y,T,k)=>{y.listen(T,D=>{try{k(D)}catch(R){setTimeout(()=>{throw R},0)}})};return _(d,Na.EventType.OPEN,()=>{p||(ct(Ke,`RPC '${t}' stream ${i} transport opened.`),m.s_())}),_(d,Na.EventType.CLOSE,()=>{p||(p=!0,ct(Ke,`RPC '${t}' stream ${i} transport closed`),m.__(),this.I_(d))}),_(d,Na.EventType.ERROR,y=>{p||(p=!0,Bi(Ke,`RPC '${t}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),m.__(new _t(q.UNAVAILABLE,"The operation could not be completed")))}),_(d,Na.EventType.MESSAGE,y=>{var T;if(!p){const k=y.data[0];Zt(!!k,16349);const D=k,R=(D==null?void 0:D.error)||((T=D[0])===null||T===void 0?void 0:T.error);if(R){ct(Ke,`RPC '${t}' stream ${i} received error:`,R);const O=R.status;let N=function(w){const x=Ae[w];if(x!==void 0)return IT(x)}(O),I=R.message;N===void 0&&(N=q.INTERNAL,I="Unknown error status: "+O+" with message "+R.message),p=!0,m.__(new _t(N,I)),d.close()}else ct(Ke,`RPC '${t}' stream ${i} received:`,k),m.a_(k)}}),_(a,UE.STAT_EVENT,y=>{y.stat===Bf.PROXY?ct(Ke,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===Bf.NOPROXY&&ct(Ke,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.o_()},0),m}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(e){return new L2(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Fi=t,this.timerId=n,this.d_=s,this.E_=i,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-s);i>0&&ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="PersistentStream";class FT{constructor(t,n,s,i,r,o,a,l){this.Fi=t,this.w_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new $T(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Js(n.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.b_===n&&this.W_(s,i)},s=>{t(()=>{const i=new _t(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(i)})})}W_(t,n){const s=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{s(()=>this.G_(i))}),this.stream.onMessage(i=>{s(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return ct(Ty,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(ct(Ty,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RL extends FT{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=$2(this.serializer,t),s=function(r){if(!("targetChange"in r))return Dt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?ms(o.readTime):Dt.min()}(t);return this.listener.J_(n,s)}H_(t){const n={};n.database=Xf(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Wf(l)?{documents:U2(r,l)}:{query:j2(r,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xT(r,o.resumeToken);const c=qf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Dt.min())>0){a.readTime=Yu(r,o.snapshotVersion.toTimestamp());const c=qf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const s=z2(this.serializer,t);s&&(n.labels=s),this.k_(n)}Y_(t){const n={};n.database=Xf(this.serializer),n.removeTarget=t,this.k_(n)}}class ML extends FT{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=B2(t.writeResults,t.commitTime),s=ms(t.commitTime);return this.listener.ta(s,n)}na(){const t={};t.database=Xf(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>F2(this.serializer,s))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{}class LL extends OL{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new _t(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Wo(t,Kf(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new _t(q.UNKNOWN,r.toString())})}Jo(t,n,s,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(t,Kf(n,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class NL{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Js(n),this._a=!1):ct("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class VL{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(o=>{s.enqueueAndForget(async()=>{Wr(this)&&(ct(Or,"Restarting streams for network reachability change."),await async function(l){const c=Lt(l);c.Ia.add(4),await nc(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Zh(c)}(this))})}),this.Aa=new NL(s,i)}}async function Zh(e){if(Wr(e))for(const t of e.da)await t(!0)}async function nc(e){for(const t of e.da)await t(!1)}function BT(e,t){const n=Lt(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Sg(n)?Ig(n):na(n).x_()&&Tg(n,t))}function Eg(e,t){const n=Lt(e),s=na(n);n.Ta.delete(t),s.x_()&&UT(n,t),n.Ta.size===0&&(s.x_()?s.B_():Wr(n)&&n.Aa.set("Unknown"))}function Tg(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}na(e).H_(t)}function UT(e,t){e.Ra.$e(t),na(e).Y_(t)}function Ig(e){e.Ra=new D2({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),na(e).start(),e.Aa.aa()}function Sg(e){return Wr(e)&&!na(e).M_()&&e.Ta.size>0}function Wr(e){return Lt(e).Ia.size===0}function jT(e){e.Ra=void 0}async function $L(e){e.Aa.set("Online")}async function FL(e){e.Ta.forEach((t,n)=>{Tg(e,t)})}async function BL(e,t){jT(e),Sg(e)?(e.Aa.la(t),Ig(e)):e.Aa.set("Unknown")}async function UL(e,t,n){if(e.Aa.set("Online"),t instanceof AT&&t.state===2&&t.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(e,t)}catch(s){ct(Or,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Ku(e,s)}else if(t instanceof du?e.Ra.Ye(t):t instanceof ST?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Dt.min()))try{const s=await VT(e.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.Ta.get(c);u&&r.Ta.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.Ta.get(l);if(!u)return;r.Ta.set(l,u.withResumeToken(We.EMPTY_BYTE_STRING,u.snapshotVersion)),UT(r,l);const d=new Ai(u.target,l,c,u.sequenceNumber);Tg(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(s){ct(Or,"Failed to raise snapshot:",s),await Ku(e,s)}}async function Ku(e,t,n){if(!ea(t))throw t;e.Ia.add(1),await nc(e),e.Aa.set("Offline"),n||(n=()=>VT(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ct(Or,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Zh(e)})}function HT(e,t){return t().catch(n=>Ku(e,n,t))}async function td(e){const t=Lt(e),n=Wi(t);let s=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:lg;for(;jL(t);)try{const i=await TL(t.localStore,s);if(i===null){t.Pa.length===0&&n.B_();break}s=i.batchId,HL(t,i)}catch(i){await Ku(t,i)}zT(t)&&WT(t)}function jL(e){return Wr(e)&&e.Pa.length<10}function HL(e,t){e.Pa.push(t);const n=Wi(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function zT(e){return Wr(e)&&!Wi(e).M_()&&e.Pa.length>0}function WT(e){Wi(e).start()}async function zL(e){Wi(e).na()}async function WL(e){const t=Wi(e);for(const n of e.Pa)t.X_(n.mutations)}async function YL(e,t,n){const s=e.Pa.shift(),i=gg.from(s,t,n);await HT(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await td(e)}async function qL(e,t){t&&Wi(e).Z_&&await async function(s,i){if(function(o){return P2(o)&&o!==q.ABORTED}(i.code)){const r=s.Pa.shift();Wi(s).N_(),await HT(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await td(s)}}(e,t),zT(e)&&WT(e)}async function Iy(e,t){const n=Lt(e);n.asyncQueue.verifyOperationInProgress(),ct(Or,"RemoteStore received new credentials");const s=Wr(n);n.Ia.add(3),await nc(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Zh(n)}async function KL(e,t){const n=Lt(e);t?(n.Ia.delete(2),await Zh(n)):t||(n.Ia.add(2),await nc(n),n.Aa.set("Unknown"))}function na(e){return e.Va||(e.Va=function(n,s,i){const r=Lt(n);return r.ia(),new RL(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Zo:$L.bind(null,e),e_:FL.bind(null,e),n_:BL.bind(null,e),J_:UL.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),Sg(e)?Ig(e):e.Aa.set("Unknown")):(await e.Va.stop(),jT(e))})),e.Va}function Wi(e){return e.ma||(e.ma=function(n,s,i){const r=Lt(n);return r.ia(),new ML(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:zL.bind(null,e),n_:qL.bind(null,e),ea:WL.bind(null,e),ta:YL.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await td(e)):(await e.ma.stop(),e.Pa.length>0&&(ct(Or,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Ag(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(e,t){if(Js("AsyncQueue",`${t}: ${e}`),ea(e))return new _t(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static emptySet(t){return new xo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||wt.comparator(n.key,s.key):(n,s)=>wt.comparator(n.key,s.key),this.keyedMap=Va(),this.sortedSet=new ve(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof xo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new xo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.fa=new ve(wt.comparator)}track(t){const n=t.doc.key,s=this.fa.get(n);s?t.type!==0&&s.type===3?this.fa=this.fa.insert(n,t):t.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.fa=this.fa.remove(n):t.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):It(63341,{At:t,ga:s}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,s)=>{t.push(s)}),t}}class Fo{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fo(t,n,xo.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class XL{constructor(){this.queries=Ay(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const i=Lt(n),r=i.queries;i.queries=Ay(),r.forEach((o,a)=>{for(const l of a.wa)l.onError(s)})})(this,new _t(q.ABORTED,"Firestore shutting down"))}}function Ay(){return new Hr(e=>hT(e),qh)}async function QL(e,t){const n=Lt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.Sa()&&t.ba()&&(s=2):(r=new GL,s=t.ba()?0:1);try{switch(s){case 0:r.ya=await n.onListen(i,!0);break;case 1:r.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xg(o,`Initialization of query '${ho(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.wa.push(t),t.va(n.onlineState),r.ya&&t.Ca(r.ya)&&Cg(n)}async function JL(e,t){const n=Lt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.wa.indexOf(t);o>=0&&(r.wa.splice(o,1),r.wa.length===0?i=t.ba()?0:1:!r.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ZL(e,t){const n=Lt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.wa)a.Ca(i)&&(s=!0);o.ya=i}}s&&Cg(n)}function tN(e,t,n){const s=Lt(e),i=s.queries.get(t);if(i)for(const r of i.wa)r.onError(n);s.queries.delete(t)}function Cg(e){e.Da.forEach(t=>{t.next()})}var Zf,xy;(xy=Zf||(Zf={})).Fa="default",xy.Cache="cache";class eN{constructor(t,n,s){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Fo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Fo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Zf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t){this.key=t}}class qT{constructor(t){this.key=t}}class nN{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ut(),this.mutatedKeys=Ut(),this.Xa=dT(t),this.eu=new xo(this.Xa)}get tu(){return this.Ha}nu(t,n){const s=n?n.ru:new Sy,i=n?n.eu:this.eu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,d)=>{const f=i.get(u),p=Kh(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;f&&p?f.data.isEqual(p.data)?m!==_&&(s.track({type:3,doc:p}),y=!0):this.iu(f,p)||(s.track({type:2,doc:p}),y=!0,(l&&this.Xa(p,l)>0||c&&this.Xa(p,c)<0)&&(a=!0)):!f&&p?(s.track({type:0,doc:p}),y=!0):f&&!p&&(s.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(p?(o=o.add(p),r=_?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{eu:o,ru:s,Ds:a,mutatedKeys:r}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const o=t.ru.pa();o.sort((u,d)=>function(p,m){const _=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{At:y})}};return _(p)-_(m)}(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(s),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new Fo(this.query,t.eu,r,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Sy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Ut(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const n=[];return t.forEach(s=>{this.Za.has(s)||n.push(new qT(s))}),this.Za.forEach(s=>{t.has(s)||n.push(new YT(s))}),n}uu(t){this.Ha=t.qs,this.Za=Ut();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Fo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Pg="SyncEngine";class sN{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class iN{constructor(t){this.key=t,this.lu=!1}}class rN{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Hr(a=>hT(a),qh),this.Tu=new Map,this.Iu=new Set,this.du=new ve(wt.comparator),this.Eu=new Map,this.Au=new _g,this.Ru={},this.Vu=new Map,this.mu=$o.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function oN(e,t,n=!0){const s=ZT(e);let i;const r=s.Pu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.cu()):i=await KT(s,t,n,!0),i}async function aN(e,t){const n=ZT(e);await KT(n,t,!0,!1)}async function KT(e,t,n,s){const i=await IL(e.localStore,gs(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await lN(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&BT(e.remoteStore,i),a}async function lN(e,t,n,s,i){e.gu=(d,f,p)=>async function(_,y,T,k){let D=y.view.nu(T);D.Ds&&(D=await yy(_.localStore,y.query,!1).then(({documents:I})=>y.view.nu(I,D)));const R=k&&k.targetChanges.get(y.targetId),O=k&&k.targetMismatches.get(y.targetId)!=null,N=y.view.applyChanges(D,_.isPrimaryClient,R,O);return Py(_,y.targetId,N._u),N.snapshot}(e,d,f,p);const r=await yy(e.localStore,t,!0),o=new nN(t,r.qs),a=o.nu(r.documents),l=ec.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);Py(e,n,c._u);const u=new sN(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function cN(e,t,n){const s=Lt(e),i=s.Pu.get(t),r=s.Tu.get(i.targetId);if(r.length>1)return s.Tu.set(i.targetId,r.filter(o=>!qh(o,t))),void s.Pu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Qf(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Eg(s.remoteStore,i.targetId),tp(s,i.targetId)}).catch(ta)):(tp(s,i.targetId),await Qf(s.localStore,i.targetId,!0))}async function uN(e,t){const n=Lt(e),s=n.Pu.get(t),i=n.Tu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Eg(n.remoteStore,s.targetId))}async function hN(e,t,n){const s=_N(e);try{const i=await function(o,a){const l=Lt(o),c=fe.now(),u=a.reduce((p,m)=>p.add(m.key),Ut());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Zs(),_=Ut();return l.Os.getEntries(p,u).next(y=>{m=y,m.forEach((T,k)=>{k.isValidDocument()||(_=_.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(y=>{d=y;const T=[];for(const k of a){const D=I2(k,d.get(k.key).overlayedDocument);D!=null&&T.push(new zr(k.key,D,iT(D.value.mapValue),qs.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,T,a)}).next(y=>{f=y;const T=y.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(p,y.batchId,T)})}).then(()=>({batchId:f.batchId,changes:pT(d)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new ve($t)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(s,i.batchId,n),await sc(s,i.changes),await td(s.remoteStore)}catch(i){const r=xg(i,"Failed to persist write");n.reject(r)}}async function GT(e,t){const n=Lt(e);try{const s=await wL(n.localStore,t);t.targetChanges.forEach((i,r)=>{const o=n.Eu.get(r);o&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Zt(o.lu,14607):i.removedDocuments.size>0&&(Zt(o.lu,42227),o.lu=!1))}),await sc(n,s,t)}catch(s){await ta(s)}}function Cy(e,t,n){const s=Lt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Pu.forEach((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Lt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.wa)f.va(a)&&(c=!0)}),c&&Cg(l)}(s.eventManager,t),i.length&&s.hu.J_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function dN(e,t,n){const s=Lt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Eu.get(t),r=i&&i.key;if(r){let o=new ve(wt.comparator);o=o.insert(r,Ze.newNoDocument(r,Dt.min()));const a=Ut().add(r),l=new Qh(Dt.min(),new Map,new ve($t),o,a);await GT(s,l),s.du=s.du.remove(r),s.Eu.delete(t),kg(s)}else await Qf(s.localStore,t,!1).then(()=>tp(s,t,n)).catch(ta)}async function fN(e,t){const n=Lt(e),s=t.batch.batchId;try{const i=await bL(n.localStore,t);QT(n,s,null),XT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await sc(n,i)}catch(i){await ta(i)}}async function pN(e,t,n){const s=Lt(e);try{const i=await function(o,a){const l=Lt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Zt(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,t);QT(s,t,n),XT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await sc(s,i)}catch(i){await ta(i)}}function XT(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function QT(e,t,n){const s=Lt(e);let i=s.Ru[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Ru[s.currentUser.toKey()]=i}}function tp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Tu.get(t))e.Pu.delete(s),n&&e.hu.pu(s,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(s=>{e.Au.containsKey(s)||JT(e,s)})}function JT(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Eg(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),kg(e))}function Py(e,t,n){for(const s of n)s instanceof YT?(e.Au.addReference(s.key,t),gN(e,s)):s instanceof qT?(ct(Pg,"Document no longer in limbo: "+s.key),e.Au.removeReference(s.key,t),e.Au.containsKey(s.key)||JT(e,s.key)):It(19791,{yu:s})}function gN(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Iu.has(s)||(ct(Pg,"New document in limbo: "+n),e.Iu.add(s),kg(e))}function kg(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new wt(pe.fromString(t)),s=e.mu.next();e.Eu.set(s,new iN(n)),e.du=e.du.insert(n,s),BT(e.remoteStore,new Ai(gs(fg(n.path)),s,"TargetPurposeLimboResolution",Hh.ue))}}async function sc(e,t,n){const s=Lt(e),i=[],r=[],o=[];s.Pu.isEmpty()||(s.Pu.forEach((a,l)=>{o.push(s.gu(l,t,n).then(c=>{var u;if((c||n)&&s.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;s.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=bg.Es(l.targetId,c);r.push(d)}}))}),await Promise.all(o),s.hu.J_(i),await async function(l,c){const u=Lt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,f=>U.forEach(f.Is,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>U.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!ea(d))throw d;ct(wg,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.Fs.get(f),m=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(m);u.Fs=u.Fs.insert(f,_)}}}(s.localStore,r))}async function mN(e,t){const n=Lt(e);if(!n.currentUser.isEqual(t)){ct(Pg,"User change. New user:",t.toKey());const s=await NT(n.localStore,t);n.currentUser=t,function(r,o){r.Vu.forEach(a=>{a.forEach(l=>{l.reject(new _t(q.CANCELLED,o))})}),r.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await sc(n,s.Bs)}}function vN(e,t){const n=Lt(e),s=n.Eu.get(t);if(s&&s.lu)return Ut().add(s.key);{let i=Ut();const r=n.Tu.get(t);if(!r)return i;for(const o of r){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function ZT(e){const t=Lt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dN.bind(null,t),t.hu.J_=ZL.bind(null,t.eventManager),t.hu.pu=tN.bind(null,t.eventManager),t}function _N(e){const t=Lt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pN.bind(null,t),t}class Gu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return yL(this.persistence,new mL,t.initialUser,this.serializer)}Du(t){return new LT(yg.Vi,this.serializer)}bu(t){return new AL}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gu.provider={build:()=>new Gu};class yN extends Gu{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){Zt(this.persistence.referenceDelegate instanceof qu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new eL(s,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new LT(s=>qu.Vi(s,n),this.serializer)}}class ep{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Cy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mN.bind(null,this.syncEngine),await KL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new XL}()}createDatastore(t){const n=Jh(t.databaseInfo.databaseId),s=function(r){return new DL(r)}(t.databaseInfo);return function(r,o,a,l){return new LL(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,i,r,o,a){return new VL(s,i,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Cy(this.syncEngine,n,0),function(){return Ey.C()?new Ey:new xL}())}createSyncEngine(t,n){return function(i,r,o,a,l,c,u){const d=new rN(i,r,o,a,l,c);return u&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const r=Lt(i);ct(Or,"RemoteStore shutting down."),r.Ia.add(5),await nc(r),r.Ea.shutdown(),r.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Js("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="FirestoreClient";class wN{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{ct(Yi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ct(Yi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=xg(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Qd(e,t){e.asyncQueue.verifyOperationInProgress(),ct(Yi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await NT(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>{Bi("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{ct("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Bi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),e._offlineComponents=t}async function ky(e,t){e.asyncQueue.verifyOperationInProgress();const n=await EN(e);ct(Yi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>Iy(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>Iy(t.remoteStore,i)),e._onlineComponents=t}async function EN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ct(Yi,"Using user provided OfflineComponentProvider");try{await Qd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),await Qd(e,new Gu)}}else ct(Yi,"Using default OfflineComponentProvider"),await Qd(e,new yN(void 0));return e._offlineComponents}async function tI(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ct(Yi,"Using user provided OnlineComponentProvider"),await ky(e,e._uninitializedComponentsProvider._online)):(ct(Yi,"Using default OnlineComponentProvider"),await ky(e,new ep))),e._onlineComponents}function TN(e){return tI(e).then(t=>t.syncEngine)}async function IN(e){const t=await tI(e),n=t.eventManager;return n.onListen=oN.bind(null,t.syncEngine),n.onUnlisten=cN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=aN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uN.bind(null,t.syncEngine),n}function SN(e,t,n={}){const s=new Ni;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new bN({next:f=>{u.Ou(),o.enqueueAndForget(()=>JL(r,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new _t(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new _t(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new eN(fg(a.path),u,{includeMetadataChanges:!0,ka:!0});return QL(r,d)}(await IN(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firestore.googleapis.com",Ry=!0;class My{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nI,this.ssl=Ry}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ry;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=OT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Z2)throw new _t(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$O("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eI((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _t(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _t(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _t(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Dg{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new My({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _t(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new _t(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new My(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new CO;switch(s.type){case"firstParty":return new RO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _t(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Dy.get(n);s&&(ct("ComponentProvider","Removing Datastore"),Dy.delete(n),s.terminate())}(this),Promise.resolve()}}function AN(e,t,n,s={}){var i;e=Al(e,Dg);const r=Xo(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;r&&(X1(`https://${l}`),Q1("Firestore",!0)),o.host!==nI&&o.host!==l&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:r,emulatorOptions:s});if(!Pr(c,a)&&(e._setSettings(c),s.mockUserToken)){let u,d;if(typeof s.mockUserToken=="string")u=s.mockUserToken,d=Qe.MOCK_USER;else{u=Fk(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new _t(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Qe(f)}e._authCredentials=new PO(new WE(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Rg(this.firestore,t,this._query)}}class Ve{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ve(this.firestore,t,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Zl(n,Ve._jsonSchema))return new Ve(t,s||null,new wt(pe.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:xe("string",Ve._jsonSchemaVersion),referencePath:xe("string")};class Ml extends Rg{constructor(t,n,s){super(t,n,fg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ve(this.firestore,null,new wt(t))}withConverter(t){return new Ml(this.firestore,t,this._path)}}function Oy(e,t,...n){if(e=Hn(e),arguments.length===1&&(t=og.newId()),VO("doc","path",t),e instanceof Dg){const s=pe.fromString(t,...n);return q_(s),new Ve(e,null,new wt(s))}{if(!(e instanceof Ve||e instanceof Ml))throw new _t(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(pe.fromString(t,...n));return q_(s),new Ve(e.firestore,e instanceof Ml?e.converter:null,new wt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="AsyncQueue";class Ny{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new $T(this,"async_queue_retry"),this.oc=()=>{const s=Xd();s&&ct(Ly,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=t;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ni;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!ea(t))throw t;ct(Ly,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(s=>{throw this.tc=s,this.nc=!1,Js("INTERNAL UNHANDLED ERROR: ",Vy(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(t,n,s){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=Ag.createAndSchedule(this,t,n,s,r=>this.lc(r));return this.ec.push(i),i}ac(){this.tc&&It(47125,{hc:Vy(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function Vy(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Mg extends Dg{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new Ny,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ny(t),this._firestoreClient=void 0,await t}}}function xN(e,t){const n=typeof e=="object"?e:eE(),s=typeof e=="string"?e:t||Bu,i=Gp(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=Vk("firestore");r&&AN(i,...r)}return i}function sI(e){if(e._terminated)throw new _t(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||CN(e),e._firestoreClient}function CN(e){var t,n,s;const i=e._freezeSettings(),r=function(a,l,c,u){return new GO(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,eI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new wN(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ln(We.fromBase64String(t))}catch(n){throw new _t(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ln(We.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Zl(t,Ln._jsonSchema))return Ln.fromBase64String(t.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:xe("string",Ln._jsonSchemaVersion),bytes:xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return $t(this._lat,t._lat)||$t(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(t){if(Zl(t,vs._jsonSchema))return new vs(t.latitude,t.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:xe("string",vs._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Zl(t,_s._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new _s(t.vectorValues);throw new _t(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:xe("string",_s._jsonSchemaVersion),vectorValues:xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^__.*__$/;class kN{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new zr(t,this.data,this.fieldMask,n,this.fieldTransforms):new tc(t,this.data,n,this.fieldTransforms)}}function rI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ec:e})}}class Lg{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Lg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:s,mc:!1});return i.fc(t),i}gc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:s,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Xu(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(rI(this.Ec)&&PN.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class DN{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Jh(t)}Dc(t,n,s,i=!1){return new Lg({Ec:t,methodName:n,bc:s,path:ze.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RN(e){const t=e._freezeSettings(),n=Jh(e._databaseId);return new DN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MN(e,t,n,s,i,r={}){const o=e.Dc(r.merge||r.mergeFields?2:0,t,n,i);cI("Data must be an object, but it was:",o,s);const a=aI(s,o);let l,c;if(r.merge)l=new Xn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const d of r.mergeFields){const f=ON(t,d,n);if(!o.contains(f))throw new _t(q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);NN(u,f)||u.push(f)}l=new Xn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new kN(new On(a),l,c)}function oI(e,t){if(lI(e=Hn(e)))return cI("Unsupported field value:",t,e),aI(e,t);if(e instanceof iI)return function(s,i){if(!rI(i.Ec))throw i.wc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let l=oI(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(s,i){if((s=Hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _2(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=fe.fromDate(s);return{timestampValue:Yu(i.serializer,r)}}if(s instanceof fe){const r=new fe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yu(i.serializer,r)}}if(s instanceof vs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ln)return{bytesValue:xT(i.serializer,s._byteString)};if(s instanceof Ve){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:vg(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof _s)return function(o,a){return{mapValue:{fields:{[eT]:{stringValue:sT},[Uu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return pg(a.serializer,c)})}}}}}}(s,i);throw i.wc(`Unsupported field value: ${ag(s)}`)}(e,t)}function aI(e,t){const n={};return GE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jr(e,(s,i)=>{const r=oI(i,t.Vc(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function lI(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof fe||e instanceof vs||e instanceof Ln||e instanceof Ve||e instanceof iI||e instanceof _s)}function cI(e,t,n){if(!lI(n)||!qE(n)){const s=ag(n);throw s==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+s)}}function ON(e,t,n){if((t=Hn(t))instanceof Og)return t._internalPath;if(typeof t=="string")return uI(e,t);throw Xu("Field path arguments must be of type string or ",e,!1,void 0,n)}const LN=new RegExp("[~\\*/\\[\\]]");function uI(e,t,n){if(t.search(LN)>=0)throw Xu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Og(...t.split("."))._internalPath}catch{throw Xu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Xu(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new _t(q.INVALID_ARGUMENT,a+e+l)}function NN(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new VN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(dI("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VN extends hI{data(){return super.data()}}function dI(e,t){return typeof t=="string"?uI(e,t):t instanceof Og?t._internalPath:t._delegate._internalPath}class $N{convertValue(t,n="none"){switch(zi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Hi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw It(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return jr(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(t){var n,s,i;const r=(i=(s=(n=t.fields)===null||n===void 0?void 0:n[Uu].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>Te(o.doubleValue));return new _s(r)}convertGeoPoint(t){return new vs(Te(t.latitude),Te(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Wh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Cl(t));default:return null}}convertTimestamp(t){const n=ji(t);return new fe(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=pe.fromString(t);Zt(MT(s),9688,{name:t});const i=new Pl(s.get(1),s.get(3)),r=new wt(s.popFirst(5));return i.isEqual(n)||Js(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class Fa{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Sr extends hI{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(dI("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Sr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sr._jsonSchema={type:xe("string",Sr._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class fu extends Sr{data(t={}){return super.data(t)}}class rl{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fa(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new fu(this._firestore,this._userDataWriter,s.key,s,new Fa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:BN(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=rl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function BN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(e){e=Al(e,Ve);const t=Al(e.firestore,Mg);return SN(sI(t),e._key).then(n=>WN(t,e,n))}rl._jsonSchemaVersion="firestore/querySnapshot/1.0",rl._jsonSchema={type:xe("string",rl._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class jN extends $N{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ln(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function HN(e,t,n){e=Al(e,Ve);const s=Al(e.firestore,Mg),i=FN(e.converter,t,n);return zN(s,[MN(RN(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,qs.none())])}function zN(e,t){return function(s,i){const r=new Ni;return s.asyncQueue.enqueueAndForget(async()=>hN(await TN(s),i,r)),r.promise}(sI(e),t)}function WN(e,t,n){const s=n.docs.get(t._key),i=new jN(e);return new Sr(e,i,t._key,s,new Fa(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){Zo=i})(Qo),Oo(new kr("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Mg(new kO(s.getProvider("auth-internal")),new MO(o,s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _t(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(c.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Oi(j_,H_,t),Oi(j_,H_,"esm2017")})();const YN={apiKey:"AIzaSyDXxGvAaldYqYysPQHlMkQXbOVTpaxnjuA",authDomain:"chikh-counter.firebaseapp.com",projectId:"chikh-counter",storageBucket:"chikh-counter.firebasestorage.app",messagingSenderId:"600153083247",appId:"1:600153083247:web:f214631934a7f62d25ec9a"},fI=tE(YN),Lr=AO(fI),$y=xN(fI);const qN={class:"clock-container"},KN={class:"clock-face",viewBox:"0 0 100 100"},GN={id:"clock-bg",cx:"50%",cy:"50%",r:"100%"},XN=["stop-color"],QN=["stop-color"],JN={id:"dot-gradient",x1:"0",y1:"0",x2:"1",y2:"1"},ZN=["stop-color"],tV=["stop-color"],eV=["x1","y1","x2","y2"],nV=["cx","cy","r","onClick"],sV=["x","y","fill"],iV={__name:"ClockGroups",props:{groups:{type:Array,required:!0}},setup(e){const t=e;function n(d){const f=new Date(d.start);let p=f.getHours()%12,m=f.getMinutes();return p+m/60}function s(d,f){const p=(d-3)/12*2*Math.PI;return{x:50+f*Math.cos(p),y:50+f*Math.sin(p)}}function i(d){return 8}const r=Nt(null),o=Nt({});function a(d,f){r.value=d;const p=f.target.ownerSVGElement.getBoundingClientRect(),m=f.target.getBoundingClientRect();o.value={left:`${m.left-p.left+m.width/2}px`,top:`${m.top-p.top-10}px`},setTimeout(()=>{r.value=null},1500)}function l(d){return{transition:`r 0.5s cubic-bezier(.68,-0.55,.27,1.55) ${(d*.07).toFixed(2)}s`}}function c(){return getComputedStyle(document.documentElement).getPropertyValue("--primary")}function u(){return getComputedStyle(document.documentElement).getPropertyValue("--accent")}return typeof window<"u"&&(window.addDebugGroup=function(d,f=0,p=1){const m=new Date;m.setHours(d),m.setMinutes(f),m.setSeconds(0),m.setMilliseconds(0);const _={start:m.getTime(),count:p};if(Array.isArray(t.groups))t.groups.push(_);else{const y=S1();y&&y.emit&&y.emit("add-debug-group",_)}return _}),(d,f)=>(ut(),vt("div",qN,[(ut(),vt("svg",KN,[Q("defs",null,[Q("radialGradient",GN,[Q("stop",{offset:"0%","stop-color":u(),"stop-opacity":"0.4"},null,8,XN),Q("stop",{offset:"100%","stop-color":c(),"stop-opacity":"1.0"},null,8,QN)]),Q("linearGradient",JN,[Q("stop",{offset:"0%","stop-color":u()},null,8,ZN),Q("stop",{offset:"100%","stop-color":c()},null,8,tV)])]),f[0]||(f[0]=Q("circle",{cx:"50",cy:"50",r:"20",fill:"url(#clock-bg)"},null,-1)),f[1]||(f[1]=Q("circle",{cx:"50",cy:"50",r:"30",class:"clock-outline",fill:"none"},null,-1)),Q("g",null,[(ut(),vt(re,null,Cn(12,p=>Q("line",{key:p,x1:s(p,40).x,y1:s(p,40).y,x2:s(p,40).x,y2:s(p,40).y,class:"hour-mark"},null,8,eV)),64))]),Q("g",null,[(ut(!0),vt(re,null,Cn(e.groups,(p,m)=>(ut(),vt("g",{key:p.start},[Q("circle",{cx:s(n(p),40).x,cy:s(n(p),40).y,r:i(p.count),class:"group-dot",style:en(l(m)),onClick:_=>a(m,_),fill:"url(#dot-gradient)"},null,12,nV),Q("text",{x:s(n(p),40).x,y:s(n(p),40).y,"text-anchor":"middle","dominant-baseline":"central","font-size":"10","font-weight":"bold",fill:u(),style:{"pointer-events":"none","user-select":"none","text-shadow":"0 2px 8px #00000025"}},pn(p.count),9,sV)]))),128))]),f[2]||(f[2]=Q("circle",{cx:"50",cy:"50",r:"3",fill:"#555555"},null,-1))])),Pt(Nh,{name:"fade"},{default:be(()=>{var p;return[r.value!==null&&e.groups[r.value]?(ut(),vt("div",{key:0,class:"dot-count",style:en(o.value)},pn((p=e.groups[r.value])==null?void 0:p.count),5)):nn("",!0)]}),_:1})]))}},rV=Gi(iV,[["__scopeId","data-v-176feed1"]]);const oV={class:"menu-panel"},aV={__name:"BurgerMenu",setup(e){const t=Nt(!1),n=Yp(),s=async()=>{await gM(Lr),t.value=!1,n.push("/auth")};return(i,r)=>{const o=$s("router-link");return ut(),vt("div",null,[Q("button",{class:"burger-btn",onClick:r[0]||(r[0]=a=>t.value=!t.value)},r[5]||(r[5]=[Q("span",null,null,-1),Q("span",null,null,-1),Q("span",null,null,-1)])),Pt(Nh,{name:"slide"},{default:be(()=>[t.value?(ut(),vt("div",{key:0,class:"menu-overlay",onClick:r[4]||(r[4]=zp(a=>t.value=!1,["self"]))},[Q("nav",oV,[Pt(o,{to:"/stats",class:"menu-link",onClick:r[1]||(r[1]=a=>t.value=!1),"aria-label":"Статистика"},{default:be(()=>r[6]||(r[6]=[Q("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[Q("path",{d:"M4 18V10M9 18V6M15 18V14M20 18V2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_:1,__:[6]}),Pt(o,{to:"/calendar",class:"menu-link",onClick:r[2]||(r[2]=a=>t.value=!1),"aria-label":"Календар"},{default:be(()=>r[7]||(r[7]=[Q("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[Q("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor","stroke-width":"2"}),Q("path",{d:"M16 3v4M8 3v4M3 9h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])),_:1,__:[7]}),Pt(o,{to:"/settings",class:"menu-link",onClick:r[3]||(r[3]=a=>t.value=!1),"aria-label":"Налаштування"},{default:be(()=>r[8]||(r[8]=[Q("svg",{viewBox:"0 0 45.973 45.973",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Q("path",{d:"M43.454,18.443h-2.437c-0.453-1.766-1.16-3.42-2.082-4.933l1.752-1.756c0.473-0.473,0.733-1.104,0.733-1.774 c0-0.669-0.262-1.301-0.733-1.773l-2.92-2.917c-0.947-0.948-2.602-0.947-3.545-0.001l-1.826,1.815 C30.9,6.232,29.296,5.56,27.529,5.128V2.52c0-1.383-1.105-2.52-2.488-2.52h-4.128c-1.383,0-2.471,1.137-2.471,2.52v2.607 c-1.766,0.431-3.38,1.104-4.878,1.977l-1.825-1.815c-0.946-0.948-2.602-0.947-3.551-0.001L5.27,8.205 C4.802,8.672,4.535,9.318,4.535,9.978c0,0.669,0.259,1.299,0.733,1.772l1.752,1.76c-0.921,1.513-1.629,3.167-2.081,4.933H2.501 C1.117,18.443,0,19.555,0,20.935v4.125c0,1.384,1.117,2.471,2.501,2.471h2.438c0.452,1.766,1.159,3.43,2.079,4.943l-1.752,1.763 c-0.474,0.473-0.734,1.106-0.734,1.776s0.261,1.303,0.734,1.776l2.92,2.919c0.474,0.473,1.103,0.733,1.772,0.733 s1.299-0.261,1.773-0.733l1.833-1.816c1.498,0.873,3.112,1.545,4.878,1.978v2.604c0,1.383,1.088,2.498,2.471,2.498h4.128 c1.383,0,2.488-1.115,2.488-2.498v-2.605c1.767-0.432,3.371-1.104,4.869-1.977l1.817,1.812c0.474,0.475,1.104,0.735,1.775,0.735 c0.67,0,1.301-0.261,1.774-0.733l2.92-2.917c0.473-0.472,0.732-1.103,0.734-1.772c0-0.67-0.262-1.299-0.734-1.773l-1.75-1.77 c0.92-1.514,1.627-3.179,2.08-4.943h2.438c1.383,0,2.52-1.087,2.52-2.471v-4.125C45.973,19.555,44.837,18.443,43.454,18.443z M22.976,30.85c-4.378,0-7.928-3.517-7.928-7.852c0-4.338,3.55-7.85,7.928-7.85c4.379,0,7.931,3.512,7.931,7.85 C30.906,27.334,27.355,30.85,22.976,30.85z",fill:"currentColor"})],-1)])),_:1,__:[8]}),Q("button",{class:"menu-link logout-link",onClick:s,"aria-label":"Logout"},r[9]||(r[9]=[Q("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Q("path",{d:"M16 17L21 12L16 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),Q("path",{d:"M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),Q("path",{d:"M12 19C7.58172 19 4 15.4183 4 11C4 6.58172 7.58172 3 12 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))])])):nn("",!0)]),_:1})])}}},lV=Gi(aV,[["__scopeId","data-v-fde26930"]]);const cV={__name:"Home",setup(e){const t=Nt(localStorage.getItem("color-primary"));function n(k){let D=k.replace("#","");D.length===3&&(D=D.split("").map(O=>O+O).join(""));const R=parseInt(D,16);return[R>>16,R>>8&255,R&255]}function s([k,D,R]){return"#"+[k,D,R].map(O=>O.toString(16).padStart(2,"0")).join("")}function i(k,D){const[R,O,N]=n(k),I=D<0?0:255,b=Math.abs(D);return s([Math.round((I-R)*b+R),Math.round((I-O)*b+O),Math.round((I-N)*b+N)])}const r=K(()=>{const k=t.value,D=i(k,.5),R=i(k,-.3);return`linear-gradient(135deg, ${D} 0%, ${k} 50%, ${R} 100%)`}),o=Nt(0),a=Nt(!1),l=Nt([]),c=Nt({}),u=Nt(!0),d=()=>new Date,f=()=>{const k=d();return`${k.getFullYear()}-${k.getMonth()+1}-${k.getDate()}`};function p(){const k=f();l.value=c.value[k]||[];const D=l.value.reduce((R,O)=>R+O.count,0);o.value!==D&&(a.value=!0,setTimeout(()=>{a.value=!1},250)),o.value=D}async function m(){u.value=!0;const k=Lr.currentUser;if(!k){u.value=!1;return}const D=Oy($y,"users",k.uid),R=await UN(D);R.exists()?c.value=R.data().groups||{}:c.value={},p(),u.value=!1}async function _(){const k=Lr.currentUser;if(!k)return;const D=Oy($y,"users",k.uid);await HN(D,{groups:c.value},{merge:!0})}function y(){localStorage.setItem("groups_"+f(),JSON.stringify(l.value))}async function T(){const k=d().getTime(),D=f();c.value[D]||(c.value[D]=[]);const R=c.value[D];if(R.length===0)R.push({start:k,count:1});else{const O=R[R.length-1],N=30*60*1e3;k-O.start<N?O.count++:R.push({start:k,count:1})}l.value=R,o.value=l.value.reduce((O,N)=>O+N.count,0),c.value[D]=R,y(),await _()}return Yp(),Ss(()=>{m()}),(k,D)=>(ut(),vt("main",{class:"main-container",style:en({background:r.value})},[Pt(lV),Q("div",{class:oe(["counter",{animated:a.value}])},pn(o.value),3),Pt(rV,{groups:l.value},null,8,["groups"]),Q("button",{class:"tap-btn",onClick:T},"ЧІХ")],4))}},uV=Gi(cV,[["__scopeId","data-v-921ac527"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ic(e){return e+.5|0}const xi=(e,t,n)=>Math.max(Math.min(e,n),t);function Ba(e){return xi(ic(e*2.55),0,255)}function Vi(e){return xi(ic(e*255),0,255)}function Fs(e){return xi(ic(e/2.55)/100,0,1)}function Fy(e){return xi(ic(e*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},np=[..."0123456789ABCDEF"],hV=e=>np[e&15],dV=e=>np[(e&240)>>4]+np[e&15],Oc=e=>(e&240)>>4===(e&15),fV=e=>Oc(e.r)&&Oc(e.g)&&Oc(e.b)&&Oc(e.a);function pV(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Rn[e[1]]*17,g:255&Rn[e[2]]*17,b:255&Rn[e[3]]*17,a:t===5?Rn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Rn[e[1]]<<4|Rn[e[2]],g:Rn[e[3]]<<4|Rn[e[4]],b:Rn[e[5]]<<4|Rn[e[6]],a:t===9?Rn[e[7]]<<4|Rn[e[8]]:255})),n}const gV=(e,t)=>e<255?t(e):"";function mV(e){var t=fV(e)?hV:dV;return e?"#"+t(e.r)+t(e.g)+t(e.b)+gV(e.a,t):void 0}const vV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pI(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function _V(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function yV(e,t,n){const s=pI(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function bV(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function Ng(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=bV(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function Vg(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Vi)}function $g(e,t,n){return Vg(pI,e,t,n)}function wV(e,t,n){return Vg(yV,e,t,n)}function EV(e,t,n){return Vg(_V,e,t,n)}function gI(e){return(e%360+360)%360}function TV(e){const t=vV.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Ba(+t[5]):Vi(+t[5]));const i=gI(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=wV(i,r,o):t[1]==="hsv"?s=EV(i,r,o):s=$g(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function IV(e,t){var n=Ng(e);n[0]=gI(n[0]+t),n=$g(n),e.r=n[0],e.g=n[1],e.b=n[2]}function SV(e){if(!e)return;const t=Ng(e),n=t[0],s=Fy(t[1]),i=Fy(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${Fs(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const By={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Uy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function AV(){const e={},t=Object.keys(Uy),n=Object.keys(By);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,By[r]);r=parseInt(Uy[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Lc;function xV(e){Lc||(Lc=AV(),Lc.transparent=[0,0,0,0]);const t=Lc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const CV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function PV(e){const t=CV.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Ba(o):xi(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Ba(s):xi(s,0,255)),i=255&(t[4]?Ba(i):xi(i,0,255)),r=255&(t[6]?Ba(r):xi(r,0,255)),{r:s,g:i,b:r,a:n}}}function kV(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Fs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Jd=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ro=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function DV(e,t,n){const s=ro(Fs(e.r)),i=ro(Fs(e.g)),r=ro(Fs(e.b));return{r:Vi(Jd(s+n*(ro(Fs(t.r))-s))),g:Vi(Jd(i+n*(ro(Fs(t.g))-i))),b:Vi(Jd(r+n*(ro(Fs(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Nc(e,t,n){if(e){let s=Ng(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=$g(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function mI(e,t){return e&&Object.assign(t||{},e)}function jy(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Vi(e[3]))):(t=mI(e,{r:0,g:0,b:0,a:1}),t.a=Vi(t.a)),t}function RV(e){return e.charAt(0)==="r"?PV(e):TV(e)}class Ol{constructor(t){if(t instanceof Ol)return t;const n=typeof t;let s;n==="object"?s=jy(t):n==="string"&&(s=pV(t)||xV(t)||RV(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=mI(this._rgb);return t&&(t.a=Fs(t.a)),t}set rgb(t){this._rgb=jy(t)}rgbString(){return this._valid?kV(this._rgb):void 0}hexString(){return this._valid?mV(this._rgb):void 0}hslString(){return this._valid?SV(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=DV(this._rgb,t._rgb,n)),this}clone(){return new Ol(this.rgb)}alpha(t){return this._rgb.a=Vi(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=ic(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Nc(this._rgb,2,t),this}darken(t){return Nc(this._rgb,2,-t),this}saturate(t){return Nc(this._rgb,1,t),this}desaturate(t){return Nc(this._rgb,1,-t),this}rotate(t){return IV(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Os(){}const MV=(()=>{let e=0;return()=>e++})();function ee(e){return e==null}function ge(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Xt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function $e(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Sn(e,t){return $e(e)?e:t}function zt(e,t){return typeof e>"u"?t:e}const OV=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ce(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function te(e,t,n,s){let i,r,o;if(ge(e))if(r=e.length,s)for(i=r-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<r;i++)t.call(n,e[i],i);else if(Xt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function Qu(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Ju(e){if(ge(e))return e.map(Ju);if(Xt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Ju(e[n[i]]);return t}return e}function vI(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function LV(e,t,n,s){if(!vI(e))return;const i=t[e],r=n[e];Xt(i)&&Xt(r)?Ll(i,r,s):t[e]=Ju(r)}function Ll(e,t,n){const s=ge(t)?t:[t],i=s.length;if(!Xt(e))return e;n=n||{};const r=n.merger||LV;let o;for(let a=0;a<i;++a){if(o=s[a],!Xt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function ol(e,t){return Ll(e,t,{merger:NV})}function NV(e,t,n){if(!vI(e))return;const s=t[e],i=n[e];Xt(s)&&Xt(i)?ol(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ju(i))}const Hy={"":e=>e,x:e=>e.x,y:e=>e.y};function VV(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function $V(e){const t=VV(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Zu(e,t){return(Hy[t]||(Hy[t]=$V(t)))(e)}function Fg(e){return e.charAt(0).toUpperCase()+e.slice(1)}const th=e=>typeof e<"u",qi=e=>typeof e=="function",zy=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function FV(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ce=Math.PI,Fn=2*Ce,BV=Fn+Ce,eh=Number.POSITIVE_INFINITY,UV=Ce/180,xn=Ce/2,ur=Ce/4,Wy=Ce*2/3,Ci=Math.log10,Bo=Math.sign;function al(e,t,n){return Math.abs(e-t)<n}function Yy(e){const t=Math.round(e);e=al(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ci(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function jV(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function HV(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Nl(e){return!HV(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function zV(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function _I(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Pi(e){return e*(Ce/180)}function Bg(e){return e*(180/Ce)}function qy(e){if(!$e(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function WV(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Ce&&(r+=Fn),{angle:r,distance:i}}function sp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function YV(e,t){return(e-t+BV)%Fn-Ce}function Kn(e){return(e%Fn+Fn)%Fn}function yI(e,t,n,s){const i=Kn(e),r=Kn(t),o=Kn(n),a=Kn(r-i),l=Kn(o-i),c=Kn(i-r),u=Kn(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function Nn(e,t,n){return Math.max(t,Math.min(n,e))}function qV(e){return Nn(e,-32768,32767)}function Ua(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function Ug(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const wr=(e,t,n,s)=>Ug(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),KV=(e,t,n)=>Ug(e,n,s=>e[s][t]>=n);function GV(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const bI=["push","pop","shift","splice","unshift"];function XV(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),bI.forEach(n=>{const s="_onData"+Fg(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Ky(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(bI.forEach(r=>{delete e[r]}),delete e._chartjs)}function QV(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const wI=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function EI(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,wI.call(window,()=>{s=!1,e.apply(t,n)}))}}function JV(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const jg=e=>e==="start"?"left":e==="end"?"right":"center",Xe=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,ZV=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function t$(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(i=Math.min(wr(l,u,d).lo,n?s:wr(t,u,o.getPixelForValue(d)).lo),c){const _=l.slice(0,i+1).reverse().findIndex(y=>!ee(y[a.axis]));i-=Math.max(0,_)}i=Nn(i,0,s-1)}if(m){let _=Math.max(wr(l,o.axis,f,!0).hi+1,n?0:wr(t,u,o.getPixelForValue(f),!0).hi+1);if(c){const y=l.slice(_-1).findIndex(T=>!ee(T[a.axis]));_+=Math.max(0,y)}r=Nn(_,i,s)-i}else r=s-i}return{start:i,count:r}}function e$(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const Vc=e=>e===0||e===1,Gy=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Fn/n)),Xy=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Fn/n)+1,ll={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xn)+1,easeOutSine:e=>Math.sin(e*xn),easeInOutSine:e=>-.5*(Math.cos(Ce*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Vc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Vc(e)?e:Gy(e,.075,.3),easeOutElastic:e=>Vc(e)?e:Xy(e,.075,.3),easeInOutElastic(e){return Vc(e)?e:e<.5?.5*Gy(e*2,.1125,.45):.5+.5*Xy(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ll.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ll.easeInBounce(e*2)*.5:ll.easeOutBounce(e*2-1)*.5+.5};function Hg(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Qy(e){return Hg(e)?e:new Ol(e)}function Zd(e){return Hg(e)?e:new Ol(e).saturate(.5).darken(.1).hexString()}const n$=["x","y","borderWidth","radius","tension"],s$=["color","borderColor","backgroundColor"];function i$(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:s$},numbers:{type:"number",properties:n$}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function r$(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Jy=new Map;function o$(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Jy.get(n);return s||(s=new Intl.NumberFormat(e,t),Jy.set(n,s)),s}function zg(e,t,n){return o$(t,n).format(e)}const TI={values(e){return ge(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=a$(e,n)}const o=Ci(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zg(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Ci(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?TI.numeric.call(this,e,t,n):""}};function a$(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var ed={formatters:TI};function l$(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ed.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Nr=Object.create(null),ip=Object.create(null);function cl(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function tf(e,t,n){return typeof t=="string"?Ll(cl(e,t),n):Ll(cl(e,""),t)}class c${constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Zd(i.backgroundColor),this.hoverBorderColor=(s,i)=>Zd(i.borderColor),this.hoverColor=(s,i)=>Zd(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return tf(this,t,n)}get(t){return cl(this,t)}describe(t,n){return tf(ip,t,n)}override(t,n){return tf(Nr,t,n)}route(t,n,s,i){const r=cl(this,t),o=cl(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Xt(l)?Object.assign({},c,l):zt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var we=new c$({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[i$,r$,l$]);function u$(e){return!e||ee(e.size)||ee(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function nh(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function h$(e,t,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!ge(d))o=nh(e,i,r,o,d);else if(ge(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!ge(f)&&(o=nh(e,i,r,o,f));e.restore();const p=r.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[r[l]];r.splice(0,p)}return o}function hr(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function Zy(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function rp(e,t,n,s){II(e,t,n,s,null)}function II(e,t,n,s,i){let r,o,a,l,c,u,d,f;const p=t.pointStyle,m=t.rotation,_=t.radius;let y=(m||0)*UV;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(y),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(_)||_<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,s,i/2,_,0,0,Fn):e.arc(n,s,_,0,Fn),e.closePath();break;case"triangle":u=i?i/2:_,e.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*_),y+=Wy,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*_),y+=Wy,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*_),e.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(y+ur)*l,d=Math.cos(y+ur)*(i?i/2-c:l),a=Math.sin(y+ur)*l,f=Math.sin(y+ur)*(i?i/2-c:l),e.arc(n-d,s-a,c,y-Ce,y-xn),e.arc(n+f,s-o,c,y-xn,y),e.arc(n+d,s+a,c,y,y+xn),e.arc(n-f,s+o,c,y+xn,y+Ce),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*_,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}y+=ur;case"rectRot":d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+f,s-o),e.lineTo(n+d,s+a),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":y+=ur;case"cross":d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),y+=ur,d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(y)*_,a=Math.sin(y)*_,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(y)*(i?i/2:_),s+Math.sin(y)*_);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function zs(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Wg(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Yg(e){e.restore()}function d$(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function f$(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function p$(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ee(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function g$(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function m$(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Vr(e,t,n,s,i,r={}){const o=ge(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,p$(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&m$(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),ee(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),g$(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function sh(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Ce,Ce,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Ce,xn,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,xn,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-xn,!0),e.lineTo(n+o.topLeft,s)}const v$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function y$(e,t){const n=(""+e).match(v$);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const b$=e=>+e||0;function SI(e,t){const n={},s=Xt(t),i=s?Object.keys(t):t,r=Xt(e)?s?o=>zt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=b$(r(o));return n}function w$(e){return SI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Co(e){return SI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function rn(e){const t=w$(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Me(e,t){e=e||{},t=t||we.font;let n=zt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=zt(e.style,t.style);s&&!(""+s).match(_$)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:zt(e.family,t.family),lineHeight:y$(zt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:zt(e.weight,t.weight),string:""};return i.string=u$(i),i}function $c(e,t,n,s){let i=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),n!==void 0&&ge(a)&&(a=a[n%a.length],i=!1),a!==void 0))return s&&!i&&(s.cacheable=!1),a}function E$(e,t,n){const{min:s,max:i}=e,r=OV(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Ji(e,t){return Object.assign(Object.create(e),t)}function qg(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=PI("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>qg([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return xI(a,l,()=>k$(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return eb(a).includes(l)},ownKeys(a){return eb(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Uo(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:AI(e,s),setContext:r=>Uo(e,r,n,s),override:r=>Uo(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return xI(r,o,()=>I$(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function AI(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:qi(n)?n:()=>n,isIndexable:qi(s)?s:()=>s}}const T$=(e,t)=>e?e+Fg(t):t,Kg=(e,t)=>Xt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function xI(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function I$(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return qi(a)&&o.isScriptable(t)&&(a=S$(t,a,e,n)),ge(a)&&a.length&&(a=A$(t,a,e,o.isIndexable)),Kg(t,a)&&(a=Uo(a,i,r&&r[t],o)),a}function S$(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),Kg(e,l)&&(l=Gg(i._scopes,i,e,l)),l}function A$(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Xt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=Gg(c,i,e,u);t.push(Uo(d,r,o&&o[e],a))}}return t}function CI(e,t,n){return qi(e)?e(t,n):e}const x$=(e,t)=>e===!0?t:typeof e=="string"?Zu(t,e):void 0;function C$(e,t,n,s,i){for(const r of t){const o=x$(n,r);if(o){e.add(o);const a=CI(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Gg(e,t,n,s){const i=t._rootScopes,r=CI(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=tb(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=tb(a,o,r,l,s),l===null)?!1:qg(Array.from(a),[""],i,r,()=>P$(t,n,s))}function tb(e,t,n,s,i){for(;n;)n=C$(e,t,n,s,i);return n}function P$(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return ge(i)&&Xt(n)?n:i||{}}function k$(e,t,n,s){let i;for(const r of t)if(i=PI(T$(r,e),n),typeof i<"u")return Kg(e,i)?Gg(n,s,e,i):i}function PI(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function eb(e){let t=e._keys;return t||(t=e._keys=D$(e._scopes)),t}function D$(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}const R$=Number.EPSILON||1e-14,jo=(e,t)=>t<e.length&&!e[t].skip&&e[t],kI=e=>e==="x"?"y":"x";function M$(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=sp(r,i),l=sp(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function O$(e,t,n){const s=e.length;let i,r,o,a,l,c=jo(e,0);for(let u=0;u<s-1;++u)if(l=c,c=jo(e,u+1),!(!l||!c)){if(al(t[u],0,R$)){n[u]=n[u+1]=0;continue}i=n[u]/t[u],r=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=r*o*t[u])}}function L$(e,t,n="x"){const s=kI(n),i=e.length;let r,o,a,l=jo(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=jo(e,c+1),!a)continue;const u=a[n],d=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=d-r*t[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=d+r*t[c])}}function N$(e,t="x"){const n=kI(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=jo(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=jo(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?Bo(i[o-1])!==Bo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}O$(e,i,r),L$(e,r,t)}function Fc(e,t,n){return Math.max(Math.min(e,n),t)}function V$(e,t){let n,s,i,r,o,a=zs(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&zs(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Fc(i.cp1x,t.left,t.right),i.cp1y=Fc(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Fc(i.cp2x,t.left,t.right),i.cp2y=Fc(i.cp2y,t.top,t.bottom)))}function $$(e,t,n,s,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")N$(e,i);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=M$(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&V$(e,n)}function Xg(){return typeof window<"u"&&typeof document<"u"}function Qg(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ih(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const nd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function F$(e,t){return nd(e).getPropertyValue(t)}const B$=["top","right","bottom","left"];function Ar(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=B$[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const U$=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function j$(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(U$(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function mr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=nd(n),r=i.boxSizing==="border-box",o=Ar(i,"padding"),a=Ar(i,"border","width"),{x:l,y:c,box:u}=j$(e,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=t;return r&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/m*n.height/s)}}function H$(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&Qg(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=nd(r),l=Ar(a,"border","width"),c=Ar(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=ih(a.maxWidth,r,"clientWidth"),i=ih(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||eh,maxHeight:i||eh}}const Bc=e=>Math.round(e*10)/10;function z$(e,t,n,s){const i=nd(e),r=Ar(i,"margin"),o=ih(i.maxWidth,e,"clientWidth")||eh,a=ih(i.maxHeight,e,"clientHeight")||eh,l=H$(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Ar(i,"border","width"),p=Ar(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Bc(Math.min(c,o,l.maxWidth)),u=Bc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Bc(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Bc(Math.floor(u*s))),{width:c,height:u}}function nb(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const W$=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Xg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function sb(e,t){const n=F$(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function vr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Y$(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function q$(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=vr(e,i,n),a=vr(i,r,n),l=vr(r,t,n),c=vr(o,a,n),u=vr(a,l,n);return vr(c,u,n)}const K$=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},G$=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Po(e,t,n){return e?K$(t,n):G$()}function DI(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function RI(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function MI(e){return e==="angle"?{between:yI,compare:YV,normalize:Kn}:{between:Ua,compare:(t,n)=>t-n,normalize:t=>t}}function ib({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function X$(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=MI(s),l=t.length;let{start:c,end:u,loop:d}=e,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(t[c%l][s]),i,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function Q$(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=MI(s),{start:u,end:d,loop:f,style:p}=X$(e,t,n),m=[];let _=!1,y=null,T,k,D;const R=()=>l(i,D,T)&&a(i,D)!==0,O=()=>a(r,T)===0||l(r,D,T),N=()=>_||R(),I=()=>!_||O();for(let b=u,w=u;b<=d;++b)k=t[b%o],!k.skip&&(T=c(k[s]),T!==D&&(_=l(T,i,r),y===null&&N()&&(y=a(T,i)===0?b:w),y!==null&&I()&&(m.push(ib({start:y,end:b,loop:f,count:o,style:p})),y=null),w=b,D=T));return y!==null&&m.push(ib({start:y,end:d,loop:f,count:o,style:p})),m}function J$(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=Q$(s[i],e.points,t);r.length&&n.push(...r)}return n}function Z$(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function tF(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function eF(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=Z$(n,i,r,s);if(s===!0)return rb(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return rb(e,tF(n,o,l,c),n,t)}function rb(e,t,n,s){return!s||!s.setContext||!n?t:nF(e,t,n,s)}function nF(e,t,n,s){const i=e._chart.getContext(),r=ob(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=r,d=t[0].start,f=d;function p(m,_,y,T){const k=a?-1:1;if(m!==_){for(m+=l;n[m%l].skip;)m-=k;for(;n[_%l].skip;)_+=k;m%l!==_%l&&(c.push({start:m%l,end:_%l,loop:y,style:T}),u=T,d=_%l)}}for(const m of t){d=a?d:m.start;let _=n[d%l],y;for(f=d+1;f<=m.end;f++){const T=n[f%l];y=ob(s.setContext(Ji(i,{type:"segment",p0:_,p1:T,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),sF(y,u)&&p(d,f-1,m.loop,u),_=T,u=y}d<f-1&&p(d,f-1,m.loop,u)}return c}function ob(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function sF(e,t){if(!t)return!1;const n=[],s=function(i,r){return Hg(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Uc(e,t,n){return e.options.clip?e[n]:t[n]}function iF(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Uc(n,t,"left"),right:Uc(n,t,"right"),top:Uc(s,t,"top"),bottom:Uc(s,t,"bottom")}:t}function rF(e,t){const n=t._clip;if(n.disabled)return!1;const s=iF(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class oF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ls=new oF;const ab="transparent",aF={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Qy(e||ab),i=s.valid&&Qy(t||ab);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class lF{constructor(t,n,s,i){const r=n[s];i=$c([t.to,i,r,t.from]);const o=$c([t.from,r,i]);this._active=!0,this._fn=t.fn||aF[t.type||typeof o],this._easing=ll[t.easing]||ll.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=$c([t.to,n,i,t.from]),this._from=$c([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class OI{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Xt(t))return;const n=Object.keys(we.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Xt(r))return;const o={};for(const a of n)o[a]=r[a];(ge(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=uF(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&cF(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let d=r[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){t[c]=u;continue}r[c]=d=new lF(f,t,c,u),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Ls.add(this._chart,s),!0}}function cF(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function uF(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lb(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function hF(e,t,n){if(n===!1)return!1;const s=lb(e,n),i=lb(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function dF(e){let t,n,s,i;return Xt(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function LI(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function cb(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],$e(c)&&(r||t===0||Bo(t)===Bo(c))&&(t+=c)}return!u&&!s.all?0:t}function fF(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function ef(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function pF(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function gF(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function mF(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function ub(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function hb(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=pF(r,o,s),d=t.length;let f;for(let p=0;p<d;++p){const m=t[p],{[l]:_,[c]:y}=m,T=m._stacks||(m._stacks={});f=T[c]=mF(i,u,_),f[a]=y,f._top=ub(f,o,!0,s.type),f._bottom=ub(f,o,!1,s.type);const k=f._visualValues||(f._visualValues={});k[a]=y}}function nf(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function vF(e,t){return Ji(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function _F(e,t,n){return Ji(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Sa(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const sf=e=>e==="reset"||e==="none",db=(e,t)=>t?e:Object.assign({},e),yF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:LI(n,!0),values:null};class ul{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ef(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Sa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,r=n.xAxisID=zt(s.xAxisID,nf(t,"x")),o=n.yAxisID=zt(s.yAxisID,nf(t,"y")),a=n.rAxisID=zt(s.rAxisID,nf(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ky(this._data,this),t._stacked&&Sa(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Xt(n)){const i=this._cachedMeta;this._data=fF(n,i)}else if(s!==n){if(s){Ky(s,this);const i=this._cachedMeta;Sa(i),i._parsed=[]}n&&Object.isExtensible(n)&&XV(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=ef(n.vScale,n),n.stack!==s.stack&&(i=!0,Sa(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(hb(this,n._parsed),n._stacked=ef(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{ge(i[t])?f=this.parseArrayData(s,i,t,n):Xt(i[t])?f=this.parseObjectData(s,i,t,n):f=this.parsePrimitiveData(s,i,t,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=d=f[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&hb(this,f)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+s,d[f]={[a]:u||r.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+s,d=n[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+s,p=n[f],c[u]={x:r.parse(Zu(p,a),f),y:o.parse(Zu(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:LI(i,!0),values:n._stacks[t.axis]._visualValues};return cb(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=cb(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=yF(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=gF(a);let f,p;function m(){p=i[f];const _=p[a.axis];return!$e(p[t.axis])||u>_||d<_}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],$e(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=dF(zt(this.options.clip,hF(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=_F(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=vF(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&th(s);if(a)return db(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(we.elements[t]),m=()=>this.getContext(s,i,n),_=c.resolveNamedOptions(f,p,m,d);return _.$shared&&(_.$shared=l,r[o]=Object.freeze(db(_,l))),_}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(t,s,n))}const c=new OI(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||sf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){sf(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!sf(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Sa(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ct(ul,"defaults",{}),Ct(ul,"datasetElementType",null),Ct(ul,"dataElementType",null);class pu extends ul{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=t$(n,i,o);this._drawStart=a,this._drawCount=l,e$(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,y=Nl(m)?m:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||r||i==="none",k=n+s,D=t.length;let R=n>0&&this.getParsed(n-1);for(let O=0;O<D;++O){const N=t[O],I=T?N:{};if(O<n||O>=k){I.skip=!0;continue}const b=this.getParsed(O),w=ee(b[p]),x=I[f]=o.getPixelForValue(b[f],O),C=I[p]=r||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[p],O);I.skip=isNaN(x)||isNaN(C)||w,I.stop=O>0&&Math.abs(b[f]-R[f])>y,_&&(I.parsed=b,I.raw=c.data[O]),d&&(I.options=u||this.resolveDataElementOptions(O,N.active?"active":i)),T||this.updateElement(N,O,I,i),R=b}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Ct(pu,"id","line"),Ct(pu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ct(pu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function dr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Jg{constructor(t){Ct(this,"options");this.options=t||{}}static override(t){Object.assign(Jg.prototype,t)}init(){}formats(){return dr()}parse(){return dr()}format(){return dr()}add(){return dr()}diff(){return dr()}startOf(){return dr()}endOf(){return dr()}}var bF={_date:Jg};function wF(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?KV:wr;if(s){if(i._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const f=c(r,t,n-d),p=c(r,t,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=e,p=f.slice(0,u.lo+1).reverse().findIndex(_=>!ee(_[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(_=>!ee(_[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:r.length-1}}function rc(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=wF(r[a],t,o,i);for(let p=d;p<=f;++p){const m=u[p];m.skip||s(m,c,p)}}}function EF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function rf(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||rc(e,n,t,function(a,l,c){!i&&!zs(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function TF(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=WV(o,{x:t.x,y:t.y});yI(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return rc(e,n,t,r),i}function IF(e,t,n,s,i,r){let o=[];const a=EF(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(t.x,t.y,i);if(s&&!p)return;const m=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(m))&&!p)return;const y=a(t,m);y<l?(o=[{element:u,datasetIndex:d,index:f}],l=y):y===l&&o.push({element:u,datasetIndex:d,index:f})}return rc(e,n,t,c),o}function of(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?TF(e,t,n,i):IF(e,t,n,s,i,r)}function fb(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return rc(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var SF={evaluateInteractionItems:rc,modes:{index(e,t,n,s){const i=mr(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?rf(e,i,r,s,o):of(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=mr(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?rf(e,i,r,s,o):of(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=mr(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return rf(e,i,r,s,o)},nearest(e,t,n,s){const i=mr(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return of(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=mr(t,e);return fb(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=mr(t,e);return fb(e,i,"y",n.intersect,s)}}};const NI=["left","top","right","bottom"];function Aa(e,t){return e.filter(n=>n.pos===t)}function pb(e,t){return e.filter(n=>NI.indexOf(n.pos)===-1&&n.box.axis===t)}function xa(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function AF(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function xF(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!NI.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function CF(e,t){const n=xF(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function PF(e){const t=AF(e),n=xa(t.filter(c=>c.box.fullSize),!0),s=xa(Aa(t,"left"),!0),i=xa(Aa(t,"right")),r=xa(Aa(t,"top"),!0),o=xa(Aa(t,"bottom")),a=pb(t,"x"),l=pb(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Aa(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function gb(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function VI(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function kF(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Xt(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&VI(o,r.getPadding());const a=Math.max(0,t.outerWidth-gb(o,e,"left","right")),l=Math.max(0,t.outerHeight-gb(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function DF(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function RF(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function ja(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,RF(a.horizontal,t));const{same:d,other:f}=kF(t,n,a,s);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&ja(i,t,n,s)||u}function jc(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function mb(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,f=c.size||l.height;th(c.start)&&(o=c.start),l.fullSize?jc(l,i.left,o,n.outerWidth-i.right-i.left,f):jc(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*u,f=c.size||l.width;th(c.start)&&(r=c.start),l.fullSize?jc(l,r,i.top,f,n.outerHeight-i.bottom-i.top):jc(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var Vn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=rn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=PF(e.boxes),l=a.vertical,c=a.horizontal;te(e.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,y)=>y.box.options&&y.box.options.display===!1?_:_+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);VI(f,rn(s));const p=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),m=CF(l.concat(c),d);ja(a.fullSize,p,d,m),ja(l,p,d,m),ja(c,p,d,m)&&ja(l,p,d,m),DF(p),mb(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,mb(a.rightAndBottom,p,d,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},te(a.chartArea,_=>{const y=_.box;Object.assign(y,e.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class $I{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class MF extends $I{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gu="$chartjs",OF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vb=e=>e===null||e==="";function LF(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[gu]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",vb(i)){const r=sb(e,"width");r!==void 0&&(e.width=r)}if(vb(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=sb(e,"height");r!==void 0&&(e.height=r)}return e}const FI=W$?{passive:!0}:!1;function NF(e,t,n){e&&e.addEventListener(t,n,FI)}function VF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,FI)}function $F(e,t){const n=OF[e.type]||e.type,{x:s,y:i}=mr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function rh(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function FF(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||rh(a.addedNodes,s),o=o&&!rh(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function BF(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||rh(a.removedNodes,s),o=o&&!rh(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Vl=new Map;let _b=0;function BI(){const e=window.devicePixelRatio;e!==_b&&(_b=e,Vl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function UF(e,t){Vl.size||window.addEventListener("resize",BI),Vl.set(e,t)}function jF(e){Vl.delete(e),Vl.size||window.removeEventListener("resize",BI)}function HF(e,t,n){const s=e.canvas,i=s&&Qg(s);if(!i)return;const r=EI((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),UF(e,r),o}function af(e,t,n){n&&n.disconnect(),t==="resize"&&jF(e)}function zF(e,t,n){const s=e.canvas,i=EI(r=>{e.ctx!==null&&n($F(r,e))},e);return NF(s,t,i),i}class WF extends $I{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(LF(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[gu])return!1;const s=n[gu].initial;["height","width"].forEach(r=>{const o=s[r];ee(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[gu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:FF,detach:BF,resize:HF}[n]||zF;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:af,detach:af,resize:af}[n]||VF)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return z$(t,n,s,i)}isAttached(t){const n=t&&Qg(t);return!!(n&&n.isConnected)}}function YF(e){return!Xg()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?MF:WF}var Zc;let Yr=(Zc=class{constructor(){Ct(this,"x");Ct(this,"y");Ct(this,"active",!1);Ct(this,"options");Ct(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Nl(this.x)&&Nl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},Ct(Zc,"defaults",{}),Ct(Zc,"defaultRoutes"),Zc);function qF(e,t){const n=e.options.ticks,s=KF(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?XF(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return QF(t,c,r,o/i),c;const u=GF(r,t,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Hc(t,c,u,ee(p)?0:a-p,a),d=0,f=o-1;d<f;d++)Hc(t,c,u,r[d],r[d+1]);return Hc(t,c,u,l,ee(p)?t.length:l+p),c}return Hc(t,c,u),c}function KF(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function GF(e,t,n){const s=JF(e),i=t.length/n;if(!s)return Math.max(i,1);const r=jV(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function XF(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function QF(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Hc(e,t,n,s,i){const r=zt(s,0),o=Math.min(zt(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function JF(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const ZF=e=>e==="left"?"right":e==="right"?"left":e,yb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,bb=(e,t)=>Math.min(t||e,e);function wb(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function t4(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function e4(e,t){te(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Ca(e){return e.drawTicks?e.tickLength:0}function Eb(e,t){if(!e.display)return 0;const n=Me(e.font,t),s=rn(e.padding);return(ge(e.text)?e.text.length:1)*n.lineHeight+s.height}function n4(e,t){return Ji(e,{scale:t,type:"scale"})}function s4(e,t,n){return Ji(e,{tick:n,index:t,type:"tick"})}function i4(e,t,n){let s=jg(e);return(n&&t!=="right"||!n&&t==="right")&&(s=ZF(s)),s}function r4(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,f,p,m;const _=o-i,y=a-r;if(e.isHorizontal()){if(p=Xe(s,r,a),Xt(n)){const T=Object.keys(n)[0],k=n[T];m=u[T].getPixelForValue(k)+_-t}else n==="center"?m=(c.bottom+c.top)/2+_-t:m=yb(e,n,t);f=a-r}else{if(Xt(n)){const T=Object.keys(n)[0],k=n[T];p=u[T].getPixelForValue(k)-y+t}else n==="center"?p=(c.left+c.right)/2-y+t:p=yb(e,n,t);m=Xe(s,o,i),d=n==="left"?-xn:xn}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class qr extends Yr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Sn(t,Number.POSITIVE_INFINITY),n=Sn(n,Number.NEGATIVE_INFINITY),s=Sn(s,Number.POSITIVE_INFINITY),i=Sn(i,Number.NEGATIVE_INFINITY),{min:Sn(t,s),max:Sn(n,i),minDefined:$e(t),maxDefined:$e(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Sn(n,Sn(s,n)),max:Sn(s,Sn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ce(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=E$(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?wb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=qF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ce(this.options.afterUpdate,[this])}beforeSetDimensions(){ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ce(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ce(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=ce(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=bb(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=Nn(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-Ca(t.grid)-n.padding-Eb(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=Bg(Math.min(Math.asin(Nn((u.highest.height+6)/a,-1,1)),Math.asin(Nn(l/c,-1,1))-Math.asin(Nn(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ce(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Eb(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=Ca(r)+l):(t.height=this.maxHeight,t.width=Ca(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,m=Pi(this.labelRotation),_=Math.cos(m),y=Math.sin(m);if(a){const T=s.mirror?0:y*d.width+_*f.height;t.height=Math.min(this.maxHeight,t.height+T+p)}else{const T=s.mirror?0:_*d.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+T+p)}this._calculatePadding(c,u,y,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*t.width,p=s*n.height):(f=s*t.height,p=i*n.width):r==="start"?p=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ce(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ee(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=wb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/bb(n,s));let c=0,u=0,d,f,p,m,_,y,T,k,D,R,O;for(d=0;d<n;d+=l){if(m=t[d].label,_=this._resolveTickFontOptions(d),i.font=y=_.string,T=r[y]=r[y]||{data:{},gc:[]},k=_.lineHeight,D=R=0,!ee(m)&&!ge(m))D=nh(i,T.data,T.gc,D,m),R=k;else if(ge(m))for(f=0,p=m.length;f<p;++f)O=m[f],!ee(O)&&!ge(O)&&(D=nh(i,T.data,T.gc,D,O),R+=k);o.push(D),a.push(R),c=Math.max(D,c),u=Math.max(R,u)}e4(r,n);const N=o.indexOf(c),I=a.indexOf(u),b=w=>({width:o[w]||0,height:a[w]||0});return{first:b(0),last:b(n-1),widest:b(N),highest:b(I),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return qV(this._alignToPixels?hr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=s4(this.getContext(),t,s))}return this.$context||(this.$context=n4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Pi(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ca(r),p=[],m=a.setContext(this.getContext()),_=m.display?m.width:0,y=_/2,T=function(at){return hr(s,at,_)};let k,D,R,O,N,I,b,w,x,C,A,S;if(o==="top")k=T(this.bottom),I=this.bottom-f,w=k-y,C=T(t.top)+y,S=t.bottom;else if(o==="bottom")k=T(this.top),C=t.top,S=T(t.bottom)-y,I=k+y,w=this.top+f;else if(o==="left")k=T(this.right),N=this.right-f,b=k-y,x=T(t.left)+y,A=t.right;else if(o==="right")k=T(this.left),x=t.left,A=T(t.right)-y,N=k+y,b=this.left+f;else if(n==="x"){if(o==="center")k=T((t.top+t.bottom)/2+.5);else if(Xt(o)){const at=Object.keys(o)[0],ot=o[at];k=T(this.chart.scales[at].getPixelForValue(ot))}C=t.top,S=t.bottom,I=k+y,w=I+f}else if(n==="y"){if(o==="center")k=T((t.left+t.right)/2);else if(Xt(o)){const at=Object.keys(o)[0],ot=o[at];k=T(this.chart.scales[at].getPixelForValue(ot))}N=k-y,b=N-f,x=t.left,A=t.right}const dt=zt(i.ticks.maxTicksLimit,d),J=Math.max(1,Math.ceil(d/dt));for(D=0;D<d;D+=J){const at=this.getContext(D),ot=r.setContext(at),gt=a.setContext(at),Vt=ot.lineWidth,W=ot.color,St=gt.dash||[],et=gt.dashOffset,kt=ot.tickWidth,Mt=ot.tickColor,qt=ot.tickBorderDash||[],jt=ot.tickBorderDashOffset;R=t4(this,D,l),R!==void 0&&(O=hr(s,R,Vt),c?N=b=x=A=O:I=w=C=S=O,p.push({tx1:N,ty1:I,tx2:b,ty2:w,x1:x,y1:C,x2:A,y2:S,width:Vt,color:W,borderDash:St,borderDashOffset:et,tickWidth:kt,tickColor:Mt,tickBorderDash:qt,tickBorderDashOffset:jt}))}return this._ticksLength=d,this._borderValue=k,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=Ca(s.grid),p=f+u,m=d?-u:p,_=-Pi(this.labelRotation),y=[];let T,k,D,R,O,N,I,b,w,x,C,A,S="middle";if(i==="top")N=this.bottom-m,I=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+m,I=this._getXAxisLabelAlignment();else if(i==="left"){const J=this._getYAxisLabelAlignment(f);I=J.textAlign,O=J.x}else if(i==="right"){const J=this._getYAxisLabelAlignment(f);I=J.textAlign,O=J.x}else if(n==="x"){if(i==="center")N=(t.top+t.bottom)/2+p;else if(Xt(i)){const J=Object.keys(i)[0],at=i[J];N=this.chart.scales[J].getPixelForValue(at)+p}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")O=(t.left+t.right)/2-p;else if(Xt(i)){const J=Object.keys(i)[0],at=i[J];O=this.chart.scales[J].getPixelForValue(at)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const dt=this._getLabelSizes();for(T=0,k=a.length;T<k;++T){D=a[T],R=D.label;const J=r.setContext(this.getContext(T));b=this.getPixelForTick(T)+r.labelOffset,w=this._resolveTickFontOptions(T),x=w.lineHeight,C=ge(R)?R.length:1;const at=C/2,ot=J.color,gt=J.textStrokeColor,Vt=J.textStrokeWidth;let W=I;o?(O=b,I==="inner"&&(T===k-1?W=this.options.reverse?"left":"right":T===0?W=this.options.reverse?"right":"left":W="center"),i==="top"?c==="near"||_!==0?A=-C*x+x/2:c==="center"?A=-dt.highest.height/2-at*x+x:A=-dt.highest.height+x/2:c==="near"||_!==0?A=x/2:c==="center"?A=dt.highest.height/2-at*x:A=dt.highest.height-C*x,d&&(A*=-1),_!==0&&!J.showLabelBackdrop&&(O+=x/2*Math.sin(_))):(N=b,A=(1-C)*x/2);let St;if(J.showLabelBackdrop){const et=rn(J.backdropPadding),kt=dt.heights[T],Mt=dt.widths[T];let qt=A-et.top,jt=0-et.left;switch(S){case"middle":qt-=kt/2;break;case"bottom":qt-=kt;break}switch(I){case"center":jt-=Mt/2;break;case"right":jt-=Mt;break;case"inner":T===k-1?jt-=Mt:T>0&&(jt-=Mt/2);break}St={left:jt,top:qt,width:Mt+et.width,height:kt+et.height,color:J.backdropColor}}y.push({label:R,font:w,textOffset:A,options:{rotation:_,color:ot,strokeColor:gt,strokeWidth:Vt,textAlign:W,textBaseline:S,translation:[O,N],backdrop:St}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Pi(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=hr(t,this.left,o)-o/2,u=hr(t,this.right,a)+a/2,d=f=l):(d=hr(t,this.top,o)-o/2,f=hr(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Wg(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Vr(s,c,0,u,l,a)}i&&Yg(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Me(s.font),o=rn(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Xt(n)?(l+=o.bottom,ge(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=r4(this,l,n,a);Vr(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:i4(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=zt(t.grid&&t.grid.z,-1),i=zt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qr.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Me(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class zc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;l4(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,o4(t,o,s),this.override&&we.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in we[i]&&(delete we[i][s],this.override&&delete Nr[s])}}function o4(e,t,n){const s=Ll(Object.create(null),[n?we.get(n):{},we.get(t),e.defaults]);we.set(t,s),e.defaultRoutes&&a4(t,e.defaultRoutes),e.descriptors&&we.describe(t,e.descriptors)}function a4(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");we.route(r,i,l,a)})}function l4(e){return"id"in e&&"defaults"in e}class c4{constructor(){this.controllers=new zc(ul,"datasets",!0),this.elements=new zc(Yr,"elements"),this.plugins=new zc(Object,"plugins"),this.scales=new zc(qr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):te(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=Fg(t);ce(s["before"+i],[],s),n[t](s),ce(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var ls=new c4;class u4{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(ce(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=zt(s.options&&s.options.plugins,{}),r=h4(s);return i===!1&&!n?[]:f4(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function h4(e){const t={},n=[],s=Object.keys(ls.plugins.items);for(let r=0;r<s.length;r++)n.push(ls.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function d4(e,t){return!t&&e===!1?null:e===!0?{}:e}function f4(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=d4(s[l],i);c!==null&&r.push({plugin:a,options:p4(e.config,{plugin:a,local:n[l]},c,o)})}return r}function p4(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function op(e,t){const n=we.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function g4(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function m4(e,t){return e===t?"_index_":"_value_"}function Tb(e){if(e==="x"||e==="y"||e==="r")return e}function v4(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ap(e,...t){if(Tb(e))return e;for(const n of t){const s=n.axis||v4(n.position)||e.length>1&&Tb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ib(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function _4(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Ib(e,"x",n[0])||Ib(e,"y",n[0])}return{}}function y4(e,t){const n=Nr[e.type]||{scales:{}},s=t.scales||{},i=op(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Xt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ap(o,a,_4(o,e),we.scales[a.type]),c=m4(l,i),u=n.scales||{};r[o]=ol(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||op(a,t),u=(Nr[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=g4(d,l),p=o[f+"AxisID"]||f;r[p]=r[p]||Object.create(null),ol(r[p],[{axis:f},s[p],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];ol(a,[we.scales[a.type],we.scale])}),r}function UI(e){const t=e.options||(e.options={});t.plugins=zt(t.plugins,{}),t.scales=y4(e,t)}function jI(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function b4(e){return e=e||{},e.data=jI(e.data),UI(e),e}const Sb=new Map,HI=new Set;function Wc(e,t){let n=Sb.get(e);return n||(n=t(),Sb.set(e,n),HI.add(n)),n}const Pa=(e,t,n)=>{const s=Zu(t,n);s!==void 0&&e.add(s)};class w4{constructor(t){this._config=b4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),UI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Wc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Wc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Wc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Wc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(d=>Pa(l,t,d))),u.forEach(d=>Pa(l,i,d)),u.forEach(d=>Pa(l,Nr[r]||{},d)),u.forEach(d=>Pa(l,we,d)),u.forEach(d=>Pa(l,ip,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),HI.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Nr[n]||{},we.datasets[n]||{},{type:n},we,ip]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ab(this._resolverCache,t,i);let l=o;if(T4(o,n)){r.$shared=!1,s=qi(s)?s():s;const c=this.createResolver(t,s,a);l=Uo(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=Ab(this._resolverCache,t,s);return Xt(n)?Uo(r,n,void 0,i):r}}function Ab(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:qg(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const E4=e=>Xt(e)&&Object.getOwnPropertyNames(e).some(t=>qi(e[t]));function T4(e,t){const{isScriptable:n,isIndexable:s}=AI(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(qi(a)||E4(a))||o&&ge(a))return!0}return!1}var I4="4.5.0";const S4=["top","bottom","left","right","chartArea"];function xb(e,t){return e==="top"||e==="bottom"||S4.indexOf(e)===-1&&t==="x"}function Cb(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Pb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ce(n&&n.onComplete,[e],t)}function A4(e){const t=e.chart,n=t.options.animation;ce(n&&n.onProgress,[e],t)}function zI(e){return Xg()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const mu={},kb=e=>{const t=zI(e);return Object.values(mu).filter(n=>n.canvas===t).pop()};function x4(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function C4(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var gi;let sd=(gi=class{static register(...t){ls.add(...t),Db()}static unregister(...t){ls.remove(...t),Db()}constructor(t,n){const s=this.config=new w4(n),i=zI(t),r=kb(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||YF(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=MV(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new u4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=JV(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],mu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ls.listen(this,"complete",Pb),Ls.listen(this,"progress",A4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return ee(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zy(this.canvas,this.ctx),this}stop(){return Ls.stop(this),this}resize(t,n){Ls.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ce(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};te(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=ap(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),te(r,o=>{const a=o.options,l=a.id,c=ap(l,a),u=zt(a.type,o.dtype);(a.position===void 0||xb(a.position,c)!==xb(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=ls.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),te(i,(o,a)=>{o||delete s[a]}),te(s,o=>{Vn.configure(this,o,o.options),Vn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Cb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||op(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=ls.getController(a),{datasetElementType:c,dataElementType:u}=we.datasets[a];Object.assign(l,{dataElementType:ls.getElement(u),datasetElementType:c&&ls.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){te(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||te(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Cb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){te(this.scales,t=>{Vn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!zy(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;x4(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!zy(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],te(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,qi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ls.has(this)?this.attached&&!Ls.running(this)&&Ls.start(this):(this.draw(),Pb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=rF(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Wg(n,i),t.controller.draw(),i&&Yg(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return zs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=SF.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Ji(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);th(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ls.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Zy(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete mu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};te(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){te(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},te(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Qu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=FV(t),c=C4(t,this._lastEvent,s,l);s&&(this._lastEvent=null,ce(r.onHover,[t,a,this],this),l&&ce(r.onClick,[t,a,this],this));const u=!Qu(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},Ct(gi,"defaults",we),Ct(gi,"instances",mu),Ct(gi,"overrides",Nr),Ct(gi,"registry",ls),Ct(gi,"version",I4),Ct(gi,"getChart",kb),gi);function Db(){return te(sd.instances,e=>e._plugins.invalidate())}function WI(e,t,n=t){e.lineCap=zt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(zt(n.borderDash,t.borderDash)),e.lineDashOffset=zt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=zt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=zt(n.borderWidth,t.borderWidth),e.strokeStyle=zt(n.borderColor,t.borderColor)}function P4(e,t,n){e.lineTo(n.x,n.y)}function k4(e){return e.stepped?d$:e.tension||e.cubicInterpolationMode==="monotone"?f$:P4}function YI(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function D4(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=YI(i,n,s),u=k4(r);let{move:d=!0,reverse:f}=s||{},p,m,_;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%o],!m.skip&&(d?(e.moveTo(m.x,m.y),d=!1):u(e,_,m,f,r.stepped),_=m);return l&&(m=i[(a+(f?c:0))%o],u(e,_,m,f,r.stepped)),!!l}function R4(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=YI(i,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,p,m,_,y,T;const k=R=>(o+(c?a-R:R))%r,D=()=>{_!==y&&(e.lineTo(u,y),e.lineTo(u,_),e.lineTo(u,T))};for(l&&(p=i[k(0)],e.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[k(f)],p.skip)continue;const R=p.x,O=p.y,N=R|0;N===m?(O<_?_=O:O>y&&(y=O),u=(d*u+R)/++d):(D(),e.lineTo(R,O),m=N,d=0,_=y=O),T=O}D()}function lp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?R4:D4}function M4(e){return e.stepped?Y$:e.tension||e.cubicInterpolationMode==="monotone"?q$:vr}function O4(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),WI(e,t.options),e.stroke(i)}function L4(e,t,n,s){const{segments:i,options:r}=t,o=lp(t);for(const a of i)WI(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const N4=typeof Path2D=="function";function V4(e,t,n,s){N4&&!t.options.segment?O4(e,t,n,s):L4(e,t,n,s)}class Ha extends Yr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;$$(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eF(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=J$(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=M4(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=r[d],m=r[f];if(p===m){a.push(p);continue}const _=Math.abs((i-p[n])/(m[n]-p[n])),y=l(p,m,_,s.stepped);y[n]=t[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(t,n,s){return lp(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=lp(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),V4(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ct(Ha,"id","line"),Ct(Ha,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ct(Ha,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ct(Ha,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Rb(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class vu extends Yr{constructor(n){super();Ct(this,"parsed");Ct(this,"skip");Ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return Rb(this,n,"x",s)}inYRange(n,s){return Rb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!zs(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,rp(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ct(vu,"id","point"),Ct(vu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ct(vu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Mb=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},$4=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Ob extends Yr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ce(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Me(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Mb(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,_)=>{const y=s+n/2+r.measureText(m.text).width;(_===0||c[c.length-1]+y+2*a>o)&&(d+=u,c[c.length-(_>0?0:1)]=0,p+=u,f++),l[_]={left:0,top:p,row:f,width:y,height:i},c[c.length-1]+=y+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let d=a,f=0,p=0,m=0,_=0;return this.legendItems.forEach((y,T)=>{const{itemWidth:k,itemHeight:D}=F4(s,n,r,y,i);T>0&&p+D+2*a>u&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,_++,f=p=0),l[T]={left:m,top:p,col:_,width:k,height:D},f=Math.max(f,k),p+=D+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Po(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Xe(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Xe(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Xe(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Xe(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Wg(t,this),this._draw(),Yg(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=we.color,l=Po(t.rtl,this.left,this.width),c=Me(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:_,itemHeight:y}=Mb(o,d),T=function(N,I,b){if(isNaN(m)||m<=0||isNaN(_)||_<0)return;i.save();const w=zt(b.lineWidth,1);if(i.fillStyle=zt(b.fillStyle,a),i.lineCap=zt(b.lineCap,"butt"),i.lineDashOffset=zt(b.lineDashOffset,0),i.lineJoin=zt(b.lineJoin,"miter"),i.lineWidth=w,i.strokeStyle=zt(b.strokeStyle,a),i.setLineDash(zt(b.lineDash,[])),o.usePointStyle){const x={radius:_*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:w},C=l.xPlus(N,m/2),A=I+f;II(i,x,C,A,o.pointStyleWidth&&m)}else{const x=I+Math.max((d-_)/2,0),C=l.leftForLtr(N,m),A=Co(b.borderRadius);i.beginPath(),Object.values(A).some(S=>S!==0)?sh(i,{x:C,y:x,w:m,h:_,radius:A}):i.rect(C,x,m,_),i.fill(),w!==0&&i.stroke()}i.restore()},k=function(N,I,b){Vr(i,b.text,N,I+y/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},D=this.isHorizontal(),R=this._computeTitleHeight();D?p={x:Xe(r,this.left+u,this.right-s[0]),y:this.top+u+R,line:0}:p={x:this.left+u,y:Xe(r,this.top+R+u,this.bottom-n[0].height),line:0},DI(this.ctx,t.textDirection);const O=y+u;this.legendItems.forEach((N,I)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const b=i.measureText(N.text).width,w=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),x=m+f+b;let C=p.x,A=p.y;l.setWidth(this.width),D?I>0&&C+x+u>this.right&&(A=p.y+=O,p.line++,C=p.x=Xe(r,this.left+u,this.right-s[p.line])):I>0&&A+O>this.bottom&&(C=p.x=C+n[p.line].width+u,p.line++,A=p.y=Xe(r,this.top+R+u,this.bottom-n[p.line].height));const S=l.x(C);if(T(S,A,N),C=ZV(w,C+m+f,D?C+x:this.right,t.rtl),k(l.x(C),A,N),D)p.x+=x+u;else if(typeof N.text!="string"){const dt=c.lineHeight;p.y+=qI(N,dt)+u}else p.y+=O}),RI(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Me(n.font),i=rn(n.padding);if(!n.display)return;const r=Po(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Xe(t.align,d,this.right-f);else{const m=this.columnSizes.reduce((_,y)=>Math.max(_,y.height),0);u=c+Xe(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=Xe(a,d,d+f);o.textAlign=r.textAlign(jg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Vr(o,n.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,n=Me(t.font),s=rn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Ua(t,this.left,this.right)&&Ua(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Ua(t,i.left,i.left+i.width)&&Ua(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!j4(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=$4(i,s);i&&!r&&ce(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&ce(n.onHover,[t,s,this],this)}else s&&ce(n.onClick,[t,s,this],this)}}function F4(e,t,n,s,i){const r=B4(s,e,t,n),o=U4(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function B4(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function U4(e,t,n){let s=e;return typeof t.text!="string"&&(s=qI(t,n)),s}function qI(e,t){const n=e.text?e.text.length:0;return t*n}function j4(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var H4={id:"legend",_element:Ob,start(e,t,n){const s=e.legend=new Ob({ctx:e.ctx,options:n,chart:e});Vn.configure(e,s,n),Vn.addBox(e,s)},stop(e){Vn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Vn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=rn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class KI extends Yr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=ge(s.text)?s.text.length:1;this._padding=rn(s.padding);const r=i*Me(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Xe(a,s,r),d=n+t,c=r-s):(o.position==="left"?(u=s+t,d=Xe(a,i,n),l=Ce*-.5):(u=r-t,d=Xe(a,n,i),l=Ce*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Me(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Vr(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:jg(n.align),textBaseline:"middle",translation:[o,a]})}}function z4(e,t){const n=new KI({ctx:e.ctx,options:t,chart:e});Vn.configure(e,n,t),Vn.addBox(e,n),e.titleBlock=n}var W4={id:"title",_element:KI,start(e,t,n){z4(e,n)},stop(e){const t=e.titleBlock;Vn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Vn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const za={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=sp(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function os(e,t){return t&&(ge(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ns(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Y4(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function Lb(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Me(t.bodyFont),c=Me(t.titleFont),u=Me(t.footerFont),d=r.length,f=i.length,p=s.length,m=rn(t.padding);let _=m.height,y=0,T=s.reduce((R,O)=>R+O.before.length+O.lines.length+O.after.length,0);if(T+=e.beforeBody.length+e.afterBody.length,d&&(_+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),T){const R=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=p*R+(T-p)*l.lineHeight+(T-1)*t.bodySpacing}f&&(_+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let k=0;const D=function(R){y=Math.max(y,n.measureText(R).width+k)};return n.save(),n.font=c.string,te(e.title,D),n.font=l.string,te(e.beforeBody.concat(e.afterBody),D),k=t.displayColors?o+2+t.boxPadding:0,te(s,R=>{te(R.before,D),te(R.lines,D),te(R.after,D)}),k=0,n.font=u.string,te(e.footer,D),n.restore(),y+=m.width,{width:y,height:_}}function q4(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function K4(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function G4(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),K4(c,e,t,n)&&(c="center"),c}function Nb(e,t,n){const s=n.yAlign||t.yAlign||q4(e,n);return{xAlign:n.xAlign||t.xAlign||G4(e,t,n,s),yAlign:s}}function X4(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Q4(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function Vb(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Co(o);let m=X4(t,a);const _=Q4(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+i:a==="right"&&(m+=Math.max(d,p)+i),{x:Nn(m,0,s.width-t.width),y:Nn(_,0,s.height-t.height)}}function Yc(e,t,n){const s=rn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function $b(e){return os([],Ns(e))}function J4(e,t,n){return Ji(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Fb(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const GI={beforeTitle:Os,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Os,beforeBody:Os,beforeLabel:Os,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ee(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Os,afterBody:Os,beforeFooter:Os,footer:Os,afterFooter:Os};function mn(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?GI[t].call(n,s):i}class cp extends Yr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new OI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=J4(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=mn(s,"beforeTitle",this,t),r=mn(s,"title",this,t),o=mn(s,"afterTitle",this,t);let a=[];return a=os(a,Ns(i)),a=os(a,Ns(r)),a=os(a,Ns(o)),a}getBeforeBody(t,n){return $b(mn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return te(t,r=>{const o={before:[],lines:[],after:[]},a=Fb(s,r);os(o.before,Ns(mn(a,"beforeLabel",this,r))),os(o.lines,mn(a,"label",this,r)),os(o.after,Ns(mn(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return $b(mn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=mn(s,"beforeFooter",this,t),r=mn(s,"footer",this,t),o=mn(s,"afterFooter",this,t);let a=[];return a=os(a,Ns(i)),a=os(a,Ns(r)),a=os(a,Ns(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Y4(this.chart,n[l]));return t.filter&&(a=a.filter((u,d,f)=>t.filter(u,d,f,s))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,s))),te(a,u=>{const d=Fb(t.callbacks,u);i.push(mn(d,"labelColor",this,u)),r.push(mn(d,"labelPointStyle",this,u)),o.push(mn(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=za[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Lb(this,s),c=Object.assign({},a,l),u=Nb(this.chart,s,c),d=Vb(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Co(a),{x:f,y:p}=t,{width:m,height:_}=n;let y,T,k,D,R,O;return r==="center"?(R=p+_/2,i==="left"?(y=f,T=y-o,D=R+o,O=R-o):(y=f+m,T=y+o,D=R-o,O=R+o),k=y):(i==="left"?T=f+Math.max(l,u)+o:i==="right"?T=f+m-Math.max(c,d)-o:T=this.caretX,r==="top"?(D=p,R=D-o,y=T-o,k=T+o):(D=p+_,R=D+o,y=T+o,k=T-o),O=D),{x1:y,x2:T,x3:k,y1:D,y2:R,y3:O}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=Po(s.rtl,this.x,this.width);for(t.x=Yc(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Me(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Me(r.bodyFont),d=Yc(this,"left",r),f=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(r.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=i.leftForLtr(f,c)+c/2,T=m+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,rp(t,_,y,T),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,rp(t,_,y,T)}else{t.lineWidth=Xt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(f,c),y=i.leftForLtr(i.xPlus(f,1),c-2),T=Co(o.borderRadius);Object.values(T).some(k=>k!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,sh(t,{x:_,y:m,w:c,h:l,radius:T}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),sh(t,{x:y,y:m+1,w:c-2,h:l-2,radius:T}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(_,m,c,l),t.strokeRect(_,m,c,l),t.fillStyle=o.backgroundColor,t.fillRect(y,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=Me(s.bodyFont);let f=d.lineHeight,p=0;const m=Po(s.rtl,this.x,this.width),_=function(b){n.fillText(b,m.x(t.x+p),t.y+f/2),t.y+=f+r},y=m.textAlign(o);let T,k,D,R,O,N,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=Yc(this,y,s),n.fillStyle=s.bodyColor,te(this.beforeBody,_),p=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,R=0,N=i.length;R<N;++R){for(T=i[R],k=this.labelTextColors[R],n.fillStyle=k,te(T.before,_),D=T.lines,a&&D.length&&(this._drawColorBox(n,t,R,m,s),f=Math.max(d.lineHeight,l)),O=0,I=D.length;O<I;++O)_(D[O]),f=d.lineHeight;te(T.after,_)}p=0,f=d.lineHeight,te(this.afterBody,_),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Po(s.rtl,this.x,this.width);for(t.x=Yc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Me(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=Co(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=za[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Lb(this,t),l=Object.assign({},o,this._size),c=Nb(n,t,l),u=Vb(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=rn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),DI(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),RI(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Qu(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!Qu(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=za[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}Ct(cp,"positioners",za);var Z4={id:"tooltip",_element:cp,positioners:za,afterInit(e,t,n){n&&(e.tooltip=new cp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:GI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const t3=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function e3(e,t,n,s){const i=e.indexOf(t);if(i===-1)return t3(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const n3=(e,t)=>e===null?null:Nn(Math.round(e),0,t);function Bb(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class up extends qr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ee(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:e3(s,t,zt(n,t),this._addedLabels),n3(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return Bb.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Ct(up,"id","category"),Ct(up,"defaults",{ticks:{callback:Bb}});function s3(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=e,p=r||1,m=u-1,{min:_,max:y}=t,T=!ee(o),k=!ee(a),D=!ee(c),R=(y-_)/(d+1);let O=Yy((y-_)/m/p)*p,N,I,b,w;if(O<1e-14&&!T&&!k)return[{value:_},{value:y}];w=Math.ceil(y/O)-Math.floor(_/O),w>m&&(O=Yy(w*O/m/p)*p),ee(l)||(N=Math.pow(10,l),O=Math.ceil(O*N)/N),i==="ticks"?(I=Math.floor(_/O)*O,b=Math.ceil(y/O)*O):(I=_,b=y),T&&k&&r&&zV((a-o)/r,O/1e3)?(w=Math.round(Math.min((a-o)/O,u)),O=(a-o)/w,I=o,b=a):D?(I=T?o:I,b=k?a:b,w=c-1,O=(b-I)/w):(w=(b-I)/O,al(w,Math.round(w),O/1e3)?w=Math.round(w):w=Math.ceil(w));const x=Math.max(qy(O),qy(I));N=Math.pow(10,ee(l)?x:l),I=Math.round(I*N)/N,b=Math.round(b*N)/N;let C=0;for(T&&(f&&I!==o?(n.push({value:o}),I<o&&C++,al(Math.round((I+C*O)*N)/N,o,Ub(o,R,e))&&C++):I<o&&C++);C<w;++C){const A=Math.round((I+C*O)*N)/N;if(k&&A>a)break;n.push({value:A})}return k&&f&&b!==a?n.length&&al(n[n.length-1].value,a,Ub(a,R,e))?n[n.length-1].value=a:n.push({value:a}):(!k||b===a)&&n.push({value:b}),n}function Ub(e,t,{horizontal:n,minRotation:s}){const i=Pi(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class oh extends qr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ee(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(t){const l=Bo(i),c=Bo(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=s3(i,r);return t.bounds==="ticks"&&_I(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return zg(t,this.chart.options.locale,this.options.ticks.format)}}class hp extends oh{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=$e(t)?t:0,this.max=$e(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Pi(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Ct(hp,"id","linear"),Ct(hp,"defaults",{ticks:{callback:ed.formatters.numeric}});const $l=e=>Math.floor(Ci(e)),fr=(e,t)=>Math.pow(10,$l(e)+t);function jb(e){return e/Math.pow(10,$l(e))===1}function Hb(e,t,n){const s=Math.pow(10,n),i=Math.floor(e/s);return Math.ceil(t/s)-i}function i3(e,t){const n=t-e;let s=$l(n);for(;Hb(e,t,s)>10;)s++;for(;Hb(e,t,s)<10;)s--;return Math.min(s,$l(e))}function r3(e,{min:t,max:n}){t=Sn(e.min,t);const s=[],i=$l(t);let r=i3(t,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=Sn(e.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<n;)s.push({value:f,major:jb(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const p=Sn(e.max,f);return s.push({value:p,major:jb(p),significand:d}),s}class zb extends qr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=oh.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return $e(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=$e(t)?Math.max(0,t):null,this.max=$e(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$e(this._userMin)&&(this.min=t===fr(this.min,0)?fr(this.min,-1):fr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(fr(s,-1)),o(fr(i,1)))),s<=0&&r(fr(i,-1)),i<=0&&o(fr(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=r3(n,this);return t.bounds==="ticks"&&_I(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":zg(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ci(t),this._valueRange=Ci(this.max)-Ci(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ci(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}Ct(zb,"id","logarithmic"),Ct(zb,"defaults",{ticks:{callback:ed.formatters.logarithmic,major:{enabled:!0}}});function dp(e){const t=e.ticks;if(t.display&&e.display){const n=rn(t.backdropPadding);return zt(t.font&&t.font.size,we.font.size)+n.height}return 0}function o3(e,t,n){return n=ge(n)?n:[n],{w:h$(e,t.string,n),h:n.length*t.lineHeight}}function Wb(e,t,n,s,i){return e===s||e===i?{start:t-n/2,end:t+n/2}:e<s||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function a3(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],i=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Ce/r:0;for(let l=0;l<r;l++){const c=o.setContext(e.getPointLabelContext(l));i[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],a),d=Me(c.font),f=o3(e.ctx,d,e._pointLabels[l]);s[l]=f;const p=Kn(e.getIndexAngle(l)+a),m=Math.round(Bg(p)),_=Wb(m,u.x,f.w,0,180),y=Wb(m,u.y,f.h,90,270);l3(n,t,p,_,y)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=h3(e,s,i)}function l3(e,t,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function c3(e,t,n){const s=e.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,l=e.getPointPosition(t,s+i+o,r),c=Math.round(Bg(Kn(l.angle+xn))),u=p3(l.y,a.h,c),d=d3(c),f=f3(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function u3(e,t){if(!t)return!0;const{left:n,top:s,right:i,bottom:r}=e;return!(zs({x:n,y:s},t)||zs({x:n,y:r},t)||zs({x:i,y:s},t)||zs({x:i,y:r},t))}function h3(e,t,n){const s=[],i=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:dp(r)/2,additionalAngle:o?Ce/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const d=c3(e,u,l);s.push(d),a==="auto"&&(d.visible=u3(d,c),d.visible&&(c=d))}return s}function d3(e){return e===0||e===180?"center":e<180?"left":"right"}function f3(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function p3(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function g3(e,t,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=t;if(!ee(a)){const l=Co(t.borderRadius),c=rn(t.backdropPadding);e.fillStyle=a;const u=s-c.left,d=i-c.top,f=r-s+c.width,p=o-i+c.height;Object.values(l).some(m=>m!==0)?(e.beginPath(),sh(e,{x:u,y:d,w:f,h:p,radius:l}),e.fill()):e.fillRect(u,d,f,p)}}function m3(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let i=t-1;i>=0;i--){const r=e._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(e.getPointLabelContext(i));g3(n,o,r);const a=Me(o.font),{x:l,y:c,textAlign:u}=r;Vr(n,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function XI(e,t,n,s){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Fn);else{let r=e.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function v3(e,t,n,s,i){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),XI(e,n,o,s),r.closePath(),r.stroke(),r.restore())}function _3(e,t,n){return Ji(e,{label:n,index:t,type:"pointLabel"})}class qc extends oh{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=rn(dp(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=$e(t)&&!isNaN(t)?t:0,this.max=$e(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dp(this.options))}generateTickLabels(t){oh.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const i=ce(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?a3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,i))}getIndexAngle(t){const n=Fn/(this._pointLabels.length||1),s=this.options.startAngle||0;return Kn(t*n+Pi(s))}getDistanceFromCenterForValue(t){if(ee(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(ee(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return _3(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const i=this.getIndexAngle(t)-xn+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),XI(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&m3(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),p=i.setContext(f),m=r.setContext(f);v3(this,p,l,o,m)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(t.lineWidth=f,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=s.setContext(this.getContext(l)),u=Me(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=rn(c.backdropPadding);t.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}Vr(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}Ct(qc,"id","radialLinear"),Ct(qc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ed.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Ct(qc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ct(qc,"descriptors",{angleLines:{_fallback:"grid"}});const id={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(id);function Yb(e,t){return e-t}function qb(e,t){if(ee(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),$e(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Nl(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Kb(e,t,n,s){const i=yn.length;for(let r=yn.indexOf(e);r<i-1;++r){const o=id[yn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return yn[r]}return yn[i-1]}function y3(e,t,n,s,i){for(let r=yn.length-1;r>=yn.indexOf(n);r--){const o=yn[r];if(id[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return yn[n?yn.indexOf(n):0]}function b3(e){for(let t=yn.indexOf(e)+1,n=yn.length;t<n;++t)if(id[yn[t]].common)return yn[t]}function Gb(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=Ug(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function w3(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Xb(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:w3(e,s,i,n)}class ah extends qr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new bF._date(t.adapters.date);i.init(n),ol(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:qb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=$e(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=$e(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=GV(i,r,o);return this._unit=n.unit||(s.autoSkip?Kb(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):y3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:b3(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Xb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Nn(n,0,o),s=Nn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Kb(r.minUnit,n,s,this._getLabelCapacity(n)),a=zt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Nl(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+t.add(f,a,o),p++)Gb(u,f,m);return(f===s||i.bounds==="ticks"||p===1)&&Gb(u,f,m),Object.keys(u).sort(Yb).map(_=>+_)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return ce(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(t,i||(p?d:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Pi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Xb(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(qb(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return QV(t.sort(Yb))}}Ct(ah,"id","time"),Ct(ah,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Kc(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=wr(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=wr(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Qb extends ah{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Kc(n,this.min),this._tableRange=Kc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Kc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Kc(this._table,s*this._tableRange+this._minPos,!0)}}Ct(Qb,"id","timeseries"),Ct(Qb,"defaults",ah.defaults);const QI={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},E3={ariaLabel:{type:String},ariaDescribedby:{type:String}},T3={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...QI,...E3},I3=C1[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function oo(e){return Hl(e)?Ht(e):e}function S3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Hl(t)?new Proxy(e,{}):e}function A3(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function JI(e,t){e.labels=t}function ZI(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function x3(e,t){const n={labels:[],datasets:[]};return JI(n,e.labels),ZI(n,e.datasets,t),n}const C3=on({props:T3,setup(e,t){let{expose:n,slots:s}=t;const i=Nt(null),r=Lp(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:d,plugins:f,datasetIdKey:p}=e,m=x3(u,p),_=S3(m,u);r.value=new sd(i.value,{type:c,data:_,options:{...d},plugins:f})},a=()=>{const c=Ht(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return Ss(o),Go(a),dn([()=>e.options,()=>e.data],(c,u)=>{let[d,f]=c,[p,m]=u;const _=Ht(r.value);if(!_)return;let y=!1;if(d){const T=oo(d),k=oo(p);T&&T!==k&&(A3(_,T),y=!0)}if(f){const T=oo(f.labels),k=oo(m.labels),D=oo(f.datasets),R=oo(m.datasets);T!==k&&(JI(_.config.data,T),y=!0),D&&D!==R&&(ZI(_.config.data,D,e.datasetIdKey),y=!0)}y&&Cr(()=>{l(_)})},{deep:!0}),()=>Do("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[Do("p",{},[s.default?s.default():""])])}});function P3(e,t){return sd.register(t),on({props:QI,setup(n,s){let{expose:i}=s;const r=Lp(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>Do(C3,I3({ref:o},{type:e,...n}))}})}const k3=P3("line",pu);const D3={class:"statistics-container"},R3={class:"toggle-segment"},M3={class:"stats-chart"},O3={__name:"Statistics",setup(e){sd.register(Ha,vu,hp,W4,up,Z4,H4);const t=Nt("week"),n=["Пн","Вт","Ср","Чт","Пт","Сб","Нд"],s=["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"];function i(){const u={};for(let d=0;d<localStorage.length;d++){const f=localStorage.key(d);if(f&&f.startsWith("groups_")){const p=f.replace("groups_",""),[m,_,y]=p.split("-").map(Number),k=JSON.parse(localStorage.getItem(f)||"[]").reduce((D,R)=>D+R.count,0);u[p]={year:m,month:_,day:y,count:k}}}return u}const r=Nt({}),o=Nt(null);Ss(()=>{r.value=i(),Cr(()=>{o.value&&o.value.chart&&o.value.chart.update()})});const a=K(()=>{const u=new Date;if(t.value==="week"){const d=[],f=[];for(let p=6;p>=0;p--){const m=new Date(u);m.setDate(u.getDate()-p);const _=n[m.getDay()===0?6:m.getDay()-1];d.push(_);const y=`${m.getFullYear()}-${m.getMonth()+1}-${m.getDate()}`,T=r.value[y];f.push(T?T.count:0)}return{labels:d,datasets:[{label:"Чіхи",data:f,fill:!0,borderColor:"#fff",backgroundColor:p=>{const m=p.chart,{ctx:_,chartArea:y}=m;if(!y)return getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61";const T=_.createLinearGradient(0,y.top,0,y.bottom),k=getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",D=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#2F5249";return T.addColorStop(0,k),T.addColorStop(1,D),T},tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",pointHoverRadius:7}]}}else{const d=u.getFullYear(),f=Array(12).fill(0);return Object.values(r.value).forEach(p=>{p.year===d&&(f[p.month-1]+=p.count)}),{labels:s,datasets:[{label:"Clicks",data:f,fill:!0,borderColor:"#fff",backgroundColor:p=>{const m=p.chart,{ctx:_,chartArea:y}=m;if(!y)return getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61";const T=_.createLinearGradient(0,y.top,0,y.bottom),k=getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",D=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#2F5249";return T.addColorStop(0,k),T.addColorStop(1,D),T},tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:"#42b883",pointHoverRadius:7}]}}}),l={responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",font:{size:14}}},y:{grid:{color:"rgba(255,255,255,0.15)"},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",font:{size:14}}}}},c=k3;return(u,d)=>(ut(),vt("div",D3,[Q("button",{class:"back-btn",onClick:d[0]||(d[0]=f=>u.$router.push("/")),"aria-label":"Back"},d[3]||(d[3]=[Q("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[Q("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),Q("div",R3,[Q("button",{class:oe(["toggle-btn",{active:t.value==="week"}]),onClick:d[1]||(d[1]=f=>t.value="week")}," Тиждень ",2),Q("button",{class:oe(["toggle-btn",{active:t.value==="month"}]),onClick:d[2]||(d[2]=f=>t.value="month")}," Місяць ",2)]),Q("div",M3,[Pt(ft(c),{ref_key:"chartRef",ref:o,data:a.value,options:l},null,8,["data"])])]))}},L3=Gi(O3,[["__scopeId","data-v-bec45ecd"]]);const N3={key:0,class:"auth-error"},V3={__name:"Auth",setup(e){const t=Nt(localStorage.getItem("color-primary"));Nt(localStorage.getItem("color-accent"));function n(p){let m=p.replace("#","");m.length===3&&(m=m.split("").map(y=>y+y).join(""));const _=parseInt(m,16);return[_>>16,_>>8&255,_&255]}function s([p,m,_]){return"#"+[p,m,_].map(y=>y.toString(16).padStart(2,"0")).join("")}function i(p,m){const[_,y,T]=n(p),k=m<0?0:255,D=Math.abs(m);return s([Math.round((k-_)*D+_),Math.round((k-y)*D+y),Math.round((k-T)*D+T)])}const r=K(()=>{const p=t.value,m=i(p,.5),_=i(p,-.3);return`linear-gradient(135deg, ${m} 0%, ${p} 50%, ${_} 100%)`}),o=Nt(""),a=Nt(""),l=Nt(""),c=Yp(),u=async()=>{l.value="";try{await dM(Lr,o.value,a.value),c.push("/")}catch(p){l.value=p.message}},d=async()=>{l.value="";try{await hM(Lr,o.value,a.value),c.push("/")}catch(p){l.value=p.message}},f=()=>{u()};return(p,m)=>(ut(),vt("div",{class:"auth-container",style:en({background:r.value})},[m[2]||(m[2]=Q("h2",null,"Привіт",-1)),Q("form",{onSubmit:zp(f,["prevent"])},[Cu(Q("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>o.value=_),type:"email",placeholder:"Email",required:""},null,512),[[qv,o.value]]),Cu(Q("input",{"onUpdate:modelValue":m[1]||(m[1]=_=>a.value=_),type:"password",placeholder:"Password",required:""},null,512),[[qv,a.value]]),Q("div",{class:"auth-actions"},[Q("button",{type:"button",onClick:u},"Вхід"),Q("button",{type:"button",onClick:d},"Реєстрація")]),l.value?(ut(),vt("div",N3,pn(l.value),1)):nn("",!0)],32)],4))}},$3=Gi(V3,[["__scopeId","data-v-98730007"]]);const F3={class:"palette-section"},B3={class:"palette-scroll-mask"},U3={class:"palette-options"},j3=["onClick"],H3={class:"palette-section"},z3={class:"palette-scroll-mask"},W3={class:"palette-options"},Y3=["onClick"],q3={__name:"Settings",setup(e){const t=["#E3F0FF","#4cae4f","#282828","#FFD6C0","#F8F9FA","#E6E6FA"],n=["#FFB74D","#121212","#FF654F","#71ADBA","#388E3C","#FFFFF0"],s=Nt(t[0]),i=Nt(n[0]);function r(f){s.value=f,a()}function o(f){i.value=f,a()}function a(){document.documentElement.style.setProperty("--primary",s.value),document.documentElement.style.setProperty("--accent",i.value),localStorage.setItem("color-primary",s.value),localStorage.setItem("color-accent",i.value)}Ss(()=>{const f=localStorage.getItem("color-primary"),p=localStorage.getItem("color-accent");f&&t.includes(f)&&(s.value=f),p&&n.includes(p)&&(i.value=p),a()});function l(f){let p=f.replace("#","");p.length===3&&(p=p.split("").map(_=>_+_).join(""));const m=parseInt(p,16);return[m>>16,m>>8&255,m&255]}function c([f,p,m]){return"#"+[f,p,m].map(_=>_.toString(16).padStart(2,"0")).join("")}function u(f,p){const[m,_,y]=l(f),T=p<0?0:255,k=Math.abs(p);return c([Math.round((T-m)*k+m),Math.round((T-_)*k+_),Math.round((T-y)*k+y)])}const d=K(()=>{const f=s.value,p=u(f,.5),m=u(f,-.3);return`linear-gradient(135deg, ${p} 0%, ${f} 50%, ${m} 100%)`});return(f,p)=>(ut(),vt("div",{class:"settings-container",style:en({background:d.value})},[Q("button",{class:"back-btn",onClick:p[0]||(p[0]=m=>f.$router.push("/")),"aria-label":"Back"},p[1]||(p[1]=[Q("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[Q("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),Q("div",F3,[p[2]||(p[2]=Q("div",{class:"palette-label"},"Основний колір:",-1)),Q("div",B3,[Q("div",U3,[(ut(),vt(re,null,Cn(t,m=>Q("button",{key:m,style:en({background:m}),class:oe({selected:m===s.value}),onClick:_=>r(m)},null,14,j3)),64))])])]),Q("div",H3,[p[3]||(p[3]=Q("div",{class:"palette-label"},"Акцент:",-1)),Q("div",z3,[Q("div",W3,[(ut(),vt(re,null,Cn(n,m=>Q("button",{key:m,style:en({background:m}),class:oe({selected:m===i.value}),onClick:_=>o(m)},null,14,Y3)),64))])])])],4))}},K3=Gi(q3,[["__scopeId","data-v-e9e4fcec"]]);var wn="top",zn="bottom",Wn="right",En="left",Zg="auto",oc=[wn,zn,Wn,En],Ho="start",Fl="end",G3="clippingParents",tS="viewport",ka="popper",X3="reference",Jb=oc.reduce(function(e,t){return e.concat([t+"-"+Ho,t+"-"+Fl])},[]),eS=[].concat(oc,[Zg]).reduce(function(e,t){return e.concat([t,t+"-"+Ho,t+"-"+Fl])},[]),Q3="beforeRead",J3="read",Z3="afterRead",t5="beforeMain",e5="main",n5="afterMain",s5="beforeWrite",i5="write",r5="afterWrite",o5=[Q3,J3,Z3,t5,e5,n5,s5,i5,r5];function Ts(e){return e?(e.nodeName||"").toLowerCase():null}function Pn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function $r(e){var t=Pn(e).Element;return e instanceof t||e instanceof Element}function Bn(e){var t=Pn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function tm(e){if(typeof ShadowRoot>"u")return!1;var t=Pn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function a5(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},i=t.attributes[n]||{},r=t.elements[n];!Bn(r)||!Ts(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function l5(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var i=t.elements[s],r=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!Bn(i)||!Ts(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}const c5={name:"applyStyles",enabled:!0,phase:"write",fn:a5,effect:l5,requires:["computeStyles"]};function ys(e){return e.split("-")[0]}var xr=Math.max,lh=Math.min,zo=Math.round;function fp(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function nS(){return!/^((?!chrome|android).)*safari/i.test(fp())}function Wo(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),i=1,r=1;t&&Bn(e)&&(i=e.offsetWidth>0&&zo(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&zo(s.height)/e.offsetHeight||1);var o=$r(e)?Pn(e):window,a=o.visualViewport,l=!nS()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/i,u=(s.top+(l&&a?a.offsetTop:0))/r,d=s.width/i,f=s.height/r;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function em(e){var t=Wo(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function sS(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&tm(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ti(e){return Pn(e).getComputedStyle(e)}function u5(e){return["table","td","th"].indexOf(Ts(e))>=0}function Zi(e){return(($r(e)?e.ownerDocument:e.document)||window.document).documentElement}function rd(e){return Ts(e)==="html"?e:e.assignedSlot||e.parentNode||(tm(e)?e.host:null)||Zi(e)}function Zb(e){return!Bn(e)||ti(e).position==="fixed"?null:e.offsetParent}function h5(e){var t=/firefox/i.test(fp()),n=/Trident/i.test(fp());if(n&&Bn(e)){var s=ti(e);if(s.position==="fixed")return null}var i=rd(e);for(tm(i)&&(i=i.host);Bn(i)&&["html","body"].indexOf(Ts(i))<0;){var r=ti(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function ac(e){for(var t=Pn(e),n=Zb(e);n&&u5(n)&&ti(n).position==="static";)n=Zb(n);return n&&(Ts(n)==="html"||Ts(n)==="body"&&ti(n).position==="static")?t:n||h5(e)||t}function nm(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function hl(e,t,n){return xr(e,lh(t,n))}function d5(e,t,n){var s=hl(e,t,n);return s>n?n:s}function iS(){return{top:0,right:0,bottom:0,left:0}}function rS(e){return Object.assign({},iS(),e)}function oS(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var f5=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,rS(typeof t!="number"?t:oS(t,oc))};function p5(e){var t,n=e.state,s=e.name,i=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ys(n.placement),l=nm(a),c=[En,Wn].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var d=f5(i.padding,n),f=em(r),p=l==="y"?wn:En,m=l==="y"?zn:Wn,_=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],T=ac(r),k=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,D=_/2-y/2,R=d[p],O=k-f[u]-d[m],N=k/2-f[u]/2+D,I=hl(R,N,O),b=l;n.modifiersData[s]=(t={},t[b]=I,t.centerOffset=I-N,t)}}function g5(e){var t=e.state,n=e.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||sS(t.elements.popper,i)&&(t.elements.arrow=i))}const m5={name:"arrow",enabled:!0,phase:"main",fn:p5,effect:g5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yo(e){return e.split("-")[1]}var v5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _5(e,t){var n=e.x,s=e.y,i=t.devicePixelRatio||1;return{x:zo(n*i)/i||0,y:zo(s*i)/i||0}}function t0(e){var t,n=e.popper,s=e.popperRect,i=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,f=o.x,p=f===void 0?0:f,m=o.y,_=m===void 0?0:m,y=typeof u=="function"?u({x:p,y:_}):{x:p,y:_};p=y.x,_=y.y;var T=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),D=En,R=wn,O=window;if(c){var N=ac(n),I="clientHeight",b="clientWidth";if(N===Pn(n)&&(N=Zi(n),ti(N).position!=="static"&&a==="absolute"&&(I="scrollHeight",b="scrollWidth")),N=N,i===wn||(i===En||i===Wn)&&r===Fl){R=zn;var w=d&&N===O&&O.visualViewport?O.visualViewport.height:N[I];_-=w-s.height,_*=l?1:-1}if(i===En||(i===wn||i===zn)&&r===Fl){D=Wn;var x=d&&N===O&&O.visualViewport?O.visualViewport.width:N[b];p-=x-s.width,p*=l?1:-1}}var C=Object.assign({position:a},c&&v5),A=u===!0?_5({x:p,y:_},Pn(n)):{x:p,y:_};if(p=A.x,_=A.y,l){var S;return Object.assign({},C,(S={},S[R]=k?"0":"",S[D]=T?"0":"",S.transform=(O.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",S))}return Object.assign({},C,(t={},t[R]=k?_+"px":"",t[D]=T?p+"px":"",t.transform="",t))}function y5(e){var t=e.state,n=e.options,s=n.gpuAcceleration,i=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ys(t.placement),variation:Yo(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,t0(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,t0(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const b5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:y5,data:{}};var Gc={passive:!0};function w5(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,l=Pn(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,Gc)}),a&&l.addEventListener("resize",n.update,Gc),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Gc)}),a&&l.removeEventListener("resize",n.update,Gc)}}const E5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:w5,data:{}};var T5={left:"right",right:"left",bottom:"top",top:"bottom"};function _u(e){return e.replace(/left|right|bottom|top/g,function(t){return T5[t]})}var I5={start:"end",end:"start"};function e0(e){return e.replace(/start|end/g,function(t){return I5[t]})}function sm(e){var t=Pn(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function im(e){return Wo(Zi(e)).left+sm(e).scrollLeft}function S5(e,t){var n=Pn(e),s=Zi(e),i=n.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var c=nS();(c||!c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+im(e),y:l}}function A5(e){var t,n=Zi(e),s=sm(e),i=(t=e.ownerDocument)==null?void 0:t.body,r=xr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=xr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+im(e),l=-s.scrollTop;return ti(i||n).direction==="rtl"&&(a+=xr(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function rm(e){var t=ti(e),n=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function aS(e){return["html","body","#document"].indexOf(Ts(e))>=0?e.ownerDocument.body:Bn(e)&&rm(e)?e:aS(rd(e))}function dl(e,t){var n;t===void 0&&(t=[]);var s=aS(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),r=Pn(s),o=i?[r].concat(r.visualViewport||[],rm(s)?s:[]):s,a=t.concat(o);return i?a:a.concat(dl(rd(o)))}function pp(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function x5(e,t){var n=Wo(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function n0(e,t,n){return t===tS?pp(S5(e,n)):$r(t)?x5(t,n):pp(A5(Zi(e)))}function C5(e){var t=dl(rd(e)),n=["absolute","fixed"].indexOf(ti(e).position)>=0,s=n&&Bn(e)?ac(e):e;return $r(s)?t.filter(function(i){return $r(i)&&sS(i,s)&&Ts(i)!=="body"}):[]}function P5(e,t,n,s){var i=t==="clippingParents"?C5(e):[].concat(t),r=[].concat(i,[n]),o=r[0],a=r.reduce(function(l,c){var u=n0(e,c,s);return l.top=xr(u.top,l.top),l.right=lh(u.right,l.right),l.bottom=lh(u.bottom,l.bottom),l.left=xr(u.left,l.left),l},n0(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function lS(e){var t=e.reference,n=e.element,s=e.placement,i=s?ys(s):null,r=s?Yo(s):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(i){case wn:l={x:o,y:t.y-n.height};break;case zn:l={x:o,y:t.y+t.height};break;case Wn:l={x:t.x+t.width,y:a};break;case En:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=i?nm(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Ho:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Fl:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function Bl(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=s===void 0?e.placement:s,r=n.strategy,o=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?G3:a,c=n.rootBoundary,u=c===void 0?tS:c,d=n.elementContext,f=d===void 0?ka:d,p=n.altBoundary,m=p===void 0?!1:p,_=n.padding,y=_===void 0?0:_,T=rS(typeof y!="number"?y:oS(y,oc)),k=f===ka?X3:ka,D=e.rects.popper,R=e.elements[m?k:f],O=P5($r(R)?R:R.contextElement||Zi(e.elements.popper),l,u,o),N=Wo(e.elements.reference),I=lS({reference:N,element:D,strategy:"absolute",placement:i}),b=pp(Object.assign({},D,I)),w=f===ka?b:N,x={top:O.top-w.top+T.top,bottom:w.bottom-O.bottom+T.bottom,left:O.left-w.left+T.left,right:w.right-O.right+T.right},C=e.modifiersData.offset;if(f===ka&&C){var A=C[i];Object.keys(x).forEach(function(S){var dt=[Wn,zn].indexOf(S)>=0?1:-1,J=[wn,zn].indexOf(S)>=0?"y":"x";x[S]+=A[J]*dt})}return x}function k5(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?eS:l,u=Yo(s),d=u?a?Jb:Jb.filter(function(m){return Yo(m)===u}):oc,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var p=f.reduce(function(m,_){return m[_]=Bl(e,{placement:_,boundary:i,rootBoundary:r,padding:o})[ys(_)],m},{});return Object.keys(p).sort(function(m,_){return p[m]-p[_]})}function D5(e){if(ys(e)===Zg)return[];var t=_u(e);return[e0(e),t,e0(t)]}function R5(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,_=n.allowedAutoPlacements,y=t.options.placement,T=ys(y),k=T===y,D=l||(k||!m?[_u(y)]:D5(y)),R=[y].concat(D).reduce(function(Mt,qt){return Mt.concat(ys(qt)===Zg?k5(t,{placement:qt,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:_}):qt)},[]),O=t.rects.reference,N=t.rects.popper,I=new Map,b=!0,w=R[0],x=0;x<R.length;x++){var C=R[x],A=ys(C),S=Yo(C)===Ho,dt=[wn,zn].indexOf(A)>=0,J=dt?"width":"height",at=Bl(t,{placement:C,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),ot=dt?S?Wn:En:S?zn:wn;O[J]>N[J]&&(ot=_u(ot));var gt=_u(ot),Vt=[];if(r&&Vt.push(at[A]<=0),a&&Vt.push(at[ot]<=0,at[gt]<=0),Vt.every(function(Mt){return Mt})){w=C,b=!1;break}I.set(C,Vt)}if(b)for(var W=m?3:1,St=function(qt){var jt=R.find(function(F){var it=I.get(F);if(it)return it.slice(0,qt).every(function(Z){return Z})});if(jt)return w=jt,"break"},et=W;et>0;et--){var kt=St(et);if(kt==="break")break}t.placement!==w&&(t.modifiersData[s]._skip=!0,t.placement=w,t.reset=!0)}}const M5={name:"flip",enabled:!0,phase:"main",fn:R5,requiresIfExists:["offset"],data:{_skip:!1}};function s0(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function i0(e){return[wn,Wn,zn,En].some(function(t){return e[t]>=0})}function O5(e){var t=e.state,n=e.name,s=t.rects.reference,i=t.rects.popper,r=t.modifiersData.preventOverflow,o=Bl(t,{elementContext:"reference"}),a=Bl(t,{altBoundary:!0}),l=s0(o,s),c=s0(a,i,r),u=i0(l),d=i0(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const L5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:O5};function N5(e,t,n){var s=ys(e),i=[En,wn].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[En,Wn].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function V5(e){var t=e.state,n=e.options,s=e.name,i=n.offset,r=i===void 0?[0,0]:i,o=eS.reduce(function(u,d){return u[d]=N5(d,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=o}const $5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:V5};function F5(e){var t=e.state,n=e.name;t.modifiersData[n]=lS({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const B5={name:"popperOffsets",enabled:!0,phase:"read",fn:F5,data:{}};function U5(e){return e==="x"?"y":"x"}function j5(e){var t=e.state,n=e.options,s=e.name,i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,m=n.tetherOffset,_=m===void 0?0:m,y=Bl(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),T=ys(t.placement),k=Yo(t.placement),D=!k,R=nm(T),O=U5(R),N=t.modifiersData.popperOffsets,I=t.rects.reference,b=t.rects.popper,w=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,x=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(N){if(r){var S,dt=R==="y"?wn:En,J=R==="y"?zn:Wn,at=R==="y"?"height":"width",ot=N[R],gt=ot+y[dt],Vt=ot-y[J],W=p?-b[at]/2:0,St=k===Ho?I[at]:b[at],et=k===Ho?-b[at]:-I[at],kt=t.elements.arrow,Mt=p&&kt?em(kt):{width:0,height:0},qt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:iS(),jt=qt[dt],F=qt[J],it=hl(0,I[at],Mt[at]),Z=D?I[at]/2-W-it-jt-x.mainAxis:St-it-jt-x.mainAxis,lt=D?-I[at]/2+W+it+F+x.mainAxis:et+it+F+x.mainAxis,Ot=t.elements.arrow&&ac(t.elements.arrow),Wt=Ot?R==="y"?Ot.clientTop||0:Ot.clientLeft||0:0,P=(S=C==null?void 0:C[R])!=null?S:0,M=ot+Z-P-Wt,V=ot+lt-P,j=hl(p?lh(gt,M):gt,ot,p?xr(Vt,V):Vt);N[R]=j,A[R]=j-ot}if(a){var B,z=R==="x"?wn:En,st=R==="x"?zn:Wn,G=N[O],X=O==="y"?"height":"width",Y=G+y[z],pt=G-y[st],nt=[wn,En].indexOf(T)!==-1,ht=(B=C==null?void 0:C[O])!=null?B:0,yt=nt?Y:G-I[X]-b[X]-ht+x.altAxis,mt=nt?G+I[X]+b[X]-ht-x.altAxis:pt,At=p&&nt?d5(yt,G,mt):hl(p?yt:Y,G,p?mt:pt);N[O]=At,A[O]=At-G}t.modifiersData[s]=A}}const H5={name:"preventOverflow",enabled:!0,phase:"main",fn:j5,requiresIfExists:["offset"]};function z5(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function W5(e){return e===Pn(e)||!Bn(e)?sm(e):z5(e)}function Y5(e){var t=e.getBoundingClientRect(),n=zo(t.width)/e.offsetWidth||1,s=zo(t.height)/e.offsetHeight||1;return n!==1||s!==1}function q5(e,t,n){n===void 0&&(n=!1);var s=Bn(t),i=Bn(t)&&Y5(t),r=Zi(t),o=Wo(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Ts(t)!=="body"||rm(r))&&(a=W5(t)),Bn(t)?(l=Wo(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=im(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function K5(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function i(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&i(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||i(r)}),s}function G5(e){var t=K5(e);return o5.reduce(function(n,s){return n.concat(t.filter(function(i){return i.phase===s}))},[])}function X5(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Q5(e){var t=e.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var r0={placement:"bottom",modifiers:[],strategy:"absolute"};function o0(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function J5(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,i=t.defaultOptions,r=i===void 0?r0:i;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},r0,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(T){var k=typeof T=="function"?T(u.options):T;_(),u.options=Object.assign({},r,u.options,k),u.scrollParents={reference:$r(a)?dl(a):a.contextElement?dl(a.contextElement):[],popper:dl(l)};var D=G5(Q5([].concat(s,u.options.modifiers)));return u.orderedModifiers=D.filter(function(R){return R.enabled}),m(),p.update()},forceUpdate:function(){if(!f){var T=u.elements,k=T.reference,D=T.popper;if(o0(k,D)){u.rects={reference:q5(k,ac(D),u.options.strategy==="fixed"),popper:em(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(x){return u.modifiersData[x.name]=Object.assign({},x.data)});for(var R=0;R<u.orderedModifiers.length;R++){if(u.reset===!0){u.reset=!1,R=-1;continue}var O=u.orderedModifiers[R],N=O.fn,I=O.options,b=I===void 0?{}:I,w=O.name;typeof N=="function"&&(u=N({state:u,options:b,name:w,instance:p})||u)}}}},update:X5(function(){return new Promise(function(y){p.forceUpdate(),y(u)})}),destroy:function(){_(),f=!0}};if(!o0(a,l))return p;p.setOptions(c).then(function(y){!f&&c.onFirstUpdate&&c.onFirstUpdate(y)});function m(){u.orderedModifiers.forEach(function(y){var T=y.name,k=y.options,D=k===void 0?{}:k,R=y.effect;if(typeof R=="function"){var O=R({state:u,name:T,instance:p,options:D}),N=function(){};d.push(O||N)}})}function _(){d.forEach(function(y){return y()}),d=[]}return p}}var Z5=[E5,B5,b5,c5,$5,M5,H5,m5,L5],t6=J5({defaultModifiers:Z5}),e6=Object.defineProperty,n6=(e,t,n)=>t in e?e6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bt=(e,t,n)=>(n6(e,typeof t!="symbol"?t+"":t,n),n),Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s6=Object.prototype,i6=s6.hasOwnProperty;function r6(e,t){return e!=null&&i6.call(e,t)}var o6=r6,a6=Array.isArray,ns=a6,l6=typeof Xc=="object"&&Xc&&Xc.Object===Object&&Xc,uS=l6,c6=uS,u6=typeof self=="object"&&self&&self.Object===Object&&self,h6=c6||u6||Function("return this")(),As=h6,d6=As,f6=d6.Symbol,od=f6,a0=od,hS=Object.prototype,p6=hS.hasOwnProperty,g6=hS.toString,Da=a0?a0.toStringTag:void 0;function m6(e){var t=p6.call(e,Da),n=e[Da];try{e[Da]=void 0;var s=!0}catch{}var i=g6.call(e);return s&&(t?e[Da]=n:delete e[Da]),i}var v6=m6,_6=Object.prototype,y6=_6.toString;function b6(e){return y6.call(e)}var w6=b6,l0=od,E6=v6,T6=w6,I6="[object Null]",S6="[object Undefined]",c0=l0?l0.toStringTag:void 0;function A6(e){return e==null?e===void 0?S6:I6:c0&&c0 in Object(e)?E6(e):T6(e)}var xs=A6;function x6(e){return e!=null&&typeof e=="object"}var ss=x6,C6=xs,P6=ss,k6="[object Symbol]";function D6(e){return typeof e=="symbol"||P6(e)&&C6(e)==k6}var om=D6,R6=ns,M6=om,O6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,L6=/^\w*$/;function N6(e,t){if(R6(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||M6(e)?!0:L6.test(e)||!O6.test(e)||t!=null&&e in Object(t)}var am=N6;function V6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ri=V6,$6=xs,F6=ri,B6="[object AsyncFunction]",U6="[object Function]",j6="[object GeneratorFunction]",H6="[object Proxy]";function z6(e){if(!F6(e))return!1;var t=$6(e);return t==U6||t==j6||t==B6||t==H6}var Kr=z6,W6=As,Y6=W6["__core-js_shared__"],q6=Y6,lf=q6,u0=function(){var e=/[^.]+$/.exec(lf&&lf.keys&&lf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function K6(e){return!!u0&&u0 in e}var G6=K6,X6=Function.prototype,Q6=X6.toString;function J6(e){if(e!=null){try{return Q6.call(e)}catch{}try{return e+""}catch{}}return""}var dS=J6,Z6=Kr,tB=G6,eB=ri,nB=dS,sB=/[\\^$.*+?()[\]{}|]/g,iB=/^\[object .+?Constructor\]$/,rB=Function.prototype,oB=Object.prototype,aB=rB.toString,lB=oB.hasOwnProperty,cB=RegExp("^"+aB.call(lB).replace(sB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uB(e){if(!eB(e)||tB(e))return!1;var t=Z6(e)?cB:iB;return t.test(nB(e))}var hB=uB;function dB(e,t){return e==null?void 0:e[t]}var fB=dB,pB=hB,gB=fB;function mB(e,t){var n=gB(e,t);return pB(n)?n:void 0}var Gr=mB,vB=Gr,_B=vB(Object,"create"),ad=_B,h0=ad;function yB(){this.__data__=h0?h0(null):{},this.size=0}var bB=yB;function wB(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var EB=wB,TB=ad,IB="__lodash_hash_undefined__",SB=Object.prototype,AB=SB.hasOwnProperty;function xB(e){var t=this.__data__;if(TB){var n=t[e];return n===IB?void 0:n}return AB.call(t,e)?t[e]:void 0}var CB=xB,PB=ad,kB=Object.prototype,DB=kB.hasOwnProperty;function RB(e){var t=this.__data__;return PB?t[e]!==void 0:DB.call(t,e)}var MB=RB,OB=ad,LB="__lodash_hash_undefined__";function NB(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=OB&&t===void 0?LB:t,this}var VB=NB,$B=bB,FB=EB,BB=CB,UB=MB,jB=VB;function sa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}sa.prototype.clear=$B;sa.prototype.delete=FB;sa.prototype.get=BB;sa.prototype.has=UB;sa.prototype.set=jB;var HB=sa;function zB(){this.__data__=[],this.size=0}var WB=zB;function YB(e,t){return e===t||e!==e&&t!==t}var ia=YB,qB=ia;function KB(e,t){for(var n=e.length;n--;)if(qB(e[n][0],t))return n;return-1}var ld=KB,GB=ld,XB=Array.prototype,QB=XB.splice;function JB(e){var t=this.__data__,n=GB(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():QB.call(t,n,1),--this.size,!0}var ZB=JB,tU=ld;function eU(e){var t=this.__data__,n=tU(t,e);return n<0?void 0:t[n][1]}var nU=eU,sU=ld;function iU(e){return sU(this.__data__,e)>-1}var rU=iU,oU=ld;function aU(e,t){var n=this.__data__,s=oU(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var lU=aU,cU=WB,uU=ZB,hU=nU,dU=rU,fU=lU;function ra(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}ra.prototype.clear=cU;ra.prototype.delete=uU;ra.prototype.get=hU;ra.prototype.has=dU;ra.prototype.set=fU;var cd=ra,pU=Gr,gU=As,mU=pU(gU,"Map"),lm=mU,d0=HB,vU=cd,_U=lm;function yU(){this.size=0,this.__data__={hash:new d0,map:new(_U||vU),string:new d0}}var bU=yU;function wU(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var EU=wU,TU=EU;function IU(e,t){var n=e.__data__;return TU(t)?n[typeof t=="string"?"string":"hash"]:n.map}var ud=IU,SU=ud;function AU(e){var t=SU(this,e).delete(e);return this.size-=t?1:0,t}var xU=AU,CU=ud;function PU(e){return CU(this,e).get(e)}var kU=PU,DU=ud;function RU(e){return DU(this,e).has(e)}var MU=RU,OU=ud;function LU(e,t){var n=OU(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var NU=LU,VU=bU,$U=xU,FU=kU,BU=MU,UU=NU;function oa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}oa.prototype.clear=VU;oa.prototype.delete=$U;oa.prototype.get=FU;oa.prototype.has=BU;oa.prototype.set=UU;var cm=oa,fS=cm,jU="Expected a function";function um(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(jU);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],r=n.cache;if(r.has(i))return r.get(i);var o=e.apply(this,s);return n.cache=r.set(i,o)||r,o};return n.cache=new(um.Cache||fS),n}um.Cache=fS;var HU=um,zU=HU,WU=500;function YU(e){var t=zU(e,function(s){return n.size===WU&&n.clear(),s}),n=t.cache;return t}var qU=YU,KU=qU,GU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,XU=/\\(\\)?/g,QU=KU(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(GU,function(n,s,i,r){t.push(i?r.replace(XU,"$1"):s||n)}),t}),JU=QU;function ZU(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var t9=ZU,f0=od,e9=t9,n9=ns,s9=om,i9=1/0,p0=f0?f0.prototype:void 0,g0=p0?p0.toString:void 0;function pS(e){if(typeof e=="string")return e;if(n9(e))return e9(e,pS)+"";if(s9(e))return g0?g0.call(e):"";var t=e+"";return t=="0"&&1/e==-i9?"-0":t}var r9=pS,o9=r9;function a9(e){return e==null?"":o9(e)}var l9=a9,c9=ns,u9=am,h9=JU,d9=l9;function f9(e,t){return c9(e)?e:u9(e,t)?[e]:h9(d9(e))}var gS=f9,p9=xs,g9=ss,m9="[object Arguments]";function v9(e){return g9(e)&&p9(e)==m9}var _9=v9,m0=_9,y9=ss,mS=Object.prototype,b9=mS.hasOwnProperty,w9=mS.propertyIsEnumerable,E9=m0(function(){return arguments}())?m0:function(e){return y9(e)&&b9.call(e,"callee")&&!w9.call(e,"callee")},hm=E9,T9=9007199254740991,I9=/^(?:0|[1-9]\d*)$/;function S9(e,t){var n=typeof e;return t=t??T9,!!t&&(n=="number"||n!="symbol"&&I9.test(e))&&e>-1&&e%1==0&&e<t}var dm=S9,A9=9007199254740991;function x9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=A9}var fm=x9,C9=om,P9=1/0;function k9(e){if(typeof e=="string"||C9(e))return e;var t=e+"";return t=="0"&&1/e==-P9?"-0":t}var hd=k9,D9=gS,R9=hm,M9=ns,O9=dm,L9=fm,N9=hd;function V9(e,t,n){t=D9(t,e);for(var s=-1,i=t.length,r=!1;++s<i;){var o=N9(t[s]);if(!(r=e!=null&&n(e,o)))break;e=e[o]}return r||++s!=i?r:(i=e==null?0:e.length,!!i&&L9(i)&&O9(o,i)&&(M9(e)||R9(e)))}var vS=V9,$9=o6,F9=vS;function B9(e,t){return e!=null&&F9(e,t,$9)}var _S=B9,U9=xs,j9=ss,H9="[object Date]";function z9(e){return j9(e)&&U9(e)==H9}var W9=z9;function Y9(e){return function(t){return e(t)}}var yS=Y9,Ul={},q9={get exports(){return Ul},set exports(e){Ul=e}};(function(e,t){var n=uS,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,r=i&&i.exports===s,o=r&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(q9,Ul);var K9=W9,G9=yS,v0=Ul,_0=v0&&v0.isDate,X9=_0?G9(_0):K9,Q9=X9,J9=xs,Z9=ns,tj=ss,ej="[object String]";function nj(e){return typeof e=="string"||!Z9(e)&&tj(e)&&J9(e)==ej}var Ws=nj;function sj(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var bS=sj,ij=cd;function rj(){this.__data__=new ij,this.size=0}var oj=rj;function aj(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var lj=aj;function cj(e){return this.__data__.get(e)}var uj=cj;function hj(e){return this.__data__.has(e)}var dj=hj,fj=cd,pj=lm,gj=cm,mj=200;function vj(e,t){var n=this.__data__;if(n instanceof fj){var s=n.__data__;if(!pj||s.length<mj-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new gj(s)}return n.set(e,t),this.size=n.size,this}var _j=vj,yj=cd,bj=oj,wj=lj,Ej=uj,Tj=dj,Ij=_j;function aa(e){var t=this.__data__=new yj(e);this.size=t.size}aa.prototype.clear=bj;aa.prototype.delete=wj;aa.prototype.get=Ej;aa.prototype.has=Tj;aa.prototype.set=Ij;var pm=aa,Sj="__lodash_hash_undefined__";function Aj(e){return this.__data__.set(e,Sj),this}var xj=Aj;function Cj(e){return this.__data__.has(e)}var Pj=Cj,kj=cm,Dj=xj,Rj=Pj;function ch(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new kj;++t<n;)this.add(e[t])}ch.prototype.add=ch.prototype.push=Dj;ch.prototype.has=Rj;var Mj=ch;function Oj(e,t){return e.has(t)}var Lj=Oj,Nj=Mj,Vj=bS,$j=Lj,Fj=1,Bj=2;function Uj(e,t,n,s,i,r){var o=n&Fj,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(e),u=r.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,p=n&Bj?new Nj:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var m=e[d],_=t[d];if(s)var y=o?s(_,m,d,t,e,r):s(m,_,d,e,t,r);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!Vj(t,function(T,k){if(!$j(p,k)&&(m===T||i(m,T,n,s,r)))return p.push(k)})){f=!1;break}}else if(!(m===_||i(m,_,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}var wS=Uj,jj=As,Hj=jj.Uint8Array,ES=Hj;function zj(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var Wj=zj;function Yj(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var qj=Yj,y0=od,b0=ES,Kj=ia,Gj=wS,Xj=Wj,Qj=qj,Jj=1,Zj=2,tH="[object Boolean]",eH="[object Date]",nH="[object Error]",sH="[object Map]",iH="[object Number]",rH="[object RegExp]",oH="[object Set]",aH="[object String]",lH="[object Symbol]",cH="[object ArrayBuffer]",uH="[object DataView]",w0=y0?y0.prototype:void 0,cf=w0?w0.valueOf:void 0;function hH(e,t,n,s,i,r,o){switch(n){case uH:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cH:return!(e.byteLength!=t.byteLength||!r(new b0(e),new b0(t)));case tH:case eH:case iH:return Kj(+e,+t);case nH:return e.name==t.name&&e.message==t.message;case rH:case aH:return e==t+"";case sH:var a=Xj;case oH:var l=s&Jj;if(a||(a=Qj),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;s|=Zj,o.set(e,t);var u=Gj(a(e),a(t),s,i,r,o);return o.delete(e),u;case lH:if(cf)return cf.call(e)==cf.call(t)}return!1}var dH=hH;function fH(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var pH=fH,gH=pH,mH=ns;function vH(e,t,n){var s=t(e);return mH(e)?s:gH(s,n(e))}var _H=vH;function yH(e,t){for(var n=-1,s=e==null?0:e.length,i=0,r=[];++n<s;){var o=e[n];t(o,n,e)&&(r[i++]=o)}return r}var bH=yH;function wH(){return[]}var EH=wH,TH=bH,IH=EH,SH=Object.prototype,AH=SH.propertyIsEnumerable,E0=Object.getOwnPropertySymbols,xH=E0?function(e){return e==null?[]:(e=Object(e),TH(E0(e),function(t){return AH.call(e,t)}))}:IH,CH=xH;function PH(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var kH=PH,qo={},DH={get exports(){return qo},set exports(e){qo=e}};function RH(){return!1}var MH=RH;(function(e,t){var n=As,s=MH,i=t&&!t.nodeType&&t,r=i&&!0&&e&&!e.nodeType&&e,o=r&&r.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||s;e.exports=c})(DH,qo);var OH=xs,LH=fm,NH=ss,VH="[object Arguments]",$H="[object Array]",FH="[object Boolean]",BH="[object Date]",UH="[object Error]",jH="[object Function]",HH="[object Map]",zH="[object Number]",WH="[object Object]",YH="[object RegExp]",qH="[object Set]",KH="[object String]",GH="[object WeakMap]",XH="[object ArrayBuffer]",QH="[object DataView]",JH="[object Float32Array]",ZH="[object Float64Array]",tz="[object Int8Array]",ez="[object Int16Array]",nz="[object Int32Array]",sz="[object Uint8Array]",iz="[object Uint8ClampedArray]",rz="[object Uint16Array]",oz="[object Uint32Array]",de={};de[JH]=de[ZH]=de[tz]=de[ez]=de[nz]=de[sz]=de[iz]=de[rz]=de[oz]=!0;de[VH]=de[$H]=de[XH]=de[FH]=de[QH]=de[BH]=de[UH]=de[jH]=de[HH]=de[zH]=de[WH]=de[YH]=de[qH]=de[KH]=de[GH]=!1;function az(e){return NH(e)&&LH(e.length)&&!!de[OH(e)]}var lz=az,cz=lz,uz=yS,T0=Ul,I0=T0&&T0.isTypedArray,hz=I0?uz(I0):cz,gm=hz,dz=kH,fz=hm,pz=ns,gz=qo,mz=dm,vz=gm,_z=Object.prototype,yz=_z.hasOwnProperty;function bz(e,t){var n=pz(e),s=!n&&fz(e),i=!n&&!s&&gz(e),r=!n&&!s&&!i&&vz(e),o=n||s||i||r,a=o?dz(e.length,String):[],l=a.length;for(var c in e)(t||yz.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||mz(c,l)))&&a.push(c);return a}var TS=bz,wz=Object.prototype;function Ez(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||wz;return e===n}var mm=Ez;function Tz(e,t){return function(n){return e(t(n))}}var IS=Tz,Iz=IS,Sz=Iz(Object.keys,Object),Az=Sz,xz=mm,Cz=Az,Pz=Object.prototype,kz=Pz.hasOwnProperty;function Dz(e){if(!xz(e))return Cz(e);var t=[];for(var n in Object(e))kz.call(e,n)&&n!="constructor"&&t.push(n);return t}var Rz=Dz,Mz=Kr,Oz=fm;function Lz(e){return e!=null&&Oz(e.length)&&!Mz(e)}var lc=Lz,Nz=TS,Vz=Rz,$z=lc;function Fz(e){return $z(e)?Nz(e):Vz(e)}var vm=Fz,Bz=_H,Uz=CH,jz=vm;function Hz(e){return Bz(e,jz,Uz)}var zz=Hz,S0=zz,Wz=1,Yz=Object.prototype,qz=Yz.hasOwnProperty;function Kz(e,t,n,s,i,r){var o=n&Wz,a=S0(e),l=a.length,c=S0(t),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in t:qz.call(t,f)))return!1}var p=r.get(e),m=r.get(t);if(p&&m)return p==t&&m==e;var _=!0;r.set(e,t),r.set(t,e);for(var y=o;++d<l;){f=a[d];var T=e[f],k=t[f];if(s)var D=o?s(k,T,f,t,e,r):s(T,k,f,e,t,r);if(!(D===void 0?T===k||i(T,k,n,s,r):D)){_=!1;break}y||(y=f=="constructor")}if(_&&!y){var R=e.constructor,O=t.constructor;R!=O&&"constructor"in e&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof O=="function"&&O instanceof O)&&(_=!1)}return r.delete(e),r.delete(t),_}var Gz=Kz,Xz=Gr,Qz=As,Jz=Xz(Qz,"DataView"),Zz=Jz,tW=Gr,eW=As,nW=tW(eW,"Promise"),sW=nW,iW=Gr,rW=As,oW=iW(rW,"Set"),aW=oW,lW=Gr,cW=As,uW=lW(cW,"WeakMap"),hW=uW,gp=Zz,mp=lm,vp=sW,_p=aW,yp=hW,SS=xs,la=dS,A0="[object Map]",dW="[object Object]",x0="[object Promise]",C0="[object Set]",P0="[object WeakMap]",k0="[object DataView]",fW=la(gp),pW=la(mp),gW=la(vp),mW=la(_p),vW=la(yp),_r=SS;(gp&&_r(new gp(new ArrayBuffer(1)))!=k0||mp&&_r(new mp)!=A0||vp&&_r(vp.resolve())!=x0||_p&&_r(new _p)!=C0||yp&&_r(new yp)!=P0)&&(_r=function(e){var t=SS(e),n=t==dW?e.constructor:void 0,s=n?la(n):"";if(s)switch(s){case fW:return k0;case pW:return A0;case gW:return x0;case mW:return C0;case vW:return P0}return t});var _W=_r,uf=pm,yW=wS,bW=dH,wW=Gz,D0=_W,R0=ns,M0=qo,EW=gm,TW=1,O0="[object Arguments]",L0="[object Array]",Qc="[object Object]",IW=Object.prototype,N0=IW.hasOwnProperty;function SW(e,t,n,s,i,r){var o=R0(e),a=R0(t),l=o?L0:D0(e),c=a?L0:D0(t);l=l==O0?Qc:l,c=c==O0?Qc:c;var u=l==Qc,d=c==Qc,f=l==c;if(f&&M0(e)){if(!M0(t))return!1;o=!0,u=!1}if(f&&!u)return r||(r=new uf),o||EW(e)?yW(e,t,n,s,i,r):bW(e,t,l,n,s,i,r);if(!(n&TW)){var p=u&&N0.call(e,"__wrapped__"),m=d&&N0.call(t,"__wrapped__");if(p||m){var _=p?e.value():e,y=m?t.value():t;return r||(r=new uf),i(_,y,n,s,r)}}return f?(r||(r=new uf),wW(e,t,n,s,i,r)):!1}var AW=SW,xW=AW,V0=ss;function AS(e,t,n,s,i){return e===t?!0:e==null||t==null||!V0(e)&&!V0(t)?e!==e&&t!==t:xW(e,t,n,s,AS,i)}var xS=AS,CW=pm,PW=xS,kW=1,DW=2;function RW(e,t,n,s){var i=n.length,r=i,o=!s;if(e==null)return!r;for(e=Object(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<r;){a=n[i];var l=a[0],c=e[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in e))return!1}else{var d=new CW;if(s)var f=s(c,u,l,e,t,d);if(!(f===void 0?PW(u,c,kW|DW,s,d):f))return!1}}return!0}var MW=RW,OW=ri;function LW(e){return e===e&&!OW(e)}var CS=LW,NW=CS,VW=vm;function $W(e){for(var t=VW(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,NW(i)]}return t}var FW=$W;function BW(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var PS=BW,UW=MW,jW=FW,HW=PS;function zW(e){var t=jW(e);return t.length==1&&t[0][2]?HW(t[0][0],t[0][1]):function(n){return n===e||UW(n,e,t)}}var WW=zW,YW=gS,qW=hd;function KW(e,t){t=YW(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[qW(t[n++])];return n&&n==s?e:void 0}var kS=KW,GW=kS;function XW(e,t,n){var s=e==null?void 0:GW(e,t);return s===void 0?n:s}var Er=XW;function QW(e,t){return e!=null&&t in Object(e)}var JW=QW,ZW=JW,t7=vS;function e7(e,t){return e!=null&&t7(e,t,ZW)}var n7=e7,s7=xS,i7=Er,r7=n7,o7=am,a7=CS,l7=PS,c7=hd,u7=1,h7=2;function d7(e,t){return o7(e)&&a7(t)?l7(c7(e),t):function(n){var s=i7(n,e);return s===void 0&&s===t?r7(n,e):s7(t,s,u7|h7)}}var f7=d7;function p7(e){return e}var _m=p7;function g7(e){return function(t){return t==null?void 0:t[e]}}var m7=g7,v7=kS;function _7(e){return function(t){return v7(t,e)}}var y7=_7,b7=m7,w7=y7,E7=am,T7=hd;function I7(e){return E7(e)?b7(T7(e)):w7(e)}var S7=I7,A7=WW,x7=f7,C7=_m,P7=ns,k7=S7;function D7(e){return typeof e=="function"?e:e==null?C7:typeof e=="object"?P7(e)?x7(e[0],e[1]):A7(e):k7(e)}var DS=D7;function R7(e){return function(t,n,s){for(var i=-1,r=Object(t),o=s(t),a=o.length;a--;){var l=o[e?a:++i];if(n(r[l],l,r)===!1)break}return t}}var M7=R7,O7=M7,L7=O7(),RS=L7,N7=RS,V7=vm;function $7(e,t){return e&&N7(e,t,V7)}var MS=$7,F7=lc;function B7(e,t){return function(n,s){if(n==null)return n;if(!F7(n))return e(n,s);for(var i=n.length,r=t?i:-1,o=Object(n);(t?r--:++r<i)&&s(o[r],r,o)!==!1;);return n}}var U7=B7,j7=MS,H7=U7,z7=H7(j7),W7=z7,Y7=W7;function q7(e,t){var n;return Y7(e,function(s,i,r){return n=t(s,i,r),!n}),!!n}var K7=q7,G7=ia,X7=lc,Q7=dm,J7=ri;function Z7(e,t,n){if(!J7(n))return!1;var s=typeof t;return(s=="number"?X7(n)&&Q7(t,n.length):s=="string"&&t in n)?G7(n[t],e):!1}var ym=Z7,t8=bS,e8=DS,n8=K7,s8=ns,i8=ym;function r8(e,t,n){var s=s8(e)?t8:n8;return n&&i8(e,t,n)&&(t=void 0),s(e,e8(t))}var o8=r8,a8=xs,l8=ss,c8="[object Boolean]";function u8(e){return e===!0||e===!1||l8(e)&&a8(e)==c8}var h8=u8,d8=xs,f8=ss,p8="[object Number]";function g8(e){return typeof e=="number"||f8(e)&&d8(e)==p8}var Is=g8,m8=Gr,v8=function(){try{var e=m8(Object,"defineProperty");return e({},"",{}),e}catch{}}(),OS=v8,$0=OS;function _8(e,t,n){t=="__proto__"&&$0?$0(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var dd=_8,y8=dd,b8=ia,w8=Object.prototype,E8=w8.hasOwnProperty;function T8(e,t,n){var s=e[t];(!(E8.call(e,t)&&b8(s,n))||n===void 0&&!(t in e))&&y8(e,t,n)}var I8=T8,S8=dd,A8=MS,x8=DS;function C8(e,t){var n={};return t=x8(t),A8(e,function(s,i,r){S8(n,i,t(s,i,r))}),n}var P8=C8;function k8(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var LS=k8,D8=LS,F0=Math.max;function R8(e,t,n){return t=F0(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,r=F0(s.length-t,0),o=Array(r);++i<r;)o[i]=s[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=s[i];return a[t]=n(o),D8(e,this,a)}}var M8=R8;function O8(e){return function(){return e}}var L8=O8,N8=L8,B0=OS,V8=_m,$8=B0?function(e,t){return B0(e,"toString",{configurable:!0,enumerable:!1,value:N8(t),writable:!0})}:V8,F8=$8,B8=800,U8=16,j8=Date.now;function H8(e){var t=0,n=0;return function(){var s=j8(),i=U8-(s-n);if(n=s,i>0){if(++t>=B8)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var z8=H8,W8=F8,Y8=z8,q8=Y8(W8),K8=q8,G8=_m,X8=M8,Q8=K8;function J8(e,t){return Q8(X8(e,t,G8),e+"")}var bm=J8;function Z8(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var tY=Z8,eY=ri,nY=mm,sY=tY,iY=Object.prototype,rY=iY.hasOwnProperty;function oY(e){if(!eY(e))return sY(e);var t=nY(e),n=[];for(var s in e)s=="constructor"&&(t||!rY.call(e,s))||n.push(s);return n}var aY=oY,lY=TS,cY=aY,uY=lc;function hY(e){return uY(e)?lY(e,!0):cY(e)}var wm=hY,dY=bm,fY=ia,pY=ym,gY=wm,NS=Object.prototype,mY=NS.hasOwnProperty,vY=dY(function(e,t){e=Object(e);var n=-1,s=t.length,i=s>2?t[2]:void 0;for(i&&pY(t[0],t[1],i)&&(s=1);++n<s;)for(var r=t[n],o=gY(r),a=-1,l=o.length;++a<l;){var c=o[a],u=e[c];(u===void 0||fY(u,NS[c])&&!mY.call(e,c))&&(e[c]=r[c])}return e}),U0=vY,_Y=dd,yY=ia;function bY(e,t,n){(n!==void 0&&!yY(e[t],n)||n===void 0&&!(t in e))&&_Y(e,t,n)}var VS=bY,uh={},wY={get exports(){return uh},set exports(e){uh=e}};(function(e,t){var n=As,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,r=i&&i.exports===s,o=r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}e.exports=l})(wY,uh);var j0=ES;function EY(e){var t=new e.constructor(e.byteLength);return new j0(t).set(new j0(e)),t}var TY=EY,IY=TY;function SY(e,t){var n=t?IY(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var AY=SY;function xY(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var CY=xY,PY=ri,H0=Object.create,kY=function(){function e(){}return function(t){if(!PY(t))return{};if(H0)return H0(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),DY=kY,RY=IS,MY=RY(Object.getPrototypeOf,Object),$S=MY,OY=DY,LY=$S,NY=mm;function VY(e){return typeof e.constructor=="function"&&!NY(e)?OY(LY(e)):{}}var $Y=VY,FY=lc,BY=ss;function UY(e){return BY(e)&&FY(e)}var jY=UY,HY=xs,zY=$S,WY=ss,YY="[object Object]",qY=Function.prototype,KY=Object.prototype,FS=qY.toString,GY=KY.hasOwnProperty,XY=FS.call(Object);function QY(e){if(!WY(e)||HY(e)!=YY)return!1;var t=zY(e);if(t===null)return!0;var n=GY.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&FS.call(n)==XY}var JY=QY;function ZY(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var BS=ZY,tq=I8,eq=dd;function nq(e,t,n,s){var i=!n;n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),i?eq(n,a,l):tq(n,a,l)}return n}var sq=nq,iq=sq,rq=wm;function oq(e){return iq(e,rq(e))}var aq=oq,z0=VS,lq=uh,cq=AY,uq=CY,hq=$Y,W0=hm,Y0=ns,dq=jY,fq=qo,pq=Kr,gq=ri,mq=JY,vq=gm,q0=BS,_q=aq;function yq(e,t,n,s,i,r,o){var a=q0(e,n),l=q0(t,n),c=o.get(l);if(c){z0(e,n,c);return}var u=r?r(a,l,n+"",e,t,o):void 0,d=u===void 0;if(d){var f=Y0(l),p=!f&&fq(l),m=!f&&!p&&vq(l);u=l,f||p||m?Y0(a)?u=a:dq(a)?u=uq(a):p?(d=!1,u=lq(l,!0)):m?(d=!1,u=cq(l,!0)):u=[]:mq(l)||W0(l)?(u=a,W0(a)?u=_q(a):(!gq(a)||pq(a))&&(u=hq(l))):d=!1}d&&(o.set(l,u),i(u,l,s,r,o),o.delete(l)),z0(e,n,u)}var bq=yq,wq=pm,Eq=VS,Tq=RS,Iq=bq,Sq=ri,Aq=wm,xq=BS;function US(e,t,n,s,i){e!==t&&Tq(t,function(r,o){if(i||(i=new wq),Sq(r))Iq(e,t,o,n,US,s,i);else{var a=s?s(xq(e,o),r,o+"",e,t,i):void 0;a===void 0&&(a=r),Eq(e,o,a)}},Aq)}var jS=US,Cq=jS,K0=ri;function HS(e,t,n,s,i,r){return K0(e)&&K0(t)&&(r.set(t,e),Cq(e,t,void 0,HS,r),r.delete(t)),e}var Pq=HS,kq=bm,Dq=ym;function Rq(e){return kq(function(t,n){var s=-1,i=n.length,r=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(r=e.length>3&&typeof r=="function"?(i--,r):void 0,o&&Dq(n[0],n[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++s<i;){var a=n[s];a&&e(t,a,s,r)}return t})}var Mq=Rq,Oq=jS,Lq=Mq,Nq=Lq(function(e,t,n,s){Oq(e,t,n,s)}),Vq=Nq,$q=LS,Fq=bm,Bq=Pq,Uq=Vq,jq=Fq(function(e){return e.push(void 0,Bq),$q(Uq,void 0,e)}),hh=jq;function Hq(e){return e&&e.length?e[0]:void 0}var zS=Hq;function zq(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var vo=zq;const Wq=e=>Object.prototype.toString.call(e).slice(8,-1),bp=e=>Q9(e)&&!isNaN(e.getTime()),Fr=e=>Wq(e)==="Object",WS=_S,G0=(e,t)=>o8(t,n=>_S(e,n)),ne=(e,t,n="0")=>{for(e=e!=null?String(e):"",t=t||2;e.length<t;)e=`${n}${e}`;return e},bs=e=>Array.isArray(e),Tr=e=>bs(e)&&e.length>0,dh=e=>e==null?null:document&&Ws(e)?document.querySelector(e):e.$el??e,Ii=(e,t,n,s=void 0)=>{e.removeEventListener(t,n,s)},Si=(e,t,n,s=void 0)=>(e.addEventListener(t,n,s),()=>Ii(e,t,n,s)),yu=(e,t)=>!!e&&!!t&&(e===t||e.contains(t)),Jc=(e,t)=>{(e.key===" "||e.key==="Enter")&&(t(e),e.preventDefault())},Yq=(e,...t)=>{const n={};let s;for(s in e)t.includes(s)||(n[s]=e[s]);return n},YS=(e,t)=>{const n={};return t.forEach(s=>{s in e&&(n[s]=e[s])}),n};function qq(e,t,n){return Math.min(Math.max(e,t),n)}var fh={},Kq={get exports(){return fh},set exports(e){fh=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){if(s===null||s===!0||s===!1)return NaN;var i=Number(s);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}e.exports=t.default})(Kq,fh);const Gq=cS(fh);var ph={},Xq={get exports(){return ph},set exports(e){ph=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){var i=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return i.setUTCFullYear(s.getFullYear()),s.getTime()-i.getTime()}e.exports=t.default})(Xq,ph);const X0=cS(ph);function Qq(e,t){var n=eK(t);return n.formatToParts?Zq(n,e):tK(n,e)}var Jq={year:0,month:1,day:2,hour:3,minute:4,second:5};function Zq(e,t){try{for(var n=e.formatToParts(t),s=[],i=0;i<n.length;i++){var r=Jq[n[i].type];r>=0&&(s[r]=parseInt(n[i].value,10))}return s}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function tK(e,t){var n=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[s[3],s[1],s[2],s[4],s[5],s[6]]}var hf={};function eK(e){if(!hf[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";hf[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return hf[e]}function qS(e,t,n,s,i,r,o){var a=new Date(0);return a.setUTCFullYear(e,t,n),a.setUTCHours(s,i,r,o),a}var Q0=36e5,nK=6e4,df={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function sK(e,t,n){var s,i;if(!e||(s=df.timezoneZ.exec(e),s))return 0;var r;if(s=df.timezoneHH.exec(e),s)return r=parseInt(s[1],10),J0(r)?-(r*Q0):NaN;if(s=df.timezoneHHMM.exec(e),s){r=parseInt(s[1],10);var o=parseInt(s[2],10);return J0(r,o)?(i=Math.abs(r)*Q0+o*nK,r>0?-i:i):NaN}if(oK(e)){t=new Date(t||Date.now());var a=n?t:iK(t),l=wp(a,e),c=n?l:rK(t,l,e);return-c}return NaN}function iK(e){return qS(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function wp(e,t){var n=Qq(e,t),s=qS(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=e.getTime(),r=i%1e3;return i-=r>=0?r:1e3+r,s-i}function rK(e,t,n){var s=e.getTime(),i=s-t,r=wp(new Date(i),n);if(t===r)return t;i-=r-t;var o=wp(new Date(i),n);return r===o?r:Math.max(r,o)}function J0(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var Z0={};function oK(e){if(Z0[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Z0[e]=!0,!0}catch{return!1}}var aK=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const lK=aK;var ff=36e5,tw=6e4,cK=2,fn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:lK};function uK(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},s=n.additionalDigits==null?cK:Gq(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var i=hK(e),r=dK(i.date,s),o=r.year,a=r.restDateString,l=fK(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,d;if(i.time&&(u=pK(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(d=sK(i.timeZone||n.timeZone,new Date(c+u)),isNaN(d))return new Date(NaN)}else d=X0(new Date(c+u)),d=X0(new Date(c+u+d));return new Date(c+u+d)}else return new Date(NaN)}function hK(e){var t={},n=fn.dateTimePattern.exec(e),s;if(n?(t.date=n[1],s=n[3]):(n=fn.datePattern.exec(e),n?(t.date=n[1],s=n[2]):(t.date=null,s=e)),s){var i=fn.timeZone.exec(s);i?(t.time=s.replace(i[1],""),t.timeZone=i[1].trim()):t.time=s}return t}function dK(e,t){var n=fn.YYY[t],s=fn.YYYYY[t],i;if(i=fn.YYYY.exec(e)||s.exec(e),i){var r=i[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(i=fn.YY.exec(e)||n.exec(e),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function fK(e,t){if(t===null)return null;var n,s,i,r;if(e.length===0)return s=new Date(0),s.setUTCFullYear(t),s;if(n=fn.MM.exec(e),n)return s=new Date(0),i=parseInt(n[1],10)-1,nw(t,i)?(s.setUTCFullYear(t,i),s):new Date(NaN);if(n=fn.DDD.exec(e),n){s=new Date(0);var o=parseInt(n[1],10);return vK(t,o)?(s.setUTCFullYear(t,0,o),s):new Date(NaN)}if(n=fn.MMDD.exec(e),n){s=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return nw(t,i,a)?(s.setUTCFullYear(t,i,a),s):new Date(NaN)}if(n=fn.Www.exec(e),n)return r=parseInt(n[1],10)-1,sw(t,r)?ew(t,r):new Date(NaN);if(n=fn.WwwD.exec(e),n){r=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return sw(t,r,l)?ew(t,r,l):new Date(NaN)}return null}function pK(e){var t,n,s;if(t=fn.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),pf(n)?n%24*ff:NaN;if(t=fn.HHMM.exec(e),t)return n=parseInt(t[1],10),s=parseFloat(t[2].replace(",",".")),pf(n,s)?n%24*ff+s*tw:NaN;if(t=fn.HHMMSS.exec(e),t){n=parseInt(t[1],10),s=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return pf(n,s,i)?n%24*ff+s*tw+i*1e3:NaN}return null}function ew(e,t,n){t=t||0,n=n||0;var s=new Date(0);s.setUTCFullYear(e,0,4);var i=s.getUTCDay()||7,r=t*7+n+1-i;return s.setUTCDate(s.getUTCDate()+r),s}var gK=[31,28,31,30,31,30,31,31,30,31,30,31],mK=[31,29,31,30,31,30,31,31,30,31,30,31];function KS(e){return e%400===0||e%4===0&&e%100!==0}function nw(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var s=KS(e);if(s&&n>mK[t]||!s&&n>gK[t])return!1}return!0}function vK(e,t){if(t<1)return!1;var n=KS(e);return!(n&&t>366||!n&&t>365)}function sw(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function pf(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function an(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function bu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bu=function(n){return typeof n}:bu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bu(e)}function oi(e){an(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||bu(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ca(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var _K={};function Em(){return _K}function Br(e,t){var n,s,i,r,o,a,l,c;an(1,arguments);var u=Em(),d=ca((n=(s=(i=(r=t==null?void 0:t.weekStartsOn)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=oi(e),p=f.getDay(),m=(p<d?7:0)+p-d;return f.setDate(f.getDate()-m),f.setHours(0,0,0,0),f}function iw(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var yK=6048e5;function bK(e,t,n){an(2,arguments);var s=Br(e,n),i=Br(t,n),r=s.getTime()-iw(s),o=i.getTime()-iw(i);return Math.round((r-o)/yK)}function wK(e){an(1,arguments);var t=oi(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function EK(e){an(1,arguments);var t=oi(e);return t.setDate(1),t.setHours(0,0,0,0),t}function TK(e,t){return an(1,arguments),bK(wK(e),EK(e),t)+1}function IK(e,t){var n,s,i,r,o,a,l,c;an(1,arguments);var u=oi(e),d=u.getFullYear(),f=Em(),p=ca((n=(s=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&s!==void 0?s:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(d+1,0,p),m.setHours(0,0,0,0);var _=Br(m,t),y=new Date(0);y.setFullYear(d,0,p),y.setHours(0,0,0,0);var T=Br(y,t);return u.getTime()>=_.getTime()?d+1:u.getTime()>=T.getTime()?d:d-1}function SK(e,t){var n,s,i,r,o,a,l,c;an(1,arguments);var u=Em(),d=ca((n=(s=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=IK(e,t),p=new Date(0);p.setFullYear(f,0,d),p.setHours(0,0,0,0);var m=Br(p,t);return m}var AK=6048e5;function xK(e,t){an(1,arguments);var n=oi(e),s=Br(n,t).getTime()-SK(n,t).getTime();return Math.round(s/AK)+1}function gh(e){return an(1,arguments),Br(e,{weekStartsOn:1})}function CK(e){an(1,arguments);var t=oi(e),n=t.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var i=gh(s),r=new Date(0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);var o=gh(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function PK(e){an(1,arguments);var t=CK(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var s=gh(n);return s}var kK=6048e5;function DK(e){an(1,arguments);var t=oi(e),n=gh(t).getTime()-PK(t).getTime();return Math.round(n/kK)+1}function hn(e,t){an(2,arguments);var n=oi(e),s=ca(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function mh(e,t){an(2,arguments);var n=oi(e),s=ca(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var i=n.getDate(),r=new Date(n.getTime());r.setMonth(n.getMonth()+s+1,0);var o=r.getDate();return i>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function rw(e,t){an(2,arguments);var n=ca(t);return mh(e,n*12)}const RK={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function MK({monthComps:e,prevMonthComps:t,nextMonthComps:n},s){const i=[],{firstDayOfWeek:r,firstWeekday:o,isoWeeknumbers:a,weeknumbers:l,numDays:c,numWeeks:u}=e,d=o+(o<r?Ge:0)-r;let f=!0,p=!1,m=!1,_=0;const y=new Intl.DateTimeFormat(s.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let T=t.numDays-d+1,k=t.numDays-T+1,D=Math.floor((T-1)/Ge+1),R=1,O=t.numWeeks,N=1,I=t.month,b=t.year;const w=new Date,x=w.getDate(),C=w.getMonth()+1,A=w.getFullYear();for(let S=1;S<=AG;S++){for(let dt=1,J=r;dt<=Ge;dt++,J+=J===Ge?1-Ge:1){f&&J===o&&(T=1,k=e.numDays,D=Math.floor((T-1)/Ge+1),R=Math.floor((c-T)/Ge+1),O=1,N=u,I=e.month,b=e.year,f=!1,p=!0);const at=s.getDateFromParams(b,I,T,0,0,0,0),ot=s.getDateFromParams(b,I,T,12,0,0,0),gt=s.getDateFromParams(b,I,T,23,59,59,999),Vt=at,W=`${ne(b,4)}-${ne(I,2)}-${ne(T,2)}`,St=dt,et=Ge-dt,kt=l[S-1],Mt=a[S-1],qt=T===x&&I===C&&b===A,jt=p&&T===1,F=p&&T===c,it=S===1,Z=S===u,lt=dt===1,Ot=dt===Ge,Wt=rA(b,I,T);i.push({locale:s,id:W,position:++_,label:T.toString(),ariaLabel:y.format(new Date(b,I-1,T)),day:T,dayFromEnd:k,weekday:J,weekdayPosition:St,weekdayPositionFromEnd:et,weekdayOrdinal:D,weekdayOrdinalFromEnd:R,week:O,weekFromEnd:N,weekPosition:S,weeknumber:kt,isoWeeknumber:Mt,month:I,year:b,date:Vt,startDate:at,endDate:gt,noonDate:ot,dayIndex:Wt,isToday:qt,isFirstDay:jt,isLastDay:F,isDisabled:!p,isFocusable:!p,isFocused:!1,inMonth:p,inPrevMonth:f,inNextMonth:m,onTop:it,onBottom:Z,onLeft:lt,onRight:Ot,classes:[`id-${W}`,`day-${T}`,`day-from-end-${k}`,`weekday-${J}`,`weekday-position-${St}`,`weekday-ordinal-${D}`,`weekday-ordinal-from-end-${R}`,`week-${O}`,`week-from-end-${N}`,{"is-today":qt,"is-first-day":jt,"is-last-day":F,"in-month":p,"in-prev-month":f,"in-next-month":m,"on-top":it,"on-bottom":Z,"on-left":lt,"on-right":Ot}]}),p&&F?(p=!1,m=!0,T=1,k=c,D=1,R=Math.floor((c-T)/Ge+1),O=1,N=n.numWeeks,I=n.month,b=n.year):(T++,k--,D=Math.floor((T-1)/Ge+1),R=Math.floor((c-T)/Ge+1))}O++,N--}return i}function OK(e,t,n,s){const i=e.reduce((r,o,a)=>{const l=Math.floor(a/7);let c=r[l];return c||(c={id:`week-${l+1}`,title:"",week:o.week,weekPosition:o.weekPosition,weeknumber:o.weeknumber,isoWeeknumber:o.isoWeeknumber,weeknumberDisplay:t?o.weeknumber:n?o.isoWeeknumber:void 0,days:[]},r[l]=c),c.days.push(o),r},Array(e.length/Ge));return i.forEach(r=>{const o=r.days[0],a=r.days[r.days.length-1];o.month===a.month?r.title=`${s.formatDate(o.date,"MMMM YYYY")}`:o.year===a.year?r.title=`${s.formatDate(o.date,"MMM")} - ${s.formatDate(a.date,"MMM YYYY")}`:r.title=`${s.formatDate(o.date,"MMM YYYY")} - ${s.formatDate(a.date,"MMM YYYY")}`}),i}function LK(e,t){return e.days.map(n=>({label:t.formatDate(n.date,t.masks.weekdays),weekday:n.weekday}))}function NK(e,t){return`${t}.${ne(e,2)}`}function VK(e,t,n){return YS(n.getDateParts(n.toDate(e)),RK[t])}function GS({day:e,week:t,month:n,year:s},i,r,o){if(r==="daily"&&e){const a=new Date(s,n-1,e),l=hn(a,i);return{day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()}}else if(r==="weekly"&&t){const l=o.getMonthParts(n,s).firstDayOfMonth,c=hn(l,(t-1+i)*7),u=o.getDateParts(c);return{week:u.week,month:u.month,year:u.year}}else{const a=new Date(s,n-1,1),l=mh(a,i);return{month:l.getMonth()+1,year:l.getFullYear()}}}function hs(e){return e!=null&&e.month!=null&&e.year!=null}function Ep(e,t){return!hs(e)||!hs(t)?!1:(e=e,t=t,e.year!==t.year?e.year<t.year:e.month&&t.month&&e.month!==t.month?e.month<t.month:e.week&&t.week&&e.week!==t.week?e.week<t.week:e.day&&t.day&&e.day!==t.day?e.day<t.day:!1)}function vh(e,t){return!hs(e)||!hs(t)?!1:(e=e,t=t,e.year!==t.year?e.year>t.year:e.month&&t.month&&e.month!==t.month?e.month>t.month:e.week&&t.week&&e.week!==t.week?e.week>t.week:e.day&&t.day&&e.day!==t.day?e.day>t.day:!1)}function $K(e,t,n){return(e||!1)&&!Ep(e,t)&&!vh(e,n)}function FK(e,t){return!e&&t||e&&!t?!1:!e&&!t?!0:(e=e,t=t,e.year===t.year&&e.month===t.month&&e.week===t.week&&e.day===t.day)}function BK(e,t,n,s){if(!hs(e)||!hs(t))return[];const i=[];for(;!vh(e,t);)i.push(e),e=GS(e,1,n,s);return i}function XS(e){const{day:t,week:n,month:s,year:i}=e;let r=`${i}-${ne(s,2)}`;return n&&(r=`${r}-w${n}`),t&&(r=`${r}-${ne(t,2)}`),r}function UK(e,t){const{month:n,year:s,showWeeknumbers:i,showIsoWeeknumbers:r}=e,o=new Date(s,n-1,15),a=t.getMonthParts(n,s),l=t.getPrevMonthParts(n,s),c=t.getNextMonthParts(n,s),u=MK({monthComps:a,prevMonthComps:l,nextMonthComps:c},t),d=OK(u,i,r,t),f=LK(d[0],t);return{id:XS(e),month:n,year:s,monthTitle:t.formatDate(o,t.masks.title),shortMonthLabel:t.formatDate(o,"MMM"),monthLabel:t.formatDate(o,"MMMM"),shortYearLabel:s.toString().substring(2),yearLabel:s.toString(),monthComps:a,prevMonthComps:l,nextMonthComps:c,days:u,weeks:d,weekdays:f}}function jK(e,t){const{day:n,week:s,view:i,trimWeeks:r}=e,o={...t,...e,title:"",viewDays:[],viewWeeks:[]};switch(i){case"daily":{let a=o.days.find(c=>c.inMonth);n?a=o.days.find(c=>c.day===n&&c.inMonth)||a:s&&(a=o.days.find(c=>c.week===s&&c.inMonth));const l=o.weeks[a.week-1];o.viewWeeks=[l],o.viewDays=[a],o.week=a.week,o.weekTitle=l.title,o.day=a.day,o.dayTitle=a.ariaLabel,o.title=o.dayTitle;break}case"weekly":{o.week=s||1;const a=o.weeks[o.week-1];o.viewWeeks=[a],o.viewDays=a.days,o.weekTitle=a.title,o.title=o.weekTitle;break}default:{o.title=o.monthTitle,o.viewWeeks=o.weeks.slice(0,r?o.monthComps.numWeeks:void 0),o.viewDays=o.days;break}}return o}class ow{constructor(t,n,s){bt(this,"keys",[]),bt(this,"store",{}),this.size=t,this.createKey=n,this.createItem=s}get(...t){const n=this.createKey(...t);return this.store[n]}getOrSet(...t){const n=this.createKey(...t);if(this.store[n])return this.store[n];const s=this.createItem(...t);if(this.keys.length>=this.size){const i=this.keys.shift();i!=null&&delete this.store[i]}return this.keys.push(n),this.store[n]=s,s}}class ko{constructor(t,n=new _h){bt(this,"order"),bt(this,"locale"),bt(this,"start",null),bt(this,"end",null),bt(this,"repeat",null);var s;this.locale=n;const{start:i,end:r,span:o,order:a,repeat:l}=t;bp(i)&&(this.start=n.getDateParts(i)),bp(r)?this.end=n.getDateParts(r):this.start!=null&&o&&(this.end=n.getDateParts(hn(this.start.date,o-1))),this.order=a??0,l&&(this.repeat=new yh({from:(s=this.start)==null?void 0:s.date,...l},{locale:this.locale}))}static fromMany(t,n){return(bs(t)?t:[t]).filter(s=>s).map(s=>ko.from(s,n))}static from(t,n){if(t instanceof ko)return t;const s={start:null,end:null};return t!=null&&(bs(t)?(s.start=t[0]??null,s.end=t[1]??null):Fr(t)?Object.assign(s,t):(s.start=t,s.end=t)),s.start!=null&&(s.start=new Date(s.start)),s.end!=null&&(s.end=new Date(s.end)),new ko(s,n)}get opts(){const{order:t,locale:n}=this;return{order:t,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:t,end:n}=this;return t&&n&&t.year===n.year&&t.month===n.month&&t.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(t){var n,s;return((n=this.start)==null?void 0:n.dayIndex)===t.dayIndex||!!((s=this.repeat)!=null&&s.passes(t))}intersectsDay(t){return this.intersectsDayRange(t,t)}intersectsRange(t){var n,s;return this.intersectsDayRange(((n=t.start)==null?void 0:n.dayIndex)??-1/0,((s=t.end)==null?void 0:s.dayIndex)??1/0)}intersectsDayRange(t,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<t)}}class HK{constructor(){bt(this,"records",{})}render(t,n,s){var i,r,o,a;let l=null;const c=s[0].dayIndex,u=s[s.length-1].dayIndex;return n.hasRepeat?s.forEach(d=>{var f,p;if(n.startsOnDay(d)){const m=n.daySpan<1/0?n.daySpan:1;l={startDay:d.dayIndex,startTime:((f=n.start)==null?void 0:f.time)??0,endDay:d.dayIndex+m-1,endTime:((p=n.end)==null?void 0:p.time)??wu},this.getRangeRecords(t).push(l)}}):n.intersectsDayRange(c,u)&&(l={startDay:((i=n.start)==null?void 0:i.dayIndex)??-1/0,startTime:((r=n.start)==null?void 0:r.time)??-1/0,endDay:((o=n.end)==null?void 0:o.dayIndex)??1/0,endTime:((a=n.end)==null?void 0:a.time)??1/0},this.getRangeRecords(t).push(l)),l}getRangeRecords(t){let n=this.records[t.key];return n||(n={ranges:[],data:t},this.records[t.key]=n),n.ranges}getCell(t,n){return this.getCells(n).find(r=>r.data.key===t)}cellExists(t,n){const s=this.records[t];return s==null?!1:s.ranges.some(i=>i.startDay<=n&&i.endDay>=n)}getCells(t){const n=Object.values(this.records),s=[],{dayIndex:i}=t;return n.forEach(({data:r,ranges:o})=>{o.filter(a=>a.startDay<=i&&a.endDay>=i).forEach(a=>{const l=i===a.startDay,c=i===a.endDay,u=l?a.startTime:0,d=new Date(t.startDate.getTime()+u),f=c?a.endTime:wu,p=new Date(t.endDate.getTime()+f),m=u===0&&f===wu,_=r.order||0;s.push({...a,data:r,onStart:l,onEnd:c,startTime:u,startDate:d,endTime:f,endDate:p,allDay:m,order:_})})}),s.sort((r,o)=>r.order-o.order),s}}const ei={ar:{dow:7,L:"D/‏M/‏YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYY年M月D日"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};ei.en=ei["en-US"];ei.es=ei["es-ES"];ei.no=ei.nb;ei.zh=ei["zh-CN"];const zK=Object.entries(ei).reduce((e,[t,{dow:n,L:s}])=>(e[t]={id:t,firstDayOfWeek:n,masks:{L:s}},e),{}),WK="MMMM YYYY",YK="W",qK="MMM",KK="h A",GK=["L","YYYY-MM-DD","YYYY/MM/DD"],XK=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],QK=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],JK=["h:mm A"],ZK=["HH:mm"],tG="WWW, MMM D, YYYY",eG=["L","YYYY-MM-DD","YYYY/MM/DD"],nG="iso",sG="YYYY-MM-DDTHH:mm:ss.SSSZ",iG={title:WK,weekdays:YK,navMonths:qK,hours:KK,input:GK,inputDateTime:XK,inputDateTime24hr:QK,inputTime:JK,inputTime24hr:ZK,dayPopover:tG,data:eG,model:nG,iso:sG},rG=300,oG=60,aG=80,lG={maxSwipeTime:rG,minHorizontalSwipeDistance:oG,maxVerticalSwipeDistance:aG},cG={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:lG,masks:iG,locales:zK,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},Tp=Ko(cG),uG=K(()=>P8(Tp.locales,e=>(e.masks=hh(e.masks,Tp.masks),e))),jl=e=>typeof window<"u"&&WS(window.__vcalendar__,e)?Er(window.__vcalendar__,e):Er(Tp,e),hG=12,dG=5;function fG(e,t){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let s;Ws(e)?s=e:WS(e,"id")&&(s=e.id),s=(s||n).toLowerCase();const i=Object.keys(t),r=l=>i.find(c=>c.toLowerCase()===l);s=r(s)||r(s.substring(0,2))||n;const o={...t["en-IE"],...t[s],id:s,monthCacheSize:hG,pageCacheSize:dG};return Fr(e)?hh(e,o):o}class _h{constructor(t=void 0,n){bt(this,"id"),bt(this,"daysInWeek"),bt(this,"firstDayOfWeek"),bt(this,"masks"),bt(this,"timezone"),bt(this,"hourLabels"),bt(this,"dayNames"),bt(this,"dayNamesShort"),bt(this,"dayNamesShorter"),bt(this,"dayNamesNarrow"),bt(this,"monthNames"),bt(this,"monthNamesShort"),bt(this,"relativeTimeNames"),bt(this,"amPm",["am","pm"]),bt(this,"monthCache"),bt(this,"pageCache");const{id:s,firstDayOfWeek:i,masks:r,monthCacheSize:o,pageCacheSize:a}=fG(t,uG.value);this.monthCache=new ow(o,VG,$G),this.pageCache=new ow(a,XS,UK),this.id=s,this.daysInWeek=Ge,this.firstDayOfWeek=qq(i,1,Ge),this.masks=r,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=gf("long",this.id),this.dayNamesShort=gf("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(l=>l.substring(0,2)),this.dayNamesNarrow=gf("narrow",this.id),this.monthNames=dw("long",this.id),this.monthNamesShort=dw("short",this.id),this.relativeTimeNames=UG(this.id)}formatDate(t,n){return YG(t,n,this)}parseDate(t,n){return fw(t,n,this)}toDate(t,n={}){const s=new Date(NaN);let i=s;const{fillDate:r,mask:o,patch:a,rules:l}=n;if(Is(t)?(n.type="number",i=new Date(+t)):Ws(t)?(n.type="string",i=t?fw(t,o||"iso",this):s):bp(t)?(n.type="date",i=new Date(t.getTime())):MG(t)&&(n.type="object",i=this.getDateFromParts(t)),i&&(a||l)){let c=this.getDateParts(i);if(a&&r!=null){const u=this.getDateParts(this.toDate(r));c=this.getDateParts(this.toDate({...u,...YS(c,SG[a])}))}l&&(c=WG(c,l)),i=this.getDateFromParts(c)}return i||s}toDateOrNull(t,n={}){const s=this.toDate(t,n);return isNaN(s.getTime())?null:s}fromDate(t,{type:n,mask:s}={}){switch(n){case"number":return t?t.getTime():NaN;case"string":return t?this.formatDate(t,s||"iso"):"";case"object":return t?this.getDateParts(t):null;default:return t?new Date(t):null}}range(t){return ko.from(t,this)}ranges(t){return ko.fromMany(t,this)}getDateParts(t){return NG(t,this)}getDateFromParts(t){return aA(t,this.timezone)}getDateFromParams(t,n,s,i,r,o,a){return this.getDateFromParts({year:t,month:n,day:s,hours:i,minutes:r,seconds:o,milliseconds:a})}getPage(t){const n=this.pageCache.getOrSet(t,this);return jK(t,n)}getMonthParts(t,n){const{firstDayOfWeek:s}=this;return this.monthCache.getOrSet(t,n,s)}getThisMonthParts(){const t=new Date;return this.getMonthParts(t.getMonth()+1,t.getFullYear())}getPrevMonthParts(t,n){return t===1?this.getMonthParts(12,n-1):this.getMonthParts(t-1,n)}getNextMonthParts(t,n){return t===12?this.getMonthParts(1,n+1):this.getMonthParts(t+1,n)}getHourLabels(){return BG().map(t=>this.formatDate(t,this.masks.hours))}getDayId(t){return this.formatDate(t,"YYYY-MM-DD")}}var go=(e=>(e.Any="any",e.All="all",e))(go||{}),QS=(e=>(e.Days="days",e.Weeks="weeks",e.Months="months",e.Years="years",e))(QS||{}),JS=(e=>(e.Days="days",e.Weekdays="weekdays",e.Weeks="weeks",e.Months="months",e.Years="years",e))(JS||{}),ZS=(e=>(e.OrdinalWeekdays="ordinalWeekdays",e))(ZS||{});class pG{constructor(t,n,s){bt(this,"validated",!0),this.type=t,this.interval=n,this.from=s,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(t){if(!this.validated)return!0;const{date:n}=t;switch(this.type){case"days":return Tm(this.from.date,n)%this.interval===0;case"weeks":return OG(this.from.date,n)%this.interval===0;case"months":return LG(this.from.date,n)%this.interval===0;case"years":return oA(this.from.date,n)%this.interval===0;default:return!1}}}class ua{constructor(t,n,s,i){bt(this,"components",[]),this.type=t,this.validator=s,this.getter=i,this.components=this.normalizeComponents(n)}static create(t,n){switch(t){case"days":return new gG(n);case"weekdays":return new mG(n);case"weeks":return new vG(n);case"months":return new _G(n);case"years":return new yG(n)}}normalizeComponents(t){if(this.validator(t))return[t];if(!bs(t))return[];const n=[];return t.forEach(s=>{if(!this.validator(s)){console.error(`Component value ${s} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(s)}),n}passes(t){return this.getter(t).some(i=>this.components.includes(i))}}class gG extends ua{constructor(t){super("days",t,EG,({day:n,dayFromEnd:s})=>[n,-s])}}class mG extends ua{constructor(t){super("weekdays",t,Ip,({weekday:n})=>[n])}}class vG extends ua{constructor(t){super("weeks",t,TG,({week:n,weekFromEnd:s})=>[n,-s])}}class _G extends ua{constructor(t){super("months",t,IG,({month:n})=>[n])}}class yG extends ua{constructor(t){super("years",t,Is,({year:n})=>[n])}}class bG{constructor(t,n){bt(this,"components"),this.type=t,this.components=this.normalizeComponents(n)}normalizeArrayConfig(t){const n=[];return t.forEach((s,i)=>{if(Is(s)){if(i===0)return;if(!aw(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!Ip(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else bs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}normalizeComponents(t){const n=[];return t.forEach((s,i)=>{if(Is(s)){if(i===0)return;if(!aw(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!Ip(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else bs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}passes(t){const{weekday:n,weekdayOrdinal:s,weekdayOrdinalFromEnd:i}=t;return this.components.some(([r,o])=>(r===s||r===-i)&&n===o)}}class wG{constructor(t){bt(this,"type","function"),bt(this,"validated",!0),this.fn=t,Kr(t)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(t){return this.validated?this.fn(t):!0}}class yh{constructor(t,n={},s){bt(this,"validated",!0),bt(this,"config"),bt(this,"type",go.Any),bt(this,"from"),bt(this,"until"),bt(this,"rules",[]),bt(this,"locale",new _h),this.parent=s,n.locale&&(this.locale=n.locale),this.config=t,Kr(t)?(this.type=go.All,this.rules=[new wG(t)]):bs(t)?(this.type=go.Any,this.rules=t.map(i=>new yh(i,n,this))):Fr(t)?(this.type=go.All,this.from=t.from?this.locale.getDateParts(t.from):s==null?void 0:s.from,this.until=t.until?this.locale.getDateParts(t.until):s==null?void 0:s.until,this.rules=this.getObjectRules(t)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(t){const n=[];if(t.every&&(Ws(t.every)&&(t.every=[1,`${t.every}s`]),bs(t.every))){const[s=1,i=QS.Days]=t.every;n.push(new pG(i,s,this.from))}return Object.values(JS).forEach(s=>{s in t&&n.push(ua.create(s,t[s]))}),Object.values(ZS).forEach(s=>{s in t&&n.push(new bG(s,t[s]))}),t.on!=null&&(bs(t.on)||(t.on=[t.on]),n.push(new yh(t.on,{locale:this.locale},this.parent))),n}passes(t){return this.validated?this.from&&t.dayIndex<=this.from.dayIndex||this.until&&t.dayIndex>=this.until.dayIndex?!1:this.type===go.Any?this.rules.some(n=>n.passes(t)):this.rules.every(n=>n.passes(t)):!0}}function EG(e){return Is(e)?e>=1&&e<=31:!1}function Ip(e){return Is(e)?e>=1&&e<=7:!1}function TG(e){return Is(e)?e>=-6&&e<=-1||e>=1&&e<=6:!1}function IG(e){return Is(e)?e>=1&&e<=12:!1}function aw(e){return!(!Is(e)||e<-5||e>5||e===0)}const SG={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},Ge=7,AG=6,tA=1e3,eA=tA*60,nA=eA*60,wu=nA*24,xG=[31,28,31,30,31,30,31,31,30,31,30,31],CG=["L","iso"],PG={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},sA=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,kG=/\[([^]*?)\]/gm,lw={D(e){return e.day},DD(e){return ne(e.day,2)},d(e){return e.weekday-1},dd(e){return ne(e.weekday-1,2)},W(e,t){return t.dayNamesNarrow[e.weekday-1]},WW(e,t){return t.dayNamesShorter[e.weekday-1]},WWW(e,t){return t.dayNamesShort[e.weekday-1]},WWWW(e,t){return t.dayNames[e.weekday-1]},M(e){return e.month},MM(e){return ne(e.month,2)},MMM(e,t){return t.monthNamesShort[e.month-1]},MMMM(e,t){return t.monthNames[e.month-1]},YY(e){return String(e.year).substr(2)},YYYY(e){return ne(e.year,4)},h(e){return e.hours%12||12},hh(e){return ne(e.hours%12||12,2)},H(e){return e.hours},HH(e){return ne(e.hours,2)},m(e){return e.minutes},mm(e){return ne(e.minutes,2)},s(e){return e.seconds},ss(e){return ne(e.seconds,2)},S(e){return Math.round(e.milliseconds/100)},SS(e){return ne(Math.round(e.milliseconds/10),2)},SSS(e){return ne(e.milliseconds,3)},a(e,t){return e.hours<12?t.amPm[0]:t.amPm[1]},A(e,t){return e.hours<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${ne(Math.floor(Math.abs(t)/60),2)}`},ZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${ne(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)}`},ZZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${ne(Math.floor(Math.abs(t)/60),2)}:${ne(Math.abs(t)%60,2)}`}},pi=/\d\d?/,DG=/\d{3}/,RG=/\d{4}/,Ra=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,cw=()=>{},uw=e=>(t,n,s)=>{const i=s[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(t.month=i)},ae={D:[pi,(e,t)=>{e.day=t}],Do:[new RegExp(pi.source+Ra.source),(e,t)=>{e.day=parseInt(t,10)}],d:[pi,cw],W:[Ra,cw],M:[pi,(e,t)=>{e.month=t-1}],MMM:[Ra,uw("monthNamesShort")],MMMM:[Ra,uw("monthNames")],YY:[pi,(e,t)=>{const s=+new Date().getFullYear().toString().substr(0,2);e.year=+`${t>68?s-1:s}${t}`}],YYYY:[RG,(e,t)=>{e.year=t}],S:[/\d/,(e,t)=>{e.milliseconds=t*100}],SS:[/\d{2}/,(e,t)=>{e.milliseconds=t*10}],SSS:[DG,(e,t)=>{e.milliseconds=t}],h:[pi,(e,t)=>{e.hours=t}],m:[pi,(e,t)=>{e.minutes=t}],s:[pi,(e,t)=>{e.seconds=t}],a:[Ra,(e,t,n)=>{const s=t.toLowerCase();s===n.amPm[0]?e.isPm=!1:s===n.amPm[1]&&(e.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(e,t)=>{t==="Z"&&(t="+00:00");const n=`${t}`.match(/([+-]|\d\d)/gi);if(n){const s=+n[1]*60+parseInt(n[2],10);e.timezoneOffset=n[0]==="+"?s:-s}}]};ae.DD=ae.D;ae.dd=ae.d;ae.WWWW=ae.WWW=ae.WW=ae.W;ae.MM=ae.M;ae.mm=ae.m;ae.hh=ae.H=ae.HH=ae.h;ae.ss=ae.s;ae.A=ae.a;ae.ZZZZ=ae.ZZZ=ae.ZZ=ae.Z;function iA(e,t){return(Tr(e)&&e||[Ws(e)&&e||"YYYY-MM-DD"]).map(n=>CG.reduce((s,i)=>s.replace(i,t.masks[i]||""),n))}function MG(e){return Fr(e)&&"year"in e&&"month"in e&&"day"in e}function hw(e,t=1){const n=e.getDay()+1,s=n>=t?t-n:-(7-(t-n));return hn(e,s)}function rA(e,t,n){const s=Date.UTC(e,t-1,n);return Tm(new Date(0),new Date(s))}function Tm(e,t){return Math.round((t.getTime()-e.getTime())/wu)}function OG(e,t){return Math.ceil(Tm(hw(e),hw(t))/7)}function oA(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}function LG(e,t){return oA(e,t)*12+(t.getMonth()-e.getMonth())}function aA(e,t=""){const n=new Date,{year:s=n.getFullYear(),month:i=n.getMonth()+1,day:r=n.getDate(),hours:o=0,minutes:a=0,seconds:l=0,milliseconds:c=0}=e;if(t){const u=`${ne(s,4)}-${ne(i,2)}-${ne(r,2)}T${ne(o,2)}:${ne(a,2)}:${ne(l,2)}.${ne(c,3)}`;return uK(u,{timeZone:t})}return new Date(s,i-1,r,o,a,l,c)}function NG(e,t){let n=new Date(e.getTime());t.timezone&&(n=new Date(e.toLocaleString("en-US",{timeZone:t.timezone})),n.setMilliseconds(e.getMilliseconds()));const s=n.getMilliseconds(),i=n.getSeconds(),r=n.getMinutes(),o=n.getHours(),a=s+i*tA+r*eA+o*nA,l=n.getMonth()+1,c=n.getFullYear(),u=t.getMonthParts(l,c),d=n.getDate(),f=u.numDays-d+1,p=n.getDay()+1,m=Math.floor((d-1)/7+1),_=Math.floor((u.numDays-d)/7+1),y=Math.ceil((d+Math.abs(u.firstWeekday-u.firstDayOfWeek))/7),T=u.numWeeks-y+1,k=u.weeknumbers[y],D=rA(c,l,d);return{milliseconds:s,seconds:i,minutes:r,hours:o,time:a,day:d,dayFromEnd:f,weekday:p,weekdayOrdinal:m,weekdayOrdinalFromEnd:_,week:y,weekFromEnd:T,weeknumber:k,month:l,year:c,date:n,dateTime:n.getTime(),dayIndex:D,timezoneOffset:0,isValid:!0}}function VG(e,t,n){return`${t}-${e}-${n}`}function $G(e,t,n){const s=t%4===0&&t%100!==0||t%400===0,i=new Date(t,e-1,1),r=i.getDay()+1,o=e===2&&s?29:xG[e-1],a=n-1,l=TK(i,{weekStartsOn:a}),c=[],u=[];for(let d=0;d<l;d++){const f=hn(i,d*7);c.push(xK(f,{weekStartsOn:a})),u.push(DK(f))}return{firstDayOfWeek:n,firstDayOfMonth:i,inLeapYear:s,firstWeekday:r,numDays:o,numWeeks:l,month:e,year:t,weeknumbers:c,isoWeeknumbers:u}}function FG(){const e=[];for(let i=0;i<Ge;i++)e.push(aA({year:2020,month:1,day:5+i,hours:12}));return e}function gf(e,t=void 0){const n=new Intl.DateTimeFormat(t,{weekday:e});return FG().map(s=>n.format(s))}function BG(){const e=[];for(let t=0;t<=24;t++)e.push(new Date(2e3,0,1,t));return e}function UG(e=void 0){const t=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(e);return t.reduce((s,i)=>{const r=n.formatToParts(100,i);return s[i]=r[1].unit,s},{})}function lA(){const e=[];for(let t=0;t<12;t++)e.push(new Date(2e3,t,15));return e}function dw(e,t=void 0){const n=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return lA().map(s=>n.format(s))}function jG(e,t,n){return Is(t)?t===e:bs(t)?t.includes(e):Kr(t)?t(e,n):!(t.min!=null&&t.min>e||t.max!=null&&t.max<e||t.interval!=null&&e%t.interval!==0)}function HG(e,t,n){const s=[],[i,r,o]=t;for(let a=i;a<=r;a++)(n==null||jG(a,n,e))&&s.push({value:a,label:ne(a,o)});return s}function zG(e,t,n,s){const r=HG(e,t,s).reduce((o,a)=>{if(a.disabled)return o;if(isNaN(o))return a.value;const l=Math.abs(o-n);return Math.abs(a.value-n)<l?a.value:o},NaN);return isNaN(r)?n:r}function WG(e,t){const n={...e};return Object.entries(t).forEach(([s,i])=>{const r=PG[s],o=e[s];n[s]=zG(e,r,o,i)}),n}function fw(e,t,n){return iA(t,n).map(i=>{if(typeof i!="string")throw new Error("Invalid mask");let r=e;if(r.length>1e3)return!1;let o=!0;const a={};if(i.replace(sA,u=>{if(ae[u]){const d=ae[u],f=r.search(d[0]);~f?r.replace(d[0],p=>(d[1](a,p,n),r=r.substr(f+p.length),p)):o=!1}return ae[u]?"":u.slice(1,u.length-1)}),!o)return!1;const l=new Date;a.hours!=null&&(a.isPm===!0&&+a.hours!=12?a.hours=+a.hours+12:a.isPm===!1&&+a.hours==12&&(a.hours=0));let c;return a.timezoneOffset!=null?(a.minutes=+(a.minutes||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hours||0,a.minutes||0,a.seconds||0,a.milliseconds||0))):c=n.getDateFromParts({year:a.year||l.getFullYear(),month:(a.month||0)+1,day:a.day||1,hours:a.hours||0,minutes:a.minutes||0,seconds:a.seconds||0,milliseconds:a.milliseconds||0}),c}).find(i=>i)||new Date(e)}function YG(e,t,n){if(e==null)return"";let s=iA(t,n)[0];/Z$/.test(s)&&(n.timezone="utc");const i=[];s=s.replace(kG,(o,a)=>(i.push(a),"??"));const r=n.getDateParts(e);return s=s.replace(sA,o=>o in lw?lw[o](r,n):o.slice(1,o.length-1)),s.replace(/\?\?/g,()=>i.shift())}let qG=0;class cA{constructor(t,n,s){bt(this,"key",""),bt(this,"hashcode",""),bt(this,"highlight",null),bt(this,"content",null),bt(this,"dot",null),bt(this,"bar",null),bt(this,"event",null),bt(this,"popover",null),bt(this,"customData",null),bt(this,"ranges"),bt(this,"hasRanges",!1),bt(this,"order",0),bt(this,"pinPage",!1),bt(this,"maxRepeatSpan",0),bt(this,"locale");const{dates:i}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},t);this.key||(this.key=++qG),this.locale=s,n.normalizeGlyphs(this),this.ranges=s.ranges(i??[]),this.hasRanges=!!Tr(this.ranges),this.maxRepeatSpan=this.ranges.filter(r=>r.hasRepeat).map(r=>r.daySpan).reduce((r,o)=>Math.max(r,o),0)}intersectsRange({start:t,end:n}){if(t==null||n==null)return!1;const s=this.ranges.filter(o=>!o.hasRepeat);for(const o of s)if(o.intersectsDayRange(t.dayIndex,n.dayIndex))return!0;const i=this.ranges.filter(o=>o.hasRepeat);if(!i.length)return!1;let r=t;for(this.maxRepeatSpan>1&&(r=this.locale.getDateParts(hn(r.date,-this.maxRepeatSpan)));r.dayIndex<=n.dayIndex;){for(const o of i)if(o.startsOnDay(r))return!0;r=this.locale.getDateParts(hn(r.date,1))}return!1}}function pw(e){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:e}))}function bh(e){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:e}))}function KG(e){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:e}))}function GG(e){const{visibility:t}=e,n=t==="click",s=t==="hover",i=t==="hover-focus",r=t==="focus";e.autoHide=!n;let o=!1,a=!1;const l=m=>{n&&(KG({...e,target:e.target||m.currentTarget}),m.stopPropagation())},c=m=>{o||(o=!0,(s||i)&&pw({...e,target:e.target||m.currentTarget}))},u=()=>{o&&(o=!1,(s||i&&!a)&&bh(e))},d=m=>{a||(a=!0,(r||i)&&pw({...e,target:e.target||m.currentTarget}))},f=m=>{a&&!yu(m.currentTarget,m.relatedTarget)&&(a=!1,(r||i&&!o)&&bh(e))},p={};switch(e.visibility){case"click":p.click=l;break;case"hover":p.mousemove=c,p.mouseleave=u;break;case"focus":p.focusin=d,p.focusout=f;break;case"hover-focus":p.mousemove=c,p.mouseleave=u,p.focusin=d,p.focusout=f;break}return p}const gw=e=>{const t=dh(e);if(t==null)return;const n=t.popoverHandlers;!n||!n.length||(n.forEach(s=>s()),delete t.popoverHandlers)},mw=(e,t)=>{const n=dh(e);if(n==null)return;const s=[],i=GG(t);Object.entries(i).forEach(([r,o])=>{s.push(Si(n,r,o))}),n.popoverHandlers=s},uA={mounted(e,t){const{value:n}=t;n&&mw(e,n)},updated(e,t){const{oldValue:n,value:s}=t,i=n==null?void 0:n.visibility,r=s==null?void 0:s.visibility;i!==r&&(i&&(gw(e),r||bh(n)),r&&mw(e,s))},unmounted(e){gw(e)}},XG=(e,t,{maxSwipeTime:n,minHorizontalSwipeDistance:s,maxVerticalSwipeDistance:i})=>{if(!e||!e.addEventListener||!Kr(t))return null;let r=0,o=0,a=null,l=!1;function c(d){const f=d.changedTouches[0];r=f.screenX,o=f.screenY,a=new Date().getTime(),l=!0}function u(d){if(!l||!a)return;l=!1;const f=d.changedTouches[0],p=f.screenX-r,m=f.screenY-o;if(new Date().getTime()-a<n&&Math.abs(p)>=s&&Math.abs(m)<=i){const y={toLeft:!1,toRight:!1};p<0?y.toLeft=!0:y.toRight=!0,t(y)}}return Si(e,"touchstart",c,{passive:!0}),Si(e,"touchend",u,{passive:!0}),()=>{Ii(e,"touchstart",c),Ii(e,"touchend",u)}},Eu={},QG=(e,t=10)=>{Eu[e]=Date.now()+t},JG=(e,t)=>{if(e in Eu){const n=Eu[e];if(Date.now()<n)return;delete Eu[e]}t()};function hA(){return typeof window<"u"}function ZG(e){return hA()&&e in window}function tX(e){const t=Nt(!1),n=K(()=>t.value?"dark":"light");let s,i;function r(p){t.value=p.matches}function o(){ZG("matchMedia")&&(s=window.matchMedia("(prefers-color-scheme: dark)"),s.addEventListener("change",r),t.value=s.matches)}function a(){const{selector:p=":root",darkClass:m="dark"}=e.value,_=document.querySelector(p);t.value=_.classList.contains(m)}function l(p){const{selector:m=":root",darkClass:_="dark"}=p;if(hA()&&m&&_){const y=document.querySelector(m);y&&(i=new MutationObserver(a),i.observe(y,{attributes:!0,attributeFilter:["class"]}),t.value=y.classList.contains(_))}}function c(){d();const p=typeof e.value;p==="string"&&e.value.toLowerCase()==="system"?o():p==="object"?l(e.value):t.value=!!e.value}const u=dn(()=>e.value,()=>c(),{immediate:!0});function d(){s&&(s.removeEventListener("change",r),s=void 0),i&&(i.disconnect(),i=void 0)}function f(){d(),u()}return Go(()=>f()),{isDark:t,displayMode:n,cleanup:f}}const eX=["base","start","end","startEnd"],nX=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],sX={base:{},start:{},end:{}};function Im(e,t,n=sX){let s=e,i={};t===!0||Ws(t)?(s=Ws(t)?t:s,i={...n}):Fr(t)&&(G0(t,eX)?i={...t}:i={base:{...t},start:{...t},end:{...t}});const r=hh(i,{start:i.startEnd,end:i.startEnd},n);return Object.entries(r).forEach(([o,a])=>{let l=s;a===!0||Ws(a)?(l=Ws(a)?a:l,r[o]={color:l}):Fr(a)&&(G0(a,nX)?r[o]={...a}:r[o]={}),hh(r[o],{color:l})}),r}class iX{constructor(){bt(this,"type","highlight")}normalizeConfig(t,n){return Im(t,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(t){t.highlights=[],t.content||(t.content=[])}render({data:t,onStart:n,onEnd:s},i){const{key:r,highlight:o}=t;if(!o)return;const{highlights:a}=i,{base:l,start:c,end:u}=o;n&&s?a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]}):n?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]})):s?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...u,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${u.color}`,class:[`vc-highlight vc-highlight-bg-${u.fillMode}`,u.class],contentClass:[`vc-attr vc-highlight-content-${u.fillMode} vc-${u.color}`,u.contentClass]})):a.push({...l,key:`${r}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${l.fillMode}`,l.class],contentClass:[`vc-attr vc-highlight-content-${l.fillMode} vc-${l.color}`,l.contentClass]})}}class Sm{constructor(t,n){bt(this,"type",""),bt(this,"collectionType",""),this.type=t,this.collectionType=n}normalizeConfig(t,n){return Im(t,n)}prepareRender(t){t[this.collectionType]=[]}render({data:t,onStart:n,onEnd:s},i){const{key:r}=t,o=t[this.type];if(!r||!o)return;const a=i[this.collectionType],{base:l,start:c,end:u}=o;n?a.push({...c,key:r,class:[`vc-${this.type} vc-${this.type}-start vc-${c.color} vc-attr`,c.class]}):s?a.push({...u,key:r,class:[`vc-${this.type} vc-${this.type}-end vc-${u.color} vc-attr`,u.class]}):a.push({...l,key:r,class:[`vc-${this.type} vc-${this.type}-base vc-${l.color} vc-attr`,l.class]})}}class rX extends Sm{constructor(){super("content","content")}normalizeConfig(t,n){return Im("base",n)}}class oX extends Sm{constructor(){super("dot","dots")}}class aX extends Sm{constructor(){super("bar","bars")}}class lX{constructor(t){bt(this,"color"),bt(this,"renderers",[new rX,new iX,new oX,new aX]),this.color=t}normalizeGlyphs(t){this.renderers.forEach(n=>{const s=n.type;t[s]!=null&&(t[s]=n.normalizeConfig(this.color,t[s]))})}prepareRender(t={}){return this.renderers.forEach(n=>{n.prepareRender(t)}),t}render(t,n){this.renderers.forEach(s=>{s.render(t,n)})}}const dA=Symbol("__vc_base_context__"),cX={color:{type:String,default:()=>jl("color")},isDark:{type:[Boolean,String,Object],default:()=>jl("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function uX(e){const t=K(()=>e.color??""),n=K(()=>e.isDark??!1),{displayMode:s}=tX(n),i=K(()=>new lX(t.value)),r=K(()=>{if(e.locale instanceof _h)return e.locale;const f=Fr(e.locale)?e.locale:{id:e.locale,firstDayOfWeek:e.firstDayOfWeek,masks:e.masks};return new _h(f,e.timezone)}),o=K(()=>r.value.masks),a=K(()=>e.minDate),l=K(()=>e.maxDate),c=K(()=>{const f=e.disabledDates?[...e.disabledDates]:[];return a.value!=null&&f.push({start:null,end:hn(r.value.toDate(a.value),-1)}),l.value!=null&&f.push({start:hn(r.value.toDate(l.value),1),end:null}),r.value.ranges(f)}),u=K(()=>new cA({key:"disabled",dates:c.value,order:100},i.value,r.value)),d={color:t,isDark:n,displayMode:s,theme:i,locale:r,masks:o,minDate:a,maxDate:l,disabledDates:c,disabledAttribute:u};return Di(dA,d),d}function hX(e){return bn(dA,()=>uX(e),!0)}function fA(e){return`__vc_slot_${e}__`}function dX(e,t={}){Object.keys(e).forEach(n=>{Di(fA(t[n]??n),e[n])})}function pA(e){return bn(fA(e),null)}const fX={...cX,view:{type:String,default:"monthly",validator(e){return["daily","weekly","monthly"].includes(e)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>jl("titlePosition")},navVisibility:{type:String,default:()=>jl("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},pX=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],gA=Symbol("__vc_calendar_context__");function gX(e,{slots:t,emit:n}){const s=Nt(null),i=Nt(null),r=Nt(new Date().getDate()),o=Nt(!1),a=Nt(Symbol()),l=Nt(Symbol()),c=Nt(e.view),u=Nt([]),d=Nt("");let f=null,p=null;dX(t);const{theme:m,color:_,displayMode:y,locale:T,masks:k,minDate:D,maxDate:R,disabledAttribute:O,disabledDates:N}=hX(e),I=K(()=>e.rows*e.columns),b=K(()=>e.step||I.value),w=K(()=>zS(u.value)??null),x=K(()=>vo(u.value)??null),C=K(()=>e.minPage||(D.value?et(D.value):null)),A=K(()=>e.maxPage||(R.value?et(R.value):null)),S=K(()=>e.navVisibility),dt=K(()=>!!e.showWeeknumbers),J=K(()=>!!e.showIsoWeeknumbers),at=K(()=>c.value==="monthly"),ot=K(()=>c.value==="weekly"),gt=K(()=>c.value==="daily"),Vt=()=>{o.value=!0,n("transition-start")},W=()=>{o.value=!1,n("transition-end"),f&&(f.resolve(!0),f=null)},St=(H,tt,xt=c.value)=>GS(H,tt,xt,T.value),et=H=>VK(H,c.value,T.value),kt=H=>{!O.value||!Z.value||(H.isDisabled=Z.value.cellExists(O.value.key,H.dayIndex))},Mt=H=>{H.isFocusable=H.inMonth&&H.day===r.value},qt=(H,tt)=>{for(const xt of H)for(const Gt of xt.days)if(tt(Gt)===!1)return},jt=K(()=>u.value.reduce((H,tt)=>(H.push(...tt.viewDays),H),[])),F=K(()=>{const H=[];return(e.attributes||[]).forEach((tt,xt)=>{!tt||!tt.dates||H.push(new cA({...tt,order:tt.order||0},m.value,T.value))}),O.value&&H.push(O.value),H}),it=K(()=>Tr(F.value)),Z=K(()=>{const H=new HK;return F.value.forEach(tt=>{tt.ranges.forEach(xt=>{H.render(tt,xt,jt.value)})}),H}),lt=K(()=>jt.value.reduce((H,tt)=>(H[tt.dayIndex]={day:tt,cells:[]},H[tt.dayIndex].cells.push(...Z.value.getCells(tt)),H),{})),Ot=(H,tt)=>{const xt=e.showWeeknumbers||e.showIsoWeeknumbers;return xt==null?"":h8(xt)?xt?"left":"":xt.startsWith("right")?tt>1?"right":xt:H>1?"left":xt},Wt=()=>{var H,tt;if(!it.value)return null;const xt=F.value.find(gn=>gn.pinPage)||F.value[0];if(!xt||!xt.hasRanges)return null;const[Gt]=xt.ranges,Se=((H=Gt.start)==null?void 0:H.date)||((tt=Gt.end)==null?void 0:tt.date);return Se?et(Se):null},P=()=>{if(hs(w.value))return w.value;const H=Wt();return hs(H)?H:et(new Date)},M=(H,tt={})=>{const{view:xt=c.value,position:Gt=1,force:Se}=tt,gn=Gt>0?1-Gt:-(I.value+Gt);let kn=St(H,gn,xt),Cs=St(kn,I.value-1,xt);return Se||(Ep(kn,C.value)?kn=C.value:vh(Cs,A.value)&&(kn=St(A.value,1-I.value)),Cs=St(kn,I.value-1)),{fromPage:kn,toPage:Cs}},V=(H,tt,xt="")=>{if(xt==="none"||xt==="fade")return xt;if((H==null?void 0:H.view)!==(tt==null?void 0:tt.view))return"fade";const Gt=vh(tt,H),Se=Ep(tt,H);return!Gt&&!Se?"fade":xt==="slide-v"?Se?"slide-down":"slide-up":Se?"slide-right":"slide-left"},j=(H={})=>new Promise((tt,xt)=>{const{position:Gt=1,force:Se=!1,transition:gn}=H,kn=hs(H.page)?H.page:P(),{fromPage:Cs}=M(kn,{position:Gt,force:Se}),Yn=[];for(let er=0;er<I.value;er++){const Jr=St(Cs,er),Zr=er+1,ai=Math.ceil(Zr/e.columns),cc=e.rows-ai+1,De=Zr%e.columns||e.columns,ha=e.columns-De+1,nr=Ot(De,ha);Yn.push(T.value.getPage({...Jr,view:c.value,titlePosition:e.titlePosition,trimWeeks:e.trimWeeks,position:Zr,row:ai,rowFromEnd:cc,column:De,columnFromEnd:ha,showWeeknumbers:dt.value,showIsoWeeknumbers:J.value,weeknumberPosition:nr}))}d.value=V(u.value[0],Yn[0],gn),u.value=Yn,d.value&&d.value!=="none"?f={resolve:tt,reject:xt}:tt(!0)}),B=H=>{const tt=w.value??et(new Date);return St(tt,H)},z=(H,tt={})=>{const xt=hs(H)?H:et(H);return Object.assign(tt,M(xt,{...tt,force:!0})),BK(tt.fromPage,tt.toPage,c.value,T.value).map(Se=>$K(Se,C.value,A.value)).some(Se=>Se)},st=(H,tt={})=>z(B(H),tt),G=K(()=>st(-b.value)),X=K(()=>st(b.value)),Y=async(H,tt={})=>!tt.force&&!z(H,tt)?!1:(tt.fromPage&&!FK(tt.fromPage,w.value)&&(bh({id:a.value,hideDelay:0}),tt.view&&(QG("view",10),c.value=tt.view),await j({...tt,page:tt.fromPage,position:1,force:!0}),n("did-move",u.value)),!0),pt=(H,tt={})=>Y(B(H),tt),nt=()=>pt(-b.value),ht=()=>pt(b.value),yt=H=>{const tt=at.value?".in-month":"",xt=`.id-${T.value.getDayId(H)}${tt}`,Gt=`${xt}.vc-focusable, ${xt} .vc-focusable`,Se=s.value;if(Se){const gn=Se.querySelector(Gt);if(gn)return gn.focus(),!0}return!1},mt=async(H,tt={})=>yt(H)?!0:(await Y(H,tt),yt(H)),At=(H,tt)=>{r.value=H.day,n("dayclick",H,tt)},Ft=(H,tt)=>{n("daymouseenter",H,tt)},ke=(H,tt)=>{n("daymouseleave",H,tt)},Ee=(H,tt)=>{r.value=H.day,i.value=H,H.isFocused=!0,n("dayfocusin",H,tt)},ln=(H,tt)=>{i.value=null,H.isFocused=!1,n("dayfocusout",H,tt)},_e=(H,tt)=>{n("daykeydown",H,tt);const xt=H.noonDate;let Gt=null;switch(tt.key){case"ArrowLeft":{Gt=hn(xt,-1);break}case"ArrowRight":{Gt=hn(xt,1);break}case"ArrowUp":{Gt=hn(xt,-7);break}case"ArrowDown":{Gt=hn(xt,7);break}case"Home":{Gt=hn(xt,-H.weekdayPosition+1);break}case"End":{Gt=hn(xt,H.weekdayPositionFromEnd);break}case"PageUp":{tt.altKey?Gt=rw(xt,-1):Gt=mh(xt,-1);break}case"PageDown":{tt.altKey?Gt=rw(xt,1):Gt=mh(xt,1);break}}Gt&&(tt.preventDefault(),mt(Gt).catch())},is=H=>{const tt=i.value;tt!=null&&_e(tt,H)},tr=(H,tt)=>{n("weeknumberclick",H,tt)};j({page:e.initialPage,position:e.initialPagePosition}),Ss(()=>{!e.disablePageSwipe&&s.value&&(p=XG(s.value,({toLeft:H=!1,toRight:tt=!1})=>{H?ht():tt&&nt()},jl("touch")))}),Go(()=>{u.value=[],p&&p()}),dn(()=>T.value,()=>{j()}),dn(()=>I.value,()=>j()),dn(()=>e.view,()=>c.value=e.view),dn(()=>c.value,()=>{JG("view",()=>{j()}),n("update:view",c.value)}),dn(()=>r.value,()=>{qt(u.value,H=>Mt(H))}),y1(()=>{n("update:pages",u.value),qt(u.value,H=>{kt(H),Mt(H)})});const Ie={emit:n,containerRef:s,focusedDay:i,inTransition:o,navPopoverId:a,dayPopoverId:l,view:c,pages:u,transitionName:d,theme:m,color:_,displayMode:y,locale:T,masks:k,attributes:F,disabledAttribute:O,disabledDates:N,attributeContext:Z,days:jt,dayCells:lt,count:I,step:b,firstPage:w,lastPage:x,canMovePrev:G,canMoveNext:X,minPage:C,maxPage:A,isMonthly:at,isWeekly:ot,isDaily:gt,navVisibility:S,showWeeknumbers:dt,showIsoWeeknumbers:J,getDateAddress:et,canMove:z,canMoveBy:st,move:Y,moveBy:pt,movePrev:nt,moveNext:ht,onTransitionBeforeEnter:Vt,onTransitionAfterEnter:W,tryFocusDate:yt,focusDate:mt,onKeydown:is,onDayKeydown:_e,onDayClick:At,onDayMouseenter:Ft,onDayMouseleave:ke,onDayFocusin:Ee,onDayFocusout:ln,onWeeknumberClick:tr};return Di(gA,Ie),Ie}function Xr(){const e=bn(gA);if(e)return e;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const mX=on({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(e,{emit:t}){let n;const s=Nt();let i=null,r=null;const o=Ko({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function a(W){W&&(o.direction=W.split("-")[0])}function l({placement:W,options:St}){a(W||(St==null?void 0:St.placement))}const c=K(()=>({placement:o.placement,strategy:o.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:l},...o.modifiers||[]],onFirstUpdate:l})),u=K(()=>{const W=o.direction==="left"||o.direction==="right";let St="";if(o.placement){const et=o.placement.split("-");et.length>1&&(St=et[1])}return["start","top","left"].includes(St)?W?"top":"left":["end","bottom","right"].includes(St)?W?"bottom":"right":W?"middle":"center"});function d(){r&&(r.destroy(),r=null)}function f(){Cr(()=>{const W=dh(o.target);!W||!s.value||(r&&r.state.elements.reference!==W&&d(),r?r.update():r=t6(W,s.value,c.value))})}function p(W){Object.assign(o,Yq(W,"force"))}function m(W,St){clearTimeout(n),W>0?n=setTimeout(St,W):St()}function _(W){return!W||!r?!1:dh(W)===r.state.elements.reference}async function y(W={}){o.force||(W.force&&(o.force=!0),m(W.showDelay??e.showDelay,()=>{o.isVisible&&(o.force=!1),p({...W,isVisible:!0}),f()}))}function T(W={}){r&&(W.target&&!_(W.target)||o.force||(W.force&&(o.force=!0),m(W.hideDelay??e.hideDelay,()=>{o.isVisible||(o.force=!1),o.isVisible=!1})))}function k(W={}){W.target!=null&&(o.isVisible&&_(W.target)?T(W):y(W))}function D(W){if(!r)return;const St=r.state.elements.reference;if(!s.value||!St)return;const et=W.target;yu(s.value,et)||yu(St,et)||T({force:!0})}function R(W){(W.key==="Esc"||W.key==="Escape")&&T()}function O({detail:W}){!W.id||W.id!==e.id||y(W)}function N({detail:W}){!W.id||W.id!==e.id||T(W)}function I({detail:W}){!W.id||W.id!==e.id||k(W)}function b(){Si(document,"keydown",R),Si(document,"click",D),Si(document,"show-popover",O),Si(document,"hide-popover",N),Si(document,"toggle-popover",I)}function w(){Ii(document,"keydown",R),Ii(document,"click",D),Ii(document,"show-popover",O),Ii(document,"hide-popover",N),Ii(document,"toggle-popover",I)}function x(W){t("before-show",W)}function C(W){o.force=!1,t("after-show",W)}function A(W){t("before-hide",W)}function S(W){o.force=!1,d(),t("after-hide",W)}function dt(W){W.stopPropagation()}function J(){o.isHovered=!0,o.isInteractive&&["hover","hover-focus"].includes(o.visibility)&&y()}function at(){if(o.isHovered=!1,!r)return;const W=r.state.elements.reference;o.autoHide&&!o.isFocused&&(!W||W!==document.activeElement)&&["hover","hover-focus"].includes(o.visibility)&&T()}function ot(){o.isFocused=!0,o.isInteractive&&["focus","hover-focus"].includes(o.visibility)&&y()}function gt(W){["focus","hover-focus"].includes(o.visibility)&&(!W.relatedTarget||!yu(s.value,W.relatedTarget))&&(o.isFocused=!1,!o.isHovered&&o.autoHide&&T())}function Vt(){i!=null&&(i.disconnect(),i=null)}return dn(()=>s.value,W=>{Vt(),W&&(i=new ResizeObserver(()=>{r&&r.update()}),i.observe(W))}),dn(()=>o.placement,a,{immediate:!0}),Ss(()=>{b()}),Go(()=>{d(),Vt(),w()}),{...kx(o),popoverRef:s,alignment:u,hide:T,setupPopper:f,beforeEnter:x,afterEnter:C,beforeLeave:A,afterLeave:S,onClick:dt,onMouseOver:J,onMouseLeave:at,onFocusIn:ot,onFocusOut:gt}}}),Qr=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};function vX(e,t,n,s,i,r){return ut(),vt("div",{class:oe(["vc-popover-content-wrapper",{"is-interactive":e.isInteractive}]),ref:"popoverRef",onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o)),onMouseover:t[1]||(t[1]=(...o)=>e.onMouseOver&&e.onMouseOver(...o)),onMouseleave:t[2]||(t[2]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onFocusin:t[3]||(t[3]=(...o)=>e.onFocusIn&&e.onFocusIn(...o)),onFocusout:t[4]||(t[4]=(...o)=>e.onFocusOut&&e.onFocusOut(...o))},[Pt(Nh,{name:`vc-${e.transition}`,appear:"",onBeforeEnter:e.beforeEnter,onAfterEnter:e.afterEnter,onBeforeLeave:e.beforeLeave,onAfterLeave:e.afterLeave},{default:be(()=>[e.isVisible?(ut(),vt("div",Wl({key:0,tabindex:"-1",class:`vc-popover-content direction-${e.direction}`},e.$attrs),[Dh(e.$slots,"default",{direction:e.direction,alignment:e.alignment,data:e.data,hide:e.hide},()=>[Oh(pn(e.data),1)]),Q("span",{class:oe(["vc-popover-caret",`direction-${e.direction}`,`align-${e.alignment}`])},null,2)],16)):nn("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const mA=Qr(mX,[["render",vX]]),_X={class:"vc-day-popover-row"},yX={key:0,class:"vc-day-popover-row-indicator"},bX={class:"vc-day-popover-row-label"},wX=on({__name:"PopoverRow",props:{attribute:null},setup(e){const t=e,n=K(()=>{const{content:s,highlight:i,dot:r,bar:o,popover:a}=t.attribute;return a&&a.hideIndicator?null:s?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${s.base.color}`}:i?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${i.base.color}`}:r?{class:`vc-dot vc-attr vc-${r.base.color}`}:o?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${o.base.color}`}:null});return(s,i)=>(ut(),vt("div",_X,[ft(n)?(ut(),vt("div",yX,[Q("span",{class:oe(ft(n).class)},null,2)])):nn("",!0),Q("div",bX,[Dh(s.$slots,"default",{},()=>[Oh(pn(e.attribute.popover?e.attribute.popover.label:"No content provided"),1)])])]))}}),EX={inheritAttrs:!1},ds=on({...EX,__name:"CalendarSlot",props:{name:null},setup(e){const n=pA(e.name);return(s,i)=>ft(n)?(ut(),jn(r1(ft(n)),sx(Wl({key:0},s.$attrs)),null,16)):Dh(s.$slots,"default",{key:1})}}),TX={class:"vc-day-popover-container"},IX={key:0,class:"vc-day-popover-header"},SX=on({__name:"CalendarDayPopover",setup(e){const{dayPopoverId:t,displayMode:n,color:s,masks:i,locale:r}=Xr();function o(l,c){return r.value.formatDate(l,c)}function a(l){return r.value.formatDate(l.date,i.value.dayPopover)}return(l,c)=>(ut(),jn(mA,{id:ft(t),class:oe([`vc-${ft(s)}`,`vc-${ft(n)}`])},{default:be(({data:{day:u,attributes:d},hide:f})=>[Pt(ds,{name:"day-popover",day:u,"day-title":a(u),attributes:d,format:o,masks:ft(i),hide:f},{default:be(()=>[Q("div",TX,[ft(i).dayPopover?(ut(),vt("div",IX,pn(a(u)),1)):nn("",!0),(ut(!0),vt(re,null,Cn(d,p=>(ut(),jn(wX,{key:p.key,attribute:p},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),AX={},xX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},CX=Q("polyline",{points:"9 18 15 12 9 6"},null,-1),PX=[CX];function kX(e,t){return ut(),vt("svg",xX,PX)}const DX=Qr(AX,[["render",kX]]),RX={},MX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},OX=Q("polyline",{points:"15 18 9 12 15 6"},null,-1),LX=[OX];function NX(e,t){return ut(),vt("svg",MX,LX)}const VX=Qr(RX,[["render",NX]]),$X={},FX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},BX=Q("polyline",{points:"6 9 12 15 18 9"},null,-1),UX=[BX];function jX(e,t){return ut(),vt("svg",FX,UX)}const HX=Qr($X,[["render",jX]]),zX={},WX={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},YX=Q("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),qX=[YX];function KX(e,t){return ut(),vt("svg",WX,qX)}const GX=Qr(zX,[["render",KX]]),XX=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:HX,IconChevronLeft:VX,IconChevronRight:DX,IconClock:GX},Symbol.toStringTag,{value:"Module"})),wh=on({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(e){const t=e,n=K(()=>t.width||t.size),s=K(()=>t.height||t.size),i=K(()=>XX[`Icon${t.name}`]);return(r,o)=>(ut(),jn(r1(ft(i)),{width:ft(n),height:ft(s),class:"vc-base-icon"},null,8,["width","height"]))}}),QX=["disabled"],JX={key:1,class:"vc-title-wrapper"},ZX={type:"button",class:"vc-title"},tQ=["disabled"],vA=on({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(e){const t=e,{navPopoverId:n,navVisibility:s,canMovePrev:i,movePrev:r,canMoveNext:o,moveNext:a}=Xr(),l=K(()=>{switch(t.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),c=K(()=>{const{page:_}=t;return{id:n.value,visibility:s.value,placement:l.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:_},isInteractive:!0}}),u=K(()=>t.page.titlePosition.includes("left")),d=K(()=>t.page.titlePosition.includes("right")),f=K(()=>t.layout?t.layout:u.value?"tu-pn":d.value?"pn-tu":"p-tu-n;"),p=K(()=>({prev:f.value.includes("p")&&!t.hideArrows,title:f.value.includes("t")&&!t.hideTitle,next:f.value.includes("n")&&!t.hideArrows})),m=K(()=>({gridTemplateColumns:f.value.split("").map(y=>{switch(y){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(_,y)=>(ut(),vt("div",{class:oe(["vc-header",{"is-lg":e.isLg,"is-xl":e.isXl,"is-2xl":e.is2xl}]),style:en(ft(m))},[ft(p).prev?(ut(),vt("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!ft(i),onClick:y[0]||(y[0]=(...T)=>ft(r)&&ft(r)(...T)),onKeydown:y[1]||(y[1]=Kv((...T)=>ft(r)&&ft(r)(...T),["space","enter"]))},[Pt(ds,{name:"header-prev-button",disabled:!ft(i)},{default:be(()=>[Pt(wh,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,QX)):nn("",!0),ft(p).title?(ut(),vt("div",JX,[Pt(ds,{name:"header-title-wrapper"},{default:be(()=>[Cu((ut(),vt("button",ZX,[Pt(ds,{name:"header-title",title:e.page.title},{default:be(()=>[Q("span",null,pn(e.page.title),1)]),_:1},8,["title"])])),[[ft(uA),ft(c)]])]),_:1})])):nn("",!0),ft(p).next?(ut(),vt("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!ft(o),onClick:y[2]||(y[2]=(...T)=>ft(a)&&ft(a)(...T)),onKeydown:y[3]||(y[3]=Kv((...T)=>ft(a)&&ft(a)(...T),["space","enter"]))},[Pt(ds,{name:"header-next-button",disabled:!ft(o)},{default:be(()=>[Pt(wh,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,tQ)):nn("",!0)],6))}}),_A=Symbol("__vc_page_context__");function eQ(e){const{locale:t,getDateAddress:n,canMove:s}=Xr();function i(a,l){const{month:c,year:u}=n(new Date);return lA().map((d,f)=>{const p=f+1;return{month:p,year:a,id:NK(p,a),label:t.value.formatDate(d,l),ariaLabel:t.value.formatDate(d,"MMMM"),isActive:p===e.value.month&&a===e.value.year,isCurrent:p===c&&a===u,isDisabled:!s({month:p,year:a},{position:e.value.position})}})}function r(a,l){const{year:c}=n(new Date),{position:u}=e.value,d=[];for(let f=a;f<=l;f+=1){const p=[...Array(12).keys()].some(m=>s({month:m+1,year:f},{position:u}));d.push({year:f,id:f.toString(),label:f.toString(),ariaLabel:f.toString(),isActive:f===e.value.year,isCurrent:f===c,isDisabled:!p})}return d}const o={page:e,getMonthItems:i,getYearItems:r};return Di(_A,o),o}function yA(){const e=bn(_A);if(e)return e;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const nQ={class:"vc-nav-header"},sQ=["disabled"],iQ=["disabled"],rQ={class:"vc-nav-items"},oQ=["data-id","aria-label","disabled","onClick","onKeydown"],aQ=on({__name:"CalendarNav",setup(e){const{masks:t,move:n}=Xr(),{page:s,getMonthItems:i,getYearItems:r}=yA(),o=Nt(!0),a=12,l=Nt(s.value.year),c=Nt(f(s.value.year)),u=Nt(null);function d(){setTimeout(()=>{if(u.value==null)return;const et=u.value.querySelector(".vc-nav-item:not(:disabled)");et&&et.focus()},10)}function f(et){return Math.floor(et/a)}function p(){o.value=!o.value}function m(et){return et*a}function _(et){return a*(et+1)-1}function y(){ot.value&&(o.value&&k(),R())}function T(){gt.value&&(o.value&&D(),O())}function k(){l.value--}function D(){l.value++}function R(){c.value--}function O(){c.value++}const N=K(()=>i(l.value,t.value.navMonths).map(et=>({...et,click:()=>n({month:et.month,year:et.year},{position:s.value.position})}))),I=K(()=>i(l.value-1,t.value.navMonths)),b=K(()=>I.value.some(et=>!et.isDisabled)),w=K(()=>i(l.value+1,t.value.navMonths)),x=K(()=>w.value.some(et=>!et.isDisabled)),C=K(()=>r(m(c.value),_(c.value)).map(et=>({...et,click:()=>{l.value=et.year,o.value=!0,d()}}))),A=K(()=>r(m(c.value-1),_(c.value-1))),S=K(()=>A.value.some(et=>!et.isDisabled)),dt=K(()=>r(m(c.value+1),_(c.value+1))),J=K(()=>dt.value.some(et=>!et.isDisabled)),at=K(()=>o.value?N.value:C.value),ot=K(()=>o.value?b.value:S.value),gt=K(()=>o.value?x.value:J.value),Vt=K(()=>zS(C.value.map(et=>et.year))),W=K(()=>vo(C.value.map(et=>et.year))),St=K(()=>o.value?l.value:`${Vt.value} - ${W.value}`);return y1(()=>{l.value=s.value.year,d()}),dn(()=>l.value,et=>c.value=f(et)),Ss(()=>d()),(et,kt)=>(ut(),vt("div",{class:"vc-nav-container",ref_key:"navContainer",ref:u},[Q("div",nQ,[Q("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!ft(ot),onClick:y,onKeydown:kt[0]||(kt[0]=Mt=>ft(Jc)(Mt,y))},[Pt(ds,{name:"nav-prev-button",move:y,disabled:!ft(ot)},{default:be(()=>[Pt(wh,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,sQ),Q("button",{type:"button",class:"vc-nav-title vc-focus",onClick:p,onKeydown:kt[1]||(kt[1]=Mt=>ft(Jc)(Mt,p))},pn(ft(St)),33),Q("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!ft(gt),onClick:T,onKeydown:kt[2]||(kt[2]=Mt=>ft(Jc)(Mt,T))},[Pt(ds,{name:"nav-next-button",move:T,disabled:!ft(gt)},{default:be(()=>[Pt(wh,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,iQ)]),Q("div",rQ,[(ut(!0),vt(re,null,Cn(ft(at),Mt=>(ut(),vt("button",{key:Mt.label,type:"button","data-id":Mt.id,"aria-label":Mt.ariaLabel,class:oe(["vc-nav-item vc-focus",[Mt.isActive?"is-active":Mt.isCurrent?"is-current":""]]),disabled:Mt.isDisabled,onClick:Mt.click,onKeydown:qt=>ft(Jc)(qt,Mt.click)},pn(Mt.label),43,oQ))),128))])],512))}}),bA=on({__name:"CalendarPageProvider",props:{page:null},setup(e){return eQ(Mx(e,"page")),(n,s)=>Dh(n.$slots,"default")}}),lQ=on({__name:"CalendarNavPopover",setup(e){const{navPopoverId:t,color:n,displayMode:s}=Xr();return(i,r)=>(ut(),jn(mA,{id:ft(t),class:oe(["vc-nav-popover-container",`vc-${ft(n)}`,`vc-${ft(s)}`])},{default:be(({data:o})=>[Pt(bA,{page:o.page},{default:be(()=>[Pt(ds,{name:"nav"},{default:be(()=>[Pt(aQ)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),cQ=on({directives:{popover:uA},components:{CalendarSlot:ds},props:{day:{type:Object,required:!0}},setup(e){const{locale:t,theme:n,attributeContext:s,dayPopoverId:i,onDayClick:r,onDayMouseenter:o,onDayMouseleave:a,onDayFocusin:l,onDayFocusout:c,onDayKeydown:u}=Xr(),d=K(()=>e.day),f=K(()=>s.value.getCells(d.value)),p=K(()=>f.value.map(J=>J.data)),m=K(()=>({...d.value,attributes:p.value,attributeCells:f.value}));function _({data:J},{popovers:at}){const{key:ot,customData:gt,popover:Vt}=J;if(!Vt)return;const W=U0({key:ot,customData:gt,attribute:J},{...Vt},{visibility:Vt.label?"hover":"click",placement:"bottom",isInteractive:!Vt.label});at.splice(0,0,W)}const y=K(()=>{const J={...n.value.prepareRender({}),popovers:[]};return f.value.forEach(at=>{n.value.render(at,J),_(at,J)}),J}),T=K(()=>y.value.highlights),k=K(()=>!!Tr(T.value)),D=K(()=>y.value.content),R=K(()=>y.value.dots),O=K(()=>!!Tr(R.value)),N=K(()=>y.value.bars),I=K(()=>!!Tr(N.value)),b=K(()=>y.value.popovers),w=K(()=>b.value.map(J=>J.attribute)),x=pA("day-content"),C=K(()=>["vc-day",...d.value.classes,{"vc-day-box-center-center":!x},{"is-not-in-month":!e.day.inMonth}]),A=K(()=>{let J;d.value.isFocusable?J="0":J="-1";const at=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":d.value.isDisabled},Er(vo(T.value),"contentClass"),Er(vo(D.value),"class")||""],ot={...Er(vo(T.value),"contentStyle"),...Er(vo(D.value),"style")};return{class:at,style:ot,tabindex:J,"aria-label":d.value.ariaLabel,"aria-disabled":!!d.value.isDisabled,role:"button"}}),S=K(()=>({click(J){r(m.value,J)},mouseenter(J){o(m.value,J)},mouseleave(J){a(m.value,J)},focusin(J){l(m.value,J)},focusout(J){c(m.value,J)},keydown(J){u(m.value,J)}})),dt=K(()=>Tr(b.value)?U0({id:i.value,data:{day:d,attributes:w.value}},...b.value):null);return{attributes:p,attributeCells:f,bars:N,dayClasses:C,dayContentProps:A,dayContentEvents:S,dayPopover:dt,glyphs:y,dots:R,hasDots:O,hasBars:I,highlights:T,hasHighlights:k,locale:t,popovers:b}}}),uQ={key:0,class:"vc-highlights vc-day-layer"},hQ={key:1,class:"vc-day-layer vc-day-box-center-bottom"},dQ={class:"vc-dots"},fQ={key:2,class:"vc-day-layer vc-day-box-center-bottom"},pQ={class:"vc-bars"};function gQ(e,t,n,s,i,r){const o=$s("CalendarSlot"),a=nC("popover");return ut(),vt("div",{class:oe(e.dayClasses)},[e.hasHighlights?(ut(),vt("div",uQ,[(ut(!0),vt(re,null,Cn(e.highlights,({key:l,wrapperClass:c,class:u,style:d})=>(ut(),vt("div",{key:l,class:oe(c)},[Q("div",{class:oe(u),style:en(d)},null,6)],2))),128))])):nn("",!0),Pt(o,{name:"day-content",day:e.day,attributes:e.attributes,"attribute-cells":e.attributeCells,dayProps:e.dayContentProps,dayEvents:e.dayContentEvents,locale:e.locale},{default:be(()=>[Cu((ut(),vt("div",Wl(e.dayContentProps,sC(e.dayContentEvents,!0)),[Oh(pn(e.day.label),1)],16)),[[a,e.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),e.hasDots?(ut(),vt("div",hQ,[Q("div",dQ,[(ut(!0),vt(re,null,Cn(e.dots,({key:l,class:c,style:u})=>(ut(),vt("span",{key:l,class:oe(c),style:en(u)},null,6))),128))])])):nn("",!0),e.hasBars?(ut(),vt("div",fQ,[Q("div",pQ,[(ut(!0),vt(re,null,Cn(e.bars,({key:l,class:c,style:u})=>(ut(),vt("span",{key:l,class:oe(c),style:en(u)},null,6))),128))])])):nn("",!0)],2)}const mQ=Qr(cQ,[["render",gQ]]),vQ={class:"vc-weekdays"},_Q=["onClick"],yQ={inheritAttrs:!1},bQ=on({...yQ,__name:"CalendarPage",setup(e){const{page:t}=yA(),{onWeeknumberClick:n}=Xr();return(s,i)=>(ut(),vt("div",{class:oe(["vc-pane",`row-${ft(t).row}`,`row-from-end-${ft(t).rowFromEnd}`,`column-${ft(t).column}`,`column-from-end-${ft(t).columnFromEnd}`]),ref:"pane"},[Pt(vA,{page:ft(t),"is-lg":"","hide-arrows":""},null,8,["page"]),Q("div",{class:oe(["vc-weeks",{[`vc-show-weeknumbers-${ft(t).weeknumberPosition}`]:ft(t).weeknumberPosition}])},[Q("div",vQ,[(ut(!0),vt(re,null,Cn(ft(t).weekdays,({weekday:r,label:o},a)=>(ut(),vt("div",{key:a,class:oe(`vc-weekday vc-weekday-${r}`)},pn(o),3))),128))]),(ut(!0),vt(re,null,Cn(ft(t).viewWeeks,r=>(ut(),vt("div",{key:`weeknumber-${r.weeknumber}`,class:"vc-week"},[ft(t).weeknumberPosition?(ut(),vt("div",{key:0,class:oe(["vc-weeknumber",`is-${ft(t).weeknumberPosition}`])},[Q("span",{class:oe(["vc-weeknumber-content"]),onClick:o=>ft(n)(r,o)},pn(r.weeknumberDisplay),9,_Q)],2)):nn("",!0),(ut(!0),vt(re,null,Cn(r.days,o=>(ut(),jn(mQ,{key:o.id,day:o},null,8,["day"]))),128))]))),128))],2)],2))}}),wQ=on({components:{CalendarHeader:vA,CalendarPage:bQ,CalendarNavPopover:lQ,CalendarDayPopover:SX,CalendarPageProvider:bA,CalendarSlot:ds},props:fX,emit:pX,setup(e,{emit:t,slots:n}){return gX(e,{emit:t,slots:n})}}),EQ={class:"vc-pane-header-wrapper"};function TQ(e,t,n,s,i,r){const o=$s("CalendarHeader"),a=$s("CalendarPage"),l=$s("CalendarSlot"),c=$s("CalendarPageProvider"),u=$s("CalendarDayPopover"),d=$s("CalendarNavPopover");return ut(),vt(re,null,[Q("div",Wl({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},e.$attrs,{class:["vc-container",`vc-${e.view}`,`vc-${e.color}`,`vc-${e.displayMode}`,{"vc-expanded":e.expanded,"vc-bordered":!e.borderless,"vc-transparent":e.transparent}],onMouseup:t[0]||(t[0]=zp(()=>{},["prevent"])),ref:"containerRef"}),[Q("div",{class:oe(["vc-pane-container",{"in-transition":e.inTransition}])},[Q("div",EQ,[e.firstPage?(ut(),jn(o,{key:0,page:e.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):nn("",!0)]),Pt(Nh,{name:`vc-${e.transitionName}`,onBeforeEnter:e.onTransitionBeforeEnter,onAfterEnter:e.onTransitionAfterEnter},{default:be(()=>[(ut(),vt("div",{key:e.pages[0].id,class:"vc-pane-layout",style:en({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})},[(ut(!0),vt(re,null,Cn(e.pages,f=>(ut(),jn(c,{key:f.id,page:f},{default:be(()=>[Pt(l,{name:"page",page:f},{default:be(()=>[Pt(a)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),Pt(l,{name:"footer"})],2)],16),Pt(u),Pt(d)],64)}const IQ=Qr(wQ,[["render",TQ]]);const SQ={class:"calendar-container"},AQ={class:"calendar-heatmap themed-calendar"},xQ={key:0,class:"day-info-box"},CQ={key:0},PQ={__name:"Calendar",setup(e){const t=Nt({}),n=Nt([]),s=new Date,i=Nt(new Date(s.getFullYear(),s.getMonth(),1)),r=Nt(null);function o(m){return m.toString().padStart(2,"0")}function a(m){const _=m.date,y=`${_.getFullYear()}-${o(_.getMonth()+1)}-${o(_.getDate())}`;t.value[y],r.value=y}function l(){const m={};for(let _=0;_<localStorage.length;_++){const y=localStorage.key(_);if(y&&y.startsWith("groups_")){const T=y.replace("groups_",""),[k,D,R]=T.split("-").map(Number),N=JSON.parse(localStorage.getItem(y)||"[]").reduce((b,w)=>b+w.count,0),I=`${k}-${o(D)}-${o(R)}`;m[I]=N}}return m}async function c(){await Cr(),t.value=l(),n.value=Object.entries(t.value).map(([m,_])=>({key:m,highlight:!0,dates:m})),Cr(()=>p())}Ss(()=>{c()}),dn(i,()=>{c()});let u=null;function d(m){const _=m[0].monthTitle;_!==u&&(t.value=l(),u=_)}const f=K(()=>r.value?t.value[r.value]||0:null),p=()=>{document.querySelectorAll(".vc-day").forEach(_=>{const y=[..._.classList].find(A=>A.includes("id-")).replace("id-","");if(!y)return;const T=t.value[y]||0;if(T===0)return;const k=_.querySelector(".vc-highlights");if(!k)return;const D=.7+.7*Math.min(T/10,1);k.style.transform=`scale(${D})`;const R=getComputedStyle(document.documentElement).getPropertyValue("--accent").split(",").map(Number),O=getComputedStyle(document.documentElement).getPropertyValue("--primary").split(",").map(Number),N=Math.max(0,Math.min(1,(D-.7)/.7)),I=(A,S,dt)=>Math.round(A+(S-A)*dt),b=I(R[0],O[0],N),w=I(R[1],O[1],N),x=I(R[2],O[2],N),C=`rgb(${b},${w},${x})`;k.style.backgroundColor=C})};return(m,_)=>(ut(),vt("div",SQ,[Q("button",{class:"back-btn",onClick:_[0]||(_[0]=y=>m.$router.push("/")),"aria-label":"Back"},_[2]||(_[2]=[Q("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[Q("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),Q("div",AQ,[Pt(ft(IQ),{modelValue:i.value,"onUpdate:modelValue":_[1]||(_[1]=y=>i.value=y),attributes:n.value,"show-months":1,"title-position":"left","max-date":ft(s),borderless:"",transparent:"","onUpdate:pages":d,onDayclick:a},null,8,["modelValue","attributes","max-date"])]),r.value?(ut(),vt("div",xQ,[f.value!==null?(ut(),vt("span",CQ,"Чіхів: "+pn(f.value),1)):nn("",!0)])):nn("",!0)]))}},kQ=Gi(PQ,[["__scopeId","data-v-79b488a8"]]),DQ="modulepreload",RQ=function(e){return"/chikh_counter/"+e},vw={},MQ=function(t,n,s){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=RQ(r),r in vw)return;vw[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":DQ,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};function OQ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:r,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await MQ(()=>import("./workbox-window.prod.es5-5ffdab76.js"),[]).then(({Workbox:d})=>new d("/chikh_counter/sw.js",{scope:"/chikh_counter/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||s==null||s()}),a.register({immediate:t}).then(d=>{r?r("/chikh_counter/sw.js",d):i==null||i(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const LQ=[{path:"/",component:uV,meta:{requiresAuth:!0}},{path:"/stats",component:L3,meta:{requiresAuth:!0}},{path:"/calendar",component:kQ,meta:{requiresAuth:!0}},{path:"/auth",component:$3},{path:"/settings",component:K3,meta:{requiresAuth:!0}}],wA=xk({history:nk(),routes:LQ});wA.beforeEach((e,t,n)=>{const s=e.matched.some(r=>r.meta.requiresAuth),i=Lr.currentUser;if(s&&!i){const r=Lr.onAuthStateChanged(o=>{r(),o?n():n("/auth")})}else n()});localStorage.getItem("color-primary")||localStorage.setItem("color-primary","#E3F0FF");localStorage.getItem("color-accent")||localStorage.setItem("color-accent","#FFB74D");const NQ=localStorage.getItem("color-primary"),VQ=localStorage.getItem("color-accent");document.documentElement.style.setProperty("--primary",NQ);document.documentElement.style.setProperty("--accent",VQ);bP(IP).use(wA).mount("#app");OQ({immediate:!0});
