var SA=Object.defineProperty;var AA=(e,t,n)=>t in e?SA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Vt=(e,t,n)=>AA(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function op(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ne={},oo=[],ls=()=>{},CA=()=>!1,rh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ap=e=>e.startsWith("onUpdate:"),Me=Object.assign,lp=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},xA=Object.prototype.hasOwnProperty,Qt=(e,t)=>xA.call(e,t),Et=Array.isArray,ao=e=>ih(e)==="[object Map]",G0=e=>ih(e)==="[object Set]",Dt=e=>typeof e=="function",de=e=>typeof e=="string",Qs=e=>typeof e=="symbol",le=e=>e!==null&&typeof e=="object",X0=e=>(le(e)||Dt(e))&&Dt(e.then)&&Dt(e.catch),Q0=Object.prototype.toString,ih=e=>Q0.call(e),PA=e=>ih(e).slice(8,-1),J0=e=>ih(e)==="[object Object]",cp=e=>de(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ma=op(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},kA=/-(\w)/g,Nn=oh(e=>e.replace(kA,(t,n)=>n?n.toUpperCase():"")),DA=/\B([A-Z])/g,Ur=oh(e=>e.replace(DA,"-$1").toLowerCase()),ah=oh(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bc=oh(e=>e?`on${ah(e)}`:""),Ir=(e,t)=>!Object.is(e,t),Uc=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Qf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Jf=e=>{const t=parseFloat(e);return isNaN(t)?e:t},RA=e=>{const t=de(e)?Number(e):NaN;return isNaN(t)?e:t};let zm;const lh=()=>zm||(zm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qe(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=de(s)?LA(s):Qe(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(de(e)||le(e))return e}const MA=/;(?![^(]*\))/g,OA=/:([^]+)/,NA=/\/\*[^]*?\*\//g;function LA(e){const t={};return e.replace(NA,"").split(MA).forEach(n=>{if(n){const s=n.split(OA);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function re(e){let t="";if(de(e))t=e;else if(Et(e))for(let n=0;n<e.length;n++){const s=re(e[n]);s&&(t+=s+" ")}else if(le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function VA(e){if(!e)return null;let{class:t,style:n}=e;return t&&!de(t)&&(e.class=re(t)),n&&(e.style=Qe(n)),e}const $A="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",FA=op($A);function Z0(e){return!!e||e===""}const tw=e=>!!(e&&e.__v_isRef===!0),cn=e=>de(e)?e:e==null?"":Et(e)||le(e)&&(e.toString===Q0||!Dt(e.toString))?tw(e)?cn(e.value):JSON.stringify(e,ew,2):String(e),ew=(e,t)=>tw(t)?ew(e,t.value):ao(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],i)=>(n[lf(s,i)+" =>"]=r,n),{})}:G0(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>lf(n))}:Qs(t)?lf(t):le(t)&&!Et(t)&&!J0(t)?String(t):t,lf=(e,t="")=>{var n;return Qs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class BA{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!t&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=fn;try{return fn=this,t()}finally{fn=n}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function UA(){return fn}let oe;const cf=new WeakSet;class nw{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cf.has(this)&&(cf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wm(this),iw(this);const t=oe,n=qn;oe=this,qn=!0;try{return this.fn()}finally{ow(this),oe=t,qn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fp(t);this.deps=this.depsTail=void 0,Wm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zf(this)&&this.run()}get dirty(){return Zf(this)}}let sw=0,Oa,Na;function rw(e,t=!1){if(e.flags|=8,t){e.next=Na,Na=e;return}e.next=Oa,Oa=e}function up(){sw++}function hp(){if(--sw>0)return;if(Na){let t=Na;for(Na=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Oa;){let t=Oa;for(Oa=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function iw(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ow(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),fp(s),HA(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function Zf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(aw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function aw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===el)||(e.globalVersion=el,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Zf(e))))return;e.flags|=2;const t=e.dep,n=oe,s=qn;oe=e,qn=!0;try{iw(e);const r=e.fn(e._value);(t.version===0||Ir(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{oe=n,qn=s,ow(e),e.flags&=-3}}function fp(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)fp(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function HA(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let qn=!0;const lw=[];function js(){lw.push(qn),qn=!1}function zs(){const e=lw.pop();qn=e===void 0?!0:e}function Wm(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=oe;oe=void 0;try{t()}finally{oe=n}}}let el=0;class jA{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class dp{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!oe||!qn||oe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==oe)n=this.activeLink=new jA(oe,this),oe.deps?(n.prevDep=oe.depsTail,oe.depsTail.nextDep=n,oe.depsTail=n):oe.deps=oe.depsTail=n,cw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=oe.depsTail,n.nextDep=void 0,oe.depsTail.nextDep=n,oe.depsTail=n,oe.deps===n&&(oe.deps=s)}return n}trigger(t){this.version++,el++,this.notify(t)}notify(t){up();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{hp()}}}function cw(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)cw(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const lu=new WeakMap,gi=Symbol(""),td=Symbol(""),nl=Symbol("");function qe(e,t,n){if(qn&&oe){let s=lu.get(e);s||lu.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new dp),r.map=s,r.key=n),r.track()}}function Ls(e,t,n,s,r,i){const o=lu.get(e);if(!o){el++;return}const a=l=>{l&&l.trigger()};if(up(),t==="clear")o.forEach(a);else{const l=Et(e),c=l&&cp(n);if(l&&n==="length"){const h=Number(s);o.forEach((f,d)=>{(d==="length"||d===nl||!Qs(d)&&d>=h)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(nl)),t){case"add":l?c&&a(o.get("length")):(a(o.get(gi)),ao(e)&&a(o.get(td)));break;case"delete":l||(a(o.get(gi)),ao(e)&&a(o.get(td)));break;case"set":ao(e)&&a(o.get(gi));break}}hp()}function zA(e,t){const n=lu.get(e);return n&&n.get(t)}function qi(e){const t=jt(e);return t===e?t:(qe(t,"iterate",nl),Rn(e)?t:t.map(Ve))}function ch(e){return qe(e=jt(e),"iterate",nl),e}const WA={__proto__:null,[Symbol.iterator](){return uf(this,Symbol.iterator,Ve)},concat(...e){return qi(this).concat(...e.map(t=>Et(t)?qi(t):t))},entries(){return uf(this,"entries",e=>(e[1]=Ve(e[1]),e))},every(e,t){return Cs(this,"every",e,t,void 0,arguments)},filter(e,t){return Cs(this,"filter",e,t,n=>n.map(Ve),arguments)},find(e,t){return Cs(this,"find",e,t,Ve,arguments)},findIndex(e,t){return Cs(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Cs(this,"findLast",e,t,Ve,arguments)},findLastIndex(e,t){return Cs(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Cs(this,"forEach",e,t,void 0,arguments)},includes(...e){return hf(this,"includes",e)},indexOf(...e){return hf(this,"indexOf",e)},join(e){return qi(this).join(e)},lastIndexOf(...e){return hf(this,"lastIndexOf",e)},map(e,t){return Cs(this,"map",e,t,void 0,arguments)},pop(){return ha(this,"pop")},push(...e){return ha(this,"push",e)},reduce(e,...t){return Ym(this,"reduce",e,t)},reduceRight(e,...t){return Ym(this,"reduceRight",e,t)},shift(){return ha(this,"shift")},some(e,t){return Cs(this,"some",e,t,void 0,arguments)},splice(...e){return ha(this,"splice",e)},toReversed(){return qi(this).toReversed()},toSorted(e){return qi(this).toSorted(e)},toSpliced(...e){return qi(this).toSpliced(...e)},unshift(...e){return ha(this,"unshift",e)},values(){return uf(this,"values",Ve)}};function uf(e,t,n){const s=ch(e),r=s[t]();return s!==e&&!Rn(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const YA=Array.prototype;function Cs(e,t,n,s,r,i){const o=ch(e),a=o!==e&&!Rn(e),l=o[t];if(l!==YA[t]){const f=l.apply(e,i);return a?Ve(f):f}let c=n;o!==e&&(a?c=function(f,d){return n.call(this,Ve(f),d,e)}:n.length>2&&(c=function(f,d){return n.call(this,f,d,e)}));const h=l.call(o,c,s);return a&&r?r(h):h}function Ym(e,t,n,s){const r=ch(e);let i=n;return r!==e&&(Rn(e)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,e)}):i=function(o,a,l){return n.call(this,o,Ve(a),l,e)}),r[t](i,...s)}function hf(e,t,n){const s=jt(e);qe(s,"iterate",nl);const r=s[t](...n);return(r===-1||r===!1)&&Rl(n[0])?(n[0]=jt(n[0]),s[t](...n)):r}function ha(e,t,n=[]){js(),up();const s=jt(e)[t].apply(e,n);return hp(),zs(),s}const qA=op("__proto__,__v_isRef,__isVue"),uw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qs));function KA(e){Qs(e)||(e=String(e));const t=jt(this);return qe(t,"has",e),t.hasOwnProperty(e)}class hw{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?rC:gw:i?pw:dw).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Et(t);if(!r){let l;if(o&&(l=WA[n]))return l;if(n==="hasOwnProperty")return KA}const a=Reflect.get(t,n,De(t)?t:s);return(Qs(n)?uw.has(n):qA(n))||(r||qe(t,"get",n),i)?a:De(a)?o&&cp(n)?a:a.value:le(a)?r?vw(a):$o(a):a}}class fw extends hw{constructor(t=!1){super(!1,t)}set(t,n,s,r){let i=t[n];if(!this._isShallow){const l=Rr(i);if(!Rn(s)&&!Rr(s)&&(i=jt(i),s=jt(s)),!Et(t)&&De(i)&&!De(s))return l?!1:(i.value=s,!0)}const o=Et(t)&&cp(n)?Number(n)<t.length:Qt(t,n),a=Reflect.set(t,n,s,De(t)?t:r);return t===jt(r)&&(o?Ir(s,i)&&Ls(t,"set",n,s):Ls(t,"add",n,s)),a}deleteProperty(t,n){const s=Qt(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Ls(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!Qs(n)||!uw.has(n))&&qe(t,"has",n),s}ownKeys(t){return qe(t,"iterate",Et(t)?"length":gi),Reflect.ownKeys(t)}}class GA extends hw{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const XA=new fw,QA=new GA,JA=new fw(!0);const ed=e=>e,hc=e=>Reflect.getPrototypeOf(e);function ZA(e,t,n){return function(...s){const r=this.__v_raw,i=jt(r),o=ao(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...s),h=n?ed:t?cu:Ve;return!t&&qe(i,"iterate",l?td:gi),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:a?[h(f[0]),h(f[1])]:h(f),done:d}},[Symbol.iterator](){return this}}}}function fc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function tC(e,t){const n={get(r){const i=this.__v_raw,o=jt(i),a=jt(r);e||(Ir(r,a)&&qe(o,"get",r),qe(o,"get",a));const{has:l}=hc(o),c=t?ed:e?cu:Ve;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!e&&qe(jt(r),"iterate",gi),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=jt(i),a=jt(r);return e||(Ir(r,a)&&qe(o,"has",r),qe(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=jt(a),c=t?ed:e?cu:Ve;return!e&&qe(l,"iterate",gi),a.forEach((h,f)=>r.call(i,c(h),c(f),o))}};return Me(n,e?{add:fc("add"),set:fc("set"),delete:fc("delete"),clear:fc("clear")}:{add(r){!t&&!Rn(r)&&!Rr(r)&&(r=jt(r));const i=jt(this);return hc(i).has.call(i,r)||(i.add(r),Ls(i,"add",r,r)),this},set(r,i){!t&&!Rn(i)&&!Rr(i)&&(i=jt(i));const o=jt(this),{has:a,get:l}=hc(o);let c=a.call(o,r);c||(r=jt(r),c=a.call(o,r));const h=l.call(o,r);return o.set(r,i),c?Ir(i,h)&&Ls(o,"set",r,i):Ls(o,"add",r,i),this},delete(r){const i=jt(this),{has:o,get:a}=hc(i);let l=o.call(i,r);l||(r=jt(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Ls(i,"delete",r,void 0),c},clear(){const r=jt(this),i=r.size!==0,o=r.clear();return i&&Ls(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=ZA(r,e,t)}),n}function pp(e,t){const n=tC(e,t);return(s,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Qt(n,r)&&r in s?n:s,r,i)}const eC={get:pp(!1,!1)},nC={get:pp(!1,!0)},sC={get:pp(!0,!1)};const dw=new WeakMap,pw=new WeakMap,gw=new WeakMap,rC=new WeakMap;function iC(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oC(e){return e.__v_skip||!Object.isExtensible(e)?0:iC(PA(e))}function $o(e){return Rr(e)?e:gp(e,!1,XA,eC,dw)}function mw(e){return gp(e,!1,JA,nC,pw)}function vw(e){return gp(e,!0,QA,sC,gw)}function gp(e,t,n,s,r){if(!le(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=oC(e);if(i===0)return e;const o=r.get(e);if(o)return o;const a=new Proxy(e,i===2?s:n);return r.set(e,a),a}function lo(e){return Rr(e)?lo(e.__v_raw):!!(e&&e.__v_isReactive)}function Rr(e){return!!(e&&e.__v_isReadonly)}function Rn(e){return!!(e&&e.__v_isShallow)}function Rl(e){return e?!!e.__v_raw:!1}function jt(e){const t=e&&e.__v_raw;return t?jt(t):e}function aC(e){return!Qt(e,"__v_skip")&&Object.isExtensible(e)&&Qf(e,"__v_skip",!0),e}const Ve=e=>le(e)?$o(e):e,cu=e=>le(e)?vw(e):e;function De(e){return e?e.__v_isRef===!0:!1}function Nt(e){return _w(e,!1)}function mp(e){return _w(e,!0)}function _w(e,t){return De(e)?e:new lC(e,t)}class lC{constructor(t,n){this.dep=new dp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:jt(t),this._value=n?t:Ve(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Rn(t)||Rr(t);t=s?t:jt(t),Ir(t,n)&&(this._rawValue=t,this._value=s?t:Ve(t),this.dep.trigger())}}function dt(e){return De(e)?e.value:e}const cC={get:(e,t,n)=>t==="__v_raw"?e:dt(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return De(r)&&!De(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function yw(e){return lo(e)?e:new Proxy(e,cC)}function uC(e){const t=Et(e)?new Array(e.length):{};for(const n in e)t[n]=bw(e,n);return t}class hC{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return zA(jt(this._object),this._key)}}class fC{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function dC(e,t,n){return De(e)?e:Dt(e)?new fC(e):le(e)&&arguments.length>1?bw(e,t,n):Nt(e)}function bw(e,t,n){const s=e[t];return De(s)?s:new hC(e,t,n)}class pC{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new dp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=el-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&oe!==this)return rw(this,!0),!0}get value(){const t=this.dep.track();return aw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gC(e,t,n=!1){let s,r;return Dt(e)?s=e:(s=e.get,r=e.set),new pC(s,r,n)}const dc={},uu=new WeakMap;let ri;function mC(e,t=!1,n=ri){if(n){let s=uu.get(n);s||uu.set(n,s=[]),s.push(e)}}function vC(e,t,n=ne){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,c=R=>r?R:Rn(R)||r===!1||r===0?Vs(R,1):Vs(R);let h,f,d,p,m=!1,_=!1;if(De(e)?(f=()=>e.value,m=Rn(e)):lo(e)?(f=()=>c(e),m=!0):Et(e)?(_=!0,m=e.some(R=>lo(R)||Rn(R)),f=()=>e.map(R=>{if(De(R))return R.value;if(lo(R))return c(R);if(Dt(R))return l?l(R,2):R()})):Dt(e)?t?f=l?()=>l(e,2):e:f=()=>{if(d){js();try{d()}finally{zs()}}const R=ri;ri=h;try{return l?l(e,3,[p]):e(p)}finally{ri=R}}:f=ls,t&&r){const R=f,O=r===!0?1/0:r;f=()=>Vs(R(),O)}const y=UA(),E=()=>{h.stop(),y&&y.active&&lp(y.effects,h)};if(i&&t){const R=t;t=(...O)=>{R(...O),E()}}let P=_?new Array(e.length).fill(dc):dc;const D=R=>{if(!(!(h.flags&1)||!h.dirty&&!R))if(t){const O=h.run();if(r||m||(_?O.some((V,T)=>Ir(V,P[T])):Ir(O,P))){d&&d();const V=ri;ri=h;try{const T=[O,P===dc?void 0:_&&P[0]===dc?[]:P,p];P=O,l?l(t,3,T):t(...T)}finally{ri=V}}}else h.run()};return a&&a(D),h=new nw(f),h.scheduler=o?()=>o(D,!1):D,p=R=>mC(R,!1,h),d=h.onStop=()=>{const R=uu.get(h);if(R){if(l)l(R,4);else for(const O of R)O();uu.delete(h)}},t?s?D(!0):P=h.run():o?o(D.bind(null,!0),!0):h.run(),E.pause=h.pause.bind(h),E.resume=h.resume.bind(h),E.stop=E,E}function Vs(e,t=1/0,n){if(t<=0||!le(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,De(e))Vs(e.value,t,n);else if(Et(e))for(let s=0;s<e.length;s++)Vs(e[s],t,n);else if(G0(e)||ao(e))e.forEach(s=>{Vs(s,t,n)});else if(J0(e)){for(const s in e)Vs(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Vs(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ml(e,t,n,s){try{return s?e(...s):e()}catch(r){uh(r,t,n)}}function Kn(e,t,n,s){if(Dt(e)){const r=Ml(e,t,n,s);return r&&X0(r)&&r.catch(i=>{uh(i,t,n)}),r}if(Et(e)){const r=[];for(let i=0;i<e.length;i++)r.push(Kn(e[i],t,n,s));return r}}function uh(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ne;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](e,l,c)===!1)return}a=a.parent}if(i){js(),Ml(i,null,10,[e,l,c]),zs();return}}_C(e,n,r,s,o)}function _C(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const rn=[];let ns=-1;const co=[];let fr=null,Xi=0;const ww=Promise.resolve();let hu=null;function _i(e){const t=hu||ww;return e?t.then(this?e.bind(this):e):t}function yC(e){let t=ns+1,n=rn.length;for(;t<n;){const s=t+n>>>1,r=rn[s],i=sl(r);i<e||i===e&&r.flags&2?t=s+1:n=s}return t}function vp(e){if(!(e.flags&1)){const t=sl(e),n=rn[rn.length-1];!n||!(e.flags&2)&&t>=sl(n)?rn.push(e):rn.splice(yC(t),0,e),e.flags|=1,Ew()}}function Ew(){hu||(hu=ww.then(Iw))}function bC(e){Et(e)?co.push(...e):fr&&e.id===-1?fr.splice(Xi+1,0,e):e.flags&1||(co.push(e),e.flags|=1),Ew()}function qm(e,t,n=ns+1){for(;n<rn.length;n++){const s=rn[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;rn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Tw(e){if(co.length){const t=[...new Set(co)].sort((n,s)=>sl(n)-sl(s));if(co.length=0,fr){fr.push(...t);return}for(fr=t,Xi=0;Xi<fr.length;Xi++){const n=fr[Xi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fr=null,Xi=0}}const sl=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Iw(e){try{for(ns=0;ns<rn.length;ns++){const t=rn[ns];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ml(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ns<rn.length;ns++){const t=rn[ns];t&&(t.flags&=-2)}ns=-1,rn.length=0,Tw(),hu=null,(rn.length||co.length)&&Iw()}}let ke=null,Sw=null;function fu(e){const t=ke;return ke=e,Sw=e&&e.type.__scopeId||null,t}function ve(e,t=ke,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&rv(-1);const i=fu(t);let o;try{o=e(...r)}finally{fu(i),s._d&&rv(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function du(e,t){if(ke===null)return e;const n=vh(ke),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,a,l=ne]=t[r];i&&(Dt(i)&&(i={mounted:i,updated:i}),i.deep&&Vs(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Qr(e,t,n,s){const r=e.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(js(),Kn(l,n,8,[e.el,a,e,t]),zs())}}const wC=Symbol("_vte"),Aw=e=>e.__isTeleport,dr=Symbol("_leaveCb"),pc=Symbol("_enterCb");function EC(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bs(()=>{e.isMounted=!0}),Ow(()=>{e.isUnmounting=!0}),e}const An=[Function,Array],Cw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:An,onEnter:An,onAfterEnter:An,onEnterCancelled:An,onBeforeLeave:An,onLeave:An,onAfterLeave:An,onLeaveCancelled:An,onBeforeAppear:An,onAppear:An,onAfterAppear:An,onAppearCancelled:An},xw=e=>{const t=e.subTree;return t.component?xw(t.component):t},TC={name:"BaseTransition",props:Cw,setup(e,{slots:t}){const n=sE(),s=EC();return()=>{const r=t.default&&Dw(t.default(),!0);if(!r||!r.length)return;const i=Pw(r),o=jt(e),{mode:a}=o;if(s.isLeaving)return ff(i);const l=Km(i);if(!l)return ff(i);let c=nd(l,o,s,n,f=>c=f);l.type!==Ge&&rl(l,c);let h=n.subTree&&Km(n.subTree);if(h&&h.type!==Ge&&!ci(l,h)&&xw(n).type!==Ge){let f=nd(h,o,s,n);if(rl(h,f),a==="out-in"&&l.type!==Ge)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},ff(i);a==="in-out"&&l.type!==Ge?f.delayLeave=(d,p,m)=>{const _=kw(s,h);_[String(h.key)]=h,d[dr]=()=>{p(),d[dr]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Pw(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Ge){t=n;break}}return t}const IC=TC;function kw(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function nd(e,t,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:d,onLeave:p,onAfterLeave:m,onLeaveCancelled:_,onBeforeAppear:y,onAppear:E,onAfterAppear:P,onAppearCancelled:D}=t,R=String(e.key),O=kw(n,e),V=(w,C)=>{w&&Kn(w,s,9,C)},T=(w,C)=>{const x=C[1];V(w,C),Et(w)?w.every(A=>A.length<=1)&&x():w.length<=1&&x()},b={mode:o,persisted:a,beforeEnter(w){let C=l;if(!n.isMounted)if(i)C=y||l;else return;w[dr]&&w[dr](!0);const x=O[R];x&&ci(e,x)&&x.el[dr]&&x.el[dr](),V(C,[w])},enter(w){let C=c,x=h,A=f;if(!n.isMounted)if(i)C=E||c,x=P||h,A=D||f;else return;let S=!1;const ht=w[pc]=Q=>{S||(S=!0,Q?V(A,[w]):V(x,[w]),b.delayedLeave&&b.delayedLeave(),w[pc]=void 0)};C?T(C,[w,ht]):ht()},leave(w,C){const x=String(e.key);if(w[pc]&&w[pc](!0),n.isUnmounting)return C();V(d,[w]);let A=!1;const S=w[dr]=ht=>{A||(A=!0,C(),ht?V(_,[w]):V(m,[w]),w[dr]=void 0,O[x]===e&&delete O[x])};O[x]=e,p?T(p,[w,S]):S()},clone(w){const C=nd(w,t,n,s,r);return r&&r(C),C}};return b}function ff(e){if(hh(e))return e=Mr(e),e.children=null,e}function Km(e){if(!hh(e))return Aw(e.type)&&e.children?Pw(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Dt(n.default))return n.default()}}function rl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,rl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Dw(e,t=!1,n){let s=[],r=0;for(let i=0;i<e.length;i++){let o=e[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===se?(o.patchFlag&128&&r++,s=s.concat(Dw(o.children,t,a))):(t||o.type!==Ge)&&s.push(a!=null?Mr(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function tn(e,t){return Dt(e)?Me({name:e.name},t,{setup:e}):e}function Rw(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function La(e,t,n,s,r=!1){if(Et(e)){e.forEach((m,_)=>La(m,t&&(Et(t)?t[_]:t),n,s,r));return}if(uo(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&La(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?vh(s.component):s.el,o=r?null:i,{i:a,r:l}=e,c=t&&t.r,h=a.refs===ne?a.refs={}:a.refs,f=a.setupState,d=jt(f),p=f===ne?()=>!1:m=>Qt(d,m);if(c!=null&&c!==l&&(de(c)?(h[c]=null,p(c)&&(f[c]=null)):De(c)&&(c.value=null)),Dt(l))Ml(l,a,12,[o,h]);else{const m=de(l),_=De(l);if(m||_){const y=()=>{if(e.f){const E=m?p(l)?f[l]:h[l]:l.value;r?Et(E)&&lp(E,i):Et(E)?E.includes(i)||E.push(i):m?(h[l]=[i],p(l)&&(f[l]=h[l])):(l.value=[i],e.k&&(h[e.k]=l.value))}else m?(h[l]=o,p(l)&&(f[l]=o)):_&&(l.value=o,e.k&&(h[e.k]=o))};o?(y.id=-1,bn(y,n)):y()}}}lh().requestIdleCallback;lh().cancelIdleCallback;const uo=e=>!!e.type.__asyncLoader,hh=e=>e.type.__isKeepAlive;function SC(e,t){Mw(e,"a",t)}function AC(e,t){Mw(e,"da",t)}function Mw(e,t,n=$e){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(fh(t,s,n),n){let r=n.parent;for(;r&&r.parent;)hh(r.parent.vnode)&&CC(s,t,n,r),r=r.parent}}function CC(e,t,n,s){const r=fh(t,e,s,!0);Fo(()=>{lp(s[t],r)},n)}function fh(e,t,n=$e,s=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{js();const a=Nl(n),l=Kn(t,n,e,o);return a(),zs(),l});return s?r.unshift(i):r.push(i),i}}const Js=e=>(t,n=$e)=>{(!al||e==="sp")&&fh(e,(...s)=>t(...s),n)},xC=Js("bm"),bs=Js("m"),PC=Js("bu"),kC=Js("u"),Ow=Js("bum"),Fo=Js("um"),DC=Js("sp"),RC=Js("rtg"),MC=Js("rtc");function OC(e,t=$e){fh("ec",e,t)}const _p="components",NC="directives";function Os(e,t){return yp(_p,e,!0,t)||e}const Nw=Symbol.for("v-ndc");function Lw(e){return de(e)?yp(_p,e,!1)||e:e||Nw}function LC(e){return yp(NC,e)}function yp(e,t,n=!0,s=!1){const r=ke||$e;if(r){const i=r.type;if(e===_p){const a=Ex(i,!1);if(a&&(a===t||a===Nn(t)||a===ah(Nn(t))))return i}const o=Gm(r[e]||i[e],t)||Gm(r.appContext[e],t);return!o&&s?i:o}}function Gm(e,t){return e&&(e[t]||e[Nn(t)]||e[ah(Nn(t))])}function En(e,t,n,s){let r;const i=n,o=Et(e);if(o||de(e)){const a=o&&lo(e);let l=!1,c=!1;a&&(l=!Rn(e),c=Rr(e),e=ch(e)),r=new Array(e.length);for(let h=0,f=e.length;h<f;h++)r[h]=t(l?c?cu(Ve(e[h])):Ve(e[h]):e[h],h,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,i)}else if(le(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];r[l]=t(e[h],h,l,i)}}else r=[];return r}function dh(e,t,n={},s,r){if(ke.ce||ke.parent&&uo(ke.parent)&&ke.parent.ce)return ct(),Ln(se,null,[xt("slot",n,s&&s())],64);let i=e[t];i&&i._c&&(i._d=!1),ct();const o=i&&Vw(i(n)),a=n.key||o&&o.key,l=Ln(se,{key:(a&&!Qs(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Vw(e){return e.some(t=>ol(t)?!(t.type===Ge||t.type===se&&!Vw(t.children)):!0)?e:null}function VC(e,t){const n={};for(const s in e)n[/[A-Z]/.test(s)?`on:${s}`:Bc(s)]=e[s];return n}const sd=e=>e?rE(e)?vh(e):sd(e.parent):null,Va=Me(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>sd(e.parent),$root:e=>sd(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fw(e),$forceUpdate:e=>e.f||(e.f=()=>{vp(e.update)}),$nextTick:e=>e.n||(e.n=_i.bind(e.proxy)),$watch:e=>rx.bind(e)}),df=(e,t)=>e!==ne&&!e.__isScriptSetup&&Qt(e,t),$C={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(df(s,t))return o[t]=1,s[t];if(r!==ne&&Qt(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&Qt(c,t))return o[t]=3,i[t];if(n!==ne&&Qt(n,t))return o[t]=4,n[t];rd&&(o[t]=0)}}const h=Va[t];let f,d;if(h)return t==="$attrs"&&qe(e.attrs,"get",""),h(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==ne&&Qt(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,Qt(d,t))return d[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:i}=e;return df(r,t)?(r[t]=n,!0):s!==ne&&Qt(s,t)?(s[t]=n,!0):Qt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||e!==ne&&Qt(e,o)||df(t,o)||(a=i[0])&&Qt(a,o)||Qt(s,o)||Qt(Va,o)||Qt(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Qt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Xm(e){return Et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let rd=!0;function FC(e){const t=Fw(e),n=e.proxy,s=e.ctx;rd=!1,t.beforeCreate&&Qm(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:f,mounted:d,beforeUpdate:p,updated:m,activated:_,deactivated:y,beforeDestroy:E,beforeUnmount:P,destroyed:D,unmounted:R,render:O,renderTracked:V,renderTriggered:T,errorCaptured:b,serverPrefetch:w,expose:C,inheritAttrs:x,components:A,directives:S,filters:ht}=t;if(c&&BC(c,s,null),o)for(const ot in o){const gt=o[ot];Dt(gt)&&(s[ot]=gt.bind(n))}if(r){const ot=r.call(n,n);le(ot)&&(e.data=$o(ot))}if(rd=!0,i)for(const ot in i){const gt=i[ot],Lt=Dt(gt)?gt.bind(n,n):Dt(gt.get)?gt.get.bind(n,n):ls,z=!Dt(gt)&&Dt(gt.set)?gt.set.bind(n):ls,At=G({get:Lt,set:z});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>At.value,set:et=>At.value=et})}if(a)for(const ot in a)$w(a[ot],s,n,ot);if(l){const ot=Dt(l)?l.call(n):l;Reflect.ownKeys(ot).forEach(gt=>{Sr(gt,ot[gt])})}h&&Qm(h,e,"c");function at(ot,gt){Et(gt)?gt.forEach(Lt=>ot(Lt.bind(n))):gt&&ot(gt.bind(n))}if(at(xC,f),at(bs,d),at(PC,p),at(kC,m),at(SC,_),at(AC,y),at(OC,b),at(MC,V),at(RC,T),at(Ow,P),at(Fo,R),at(DC,w),Et(C))if(C.length){const ot=e.exposed||(e.exposed={});C.forEach(gt=>{Object.defineProperty(ot,gt,{get:()=>n[gt],set:Lt=>n[gt]=Lt})})}else e.exposed||(e.exposed={});O&&e.render===ls&&(e.render=O),x!=null&&(e.inheritAttrs=x),A&&(e.components=A),S&&(e.directives=S),w&&Rw(e)}function BC(e,t,n=ls){Et(e)&&(e=id(e));for(const s in e){const r=e[s];let i;le(r)?"default"in r?i=gn(r.from||s,r.default,!0):i=gn(r.from||s):i=gn(r),De(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[s]=i}}function Qm(e,t,n){Kn(Et(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function $w(e,t,n,s){let r=s.includes(".")?Jw(n,s):()=>n[s];if(de(e)){const i=t[e];Dt(i)&&an(r,i)}else if(Dt(e))an(r,e.bind(n));else if(le(e))if(Et(e))e.forEach(i=>$w(i,t,n,s));else{const i=Dt(e.handler)?e.handler.bind(n):t[e.handler];Dt(i)&&an(r,i,e)}}function Fw(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!r.length&&!n&&!s?l=t:(l={},r.length&&r.forEach(c=>pu(l,c,o,!0)),pu(l,t,o)),le(t)&&i.set(t,l),l}function pu(e,t,n,s=!1){const{mixins:r,extends:i}=t;i&&pu(e,i,n,!0),r&&r.forEach(o=>pu(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=UC[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const UC={data:Jm,props:Zm,emits:Zm,methods:Ea,computed:Ea,beforeCreate:sn,created:sn,beforeMount:sn,mounted:sn,beforeUpdate:sn,updated:sn,beforeDestroy:sn,beforeUnmount:sn,destroyed:sn,unmounted:sn,activated:sn,deactivated:sn,errorCaptured:sn,serverPrefetch:sn,components:Ea,directives:Ea,watch:jC,provide:Jm,inject:HC};function Jm(e,t){return t?e?function(){return Me(Dt(e)?e.call(this,this):e,Dt(t)?t.call(this,this):t)}:t:e}function HC(e,t){return Ea(id(e),id(t))}function id(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function sn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ea(e,t){return e?Me(Object.create(null),e,t):t}function Zm(e,t){return e?Et(e)&&Et(t)?[...new Set([...e,...t])]:Me(Object.create(null),Xm(e),Xm(t??{})):t}function jC(e,t){if(!e)return t;if(!t)return e;const n=Me(Object.create(null),e);for(const s in t)n[s]=sn(e[s],t[s]);return n}function Bw(){return{app:null,config:{isNativeTag:CA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zC=0;function WC(e,t){return function(s,r=null){Dt(s)||(s=Me({},s)),r!=null&&!le(r)&&(r=null);const i=Bw(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:zC++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:oE,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Dt(h.install)?(o.add(h),h.install(c,...f)):Dt(h)&&(o.add(h),h(c,...f))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,f){return f?(i.components[h]=f,c):i.components[h]},directive(h,f){return f?(i.directives[h]=f,c):i.directives[h]},mount(h,f,d){if(!l){const p=c._ceVNode||xt(s,r);return p.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),e(p,h,d),l=!0,c._container=h,h.__vue_app__=c,vh(p.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Kn(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,f){return i.provides[h]=f,c},runWithContext(h){const f=ho;ho=c;try{return h()}finally{ho=f}}};return c}}let ho=null;function Sr(e,t){if($e){let n=$e.provides;const s=$e.parent&&$e.parent.provides;s===n&&(n=$e.provides=Object.create(s)),n[e]=t}}function gn(e,t,n=!1){const s=$e||ke;if(s||ho){let r=ho?ho._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Dt(t)?t.call(s&&s.proxy):t}}const Uw={},Hw=()=>Object.create(Uw),jw=e=>Object.getPrototypeOf(e)===Uw;function YC(e,t,n,s=!1){const r={},i=Hw();e.propsDefaults=Object.create(null),zw(e,t,r,i);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=s?r:mw(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function qC(e,t,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=e,a=jt(r),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let f=0;f<h.length;f++){let d=h[f];if(ph(e.emitsOptions,d))continue;const p=t[d];if(l)if(Qt(i,d))p!==i[d]&&(i[d]=p,c=!0);else{const m=Nn(d);r[m]=od(l,a,m,p,e,!1)}else p!==i[d]&&(i[d]=p,c=!0)}}}else{zw(e,t,r,i)&&(c=!0);let h;for(const f in a)(!t||!Qt(t,f)&&((h=Ur(f))===f||!Qt(t,h)))&&(l?n&&(n[f]!==void 0||n[h]!==void 0)&&(r[f]=od(l,a,f,void 0,e,!0)):delete r[f]);if(i!==a)for(const f in i)(!t||!Qt(t,f))&&(delete i[f],c=!0)}c&&Ls(e.attrs,"set","")}function zw(e,t,n,s){const[r,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ma(l))continue;const c=t[l];let h;r&&Qt(r,h=Nn(l))?!i||!i.includes(h)?n[h]=c:(a||(a={}))[h]=c:ph(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=jt(n),c=a||ne;for(let h=0;h<i.length;h++){const f=i[h];n[f]=od(r,l,f,c[f],e,!Qt(c,f))}}return o}function od(e,t,n,s,r,i){const o=e[n];if(o!=null){const a=Qt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Dt(l)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const h=Nl(r);s=c[n]=l.call(null,t),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Ur(n))&&(s=!0))}return s}const KC=new WeakMap;function Ww(e,t,n=!1){const s=n?KC:t.propsCache,r=s.get(e);if(r)return r;const i=e.props,o={},a=[];let l=!1;if(!Dt(e)){const h=f=>{l=!0;const[d,p]=Ww(f,t,!0);Me(o,d),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!i&&!l)return le(e)&&s.set(e,oo),oo;if(Et(i))for(let h=0;h<i.length;h++){const f=Nn(i[h]);tv(f)&&(o[f]=ne)}else if(i)for(const h in i){const f=Nn(h);if(tv(f)){const d=i[h],p=o[f]=Et(d)||Dt(d)?{type:d}:Me({},d),m=p.type;let _=!1,y=!0;if(Et(m))for(let E=0;E<m.length;++E){const P=m[E],D=Dt(P)&&P.name;if(D==="Boolean"){_=!0;break}else D==="String"&&(y=!1)}else _=Dt(m)&&m.name==="Boolean";p[0]=_,p[1]=y,(_||Qt(p,"default"))&&a.push(f)}}const c=[o,a];return le(e)&&s.set(e,c),c}function tv(e){return e[0]!=="$"&&!Ma(e)}const bp=e=>e[0]==="_"||e==="$stable",wp=e=>Et(e)?e.map(is):[is(e)],GC=(e,t,n)=>{if(t._n)return t;const s=ve((...r)=>wp(t(...r)),n);return s._c=!1,s},Yw=(e,t,n)=>{const s=e._ctx;for(const r in e){if(bp(r))continue;const i=e[r];if(Dt(i))t[r]=GC(r,i,s);else if(i!=null){const o=wp(i);t[r]=()=>o}}},qw=(e,t)=>{const n=wp(t);e.slots.default=()=>n},Kw=(e,t,n)=>{for(const s in t)(n||!bp(s))&&(e[s]=t[s])},XC=(e,t,n)=>{const s=e.slots=Hw();if(e.vnode.shapeFlag&32){const r=t.__;r&&Qf(s,"__",r,!0);const i=t._;i?(Kw(s,t,n),n&&Qf(s,"_",i,!0)):Yw(t,s)}else t&&qw(e,t)},QC=(e,t,n)=>{const{vnode:s,slots:r}=e;let i=!0,o=ne;if(s.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:Kw(r,t,n):(i=!t.$stable,Yw(t,r)),o=t}else t&&(qw(e,t),o={default:1});if(i)for(const a in r)!bp(a)&&o[a]==null&&delete r[a]},bn=hx;function JC(e){return ZC(e)}function ZC(e,t){const n=lh();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:f,nextSibling:d,setScopeId:p=ls,insertStaticContent:m}=e,_=(k,M,N,B=null,H=null,U=null,rt=void 0,J=null,K=!!M.dynamicChildren)=>{if(k===M)return;k&&!ci(k,M)&&(B=F(k),et(k,H,U,!0),k=null),M.patchFlag===-2&&(K=!1,M.dynamicChildren=null);const{type:W,ref:pt,shapeFlag:nt}=M;switch(W){case gh:y(k,M,N,B);break;case Ge:E(k,M,N,B);break;case gf:k==null&&P(M,N,B,rt);break;case se:A(k,M,N,B,H,U,rt,J,K);break;default:nt&1?O(k,M,N,B,H,U,rt,J,K):nt&6?S(k,M,N,B,H,U,rt,J,K):(nt&64||nt&128)&&W.process(k,M,N,B,H,U,rt,J,K,lt)}pt!=null&&H?La(pt,k&&k.ref,U,M||k,!M):pt==null&&k&&k.ref!=null&&La(k.ref,null,U,k,!0)},y=(k,M,N,B)=>{if(k==null)s(M.el=a(M.children),N,B);else{const H=M.el=k.el;M.children!==k.children&&c(H,M.children)}},E=(k,M,N,B)=>{k==null?s(M.el=l(M.children||""),N,B):M.el=k.el},P=(k,M,N,B)=>{[k.el,k.anchor]=m(k.children,M,N,B,k.el,k.anchor)},D=({el:k,anchor:M},N,B)=>{let H;for(;k&&k!==M;)H=d(k),s(k,N,B),k=H;s(M,N,B)},R=({el:k,anchor:M})=>{let N;for(;k&&k!==M;)N=d(k),r(k),k=N;r(M)},O=(k,M,N,B,H,U,rt,J,K)=>{M.type==="svg"?rt="svg":M.type==="math"&&(rt="mathml"),k==null?V(M,N,B,H,U,rt,J,K):w(k,M,H,U,rt,J,K)},V=(k,M,N,B,H,U,rt,J)=>{let K,W;const{props:pt,shapeFlag:nt,transition:ft,dirs:yt}=k;if(K=k.el=o(k.type,U,pt&&pt.is,pt),nt&8?h(K,k.children):nt&16&&b(k.children,K,null,B,H,pf(k,U),rt,J),yt&&Qr(k,null,B,"created"),T(K,k,k.scopeId,rt,B),pt){for(const It in pt)It!=="value"&&!Ma(It)&&i(K,It,null,pt[It],U,B);"value"in pt&&i(K,"value",null,pt.value,U),(W=pt.onVnodeBeforeMount)&&Zn(W,B,k)}yt&&Qr(k,null,B,"beforeMount");const mt=tx(H,ft);mt&&ft.beforeEnter(K),s(K,M,N),((W=pt&&pt.onVnodeMounted)||mt||yt)&&bn(()=>{W&&Zn(W,B,k),mt&&ft.enter(K),yt&&Qr(k,null,B,"mounted")},H)},T=(k,M,N,B,H)=>{if(N&&p(k,N),B)for(let U=0;U<B.length;U++)p(k,B[U]);if(H){let U=H.subTree;if(M===U||tE(U.type)&&(U.ssContent===M||U.ssFallback===M)){const rt=H.vnode;T(k,rt,rt.scopeId,rt.slotScopeIds,H.parent)}}},b=(k,M,N,B,H,U,rt,J,K=0)=>{for(let W=K;W<k.length;W++){const pt=k[W]=J?pr(k[W]):is(k[W]);_(null,pt,M,N,B,H,U,rt,J)}},w=(k,M,N,B,H,U,rt)=>{const J=M.el=k.el;let{patchFlag:K,dynamicChildren:W,dirs:pt}=M;K|=k.patchFlag&16;const nt=k.props||ne,ft=M.props||ne;let yt;if(N&&Jr(N,!1),(yt=ft.onVnodeBeforeUpdate)&&Zn(yt,N,M,k),pt&&Qr(M,k,N,"beforeUpdate"),N&&Jr(N,!0),(nt.innerHTML&&ft.innerHTML==null||nt.textContent&&ft.textContent==null)&&h(J,""),W?C(k.dynamicChildren,W,J,N,B,pf(M,H),U):rt||gt(k,M,J,null,N,B,pf(M,H),U,!1),K>0){if(K&16)x(J,nt,ft,N,H);else if(K&2&&nt.class!==ft.class&&i(J,"class",null,ft.class,H),K&4&&i(J,"style",nt.style,ft.style,H),K&8){const mt=M.dynamicProps;for(let It=0;It<mt.length;It++){const $t=mt[It],we=nt[$t],Ee=ft[$t];(Ee!==we||$t==="value")&&i(J,$t,we,Ee,H,N)}}K&1&&k.children!==M.children&&h(J,M.children)}else!rt&&W==null&&x(J,nt,ft,N,H);((yt=ft.onVnodeUpdated)||pt)&&bn(()=>{yt&&Zn(yt,N,M,k),pt&&Qr(M,k,N,"updated")},B)},C=(k,M,N,B,H,U,rt)=>{for(let J=0;J<M.length;J++){const K=k[J],W=M[J],pt=K.el&&(K.type===se||!ci(K,W)||K.shapeFlag&198)?f(K.el):N;_(K,W,pt,null,B,H,U,rt,!0)}},x=(k,M,N,B,H)=>{if(M!==N){if(M!==ne)for(const U in M)!Ma(U)&&!(U in N)&&i(k,U,M[U],null,H,B);for(const U in N){if(Ma(U))continue;const rt=N[U],J=M[U];rt!==J&&U!=="value"&&i(k,U,J,rt,H,B)}"value"in N&&i(k,"value",M.value,N.value,H)}},A=(k,M,N,B,H,U,rt,J,K)=>{const W=M.el=k?k.el:a(""),pt=M.anchor=k?k.anchor:a("");let{patchFlag:nt,dynamicChildren:ft,slotScopeIds:yt}=M;yt&&(J=J?J.concat(yt):yt),k==null?(s(W,N,B),s(pt,N,B),b(M.children||[],N,pt,H,U,rt,J,K)):nt>0&&nt&64&&ft&&k.dynamicChildren?(C(k.dynamicChildren,ft,N,H,U,rt,J),(M.key!=null||H&&M===H.subTree)&&Gw(k,M,!0)):gt(k,M,N,pt,H,U,rt,J,K)},S=(k,M,N,B,H,U,rt,J,K)=>{M.slotScopeIds=J,k==null?M.shapeFlag&512?H.ctx.activate(M,N,B,rt,K):ht(M,N,B,H,U,rt,K):Q(k,M,K)},ht=(k,M,N,B,H,U,rt)=>{const J=k.component=vx(k,B,H);if(hh(k)&&(J.ctx.renderer=lt),_x(J,!1,rt),J.asyncDep){if(H&&H.registerDep(J,at,rt),!k.el){const K=J.subTree=xt(Ge);E(null,K,M,N)}}else at(J,k,M,N,H,U,rt)},Q=(k,M,N)=>{const B=M.component=k.component;if(cx(k,M,N))if(B.asyncDep&&!B.asyncResolved){ot(B,M,N);return}else B.next=M,B.update();else M.el=k.el,B.vnode=M},at=(k,M,N,B,H,U,rt)=>{const J=()=>{if(k.isMounted){let{next:nt,bu:ft,u:yt,parent:mt,vnode:It}=k;{const Ce=Xw(k);if(Ce){nt&&(nt.el=It.el,ot(k,nt,rt)),Ce.asyncDep.then(()=>{k.isUnmounted||J()});return}}let $t=nt,we;Jr(k,!1),nt?(nt.el=It.el,ot(k,nt,rt)):nt=It,ft&&Uc(ft),(we=nt.props&&nt.props.onVnodeBeforeUpdate)&&Zn(we,mt,nt,It),Jr(k,!0);const Ee=nv(k),un=k.subTree;k.subTree=Ee,_(un,Ee,f(un.el),F(un),k,H,U),nt.el=Ee.el,$t===null&&ux(k,Ee.el),yt&&bn(yt,H),(we=nt.props&&nt.props.onVnodeUpdated)&&bn(()=>Zn(we,mt,nt,It),H)}else{let nt;const{el:ft,props:yt}=M,{bm:mt,m:It,parent:$t,root:we,type:Ee}=k,un=uo(M);Jr(k,!1),mt&&Uc(mt),!un&&(nt=yt&&yt.onVnodeBeforeMount)&&Zn(nt,$t,M),Jr(k,!0);{we.ce&&we.ce._def.shadowRoot!==!1&&we.ce._injectChildStyle(Ee);const Ce=k.subTree=nv(k);_(null,Ce,N,B,k,H,U),M.el=Ce.el}if(It&&bn(It,H),!un&&(nt=yt&&yt.onVnodeMounted)){const Ce=M;bn(()=>Zn(nt,$t,Ce),H)}(M.shapeFlag&256||$t&&uo($t.vnode)&&$t.vnode.shapeFlag&256)&&k.a&&bn(k.a,H),k.isMounted=!0,M=N=B=null}};k.scope.on();const K=k.effect=new nw(J);k.scope.off();const W=k.update=K.run.bind(K),pt=k.job=K.runIfDirty.bind(K);pt.i=k,pt.id=k.uid,K.scheduler=()=>vp(pt),Jr(k,!0),W()},ot=(k,M,N)=>{M.component=k;const B=k.vnode.props;k.vnode=M,k.next=null,qC(k,M.props,B,N),QC(k,M.children,N),js(),qm(k),zs()},gt=(k,M,N,B,H,U,rt,J,K=!1)=>{const W=k&&k.children,pt=k?k.shapeFlag:0,nt=M.children,{patchFlag:ft,shapeFlag:yt}=M;if(ft>0){if(ft&128){z(W,nt,N,B,H,U,rt,J,K);return}else if(ft&256){Lt(W,nt,N,B,H,U,rt,J,K);return}}yt&8?(pt&16&&Ht(W,H,U),nt!==W&&h(N,nt)):pt&16?yt&16?z(W,nt,N,B,H,U,rt,J,K):Ht(W,H,U,!0):(pt&8&&h(N,""),yt&16&&b(nt,N,B,H,U,rt,J,K))},Lt=(k,M,N,B,H,U,rt,J,K)=>{k=k||oo,M=M||oo;const W=k.length,pt=M.length,nt=Math.min(W,pt);let ft;for(ft=0;ft<nt;ft++){const yt=M[ft]=K?pr(M[ft]):is(M[ft]);_(k[ft],yt,N,null,H,U,rt,J,K)}W>pt?Ht(k,H,U,!0,!1,nt):b(M,N,B,H,U,rt,J,K,nt)},z=(k,M,N,B,H,U,rt,J,K)=>{let W=0;const pt=M.length;let nt=k.length-1,ft=pt-1;for(;W<=nt&&W<=ft;){const yt=k[W],mt=M[W]=K?pr(M[W]):is(M[W]);if(ci(yt,mt))_(yt,mt,N,null,H,U,rt,J,K);else break;W++}for(;W<=nt&&W<=ft;){const yt=k[nt],mt=M[ft]=K?pr(M[ft]):is(M[ft]);if(ci(yt,mt))_(yt,mt,N,null,H,U,rt,J,K);else break;nt--,ft--}if(W>nt){if(W<=ft){const yt=ft+1,mt=yt<pt?M[yt].el:B;for(;W<=ft;)_(null,M[W]=K?pr(M[W]):is(M[W]),N,mt,H,U,rt,J,K),W++}}else if(W>ft)for(;W<=nt;)et(k[W],H,U,!0),W++;else{const yt=W,mt=W,It=new Map;for(W=mt;W<=ft;W++){const Te=M[W]=K?pr(M[W]):is(M[W]);Te.key!=null&&It.set(Te.key,W)}let $t,we=0;const Ee=ft-mt+1;let un=!1,Ce=0;const Hn=new Array(Ee);for(W=0;W<Ee;W++)Hn[W]=0;for(W=yt;W<=nt;W++){const Te=k[W];if(we>=Ee){et(Te,H,U,!0);continue}let nn;if(Te.key!=null)nn=It.get(Te.key);else for($t=mt;$t<=ft;$t++)if(Hn[$t-mt]===0&&ci(Te,M[$t])){nn=$t;break}nn===void 0?et(Te,H,U,!0):(Hn[nn-mt]=W+1,nn>=Ce?Ce=nn:un=!0,_(Te,M[nn],N,null,H,U,rt,J,K),we++)}const Yr=un?ex(Hn):oo;for($t=Yr.length-1,W=Ee-1;W>=0;W--){const Te=mt+W,nn=M[Te],Y=Te+1<pt?M[Te+1].el:B;Hn[W]===0?_(null,nn,N,Y,H,U,rt,J,K):un&&($t<0||W!==Yr[$t]?At(nn,N,Y,2):$t--)}}},At=(k,M,N,B,H=null)=>{const{el:U,type:rt,transition:J,children:K,shapeFlag:W}=k;if(W&6){At(k.component.subTree,M,N,B);return}if(W&128){k.suspense.move(M,N,B);return}if(W&64){rt.move(k,M,N,lt);return}if(rt===se){s(U,M,N);for(let nt=0;nt<K.length;nt++)At(K[nt],M,N,B);s(k.anchor,M,N);return}if(rt===gf){D(k,M,N);return}if(B!==2&&W&1&&J)if(B===0)J.beforeEnter(U),s(U,M,N),bn(()=>J.enter(U),H);else{const{leave:nt,delayLeave:ft,afterLeave:yt}=J,mt=()=>{k.ctx.isUnmounted?r(U):s(U,M,N)},It=()=>{nt(U,()=>{mt(),yt&&yt()})};ft?ft(U,mt,It):It()}else s(U,M,N)},et=(k,M,N,B=!1,H=!1)=>{const{type:U,props:rt,ref:J,children:K,dynamicChildren:W,shapeFlag:pt,patchFlag:nt,dirs:ft,cacheIndex:yt}=k;if(nt===-2&&(H=!1),J!=null&&(js(),La(J,null,N,k,!0),zs()),yt!=null&&(M.renderCache[yt]=void 0),pt&256){M.ctx.deactivate(k);return}const mt=pt&1&&ft,It=!uo(k);let $t;if(It&&($t=rt&&rt.onVnodeBeforeUnmount)&&Zn($t,M,k),pt&6)Yt(k.component,N,B);else{if(pt&128){k.suspense.unmount(N,B);return}mt&&Qr(k,null,M,"beforeUnmount"),pt&64?k.type.remove(k,M,N,lt,B):W&&!W.hasOnce&&(U!==se||nt>0&&nt&64)?Ht(W,M,N,!1,!0):(U===se&&nt&384||!H&&pt&16)&&Ht(K,M,N),B&&Pt(k)}(It&&($t=rt&&rt.onVnodeUnmounted)||mt)&&bn(()=>{$t&&Zn($t,M,k),mt&&Qr(k,null,M,"unmounted")},N)},Pt=k=>{const{type:M,el:N,anchor:B,transition:H}=k;if(M===se){Rt(N,B);return}if(M===gf){R(k);return}const U=()=>{r(N),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(k.shapeFlag&1&&H&&!H.persisted){const{leave:rt,delayLeave:J}=H,K=()=>rt(N,U);J?J(k.el,U,K):K()}else U()},Rt=(k,M)=>{let N;for(;k!==M;)N=d(k),r(k),k=N;r(M)},Yt=(k,M,N)=>{const{bum:B,scope:H,job:U,subTree:rt,um:J,m:K,a:W,parent:pt,slots:{__:nt}}=k;ev(K),ev(W),B&&Uc(B),pt&&Et(nt)&&nt.forEach(ft=>{pt.renderCache[ft]=void 0}),H.stop(),U&&(U.flags|=8,et(rt,k,M,N)),J&&bn(J,M),bn(()=>{k.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Ht=(k,M,N,B=!1,H=!1,U=0)=>{for(let rt=U;rt<k.length;rt++)et(k[rt],M,N,B,H)},F=k=>{if(k.shapeFlag&6)return F(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const M=d(k.anchor||k.el),N=M&&M[wC];return N?d(N):M};let st=!1;const Z=(k,M,N)=>{k==null?M._vnode&&et(M._vnode,null,null,!0):_(M._vnode||null,k,M,null,null,null,N),M._vnode=k,st||(st=!0,qm(),Tw(),st=!1)},lt={p:_,um:et,m:At,r:Pt,mt:ht,mc:b,pc:gt,pbc:C,n:F,o:e};return{render:Z,hydrate:void 0,createApp:WC(Z)}}function pf({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Jr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function tx(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Gw(e,t,n=!1){const s=e.children,r=t.children;if(Et(s)&&Et(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=pr(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Gw(o,a)),a.type===gh&&(a.el=o.el),a.type===Ge&&!a.el&&(a.el=o.el)}}function ex(e){const t=e.slice(),n=[0];let s,r,i,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(r=n[n.length-1],e[r]<c){t[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Xw(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Xw(t)}function ev(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const nx=Symbol.for("v-scx"),sx=()=>gn(nx);function Qw(e,t){return Ep(e,null,t)}function an(e,t,n){return Ep(e,t,n)}function Ep(e,t,n=ne){const{immediate:s,deep:r,flush:i,once:o}=n,a=Me({},n),l=t&&s||!t&&i!=="post";let c;if(al){if(i==="sync"){const p=sx();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=ls,p.resume=ls,p.pause=ls,p}}const h=$e;a.call=(p,m,_)=>Kn(p,h,m,_);let f=!1;i==="post"?a.scheduler=p=>{bn(p,h&&h.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(p,m)=>{m?p():vp(p)}),a.augmentJob=p=>{t&&(p.flags|=4),f&&(p.flags|=2,h&&(p.id=h.uid,p.i=h))};const d=vC(e,t,a);return al&&(c?c.push(d):l&&d()),d}function rx(e,t,n){const s=this.proxy,r=de(e)?e.includes(".")?Jw(s,e):()=>s[e]:e.bind(s,s);let i;Dt(t)?i=t:(i=t.handler,n=t);const o=Nl(this),a=Ep(r,i.bind(s),n);return o(),a}function Jw(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const ix=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Nn(t)}Modifiers`]||e[`${Ur(t)}Modifiers`];function ox(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||ne;let r=n;const i=t.startsWith("update:"),o=i&&ix(s,t.slice(7));o&&(o.trim&&(r=n.map(h=>de(h)?h.trim():h)),o.number&&(r=n.map(Jf)));let a,l=s[a=Bc(t)]||s[a=Bc(Nn(t))];!l&&i&&(l=s[a=Bc(Ur(t))]),l&&Kn(l,e,6,r);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Kn(c,e,6,r)}}function Zw(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const i=e.emits;let o={},a=!1;if(!Dt(e)){const l=c=>{const h=Zw(c,t,!0);h&&(a=!0,Me(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(le(e)&&s.set(e,null),null):(Et(i)?i.forEach(l=>o[l]=null):Me(o,i),le(e)&&s.set(e,o),o)}function ph(e,t){return!e||!rh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Qt(e,t[0].toLowerCase()+t.slice(1))||Qt(e,Ur(t))||Qt(e,t))}function nv(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:f,data:d,setupState:p,ctx:m,inheritAttrs:_}=e,y=fu(e);let E,P;try{if(n.shapeFlag&4){const R=r||s,O=R;E=is(c.call(O,R,h,f,p,d,m)),P=a}else{const R=t;E=is(R.length>1?R(f,{attrs:a,slots:o,emit:l}):R(f,null)),P=t.props?a:ax(a)}}catch(R){$a.length=0,uh(R,e,1),E=xt(Ge)}let D=E;if(P&&_!==!1){const R=Object.keys(P),{shapeFlag:O}=D;R.length&&O&7&&(i&&R.some(ap)&&(P=lx(P,i)),D=Mr(D,P,!1,!0))}return n.dirs&&(D=Mr(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&rl(D,n.transition),E=D,fu(y),E}const ax=e=>{let t;for(const n in e)(n==="class"||n==="style"||rh(n))&&((t||(t={}))[n]=e[n]);return t},lx=(e,t)=>{const n={};for(const s in e)(!ap(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function cx(e,t,n){const{props:s,children:r,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?sv(s,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const d=h[f];if(o[d]!==s[d]&&!ph(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?sv(s,o,c):!0:!!o;return!1}function sv(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==e[i]&&!ph(n,i))return!0}return!1}function ux({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const tE=e=>e.__isSuspense;function hx(e,t){t&&t.pendingBranch?Et(e)?t.effects.push(...e):t.effects.push(e):bC(e)}const se=Symbol.for("v-fgt"),gh=Symbol.for("v-txt"),Ge=Symbol.for("v-cmt"),gf=Symbol.for("v-stc"),$a=[];let wn=null;function ct(e=!1){$a.push(wn=e?null:[])}function fx(){$a.pop(),wn=$a[$a.length-1]||null}let il=1;function rv(e,t=!1){il+=e,e<0&&wn&&t&&(wn.hasOnce=!0)}function eE(e){return e.dynamicChildren=il>0?wn||oo:null,fx(),il>0&&wn&&wn.push(e),e}function vt(e,t,n,s,r,i){return eE(X(e,t,n,s,r,i,!0))}function Ln(e,t,n,s,r){return eE(xt(e,t,n,s,r,!0))}function ol(e){return e?e.__v_isVNode===!0:!1}function ci(e,t){return e.type===t.type&&e.key===t.key}const nE=({key:e})=>e??null,Hc=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?de(e)||De(e)||Dt(e)?{i:ke,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,s=0,r=null,i=e===se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&nE(t),ref:t&&Hc(t),scopeId:Sw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ke};return a?(Tp(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=de(n)?8:16),il>0&&!o&&wn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&wn.push(l),l}const xt=dx;function dx(e,t=null,n=null,s=0,r=null,i=!1){if((!e||e===Nw)&&(e=Ge),ol(e)){const a=Mr(e,t,!0);return n&&Tp(a,n),il>0&&!i&&wn&&(a.shapeFlag&6?wn[wn.indexOf(e)]=a:wn.push(a)),a.patchFlag=-2,a}if(Tx(e)&&(e=e.__vccOpts),t){t=px(t);let{class:a,style:l}=t;a&&!de(a)&&(t.class=re(a)),le(l)&&(Rl(l)&&!Et(l)&&(l=Me({},l)),t.style=Qe(l))}const o=de(e)?1:tE(e)?128:Aw(e)?64:le(e)?4:Dt(e)?2:0;return X(e,t,n,s,r,o,i,!0)}function px(e){return e?Rl(e)||jw(e)?Me({},e):e:null}function Mr(e,t,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=e,c=t?Ol(r||{},t):r,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&nE(c),ref:t&&t.ref?n&&i?Et(i)?i.concat(Hc(t)):[i,Hc(t)]:Hc(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==se?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Mr(e.ssContent),ssFallback:e.ssFallback&&Mr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&rl(h,l.clone(h)),h}function mh(e=" ",t=0){return xt(gh,null,e,t)}function Je(e="",t=!1){return t?(ct(),Ln(Ge,null,e)):xt(Ge,null,e)}function is(e){return e==null||typeof e=="boolean"?xt(Ge):Et(e)?xt(se,null,e.slice()):ol(e)?pr(e):xt(gh,null,String(e))}function pr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Mr(e)}function Tp(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Et(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),Tp(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!jw(t)?t._ctx=ke:r===3&&ke&&(ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Dt(t)?(t={default:t,_ctx:ke},n=32):(t=String(t),s&64?(n=16,t=[mh(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ol(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=re([t.class,s.class]));else if(r==="style")t.style=Qe([t.style,s.style]);else if(rh(r)){const i=t[r],o=s[r];o&&i!==o&&!(Et(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=s[r])}return t}function Zn(e,t,n,s=null){Kn(e,t,7,[n,s])}const gx=Bw();let mx=0;function vx(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||gx,i={uid:mx++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new BA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ww(s,r),emitsOptions:Zw(s,r),emit:null,emitted:null,propsDefaults:ne,inheritAttrs:s.inheritAttrs,ctx:ne,data:ne,props:ne,attrs:ne,slots:ne,refs:ne,setupState:ne,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=ox.bind(null,i),e.ce&&e.ce(i),i}let $e=null;const sE=()=>$e||ke;let gu,ad;{const e=lh(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};gu=t("__VUE_INSTANCE_SETTERS__",n=>$e=n),ad=t("__VUE_SSR_SETTERS__",n=>al=n)}const Nl=e=>{const t=$e;return gu(e),e.scope.on(),()=>{e.scope.off(),gu(t)}},iv=()=>{$e&&$e.scope.off(),gu(null)};function rE(e){return e.vnode.shapeFlag&4}let al=!1;function _x(e,t=!1,n=!1){t&&ad(t);const{props:s,children:r}=e.vnode,i=rE(e);YC(e,s,i,t),XC(e,r,n||t);const o=i?yx(e,t):void 0;return t&&ad(!1),o}function yx(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,$C);const{setup:s}=n;if(s){js();const r=e.setupContext=s.length>1?wx(e):null,i=Nl(e),o=Ml(s,e,0,[e.props,r]),a=X0(o);if(zs(),i(),(a||e.sp)&&!uo(e)&&Rw(e),a){if(o.then(iv,iv),t)return o.then(l=>{ov(e,l)}).catch(l=>{uh(l,e,0)});e.asyncDep=o}else ov(e,o)}else iE(e)}function ov(e,t,n){Dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:le(t)&&(e.setupState=yw(t)),iE(e)}function iE(e,t,n){const s=e.type;e.render||(e.render=s.render||ls);{const r=Nl(e);js();try{FC(e)}finally{zs(),r()}}}const bx={get(e,t){return qe(e,"get",""),e[t]}};function wx(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,bx),slots:e.slots,emit:e.emit,expose:t}}function vh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(yw(aC(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Va)return Va[n](e)},has(t,n){return n in t||n in Va}})):e.proxy}function Ex(e,t=!0){return Dt(e)?e.displayName||e.name:e.name||t&&e.__name}function Tx(e){return Dt(e)&&"__vccOpts"in e}const G=(e,t)=>gC(e,t,al);function yo(e,t,n){const s=arguments.length;return s===2?le(t)&&!Et(t)?ol(t)?xt(e,null,[t]):xt(e,t):xt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ol(n)&&(n=[n]),xt(e,t,n))}const oE="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ld;const av=typeof window<"u"&&window.trustedTypes;if(av)try{ld=av.createPolicy("vue",{createHTML:e=>e})}catch{}const aE=ld?e=>ld.createHTML(e):e=>e,Ix="http://www.w3.org/2000/svg",Sx="http://www.w3.org/1998/Math/MathML",Ms=typeof document<"u"?document:null,lv=Ms&&Ms.createElement("template"),Ax={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?Ms.createElementNS(Ix,e):t==="mathml"?Ms.createElementNS(Sx,e):n?Ms.createElement(e,{is:n}):Ms.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Ms.createTextNode(e),createComment:e=>Ms.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ms.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,i){const o=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{lv.innerHTML=aE(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=lv.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},or="transition",fa="animation",ll=Symbol("_vtc"),lE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Cx=Me({},Cw,lE),xx=e=>(e.displayName="Transition",e.props=Cx,e),_h=xx((e,{slots:t})=>yo(IC,Px(e),t)),Zr=(e,t=[])=>{Et(e)?e.forEach(n=>n(...t)):e&&e(...t)},cv=e=>e?Et(e)?e.some(t=>t.length>1):e.length>1:!1;function Px(e){const t={};for(const A in e)A in lE||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=kx(r),_=m&&m[0],y=m&&m[1],{onBeforeEnter:E,onEnter:P,onEnterCancelled:D,onLeave:R,onLeaveCancelled:O,onBeforeAppear:V=E,onAppear:T=P,onAppearCancelled:b=D}=t,w=(A,S,ht,Q)=>{A._enterCancelled=Q,ti(A,S?h:a),ti(A,S?c:o),ht&&ht()},C=(A,S)=>{A._isLeaving=!1,ti(A,f),ti(A,p),ti(A,d),S&&S()},x=A=>(S,ht)=>{const Q=A?T:P,at=()=>w(S,A,ht);Zr(Q,[S,at]),uv(()=>{ti(S,A?l:i),xs(S,A?h:a),cv(Q)||hv(S,s,_,at)})};return Me(t,{onBeforeEnter(A){Zr(E,[A]),xs(A,i),xs(A,o)},onBeforeAppear(A){Zr(V,[A]),xs(A,l),xs(A,c)},onEnter:x(!1),onAppear:x(!0),onLeave(A,S){A._isLeaving=!0;const ht=()=>C(A,S);xs(A,f),A._enterCancelled?(xs(A,d),pv()):(pv(),xs(A,d)),uv(()=>{A._isLeaving&&(ti(A,f),xs(A,p),cv(R)||hv(A,s,y,ht))}),Zr(R,[A,ht])},onEnterCancelled(A){w(A,!1,void 0,!0),Zr(D,[A])},onAppearCancelled(A){w(A,!0,void 0,!0),Zr(b,[A])},onLeaveCancelled(A){C(A),Zr(O,[A])}})}function kx(e){if(e==null)return null;if(le(e))return[mf(e.enter),mf(e.leave)];{const t=mf(e);return[t,t]}}function mf(e){return RA(e)}function xs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ll]||(e[ll]=new Set)).add(t)}function ti(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[ll];n&&(n.delete(t),n.size||(e[ll]=void 0))}function uv(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Dx=0;function hv(e,t,n,s){const r=e._endId=++Dx,i=()=>{r===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Rx(e,t);if(!o)return s();const c=o+"end";let h=0;const f=()=>{e.removeEventListener(c,d),i()},d=p=>{p.target===e&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},a+1),e.addEventListener(c,d)}function Rx(e,t){const n=window.getComputedStyle(e),s=m=>(n[m]||"").split(", "),r=s(`${or}Delay`),i=s(`${or}Duration`),o=fv(r,i),a=s(`${fa}Delay`),l=s(`${fa}Duration`),c=fv(a,l);let h=null,f=0,d=0;t===or?o>0&&(h=or,f=o,d=i.length):t===fa?c>0&&(h=fa,f=c,d=l.length):(f=Math.max(o,c),h=f>0?o>c?or:fa:null,d=h?h===or?i.length:l.length:0);const p=h===or&&/\b(transform|all)(,|$)/.test(s(`${or}Property`).toString());return{type:h,timeout:f,propCount:d,hasTransform:p}}function fv(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>dv(n)+dv(e[s])))}function dv(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function pv(){return document.body.offsetHeight}function Mx(e,t,n){const s=e[ll];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const gv=Symbol("_vod"),Ox=Symbol("_vsh"),Nx=Symbol(""),Lx=/(^|;)\s*display\s*:/;function Vx(e,t,n){const s=e.style,r=de(n);let i=!1;if(n&&!r){if(t)if(de(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&jc(s,a,"")}else for(const o in t)n[o]==null&&jc(s,o,"");for(const o in n)o==="display"&&(i=!0),jc(s,o,n[o])}else if(r){if(t!==n){const o=s[Nx];o&&(n+=";"+o),s.cssText=n,i=Lx.test(n)}}else t&&e.removeAttribute("style");gv in e&&(e[gv]=i?s.display:"",e[Ox]&&(s.display="none"))}const mv=/\s*!important$/;function jc(e,t,n){if(Et(n))n.forEach(s=>jc(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=$x(e,t);mv.test(n)?e.setProperty(Ur(s),n.replace(mv,""),"important"):e[s]=n}}const vv=["Webkit","Moz","ms"],vf={};function $x(e,t){const n=vf[t];if(n)return n;let s=Nn(t);if(s!=="filter"&&s in e)return vf[t]=s;s=ah(s);for(let r=0;r<vv.length;r++){const i=vv[r]+s;if(i in e)return vf[t]=i}return t}const _v="http://www.w3.org/1999/xlink";function yv(e,t,n,s,r,i=FA(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(_v,t.slice(6,t.length)):e.setAttributeNS(_v,t,n):n==null||i&&!Z0(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Qs(n)?String(n):n)}function bv(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?aE(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Z0(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function Qi(e,t,n,s){e.addEventListener(t,n,s)}function Fx(e,t,n,s){e.removeEventListener(t,n,s)}const wv=Symbol("_vei");function Bx(e,t,n,s,r=null){const i=e[wv]||(e[wv]={}),o=i[t];if(s&&o)o.value=s;else{const[a,l]=Ux(t);if(s){const c=i[t]=zx(s,r);Qi(e,a,c,l)}else o&&(Fx(e,a,o,l),i[t]=void 0)}}const Ev=/(?:Once|Passive|Capture)$/;function Ux(e){let t;if(Ev.test(e)){t={};let s;for(;s=e.match(Ev);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ur(e.slice(2)),t]}let _f=0;const Hx=Promise.resolve(),jx=()=>_f||(Hx.then(()=>_f=0),_f=Date.now());function zx(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Kn(Wx(s,n.value),t,5,[s])};return n.value=e,n.attached=jx(),n}function Wx(e,t){if(Et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Tv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Yx=(e,t,n,s,r,i)=>{const o=r==="svg";t==="class"?Mx(e,s,o):t==="style"?Vx(e,n,s):rh(t)?ap(t)||Bx(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qx(e,t,s,o))?(bv(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&yv(e,t,s,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!de(s))?bv(e,Nn(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),yv(e,t,s,o))};function qx(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Tv(t)&&Dt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Tv(t)&&de(n)?!1:t in e}const Iv=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Et(t)?n=>Uc(t,n):t};function Kx(e){e.target.composing=!0}function Sv(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yf=Symbol("_assign"),Av={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[yf]=Iv(r);const i=s||r.props&&r.props.type==="number";Qi(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Jf(a)),e[yf](a)}),n&&Qi(e,"change",()=>{e.value=e.value.trim()}),t||(Qi(e,"compositionstart",Kx),Qi(e,"compositionend",Sv),Qi(e,"change",Sv))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(e[yf]=Iv(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?Jf(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===l)||(e.value=l))}},Gx=["ctrl","shift","alt","meta"],Xx={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Gx.some(n=>e[`${n}Key`]&&!t.includes(n))},Ip=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<t.length;o++){const a=Xx[t[o]];if(a&&a(r,t))return}return e(r,...i)})},Qx={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Cv=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Ur(r.key);if(t.some(o=>o===i||Qx[o]===i))return e(r)})},Jx=Me({patchProp:Yx},Ax);let xv;function Zx(){return xv||(xv=JC(Jx))}const tP=(...e)=>{const t=Zx().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=nP(s);if(!r)return;const i=t._component;!Dt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,eP(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function eP(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function nP(e){return de(e)?document.querySelector(e):e}const Hr=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},sP={__name:"App",setup(e){return(t,n)=>{const s=Os("router-view");return ct(),Ln(s)}}},rP=Hr(sP,[["__scopeId","data-v-9e390217"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ji=typeof document<"u";function cE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function iP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&cE(e.default)}const Xt=Object.assign;function bf(e,t){const n={};for(const s in t){const r=t[s];n[s]=Gn(r)?r.map(e):e(r)}return n}const Fa=()=>{},Gn=Array.isArray,uE=/#/g,oP=/&/g,aP=/\//g,lP=/=/g,cP=/\?/g,hE=/\+/g,uP=/%5B/g,hP=/%5D/g,fE=/%5E/g,fP=/%60/g,dE=/%7B/g,dP=/%7C/g,pE=/%7D/g,pP=/%20/g;function Sp(e){return encodeURI(""+e).replace(dP,"|").replace(uP,"[").replace(hP,"]")}function gP(e){return Sp(e).replace(dE,"{").replace(pE,"}").replace(fE,"^")}function cd(e){return Sp(e).replace(hE,"%2B").replace(pP,"+").replace(uE,"%23").replace(oP,"%26").replace(fP,"`").replace(dE,"{").replace(pE,"}").replace(fE,"^")}function mP(e){return cd(e).replace(lP,"%3D")}function vP(e){return Sp(e).replace(uE,"%23").replace(cP,"%3F")}function _P(e){return e==null?"":vP(e).replace(aP,"%2F")}function cl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const yP=/\/$/,bP=e=>e.replace(yP,"");function wf(e,t,n="/"){let s,r={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),r=e(i)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=IP(s??t,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:cl(o)}}function wP(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Pv(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function EP(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&bo(t.matched[s],n.matched[r])&&gE(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function bo(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gE(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!TP(e[n],t[n]))return!1;return!0}function TP(e,t){return Gn(e)?kv(e,t):Gn(t)?kv(t,e):e===t}function kv(e,t){return Gn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function IP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ar={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ul;(function(e){e.pop="pop",e.push="push"})(ul||(ul={}));var Ba;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ba||(Ba={}));function SP(e){if(!e)if(Ji){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),bP(e)}const AP=/^[^#]+#/;function CP(e,t){return e.replace(AP,"#")+t}function xP(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const yh=()=>({left:window.scrollX,top:window.scrollY});function PP(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=xP(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Dv(e,t){return(history.state?history.state.position-t:-1)+e}const ud=new Map;function kP(e,t){ud.set(e,t)}function DP(e){const t=ud.get(e);return ud.delete(e),t}let RP=()=>location.protocol+"//"+location.host;function mE(e,t){const{pathname:n,search:s,hash:r}=t,i=e.indexOf("#");if(i>-1){let a=r.includes(e.slice(i))?e.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Pv(l,"")}return Pv(n,e)+s+r}function MP(e,t,n,s){let r=[],i=[],o=null;const a=({state:d})=>{const p=mE(e,location),m=n.value,_=t.value;let y=0;if(d){if(n.value=p,t.value=d,o&&o===m){o=null;return}y=_?d.position-_.position:0}else s(p);r.forEach(E=>{E(n.value,m,{delta:y,type:ul.pop,direction:y?y>0?Ba.forward:Ba.back:Ba.unknown})})};function l(){o=n.value}function c(d){r.push(d);const p=()=>{const m=r.indexOf(d);m>-1&&r.splice(m,1)};return i.push(p),p}function h(){const{history:d}=window;d.state&&d.replaceState(Xt({},d.state,{scroll:yh()}),"")}function f(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function Rv(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?yh():null}}function OP(e){const{history:t,location:n}=window,s={value:mE(e,n)},r={value:t.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,h){const f=e.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:RP()+e+l;try{t[h?"replaceState":"pushState"](c,"",d),r.value=c}catch(p){console.error(p),n[h?"replace":"assign"](d)}}function o(l,c){const h=Xt({},t.state,Rv(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,c){const h=Xt({},r.value,t.state,{forward:l,scroll:yh()});i(h.current,h,!0);const f=Xt({},Rv(s.value,l,null),{position:h.position+1},c);i(l,f,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function NP(e){e=SP(e);const t=OP(e),n=MP(e,t.state,t.location,t.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Xt({location:"",base:e,go:s,createHref:CP.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function LP(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),NP(e)}function VP(e){return typeof e=="string"||e&&typeof e=="object"}function vE(e){return typeof e=="string"||typeof e=="symbol"}const _E=Symbol("");var Mv;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Mv||(Mv={}));function wo(e,t){return Xt(new Error,{type:e,[_E]:!0},t)}function Ps(e,t){return e instanceof Error&&_E in e&&(t==null||!!(e.type&t))}const Ov="[^/]+?",$P={sensitive:!1,strict:!1,start:!0,end:!0},FP=/[.+*?^${}()[\]/\\]/g;function BP(e,t){const n=Xt({},$P,t),s=[];let r=n.start?"^":"";const i=[];for(const c of e){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const d=c[f];let p=40+(n.sensitive?.25:0);if(d.type===0)f||(r+="/"),r+=d.value.replace(FP,"\\$&"),p+=40;else if(d.type===1){const{value:m,repeatable:_,optional:y,regexp:E}=d;i.push({name:m,repeatable:_,optional:y});const P=E||Ov;if(P!==Ov){p+=10;try{new RegExp(`(${P})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${m}" (${P}): `+R.message)}}let D=_?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;f||(D=y&&c.length<2?`(?:/${D})`:"/"+D),y&&(D+="?"),r+=D,p+=20,y&&(p+=-8),_&&(p+=-20),P===".*"&&(p+=-50)}h.push(p)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const h=c.match(o),f={};if(!h)return null;for(let d=1;d<h.length;d++){const p=h[d]||"",m=i[d-1];f[m.name]=p&&m.repeatable?p.split("/"):p}return f}function l(c){let h="",f=!1;for(const d of e){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const p of d)if(p.type===0)h+=p.value;else if(p.type===1){const{value:m,repeatable:_,optional:y}=p,E=m in c?c[m]:"";if(Gn(E)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const P=Gn(E)?E.join("/"):E;if(!P)if(y)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);h+=P}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function UP(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yE(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const i=UP(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Nv(s))return 1;if(Nv(r))return-1}return r.length-s.length}function Nv(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const HP={type:0,value:""},jP=/[a-zA-Z0-9_]/;function zP(e){if(!e)return[[]];if(e==="/")return[[HP]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",h="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):d();break;case 4:d(),n=s;break;case 1:l==="("?n=2:jP.test(l)?d():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function WP(e,t,n){const s=BP(zP(e.path),n),r=Xt(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function YP(e,t){const n=[],s=new Map;t=Fv({strict:!1,end:!0,sensitive:!1},t);function r(f){return s.get(f)}function i(f,d,p){const m=!p,_=Vv(f);_.aliasOf=p&&p.record;const y=Fv(t,f),E=[_];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of R)E.push(Vv(Xt({},_,{components:p?p.record.components:_.components,path:O,aliasOf:p?p.record:_})))}let P,D;for(const R of E){const{path:O}=R;if(d&&O[0]!=="/"){const V=d.record.path,T=V[V.length-1]==="/"?"":"/";R.path=d.record.path+(O&&T+O)}if(P=WP(R,d,y),p?p.alias.push(P):(D=D||P,D!==P&&D.alias.push(P),m&&f.name&&!$v(P)&&o(f.name)),bE(P)&&l(P),_.children){const V=_.children;for(let T=0;T<V.length;T++)i(V[T],P,p&&p.children[T])}p=p||P}return D?()=>{o(D)}:Fa}function o(f){if(vE(f)){const d=s.get(f);d&&(s.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const d=GP(f,n);n.splice(d,0,f),f.record.name&&!$v(f)&&s.set(f.record.name,f)}function c(f,d){let p,m={},_,y;if("name"in f&&f.name){if(p=s.get(f.name),!p)throw wo(1,{location:f});y=p.record.name,m=Xt(Lv(d.params,p.keys.filter(D=>!D.optional).concat(p.parent?p.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),f.params&&Lv(f.params,p.keys.map(D=>D.name))),_=p.stringify(m)}else if(f.path!=null)_=f.path,p=n.find(D=>D.re.test(_)),p&&(m=p.parse(_),y=p.record.name);else{if(p=d.name?s.get(d.name):n.find(D=>D.re.test(d.path)),!p)throw wo(1,{location:f,currentLocation:d});y=p.record.name,m=Xt({},d.params,f.params),_=p.stringify(m)}const E=[];let P=p;for(;P;)E.unshift(P.record),P=P.parent;return{name:y,path:_,params:m,matched:E,meta:KP(E)}}e.forEach(f=>i(f));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Lv(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Vv(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:qP(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function qP(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function $v(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function KP(e){return e.reduce((t,n)=>Xt(t,n.meta),{})}function Fv(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function GP(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;yE(e,t[i])<0?s=i:n=i+1}const r=XP(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function XP(e){let t=e;for(;t=t.parent;)if(bE(t)&&yE(e,t)===0)return t}function bE({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function QP(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(hE," "),o=i.indexOf("="),a=cl(o<0?i:i.slice(0,o)),l=o<0?null:cl(i.slice(o+1));if(a in t){let c=t[a];Gn(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Bv(e){let t="";for(let n in e){const s=e[n];if(n=mP(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Gn(s)?s.map(i=>i&&cd(i)):[s&&cd(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function JP(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Gn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const ZP=Symbol(""),Uv=Symbol(""),bh=Symbol(""),wE=Symbol(""),hd=Symbol("");function da(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gr(e,t,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(wo(4,{from:n,to:t})):d instanceof Error?l(d):VP(d)?l(wo(2,{from:t,to:d})):(o&&s.enterCallbacks[r]===o&&typeof d=="function"&&o.push(d),a())},h=i(()=>e.call(s&&s.instances[r],t,n,c));let f=Promise.resolve(h);e.length<3&&(f=f.then(c)),f.catch(d=>l(d))})}function Ef(e,t,n,s,r=i=>i()){const i=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(cE(l)){const h=(l.__vccOpts||l)[t];h&&i.push(gr(h,n,s,o,a,r))}else{let c=l();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=iP(h)?h.default:h;o.mods[a]=h,o.components[a]=f;const p=(f.__vccOpts||f)[t];return p&&gr(p,n,s,o,a,r)()}))}}return i}function Hv(e){const t=gn(bh),n=gn(wE),s=G(()=>{const l=dt(e.to);return t.resolve(l)}),r=G(()=>{const{matched:l}=s.value,{length:c}=l,h=l[c-1],f=n.matched;if(!h||!f.length)return-1;const d=f.findIndex(bo.bind(null,h));if(d>-1)return d;const p=jv(l[c-2]);return c>1&&jv(h)===p&&f[f.length-1].path!==p?f.findIndex(bo.bind(null,l[c-2])):d}),i=G(()=>r.value>-1&&rk(n.params,s.value.params)),o=G(()=>r.value>-1&&r.value===n.matched.length-1&&gE(n.params,s.value.params));function a(l={}){if(sk(l)){const c=t[dt(e.replace)?"replace":"push"](dt(e.to)).catch(Fa);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:G(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function tk(e){return e.length===1?e[0]:e}const ek=tn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Hv,setup(e,{slots:t}){const n=$o(Hv(e)),{options:s}=gn(bh),r=G(()=>({[zv(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[zv(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&tk(t.default(n));return e.custom?i:yo("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),nk=ek;function sk(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function rk(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Gn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function jv(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const zv=(e,t,n)=>e??t??n,ik=tn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=gn(hd),r=G(()=>e.route||s.value),i=gn(Uv,0),o=G(()=>{let c=dt(i);const{matched:h}=r.value;let f;for(;(f=h[c])&&!f.components;)c++;return c}),a=G(()=>r.value.matched[o.value]);Sr(Uv,G(()=>o.value+1)),Sr(ZP,a),Sr(hd,r);const l=Nt();return an(()=>[l.value,a.value,e.name],([c,h,f],[d,p,m])=>{h&&(h.instances[f]=c,p&&p!==h&&c&&c===d&&(h.leaveGuards.size||(h.leaveGuards=p.leaveGuards),h.updateGuards.size||(h.updateGuards=p.updateGuards))),c&&h&&(!p||!bo(h,p)||!d)&&(h.enterCallbacks[f]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=r.value,h=e.name,f=a.value,d=f&&f.components[h];if(!d)return Wv(n.default,{Component:d,route:c});const p=f.props[h],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=yo(d,Xt({},m,t,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Wv(n.default,{Component:y,route:c})||y}}});function Wv(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const ok=ik;function ak(e){const t=YP(e.routes,e),n=e.parseQuery||QP,s=e.stringifyQuery||Bv,r=e.history,i=da(),o=da(),a=da(),l=mp(ar);let c=ar;Ji&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=bf.bind(null,F=>""+F),f=bf.bind(null,_P),d=bf.bind(null,cl);function p(F,st){let Z,lt;return vE(F)?(Z=t.getRecordMatcher(F),lt=st):lt=F,t.addRoute(lt,Z)}function m(F){const st=t.getRecordMatcher(F);st&&t.removeRoute(st)}function _(){return t.getRoutes().map(F=>F.record)}function y(F){return!!t.getRecordMatcher(F)}function E(F,st){if(st=Xt({},st||l.value),typeof F=="string"){const N=wf(n,F,st.path),B=t.resolve({path:N.path},st),H=r.createHref(N.fullPath);return Xt(N,B,{params:d(B.params),hash:cl(N.hash),redirectedFrom:void 0,href:H})}let Z;if(F.path!=null)Z=Xt({},F,{path:wf(n,F.path,st.path).path});else{const N=Xt({},F.params);for(const B in N)N[B]==null&&delete N[B];Z=Xt({},F,{params:f(N)}),st.params=f(st.params)}const lt=t.resolve(Z,st),Ot=F.hash||"";lt.params=h(d(lt.params));const k=wP(s,Xt({},F,{hash:gP(Ot),path:lt.path})),M=r.createHref(k);return Xt({fullPath:k,hash:Ot,query:s===Bv?JP(F.query):F.query||{}},lt,{redirectedFrom:void 0,href:M})}function P(F){return typeof F=="string"?wf(n,F,l.value.path):Xt({},F)}function D(F,st){if(c!==F)return wo(8,{from:st,to:F})}function R(F){return T(F)}function O(F){return R(Xt(P(F),{replace:!0}))}function V(F){const st=F.matched[F.matched.length-1];if(st&&st.redirect){const{redirect:Z}=st;let lt=typeof Z=="function"?Z(F):Z;return typeof lt=="string"&&(lt=lt.includes("?")||lt.includes("#")?lt=P(lt):{path:lt},lt.params={}),Xt({query:F.query,hash:F.hash,params:lt.path!=null?{}:F.params},lt)}}function T(F,st){const Z=c=E(F),lt=l.value,Ot=F.state,k=F.force,M=F.replace===!0,N=V(Z);if(N)return T(Xt(P(N),{state:typeof N=="object"?Xt({},Ot,N.state):Ot,force:k,replace:M}),st||Z);const B=Z;B.redirectedFrom=st;let H;return!k&&EP(s,lt,Z)&&(H=wo(16,{to:B,from:lt}),At(lt,lt,!0,!1)),(H?Promise.resolve(H):C(B,lt)).catch(U=>Ps(U)?Ps(U,2)?U:z(U):gt(U,B,lt)).then(U=>{if(U){if(Ps(U,2))return T(Xt({replace:M},P(U.to),{state:typeof U.to=="object"?Xt({},Ot,U.to.state):Ot,force:k}),st||B)}else U=A(B,lt,!0,M,Ot);return x(B,lt,U),U})}function b(F,st){const Z=D(F,st);return Z?Promise.reject(Z):Promise.resolve()}function w(F){const st=Rt.values().next().value;return st&&typeof st.runWithContext=="function"?st.runWithContext(F):F()}function C(F,st){let Z;const[lt,Ot,k]=lk(F,st);Z=Ef(lt.reverse(),"beforeRouteLeave",F,st);for(const N of lt)N.leaveGuards.forEach(B=>{Z.push(gr(B,F,st))});const M=b.bind(null,F,st);return Z.push(M),Ht(Z).then(()=>{Z=[];for(const N of i.list())Z.push(gr(N,F,st));return Z.push(M),Ht(Z)}).then(()=>{Z=Ef(Ot,"beforeRouteUpdate",F,st);for(const N of Ot)N.updateGuards.forEach(B=>{Z.push(gr(B,F,st))});return Z.push(M),Ht(Z)}).then(()=>{Z=[];for(const N of k)if(N.beforeEnter)if(Gn(N.beforeEnter))for(const B of N.beforeEnter)Z.push(gr(B,F,st));else Z.push(gr(N.beforeEnter,F,st));return Z.push(M),Ht(Z)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),Z=Ef(k,"beforeRouteEnter",F,st,w),Z.push(M),Ht(Z))).then(()=>{Z=[];for(const N of o.list())Z.push(gr(N,F,st));return Z.push(M),Ht(Z)}).catch(N=>Ps(N,8)?N:Promise.reject(N))}function x(F,st,Z){a.list().forEach(lt=>w(()=>lt(F,st,Z)))}function A(F,st,Z,lt,Ot){const k=D(F,st);if(k)return k;const M=st===ar,N=Ji?history.state:{};Z&&(lt||M?r.replace(F.fullPath,Xt({scroll:M&&N&&N.scroll},Ot)):r.push(F.fullPath,Ot)),l.value=F,At(F,st,Z,M),z()}let S;function ht(){S||(S=r.listen((F,st,Z)=>{if(!Yt.listening)return;const lt=E(F),Ot=V(lt);if(Ot){T(Xt(Ot,{replace:!0,force:!0}),lt).catch(Fa);return}c=lt;const k=l.value;Ji&&kP(Dv(k.fullPath,Z.delta),yh()),C(lt,k).catch(M=>Ps(M,12)?M:Ps(M,2)?(T(Xt(P(M.to),{force:!0}),lt).then(N=>{Ps(N,20)&&!Z.delta&&Z.type===ul.pop&&r.go(-1,!1)}).catch(Fa),Promise.reject()):(Z.delta&&r.go(-Z.delta,!1),gt(M,lt,k))).then(M=>{M=M||A(lt,k,!1),M&&(Z.delta&&!Ps(M,8)?r.go(-Z.delta,!1):Z.type===ul.pop&&Ps(M,20)&&r.go(-1,!1)),x(lt,k,M)}).catch(Fa)}))}let Q=da(),at=da(),ot;function gt(F,st,Z){z(F);const lt=at.list();return lt.length?lt.forEach(Ot=>Ot(F,st,Z)):console.error(F),Promise.reject(F)}function Lt(){return ot&&l.value!==ar?Promise.resolve():new Promise((F,st)=>{Q.add([F,st])})}function z(F){return ot||(ot=!F,ht(),Q.list().forEach(([st,Z])=>F?Z(F):st()),Q.reset()),F}function At(F,st,Z,lt){const{scrollBehavior:Ot}=e;if(!Ji||!Ot)return Promise.resolve();const k=!Z&&DP(Dv(F.fullPath,0))||(lt||!Z)&&history.state&&history.state.scroll||null;return _i().then(()=>Ot(F,st,k)).then(M=>M&&PP(M)).catch(M=>gt(M,F,st))}const et=F=>r.go(F);let Pt;const Rt=new Set,Yt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:_,resolve:E,options:e,push:R,replace:O,go:et,back:()=>et(-1),forward:()=>et(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:at.add,isReady:Lt,install(F){const st=this;F.component("RouterLink",nk),F.component("RouterView",ok),F.config.globalProperties.$router=st,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>dt(l)}),Ji&&!Pt&&l.value===ar&&(Pt=!0,R(r.location).catch(Ot=>{}));const Z={};for(const Ot in ar)Object.defineProperty(Z,Ot,{get:()=>l.value[Ot],enumerable:!0});F.provide(bh,st),F.provide(wE,mw(Z)),F.provide(hd,l);const lt=F.unmount;Rt.add(F),F.unmount=function(){Rt.delete(F),Rt.size<1&&(c=ar,S&&S(),S=null,l.value=ar,Pt=!1,ot=!1),lt()}}};function Ht(F){return F.reduce((st,Z)=>st.then(()=>w(Z)),Promise.resolve())}return Yt}function lk(e,t){const n=[],s=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>bo(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>bo(c,l))||r.push(l))}return[n,s,r]}function Ap(){return gn(bh)}const ck=()=>{};var Yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},uk=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return t.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const i=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(d=64)),s.push(n[h],n[f],n[d],n[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(EE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):uk(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const i=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const f=r<e.length?n[e.charAt(r)]:64;if(++r,i==null||a==null||c==null||f==null)throw new hk;const d=i<<2|a>>4;if(s.push(d),c!==64){const p=a<<4&240|c>>2;if(s.push(p),f!==64){const m=c<<6&192|f;s.push(m)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fk=function(e){const t=EE(e);return TE.encodeByteArray(t,!0)},mu=function(e){return fk(e).replace(/\./g,"")},IE=function(e){try{return TE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=()=>dk().__FIREBASE_DEFAULTS__,gk=()=>{if(typeof process>"u"||typeof Yv>"u")return;const e=Yv.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},mk=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&IE(e[1]);return t&&JSON.parse(t)},wh=()=>{try{return ck()||pk()||gk()||mk()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},SE=e=>{var t,n;return(n=(t=wh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},vk=e=>{const t=SE(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},AE=()=>{var e;return(e=wh())===null||e===void 0?void 0:e.config},CE=e=>{var t;return(t=wh())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e){return e.endsWith(".cloudworkstations.dev")}async function xE(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mu(JSON.stringify(n)),mu(JSON.stringify(o)),""].join(".")}const Ua={};function bk(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ua))Ua[t]?e.emulator.push(t):e.prod.push(t);return e}function wk(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let qv=!1;function PE(e,t){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||Ua[e]===t||Ua[e]||qv)return;Ua[e]=t;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",i=bk().prod.length>0;function o(){const d=document.getElementById(s);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{qv=!0,o()},d}function h(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=wk(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),y=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),P=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const D=d.element;a(D),h(y,_);const R=c();l(P,E),D.append(P,m,y,R),document.body.appendChild(D)}i?(m.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ek(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Tk(){var e;const t=(e=wh())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ik(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sk(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ak(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ck(){const e=Ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xk(){return!Tk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pk(){try{return typeof indexedDB=="object"}catch{return!1}}function kk(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;t(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="FirebaseError";class Zs extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Dk,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?Rk(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zs(r,a,s)}}function Rk(e,t){return e.replace(Mk,(n,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const Mk=/\{\$([^}]+)}/g;function Ok(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function yi(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const i=e[r],o=t[r];if(Kv(i)&&Kv(o)){if(!yi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Kv(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Ta(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");t[decodeURIComponent(r)]=decodeURIComponent(i)}}),t}function Ia(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Nk(e,t){const n=new Lk(e,t);return n.subscribe.bind(n)}class Lk{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let r;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Vk(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:s},r.next===void 0&&(r.next=Tf),r.error===void 0&&(r.error=Tf),r.complete===void 0&&(r.complete=Tf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vk(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(e){return e&&e._delegate?e._delegate:e}class bi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new _k;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Bk(t))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=ii){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ii){return this.instances.has(t)}getOptions(t=ii){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(t,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Fk(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ii){return this.component?this.component.multipleInstances?t:ii:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fk(e){return e===ii?void 0:e}function Bk(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new $k(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bt||(Bt={}));const Hk={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},jk=Bt.INFO,zk={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},Wk=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=zk[t];if(r)console[r](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cp{constructor(t){this.name=t,this._logLevel=jk,this._logHandler=Wk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Hk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...t),this._logHandler(this,Bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...t),this._logHandler(this,Bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...t),this._logHandler(this,Bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...t),this._logHandler(this,Bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...t),this._logHandler(this,Bt.ERROR,...t)}}const Yk=(e,t)=>t.some(n=>e instanceof n);let Gv,Xv;function qk(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kE=new WeakMap,fd=new WeakMap,DE=new WeakMap,If=new WeakMap,xp=new WeakMap;function Gk(e){const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(Ar(e.result)),r()},o=()=>{s(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&kE.set(n,e)}).catch(()=>{}),xp.set(t,e),t}function Xk(e){if(fd.has(e))return;const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});fd.set(e,t)}let dd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return fd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||DE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Qk(e){dd=e(dd)}function Jk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Sf(this),t,...n);return DE.set(s,t.sort?t.sort():[t]),Ar(s)}:Kk().includes(e)?function(...t){return e.apply(Sf(this),t),Ar(kE.get(this))}:function(...t){return Ar(e.apply(Sf(this),t))}}function Zk(e){return typeof e=="function"?Jk(e):(e instanceof IDBTransaction&&Xk(e),Yk(e,qk())?new Proxy(e,dd):e)}function Ar(e){if(e instanceof IDBRequest)return Gk(e);if(If.has(e))return If.get(e);const t=Zk(e);return t!==e&&(If.set(e,t),xp.set(t,e)),t}const Sf=e=>xp.get(e);function tD(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),a=Ar(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ar(o.result),l.oldVersion,l.newVersion,Ar(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const eD=["get","getKey","getAll","getAllKeys","count"],nD=["put","add","delete","clear"],Af=new Map;function Qv(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Af.get(t))return Af.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=nD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||eD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Af.set(t,i),i}Qk(e=>({...e,get:(t,n,s)=>Qv(t,n)||e.get(t,n,s),has:(t,n)=>!!Qv(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rD(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function rD(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const pd="@firebase/app",Jv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Cp("@firebase/app"),iD="@firebase/app-compat",oD="@firebase/analytics-compat",aD="@firebase/analytics",lD="@firebase/app-check-compat",cD="@firebase/app-check",uD="@firebase/auth",hD="@firebase/auth-compat",fD="@firebase/database",dD="@firebase/data-connect",pD="@firebase/database-compat",gD="@firebase/functions",mD="@firebase/functions-compat",vD="@firebase/installations",_D="@firebase/installations-compat",yD="@firebase/messaging",bD="@firebase/messaging-compat",wD="@firebase/performance",ED="@firebase/performance-compat",TD="@firebase/remote-config",ID="@firebase/remote-config-compat",SD="@firebase/storage",AD="@firebase/storage-compat",CD="@firebase/firestore",xD="@firebase/ai",PD="@firebase/firestore-compat",kD="firebase",DD="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]",RD={[pd]:"fire-core",[iD]:"fire-core-compat",[aD]:"fire-analytics",[oD]:"fire-analytics-compat",[cD]:"fire-app-check",[lD]:"fire-app-check-compat",[uD]:"fire-auth",[hD]:"fire-auth-compat",[fD]:"fire-rtdb",[dD]:"fire-data-connect",[pD]:"fire-rtdb-compat",[gD]:"fire-fn",[mD]:"fire-fn-compat",[vD]:"fire-iid",[_D]:"fire-iid-compat",[yD]:"fire-fcm",[bD]:"fire-fcm-compat",[wD]:"fire-perf",[ED]:"fire-perf-compat",[TD]:"fire-rc",[ID]:"fire-rc-compat",[SD]:"fire-gcs",[AD]:"fire-gcs-compat",[CD]:"fire-fst",[PD]:"fire-fst-compat",[xD]:"fire-vertex","fire-js":"fire-js",[kD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=new Map,MD=new Map,md=new Map;function Zv(e,t){try{e.container.addComponent(t)}catch(n){Ws.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Eo(e){const t=e.name;if(md.has(t))return Ws.debug(`There were multiple attempts to register component ${t}.`),!1;md.set(t,e);for(const n of vu.values())Zv(n,e);for(const n of MD.values())Zv(n,e);return!0}function Pp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new Ll("app","Firebase",OD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=DD;function RE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:gd,automaticDataCollectionEnabled:!0},t),r=s.name;if(typeof r!="string"||!r)throw Cr.create("bad-app-name",{appName:String(r)});if(n||(n=AE()),!n)throw Cr.create("no-options");const i=vu.get(r);if(i){if(yi(n,i.options)&&yi(s,i.config))return i;throw Cr.create("duplicate-app",{appName:r})}const o=new Uk(r);for(const l of md.values())o.addComponent(l);const a=new ND(n,s,o);return vu.set(r,a),a}function ME(e=gd){const t=vu.get(e);if(!t&&e===gd&&AE())return RE();if(!t)throw Cr.create("no-app",{appName:e});return t}function xr(e,t,n){var s;let r=(s=RD[e])!==null&&s!==void 0?s:e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${t}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ws.warn(a.join(" "));return}Eo(new bi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",VD=1,hl="firebase-heartbeat-store";let Cf=null;function OE(){return Cf||(Cf=tD(LD,VD,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(hl)}catch(n){console.warn(n)}}}}).catch(e=>{throw Cr.create("idb-open",{originalErrorMessage:e.message})})),Cf}async function $D(e){try{const n=(await OE()).transaction(hl),s=await n.objectStore(hl).get(NE(e));return await n.done,s}catch(t){if(t instanceof Zs)Ws.warn(t.message);else{const n=Cr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ws.warn(n.message)}}}async function t_(e,t){try{const s=(await OE()).transaction(hl,"readwrite");await s.objectStore(hl).put(t,NE(e)),await s.done}catch(n){if(n instanceof Zs)Ws.warn(n.message);else{const s=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ws.warn(s.message)}}}function NE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=1024,BD=30;class UD{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=e_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>BD){const o=zD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ws.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e_(),{heartbeatsToSend:s,unsentEntries:r}=HD(this._heartbeatsCache.heartbeats),i=mu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ws.warn(n),""}}}function e_(){return new Date().toISOString().substring(0,10)}function HD(e,t=FD){const n=[];let s=e.slice();for(const r of e){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),n_(n)>t){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),n_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pk()?kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $D(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return t_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return t_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function n_(e){return mu(JSON.stringify({version:2,heartbeats:e})).length}function zD(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(e){Eo(new bi("platform-logger",t=>new sD(t),"PRIVATE")),Eo(new bi("heartbeat",t=>new UD(t),"PRIVATE")),xr(pd,Jv,e),xr(pd,Jv,"esm2017"),xr("fire-js","")}WD("");var YD="firebase",qD="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr(YD,qD,"app");function kp(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KD=LE,VE=new Ll("auth","Firebase",LE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Cp("@firebase/auth");function GD(e,...t){_u.logLevel<=Bt.WARN&&_u.warn(`Auth (${Uo}): ${e}`,...t)}function zc(e,...t){_u.logLevel<=Bt.ERROR&&_u.error(`Auth (${Uo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e,...t){throw Dp(e,...t)}function cs(e,...t){return Dp(e,...t)}function $E(e,t,n){const s=Object.assign(Object.assign({},KD()),{[t]:n});return new Ll("auth","Firebase",s).create(t,{appName:e.name})}function Us(e){return $E(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return VE.create(e,...t)}function Tt(e,t,...n){if(!e)throw Dp(t,...n)}function $s(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zc(t),new Error(t)}function Ys(e,t){e||$s(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function XD(){return s_()==="http:"||s_()==="https:"}function s_(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XD()||Sk()||"connection"in navigator)?navigator.onLine:!0}function JD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ys(n>t,"Short delay should be less than long delay!"),this.isMobile=Ek()||Ak()}get(){return QD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(e,t){Ys(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eR=new $l(3e4,6e4);function jr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zr(e,t,n,s,r={}){return BE(e,r,async()=>{let i={},o={};s&&(t==="GET"?o=s:i={body:JSON.stringify(s)});const a=Vl(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},i);return Ik()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Bo(e.emulatorConfig.host)&&(c.credentials="include"),FE.fetch()(await UE(e,e.config.apiHost,n,a),c)})}async function BE(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},ZD),t);try{const r=new sR(e),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gc(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gc(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw gc(e,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $E(e,h,c);Xn(e,h)}}catch(r){if(r instanceof Zs)throw r;Xn(e,"network-request-failed",{message:String(r)})}}async function Fl(e,t,n,s,r={}){const i=await zr(e,t,n,s,r);return"mfaPendingCredential"in i&&Xn(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function UE(e,t,n,s){const r=`${t}${n}?${s}`,i=e,o=i.config.emulator?Rp(e.config,r):`${e.config.apiScheme}://${r}`;return tR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function nR(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cs(this.auth,"network-request-failed")),eR.get())})}}function gc(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=cs(e,t,s);return r.customData._tokenResponse=n,r}function r_(e){return e!==void 0&&e.enterprise!==void 0}class rR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return nR(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iR(e,t){return zr(e,"GET","/v2/recaptchaConfig",jr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(e,t){return zr(e,"POST","/v1/accounts:delete",t)}async function yu(e,t){return zr(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function aR(e,t=!1){const n=Vn(e),s=await n.getIdToken(t),r=Mp(s);Tt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Ha(xf(r.auth_time)),issuedAtTime:Ha(xf(r.iat)),expirationTime:Ha(xf(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xf(e){return Number(e)*1e3}function Mp(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const r=IE(n);return r?JSON.parse(r):(zc("Failed to decode base64 JWT payload"),null)}catch(r){return zc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function i_(e){const t=Mp(e);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Zs&&lR(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function lR({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ha(this.lastLoginAt),this.creationTime=Ha(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(e){var t;const n=e.auth,s=await e.getIdToken(),r=await fl(e,yu(n,{idToken:s}));Tt(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const o=!((t=i.providerUserInfo)===null||t===void 0)&&t.length?HE(i.providerUserInfo):[],a=hR(e.providerData,o),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _d(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}async function uR(e){const t=Vn(e);await bu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function hR(e,t){return[...e.filter(s=>!t.some(r=>r.providerId===s.providerId)),...t]}function HE(e){return e.map(t=>{var{providerId:n}=t,s=kp(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(e,t){const n=await BE(e,{},async()=>{const s=Vl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await UE(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Bo(e.emulatorConfig.host)&&(l.credentials="include"),FE.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dR(e,t){return zr(e,"POST","/v2/accounts:revokeToken",jr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):i_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const n=i_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await fR(t,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new fo;return s&&(Tt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),r&&(Tt(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),i&&(Tt(typeof i=="number","internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(e,t){Tt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class zn{constructor(t){var{uid:n,auth:s,stsTokenManager:r}=t,i=kp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _d(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await fl(this,this.stsTokenManager.getToken(this.auth,t));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return aR(this,t)}reload(){return uR(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await bu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Us(this.auth));const t=await this.getIdToken();return await fl(this,oR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,r,i,o,a,l,c,h;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,P=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:D,emailVerified:R,isAnonymous:O,providerData:V,stsTokenManager:T}=n;Tt(D&&T,t,"internal-error");const b=fo.fromJSON(this.name,T);Tt(typeof D=="string",t,"internal-error"),lr(f,t.name),lr(d,t.name),Tt(typeof R=="boolean",t,"internal-error"),Tt(typeof O=="boolean",t,"internal-error"),lr(p,t.name),lr(m,t.name),lr(_,t.name),lr(y,t.name),lr(E,t.name),lr(P,t.name);const w=new zn({uid:D,auth:t,email:d,emailVerified:R,displayName:f,isAnonymous:O,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:b,createdAt:E,lastLoginAt:P});return V&&Array.isArray(V)&&(w.providerData=V.map(C=>Object.assign({},C))),y&&(w._redirectEventId=y),w}static async _fromIdTokenResponse(t,n,s=!1){const r=new fo;r.updateFromServerResponse(n);const i=new zn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:s});return await bu(i),i}static async _fromGetAccountInfoResponse(t,n,s){const r=n.users[0];Tt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?HE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new fo;a.updateFromIdToken(s);const l=new zn({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new _d(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;function Fs(e){Ys(e instanceof Function,"Expected a class definition");let t=o_.get(e);return t?(Ys(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,o_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}jE.type="NONE";const a_=jE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(e,t,n){return`firebase:${e}:${t}:${n}`}class po{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Wc(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await yu(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new po(Fs(a_),t,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Fs(a_);const o=Wc(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const d=await yu(t,{idToken:h}).catch(()=>{});if(!d)break;f=await zn._fromGetAccountInfoResponse(t,d,h)}else f=zn._fromJSON(t,h);c!==i&&(a=f),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new po(i,t,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new po(i,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(GE(t))return"Blackberry";if(XE(t))return"Webos";if(WE(t))return"Safari";if((t.includes("chrome/")||YE(t))&&!t.includes("edge/"))return"Chrome";if(KE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zE(e=Ze()){return/firefox\//i.test(e)}function WE(e=Ze()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function YE(e=Ze()){return/crios\//i.test(e)}function qE(e=Ze()){return/iemobile/i.test(e)}function KE(e=Ze()){return/android/i.test(e)}function GE(e=Ze()){return/blackberry/i.test(e)}function XE(e=Ze()){return/webos/i.test(e)}function Op(e=Ze()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pR(e=Ze()){var t;return Op(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function gR(){return Ck()&&document.documentMode===10}function QE(e=Ze()){return Op(e)||KE(e)||XE(e)||GE(e)||/windows phone/i.test(e)||qE(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(e,t=[]){let n;switch(e){case"Browser":n=l_(Ze());break;case"Worker":n=`${l_(Ze())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=i=>new Promise((o,a)=>{try{const l=t(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(e,t={}){return zr(e,"GET","/v2/passwordPolicy",jr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=6;class yR{constructor(t){var n,s,r,i;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_R,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=t.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,r,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<t.length;r++)s=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(t,n,s,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c_(this),this.idTokenSubscription=new c_(this),this.beforeStateQueue=new mR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Fs(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await po.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await yu(this,{idToken:t}),s=await zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await bu(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=JD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(xn(this.app))return Promise.reject(Us(this));const n=t?Vn(t):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return xn(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await vR(this),n=new yR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ll("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await dR(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Fs(t)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[Fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&GD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ki(e){return Vn(e)}class c_{constructor(t){this.auth=t,this.observer=null,this.addObserver=Nk(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wR(e){Eh=e}function ZE(e){return Eh.loadJS(e)}function ER(){return Eh.recaptchaEnterpriseScript}function TR(){return Eh.gapiScript}function IR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class SR{constructor(){this.enterprise=new AR}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class AR{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const CR="recaptcha-enterprise",tT="NO_RECAPTCHA";class xR{constructor(t){this.type=CR,this.auth=ki(t)}async verify(t="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{iR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new rR(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;r_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:t}).then(c=>{o(c)}).catch(()=>{o(tT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&r_(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ER();l.length!==0&&(l+=a),ZE(l).then(()=>{r(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function u_(e,t,n,s=!1,r=!1){const i=new xR(e);let o;if(r)o=tT;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yd(e,t,n,s,r){var i;if(!((i=e._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await u_(e,t,n,n==="getOobCode");return s(e,o)}else return s(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await u_(e,t,n,n==="getOobCode");return s(e,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(e,t){const n=Pp(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(yi(i,t??{}))return r;Xn(r,"already-initialized")}return n.initialize({options:t})}function kR(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Fs);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function DR(e,t,n){const s=ki(e);Tt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const r=!1,i=eT(t),{host:o,port:a}=RR(t),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Tt(yi(c,s.config.emulator)&&yi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Bo(o)?(xE(`${i}//${o}${l}`),PE("Auth",!0)):MR()}function eT(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function RR(e){const t=eT(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:h_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:h_(o)}}}function h_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function MR(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $s("not implemented")}_getIdTokenResponse(t){return $s("not implemented")}_linkToIdToken(t,n){return $s("not implemented")}_getReauthenticationResolver(t){return $s("not implemented")}}async function OR(e,t){return zr(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(e,t){return Fl(e,"POST","/v1/accounts:signInWithPassword",jr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(e,t){return Fl(e,"POST","/v1/accounts:signInWithEmailLink",jr(e,t))}async function VR(e,t){return Fl(e,"POST","/v1/accounts:signInWithEmailLink",jr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Np{constructor(t,n,s,r=null){super("password",s),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new dl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new dl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yd(t,n,"signInWithPassword",NR);case"emailLink":return LR(t,{email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yd(t,s,"signUpPassword",OR);case"emailLink":return VR(t,{idToken:n,email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(e,t){return Fl(e,"POST","/v1/accounts:signInWithIdp",jr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="http://localhost";class wi extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new wi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:r}=n,i=kp(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new wi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return go(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,go(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,go(t,n)}buildRequest(){const t={requestUri:$R,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Vl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BR(e){const t=Ta(Ia(e)).link,n=t?Ta(Ia(t)).deep_link_id:null,s=Ta(Ia(e)).deep_link_id;return(s?Ta(Ia(s)).link:null)||s||n||t||e}class Lp{constructor(t){var n,s,r,i,o,a;const l=Ta(Ia(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(s=l.oobCode)!==null&&s!==void 0?s:null,f=FR((r=l.mode)!==null&&r!==void 0?r:null);Tt(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=BR(t);try{return new Lp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(t,n){return dl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Lp.parseLink(n);return Tt(s,"argument-error"),dl._fromEmailAndCode(t,s.code,s.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends nT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Bl{constructor(){super("facebook.com")}static credential(t){return wi._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mr.credentialFromTaggedObject(t)}static credentialFromError(t){return mr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mr.credential(t.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return wi._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return vr.credential(n,s)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Bl{constructor(){super("github.com")}static credential(t){return wi._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _r.credentialFromTaggedObject(t)}static credentialFromError(t){return _r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _r.credential(t.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Bl{constructor(){super("twitter.com")}static credential(t,n){return wi._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return yr.credentialFromTaggedObject(t)}static credentialFromError(t){return yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return yr.credential(n,s)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(e,t){return Fl(e,"POST","/v1/accounts:signUp",jr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,r=!1){const i=await zn._fromIdTokenResponse(t,s,r),o=f_(s);return new Ei({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const r=f_(s);return new Ei({user:t,providerId:r,_tokenResponse:s,operationType:n})}}function f_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Zs{constructor(t,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:t.name,tenantId:(i=t.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,r){return new wu(t,n,s,r)}}function sT(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wu._fromErrorAndOperation(e,i,t,s):i})}async function HR(e,t,n=!1){const s=await fl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ei._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(e,t,n=!1){const{auth:s}=e;if(xn(s.app))return Promise.reject(Us(s));const r="reauthenticate";try{const i=await fl(e,sT(s,r,t,e),n);Tt(i.idToken,s,"internal-error");const o=Mp(i.idToken);Tt(o,s,"internal-error");const{sub:a}=o;return Tt(e.uid===a,s,"user-mismatch"),Ei._forOperation(e,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(e,t,n=!1){if(xn(e.app))return Promise.reject(Us(e));const s="signIn",r=await sT(e,s,t),i=await Ei._fromIdTokenResponse(e,s,r);return n||await e._updateCurrentUser(i.user),i}async function zR(e,t){return rT(ki(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(e){const t=ki(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function WR(e,t,n){if(xn(e.app))return Promise.reject(Us(e));const s=ki(e),o=await yd(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iT(e),l}),a=await Ei._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function YR(e,t,n){return xn(e.app)?Promise.reject(Us(e)):zR(Vn(e),Ho.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&iT(e),s})}function qR(e,t,n,s){return Vn(e).onIdTokenChanged(t,n,s)}function KR(e,t,n){return Vn(e).beforeAuthStateChanged(t,n)}function GR(e){return Vn(e).signOut()}const Eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eu,"1"),this.storage.removeItem(Eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,QR=10;class aT extends oT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&t(n,r,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);gR()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,QR):r()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}aT.type="LOCAL";const JR=aT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends oT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}lT.type="SESSION";const cT=lT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const s=new Th(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await ZR(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Vp("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const d=f;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function eM(e){us().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function nM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sM(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function rM(){return uT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebaseLocalStorageDb",iM=1,Tu="firebaseLocalStorage",fT="fbase_key";class Ul{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(e,t){return e.transaction([Tu],t?"readwrite":"readonly").objectStore(Tu)}function oM(){const e=indexedDB.deleteDatabase(hT);return new Ul(e).toPromise()}function bd(){const e=indexedDB.open(hT,iM);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(Tu,{keyPath:fT})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(Tu)?t(s):(s.close(),await oM(),t(await bd()))})})}async function d_(e,t,n){const s=Ih(e,!0).put({[fT]:t,value:n});return new Ul(s).toPromise()}async function aM(e,t){const n=Ih(e,!1).get(t),s=await new Ul(n).toPromise();return s===void 0?null:s.value}function p_(e,t){const n=Ih(e,!0).delete(t);return new Ul(n).toPromise()}const lM=800,cM=3;class dT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>cM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(rM()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await nM(),!this.activeServiceWorker)return;this.sender=new tM(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||sM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bd();return await d_(t,Eu,"1"),await p_(t,Eu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>d_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>aM(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>p_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const i=Ih(r,!1).getAll();return new Ul(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:r,value:i}of t)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dT.type="LOCAL";const uM=dT;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(e,t){return t?Fs(t):(Tt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Np{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return go(t,this._buildIdpRequest())}_linkToIdToken(t,n){return go(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return go(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function fM(e){return rT(e.auth,new $p(e),e.bypassAuthState)}function dM(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),jR(n,new $p(e),e.bypassAuthState)}async function pM(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),HR(n,new $p(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,n,s,r,i=!1){this.auth=t,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return fM;case"linkViaPopup":case"linkViaRedirect":return pM;case"reauthViaPopup":case"reauthViaRedirect":return dM;default:Xn(this.auth,"internal-error")}}resolve(t){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new $l(2e3,1e4);class ro extends pT{constructor(t,n,s,r,i){super(t,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const t=Vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,gM.get())};t()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="pendingRedirect",Yc=new Map;class vM extends pT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Yc.get(this.auth._key());if(!t){try{const s=await _M(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Yc.set(this.auth._key(),t)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _M(e,t){const n=wM(t),s=bM(e);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function yM(e,t){Yc.set(e._key(),t)}function bM(e){return Fs(e._redirectPersistence)}function wM(e){return Wc(mM,e.config.apiKey,e.name)}async function EM(e,t,n=!1){if(xn(e.app))return Promise.reject(Us(e));const s=ki(e),r=hM(s,t),o=await new vM(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=10*60*1e3;class IM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SM(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!gT(t)){const r=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=TM&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(t))}saveEventToCache(t){this.cachedEventUids.add(g_(t)),this.lastProcessedEventTime=Date.now()}}function g_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function gT({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function SM(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gT(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(e,t={}){return zr(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xM=/^https?/;async function PM(e){if(e.config.emulator)return;const{authorizedDomains:t}=await AM(e);for(const n of t)try{if(kM(n))return}catch{}Xn(e,"unauthorized-domain")}function kM(e){const t=vd(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!xM.test(n))return!1;if(CM.test(e))return s===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new $l(3e4,6e4);function m_(){const e=us().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function RM(e){return new Promise((t,n)=>{var s,r,i;function o(){m_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{m_(),n(cs(e,"network-request-failed"))},timeout:DM.get()})}if(!((r=(s=us().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((i=us().gapi)===null||i===void 0)&&i.load)o();else{const a=IR("iframefcb");return us()[a]=()=>{gapi.load?o():n(cs(e,"network-request-failed"))},ZE(`${TR()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw qc=null,t})}let qc=null;function MM(e){return qc=qc||RM(e),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new $l(5e3,15e3),NM="__/auth/iframe",LM="emulator/auth/iframe",VM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FM(e){const t=e.config;Tt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Rp(t,LM):`https://${e.config.authDomain}/${NM}`,s={apiKey:t.apiKey,appName:e.name,v:Uo},r=$M.get(e.config.apiHost);r&&(s.eid=r);const i=e._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Vl(s).slice(1)}`}async function BM(e){const t=await MM(e),n=us().gapi;return Tt(n,e,"internal-error"),t.open({where:document.body,url:FM(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VM,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=cs(e,"network-request-failed"),a=us().setTimeout(()=>{i(o)},OM.get());function l(){us().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HM=500,jM=600,zM="_blank",WM="http://localhost";class v_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YM(e,t,n,s=HM,r=jM){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},UM),{width:s.toString(),height:r.toString(),top:i,left:o}),c=Ze().toLowerCase();n&&(a=YE(c)?zM:n),zE(c)&&(t=t||WM,l.scrollbars="yes");const h=Object.entries(l).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(pR(c)&&a!=="_self")return qM(t||"",a),new v_(null);const f=window.open(t||"",a,h);Tt(f,e,"popup-blocked");try{f.focus()}catch{}return new v_(f)}function qM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="__/auth/handler",GM="emulator/auth/handler",XM=encodeURIComponent("fac");async function __(e,t,n,s,r,i){Tt(e.config.authDomain,e,"auth-domain-config-required"),Tt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Uo,eventId:r};if(t instanceof nT){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ok(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(t instanceof Bl){const h=t.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),c=l?`#${XM}=${encodeURIComponent(l)}`:"";return`${QM(e)}?${Vl(a).slice(1)}${c}`}function QM({config:e}){return e.emulator?Rp(e,GM):`https://${e.authDomain}/${KM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class JM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cT,this._completeRedirectFn=EM,this._overrideRedirectResult=yM}async _openPopup(t,n,s,r){var i;Ys((i=this.eventManagers[t._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await __(t,n,s,vd(),r);return YM(t,o,Vp())}async _openRedirect(t,n,s,r){await this._originValidation(t);const i=await __(t,n,s,vd(),r);return eM(i),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Ys(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await BM(t),s=new IM(t);return n.register("authEvent",r=>(Tt(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Pf,{type:Pf},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Pf];o!==void 0&&n(!!o),Xn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PM(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return QE()||WE()||Op()}}const ZM=JM;var y_="@firebase/auth",b_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nO(e){Eo(new bi("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Tt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JE(e)},c=new bR(s,r,i,l);return kR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Eo(new bi("auth-internal",t=>{const n=ki(t.getProvider("auth").getImmediate());return(s=>new tO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(y_,b_,eO(e)),xr(y_,b_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=5*60,rO=CE("authIdTokenMaxAge")||sO;let w_=null;const iO=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>rO)return;const r=n==null?void 0:n.token;w_!==r&&(w_=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function oO(e=ME()){const t=Pp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=PR(e,{popupRedirectResolver:ZM,persistence:[uM,JR,cT]}),s=CE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=iO(i.toString());KR(n,o,()=>o(n.currentUser)),qR(n,a=>o(a))}}const r=SE("auth");return r&&DR(n,`http://${r}`),n}function aO(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}wR({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=r=>{const i=cs("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",aO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nO("Browser");var E_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,mT;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,b){function w(){}w.prototype=b.prototype,T.D=b.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(C,x,A){for(var S=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)S[ht-2]=arguments[ht];return b.prototype[x].apply(C,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,b,w){w||(w=0);var C=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)C[x]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(x=0;16>x;++x)C[x]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=T.g[0],w=T.g[1],x=T.g[2];var A=T.g[3],S=b+(A^w&(x^A))+C[0]+3614090360&4294967295;b=w+(S<<7&4294967295|S>>>25),S=A+(x^b&(w^x))+C[1]+3905402710&4294967295,A=b+(S<<12&4294967295|S>>>20),S=x+(w^A&(b^w))+C[2]+606105819&4294967295,x=A+(S<<17&4294967295|S>>>15),S=w+(b^x&(A^b))+C[3]+3250441966&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(A^w&(x^A))+C[4]+4118548399&4294967295,b=w+(S<<7&4294967295|S>>>25),S=A+(x^b&(w^x))+C[5]+1200080426&4294967295,A=b+(S<<12&4294967295|S>>>20),S=x+(w^A&(b^w))+C[6]+2821735955&4294967295,x=A+(S<<17&4294967295|S>>>15),S=w+(b^x&(A^b))+C[7]+4249261313&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(A^w&(x^A))+C[8]+1770035416&4294967295,b=w+(S<<7&4294967295|S>>>25),S=A+(x^b&(w^x))+C[9]+2336552879&4294967295,A=b+(S<<12&4294967295|S>>>20),S=x+(w^A&(b^w))+C[10]+4294925233&4294967295,x=A+(S<<17&4294967295|S>>>15),S=w+(b^x&(A^b))+C[11]+2304563134&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(A^w&(x^A))+C[12]+1804603682&4294967295,b=w+(S<<7&4294967295|S>>>25),S=A+(x^b&(w^x))+C[13]+4254626195&4294967295,A=b+(S<<12&4294967295|S>>>20),S=x+(w^A&(b^w))+C[14]+2792965006&4294967295,x=A+(S<<17&4294967295|S>>>15),S=w+(b^x&(A^b))+C[15]+1236535329&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(x^A&(w^x))+C[1]+4129170786&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^x&(b^w))+C[6]+3225465664&4294967295,A=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(A^b))+C[11]+643717713&4294967295,x=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(x^A))+C[0]+3921069994&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(x^A&(w^x))+C[5]+3593408605&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^x&(b^w))+C[10]+38016083&4294967295,A=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(A^b))+C[15]+3634488961&4294967295,x=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(x^A))+C[4]+3889429448&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(x^A&(w^x))+C[9]+568446438&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^x&(b^w))+C[14]+3275163606&4294967295,A=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(A^b))+C[3]+4107603335&4294967295,x=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(x^A))+C[8]+1163531501&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(x^A&(w^x))+C[13]+2850285829&4294967295,b=w+(S<<5&4294967295|S>>>27),S=A+(w^x&(b^w))+C[2]+4243563512&4294967295,A=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(A^b))+C[7]+1735328473&4294967295,x=A+(S<<14&4294967295|S>>>18),S=w+(A^b&(x^A))+C[12]+2368359562&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(w^x^A)+C[5]+4294588738&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^x)+C[8]+2272392833&4294967295,A=b+(S<<11&4294967295|S>>>21),S=x+(A^b^w)+C[11]+1839030562&4294967295,x=A+(S<<16&4294967295|S>>>16),S=w+(x^A^b)+C[14]+4259657740&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(w^x^A)+C[1]+2763975236&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^x)+C[4]+1272893353&4294967295,A=b+(S<<11&4294967295|S>>>21),S=x+(A^b^w)+C[7]+4139469664&4294967295,x=A+(S<<16&4294967295|S>>>16),S=w+(x^A^b)+C[10]+3200236656&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(w^x^A)+C[13]+681279174&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^x)+C[0]+3936430074&4294967295,A=b+(S<<11&4294967295|S>>>21),S=x+(A^b^w)+C[3]+3572445317&4294967295,x=A+(S<<16&4294967295|S>>>16),S=w+(x^A^b)+C[6]+76029189&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(w^x^A)+C[9]+3654602809&4294967295,b=w+(S<<4&4294967295|S>>>28),S=A+(b^w^x)+C[12]+3873151461&4294967295,A=b+(S<<11&4294967295|S>>>21),S=x+(A^b^w)+C[15]+530742520&4294967295,x=A+(S<<16&4294967295|S>>>16),S=w+(x^A^b)+C[2]+3299628645&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(x^(w|~A))+C[0]+4096336452&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~x))+C[7]+1126891415&4294967295,A=b+(S<<10&4294967295|S>>>22),S=x+(b^(A|~w))+C[14]+2878612391&4294967295,x=A+(S<<15&4294967295|S>>>17),S=w+(A^(x|~b))+C[5]+4237533241&4294967295,w=x+(S<<21&4294967295|S>>>11),S=b+(x^(w|~A))+C[12]+1700485571&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~x))+C[3]+2399980690&4294967295,A=b+(S<<10&4294967295|S>>>22),S=x+(b^(A|~w))+C[10]+4293915773&4294967295,x=A+(S<<15&4294967295|S>>>17),S=w+(A^(x|~b))+C[1]+2240044497&4294967295,w=x+(S<<21&4294967295|S>>>11),S=b+(x^(w|~A))+C[8]+1873313359&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~x))+C[15]+4264355552&4294967295,A=b+(S<<10&4294967295|S>>>22),S=x+(b^(A|~w))+C[6]+2734768916&4294967295,x=A+(S<<15&4294967295|S>>>17),S=w+(A^(x|~b))+C[13]+1309151649&4294967295,w=x+(S<<21&4294967295|S>>>11),S=b+(x^(w|~A))+C[4]+4149444226&4294967295,b=w+(S<<6&4294967295|S>>>26),S=A+(w^(b|~x))+C[11]+3174756917&4294967295,A=b+(S<<10&4294967295|S>>>22),S=x+(b^(A|~w))+C[2]+718787259&4294967295,x=A+(S<<15&4294967295|S>>>17),S=w+(A^(x|~b))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+A&4294967295}s.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var w=b-this.blockSize,C=this.B,x=this.h,A=0;A<b;){if(x==0)for(;A<=w;)r(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<b;)if(C[x++]=T.charCodeAt(A++),x==this.blockSize){r(this,C),x=0;break}}else for(;A<b;)if(C[x++]=T[A++],x==this.blockSize){r(this,C),x=0;break}}this.h=x,this.o+=b},s.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var w=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=w&255,w/=256;for(this.u(T),T=Array(16),b=w=0;4>b;++b)for(var C=0;32>C;C+=8)T[w++]=this.g[b]>>>C&255;return T};function i(T,b){var w=a;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=b(T)}function o(T,b){this.h=b;for(var w=[],C=!0,x=T.length-1;0<=x;x--){var A=T[x]|0;C&&A==b||(w[x]=A,C=!1)}this.g=w}var a={};function l(T){return-128<=T&&128>T?i(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return y(c(-T));for(var b=[],w=1,C=0;T>=w;C++)b[C]=T/w|0,w*=4294967296;return new o(b,0)}function h(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return y(h(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(b,8)),C=f,x=0;x<T.length;x+=8){var A=Math.min(8,T.length-x),S=parseInt(T.substring(x,x+A),b);8>A?(A=c(Math.pow(b,A)),C=C.j(A).add(c(S))):(C=C.j(w),C=C.add(c(S)))}return C}var f=l(0),d=l(1),p=l(16777216);e=o.prototype,e.m=function(){if(_(this))return-y(this).m();for(var T=0,b=1,w=0;w<this.g.length;w++){var C=this.i(w);T+=(0<=C?C:4294967296+C)*b,b*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(_(this))return"-"+y(this).toString(T);for(var b=c(Math.pow(T,6)),w=this,C="";;){var x=R(w,b).g;w=E(w,x.j(b));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=x,m(w))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function _(T){return T.h==-1}e.l=function(T){return T=E(this,T),_(T)?-1:m(T)?0:1};function y(T){for(var b=T.g.length,w=[],C=0;C<b;C++)w[C]=~T.g[C];return new o(w,~T.h).add(d)}e.abs=function(){return _(this)?y(this):this},e.add=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0,x=0;x<=b;x++){var A=C+(this.i(x)&65535)+(T.i(x)&65535),S=(A>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);C=S>>>16,A&=65535,S&=65535,w[x]=S<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(T,b){return T.add(y(b))}e.j=function(T){if(m(this)||m(T))return f;if(_(this))return _(T)?y(this).j(y(T)):y(y(this).j(T));if(_(T))return y(this.j(y(T)));if(0>this.l(p)&&0>T.l(p))return c(this.m()*T.m());for(var b=this.g.length+T.g.length,w=[],C=0;C<2*b;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<T.g.length;x++){var A=this.i(C)>>>16,S=this.i(C)&65535,ht=T.i(x)>>>16,Q=T.i(x)&65535;w[2*C+2*x]+=S*Q,P(w,2*C+2*x),w[2*C+2*x+1]+=A*Q,P(w,2*C+2*x+1),w[2*C+2*x+1]+=S*ht,P(w,2*C+2*x+1),w[2*C+2*x+2]+=A*ht,P(w,2*C+2*x+2)}for(C=0;C<b;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=b;C<2*b;C++)w[C]=0;return new o(w,0)};function P(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function D(T,b){this.g=T,this.h=b}function R(T,b){if(m(b))throw Error("division by zero");if(m(T))return new D(f,f);if(_(T))return b=R(y(T),b),new D(y(b.g),y(b.h));if(_(b))return b=R(T,y(b)),new D(y(b.g),b.h);if(30<T.g.length){if(_(T)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var w=d,C=b;0>=C.l(T);)w=O(w),C=O(C);var x=V(w,1),A=V(C,1);for(C=V(C,2),w=V(w,2);!m(C);){var S=A.add(C);0>=S.l(T)&&(x=x.add(w),A=S),C=V(C,1),w=V(w,1)}return b=E(T,x.j(b)),new D(x,b)}for(x=f;0<=T.l(b);){for(w=Math.max(1,Math.floor(T.m()/b.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=c(w),S=A.j(b);_(S)||0<S.l(T);)w-=C,A=c(w),S=A.j(b);m(A)&&(A=d),x=x.add(A),T=E(T,S)}return new D(x,T)}e.A=function(T){return R(this,T).h},e.and=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)&T.i(C);return new o(w,this.h&T.h)},e.or=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)|T.i(C);return new o(w,this.h|T.h)},e.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)^T.i(C);return new o(w,this.h^T.h)};function O(T){for(var b=T.g.length+1,w=[],C=0;C<b;C++)w[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(w,T.h)}function V(T,b){var w=b>>5;b%=32;for(var C=T.g.length-w,x=[],A=0;A<C;A++)x[A]=0<b?T.i(A+w)>>>b|T.i(A+w+1)<<32-b:T.i(A+w);return new o(x,T.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Pr=o}).apply(typeof E_<"u"?E_:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,Sa,_T,Kc,wd,yT,bT,wT;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,v){return u==Array.prototype||u==Object.prototype||(u[g]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function r(u,g){if(g)t:{var v=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in v))break t;v=v[L]}u=u[u.length-1],I=v[u],g=g(I),g!=I&&g!=null&&t(v,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var v=0,I=!1,L={next:function(){if(!I&&v<u.length){var $=v++;return{value:g($,u[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(u){return u||function(){return i(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,v){return u.call.apply(u.bind,arguments)}function f(u,g,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),u.apply(g,L)}}return function(){return u.apply(g,arguments)}}function d(u,g,v){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,d.apply(null,arguments)}function p(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function m(u,g){function v(){}v.prototype=g.prototype,u.aa=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,L,$){for(var it=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)it[ee-2]=arguments[ee];return g.prototype[L].apply(I,it)}}function _(u){const g=u.length;if(0<g){const v=Array(g);for(let I=0;I<g;I++)v[I]=u[I];return v}return[]}function y(u,g){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(l(I)){const L=u.length||0,$=I.length||0;u.length=L+$;for(let it=0;it<$;it++)u[L+it]=I[it]}else u.push(I)}}class E{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(u){return/^[\s\xa0]*$/.test(u)}function D(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var O=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function V(u,g,v){for(const I in u)g.call(v,u[I],I,u)}function T(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function b(u){const g={};for(const v in u)g[v]=u[v];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,g){let v,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(v in I)u[v]=I[v];for(let $=0;$<w.length;$++)v=w[$],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function x(u){var g=1;u=u.split(":");const v=[];for(;0<g&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function A(u){a.setTimeout(()=>{throw u},0)}function S(){var u=Lt;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ht{constructor(){this.h=this.g=null}add(g,v){const I=Q.get();I.set(g,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Q=new E(()=>new at,u=>u.reset());class at{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,gt=!1,Lt=new ht,z=()=>{const u=a.Promise.resolve(void 0);ot=()=>{u.then(At)}};var At=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(v){A(v)}var g=Q;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}gt=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var Rt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return u}();function Yt(u,g){if(Pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(O){t:{try{R(g.nodeName);var L=!0;break t}catch{}L=!1}L||(g=null)}}else v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ht[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Yt.aa.h.call(this)}}m(Yt,Pt);var Ht={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),st=0;function Z(u,g,v,I,L){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!I,this.ha=L,this.key=++st,this.da=this.fa=!1}function lt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ot(u){this.src=u,this.g={},this.h=0}Ot.prototype.add=function(u,g,v,I,L){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var it=M(u,g,I,L);return-1<it?(g=u[it],v||(g.fa=!1)):(g=new Z(g,this.src,$,!!I,L),g.fa=v,u.push(g)),g};function k(u,g){var v=g.type;if(v in u.g){var I=u.g[v],L=Array.prototype.indexOf.call(I,g,void 0),$;($=0<=L)&&Array.prototype.splice.call(I,L,1),$&&(lt(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function M(u,g,v,I){for(var L=0;L<u.length;++L){var $=u[L];if(!$.da&&$.listener==g&&$.capture==!!v&&$.ha==I)return L}return-1}var N="closure_lm_"+(1e6*Math.random()|0),B={};function H(u,g,v,I,L){if(Array.isArray(g)){for(var $=0;$<g.length;$++)H(u,g[$],v,I,L);return null}return v=yt(v),u&&u[F]?u.K(g,v,c(I)?!!I.capture:!1,L):U(u,g,v,!1,I,L)}function U(u,g,v,I,L,$){if(!g)throw Error("Invalid event type");var it=c(L)?!!L.capture:!!L,ee=nt(u);if(ee||(u[N]=ee=new Ot(u)),v=ee.add(g,v,I,it,$),v.proxy)return v;if(I=rt(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Rt||(L=it),L===void 0&&(L=!1),u.addEventListener(g.toString(),I,L);else if(u.attachEvent)u.attachEvent(W(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function rt(){function u(v){return g.call(u.src,u.listener,v)}const g=pt;return u}function J(u,g,v,I,L){if(Array.isArray(g))for(var $=0;$<g.length;$++)J(u,g[$],v,I,L);else I=c(I)?!!I.capture:!!I,v=yt(v),u&&u[F]?(u=u.i,g=String(g).toString(),g in u.g&&($=u.g[g],v=M($,v,I,L),-1<v&&(lt($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete u.g[g],u.h--)))):u&&(u=nt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=M(g,v,I,L)),(v=-1<u?g[u]:null)&&K(v))}function K(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[F])k(g.i,u);else{var v=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(v,I,u.capture):g.detachEvent?g.detachEvent(W(v),I):g.addListener&&g.removeListener&&g.removeListener(I),(v=nt(g))?(k(v,u),v.h==0&&(v.src=null,g[N]=null)):lt(u)}}}function W(u){return u in B?B[u]:B[u]="on"+u}function pt(u,g){if(u.da)u=!0;else{g=new Yt(g,this);var v=u.listener,I=u.ha||u.src;u.fa&&K(u),u=v.call(I,g)}return u}function nt(u){return u=u[N],u instanceof Ot?u:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(u){return typeof u=="function"?u:(u[ft]||(u[ft]=function(g){return u.handleEvent(g)}),u[ft])}function mt(){et.call(this),this.i=new Ot(this),this.M=this,this.F=null}m(mt,et),mt.prototype[F]=!0,mt.prototype.removeEventListener=function(u,g,v,I){J(this,u,g,v,I)};function It(u,g){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new Pt(g,u);else if(g instanceof Pt)g.target=g.target||u;else{var L=g;g=new Pt(I,u),C(g,L)}if(L=!0,v)for(var $=v.length-1;0<=$;$--){var it=g.g=v[$];L=$t(it,I,!0,g)&&L}if(it=g.g=u,L=$t(it,I,!0,g)&&L,L=$t(it,I,!1,g)&&L,v)for($=0;$<v.length;$++)it=g.g=v[$],L=$t(it,I,!1,g)&&L}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var v=u.g[g],I=0;I<v.length;I++)lt(v[I]);delete u.g[g],u.h--}}this.F=null},mt.prototype.K=function(u,g,v,I){return this.i.add(String(u),g,!1,v,I)},mt.prototype.L=function(u,g,v,I){return this.i.add(String(u),g,!0,v,I)};function $t(u,g,v,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,$=0;$<g.length;++$){var it=g[$];if(it&&!it.da&&it.capture==v){var ee=it.listener,Ne=it.ha||it.src;it.fa&&k(u.i,it),L=ee.call(Ne,I)!==!1&&L}}return L&&!I.defaultPrevented}function we(u,g,v){if(typeof u=="function")v&&(u=d(u,v));else if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ee(u){u.g=we(()=>{u.g=null,u.i&&(u.i=!1,Ee(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class un extends et{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(u){et.call(this),this.h=u,this.g={}}m(Ce,et);var Hn=[];function Yr(u){V(u.g,function(g,v){this.g.hasOwnProperty(v)&&K(g)},u),u.g={}}Ce.prototype.N=function(){Ce.aa.N.call(this),Yr(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Te=a.JSON.stringify,nn=a.JSON.parse,Y=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function tt(){}tt.prototype.h=null;function Ct(u){return u.h||(u.h=u.i())}function Kt(){}var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function In(){Pt.call(this,"d")}m(In,Pt);function Sn(){Pt.call(this,"c")}m(Sn,Pt);var _n={},Ui=null;function Ts(){return Ui=Ui||new mt}_n.La="serverreachability";function Xl(u){Pt.call(this,_n.La,u)}m(Xl,Pt);function Is(u){const g=Ts();It(g,new Xl(g))}_n.STAT_EVENT="statevent";function na(u,g){Pt.call(this,_n.STAT_EVENT,u),this.stat=g}m(na,Pt);function Oe(u){const g=Ts();It(g,new na(g,u))}_n.Ma="timingevent";function Hi(u,g){Pt.call(this,_n.Ma,u),this.size=g}m(Hi,Pt);function nr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function qr(){this.g=!0}qr.prototype.xa=function(){this.g=!1};function nA(u,g,v,I,L,$){u.info(function(){if(u.g)if($)for(var it="",ee=$.split("&"),Ne=0;Ne<ee.length;Ne++){var qt=ee[Ne].split("=");if(1<qt.length){var Ue=qt[0];qt=qt[1];var He=Ue.split("_");it=2<=He.length&&He[1]=="type"?it+(Ue+"="+qt+"&"):it+(Ue+"=redacted&")}}else it=null;else it=$;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+g+`
`+v+`
`+it})}function sA(u,g,v,I,L,$,it){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+g+`
`+v+`
`+$+" "+it})}function ji(u,g,v,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+iA(u,v)+(I?" "+I:"")})}function rA(u,g){u.info(function(){return"TIMEOUT: "+g})}qr.prototype.info=function(){};function iA(u,g){if(!u.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var it=1;it<L.length;it++)L[it]=""}}}}return Te(v)}catch{return g}}var Ql={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},im={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gh;function Jl(){}m(Jl,tt),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},Gh=new Jl;function sr(u,g,v,I){this.j=u,this.i=g,this.l=v,this.R=I||1,this.U=new Ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}var am={},Xh={};function Qh(u,g,v){u.L=1,u.v=nc(Ss(g)),u.m=v,u.P=!0,lm(u,null)}function lm(u,g){u.F=Date.now(),Zl(u),u.A=Ss(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Em(v.i,"t",I),u.C=0,v=u.j.J,u.h=new om,u.g=Bm(u.j,v?g:null,!u.m),0<u.O&&(u.M=new un(d(u.Y,u,u.g),u.O)),g=u.U,v=u.g,I=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Hn[0]=L.toString()),L=Hn);for(var $=0;$<L.length;$++){var it=H(v,L[$],I||g.handleEvent,!1,g.h||g);if(!it)break;g.g[it.key]=it}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Is(),nA(u.i,u.u,u.A,u.l,u.R,u.m)}sr.prototype.ca=function(u){u=u.target;const g=this.M;g&&As(u)==3?g.j():this.Y(u)},sr.prototype.Y=function(u){try{if(u==this.g)t:{const He=As(this.g);var g=this.g.Ba();const Yi=this.g.Z();if(!(3>He)&&(He!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||He!=4||g==7||(g==8||0>=Yi?Is(3):Is(2)),Jh(this);var v=this.g.Z();this.X=v;e:if(cm(this)){var I=Pm(this.g);u="";var L=I.length,$=As(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),sa(this);var it="";break e}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,u+=this.h.i.decode(I[g],{stream:!($&&g==L-1)});I.length=0,this.h.g+=u,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=v==200,sA(this.i,this.u,this.A,this.l,this.R,He,v),this.o){if(this.T&&!this.K){e:{if(this.g){var ee,Ne=this.g;if((ee=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(ee)){var qt=ee;break e}}qt=null}if(v=qt)ji(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,v);else{this.o=!1,this.s=3,Oe(12),Kr(this),sa(this);break t}}if(this.P){v=!0;let jn;for(;!this.J&&this.C<it.length;)if(jn=oA(this,it),jn==Xh){He==4&&(this.s=4,Oe(14),v=!1),ji(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==am){this.s=4,Oe(15),ji(this.i,this.l,it,"[Invalid Chunk]"),v=!1;break}else ji(this.i,this.l,jn,null),Zh(this,jn);if(cm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||it.length!=0||this.h.h||(this.s=1,Oe(16),v=!1),this.o=this.o&&v,!v)ji(this.i,this.l,it,"[Invalid Chunked Response]"),Kr(this),sa(this);else if(0<it.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),of(Ue),Ue.M=!0,Oe(11))}}else ji(this.i,this.l,it,null),Zh(this,it);He==4&&Kr(this),this.o&&!this.J&&(He==4?Lm(this.j,this):(this.o=!1,Zl(this)))}else TA(this.g),v==400&&0<it.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Kr(this),sa(this)}}}catch{}finally{}};function cm(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function oA(u,g){var v=u.C,I=g.indexOf(`
`,v);return I==-1?Xh:(v=Number(g.substring(v,I)),isNaN(v)?am:(I+=1,I+v>g.length?Xh:(g=g.slice(I,I+v),u.C=I+v,g)))}sr.prototype.cancel=function(){this.J=!0,Kr(this)};function Zl(u){u.S=Date.now()+u.I,um(u,u.I)}function um(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=nr(d(u.ba,u),g)}function Jh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}sr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(rA(this.i,this.A),this.L!=2&&(Is(),Oe(17)),Kr(this),this.s=2,sa(this)):um(this,this.S-u)};function sa(u){u.j.G==0||u.J||Lm(u.j,u)}function Kr(u){Jh(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Yr(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Zh(u,g){try{var v=u.j;if(v.G!=0&&(v.g==u||tf(v.h,u))){if(!u.K&&tf(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)lc(v),oc(v);else break t;rf(v),Oe(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=nr(d(v.Za,v),6e3));if(1>=dm(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Xr(v,11)}else if((u.K||v.g==u)&&lc(v),!P(g))for(L=v.Da.g.parse(g),g=0;g<L.length;g++){let qt=L[g];if(v.T=qt[0],qt=qt[1],v.G==2)if(qt[0]=="c"){v.K=qt[1],v.ia=qt[2];const Ue=qt[3];Ue!=null&&(v.la=Ue,v.j.info("VER="+v.la));const He=qt[4];He!=null&&(v.Aa=He,v.j.info("SVER="+v.Aa));const Yi=qt[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(I=1.5*Yi,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const jn=u.g;if(jn){const uc=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uc){var $=I.h;$.g||uc.indexOf("spdy")==-1&&uc.indexOf("quic")==-1&&uc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ef($,$.h),$.h=null))}if(I.D){const af=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(I.ya=af,ce(I.I,I.D,af))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var it=u;if(I.qa=Fm(I,I.J?I.ia:null,I.W),it.K){pm(I.h,it);var ee=it,Ne=I.L;Ne&&(ee.I=Ne),ee.B&&(Jh(ee),Zl(ee)),I.g=it}else Om(I);0<v.i.length&&ac(v)}else qt[0]!="stop"&&qt[0]!="close"||Xr(v,7);else v.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?Xr(v,7):sf(v):qt[0]!="noop"&&v.l&&v.l.ta(qt),v.v=0)}}Is(4)}catch{}}var aA=class{constructor(u,g){this.g=u,this.map=g}};function hm(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dm(u){return u.h?1:u.g?u.g.size:0}function tf(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ef(u,g){u.g?u.g.add(g):u.h=g}function pm(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}hm.prototype.cancel=function(){if(this.i=gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.D);return g}return _(u.i)}function lA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],v=u.length,I=0;I<v;I++)g.push(u[I]);return g}g=[],v=0;for(I in u)g[v++]=u[I];return g}function cA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var v=0;v<u;v++)g.push(v);return g}g=[],v=0;for(const I in u)g[v++]=I;return g}}}function mm(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var v=cA(u),I=lA(u),L=I.length,$=0;$<L;$++)g.call(void 0,I[$],v&&v[$],u)}var vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uA(u,g){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),L=null;if(0<=I){var $=u[v].substring(0,I);L=u[v].substring(I+1)}else $=u[v];g($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Gr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gr){this.h=u.h,tc(this,u.j),this.o=u.o,this.g=u.g,ec(this,u.s),this.l=u.l;var g=u.i,v=new oa;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),_m(this,v),this.m=u.m}else u&&(g=String(u).match(vm))?(this.h=!1,tc(this,g[1]||"",!0),this.o=ra(g[2]||""),this.g=ra(g[3]||"",!0),ec(this,g[4]),this.l=ra(g[5]||"",!0),_m(this,g[6]||"",!0),this.m=ra(g[7]||"")):(this.h=!1,this.i=new oa(null,this.h))}Gr.prototype.toString=function(){var u=[],g=this.j;g&&u.push(ia(g,ym,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ia(g,ym,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ia(v,v.charAt(0)=="/"?dA:fA,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ia(v,gA)),u.join("")};function Ss(u){return new Gr(u)}function tc(u,g,v){u.j=v?ra(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ec(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function _m(u,g,v){g instanceof oa?(u.i=g,mA(u.i,u.h)):(v||(g=ia(g,pA)),u.i=new oa(g,u.h))}function ce(u,g,v){u.i.set(g,v)}function nc(u){return ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ra(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ia(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,hA),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ym=/[#\/\?@]/g,fA=/[#\?:]/g,dA=/[#\?]/g,pA=/[#\?@]/g,gA=/#/g;function oa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function rr(u){u.g||(u.g=new Map,u.h=0,u.i&&uA(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}e=oa.prototype,e.add=function(u,g){rr(this),this.i=null,u=zi(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function bm(u,g){rr(u),g=zi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function wm(u,g){return rr(u),g=zi(u,g),u.g.has(g)}e.forEach=function(u,g){rr(this),this.g.forEach(function(v,I){v.forEach(function(L){u.call(g,L,I,this)},this)},this)},e.na=function(){rr(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let I=0;I<g.length;I++){const L=u[I];for(let $=0;$<L.length;$++)v.push(g[I])}return v},e.V=function(u){rr(this);let g=[];if(typeof u=="string")wm(this,u)&&(g=g.concat(this.g.get(zi(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)g=g.concat(u[v])}return g},e.set=function(u,g){return rr(this),this.i=null,u=zi(this,u),wm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},e.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Em(u,g,v){bm(u,g),0<v.length&&(u.i=null,u.g.set(zi(u,g),_(v)),u.h+=v.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var I=g[v];const $=encodeURIComponent(String(I)),it=this.V(I);for(I=0;I<it.length;I++){var L=$;it[I]!==""&&(L+="="+encodeURIComponent(String(it[I]))),u.push(L)}}return this.i=u.join("&")};function zi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function mA(u,g){g&&!u.j&&(rr(u),u.i=null,u.g.forEach(function(v,I){var L=I.toLowerCase();I!=L&&(bm(this,I),Em(this,L,v))},u)),u.j=g}function vA(u,g){const v=new qr;if(a.Image){const I=new Image;I.onload=p(ir,v,"TestLoadImage: loaded",!0,g,I),I.onerror=p(ir,v,"TestLoadImage: error",!1,g,I),I.onabort=p(ir,v,"TestLoadImage: abort",!1,g,I),I.ontimeout=p(ir,v,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function _A(u,g){const v=new qr,I=new AbortController,L=setTimeout(()=>{I.abort(),ir(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then($=>{clearTimeout(L),$.ok?ir(v,"TestPingServer: ok",!0,g):ir(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ir(v,"TestPingServer: error",!1,g)})}function ir(u,g,v,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(v)}catch{}}function yA(){this.g=new Y}function bA(u,g,v){const I=v||"";try{mm(u,function(L,$){let it=L;c(L)&&(it=Te(L)),g.push(I+$+"="+encodeURIComponent(it))})}catch(L){throw g.push(I+"type="+encodeURIComponent("_badmap")),L}}function sc(u){this.l=u.Ub||null,this.j=u.eb||!1}m(sc,tt),sc.prototype.g=function(){return new rc(this.l,this.j)},sc.prototype.i=function(u){return function(){return u}}({});function rc(u,g){mt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(rc,mt),e=rc.prototype,e.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,la(this)},e.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},e.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}e.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?aa(this):la(this),this.readyState==3&&Tm(this)}},e.Ra=function(u){this.g&&(this.response=this.responseText=u,aa(this))},e.Qa=function(u){this.g&&(this.response=u,aa(this))},e.ga=function(){this.g&&aa(this)};function aa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,la(u)}e.setRequestHeader=function(u,g){this.u.append(u,g)},e.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function la(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Im(u){let g="";return V(u,function(v,I){g+=I,g+=":",g+=v,g+=`\r
`}),g}function nf(u,g,v){t:{for(I in v){var I=!1;break t}I=!0}I||(v=Im(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):ce(u,g,v))}function ge(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ge,mt);var wA=/^https?$/i,EA=["POST","PUT"];e=ge.prototype,e.Ha=function(u){this.J=u},e.ea=function(u,g,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gh.g(),this.v=this.o?Ct(this.o):Ct(Gh),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch($){Sm(this,$);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)v.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())v.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(EA,g,void 0))||I||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,it]of v)this.g.setRequestHeader($,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xm(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Sm(this,$)}};function Sm(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Am(u),ic(u)}function Am(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}e.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),ic(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ic(this,!0)),ge.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Cm(this):this.bb())},e.bb=function(){Cm(this)};function Cm(u){if(u.h&&typeof o<"u"&&(!u.v[1]||As(u)!=4||u.Z()!=2)){if(u.u&&As(u)==4)we(u.Ea,0,u);else if(It(u,"readystatechange"),As(u)==4){u.h=!1;try{const it=u.Z();t:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var I;if(I=it===0){var L=String(u.D).match(vm)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!wA.test(L?L.toLowerCase():"")}v=I}if(v)It(u,"complete"),It(u,"success");else{u.m=6;try{var $=2<As(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Am(u)}}finally{ic(u)}}}}function ic(u,g){if(u.g){xm(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||It(u,"ready");try{v.onreadystatechange=I}catch{}}}function xm(u){u.I&&(a.clearTimeout(u.I),u.I=null)}e.isActive=function(){return!!this.g};function As(u){return u.g?u.g.readyState:0}e.Z=function(){try{return 2<As(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),nn(g)}};function Pm(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TA(u){const g={};u=(u.g&&2<=As(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(P(u[I]))continue;var v=x(u[I]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=g[L]||[];g[L]=$,$.push(v)}T(g,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function km(u){this.Aa=0,this.i=[],this.j=new qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,u),this.cb=ca("retryDelaySeedMs",1e4,u),this.Wa=ca("forwardChannelMaxRetries",2,u),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hm(u&&u.concurrentRequestLimit),this.Da=new yA,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=km.prototype,e.la=8,e.G=1,e.connect=function(u,g,v,I){Oe(0),this.W=u,this.H=g||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Fm(this,null,this.W),ac(this)};function sf(u){if(Dm(u),u.G==3){var g=u.U++,v=Ss(u.I);if(ce(v,"SID",u.K),ce(v,"RID",g),ce(v,"TYPE","terminate"),ua(u,v),g=new sr(u,u.j,g),g.L=2,g.v=nc(Ss(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=Bm(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Zl(g)}$m(u)}function oc(u){u.g&&(of(u),u.g.cancel(),u.g=null)}function Dm(u){oc(u),u.u&&(a.clearTimeout(u.u),u.u=null),lc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ac(u){if(!fm(u.h)&&!u.s){u.s=!0;var g=u.Ga;ot||z(),gt||(ot(),gt=!0),Lt.add(g,u),u.B=0}}function IA(u,g){return dm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=nr(d(u.Ga,u,g),Vm(u,u.B)),u.B++,!0)}e.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new sr(this,this.j,u);let $=this.o;if(this.S&&($?($=b($),C($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=Mm(this,L,g),v=Ss(this.I),ce(v,"RID",u),ce(v,"CVER",22),this.D&&ce(v,"X-HTTP-Session-Id",this.D),ua(this,v),$&&(this.O?g="headers="+encodeURIComponent(String(Im($)))+"&"+g:this.m&&nf(v,this.m,$)),ef(this.h,L),this.Ua&&ce(v,"TYPE","init"),this.P?(ce(v,"$req",g),ce(v,"SID","null"),L.T=!0,Qh(L,v,null)):Qh(L,v,g),this.G=2}}else this.G==3&&(u?Rm(this,u):this.i.length==0||fm(this.h)||Rm(this))};function Rm(u,g){var v;g?v=g.l:v=u.U++;const I=Ss(u.I);ce(I,"SID",u.K),ce(I,"RID",v),ce(I,"AID",u.T),ua(u,I),u.m&&u.o&&nf(I,u.m,u.o),v=new sr(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Mm(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ef(u.h,v),Qh(v,I,g)}function ua(u,g){u.H&&V(u.H,function(v,I){ce(g,I,v)}),u.l&&mm({},function(v,I){ce(g,I,v)})}function Mm(u,g,v){v=Math.min(u.i.length,v);var I=u.l?d(u.l.Na,u.l,u):null;t:{var L=u.i;let $=-1;for(;;){const it=["count="+v];$==-1?0<v?($=L[0].g,it.push("ofs="+$)):$=0:it.push("ofs="+$);let ee=!0;for(let Ne=0;Ne<v;Ne++){let qt=L[Ne].g;const Ue=L[Ne].map;if(qt-=$,0>qt)$=Math.max(0,L[Ne].g-100),ee=!1;else try{bA(Ue,it,"req"+qt+"_")}catch{I&&I(Ue)}}if(ee){I=it.join("&");break t}}}return u=u.i.splice(0,v),g.D=u,I}function Om(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ot||z(),gt||(ot(),gt=!0),Lt.add(g,u),u.v=0}}function rf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=nr(d(u.Fa,u),Vm(u,u.v)),u.v++,!0)}e.Fa=function(){if(this.u=null,Nm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=nr(d(this.ab,this),u)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),oc(this),Nm(this))};function of(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Nm(u){u.g=new sr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Ss(u.qa);ce(g,"RID","rpc"),ce(g,"SID",u.K),ce(g,"AID",u.T),ce(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&ce(g,"TO",u.ja),ce(g,"TYPE","xmlhttp"),ua(u,g),u.m&&u.o&&nf(g,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=nc(Ss(g)),v.m=null,v.P=!0,lm(v,u)}e.Za=function(){this.C!=null&&(this.C=null,oc(this),rf(this),Oe(19))};function lc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Lm(u,g){var v=null;if(u.g==g){lc(u),of(u),u.g=null;var I=2}else if(tf(u.h,g))v=g.D,pm(u.h,g),I=1;else return;if(u.G!=0){if(g.o)if(I==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var L=u.B;I=Ts(),It(I,new Hi(I,v)),ac(u)}else Om(u);else if(L=g.s,L==3||L==0&&0<g.X||!(I==1&&IA(u,g)||I==2&&rf(u)))switch(v&&0<v.length&&(g=u.h,g.i=g.i.concat(v)),L){case 1:Xr(u,5);break;case 4:Xr(u,10);break;case 3:Xr(u,6);break;default:Xr(u,2)}}}function Vm(u,g){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*g}function Xr(u,g){if(u.j.info("Error code "+g),g==2){var v=d(u.fb,u),I=u.Xa;const L=!I;I=new Gr(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tc(I,"https"),nc(I),L?vA(I.toString(),v):_A(I.toString(),v)}else Oe(2);u.G=0,u.l&&u.l.sa(g),$m(u),Dm(u)}e.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function $m(u){if(u.G=0,u.ka=[],u.l){const g=gm(u.h);(g.length!=0||u.i.length!=0)&&(y(u.ka,g),y(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function Fm(u,g,v){var I=v instanceof Gr?Ss(v):new Gr(v);if(I.g!="")g&&(I.g=g+"."+I.g),ec(I,I.s);else{var L=a.location;I=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var $=new Gr(null);I&&tc($,I),g&&($.g=g),L&&ec($,L),v&&($.l=v),I=$}return v=u.D,g=u.ya,v&&g&&ce(I,v,g),ce(I,"VER",u.la),ua(u,I),I}function Bm(u,g,v){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new ge(new sc({eb:v})):new ge(u.pa),g.Ha(u.J),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Um(){}e=Um.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function cc(){}cc.prototype.g=function(u,g){return new yn(u,g)};function yn(u,g){mt.call(this),this.g=new km(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!P(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Wi(this)}m(yn,mt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){sf(this.g)},yn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Te(u),u=v);g.i.push(new aA(g.Ya++,u)),g.G==3&&ac(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,sf(this.g),delete this.g,yn.aa.N.call(this)};function Hm(u){In.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){t:{for(const v in g){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}m(Hm,In);function jm(){Sn.call(this),this.status=1}m(jm,Sn);function Wi(u){this.g=u}m(Wi,Um),Wi.prototype.ua=function(){It(this.g,"a")},Wi.prototype.ta=function(u){It(this.g,new Hm(u))},Wi.prototype.sa=function(u){It(this.g,new jm)},Wi.prototype.ra=function(){It(this.g,"b")},cc.prototype.createWebChannel=cc.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,wT=function(){return new cc},bT=function(){return Ts()},yT=_n,wd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ql.NO_ERROR=0,Ql.TIMEOUT=8,Ql.HTTP_ERROR=6,Kc=Ql,im.COMPLETE="complete",_T=im,Kt.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Sa=Kt,ge.prototype.listenOnce=ge.prototype.L,ge.prototype.getLastError=ge.prototype.Ka,ge.prototype.getLastErrorCode=ge.prototype.Ba,ge.prototype.getStatus=ge.prototype.Z,ge.prototype.getResponseJson=ge.prototype.Oa,ge.prototype.getResponseText=ge.prototype.oa,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Ha,vT=ge}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const T_="@firebase/firestore",I_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new Cp("@firebase/firestore");function Zi(){return Ti.logLevel}function ut(e,...t){if(Ti.logLevel<=Bt.DEBUG){const n=t.map(Fp);Ti.debug(`Firestore (${jo}): ${e}`,...n)}}function qs(e,...t){if(Ti.logLevel<=Bt.ERROR){const n=t.map(Fp);Ti.error(`Firestore (${jo}): ${e}`,...n)}}function To(e,...t){if(Ti.logLevel<=Bt.WARN){const n=t.map(Fp);Ti.warn(`Firestore (${jo}): ${e}`,...n)}}function Fp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ET(e,s,n)}function ET(e,t,n){let s=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw qs(s),new Error(s)}function Jt(e,t,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,e||ET(t,r,s)}function Mt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Zs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class lO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class cO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uO{constructor(t){this.t=t,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Jt(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kr,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kr)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Jt(typeof s.accessToken=="string",31837,{l:s}),new TT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new Ye(t)}}class hO{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fO{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new hO(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dO{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Jt(this.o===void 0,3512);const s=i=>{i.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ut("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new S_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new S_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=pO(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=t.charAt(r[i]%62))}return s}}function Ft(e,t){return e<t?-1:e>t?1:0}function Ed(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=e.codePointAt(n),r=t.codePointAt(n);if(s!==r){if(s<128&&r<128)return Ft(s,r);{const i=IT(),o=gO(i.encode(A_(e,n)),i.encode(A_(t,n)));return o!==0?o:Ft(s,r)}}n+=s>65535?2:1}return Ft(e.length,t.length)}function A_(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function gO(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ft(e[n],t[n]);return Ft(e.length,t.length)}function Io(e,t,n){return e.length===t.length&&e.every((s,r)=>n(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=-62135596800,x_=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(t){return Se.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*x_);return new Se(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<C_)throw new bt(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x_}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-C_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(t){return new kt(t)}static min(){return new kt(new Se(0,0))}static max(){return new kt(new Se(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="__name__";class rs{constructor(t,n,s){n===void 0?n=0:n>t.length&&St(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&St(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return rs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof rs?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let r=0;r<s;r++){const i=rs.compareSegments(t.get(r),n.get(r));if(i!==0)return i}return Ft(t.length,n.length)}static compareSegments(t,n){const s=rs.isNumericId(t),r=rs.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?rs.extractNumericId(t).compare(rs.extractNumericId(n)):Ed(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pr.fromString(t.substring(4,t.length-2))}}class me extends rs{construct(t,n,s){return new me(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new bt(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new me(n)}static emptyPath(){return new me([])}}const mO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends rs{construct(t,n,s){return new Fe(t,n,s)}static isValidIdentifier(t){return mO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P_}static keyField(){return new Fe([P_])}static fromServerFormat(t){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new bt(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new bt(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new bt(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new bt(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.path=t}static fromPath(t){return new wt(me.fromString(t))}static fromName(t){return new wt(me.fromString(t).popFirst(5))}static empty(){return new wt(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&me.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return me.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new me(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function vO(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=kt.fromTimestamp(s===1e9?new Se(n+1,0):new Se(n,s));return new Or(r,wt.empty(),t)}function _O(e){return new Or(e.readTime,e.key,pl)}class Or{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Or(kt.min(),wt.empty(),pl)}static max(){return new Or(kt.max(),wt.empty(),pl)}}function yO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=wt.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==bO)throw e;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&St(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new j((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):j.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):j.reject(n)}static resolve(t){return new j((n,s)=>{n(t)})}static reject(t){return new j((n,s)=>{s(t)})}static waitFor(t){return new j((n,s)=>{let r=0,i=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(t){let n=j.resolve(!1);for(const s of t)n=n.next(r=>r?j.resolve(r):s());return n}static forEach(t,n){const s=[];return t.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(t,n){return new j((s,r)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(h=>{o[c]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(t,n){return new j((s,r)=>{const i=()=>{t()===!0?n().next(()=>{i()},r):s()};i()})}}function EO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wo(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Sh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=-1;function Ah(e){return e==null}function Iu(e){return e===0&&1/e==-1/0}function TO(e){return typeof e=="number"&&Number.isInteger(e)&&!Iu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="";function IO(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=k_(t)),t=SO(e.get(n),t);return k_(t)}function SO(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const i=e.charAt(r);switch(i){case"\0":n+="";break;case AT:n+="";break;default:n+=i}}return n}function k_(e){return e+AT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Di(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function CT(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,n){this.comparator=t,this.root=n||Le.EMPTY}insert(t,n){return new pe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Le.BLACK,null,null))}remove(t){return new pe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Le.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vc(this.root,t,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vc(this.root,t,this.comparator,!0)}}class vc{constructor(t,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?s(t.key,n):1,n&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Le{constructor(t,n,s,r,i){this.key=t,this.value=n,this.color=s??Le.RED,this.left=r??Le.EMPTY,this.right=i??Le.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,r,i){return new Le(t??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Le.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Le.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St(43730,{key:this.key,value:this.value});if(this.right.isRed())throw St(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw St(27949);return t+(this.isRed()?0:1)}}Le.EMPTY=null,Le.RED=!0,Le.BLACK=!1;Le.EMPTY=new class{constructor(){this.size=0}get key(){throw St(57766)}get value(){throw St(16141)}get color(){throw St(16727)}get left(){throw St(29726)}get right(){throw St(36894)}copy(t,n,s,r,i){return this}insert(t,n,s){return new Le(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.comparator=t,this.data=new pe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(t){return new R_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ae)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ae(this.comparator);return n.data=t,n}}class R_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this.fields=t,t.sort(Fe.comparator)}static empty(){return new Wn([])}unionWith(t){let n=new Ae(Fe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Wn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Io(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xT("Invalid base64 string: "+i):i}}(t);return new Be(n)}static fromUint8Array(t){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new Be(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const AO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(e){if(Jt(!!e,39018),typeof e=="string"){let t=0;const n=AO.exec(e);if(Jt(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:_e(e.seconds),nanos:_e(e.nanos)}}function _e(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Lr(e){return typeof e=="string"?Be.fromBase64String(e):Be.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="server_timestamp",kT="__type__",DT="__previous_value__",RT="__local_write_time__";function Up(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[kT])===null||n===void 0?void 0:n.stringValue)===PT}function Ch(e){const t=e.mapValue.fields[DT];return Up(t)?Ch(t):t}function gl(e){const t=Nr(e.mapValue.fields[RT].timestampValue);return new Se(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t,n,s,r,i,o,a,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Su="(default)";class ml{constructor(t,n){this.projectId=t,this.database=n||Su}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===Su}isEqual(t){return t instanceof ml&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__type__",xO="__max__",_c={mapValue:{}},OT="__vector__",Au="value";function Vr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Up(e)?4:kO(e)?9007199254740991:PO(e)?10:11:St(28295,{value:e})}function ms(e,t){if(e===t)return!0;const n=Vr(e);if(n!==Vr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gl(e).isEqual(gl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Nr(r.timestampValue),a=Nr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return Lr(r.bytesValue).isEqual(Lr(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return _e(r.geoPointValue.latitude)===_e(i.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _e(r.integerValue)===_e(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=_e(r.doubleValue),a=_e(i.doubleValue);return o===a?Iu(o)===Iu(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Io(e.arrayValue.values||[],t.arrayValue.values||[],ms);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(D_(o)!==D_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ms(o[l],a[l])))return!1;return!0}(e,t);default:return St(52216,{left:e})}}function vl(e,t){return(e.values||[]).find(n=>ms(n,t))!==void 0}function So(e,t){if(e===t)return 0;const n=Vr(e),s=Vr(t);if(n!==s)return Ft(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=_e(i.integerValue||i.doubleValue),l=_e(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return M_(e.timestampValue,t.timestampValue);case 4:return M_(gl(e),gl(t));case 5:return Ed(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Lr(i),l=Lr(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ft(a[c],l[c]);if(h!==0)return h}return Ft(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=Ft(_e(i.latitude),_e(o.latitude));return a!==0?a:Ft(_e(i.longitude),_e(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return O_(e.arrayValue,t.arrayValue);case 10:return function(i,o){var a,l,c,h;const f=i.fields||{},d=o.fields||{},p=(a=f[Au])===null||a===void 0?void 0:a.arrayValue,m=(l=d[Au])===null||l===void 0?void 0:l.arrayValue,_=Ft(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((h=m==null?void 0:m.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:O_(p,m)}(e.mapValue,t.mapValue);case 11:return function(i,o){if(i===_c.mapValue&&o===_c.mapValue)return 0;if(i===_c.mapValue)return 1;if(o===_c.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const d=Ed(l[f],h[f]);if(d!==0)return d;const p=So(a[l[f]],c[h[f]]);if(p!==0)return p}return Ft(l.length,h.length)}(e.mapValue,t.mapValue);default:throw St(23264,{Pe:n})}}function M_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=Nr(e),s=Nr(t),r=Ft(n.seconds,s.seconds);return r!==0?r:Ft(n.nanos,s.nanos)}function O_(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=So(n[r],s[r]);if(i)return i}return Ft(n.length,s.length)}function Ao(e){return Td(e)}function Td(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=Nr(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Lr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return wt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Td(i);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Td(n.fields[o])}`;return r+"}"}(e.mapValue):St(61005,{value:e})}function Gc(e){switch(Vr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ch(e);return t?16+Gc(t):16;case 5:return 2*e.stringValue.length;case 6:return Lr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Gc(i),0)}(e.arrayValue);case 10:case 11:return function(s){let r=0;return Di(s.fields,(i,o)=>{r+=i.length+Gc(o)}),r}(e.mapValue);default:throw St(13486,{value:e})}}function Id(e){return!!e&&"integerValue"in e}function Hp(e){return!!e&&"arrayValue"in e}function N_(e){return!!e&&"nullValue"in e}function L_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xc(e){return!!e&&"mapValue"in e}function PO(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[MT])===null||n===void 0?void 0:n.stringValue)===OT}function ja(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Di(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=ja(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ja(e.arrayValue.values[n]);return t}return Object.assign({},e)}function kO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===xO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.value=t}static empty(){return new Pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Xc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ja(n)}setAll(t){let n=Fe.emptyPath(),s={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=ja(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(t){const n=this.field(t.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ms(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=n.mapValue.fields[t.get(s)];Xc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,s){Di(n,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new Pn(ja(this.value))}}function NT(e){const t=[];return Di(e.fields,(n,s)=>{const r=new Fe([n]);if(Xc(s)){const i=NT(s.mapValue).fields;if(i.length===0)t.push(r);else for(const o of i)t.push(r.child(o))}else t.push(r)}),new Wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t,n,s,r,i,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ke(t,0,kt.min(),kt.min(),kt.min(),Pn.empty(),0)}static newFoundDocument(t,n,s,r){return new Ke(t,1,n,kt.min(),s,r,0)}static newNoDocument(t,n){return new Ke(t,2,n,kt.min(),kt.min(),Pn.empty(),0)}static newUnknownDocument(t,n){return new Ke(t,3,n,kt.min(),kt.min(),Pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,n){this.position=t,this.inclusive=n}}function V_(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(i.field.isKeyField()?s=wt.comparator(wt.fromName(o.referenceValue),n.key):s=So(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function $_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ms(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t,n="asc"){this.field=t,this.dir=n}}function DO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class Ie extends LT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new MO(t,n,s):n==="array-contains"?new LO(t,s):n==="in"?new VO(t,s):n==="not-in"?new $O(t,s):n==="array-contains-any"?new FO(t,s):new Ie(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new OO(t,s):new NO(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(So(n,this.value)):n!==null&&Vr(this.value)===Vr(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends LT{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new vs(t,n)}matches(t){return VT(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function VT(e){return e.op==="and"}function $T(e){return RO(e)&&VT(e)}function RO(e){for(const t of e.filters)if(t instanceof vs)return!1;return!0}function Sd(e){if(e instanceof Ie)return e.field.canonicalString()+e.op.toString()+Ao(e.value);if($T(e))return e.filters.map(t=>Sd(t)).join(",");{const t=e.filters.map(n=>Sd(n)).join(",");return`${e.op}(${t})`}}function FT(e,t){return e instanceof Ie?function(s,r){return r instanceof Ie&&s.op===r.op&&s.field.isEqual(r.field)&&ms(s.value,r.value)}(e,t):e instanceof vs?function(s,r){return r instanceof vs&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&FT(o,r.filters[a]),!0):!1}(e,t):void St(19439)}function BT(e){return e instanceof Ie?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(e):e instanceof vs?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(e):"Filter"}class MO extends Ie{constructor(t,n,s){super(t,n,s),this.key=wt.fromName(s.referenceValue)}matches(t){const n=wt.comparator(t.key,this.key);return this.matchesComparison(n)}}class OO extends Ie{constructor(t,n){super(t,"in",n),this.keys=UT("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class NO extends Ie{constructor(t,n){super(t,"not-in",n),this.keys=UT("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function UT(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>wt.fromName(s.referenceValue))}class LO extends Ie{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hp(n)&&vl(n.arrayValue,this.value)}}class VO extends Ie{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vl(this.value.arrayValue,n)}}class $O extends Ie{constructor(t,n){super(t,"not-in",n)}matches(t){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vl(this.value.arrayValue,n)}}class FO extends Ie{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(t,n=null,s=[],r=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function F_(e,t=null,n=[],s=[],r=null,i=null,o=null){return new BO(e,t,n,s,r,i,o)}function jp(e){const t=Mt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Sd(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ah(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Ao(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Ao(s)).join(",")),t.Ie=n}return t.Ie}function zp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!DO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!FT(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$_(e.startAt,t.startAt)&&$_(e.endAt,t.endAt)}function Ad(e){return wt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function UO(e,t,n,s,r,i,o,a){return new xh(e,t,n,s,r,i,o,a)}function Wp(e){return new xh(e)}function B_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function HO(e){return e.collectionGroup!==null}function za(e){const t=Mt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Fe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new xu(i,s))}),n.has(Fe.keyField().canonicalString())||t.Ee.push(new xu(Fe.keyField(),s))}return t.Ee}function hs(e){const t=Mt(e);return t.de||(t.de=jO(t,za(e))),t.de}function jO(e,t){if(e.limitType==="F")return F_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new xu(r.field,i)});const n=e.endAt?new Cu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Cu(e.startAt.position,e.startAt.inclusive):null;return F_(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Cd(e,t,n){return new xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ph(e,t){return zp(hs(e),hs(t))&&e.limitType===t.limitType}function HT(e){return`${jp(hs(e))}|lt:${e.limitType}`}function to(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>BT(r)).join(", ")}]`),Ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Ao(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Ao(r)).join(",")),`Target(${s})`}(hs(e))}; limitType=${e.limitType})`}function kh(e,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):wt.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(e,t)&&function(s,r){for(const i of za(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(e,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(e,t)&&function(s,r){return!(s.startAt&&!function(o,a,l){const c=V_(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,za(s),r)||s.endAt&&!function(o,a,l){const c=V_(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,za(s),r))}(e,t)}function zO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jT(e){return(t,n)=>{let s=!1;for(const r of za(e)){const i=WO(r,t,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function WO(e,t,n){const s=e.field.isKeyField()?wt.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?So(l,c):St(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return St(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Di(this.inner,(n,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return CT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new pe(wt.comparator);function Ks(){return YO}const zT=new pe(wt.comparator);function Aa(...e){let t=zT;for(const n of e)t=t.insert(n.key,n);return t}function WT(e){let t=zT;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function ui(){return Wa()}function YT(){return Wa()}function Wa(){return new Ri(e=>e.toString(),(e,t)=>e.isEqual(t))}const qO=new pe(wt.comparator),KO=new Ae(wt.comparator);function Ut(...e){let t=KO;for(const n of e)t=t.add(n);return t}const GO=new Ae(Ft);function XO(){return GO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(t)?"-0":t}}function qT(e){return{integerValue:""+e}}function QO(e,t){return TO(t)?qT(t):Yp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this._=void 0}}function JO(e,t,n){return e instanceof Pu?function(r,i){const o={fields:{[kT]:{stringValue:PT},[RT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Up(i)&&(i=Ch(i)),i&&(o.fields[DT]=i),{mapValue:o}}(n,t):e instanceof _l?GT(e,t):e instanceof yl?XT(e,t):function(r,i){const o=KT(r,i),a=U_(o)+U_(r.Re);return Id(o)&&Id(r.Re)?qT(a):Yp(r.serializer,a)}(e,t)}function ZO(e,t,n){return e instanceof _l?GT(e,t):e instanceof yl?XT(e,t):n}function KT(e,t){return e instanceof ku?function(s){return Id(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class Pu extends Dh{}class _l extends Dh{constructor(t){super(),this.elements=t}}function GT(e,t){const n=QT(t);for(const s of e.elements)n.some(r=>ms(r,s))||n.push(s);return{arrayValue:{values:n}}}class yl extends Dh{constructor(t){super(),this.elements=t}}function XT(e,t){let n=QT(t);for(const s of e.elements)n=n.filter(r=>!ms(r,s));return{arrayValue:{values:n}}}class ku extends Dh{constructor(t,n){super(),this.serializer=t,this.Re=n}}function U_(e){return _e(e.integerValue||e.doubleValue)}function QT(e){return Hp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function t2(e,t){return e.field.isEqual(t.field)&&function(s,r){return s instanceof _l&&r instanceof _l||s instanceof yl&&r instanceof yl?Io(s.elements,r.elements,ms):s instanceof ku&&r instanceof ku?ms(s.Re,r.Re):s instanceof Pu&&r instanceof Pu}(e.transform,t.transform)}class e2{constructor(t,n){this.version=t,this.transformResults=n}}class Hs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Hs}static exists(t){return new Hs(void 0,t)}static updateTime(t){return new Hs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Qc(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Rh{}function JT(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new t1(e.key,Hs.none()):new Hl(e.key,e.data,Hs.none());{const n=e.data,s=Pn.empty();let r=new Ae(Fe.comparator);for(let i of t.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Mi(e.key,s,new Wn(r.toArray()),Hs.none())}}function n2(e,t,n){e instanceof Hl?function(r,i,o){const a=r.value.clone(),l=j_(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Mi?function(r,i,o){if(!Qc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=j_(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(ZT(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ya(e,t,n,s){return e instanceof Hl?function(i,o,a,l){if(!Qc(i.precondition,o))return a;const c=i.value.clone(),h=z_(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,s):e instanceof Mi?function(i,o,a,l){if(!Qc(i.precondition,o))return a;const c=z_(i.fieldTransforms,l,o),h=o.data;return h.setAll(ZT(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(e,t,n,s):function(i,o,a){return Qc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function s2(e,t){let n=null;for(const s of e.fieldTransforms){const r=t.data.field(s.field),i=KT(s.transform,r||null);i!=null&&(n===null&&(n=Pn.empty()),n.set(s.field,i))}return n||null}function H_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Io(s,r,(i,o)=>t2(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hl extends Rh{constructor(t,n,s,r=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mi extends Rh{constructor(t,n,s,r,i=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function j_(e,t,n){const s=new Map;Jt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,a=t.data.field(i.field);s.set(i.field,ZO(o,a,n[r]))}return s}function z_(e,t,n){const s=new Map;for(const r of e){const i=r.transform,o=n.data.field(r.field);s.set(r.field,JO(i,o,t))}return s}class t1 extends Rh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r2 extends Rh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,n,s,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&n2(i,t,s[r])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ya(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ya(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=YT();return this.mutations.forEach(r=>{const i=t.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=JT(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(kt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Io(this.mutations,t.mutations,(n,s)=>H_(n,s))&&Io(this.baseMutations,t.baseMutations,(n,s)=>H_(n,s))}}class qp{constructor(t,n,s,r){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(t,n,s){Jt(t.mutations.length===s.length,58842,{fe:t.mutations.length,ge:s.length});let r=function(){return qO}();const i=t.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new qp(t,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,zt;function l2(e){switch(e){case q.OK:return St(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return St(15467,{code:e})}}function e1(e){if(e===void 0)return qs("GRPC error has no .code"),q.UNKNOWN;switch(e){case be.OK:return q.OK;case be.CANCELLED:return q.CANCELLED;case be.UNKNOWN:return q.UNKNOWN;case be.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case be.INTERNAL:return q.INTERNAL;case be.UNAVAILABLE:return q.UNAVAILABLE;case be.UNAUTHENTICATED:return q.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case be.NOT_FOUND:return q.NOT_FOUND;case be.ALREADY_EXISTS:return q.ALREADY_EXISTS;case be.PERMISSION_DENIED:return q.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case be.ABORTED:return q.ABORTED;case be.OUT_OF_RANGE:return q.OUT_OF_RANGE;case be.UNIMPLEMENTED:return q.UNIMPLEMENTED;case be.DATA_LOSS:return q.DATA_LOSS;default:return St(39323,{code:e})}}(zt=be||(be={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Pr([4294967295,4294967295],0);function W_(e){const t=IT().encode(e),n=new mT;return n.update(t),new Uint8Array(n.digest())}function Y_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Pr([n,s],0),new Pr([r,i],0)]}class Kp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(s<0)throw new Ca(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Pr.fromNumber(this.pe)}we(t,n,s){let r=t.add(n.multiply(Pr.fromNumber(s)));return r.compare(c2)===1&&(r=new Pr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=W_(t),[s,r]=Y_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.be(o))return!1}return!0}static create(t,n,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Kp(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.pe===0)return;const n=W_(t),[s,r]=Y_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t,n,s,r,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const r=new Map;return r.set(t,jl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Mh(kt.min(),r,new pe(Ft),Ks(),Ut())}}class jl{constructor(t,n,s,r,i){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new jl(s,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,n,s,r){this.De=t,this.removedTargetIds=n,this.key=s,this.ve=r}}class n1{constructor(t,n){this.targetId=t,this.Ce=n}}class s1{constructor(t,n,s=Be.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=r}}class q_{constructor(){this.Fe=0,this.Me=K_(),this.xe=Be.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Ut(),n=Ut(),s=Ut();return this.Me.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:St(38017,{changeType:i})}}),new jl(this.xe,this.Oe,t,n,s)}Qe(){this.Ne=!1,this.Me=K_()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Jt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class u2{constructor(t){this.ze=t,this.je=new Map,this.He=Ks(),this.Je=yc(),this.Ye=yc(),this.Ze=new pe(Ft)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const s=this.rt(n);switch(t.state){case 0:this.it(n)&&s.ke(t.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(t.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(t.resumeToken));break;default:St(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(t){const n=t.targetId,s=t.Ce.count,r=this._t(n);if(r){const i=r.target;if(Ad(i))if(s===0){const o=new wt(i.path);this.tt(n,o,Ke.newNoDocument(o,kt.min()))}else Jt(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(t),l=a?this.lt(a,t,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Lr(s).toUint8Array()}catch(l){if(l instanceof xT)return To("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Kp(o,r,i)}catch(l){return To(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(t,n,s){return n.Ce.count===s-this.Tt(t,n.targetId)?0:2}Tt(t,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(t){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Ad(a.target)){const l=new wt(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Ke.newNoDocument(l,t))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=Ut();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(t));const r=new Mh(t,n,this.Ze,this.He,s);return this.He=Ks(),this.Je=yc(),this.Ye=yc(),this.Ze=new pe(Ft),r}et(t,n){if(!this.it(t))return;const s=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,s){if(!this.it(t))return;const r=this.rt(t);this.dt(t,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),s&&(this.He=this.He.insert(n,s))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new q_,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ae(Ft),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ae(Ft),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new q_),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function yc(){return new pe(wt.comparator)}function K_(){return new pe(wt.comparator)}const h2={asc:"ASCENDING",desc:"DESCENDING"},f2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d2={and:"AND",or:"OR"};class p2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xd(e,t){return e.useProto3Json||Ah(t)?t:{value:t}}function Du(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function r1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function g2(e,t){return Du(e,t.toTimestamp())}function fs(e){return Jt(!!e,49232),kt.fromTimestamp(function(n){const s=Nr(n);return new Se(s.seconds,s.nanos)}(e))}function Gp(e,t){return Pd(e,t).canonicalString()}function Pd(e,t){const n=function(r){return new me(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function i1(e){const t=me.fromString(e);return Jt(u1(t),10190,{key:t.toString()}),t}function kd(e,t){return Gp(e.databaseId,t.path)}function kf(e,t){const n=i1(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wt(a1(n))}function o1(e,t){return Gp(e.databaseId,t)}function m2(e){const t=i1(e);return t.length===4?me.emptyPath():a1(t)}function Dd(e){return new me(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function a1(e){return Jt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function G_(e,t,n){return{name:kd(e,t),fields:n.value.mapValue.fields}}function v2(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:St(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(Jt(h===void 0||typeof h=="string",58123),Be.fromBase64String(h||"")):(Jt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Be.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const h=c.code===void 0?q.UNKNOWN:e1(c.code);return new bt(h,c.message||"")}(o);n=new s1(s,r,i,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=kf(e,s.document.name),i=fs(s.document.updateTime),o=s.document.createTime?fs(s.document.createTime):kt.min(),a=new Pn({mapValue:{fields:s.document.fields}}),l=Ke.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Jc(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=kf(e,s.document),i=s.readTime?fs(s.readTime):kt.min(),o=Ke.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Jc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=kf(e,s.document),i=s.removedTargetIds||[];n=new Jc([],i,r,null)}else{if(!("filter"in t))return St(11601,{Vt:t});{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new a2(r,i),a=s.targetId;n=new n1(a,o)}}return n}function _2(e,t){let n;if(t instanceof Hl)n={update:G_(e,t.key,t.value)};else if(t instanceof t1)n={delete:kd(e,t.key)};else if(t instanceof Mi)n={update:G_(e,t.key,t.data),updateMask:C2(t.fieldMask)};else{if(!(t instanceof r2))return St(16599,{ft:t.type});n={verify:kd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ku)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw St(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:g2(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:St(27497)}(e,t.precondition)),n}function y2(e,t){return e&&e.length>0?(Jt(t!==void 0,14353),e.map(n=>function(r,i){let o=r.updateTime?fs(r.updateTime):fs(i);return o.isEqual(kt.min())&&(o=fs(i)),new e2(o,r.transformResults||[])}(n,t))):[]}function b2(e,t){return{documents:[o1(e,t.path)]}}function w2(e,t){const n={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=o1(e,r);const i=function(c){if(c.length!==0)return c1(vs.create(c,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(d){return{field:eo(d.field),direction:I2(d.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xd(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{gt:n,parent:r}}function E2(e){let t=m2(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Jt(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let i=[];n.where&&(i=function(f){const d=l1(f);return d instanceof vs&&$T(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(m){return new xu(no(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,Ah(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(f){const d=!!f.before,p=f.values||[];return new Cu(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const d=!f.before,p=f.values||[];return new Cu(p,d)}(n.endAt)),UO(t,r,o,i,a,"F",l,c)}function T2(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function l1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=no(n.unaryFilter.field);return Ie.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=no(n.unaryFilter.field);return Ie.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=no(n.unaryFilter.field);return Ie.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=no(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return St(61313);default:return St(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ie.create(no(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return St(58110);default:return St(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return vs.create(n.compositeFilter.filters.map(s=>l1(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return St(1026)}}(n.compositeFilter.op))}(e):St(30097,{filter:e})}function I2(e){return h2[e]}function S2(e){return f2[e]}function A2(e){return d2[e]}function eo(e){return{fieldPath:e.canonicalString()}}function no(e){return Fe.fromServerFormat(e.fieldPath)}function c1(e){return e instanceof Ie?function(n){if(n.op==="=="){if(L_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(N_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(N_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:S2(n.op),value:n.value}}}(e):e instanceof vs?function(n){const s=n.getFilters().map(r=>c1(r));return s.length===1?s[0]:{compositeFilter:{op:A2(n.op),filters:s}}}(e):St(54877,{filter:e})}function C2(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function u1(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,n,s,r,i=kt.min(),o=kt.min(),a=Be.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Er(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t){this.wt=t}}function P2(e){const t=E2({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Cd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.Cn=new D2}addToCollectionParentIndex(t,n){return this.Cn.add(n),j.resolve()}getCollectionParents(t,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return j.resolve()}deleteFieldIndex(t,n){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,n){return j.resolve()}getDocumentsMatchingTarget(t,n){return j.resolve(null)}getIndexType(t,n){return j.resolve(0)}getFieldIndexes(t,n){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,n){return j.resolve(Or.min())}getMinOffsetFromCollectionGroup(t,n){return j.resolve(Or.min())}updateCollectionGroup(t,n,s){return j.resolve()}updateIndexEntries(t,n){return j.resolve()}}class D2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n]||new Ae(me.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Ae(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h1=41943040;class dn{static withCacheSize(t){return new dn(t,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(h1,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Co(0)}static lr(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LruGarbageCollector",R2=1048576;function J_([e,t],[n,s]){const r=Ft(e,n);return r===0?Ft(t,s):r}class M2{constructor(t){this.Er=t,this.buffer=new Ae(J_),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();J_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){ut(Q_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wo(n)?ut(Q_,"Ignoring IndexedDB error during garbage collection: ",n):await zo(n)}await this.mr(3e5)})}}class N2{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return j.resolve(Sh.le);const s=new M2(n);return this.gr.forEachTarget(t,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(t,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.gr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(X_)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),X_):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let s,r,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(t,r))).next(f=>(s=f,a=Date.now(),this.removeTargets(t,s,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(t,s))).next(f=>(c=Date.now(),Zi()<=Bt.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function L2(e,t){return new N2(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.changes=new Ri(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ke.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?j.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,n,s,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(s!==null&&Ya(s.mutation,r,Wn.empty(),Se.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Ut()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Ut()){const r=ui();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,s).next(i=>{let o=Aa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=ui();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Ut()))}populateOverlays(t,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,r){let i=Ks();const o=Wa(),a=function(){return Wa()}();return n.forEach((l,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Mi)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ya(h.mutation,c,h.mutation.getFieldMask(),Se.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new $2(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const s=Wa();let r=new pe((o,a)=>o-a),i=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=s.get(l)||Wn.empty();h=a.applyToLocalView(c,h),s.set(l,h);const f=(r.get(a.batchId)||Ut()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=YT();h.forEach(d=>{if(!i.has(d)){const p=JT(n.get(d),s.get(d));p!==null&&f.set(d,p),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return j.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,r){return function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):HO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,r):this.getDocumentsMatchingCollectionQuery(t,n,s,r)}getNextDocuments(t,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,r-i.size):j.resolve(ui());let a=pl,l=i;return o.next(c=>j.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(t,h).next(d=>{l=l.insert(h,d)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,Ut())).next(h=>({batchId:a,changes:WT(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new wt(n)).next(s=>{let r=Aa();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,s,r){const i=n.collectionGroup;let o=Aa();return this.indexManager.getCollectionParents(t,i).next(a=>j.forEach(a,l=>{const c=function(f,d){return new xh(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,s,r).next(h=>{h.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,i,r))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ke.newInvalidDocument(h)))});let a=Aa();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Ya(h.mutation,c,Wn.empty(),Se.now()),kh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return j.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:fs(r.createTime)}}(n)),j.resolve()}getNamedQuery(t,n){return j.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(r){return{name:r.name,query:P2(r.bundledQuery),readTime:fs(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.overlays=new pe(wt.comparator),this.Qr=new Map}getOverlay(t,n){return j.resolve(this.overlays.get(n))}getOverlays(t,n){const s=ui();return j.forEach(n,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((r,i)=>{this.St(t,n,i)}),j.resolve()}removeOverlaysForBatchId(t,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),j.resolve()}getOverlaysForCollection(t,n,s){const r=ui(),i=n.length+1,o=new wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return j.resolve(r)}getOverlaysForCollectionGroup(t,n,s,r){let i=new pe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=ui(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ui(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return j.resolve(a)}St(t,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new o2(n,s));let i=this.Qr.get(n);i===void 0&&(i=Ut(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.$r=new Ae(xe.Ur),this.Kr=new Ae(xe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const s=new xe(t,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.zr(new xe(t,n))}jr(t,n){t.forEach(s=>this.removeReference(s,n))}Hr(t){const n=new wt(new me([])),s=new xe(n,t),r=new xe(n,t+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new wt(new me([])),s=new xe(n,t),r=new xe(n,t+1);let i=Ut();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new xe(t,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class xe{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return wt.comparator(t.key,n.key)||Ft(t.Zr,n.Zr)}static Wr(t,n){return Ft(t.Zr,n.Zr)||wt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ae(xe.Ur)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new i2(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new xe(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(t,n){return j.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Bp:this.nr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new xe(n,0),r=new xe(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ae(Ft);return n.forEach(r=>{const i=new xe(r,0),o=new xe(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),j.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,r=s.length+1;let i=s;wt.isDocumentKey(i)||(i=i.child(""));const o=new xe(new wt(i),0);let a=new Ae(Ft);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Zr)),!0)},o),j.resolve(this.ni(a))}ni(t){const n=[];return t.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Jt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return j.forEach(n.mutations,r=>{const i=new xe(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Xr=s})}sr(t){}containsKey(t,n){const s=new xe(n,0),r=this.Xr.firstAfterOrEqual(s);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t){this.ii=t,this.docs=function(){return new pe(wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return j.resolve(s?s.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(t,n){let s=Ks();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ke.newInvalidDocument(r))}),j.resolve(s)}getDocumentsMatchingQuery(t,n,s,r){let i=Ks();const o=n.path,a=new wt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yO(_O(h),s)<=0||(r.has(h.key)||kh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(t,n,s,r){St(9500)}si(t,n){return j.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new W2(this)}getSize(t){return j.resolve(this.size)}}class W2 extends V2{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(t,r)):this.Br.removeEntry(s)}),j.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t){this.persistence=t,this.oi=new Ri(n=>jp(n),zp),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this._i=0,this.ai=new Xp,this.targetCount=0,this.ui=Co.cr()}forEachTarget(t,n){return this.oi.forEach((s,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),j.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new Co(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,j.resolve()}updateTargetData(t,n){return this.Tr(n),j.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),j.waitFor(i).next(()=>r)}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,n){const s=this.oi.get(n)||null;return j.resolve(s)}addMatchingKeys(t,n,s){return this.ai.Gr(n,s),j.resolve()}removeMatchingKeys(t,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(t,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),j.resolve()}getMatchingKeysForTargetId(t,n){const s=this.ai.Yr(n);return j.resolve(s)}containsKey(t,n){return j.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t,n){this.ci={},this.overlays={},this.li=new Sh(0),this.hi=!1,this.hi=!0,this.Pi=new H2,this.referenceDelegate=t(this),this.Ti=new Y2(this),this.indexManager=new k2,this.remoteDocumentCache=function(r){return new z2(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new x2(n),this.Ei=new B2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new U2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ci[t.toKey()];return s||(s=new j2(n,this.referenceDelegate),this.ci[t.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,s){ut("MemoryPersistence","Starting transaction:",t);const r=new q2(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(t,n){return j.or(Object.values(this.ci).map(s=>()=>s.containsKey(t,n)))}}class q2 extends wO{constructor(t){super(),this.currentSequenceNumber=t}}class Qp{constructor(t){this.persistence=t,this.Vi=new Xp,this.mi=null}static fi(t){return new Qp(t)}get gi(){if(this.mi)return this.mi;throw St(60996)}addReference(t,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),j.resolve()}removeReference(t,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),j.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),j.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.gi,s=>{const r=wt.fromPath(s);return this.pi(t,r).next(i=>{i||n.removeEntry(r,kt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return j.or([()=>j.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Ru{constructor(t,n){this.persistence=t,this.yi=new Ri(s=>IO(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=L2(this,n)}static fi(t,n){return new Ru(t,n)}di(){}Ai(t){return j.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(r=>s+r))}br(t){let n=0;return this.yr(t,s=>{n++}).next(()=>n)}yr(t,n){return j.forEach(this.yi,(s,r)=>this.Dr(t,s,r).next(i=>i?j.resolve():n(r)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(t,o=>this.Dr(t,o,n).next(a=>{a||(s++,i.removeEntry(o,kt.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),j.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.yi.set(s,t.currentSequenceNumber),j.resolve()}removeReference(t,n,s){return this.yi.set(s,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),j.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Gc(t.data.value)),n}Dr(t,n,s){return j.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.yi.get(n);return j.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,n,s,r){this.targetId=t,this.fromCache=n,this.ds=s,this.As=r}static Rs(t,n){let s=Ut(),r=Ut();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jp(t,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return xk()?8:EO(Ze())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,s,r){const i={result:null};return this.ws(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(t,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new K2;return this.Ss(t,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(t,n,o,a.size)})}).next(()=>i.result)}Ds(t,n,s,r){return s.documentReadCount<this.gs?(Zi()<=Bt.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),j.resolve()):(Zi()<=Bt.DEBUG&&ut("QueryEngine","Query:",to(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(Zi()<=Bt.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,hs(n))):j.resolve())}ws(t,n){if(B_(n))return j.resolve(null);let s=hs(n);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Cd(n,null,"F"),s=hs(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const o=Ut(...i);return this.ys.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.vs(n,a);return this.Cs(n,c,o,l.readTime)?this.ws(t,Cd(n,null,"F")):this.Fs(t,c,n,l)}))})))}bs(t,n,s,r){return B_(n)||r.isEqual(kt.min())?j.resolve(null):this.ys.getDocuments(t,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?j.resolve(null):(Zi()<=Bt.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),to(n)),this.Fs(t,o,n,vO(r,pl)).next(a=>a))})}vs(t,n){let s=new Ae(jT(t));return n.forEach((r,i)=>{kh(t,i)&&(s=s.add(i))}),s}Cs(t,n,s,r){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(t,n,s){return Zi()<=Bt.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",to(n)),this.ys.getDocumentsMatchingQuery(t,n,Or.min(),s)}Fs(t,n,s,r){return this.ys.getDocumentsMatchingQuery(t,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",X2=3e8;class Q2{constructor(t,n,s,r){this.persistence=t,this.Ms=n,this.serializer=r,this.xs=new pe(Ft),this.Os=new Ri(i=>jp(i),zp),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(s)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new F2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function J2(e,t,n,s){return new Q2(e,t,n,s)}async function d1(e,t){const n=Mt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Ut();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z2(e,t){const n=Mt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,d=f.keys();let p=j.resolve();return d.forEach(m=>{p=p.next(()=>h.getEntry(l,m)).next(_=>{const y=c.docVersions.get(m);Jt(y!==null,48541),_.version.compareTo(y)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),h.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,s,t,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=Ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(s,r))})}function p1(e){const t=Mt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function tN(e,t){const n=Mt(e),s=t.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];t.targetChanges.forEach((h,f)=>{const d=r.get(f);if(!d)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,f)));let p=d.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Be.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),r=r.insert(f,p),function(_,y,E){return _.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=X2?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(d,p,h)&&a.push(n.Ti.updateTargetData(i,p))});let l=Ks(),c=Ut();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(eN(i,o,t.documentUpdates).next(h=>{l=h.qs,c=h.Qs})),!s.isEqual(kt.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(f=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return j.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.xs=r,i))}function eN(e,t,n){let s=Ut(),r=Ut();return n.forEach(i=>s=s.add(i)),t.getEntries(e,s).next(i=>{let o=Ks();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(kt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ut(Zp,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{qs:o,Qs:r}})}function nN(e,t){const n=Mt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Bp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function sN(e,t){const n=Mt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,t).next(i=>i?(r=i,j.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new Er(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(t,s.targetId)),s})}async function Rd(e,t,n){const s=Mt(e),r=s.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Wo(o))throw o;ut(Zp,`Failed to update sequence numbers for target ${t}: ${o}`)}s.xs=s.xs.remove(t),s.Os.delete(r.target)}function Z_(e,t,n){const s=Mt(e);let r=kt.min(),i=Ut();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=Mt(l),d=f.Os.get(h);return d!==void 0?j.resolve(f.xs.get(d)):f.Ti.getTargetData(c,h)}(s,o,hs(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,t,n?r:kt.min(),n?i:Ut())).next(a=>(rN(s,zO(t),a),{documents:a,$s:i})))}function rN(e,t,n){let s=e.Ns.get(t)||kt.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),e.Ns.set(t,s)}class ty{constructor(){this.activeTargetIds=XO()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class iN{constructor(){this.xo=new ty,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,s){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new ty,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="ConnectivityMonitor";class ny{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ut(ey,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){ut(ey,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function Md(){return bc===null?bc=function(){return 268435456+Math.round(2147483648*Math.random())}():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="RestConnection",aN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lN{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===Su?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(t,n,s,r,i){const o=Md(),a=this.jo(t,n.toUriEncodedString());ut(Df,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,r,i);const{host:c}=new URL(a),h=Bo(c);return this.Jo(t,a,l,s,h).then(f=>(ut(Df,`Received RPC '${t}' ${o}: `,f),f),f=>{throw To(Df,`RPC '${t}' ${o} failed with error: `,f,"url: ",a,"request:",s),f})}Yo(t,n,s,r,i,o){return this.zo(t,n,s,r,i)}Ho(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}jo(t,n){const s=aN[t];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="WebChannelConnection";class uN extends lN{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,r,i){const o=Md();return new Promise((a,l)=>{const c=new vT;c.setWithCredentials(!0),c.listenOnce(_T.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kc.NO_ERROR:const f=c.getResponseJson();ut(je,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),a(f);break;case Kc.TIMEOUT:ut(je,`RPC '${t}' ${o} timed out`),l(new bt(q.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const d=c.getStatus();if(ut(je,`RPC '${t}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const _=function(E){const P=E.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(P)>=0?P:q.UNKNOWN}(m.status);l(new bt(_,m.message))}else l(new bt(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new bt(q.UNAVAILABLE,"Connection failed."));break;default:St(9055,{h_:t,streamId:o,P_:c.getLastErrorCode(),T_:c.getLastError()})}}finally{ut(je,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(r);ut(je,`RPC '${t}' ${o} sending request:`,r),c.send(n,"POST",h,s,15)})}I_(t,n,s){const r=Md(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=wT(),a=bT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");ut(je,`Creating RPC '${t}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);this.E_(f);let d=!1,p=!1;const m=new cN({Zo:y=>{p?ut(je,`Not sending because RPC '${t}' stream ${r} is closed:`,y):(d||(ut(je,`Opening RPC '${t}' stream ${r} transport.`),f.open(),d=!0),ut(je,`RPC '${t}' stream ${r} sending:`,y),f.send(y))},Xo:()=>f.close()}),_=(y,E,P)=>{y.listen(E,D=>{try{P(D)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,Sa.EventType.OPEN,()=>{p||(ut(je,`RPC '${t}' stream ${r} transport opened.`),m.__())}),_(f,Sa.EventType.CLOSE,()=>{p||(p=!0,ut(je,`RPC '${t}' stream ${r} transport closed`),m.u_(),this.d_(f))}),_(f,Sa.EventType.ERROR,y=>{p||(p=!0,To(je,`RPC '${t}' stream ${r} transport errored. Name:`,y.name,"Message:",y.message),m.u_(new bt(q.UNAVAILABLE,"The operation could not be completed")))}),_(f,Sa.EventType.MESSAGE,y=>{var E;if(!p){const P=y.data[0];Jt(!!P,16349);const D=P,R=(D==null?void 0:D.error)||((E=D[0])===null||E===void 0?void 0:E.error);if(R){ut(je,`RPC '${t}' stream ${r} received error:`,R);const O=R.status;let V=function(w){const C=be[w];if(C!==void 0)return e1(C)}(O),T=R.message;V===void 0&&(V=q.INTERNAL,T="Unknown error status: "+O+" with message "+R.message),p=!0,m.u_(new bt(V,T)),f.close()}else ut(je,`RPC '${t}' stream ${r} received:`,P),m.c_(P)}}),_(a,yT.STAT_EVENT,y=>{y.stat===wd.PROXY?ut(je,`RPC '${t}' stream ${r} detected buffering proxy`):y.stat===wd.NOPROXY&&ut(je,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.a_()},0),m}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e){return new p2(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t,n,s=1e3,r=1.5,i=6e4){this.xi=t,this.timerId=n,this.A_=s,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-s);r>0&&ut("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="PersistentStream";class m1{constructor(t,n,s,r,i,o,a,l){this.xi=t,this.S_=s,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new g1(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(qs(n.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.v_===n&&this.z_(s,r)},s=>{t(()=>{const r=new bt(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(r)})})}z_(t,n){const s=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.j_(r))}),this.stream.onMessage(r=>{s(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return ut(sy,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(ut(sy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hN extends m1{constructor(t,n,s,r,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=v2(this.serializer,t),s=function(i){if(!("targetChange"in i))return kt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?kt.min():o.readTime?fs(o.readTime):kt.min()}(t);return this.listener.Y_(n,s)}Z_(t){const n={};n.database=Dd(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ad(l)?{documents:b2(i,l)}:{query:w2(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=r1(i,o.resumeToken);const c=xd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(kt.min())>0){a.readTime=Du(i,o.snapshotVersion.toTimestamp());const c=xd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const s=T2(this.serializer,t);s&&(n.labels=s),this.Q_(n)}X_(t){const n={};n.database=Dd(this.serializer),n.removeTarget=t,this.Q_(n)}}class fN extends m1{constructor(t,n,s,r,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=y2(t.writeResults,t.commitTime),s=fs(t.commitTime);return this.listener.ra(s,n)}ia(){const t={};t.database=Dd(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>_2(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{}class pN extends dN{constructor(t,n,s,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new bt(q.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,s,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(t,Pd(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new bt(q.UNKNOWN,i.toString())})}Yo(t,n,s,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(t,Pd(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(q.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class gN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(qs(n),this.ua=!1):ut("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="RemoteStore";class mN{constructor(t,n,s,r,i){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Oi(this)&&(ut(Ii,"Restarting streams for network reachability change."),await async function(l){const c=Mt(l);c.da.add(4),await zl(c),c.Va.set("Unknown"),c.da.delete(4),await Nh(c)}(this))})}),this.Va=new gN(s,r)}}async function Nh(e){if(Oi(e))for(const t of e.Aa)await t(!0)}async function zl(e){for(const t of e.Aa)await t(!1)}function v1(e,t){const n=Mt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),sg(n)?ng(n):Yo(n).N_()&&eg(n,t))}function tg(e,t){const n=Mt(e),s=Yo(n);n.Ea.delete(t),s.N_()&&_1(n,t),n.Ea.size===0&&(s.N_()?s.k_():Oi(n)&&n.Va.set("Unknown"))}function eg(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yo(e).Z_(t)}function _1(e,t){e.ma.Ke(t),Yo(e).X_(t)}function ng(e){e.ma=new u2({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Yo(e).start(),e.Va.ca()}function sg(e){return Oi(e)&&!Yo(e).O_()&&e.Ea.size>0}function Oi(e){return Mt(e).da.size===0}function y1(e){e.ma=void 0}async function vN(e){e.Va.set("Online")}async function _N(e){e.Ea.forEach((t,n)=>{eg(e,t)})}async function yN(e,t){y1(e),sg(e)?(e.Va.Pa(t),ng(e)):e.Va.set("Unknown")}async function bN(e,t,n){if(e.Va.set("Online"),t instanceof s1&&t.state===2&&t.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(e,t)}catch(s){ut(Ii,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Mu(e,s)}else if(t instanceof Jc?e.ma.Xe(t):t instanceof n1?e.ma.ot(t):e.ma.nt(t),!n.isEqual(kt.min()))try{const s=await p1(e.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ea.get(c);h&&i.Ea.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.Ea.get(l);if(!h)return;i.Ea.set(l,h.withResumeToken(Be.EMPTY_BYTE_STRING,h.snapshotVersion)),_1(i,l);const f=new Er(h.target,l,c,h.sequenceNumber);eg(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(s){ut(Ii,"Failed to raise snapshot:",s),await Mu(e,s)}}async function Mu(e,t,n){if(!Wo(t))throw t;e.da.add(1),await zl(e),e.Va.set("Offline"),n||(n=()=>p1(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ut(Ii,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Nh(e)})}function b1(e,t){return t().catch(n=>Mu(e,n,t))}async function Lh(e){const t=Mt(e),n=$r(t);let s=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Bp;for(;wN(t);)try{const r=await nN(t.localStore,s);if(r===null){t.Ia.length===0&&n.k_();break}s=r.batchId,EN(t,r)}catch(r){await Mu(t,r)}w1(t)&&E1(t)}function wN(e){return Oi(e)&&e.Ia.length<10}function EN(e,t){e.Ia.push(t);const n=$r(e);n.N_()&&n.ea&&n.ta(t.mutations)}function w1(e){return Oi(e)&&!$r(e).O_()&&e.Ia.length>0}function E1(e){$r(e).start()}async function TN(e){$r(e).ia()}async function IN(e){const t=$r(e);for(const n of e.Ia)t.ta(n.mutations)}async function SN(e,t,n){const s=e.Ia.shift(),r=qp.from(s,t,n);await b1(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Lh(e)}async function AN(e,t){t&&$r(e).ea&&await async function(s,r){if(function(o){return l2(o)&&o!==q.ABORTED}(r.code)){const i=s.Ia.shift();$r(s).L_(),await b1(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Lh(s)}}(e,t),w1(e)&&E1(e)}async function ry(e,t){const n=Mt(e);n.asyncQueue.verifyOperationInProgress(),ut(Ii,"RemoteStore received new credentials");const s=Oi(n);n.da.add(3),await zl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Nh(n)}async function CN(e,t){const n=Mt(e);t?(n.da.delete(2),await Nh(n)):t||(n.da.add(2),await zl(n),n.Va.set("Unknown"))}function Yo(e){return e.fa||(e.fa=function(n,s,r){const i=Mt(n);return i.oa(),new hN(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{e_:vN.bind(null,e),n_:_N.bind(null,e),i_:yN.bind(null,e),Y_:bN.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),sg(e)?ng(e):e.Va.set("Unknown")):(await e.fa.stop(),y1(e))})),e.fa}function $r(e){return e.ga||(e.ga=function(n,s,r){const i=Mt(n);return i.oa(),new fN(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:TN.bind(null,e),i_:AN.bind(null,e),na:IN.bind(null,e),ra:SN.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Lh(e)):(await e.ga.stop(),e.Ia.length>0&&(ut(Ii,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,s,r,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,r,i){const o=Date.now()+s,a=new rg(t,n,o,r,i);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(e,t){if(qs("AsyncQueue",`${t}: ${e}`),Wo(e))return new bt(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(t){return new mo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||wt.comparator(n.key,s.key):(n,s)=>wt.comparator(n.key,s.key),this.keyedMap=Aa(),this.sortedSet=new pe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof mo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new mo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.pa=new pe(wt.comparator)}track(t){const n=t.doc.key,s=this.pa.get(n);s?t.type!==0&&s.type===3?this.pa=this.pa.insert(n,t):t.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.pa=this.pa.remove(n):t.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):St(63341,{Vt:t,ya:s}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,s)=>{t.push(s)}),t}}class xo{constructor(t,n,s,r,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new xo(t,n,mo.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ph(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class PN{constructor(){this.queries=oy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Mt(n),i=r.queries;r.queries=oy(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(s)})})(this,new bt(q.ABORTED,"Firestore shutting down"))}}function oy(){return new Ri(e=>HT(e),Ph)}async function kN(e,t){const n=Mt(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.Da()&&t.va()&&(s=2):(i=new xN,s=t.va()?0:1);try{switch(s){case 0:i.ba=await n.onListen(r,!0);break;case 1:i.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ig(o,`Initialization of query '${to(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&og(n)}async function DN(e,t){const n=Mt(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=t.va()?0:1:!i.Da()&&t.va()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function RN(e,t){const n=Mt(e);let s=!1;for(const r of t){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(r)&&(s=!0);o.ba=r}}s&&og(n)}function MN(e,t,n){const s=Mt(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function og(e){e.Ca.forEach(t=>{t.next()})}var Od,ay;(ay=Od||(Od={})).xa="default",ay.Cache="cache";class ON{constructor(t,n,s){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new xo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t){this.key=t}}class I1{constructor(t){this.key=t}}class NN{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ut(),this.mutatedKeys=Ut(),this.Za=jT(t),this.Xa=new mo(this.Za)}get eu(){return this.Ha}tu(t,n){const s=n?n.nu:new iy,r=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,f)=>{const d=r.get(h),p=kh(this.query,f)?f:null,m=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;d&&p?d.data.isEqual(p.data)?m!==_&&(s.track({type:3,doc:p}),y=!0):this.ru(d,p)||(s.track({type:2,doc:p}),y=!0,(l&&this.Za(p,l)>0||c&&this.Za(p,c)<0)&&(a=!0)):!d&&p?(s.track({type:0,doc:p}),y=!0):d&&!p&&(s.track({type:1,doc:d}),y=!0,(l||c)&&(a=!0)),y&&(p?(o=o.add(p),i=_?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Xa:o,nu:s,Cs:a,mutatedKeys:i}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,r){const i=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const o=t.nu.wa();o.sort((h,f)=>function(p,m){const _=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St(20277,{Vt:y})}};return _(p)-_(m)}(h.type,f.type)||this.Za(h.doc,f.doc)),this.iu(s),r=r!=null&&r;const a=n&&!r?this.su():[],l=this.Ya.size===0&&this.current&&!r?1:0,c=l!==this.Ja;return this.Ja=l,o.length!==0||c?{snapshot:new xo(this.query,t.Xa,i,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new iy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Ut(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return t.forEach(s=>{this.Ya.has(s)||n.push(new I1(s))}),this.Ya.forEach(s=>{t.has(s)||n.push(new T1(s))}),n}au(t){this.Ha=t.$s,this.Ya=Ut();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return xo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ag="SyncEngine";class LN{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class VN{constructor(t){this.key=t,this.cu=!1}}class $N{constructor(t,n,s,r,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Ri(a=>HT(a),Ph),this.Pu=new Map,this.Tu=new Set,this.Iu=new pe(wt.comparator),this.Eu=new Map,this.du=new Xp,this.Au={},this.Ru=new Map,this.Vu=Co.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function FN(e,t,n=!0){const s=k1(e);let r;const i=s.hu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.uu()):r=await S1(s,t,n,!0),r}async function BN(e,t){const n=k1(e);await S1(n,t,!0,!1)}async function S1(e,t,n,s){const r=await sN(e.localStore,hs(t)),i=r.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await UN(e,t,i,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&v1(e.remoteStore,r),a}async function UN(e,t,n,s,r){e.fu=(f,d,p)=>async function(_,y,E,P){let D=y.view.tu(E);D.Cs&&(D=await Z_(_.localStore,y.query,!1).then(({documents:T})=>y.view.tu(T,D)));const R=P&&P.targetChanges.get(y.targetId),O=P&&P.targetMismatches.get(y.targetId)!=null,V=y.view.applyChanges(D,_.isPrimaryClient,R,O);return cy(_,y.targetId,V.ou),V.snapshot}(e,f,d,p);const i=await Z_(e.localStore,t,!0),o=new NN(t,i.$s),a=o.tu(i.documents),l=jl.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);cy(e,n,c.ou);const h=new LN(t,n,o);return e.hu.set(t,h),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function HN(e,t,n){const s=Mt(e),r=s.hu.get(t),i=s.Pu.get(r.targetId);if(i.length>1)return s.Pu.set(r.targetId,i.filter(o=>!Ph(o,t))),void s.hu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Rd(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&tg(s.remoteStore,r.targetId),Nd(s,r.targetId)}).catch(zo)):(Nd(s,r.targetId),await Rd(s.localStore,r.targetId,!0))}async function jN(e,t){const n=Mt(e),s=n.hu.get(t),r=n.Pu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tg(n.remoteStore,s.targetId))}async function zN(e,t,n){const s=QN(e);try{const r=await function(o,a){const l=Mt(o),c=Se.now(),h=a.reduce((p,m)=>p.add(m.key),Ut());let f,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ks(),_=Ut();return l.Bs.getEntries(p,h).next(y=>{m=y,m.forEach((E,P)=>{P.isValidDocument()||(_=_.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(y=>{f=y;const E=[];for(const P of a){const D=s2(P,f.get(P.key).overlayedDocument);D!=null&&E.push(new Mi(P.key,D,NT(D.value.mapValue),Hs.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(y=>{d=y;const E=y.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(p,y.batchId,E)})}).then(()=>({batchId:d.batchId,changes:WT(f)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Au[o.currentUser.toKey()];c||(c=new pe(Ft)),c=c.insert(a,l),o.Au[o.currentUser.toKey()]=c}(s,r.batchId,n),await Wl(s,r.changes),await Lh(s.remoteStore)}catch(r){const i=ig(r,"Failed to persist write");n.reject(i)}}async function A1(e,t){const n=Mt(e);try{const s=await tN(n.localStore,t);t.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(Jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?Jt(o.cu,14607):r.removedDocuments.size>0&&(Jt(o.cu,42227),o.cu=!1))}),await Wl(n,s,t)}catch(s){await zo(s)}}function ly(e,t,n){const s=Mt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.hu.forEach((i,o)=>{const a=o.view.Fa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Mt(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const d of f.Sa)d.Fa(a)&&(c=!0)}),c&&og(l)}(s.eventManager,t),r.length&&s.lu.Y_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function WN(e,t,n){const s=Mt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Eu.get(t),i=r&&r.key;if(i){let o=new pe(wt.comparator);o=o.insert(i,Ke.newNoDocument(i,kt.min()));const a=Ut().add(i),l=new Mh(kt.min(),new Map,new pe(Ft),o,a);await A1(s,l),s.Iu=s.Iu.remove(i),s.Eu.delete(t),lg(s)}else await Rd(s.localStore,t,!1).then(()=>Nd(s,t,n)).catch(zo)}async function YN(e,t){const n=Mt(e),s=t.batch.batchId;try{const r=await Z2(n.localStore,t);x1(n,s,null),C1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wl(n,r)}catch(r){await zo(r)}}async function qN(e,t,n){const s=Mt(e);try{const r=await function(o,a){const l=Mt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Jt(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(s.localStore,t);x1(s,t,n),C1(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Wl(s,r)}catch(r){await zo(r)}}function C1(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function x1(e,t,n){const s=Mt(e);let r=s.Au[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),s.Au[s.currentUser.toKey()]=r}}function Nd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Pu.get(t))e.hu.delete(s),n&&e.lu.gu(s,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(s=>{e.du.containsKey(s)||P1(e,s)})}function P1(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(tg(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),lg(e))}function cy(e,t,n){for(const s of n)s instanceof T1?(e.du.addReference(s.key,t),KN(e,s)):s instanceof I1?(ut(ag,"Document no longer in limbo: "+s.key),e.du.removeReference(s.key,t),e.du.containsKey(s.key)||P1(e,s.key)):St(19791,{pu:s})}function KN(e,t){const n=t.key,s=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(s)||(ut(ag,"New document in limbo: "+n),e.Tu.add(s),lg(e))}function lg(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new wt(me.fromString(t)),s=e.Vu.next();e.Eu.set(s,new VN(n)),e.Iu=e.Iu.insert(n,s),v1(e.remoteStore,new Er(hs(Wp(n.path)),s,"TargetPurposeLimboResolution",Sh.le))}}async function Wl(e,t,n){const s=Mt(e),r=[],i=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,l)=>{o.push(s.fu(l,t,n).then(c=>{var h;if((c||n)&&s.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){r.push(c);const f=Jp.Rs(l.targetId,c);i.push(f)}}))}),await Promise.all(o),s.lu.Y_(r),await async function(l,c){const h=Mt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(c,d=>j.forEach(d.ds,p=>h.persistence.referenceDelegate.addReference(f,d.targetId,p)).next(()=>j.forEach(d.As,p=>h.persistence.referenceDelegate.removeReference(f,d.targetId,p)))))}catch(f){if(!Wo(f))throw f;ut(Zp,"Failed to update sequence numbers: "+f)}for(const f of c){const d=f.targetId;if(!f.fromCache){const p=h.xs.get(d),m=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(m);h.xs=h.xs.insert(d,_)}}}(s.localStore,i))}async function GN(e,t){const n=Mt(e);if(!n.currentUser.isEqual(t)){ut(ag,"User change. New user:",t.toKey());const s=await d1(n.localStore,t);n.currentUser=t,function(i,o){i.Ru.forEach(a=>{a.forEach(l=>{l.reject(new bt(q.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Wl(n,s.ks)}}function XN(e,t){const n=Mt(e),s=n.Eu.get(t);if(s&&s.cu)return Ut().add(s.key);{let r=Ut();const i=n.Pu.get(t);if(!i)return r;for(const o of i){const a=n.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function k1(e){const t=Mt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=A1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=WN.bind(null,t),t.lu.Y_=RN.bind(null,t.eventManager),t.lu.gu=MN.bind(null,t.eventManager),t}function QN(e){const t=Mt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=YN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,t),t}class Ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Oh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return J2(this.persistence,new G2,t.initialUser,this.serializer)}Su(t){return new f1(Qp.fi,this.serializer)}bu(t){return new iN}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ou.provider={build:()=>new Ou};class JN extends Ou{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Jt(this.persistence.referenceDelegate instanceof Ru,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new O2(s,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new f1(s=>Ru.fi(s,n),this.serializer)}}class Ld{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ly(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),await CN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new PN}()}createDatastore(t){const n=Oh(t.databaseInfo.databaseId),s=function(i){return new uN(i)}(t.databaseInfo);return function(i,o,a,l){return new pN(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,r,i,o,a){return new mN(s,r,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ly(this.syncEngine,n,0),function(){return ny.C()?new ny:new oN}())}createSyncEngine(t,n){return function(r,i,o,a,l,c,h){const f=new $N(r,i,o,a,l,c);return h&&(f.mu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const i=Mt(r);ut(Ii,"RemoteStore shutting down."),i.da.add(5),await zl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ld.provider={build:()=>new Ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):qs("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class tL{constructor(t,n,s,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ye.UNAUTHENTICATED,this.clientId=ST.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ut(Fr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ut(Fr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=ig(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Mf(e,t){e.asyncQueue.verifyOperationInProgress(),ut(Fr,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async r=>{s.isEqual(r)||(await d1(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await eL(e);ut(Fr,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>ry(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,r)=>ry(t.remoteStore,r)),e._onlineComponents=t}async function eL(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ut(Fr,"Using user provided OfflineComponentProvider");try{await Mf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await Mf(e,new Ou)}}else ut(Fr,"Using default OfflineComponentProvider"),await Mf(e,new JN(void 0));return e._offlineComponents}async function D1(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ut(Fr,"Using user provided OnlineComponentProvider"),await uy(e,e._uninitializedComponentsProvider._online)):(ut(Fr,"Using default OnlineComponentProvider"),await uy(e,new Ld))),e._onlineComponents}function nL(e){return D1(e).then(t=>t.syncEngine)}async function sL(e){const t=await D1(e),n=t.eventManager;return n.onListen=FN.bind(null,t.syncEngine),n.onUnlisten=HN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=BN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jN.bind(null,t.syncEngine),n}function rL(e,t,n={}){const s=new kr;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new ZN({next:d=>{h.xu(),o.enqueueAndForget(()=>DN(i,f));const p=d.docs.has(a);!p&&d.fromCache?c.reject(new bt(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?c.reject(new bt(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new ON(Wp(a.path),h,{includeMetadataChanges:!0,Qa:!0});return kN(i,f)}(await sL(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(e,t,n){if(!n)throw new bt(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function oL(e,t,n,s){if(t===!0&&s===!0)throw new bt(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function fy(e){if(!wt.isDocumentKey(e))throw new bt(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function cg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":St(12329,{type:typeof e})}function bl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cg(e);throw new bt(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="firestore.googleapis.com",dy=!0;class py{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M1,this.ssl=dy}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:dy;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=h1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<R2)throw new bt(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}oL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R1((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new bt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new bt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new bt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ug{constructor(t,n,s,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new py({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bt(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new bt(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new py(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new lO;switch(s.type){case"firstParty":return new fO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new bt(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=hy.get(n);s&&(ut("ComponentProvider","Removing Datastore"),hy.delete(n),s.terminate())}(this),Promise.resolve()}}function aL(e,t,n,s={}){var r;e=bl(e,ug);const i=Bo(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;i&&(xE(`https://${l}`),PE("Firestore",!0)),o.host!==M1&&o.host!==l&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:s});if(!yi(c,a)&&(e._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=Ye.MOCK_USER;else{h=yk(s.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new bt(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ye(d)}e._authCredentials=new cO(new TT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new hg(this.firestore,t,this._query)}}class Mn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Mn(this.firestore,t,this._key)}}class wl extends hg{constructor(t,n,s){super(t,n,Wp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Mn(this.firestore,null,new wt(t))}withConverter(t){return new wl(this.firestore,t,this._path)}}function gy(e,t,...n){if(e=Vn(e),arguments.length===1&&(t=ST.newId()),iL("doc","path",t),e instanceof ug){const s=me.fromString(t,...n);return fy(s),new Mn(e,null,new wt(s))}{if(!(e instanceof Mn||e instanceof wl))throw new bt(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(me.fromString(t,...n));return fy(s),new Mn(e.firestore,e instanceof wl?e.converter:null,new wt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="AsyncQueue";class vy{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new g1(this,"async_queue_retry"),this.rc=()=>{const s=Rf();s&&ut(my,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=t;const n=Rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new kr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Wo(t))throw t;ut(my,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(s=>{throw this.Xu=s,this.ec=!1,qs("INTERNAL UNHANDLED ERROR: ",_y(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(t,n,s){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const r=rg.createAndSchedule(this,t,n,s,i=>this.uc(i));return this.Zu.push(r),r}oc(){this.Xu&&St(47125,{cc:_y(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function _y(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class fg extends ug{constructor(t,n,s,r){super(t,n,s,r),this.type="firestore",this._queue=new vy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vy(t),this._firestoreClient=void 0,await t}}}function lL(e,t){const n=typeof e=="object"?e:ME(),s=typeof e=="string"?e:Su,r=Pp(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=vk("firestore");i&&aL(r,...i)}return r}function O1(e){if(e._terminated)throw new bt(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||cL(e),e._firestoreClient}function cL(e){var t,n,s;const r=e._freezeSettings(),i=function(a,l,c,h){return new CO(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,R1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new tL(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Po(Be.fromBase64String(t))}catch(n){throw new bt(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Po(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=/^__.*__$/;class hL{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Mi(t,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(t,this.data,n,this.fieldTransforms)}}function L1(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St(40011,{Ic:e})}}class mg{constructor(t,n,s,r,i,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new mg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.dc({path:s,Rc:!1});return r.Vc(t),r}mc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.dc({path:s,Rc:!1});return r.Ec(),r}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Nu(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(L1(this.Ic)&&uL.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class fL{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Oh(t)}bc(t,n,s,r=!1){return new mg({Ic:t,methodName:n,wc:s,path:Fe.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dL(e){const t=e._freezeSettings(),n=Oh(e._databaseId);return new fL(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pL(e,t,n,s,r,i={}){const o=e.bc(i.merge||i.mergeFields?2:0,t,n,r);B1("Data must be an object, but it was:",o,s);const a=$1(s,o);let l,c;if(i.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const d=gL(t,f,n);if(!o.contains(d))throw new bt(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);vL(h,d)||h.push(d)}l=new Wn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new hL(new Pn(a),l,c)}function V1(e,t){if(F1(e=Vn(e)))return B1("Unsupported field value:",t,e),$1(e,t);if(e instanceof N1)return function(s,r){if(!L1(r.Ic))throw r.gc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=V1(a,r.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(s,r){if((s=Vn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return QO(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Se.fromDate(s);return{timestampValue:Du(r.serializer,i)}}if(s instanceof Se){const i=new Se(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Du(r.serializer,i)}}if(s instanceof pg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Po)return{bytesValue:r1(r.serializer,s._byteString)};if(s instanceof Mn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gp(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof gg)return function(o,a){return{mapValue:{fields:{[MT]:{stringValue:OT},[Au]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.gc("VectorValues must only contain numeric values.");return Yp(a.serializer,c)})}}}}}}(s,r);throw r.gc(`Unsupported field value: ${cg(s)}`)}(e,t)}function $1(e,t){const n={};return CT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Di(e,(s,r)=>{const i=V1(r,t.Ac(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function F1(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Se||e instanceof pg||e instanceof Po||e instanceof Mn||e instanceof N1||e instanceof gg)}function B1(e,t,n){if(!F1(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=cg(n);throw s==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+s)}}function gL(e,t,n){if((t=Vn(t))instanceof dg)return t._internalPath;if(typeof t=="string")return U1(e,t);throw Nu("Field path arguments must be of type string or ",e,!1,void 0,n)}const mL=new RegExp("[~\\*/\\[\\]]");function U1(e,t,n){if(t.search(mL)>=0)throw Nu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dg(...t.split("."))._internalPath}catch{throw Nu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Nu(e,t,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new bt(q.INVALID_ARGUMENT,a+e+l)}function vL(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t,n,s,r,i){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _L(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(j1("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _L extends H1{data(){return super.data()}}function j1(e,t){return typeof t=="string"?U1(e,t):t instanceof dg?t._internalPath:t._delegate._internalPath}class yL{convertValue(t,n="none"){switch(Vr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw St(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Di(t,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(t){var n,s,r;const i=(r=(s=(n=t.fields)===null||n===void 0?void 0:n[Au].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>_e(o.doubleValue));return new gg(i)}convertGeoPoint(t){return new pg(_e(t.latitude),_e(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Ch(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gl(t));default:return null}}convertTimestamp(t){const n=Nr(t);return new Se(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=me.fromString(t);Jt(u1(s),9688,{name:t});const r=new ml(s.get(1),s.get(3)),i=new wt(s.popFirst(5));return r.isEqual(n)||qs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class z1 extends H1{constructor(t,n,s,r,i,o){super(t,n,s,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new EL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(j1("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class EL extends z1{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(e){e=bl(e,Mn);const t=bl(e.firestore,fg);return rL(O1(t),e._key).then(n=>CL(t,e,n))}class IL extends yL{constructor(t){super(),this.firestore=t}convertBytes(t){return new Po(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function SL(e,t,n){e=bl(e,Mn);const s=bl(e.firestore,fg),r=bL(e.converter,t,n);return AL(s,[pL(dL(s),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Hs.none())])}function AL(e,t){return function(s,r){const i=new kr;return s.asyncQueue.enqueueAndForget(async()=>zN(await nL(s),r,i)),i.promise}(O1(e),t)}function CL(e,t,n){const s=n.docs.get(t._key),r=new IL(e);return new z1(e,r,t._key,s,new wL(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){jo=r})(Uo),Eo(new bi("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new fg(new uO(s.getProvider("auth-internal")),new dO(o,s.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new bt(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(c.options.projectId,h)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),xr(T_,I_,t),xr(T_,I_,"esm2017")})();const xL={apiKey:"AIzaSyDXxGvAaldYqYysPQHlMkQXbOVTpaxnjuA",authDomain:"chikh-counter.firebaseapp.com",projectId:"chikh-counter",storageBucket:"chikh-counter.firebasestorage.app",messagingSenderId:"600153083247",appId:"1:600153083247:web:f214631934a7f62d25ec9a"},W1=RE(xL),Si=oO(W1),yy=lL(W1),PL={class:"clock-container"},kL={class:"clock-face",viewBox:"0 0 100 100"},DL={id:"clock-bg",cx:"50%",cy:"50%",r:"100%"},RL=["stop-color"],ML=["stop-color"],OL={id:"dot-gradient",x1:"0",y1:"0",x2:"1",y2:"1"},NL=["stop-color"],LL=["stop-color"],VL=["x1","y1","x2","y2"],$L=["cx","cy","r","onClick"],FL=["x","y","fill"],BL={__name:"ClockGroups",props:{groups:{type:Array,required:!0}},setup(e){const t=e;function n(f){const d=new Date(f.start);let p=d.getHours()%12,m=d.getMinutes();return p+m/60}function s(f,d){const p=(f-3)/12*2*Math.PI;return{x:50+d*Math.cos(p),y:50+d*Math.sin(p)}}function r(f){return 8}const i=Nt(null),o=Nt({});function a(f,d){i.value=f;const p=d.target.ownerSVGElement.getBoundingClientRect(),m=d.target.getBoundingClientRect();o.value={left:`${m.left-p.left+m.width/2}px`,top:`${m.top-p.top-10}px`},setTimeout(()=>{i.value=null},1500)}function l(f){return{transition:`r 0.5s cubic-bezier(.68,-0.55,.27,1.55) ${(f*.07).toFixed(2)}s`}}function c(){return getComputedStyle(document.documentElement).getPropertyValue("--primary")}function h(){return getComputedStyle(document.documentElement).getPropertyValue("--accent")}return typeof window<"u"&&(window.addDebugGroup=function(f,d=0,p=1){const m=new Date;m.setHours(f),m.setMinutes(d),m.setSeconds(0),m.setMilliseconds(0);const _={start:m.getTime(),count:p};if(Array.isArray(t.groups))t.groups.push(_);else{const y=sE();y&&y.emit&&y.emit("add-debug-group",_)}return _}),(f,d)=>(ct(),vt("div",PL,[(ct(),vt("svg",kL,[X("defs",null,[X("radialGradient",DL,[X("stop",{offset:"0%","stop-color":h(),"stop-opacity":"0.4"},null,8,RL),X("stop",{offset:"100%","stop-color":c(),"stop-opacity":"1.0"},null,8,ML)]),X("linearGradient",OL,[X("stop",{offset:"0%","stop-color":h()},null,8,NL),X("stop",{offset:"100%","stop-color":c()},null,8,LL)])]),d[0]||(d[0]=X("circle",{cx:"50",cy:"50",r:"20",fill:"url(#clock-bg)"},null,-1)),d[1]||(d[1]=X("circle",{cx:"50",cy:"50",r:"30",class:"clock-outline",fill:"none"},null,-1)),X("g",null,[(ct(),vt(se,null,En(12,p=>X("line",{key:p,x1:s(p,40).x,y1:s(p,40).y,x2:s(p,40).x,y2:s(p,40).y,class:"hour-mark"},null,8,VL)),64))]),X("g",null,[(ct(!0),vt(se,null,En(e.groups,(p,m)=>(ct(),vt("g",{key:p.start},[X("circle",{cx:s(n(p),40).x,cy:s(n(p),40).y,r:r(p.count),class:"group-dot",style:Qe(l(m)),onClick:_=>a(m,_),fill:"url(#dot-gradient)"},null,12,$L),X("text",{x:s(n(p),40).x,y:s(n(p),40).y,"text-anchor":"middle","dominant-baseline":"central","font-size":"10","font-weight":"bold",fill:h(),style:{"pointer-events":"none","user-select":"none","text-shadow":"0 2px 8px #00000025"}},cn(p.count),9,FL)]))),128))]),d[2]||(d[2]=X("circle",{cx:"50",cy:"50",r:"3",fill:"#555555"},null,-1))])),xt(_h,{name:"fade"},{default:ve(()=>{var p;return[i.value!==null&&e.groups[i.value]?(ct(),vt("div",{key:0,class:"dot-count",style:Qe(o.value)},cn((p=e.groups[i.value])==null?void 0:p.count),5)):Je("",!0)]}),_:1})]))}},UL=Hr(BL,[["__scopeId","data-v-a6b17a39"]]),HL={class:"menu-panel"},jL={__name:"BurgerMenu",setup(e){const t=Nt(!1),n=Ap(),s=async()=>{await GR(Si),t.value=!1,n.push("/auth")};return(r,i)=>{const o=Os("router-link");return ct(),vt("div",null,[X("button",{class:"burger-btn",onClick:i[0]||(i[0]=a=>t.value=!t.value)},i[5]||(i[5]=[X("span",null,null,-1),X("span",null,null,-1),X("span",null,null,-1)])),xt(_h,{name:"slide"},{default:ve(()=>[t.value?(ct(),vt("div",{key:0,class:"menu-overlay",onClick:i[4]||(i[4]=Ip(a=>t.value=!1,["self"]))},[X("nav",HL,[xt(o,{to:"/stats",class:"menu-link",onClick:i[1]||(i[1]=a=>t.value=!1),"aria-label":""},{default:ve(()=>i[6]||(i[6]=[X("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[X("path",{d:"M4 18V10M9 18V6M15 18V14M20 18V2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_:1,__:[6]}),xt(o,{to:"/calendar",class:"menu-link",onClick:i[2]||(i[2]=a=>t.value=!1),"aria-label":""},{default:ve(()=>i[7]||(i[7]=[X("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[X("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor","stroke-width":"2"}),X("path",{d:"M16 3v4M8 3v4M3 9h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])),_:1,__:[7]}),xt(o,{to:"/settings",class:"menu-link",onClick:i[3]||(i[3]=a=>t.value=!1),"aria-label":""},{default:ve(()=>i[8]||(i[8]=[X("svg",{viewBox:"0 0 45.973 45.973",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M43.454,18.443h-2.437c-0.453-1.766-1.16-3.42-2.082-4.933l1.752-1.756c0.473-0.473,0.733-1.104,0.733-1.774 c0-0.669-0.262-1.301-0.733-1.773l-2.92-2.917c-0.947-0.948-2.602-0.947-3.545-0.001l-1.826,1.815 C30.9,6.232,29.296,5.56,27.529,5.128V2.52c0-1.383-1.105-2.52-2.488-2.52h-4.128c-1.383,0-2.471,1.137-2.471,2.52v2.607 c-1.766,0.431-3.38,1.104-4.878,1.977l-1.825-1.815c-0.946-0.948-2.602-0.947-3.551-0.001L5.27,8.205 C4.802,8.672,4.535,9.318,4.535,9.978c0,0.669,0.259,1.299,0.733,1.772l1.752,1.76c-0.921,1.513-1.629,3.167-2.081,4.933H2.501 C1.117,18.443,0,19.555,0,20.935v4.125c0,1.384,1.117,2.471,2.501,2.471h2.438c0.452,1.766,1.159,3.43,2.079,4.943l-1.752,1.763 c-0.474,0.473-0.734,1.106-0.734,1.776s0.261,1.303,0.734,1.776l2.92,2.919c0.474,0.473,1.103,0.733,1.772,0.733 s1.299-0.261,1.773-0.733l1.833-1.816c1.498,0.873,3.112,1.545,4.878,1.978v2.604c0,1.383,1.088,2.498,2.471,2.498h4.128 c1.383,0,2.488-1.115,2.488-2.498v-2.605c1.767-0.432,3.371-1.104,4.869-1.977l1.817,1.812c0.474,0.475,1.104,0.735,1.775,0.735 c0.67,0,1.301-0.261,1.774-0.733l2.92-2.917c0.473-0.472,0.732-1.103,0.734-1.772c0-0.67-0.262-1.299-0.734-1.773l-1.75-1.77 c0.92-1.514,1.627-3.179,2.08-4.943h2.438c1.383,0,2.52-1.087,2.52-2.471v-4.125C45.973,19.555,44.837,18.443,43.454,18.443z M22.976,30.85c-4.378,0-7.928-3.517-7.928-7.852c0-4.338,3.55-7.85,7.928-7.85c4.379,0,7.931,3.512,7.931,7.85 C30.906,27.334,27.355,30.85,22.976,30.85z",fill:"currentColor"})],-1)])),_:1,__:[8]}),X("button",{class:"menu-link logout-link",onClick:s,"aria-label":"Logout"},i[9]||(i[9]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M16 17L21 12L16 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),X("path",{d:"M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),X("path",{d:"M12 19C7.58172 19 4 15.4183 4 11C4 6.58172 7.58172 3 12 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))])])):Je("",!0)]),_:1})])}}},zL=Hr(jL,[["__scopeId","data-v-f5a0d4c4"]]),WL={__name:"Home",setup(e){const t=Nt(localStorage.getItem("color-primary"));function n(P){let D=P.replace("#","");D.length===3&&(D=D.split("").map(O=>O+O).join(""));const R=parseInt(D,16);return[R>>16,R>>8&255,R&255]}function s([P,D,R]){return"#"+[P,D,R].map(O=>O.toString(16).padStart(2,"0")).join("")}function r(P,D){const[R,O,V]=n(P),T=D<0?0:255,b=Math.abs(D);return s([Math.round((T-R)*b+R),Math.round((T-O)*b+O),Math.round((T-V)*b+V)])}const i=G(()=>{const P=t.value,D=r(P,.5),R=r(P,-.3);return console.log(P,D,R),`linear-gradient(135deg, ${D} 0%, ${P} 50%, ${R} 100%)`}),o=Nt(0),a=Nt(!1),l=Nt([]),c=Nt({}),h=Nt(!0),f=()=>new Date,d=()=>{const P=f();return`${P.getFullYear()}-${P.getMonth()+1}-${P.getDate()}`};function p(){const P=d();l.value=c.value[P]||[];const D=l.value.reduce((R,O)=>R+O.count,0);o.value!==D&&(a.value=!0,setTimeout(()=>{a.value=!1},250)),o.value=D}async function m(){h.value=!0;const P=Si.currentUser;if(!P){h.value=!1;return}const D=gy(yy,"users",P.uid),R=await TL(D);R.exists()?c.value=R.data().groups||{}:c.value={},p(),h.value=!1}async function _(){const P=Si.currentUser;if(!P)return;const D=gy(yy,"users",P.uid);await SL(D,{groups:c.value},{merge:!0})}function y(){localStorage.setItem("groups_"+d(),JSON.stringify(l.value))}async function E(){const P=f().getTime(),D=d();c.value[D]||(c.value[D]=[]);const R=c.value[D];if(R.length===0)R.push({start:P,count:1});else{const O=R[R.length-1],V=30*60*1e3;P-O.start<V?O.count++:R.push({start:P,count:1})}l.value=R,o.value=l.value.reduce((O,V)=>O+V.count,0),c.value[D]=R,y(),await _()}return Ap(),bs(()=>{m()}),(P,D)=>(ct(),vt("main",{class:"main-container",style:Qe({background:i.value})},[xt(zL),X("div",{class:re(["counter",{animated:a.value}])},cn(o.value),3),xt(UL,{groups:l.value},null,8,["groups"]),X("button",{class:"tap-btn",onClick:E},"")],4))}},YL=Hr(WL,[["__scopeId","data-v-15030ed1"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Yl(e){return e+.5|0}const Tr=(e,t,n)=>Math.max(Math.min(e,n),t);function xa(e){return Tr(Yl(e*2.55),0,255)}function Dr(e){return Tr(Yl(e*255),0,255)}function Ns(e){return Tr(Yl(e/2.55)/100,0,1)}function by(e){return Tr(Yl(e*100),0,100)}const Cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vd=[..."0123456789ABCDEF"],qL=e=>Vd[e&15],KL=e=>Vd[(e&240)>>4]+Vd[e&15],wc=e=>(e&240)>>4===(e&15),GL=e=>wc(e.r)&&wc(e.g)&&wc(e.b)&&wc(e.a);function XL(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Cn[e[1]]*17,g:255&Cn[e[2]]*17,b:255&Cn[e[3]]*17,a:t===5?Cn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Cn[e[1]]<<4|Cn[e[2]],g:Cn[e[3]]<<4|Cn[e[4]],b:Cn[e[5]]<<4|Cn[e[6]],a:t===9?Cn[e[7]]<<4|Cn[e[8]]:255})),n}const QL=(e,t)=>e<255?t(e):"";function JL(e){var t=GL(e)?qL:KL;return e?"#"+t(e.r)+t(e.g)+t(e.b)+QL(e.a,t):void 0}const ZL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Y1(e,t,n){const s=t*Math.min(n,1-n),r=(i,o=(i+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function tV(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function eV(e,t,n){const s=Y1(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function nV(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function vg(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,h;return i!==o&&(h=i-o,c=a>.5?h/(2-i-o):h/(i+o),l=nV(n,s,r,h,i),l=l*60+.5),[l|0,c||0,a]}function _g(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Dr)}function yg(e,t,n){return _g(Y1,e,t,n)}function sV(e,t,n){return _g(eV,e,t,n)}function rV(e,t,n){return _g(tV,e,t,n)}function q1(e){return(e%360+360)%360}function iV(e){const t=ZL.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?xa(+t[5]):Dr(+t[5]));const r=q1(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=sV(r,i,o):t[1]==="hsv"?s=rV(r,i,o):s=yg(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function oV(e,t){var n=vg(e);n[0]=q1(n[0]+t),n=yg(n),e.r=n[0],e.g=n[1],e.b=n[2]}function aV(e){if(!e)return;const t=vg(e),n=t[0],s=by(t[1]),r=by(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${Ns(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const wy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ey={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function lV(){const e={},t=Object.keys(Ey),n=Object.keys(wy);let s,r,i,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,wy[i]);i=parseInt(Ey[o],16),e[a]=[i>>16&255,i>>8&255,i&255]}return e}let Ec;function cV(e){Ec||(Ec=lV(),Ec.transparent=[0,0,0,0]);const t=Ec[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const uV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hV(e){const t=uV.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?xa(o):Tr(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?xa(s):Tr(s,0,255)),r=255&(t[4]?xa(r):Tr(r,0,255)),i=255&(t[6]?xa(i):Tr(i,0,255)),{r:s,g:r,b:i,a:n}}}function fV(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ns(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Of=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ki=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function dV(e,t,n){const s=Ki(Ns(e.r)),r=Ki(Ns(e.g)),i=Ki(Ns(e.b));return{r:Dr(Of(s+n*(Ki(Ns(t.r))-s))),g:Dr(Of(r+n*(Ki(Ns(t.g))-r))),b:Dr(Of(i+n*(Ki(Ns(t.b))-i))),a:e.a+n*(t.a-e.a)}}function Tc(e,t,n){if(e){let s=vg(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=yg(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function K1(e,t){return e&&Object.assign(t||{},e)}function Ty(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Dr(e[3]))):(t=K1(e,{r:0,g:0,b:0,a:1}),t.a=Dr(t.a)),t}function pV(e){return e.charAt(0)==="r"?hV(e):iV(e)}class El{constructor(t){if(t instanceof El)return t;const n=typeof t;let s;n==="object"?s=Ty(t):n==="string"&&(s=XL(t)||cV(t)||pV(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=K1(this._rgb);return t&&(t.a=Ns(t.a)),t}set rgb(t){this._rgb=Ty(t)}rgbString(){return this._valid?fV(this._rgb):void 0}hexString(){return this._valid?JL(this._rgb):void 0}hslString(){return this._valid?aV(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=dV(this._rgb,t._rgb,n)),this}clone(){return new El(this.rgb)}alpha(t){return this._rgb.a=Dr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Yl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Tc(this._rgb,2,t),this}darken(t){return Tc(this._rgb,2,-t),this}saturate(t){return Tc(this._rgb,1,t),this}desaturate(t){return Tc(this._rgb,1,-t),this}rotate(t){return oV(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ks(){}const gV=(()=>{let e=0;return()=>e++})();function ae(e){return e==null}function Pe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Gt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function $n(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ts(e,t){return $n(e)?e:t}function Wt(e,t){return typeof e>"u"?t:e}const mV=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function he(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Zt(e,t,n,s){let r,i,o;if(Pe(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(Gt(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(n,e[o[r]],o[r])}function Lu(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Vu(e){if(Pe(e))return e.map(Vu);if(Gt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Vu(e[n[r]]);return t}return e}function G1(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function vV(e,t,n,s){if(!G1(e))return;const r=t[e],i=n[e];Gt(r)&&Gt(i)?Tl(r,i,s):t[e]=Vu(i)}function Tl(e,t,n){const s=Pe(t)?t:[t],r=s.length;if(!Gt(e))return e;n=n||{};const i=n.merger||vV;let o;for(let a=0;a<r;++a){if(o=s[a],!Gt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)i(l[c],e,o,n)}return e}function qa(e,t){return Tl(e,t,{merger:_V})}function _V(e,t,n){if(!G1(e))return;const s=t[e],r=n[e];Gt(s)&&Gt(r)?qa(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Vu(r))}const Iy={"":e=>e,x:e=>e.x,y:e=>e.y};function yV(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function bV(e){const t=yV(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function $u(e,t){return(Iy[t]||(Iy[t]=bV(t)))(e)}function bg(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Fu=e=>typeof e<"u",Br=e=>typeof e=="function",Sy=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function wV(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Re=Math.PI,ds=2*Re,EV=ds+Re,Bu=Number.POSITIVE_INFINITY,TV=Re/180,Yn=Re/2,ei=Re/4,Ay=Re*2/3,X1=Math.log10,ko=Math.sign;function Ka(e,t,n){return Math.abs(e-t)<n}function Cy(e){const t=Math.round(e);e=Ka(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(X1(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function IV(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function SV(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Il(e){return!SV(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function AV(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function CV(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function hi(e){return e*(Re/180)}function xV(e){return e*(180/Re)}function xy(e){if(!$n(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function PV(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Re&&(i+=ds),{angle:i,distance:r}}function $d(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function kV(e,t){return(e-t+EV)%ds-Re}function hr(e){return(e%ds+ds)%ds}function Q1(e,t,n,s){const r=hr(e),i=hr(t),o=hr(n),a=hr(i-r),l=hr(o-r),c=hr(r-i),h=hr(r-o);return r===i||r===o||s&&i===o||a>l&&c<h}function kn(e,t,n){return Math.max(t,Math.min(n,e))}function DV(e){return kn(e,-32768,32767)}function Pa(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function wg(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const fi=(e,t,n,s)=>wg(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),RV=(e,t,n)=>wg(e,n,s=>e[s][t]>=n);function MV(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const J1=["push","pop","shift","splice","unshift"];function OV(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),J1.forEach(n=>{const s="_onData"+bg(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function Py(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(J1.forEach(i=>{delete e[i]}),delete e._chartjs)}function NV(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Z1=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function tI(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,Z1.call(window,()=>{s=!1,e.apply(t,n)}))}}function LV(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Eg=e=>e==="start"?"left":e==="end"?"right":"center",We=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,VV=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function $V(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,h=o.axis,{min:f,max:d,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(r=Math.min(fi(l,h,f).lo,n?s:fi(t,h,o.getPixelForValue(f)).lo),c){const _=l.slice(0,r+1).reverse().findIndex(y=>!ae(y[a.axis]));r-=Math.max(0,_)}r=kn(r,0,s-1)}if(m){let _=Math.max(fi(l,o.axis,d,!0).hi+1,n?0:fi(t,h,o.getPixelForValue(d),!0).hi+1);if(c){const y=l.slice(_-1).findIndex(E=>!ae(E[a.axis]));_+=Math.max(0,y)}i=kn(_,r,s)-r}else i=s-r}return{start:r,count:i}}function FV(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Ic=e=>e===0||e===1,ky=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ds/n)),Dy=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ds/n)+1,Ga={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Yn)+1,easeOutSine:e=>Math.sin(e*Yn),easeInOutSine:e=>-.5*(Math.cos(Re*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Ic(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ic(e)?e:ky(e,.075,.3),easeOutElastic:e=>Ic(e)?e:Dy(e,.075,.3),easeInOutElastic(e){return Ic(e)?e:e<.5?.5*ky(e*2,.1125,.45):.5+.5*Dy(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ga.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ga.easeInBounce(e*2)*.5:Ga.easeOutBounce(e*2-1)*.5+.5};function Tg(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ry(e){return Tg(e)?e:new El(e)}function Nf(e){return Tg(e)?e:new El(e).saturate(.5).darken(.1).hexString()}const BV=["x","y","borderWidth","radius","tension"],UV=["color","borderColor","backgroundColor"];function HV(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:UV},numbers:{type:"number",properties:BV}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function jV(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const My=new Map;function zV(e,t){t=t||{};const n=e+JSON.stringify(t);let s=My.get(n);return s||(s=new Intl.NumberFormat(e,t),My.set(n,s)),s}function eI(e,t,n){return zV(t,n).format(e)}const WV={values(e){return Pe(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=YV(e,n)}const o=X1(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eI(e,s,l)}};function YV(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var nI={formatters:WV};function qV(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ai=Object.create(null),Fd=Object.create(null);function Xa(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function Lf(e,t,n){return typeof t=="string"?Tl(Xa(e,t),n):Tl(Xa(e,""),t)}class KV{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>Nf(r.backgroundColor),this.hoverBorderColor=(s,r)=>Nf(r.borderColor),this.hoverColor=(s,r)=>Nf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Lf(this,t,n)}get(t){return Xa(this,t)}describe(t,n){return Lf(Fd,t,n)}override(t,n){return Lf(Ai,t,n)}route(t,n,s,r){const i=Xa(this,t),o=Xa(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Gt(l)?Object.assign({},c,l):Wt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var ye=new KV({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[HV,jV,qV]);function GV(e){return!e||ae(e.size)||ae(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Oy(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function ni(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function Ny(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Bd(e,t,n,s){sI(e,t,n,s,null)}function sI(e,t,n,s,r){let i,o,a,l,c,h,f,d;const p=t.pointStyle,m=t.rotation,_=t.radius;let y=(m||0)*TV;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(y),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(_)||_<=0)){switch(e.beginPath(),p){default:r?e.ellipse(n,s,r/2,_,0,0,ds):e.arc(n,s,_,0,ds),e.closePath();break;case"triangle":h=r?r/2:_,e.moveTo(n+Math.sin(y)*h,s-Math.cos(y)*_),y+=Ay,e.lineTo(n+Math.sin(y)*h,s-Math.cos(y)*_),y+=Ay,e.lineTo(n+Math.sin(y)*h,s-Math.cos(y)*_),e.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(y+ei)*l,f=Math.cos(y+ei)*(r?r/2-c:l),a=Math.sin(y+ei)*l,d=Math.sin(y+ei)*(r?r/2-c:l),e.arc(n-f,s-a,c,y-Re,y-Yn),e.arc(n+d,s-o,c,y-Yn,y),e.arc(n+f,s+a,c,y,y+Yn),e.arc(n-d,s+o,c,y+Yn,y+Re),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*_,h=r?r/2:l,e.rect(n-h,s-l,2*h,2*l);break}y+=ei;case"rectRot":f=Math.cos(y)*(r?r/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(r?r/2:_),e.moveTo(n-f,s-a),e.lineTo(n+d,s-o),e.lineTo(n+f,s+a),e.lineTo(n-d,s+o),e.closePath();break;case"crossRot":y+=ei;case"cross":f=Math.cos(y)*(r?r/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(r?r/2:_),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o);break;case"star":f=Math.cos(y)*(r?r/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(r?r/2:_),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o),y+=ei,f=Math.cos(y)*(r?r/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(r?r/2:_),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o);break;case"line":o=r?r/2:Math.cos(y)*_,a=Math.sin(y)*_,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(y)*(r?r/2:_),s+Math.sin(y)*_);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Sl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ig(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Sg(e){e.restore()}function XV(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function QV(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function JV(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ae(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function ZV(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,a=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function t$(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Al(e,t,n,s,r,i={}){const o=Pe(t)?t:[t],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(e.save(),e.font=r.string,JV(e,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&t$(e,i.backdrop),a&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),ae(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,s,i.maxWidth)),e.fillText(c,n,s,i.maxWidth),ZV(e,n,s,c,i),s+=Number(r.lineHeight);e.restore()}function Ud(e,t){const{x:n,y:s,w:r,h:i,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Re,Re,!0),e.lineTo(n,s+i-o.bottomLeft),e.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Re,Yn,!0),e.lineTo(n+r-o.bottomRight,s+i),e.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Yn,0,!0),e.lineTo(n+r,s+o.topRight),e.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-Yn,!0),e.lineTo(n+o.topLeft,s)}const e$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,n$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function s$(e,t){const n=(""+e).match(e$);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const r$=e=>+e||0;function rI(e,t){const n={},s=Gt(t),r=s?Object.keys(t):t,i=Gt(e)?s?o=>Wt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)n[o]=r$(i(o));return n}function i$(e){return rI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Qa(e){return rI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Fn(e){const t=i$(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Xe(e,t){e=e||{},t=t||ye.font;let n=Wt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Wt(e.style,t.style);s&&!(""+s).match(n$)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Wt(e.family,t.family),lineHeight:s$(Wt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Wt(e.weight,t.weight),string:""};return r.string=GV(r),r}function Sc(e,t,n,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function o$(e,t,n){const{min:s,max:r}=e,i=mV(t,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Ni(e,t){return Object.assign(Object.create(e),t)}function Ag(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=lI("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>Ag([a,...e],t,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return oI(a,l,()=>p$(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Vy(a).includes(l)},ownKeys(a){return Vy(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Do(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:iI(e,s),setContext:i=>Do(e,i,n,s),override:i=>Do(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,a){return oI(i,o,()=>l$(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,a){return e[o]=a,delete i[o],!0}})}function iI(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Br(n)?n:()=>n,isIndexable:Br(s)?s:()=>s}}const a$=(e,t)=>e?e+bg(t):t,Cg=(e,t)=>Gt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function oI(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function l$(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let a=s[t];return Br(a)&&o.isScriptable(t)&&(a=c$(t,a,e,n)),Pe(a)&&a.length&&(a=u$(t,a,e,o.isIndexable)),Cg(t,a)&&(a=Do(a,r,i&&i[t],o)),a}function c$(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(i,o||s);return a.delete(e),Cg(e,l)&&(l=xg(r._scopes,r,e,l)),l}function u$(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(Gt(t[0])){const l=t,c=r._scopes.filter(h=>h!==l);t=[];for(const h of l){const f=xg(c,r,e,h);t.push(Do(f,i,o&&o[e],a))}}return t}function aI(e,t,n){return Br(e)?e(t,n):e}const h$=(e,t)=>e===!0?t:typeof e=="string"?$u(t,e):void 0;function f$(e,t,n,s,r){for(const i of t){const o=h$(n,i);if(o){e.add(o);const a=aI(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function xg(e,t,n,s){const r=t._rootScopes,i=aI(t._fallback,n,s),o=[...e,...r],a=new Set;a.add(s);let l=Ly(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=Ly(a,o,i,l,s),l===null)?!1:Ag(Array.from(a),[""],r,i,()=>d$(t,n,s))}function Ly(e,t,n,s,r){for(;n;)n=f$(e,t,n,s,r);return n}function d$(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return Pe(r)&&Gt(n)?n:r||{}}function p$(e,t,n,s){let r;for(const i of t)if(r=lI(a$(i,e),n),typeof r<"u")return Cg(e,r)?xg(n,s,e,r):r}function lI(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Vy(e){let t=e._keys;return t||(t=e._keys=g$(e._scopes)),t}function g$(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const m$=Number.EPSILON||1e-14,Ro=(e,t)=>t<e.length&&!e[t].skip&&e[t],cI=e=>e==="x"?"y":"x";function v$(e,t,n,s){const r=e.skip?t:e,i=t,o=n.skip?t:n,a=$d(i,r),l=$d(o,i);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=s*c,d=s*h;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+d*(o.x-r.x),y:i.y+d*(o.y-r.y)}}}function _$(e,t,n){const s=e.length;let r,i,o,a,l,c=Ro(e,0);for(let h=0;h<s-1;++h)if(l=c,c=Ro(e,h+1),!(!l||!c)){if(Ka(t[h],0,m$)){n[h]=n[h+1]=0;continue}r=n[h]/t[h],i=n[h+1]/t[h],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*t[h],n[h+1]=i*o*t[h])}}function y$(e,t,n="x"){const s=cI(n),r=e.length;let i,o,a,l=Ro(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Ro(e,c+1),!a)continue;const h=a[n],f=a[s];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${s}`]=f-i*t[c]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${s}`]=f+i*t[c])}}function b$(e,t="x"){const n=cI(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=Ro(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ro(e,o+1),!!l){if(c){const h=c[t]-l[t];r[o]=h!==0?(c[n]-l[n])/h:0}i[o]=a?c?ko(r[o-1])!==ko(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}_$(e,r,i),y$(e,i,t)}function Ac(e,t,n){return Math.max(Math.min(e,n),t)}function w$(e,t){let n,s,r,i,o,a=Sl(e[0],t);for(n=0,s=e.length;n<s;++n)o=i,i=a,a=n<s-1&&Sl(e[n+1],t),i&&(r=e[n],o&&(r.cp1x=Ac(r.cp1x,t.left,t.right),r.cp1y=Ac(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Ac(r.cp2x,t.left,t.right),r.cp2y=Ac(r.cp2y,t.top,t.bottom)))}function E$(e,t,n,s,r){let i,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")b$(e,r);else{let c=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)a=e[i],l=v$(c,a,e[Math.min(i+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&w$(e,n)}function Pg(){return typeof window<"u"&&typeof document<"u"}function kg(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Uu(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Vh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function T$(e,t){return Vh(e).getPropertyValue(t)}const I$=["top","right","bottom","left"];function mi(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=I$[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const S$=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function A$(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(S$(r,i,e.target))a=r,l=i;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function oi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=Vh(n),i=r.boxSizing==="border-box",o=mi(r,"padding"),a=mi(r,"border","width"),{x:l,y:c,box:h}=A$(e,n),f=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:p,height:m}=t;return i&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-f)/p*n.width/s),y:Math.round((c-d)/m*n.height/s)}}function C$(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&kg(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),a=Vh(i),l=mi(a,"border","width"),c=mi(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Uu(a.maxWidth,i,"clientWidth"),r=Uu(a.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Bu,maxHeight:r||Bu}}const Cc=e=>Math.round(e*10)/10;function x$(e,t,n,s){const r=Vh(e),i=mi(r,"margin"),o=Uu(r.maxWidth,e,"clientWidth")||Bu,a=Uu(r.maxHeight,e,"clientHeight")||Bu,l=C$(e,t,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const d=mi(r,"border","width"),p=mi(r,"padding");c-=p.width+d.width,h-=p.height+d.height}return c=Math.max(0,c-i.width),h=Math.max(0,s?c/s:h-i.height),c=Cc(Math.min(c,o,l.maxWidth)),h=Cc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Cc(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=Cc(Math.floor(h*s))),{width:c,height:h}}function $y(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const P$=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Pg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Fy(e,t){const n=T$(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ai(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function k$(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function D$(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=ai(e,r,n),a=ai(r,i,n),l=ai(i,t,n),c=ai(o,a,n),h=ai(a,l,n);return ai(c,h,n)}const R$=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},M$=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function vo(e,t,n){return e?R$(t,n):M$()}function uI(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function hI(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function fI(e){return e==="angle"?{between:Q1,compare:kV,normalize:hr}:{between:Pa,compare:(t,n)=>t-n,normalize:t=>t}}function By({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function O$(e,t,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=fI(s),l=t.length;let{start:c,end:h,loop:f}=e,d,p;if(f){for(c+=l,h+=l,d=0,p=l;d<p&&o(a(t[c%l][s]),r,i);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:e.style}}function N$(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,o=t.length,{compare:a,between:l,normalize:c}=fI(s),{start:h,end:f,loop:d,style:p}=O$(e,t,n),m=[];let _=!1,y=null,E,P,D;const R=()=>l(r,D,E)&&a(r,D)!==0,O=()=>a(i,E)===0||l(i,D,E),V=()=>_||R(),T=()=>!_||O();for(let b=h,w=h;b<=f;++b)P=t[b%o],!P.skip&&(E=c(P[s]),E!==D&&(_=l(E,r,i),y===null&&V()&&(y=a(E,r)===0?b:w),y!==null&&T()&&(m.push(By({start:y,end:b,loop:d,count:o,style:p})),y=null),w=b,D=E));return y!==null&&m.push(By({start:y,end:f,loop:d,count:o,style:p})),m}function L$(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=N$(s[r],e.points,t);i.length&&n.push(...i)}return n}function V$(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function $$(e,t,n,s){const r=e.length,i=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:t%r,end:(l-1)%r,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function F$(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:o,end:a}=V$(n,r,i,s);if(s===!0)return Uy(e,[{start:o,end:a,loop:i}],n,t);const l=a<o?a+r:a,c=!!e._fullLoop&&o===0&&a===r-1;return Uy(e,$$(n,o,l,c),n,t)}function Uy(e,t,n,s){return!s||!s.setContext||!n?t:B$(e,t,n,s)}function B$(e,t,n,s){const r=e._chart.getContext(),i=Hy(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let h=i,f=t[0].start,d=f;function p(m,_,y,E){const P=a?-1:1;if(m!==_){for(m+=l;n[m%l].skip;)m-=P;for(;n[_%l].skip;)_+=P;m%l!==_%l&&(c.push({start:m%l,end:_%l,loop:y,style:E}),h=E,f=_%l)}}for(const m of t){f=a?f:m.start;let _=n[f%l],y;for(d=f+1;d<=m.end;d++){const E=n[d%l];y=Hy(s.setContext(Ni(r,{type:"segment",p0:_,p1:E,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),U$(y,h)&&p(f,d-1,m.loop,h),_=E,h=y}f<d-1&&p(f,d-1,m.loop,h)}return c}function Hy(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function U$(e,t){if(!t)return!1;const n=[],s=function(r,i){return Tg(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function xc(e,t,n){return e.options.clip?e[n]:t[n]}function H$(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:xc(n,t,"left"),right:xc(n,t,"right"),top:xc(s,t,"top"),bottom:xc(s,t,"bottom")}:t}function j$(e,t){const n=t._clip;if(n.disabled)return!1;const s=H$(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class z${constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Z1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ds=new z$;const jy="transparent",W$={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Ry(e||jy),r=s.valid&&Ry(t||jy);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class Y${constructor(t,n,s,r){const i=n[s];r=Sc([t.to,r,i,t.from]);const o=Sc([t.from,i,r]);this._active=!0,this._fn=t.fn||W$[t.type||typeof o],this._easing=Ga[t.easing]||Ga.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Sc([t.to,n,r,t.from]),this._from=Sc([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class dI{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Gt(t))return;const n=Object.keys(ye.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Gt(i))return;const o={};for(const a of n)o[a]=i[a];(Pe(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,r=K$(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&q$(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,n));continue}const h=n[c];let f=i[c];const d=s.get(c);if(f)if(d&&f.active()){f.update(d,h,a);continue}else f.cancel();if(!d||!d.duration){t[c]=h;continue}i[c]=f=new Y$(d,t,c,h),r.push(f)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Ds.add(this._chart,s),!0}}function q$(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function K$(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function zy(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function G$(e,t,n){if(n===!1)return!1;const s=zy(e,n),r=zy(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function X$(e){let t,n,s,r;return Gt(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function pI(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Wy(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,s.all)continue;break}c=e.values[l],$n(c)&&(i||t===0||ko(t)===ko(c))&&(t+=c)}return!h&&!s.all?0:t}function Q$(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[i]:e[h]};return a}function Vf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function J$(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Z$(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function tF(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function Yy(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function qy(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,h=J$(i,o,s),f=t.length;let d;for(let p=0;p<f;++p){const m=t[p],{[l]:_,[c]:y}=m,E=m._stacks||(m._stacks={});d=E[c]=tF(r,h,_),d[a]=y,d._top=Yy(d,o,!0,s.type),d._bottom=Yy(d,o,!1,s.type);const P=d._visualValues||(d._visualValues={});P[a]=y}}function $f(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function eF(e,t){return Ni(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nF(e,t,n){return Ni(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function pa(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const Ff=e=>e==="reset"||e==="none",Ky=(e,t)=>t?e:Object.assign({},e),sF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:pI(n,!0),values:null};class Ja{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&pa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(f,d,p,m)=>f==="x"?d:f==="r"?m:p,i=n.xAxisID=Wt(s.xAxisID,$f(t,"x")),o=n.yAxisID=Wt(s.yAxisID,$f(t,"y")),a=n.rAxisID=Wt(s.rAxisID,$f(t,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),h=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Py(this._data,this),t._stacked&&pa(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Gt(n)){const r=this._cachedMeta;this._data=Q$(n,r)}else if(s!==n){if(s){Py(s,this);const r=this._cachedMeta;pa(r),r._parsed=[]}n&&Object.isExtensible(n)&&OV(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Vf(n.vScale,n),n.stack!==s.stack&&(r=!0,pa(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(qy(this,n._parsed),n._stacked=Vf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=t===0&&n===r.length?!0:s._sorted,c=t>0&&s._parsed[t-1],h,f,d;if(this._parsing===!1)s._parsed=r,s._sorted=!0,d=r;else{Pe(r[t])?d=this.parseArrayData(s,r,t,n):Gt(r[t])?d=this.parseObjectData(s,r,t,n):d=this.parsePrimitiveData(s,r,t,n);const p=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<n;++h)s._parsed[h+t]=f=d[h],l&&(p()&&(l=!1),c=f);s._sorted=l}o&&qy(this,d)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:o}=t,a=i.axis,l=o.axis,c=i.getLabels(),h=i===o,f=new Array(r);let d,p,m;for(d=0,p=r;d<p;++d)m=d+s,f[d]={[a]:h||i.parse(c[m],m),[l]:o.parse(n[m],m)};return f}parseArrayData(t,n,s,r){const{xScale:i,yScale:o}=t,a=new Array(r);let l,c,h,f;for(l=0,c=r;l<c;++l)h=l+s,f=n[h],a[l]={x:i.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(t,n,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,f,d,p;for(h=0,f=r;h<f;++h)d=h+s,p=n[d],c[h]={x:i.parse($u(p,a),d),y:o.parse($u(p,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,o=n[t.axis],a={keys:pI(r,!0),values:n._stacks[t.axis]._visualValues};return Wy(a,o,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=Wy(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,a=this._getOtherScale(t),l=sF(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=Z$(a);let d,p;function m(){p=r[d];const _=p[a.axis];return!$n(p[t.axis])||h>_||f<_}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),i));++d);if(i){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][t.axis],$n(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=X$(Wt(this.options.clip,G$(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,i,a,l),h=a;h<a+l;++h){const f=r[h];f.hidden||(f.active&&c?o.push(f):f.draw(t,i))}for(h=0;h<o.length;++h)o[h].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=nF(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=eF(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=t+"-"+n,a=i[o],l=this.enableOptionSharing&&Fu(s);if(a)return Ky(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),p=Object.keys(ye.elements[t]),m=()=>this.getContext(s,r,n),_=c.resolveNamedOptions(d,p,m,f);return _.$shared&&(_.$shared=l,i[o]=Object.freeze(Ky(_,l))),_}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),d=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(d,this.getContext(t,s,n))}const c=new dI(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ff(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(t,n,s,r){Ff(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!Ff(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=t;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&pa(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Vt(Ja,"defaults",{}),Vt(Ja,"datasetElementType",null),Vt(Ja,"dataElementType",null);class Zc extends Ja{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=$V(n,r,o);this._drawStart=a,this._drawCount=l,FV(n)&&(a=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(r,a,l,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r),d=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,y=Il(m)?m:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||i||r==="none",P=n+s,D=t.length;let R=n>0&&this.getParsed(n-1);for(let O=0;O<D;++O){const V=t[O],T=E?V:{};if(O<n||O>=P){T.skip=!0;continue}const b=this.getParsed(O),w=ae(b[p]),C=T[d]=o.getPixelForValue(b[d],O),x=T[p]=i||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[p],O);T.skip=isNaN(C)||isNaN(x)||w,T.stop=O>0&&Math.abs(b[d]-R[d])>y,_&&(T.parsed=b,T.raw=c.data[O]),f&&(T.options=h||this.resolveDataElementOptions(O,V.active?"active":r)),E||this.updateElement(V,O,T,r),R=b}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Vt(Zc,"id","line"),Vt(Zc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Vt(Zc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function si(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dg{constructor(t){Vt(this,"options");this.options=t||{}}static override(t){Object.assign(Dg.prototype,t)}init(){}formats(){return si()}parse(){return si()}format(){return si()}add(){return si()}diff(){return si()}startOf(){return si()}endOf(){return si()}}var rF={_date:Dg};function iF(e,t,n,s){const{controller:r,data:i,_sorted:o}=e,a=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&i.length){const c=a._reversePixels?RV:fi;if(s){if(r._sharedOptions){const h=i[0],f=typeof h.getRange=="function"&&h.getRange(t);if(f){const d=c(i,t,n-f),p=c(i,t,n+f);return{lo:d.lo,hi:p.hi}}}}else{const h=c(i,t,n);if(l){const{vScale:f}=r._cachedMeta,{_parsed:d}=e,p=d.slice(0,h.lo+1).reverse().findIndex(_=>!ae(_[f.axis]));h.lo-=Math.max(0,p);const m=d.slice(h.hi).findIndex(_=>!ae(_[f.axis]));h.hi+=Math.max(0,m)}return h}}return{lo:0,hi:i.length-1}}function $h(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=i.length;a<l;++a){const{index:c,data:h}=i[a],{lo:f,hi:d}=iF(i[a],t,o,r);for(let p=f;p<=d;++p){const m=h[p];m.skip||s(m,c,p)}}}function oF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Bf(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||$h(e,n,t,function(a,l,c){!r&&!Sl(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function aF(e,t,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:f}=PV(o,{x:t.x,y:t.y});Q1(f,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return $h(e,n,t,i),r}function lF(e,t,n,s,r,i){let o=[];const a=oF(n);let l=Number.POSITIVE_INFINITY;function c(h,f,d){const p=h.inRange(t.x,t.y,r);if(s&&!p)return;const m=h.getCenterPoint(r);if(!(!!i||e.isPointInArea(m))&&!p)return;const y=a(t,m);y<l?(o=[{element:h,datasetIndex:f,index:d}],l=y):y===l&&o.push({element:h,datasetIndex:f,index:d})}return $h(e,n,t,c),o}function Uf(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?aF(e,t,n,r):lF(e,t,n,s,r,i)}function Gy(e,t,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return $h(e,n,t,(l,c,h)=>{l[o]&&l[o](t[n],r)&&(i.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,r))}),s&&!a?[]:i}var cF={modes:{index(e,t,n,s){const r=oi(t,e),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Bf(e,r,i,s,o):Uf(e,r,i,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,n,s){const r=oi(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Bf(e,r,i,s,o):Uf(e,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const r=oi(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Bf(e,r,i,s,o)},nearest(e,t,n,s){const r=oi(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Uf(e,r,i,n.intersect,s,o)},x(e,t,n,s){const r=oi(t,e);return Gy(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=oi(t,e);return Gy(e,r,"y",n.intersect,s)}}};const gI=["left","top","right","bottom"];function ga(e,t){return e.filter(n=>n.pos===t)}function Xy(e,t){return e.filter(n=>gI.indexOf(n.pos)===-1&&n.box.axis===t)}function ma(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function uF(e){const t=[];let n,s,r,i,o,a;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return t}function hF(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!gI.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function fF(e,t){const n=hF(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,a;for(i=0,o=e.length;i<o;++i){a=e[i];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=r):(a.width=s,a.height=h?h*r:l&&t.availableHeight)}return n}function dF(e){const t=uF(e),n=ma(t.filter(c=>c.box.fullSize),!0),s=ma(ga(t,"left"),!0),r=ma(ga(t,"right")),i=ma(ga(t,"top"),!0),o=ma(ga(t,"bottom")),a=Xy(t,"x"),l=Xy(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ga(t,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function Qy(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function mI(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function pF(e,t,n,s){const{pos:r,box:i}=n,o=e.maxPadding;if(!Gt(r)){n.size&&(e[r]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,e[r]+=n.size}i.getPadding&&mI(o,i.getPadding());const a=Math.max(0,t.outerWidth-Qy(o,e,"left","right")),l=Math.max(0,t.outerHeight-Qy(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function gF(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function mF(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return s(e?["left","right"]:["top","bottom"])}function ka(e,t,n,s){const r=[];let i,o,a,l,c,h;for(i=0,o=e.length,c=0;i<o;++i){a=e[i],l=a.box,l.update(a.width||t.w,a.height||t.h,mF(a.horizontal,t));const{same:f,other:d}=pF(t,n,a,s);c|=f&&r.length,h=h||d,l.fullSize||r.push(a)}return c&&ka(r,t,n,s)||h}function Pc(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Jy(e,t,n,s){const r=n.padding;let{x:i,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*h,d=c.size||l.height;Fu(c.start)&&(o=c.start),l.fullSize?Pc(l,r.left,o,n.outerWidth-r.right-r.left,d):Pc(l,t.left+c.placed,o,f,d),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*h,d=c.size||l.width;Fu(c.start)&&(i=c.start),l.fullSize?Pc(l,i,r.top,d,n.outerHeight-r.bottom-r.top):Pc(l,i,t.top+c.placed,d,f),c.start=i,c.placed+=f,i=l.right}}t.x=i,t.y=o}var Dn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=Fn(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=dF(e.boxes),l=a.vertical,c=a.horizontal;Zt(e.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const h=l.reduce((_,y)=>y.box.options&&y.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},r);mI(d,Fn(s));const p=Object.assign({maxPadding:d,w:i,h:o,x:r.left,y:r.top},r),m=fF(l.concat(c),f);ka(a.fullSize,p,f,m),ka(l,p,f,m),ka(c,p,f,m)&&ka(l,p,f,m),gF(p),Jy(a.leftAndTop,p,f,m),p.x+=p.w,p.y+=p.h,Jy(a.rightAndBottom,p,f,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Zt(a.chartArea,_=>{const y=_.box;Object.assign(y,e.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class vI{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class vF extends vI{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const tu="$chartjs",_F={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zy=e=>e===null||e==="";function yF(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[tu]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Zy(r)){const i=Fy(e,"width");i!==void 0&&(e.width=i)}if(Zy(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Fy(e,"height");i!==void 0&&(e.height=i)}return e}const _I=P$?{passive:!0}:!1;function bF(e,t,n){e&&e.addEventListener(t,n,_I)}function wF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,_I)}function EF(e,t){const n=_F[e.type]||e.type,{x:s,y:r}=oi(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Hu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function TF(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Hu(a.addedNodes,s),o=o&&!Hu(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function IF(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Hu(a.removedNodes,s),o=o&&!Hu(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Cl=new Map;let tb=0;function yI(){const e=window.devicePixelRatio;e!==tb&&(tb=e,Cl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function SF(e,t){Cl.size||window.addEventListener("resize",yI),Cl.set(e,t)}function AF(e){Cl.delete(e),Cl.size||window.removeEventListener("resize",yI)}function CF(e,t,n){const s=e.canvas,r=s&&kg(s);if(!r)return;const i=tI((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return o.observe(r),SF(e,i),o}function Hf(e,t,n){n&&n.disconnect(),t==="resize"&&AF(e)}function xF(e,t,n){const s=e.canvas,r=tI(i=>{e.ctx!==null&&n(EF(i,e))},e);return bF(s,t,r),r}class PF extends vI{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(yF(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[tu])return!1;const s=n[tu].initial;["height","width"].forEach(i=>{const o=s[i];ae(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[tu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),o={attach:TF,detach:IF,resize:CF}[n]||xF;r[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:Hf,detach:Hf,resize:Hf}[n]||wF)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return x$(t,n,s,r)}isAttached(t){const n=t&&kg(t);return!!(n&&n.isConnected)}}function kF(e){return!Pg()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?vF:PF}var Fc;let Li=(Fc=class{constructor(){Vt(this,"x");Vt(this,"y");Vt(this,"active",!1);Vt(this,"options");Vt(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Il(this.x)&&Il(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},Vt(Fc,"defaults",{}),Vt(Fc,"defaultRoutes"),Fc);function DF(e,t){const n=e.options.ticks,s=RF(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?OF(t):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return NF(t,c,i,o/r),c;const h=MF(i,t,r);if(o>0){let f,d;const p=o>1?Math.round((l-a)/(o-1)):null;for(kc(t,c,h,ae(p)?0:a-p,a),f=0,d=o-1;f<d;f++)kc(t,c,h,i[f],i[f+1]);return kc(t,c,h,l,ae(p)?t.length:l+p),c}return kc(t,c,h),c}function RF(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function MF(e,t,n){const s=LF(e),r=t.length/n;if(!s)return Math.max(r,1);const i=IV(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function OF(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function NF(e,t,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=n[r*s])}function kc(e,t,n,s,r){const i=Wt(s,0),o=Math.min(Wt(r,e.length),e.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(i+a*n))}function LF(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const VF=e=>e==="left"?"right":e==="right"?"left":e,eb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,nb=(e,t)=>Math.min(t||e,e);function sb(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function $F(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<i-a||l>o+a)))return l}function FF(e,t){Zt(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function va(e){return e.drawTicks?e.tickLength:0}function rb(e,t){if(!e.display)return 0;const n=Xe(e.font,t),s=Fn(e.padding);return(Pe(e.text)?e.text.length:1)*n.lineHeight+s.height}function BF(e,t){return Ni(e,{scale:t,type:"scale"})}function UF(e,t,n){return Ni(e,{tick:n,index:t,type:"tick"})}function HF(e,t,n){let s=Eg(e);return(n&&t!=="right"||!n&&t==="right")&&(s=VF(s)),s}function jF(e,t,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let f=0,d,p,m;const _=o-r,y=a-i;if(e.isHorizontal()){if(p=We(s,i,a),Gt(n)){const E=Object.keys(n)[0],P=n[E];m=h[E].getPixelForValue(P)+_-t}else n==="center"?m=(c.bottom+c.top)/2+_-t:m=eb(e,n,t);d=a-i}else{if(Gt(n)){const E=Object.keys(n)[0],P=n[E];p=h[E].getPixelForValue(P)-y+t}else n==="center"?p=(c.left+c.right)/2-y+t:p=eb(e,n,t);m=We(s,o,r),f=n==="left"?-Yn:Yn}return{titleX:p,titleY:m,maxWidth:d,rotation:f}}class qo extends Li{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=ts(t,Number.POSITIVE_INFINITY),n=ts(n,Number.NEGATIVE_INFINITY),s=ts(s,Number.POSITIVE_INFINITY),r=ts(r,Number.NEGATIVE_INFINITY),{min:ts(t,s),max:ts(n,r),minDefined:$n(t),maxDefined:$n(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:ts(n,ts(s,n)),max:ts(s,ts(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){he(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=o$(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?sb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=DF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){he(this.options.afterUpdate,[this])}beforeSetDimensions(){he(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){he(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),he(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){he(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=he(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){he(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){he(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=nb(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),f=h.widest.width,d=h.highest.height,p=kn(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),f+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-va(t.grid)-n.padding-rb(t.title,this.chart.options.font),c=Math.sqrt(f*f+d*d),o=xV(Math.min(Math.asin(kn((h.highest.height+6)/a,-1,1)),Math.asin(kn(l/c,-1,1))-Math.asin(kn(d/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){he(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){he(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=rb(r,n.options.font);if(a?(t.width=this.maxWidth,t.height=va(i)+l):(t.height=this.maxHeight,t.width=va(i)+l),s.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:d}=this._getLabelSizes(),p=s.padding*2,m=hi(this.labelRotation),_=Math.cos(m),y=Math.sin(m);if(a){const E=s.mirror?0:y*f.width+_*d.height;t.height=Math.min(this.maxHeight,t.height+E+p)}else{const E=s.mirror?0:_*f.width+y*d.height;t.width=Math.min(this.maxWidth,t.width+E+p)}this._calculatePadding(c,h,y,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,p=0;l?c?(d=r*t.width,p=s*n.height):(d=s*t.height,p=r*n.width):i==="start"?p=n.width:i==="end"?d=t.width:i!=="inner"&&(d=t.width/2,p=n.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=t.height/2;i==="start"?(h=0,f=t.height):i==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){he(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ae(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=sb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/nb(n,s));let c=0,h=0,f,d,p,m,_,y,E,P,D,R,O;for(f=0;f<n;f+=l){if(m=t[f].label,_=this._resolveTickFontOptions(f),r.font=y=_.string,E=i[y]=i[y]||{data:{},gc:[]},P=_.lineHeight,D=R=0,!ae(m)&&!Pe(m))D=Oy(r,E.data,E.gc,D,m),R=P;else if(Pe(m))for(d=0,p=m.length;d<p;++d)O=m[d],!ae(O)&&!Pe(O)&&(D=Oy(r,E.data,E.gc,D,O),R+=P);o.push(D),a.push(R),c=Math.max(D,c),h=Math.max(R,h)}FF(i,n);const V=o.indexOf(c),T=a.indexOf(h),b=w=>({width:o[w]||0,height:a[w]||0});return{first:b(0),last:b(n-1),widest:b(V),highest:b(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return DV(this._alignToPixels?ni(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=UF(this.getContext(),t,s))}return this.$context||(this.$context=BF(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=hi(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),d=va(i),p=[],m=a.setContext(this.getContext()),_=m.display?m.width:0,y=_/2,E=function(at){return ni(s,at,_)};let P,D,R,O,V,T,b,w,C,x,A,S;if(o==="top")P=E(this.bottom),T=this.bottom-d,w=P-y,x=E(t.top)+y,S=t.bottom;else if(o==="bottom")P=E(this.top),x=t.top,S=E(t.bottom)-y,T=P+y,w=this.top+d;else if(o==="left")P=E(this.right),V=this.right-d,b=P-y,C=E(t.left)+y,A=t.right;else if(o==="right")P=E(this.left),C=t.left,A=E(t.right)-y,V=P+y,b=this.left+d;else if(n==="x"){if(o==="center")P=E((t.top+t.bottom)/2+.5);else if(Gt(o)){const at=Object.keys(o)[0],ot=o[at];P=E(this.chart.scales[at].getPixelForValue(ot))}x=t.top,S=t.bottom,T=P+y,w=T+d}else if(n==="y"){if(o==="center")P=E((t.left+t.right)/2);else if(Gt(o)){const at=Object.keys(o)[0],ot=o[at];P=E(this.chart.scales[at].getPixelForValue(ot))}V=P-y,b=V-d,C=t.left,A=t.right}const ht=Wt(r.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/ht));for(D=0;D<f;D+=Q){const at=this.getContext(D),ot=i.setContext(at),gt=a.setContext(at),Lt=ot.lineWidth,z=ot.color,At=gt.dash||[],et=gt.dashOffset,Pt=ot.tickWidth,Rt=ot.tickColor,Yt=ot.tickBorderDash||[],Ht=ot.tickBorderDashOffset;R=$F(this,D,l),R!==void 0&&(O=ni(s,R,Lt),c?V=b=C=A=O:T=w=x=S=O,p.push({tx1:V,ty1:T,tx2:b,ty2:w,x1:C,y1:x,x2:A,y2:S,width:Lt,color:z,borderDash:At,borderDashOffset:et,tickWidth:Pt,tickColor:Rt,tickBorderDash:Yt,tickBorderDashOffset:Ht}))}return this._ticksLength=f,this._borderValue=P,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=i,d=va(s.grid),p=d+h,m=f?-h:p,_=-hi(this.labelRotation),y=[];let E,P,D,R,O,V,T,b,w,C,x,A,S="middle";if(r==="top")V=this.bottom-m,T=this._getXAxisLabelAlignment();else if(r==="bottom")V=this.top+m,T=this._getXAxisLabelAlignment();else if(r==="left"){const Q=this._getYAxisLabelAlignment(d);T=Q.textAlign,O=Q.x}else if(r==="right"){const Q=this._getYAxisLabelAlignment(d);T=Q.textAlign,O=Q.x}else if(n==="x"){if(r==="center")V=(t.top+t.bottom)/2+p;else if(Gt(r)){const Q=Object.keys(r)[0],at=r[Q];V=this.chart.scales[Q].getPixelForValue(at)+p}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")O=(t.left+t.right)/2-p;else if(Gt(r)){const Q=Object.keys(r)[0],at=r[Q];O=this.chart.scales[Q].getPixelForValue(at)}T=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const ht=this._getLabelSizes();for(E=0,P=a.length;E<P;++E){D=a[E],R=D.label;const Q=i.setContext(this.getContext(E));b=this.getPixelForTick(E)+i.labelOffset,w=this._resolveTickFontOptions(E),C=w.lineHeight,x=Pe(R)?R.length:1;const at=x/2,ot=Q.color,gt=Q.textStrokeColor,Lt=Q.textStrokeWidth;let z=T;o?(O=b,T==="inner"&&(E===P-1?z=this.options.reverse?"left":"right":E===0?z=this.options.reverse?"right":"left":z="center"),r==="top"?c==="near"||_!==0?A=-x*C+C/2:c==="center"?A=-ht.highest.height/2-at*C+C:A=-ht.highest.height+C/2:c==="near"||_!==0?A=C/2:c==="center"?A=ht.highest.height/2-at*C:A=ht.highest.height-x*C,f&&(A*=-1),_!==0&&!Q.showLabelBackdrop&&(O+=C/2*Math.sin(_))):(V=b,A=(1-x)*C/2);let At;if(Q.showLabelBackdrop){const et=Fn(Q.backdropPadding),Pt=ht.heights[E],Rt=ht.widths[E];let Yt=A-et.top,Ht=0-et.left;switch(S){case"middle":Yt-=Pt/2;break;case"bottom":Yt-=Pt;break}switch(T){case"center":Ht-=Rt/2;break;case"right":Ht-=Rt;break;case"inner":E===P-1?Ht-=Rt:E>0&&(Ht-=Rt/2);break}At={left:Ht,top:Yt,width:Rt+et.width,height:Pt+et.height,color:Q.backdropColor}}y.push({label:R,font:w,textOffset:A,options:{rotation:_,color:ot,strokeColor:gt,strokeWidth:Lt,textAlign:z,textBaseline:S,translation:[O,V],backdrop:At}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-hi(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=t+i,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+i,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+i,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,d;this.isHorizontal()?(c=ni(t,this.left,o)-o/2,h=ni(t,this.right,a)+a/2,f=d=l):(f=ni(t,this.top,o)-o/2,d=ni(t,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(h,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Ig(s,r);const i=this.getLabelItems(t);for(const o of i){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Al(s,c,0,h,l,a)}r&&Sg(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Xe(s.font),o=Fn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Gt(n)?(l+=o.bottom,Pe(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:d}=jF(this,l,n,a);Al(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:d,textAlign:HF(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Wt(t.grid&&t.grid.z,-1),r=Wt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Xe(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Dc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;YF(n)&&(s=this.register(n));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,zF(t,o,s),this.override&&ye.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in ye[r]&&(delete ye[r][s],this.override&&delete Ai[s])}}function zF(e,t,n){const s=Tl(Object.create(null),[n?ye.get(n):{},ye.get(t),e.defaults]);ye.set(t,s),e.defaultRoutes&&WF(t,e.defaultRoutes),e.descriptors&&ye.describe(t,e.descriptors)}function WF(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ye.route(i,r,l,a)})}function YF(e){return"id"in e&&"defaults"in e}class qF{constructor(){this.controllers=new Dc(Ja,"datasets",!0),this.elements=new Dc(Li,"elements"),this.plugins=new Dc(Object,"plugins"),this.scales=new Dc(qo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Zt(r,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const r=bg(t);he(s["before"+r],[],s),n[t](s),he(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var ss=new qF;class KF{constructor(){this._init=[]}notify(t,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,r){r=r||{};for(const i of t){const o=i.plugin,a=o[s],l=[n,r,i.options];if(he(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=Wt(s.options&&s.options.plugins,{}),i=GF(s);return r===!1&&!n?[]:QF(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function GF(e){const t={},n=[],s=Object.keys(ss.plugins.items);for(let i=0;i<s.length;i++)n.push(ss.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function XF(e,t){return!t&&e===!1?null:e===!0?{}:e}function QF(e,{plugins:t,localIds:n},s,r){const i=[],o=e.getContext();for(const a of t){const l=a.id,c=XF(s[l],r);c!==null&&i.push({plugin:a,options:JF(e.config,{plugin:a,local:n[l]},c,o)})}return i}function JF(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hd(e,t){const n=ye.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ZF(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function t4(e,t){return e===t?"_index_":"_value_"}function ib(e){if(e==="x"||e==="y"||e==="r")return e}function e4(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function jd(e,...t){if(ib(e))return e;for(const n of t){const s=n.axis||e4(n.position)||e.length>1&&ib(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function ob(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function n4(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return ob(e,"x",n[0])||ob(e,"y",n[0])}return{}}function s4(e,t){const n=Ai[e.type]||{scales:{}},s=t.scales||{},r=Hd(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Gt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=jd(o,a,n4(o,e),ye.scales[a.type]),c=t4(l,r),h=n.scales||{};i[o]=qa(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Hd(a,t),h=(Ai[a]||{}).scales||{};Object.keys(h).forEach(f=>{const d=ZF(f,l),p=o[d+"AxisID"]||d;i[p]=i[p]||Object.create(null),qa(i[p],[{axis:d},s[p],h[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];qa(a,[ye.scales[a.type],ye.scale])}),i}function bI(e){const t=e.options||(e.options={});t.plugins=Wt(t.plugins,{}),t.scales=s4(e,t)}function wI(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function r4(e){return e=e||{},e.data=wI(e.data),bI(e),e}const ab=new Map,EI=new Set;function Rc(e,t){let n=ab.get(e);return n||(n=t(),ab.set(e,n),EI.add(n)),n}const _a=(e,t,n)=>{const s=$u(t,n);s!==void 0&&e.add(s)};class i4{constructor(t){this._config=r4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=wI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),bI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Rc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Rc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Rc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Rc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(f=>_a(l,t,f))),h.forEach(f=>_a(l,r,f)),h.forEach(f=>_a(l,Ai[i]||{},f)),h.forEach(f=>_a(l,ye,f)),h.forEach(f=>_a(l,Fd,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),EI.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Ai[n]||{},ye.datasets[n]||{},{type:n},ye,Fd]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=lb(this._resolverCache,t,r);let l=o;if(a4(o,n)){i.$shared=!1,s=Br(s)?s():s;const c=this.createResolver(t,s,a);l=Do(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(t,n,s=[""],r){const{resolver:i}=lb(this._resolverCache,t,s);return Gt(n)?Do(i,n,void 0,r):i}}function lb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:Ag(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const o4=e=>Gt(e)&&Object.getOwnPropertyNames(e).some(t=>Br(e[t]));function a4(e,t){const{isScriptable:n,isIndexable:s}=iI(e);for(const r of t){const i=n(r),o=s(r),a=(o||i)&&e[r];if(i&&(Br(a)||o4(a))||o&&Pe(a))return!0}return!1}var l4="4.5.0";const c4=["top","bottom","left","right","chartArea"];function cb(e,t){return e==="top"||e==="bottom"||c4.indexOf(e)===-1&&t==="x"}function ub(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function hb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),he(n&&n.onComplete,[e],t)}function u4(e){const t=e.chart,n=t.options.animation;he(n&&n.onProgress,[e],t)}function TI(e){return Pg()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const eu={},fb=e=>{const t=TI(e);return Object.values(eu).filter(n=>n.canvas===t).pop()};function h4(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=o)}}}function f4(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var ur;let Fh=(ur=class{static register(...t){ss.add(...t),db()}static unregister(...t){ss.remove(...t),db()}constructor(t,n){const s=this.config=new i4(n),r=TI(t),i=fb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||kF(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=gV(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new KF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LV(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],eu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ds.listen(this,"complete",hb),Ds.listen(this,"progress",u4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return ae(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$y(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ny(this.canvas,this.ctx),this}stop(){return Ds.stop(this),this}resize(t,n){Ds.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$y(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),he(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Zt(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=jd(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Zt(i,o=>{const a=o.options,l=a.id,c=jd(l,a),h=Wt(a.type,o.dtype);(a.position===void 0||cb(a.position,c)!==cb(o.dposition))&&(a.position=o.dposition),r[l]=!0;let f=null;if(l in s&&s[l].type===h)f=s[l];else{const d=ss.getScale(h);f=new d({id:l,type:h,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,t)}),Zt(r,(o,a)=>{o||delete s[a]}),Zt(s,o=>{Dn.configure(this,o,o.options),Dn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(ub("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||Hd(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=ss.getController(a),{datasetElementType:c,dataElementType:h}=ye.datasets[a];Object.assign(l,{dataElementType:ss.getElement(h),datasetElementType:c&&ss.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Zt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),d=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(d),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||Zt(i,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ub("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Zt(this.scales,t=>{Dn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Sy(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;h4(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Sy(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Dn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Zt(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Br(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ds.has(this)?this.attached&&!Ds.running(this)&&Ds.start(this):(this.draw(),hb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=j$(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Ig(n,r),t.controller.draw(),r&&Sg(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Sl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=cF.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ni(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Fu(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ds.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ny(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete eu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Zt(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Zt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Zt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Lu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=i(n,t),a=s?t:i(t,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(t,r,s,o),l=wV(t),c=f4(t,this._lastEvent,s,l);s&&(this._lastEvent=null,he(i.onHover,[t,a,this],this),l&&he(i.onClick,[t,a,this],this));const h=!Lu(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},Vt(ur,"defaults",ye),Vt(ur,"instances",eu),Vt(ur,"overrides",Ai),Vt(ur,"registry",ss),Vt(ur,"version",l4),Vt(ur,"getChart",fb),ur);function db(){return Zt(Fh.instances,e=>e._plugins.invalidate())}function II(e,t,n=t){e.lineCap=Wt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Wt(n.borderDash,t.borderDash)),e.lineDashOffset=Wt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Wt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Wt(n.borderWidth,t.borderWidth),e.strokeStyle=Wt(n.borderColor,t.borderColor)}function d4(e,t,n){e.lineTo(n.x,n.y)}function p4(e){return e.stepped?XV:e.tension||e.cubicInterpolationMode==="monotone"?QV:d4}function SI(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(i,a),h=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function g4(e,t,n,s){const{points:r,options:i}=t,{count:o,start:a,loop:l,ilen:c}=SI(r,n,s),h=p4(i);let{move:f=!0,reverse:d}=s||{},p,m,_;for(p=0;p<=c;++p)m=r[(a+(d?c-p:p))%o],!m.skip&&(f?(e.moveTo(m.x,m.y),f=!1):h(e,_,m,d,i.stepped),_=m);return l&&(m=r[(a+(d?c:0))%o],h(e,_,m,d,i.stepped)),!!l}function m4(e,t,n,s){const r=t.points,{count:i,start:o,ilen:a}=SI(r,n,s),{move:l=!0,reverse:c}=s||{};let h=0,f=0,d,p,m,_,y,E;const P=R=>(o+(c?a-R:R))%i,D=()=>{_!==y&&(e.lineTo(h,y),e.lineTo(h,_),e.lineTo(h,E))};for(l&&(p=r[P(0)],e.moveTo(p.x,p.y)),d=0;d<=a;++d){if(p=r[P(d)],p.skip)continue;const R=p.x,O=p.y,V=R|0;V===m?(O<_?_=O:O>y&&(y=O),h=(f*h+R)/++f):(D(),e.lineTo(R,O),m=V,f=0,_=y=O),E=O}D()}function zd(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?m4:g4}function v4(e){return e.stepped?k$:e.tension||e.cubicInterpolationMode==="monotone"?D$:ai}function _4(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),II(e,t.options),e.stroke(r)}function y4(e,t,n,s){const{segments:r,options:i}=t,o=zd(t);for(const a of r)II(e,i,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const b4=typeof Path2D=="function";function w4(e,t,n,s){b4&&!t.options.segment?_4(e,t,n,s):y4(e,t,n,s)}class Da extends Li{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;E$(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=F$(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,o=L$(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=v4(s);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:d}=o[c],p=i[f],m=i[d];if(p===m){a.push(p);continue}const _=Math.abs((r-p[n])/(m[n]-p[n])),y=l(p,m,_,s.stepped);y[n]=t[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(t,n,s){return zd(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=zd(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),w4(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Vt(Da,"id","line"),Vt(Da,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Vt(Da,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Vt(Da,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function pb(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class nu extends Li{constructor(n){super();Vt(this,"parsed");Vt(this,"skip");Vt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return pb(this,n,"x",s)}inYRange(n,s){return pb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!Sl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Bd(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Vt(nu,"id","point"),Vt(nu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Vt(nu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const gb=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},E4=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class mb extends Li{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=he(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Xe(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=gb(s,i);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let f=t;i.textAlign="left",i.textBaseline="middle";let d=-1,p=-h;return this.legendItems.forEach((m,_)=>{const y=s+n/2+i.measureText(m.text).width;(_===0||c[c.length-1]+y+2*a>o)&&(f+=h,c[c.length-(_>0?0:1)]=0,p+=h,d++),l[_]={left:0,top:p,row:d,width:y,height:r},c[c.length-1]+=y+a}),f}_fitCols(t,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let f=a,d=0,p=0,m=0,_=0;return this.legendItems.forEach((y,E)=>{const{itemWidth:P,itemHeight:D}=T4(s,n,i,y,r);E>0&&p+D+2*a>h&&(f+=d+a,c.push({width:d,height:p}),m+=d+a,_++,d=p=0),l[E]={left:m,top:p,col:_,width:P,height:D},d=Math.max(d,P),p+=D+a}),f+=d,c.push({width:d,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=vo(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=We(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=We(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=We(s,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=We(s,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ig(t,this),this._draw(),Sg(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,a=ye.color,l=vo(t.rtl,this.left,this.width),c=Xe(o.font),{padding:h}=o,f=c.size,d=f/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:_,itemHeight:y}=gb(o,f),E=function(V,T,b){if(isNaN(m)||m<=0||isNaN(_)||_<0)return;r.save();const w=Wt(b.lineWidth,1);if(r.fillStyle=Wt(b.fillStyle,a),r.lineCap=Wt(b.lineCap,"butt"),r.lineDashOffset=Wt(b.lineDashOffset,0),r.lineJoin=Wt(b.lineJoin,"miter"),r.lineWidth=w,r.strokeStyle=Wt(b.strokeStyle,a),r.setLineDash(Wt(b.lineDash,[])),o.usePointStyle){const C={radius:_*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:w},x=l.xPlus(V,m/2),A=T+d;sI(r,C,x,A,o.pointStyleWidth&&m)}else{const C=T+Math.max((f-_)/2,0),x=l.leftForLtr(V,m),A=Qa(b.borderRadius);r.beginPath(),Object.values(A).some(S=>S!==0)?Ud(r,{x,y:C,w:m,h:_,radius:A}):r.rect(x,C,m,_),r.fill(),w!==0&&r.stroke()}r.restore()},P=function(V,T,b){Al(r,b.text,V,T+y/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},D=this.isHorizontal(),R=this._computeTitleHeight();D?p={x:We(i,this.left+h,this.right-s[0]),y:this.top+h+R,line:0}:p={x:this.left+h,y:We(i,this.top+R+h,this.bottom-n[0].height),line:0},uI(this.ctx,t.textDirection);const O=y+h;this.legendItems.forEach((V,T)=>{r.strokeStyle=V.fontColor,r.fillStyle=V.fontColor;const b=r.measureText(V.text).width,w=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),C=m+d+b;let x=p.x,A=p.y;l.setWidth(this.width),D?T>0&&x+C+h>this.right&&(A=p.y+=O,p.line++,x=p.x=We(i,this.left+h,this.right-s[p.line])):T>0&&A+O>this.bottom&&(x=p.x=x+n[p.line].width+h,p.line++,A=p.y=We(i,this.top+R+h,this.bottom-n[p.line].height));const S=l.x(x);if(E(S,A,V),x=VV(w,x+m+d,D?x+C:this.right,t.rtl),P(l.x(x),A,V),D)p.x+=C+h;else if(typeof V.text!="string"){const ht=c.lineHeight;p.y+=AI(V,ht)+h}else p.y+=O}),hI(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Xe(n.font),r=Fn(n.padding);if(!n.display)return;const i=vo(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let h,f=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,f=We(t.align,f,this.right-d);else{const m=this.columnSizes.reduce((_,y)=>Math.max(_,y.height),0);h=c+We(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=We(a,f,f+d);o.textAlign=i.textAlign(Eg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Al(o,n.text,p,h,s)}_computeTitleHeight(){const t=this.options.title,n=Xe(t.font),s=Fn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(Pa(t,this.left,this.right)&&Pa(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Pa(t,r.left,r.left+r.width)&&Pa(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!A4(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=E4(r,s);r&&!i&&he(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&he(n.onHover,[t,s,this],this)}else s&&he(n.onClick,[t,s,this],this)}}function T4(e,t,n,s,r){const i=I4(s,e,t,n),o=S4(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function I4(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+s.measureText(r).width}function S4(e,t,n){let s=e;return typeof t.text!="string"&&(s=AI(t,n)),s}function AI(e,t){const n=e.text?e.text.length:0;return t*n}function A4(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var C4={id:"legend",_element:mb,start(e,t,n){const s=e.legend=new mb({ctx:e.ctx,options:n,chart:e});Dn.configure(e,s,n),Dn.addBox(e,s)},stop(e){Dn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Dn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Fn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class CI extends Li{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=Pe(s.text)?s.text.length:1;this._padding=Fn(s.padding);const i=r*Xe(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,h,f;return this.isHorizontal()?(h=We(a,s,i),f=n+t,c=i-s):(o.position==="left"?(h=s+t,f=We(a,r,n),l=Re*-.5):(h=i-t,f=We(a,n,r),l=Re*.5),c=r-n),{titleX:h,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Xe(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Al(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Eg(n.align),textBaseline:"middle",translation:[o,a]})}}function x4(e,t){const n=new CI({ctx:e.ctx,options:t,chart:e});Dn.configure(e,n,t),Dn.addBox(e,n),e.titleBlock=n}var P4={id:"title",_element:CI,start(e,t,n){x4(e,n)},stop(e){const t=e.titleBlock;Dn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Dn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ra={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=e.length;i<o;++i){const l=e[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=$d(t,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function es(e,t){return t&&(Pe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Rs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function k4(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function vb(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:a}=t,l=Xe(t.bodyFont),c=Xe(t.titleFont),h=Xe(t.footerFont),f=i.length,d=r.length,p=s.length,m=Fn(t.padding);let _=m.height,y=0,E=s.reduce((R,O)=>R+O.before.length+O.lines.length+O.after.length,0);if(E+=e.beforeBody.length+e.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),E){const R=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=p*R+(E-p)*l.lineHeight+(E-1)*t.bodySpacing}d&&(_+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let P=0;const D=function(R){y=Math.max(y,n.measureText(R).width+P)};return n.save(),n.font=c.string,Zt(e.title,D),n.font=l.string,Zt(e.beforeBody.concat(e.afterBody),D),P=t.displayColors?o+2+t.boxPadding:0,Zt(s,R=>{Zt(R.before,D),Zt(R.lines,D),Zt(R.after,D)}),P=0,n.font=h.string,Zt(e.footer,D),n.restore(),y+=m.width,{width:y,height:_}}function D4(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function R4(e,t,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function M4(e,t,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),R4(c,e,t,n)&&(c="center"),c}function _b(e,t,n){const s=n.yAlign||t.yAlign||D4(e,n);return{xAlign:n.xAlign||t.xAlign||M4(e,t,n,s),yAlign:s}}function O4(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function N4(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function yb(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:h,topRight:f,bottomLeft:d,bottomRight:p}=Qa(o);let m=O4(t,a);const _=N4(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(h,d)+r:a==="right"&&(m+=Math.max(f,p)+r),{x:kn(m,0,s.width-t.width),y:kn(_,0,s.height-t.height)}}function Mc(e,t,n){const s=Fn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function bb(e){return es([],Rs(e))}function L4(e,t,n){return Ni(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function wb(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const xI={beforeTitle:ks,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ks,beforeBody:ks,beforeLabel:ks,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ae(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ks,afterBody:ks,beforeFooter:ks,footer:ks,afterFooter:ks};function hn(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?xI[t].call(n,s):r}class Wd extends Li{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new dI(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=L4(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=hn(s,"beforeTitle",this,t),i=hn(s,"title",this,t),o=hn(s,"afterTitle",this,t);let a=[];return a=es(a,Rs(r)),a=es(a,Rs(i)),a=es(a,Rs(o)),a}getBeforeBody(t,n){return bb(hn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Zt(t,i=>{const o={before:[],lines:[],after:[]},a=wb(s,i);es(o.before,Rs(hn(a,"beforeLabel",this,i))),es(o.lines,hn(a,"label",this,i)),es(o.after,Rs(hn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,n){return bb(hn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=hn(s,"beforeFooter",this,t),i=hn(s,"footer",this,t),o=hn(s,"afterFooter",this,t);let a=[];return a=es(a,Rs(r)),a=es(a,Rs(i)),a=es(a,Rs(o)),a}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(k4(this.chart,n[l]));return t.filter&&(a=a.filter((h,f,d)=>t.filter(h,f,d,s))),t.itemSort&&(a=a.sort((h,f)=>t.itemSort(h,f,s))),Zt(a,h=>{const f=wb(t.callbacks,h);r.push(hn(f,"labelColor",this,h)),i.push(hn(f,"labelPointStyle",this,h)),o.push(hn(f,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=Ra[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=vb(this,s),c=Object.assign({},a,l),h=_b(this.chart,s,c),f=yb(s,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=Qa(a),{x:d,y:p}=t,{width:m,height:_}=n;let y,E,P,D,R,O;return i==="center"?(R=p+_/2,r==="left"?(y=d,E=y-o,D=R+o,O=R-o):(y=d+m,E=y+o,D=R-o,O=R+o),P=y):(r==="left"?E=d+Math.max(l,h)+o:r==="right"?E=d+m-Math.max(c,f)-o:E=this.caretX,i==="top"?(D=p,R=D-o,y=E-o,P=E+o):(D=p+_,R=D+o,y=E+o,P=E-o),O=D),{x1:y,x2:E,x3:P,y1:D,y2:R,y3:O}}drawTitle(t,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=vo(s.rtl,this.x,this.width);for(t.x=Mc(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Xe(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===i&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,h=Xe(i.bodyFont),f=Mc(this,"left",i),d=r.x(f),p=l<h.lineHeight?(h.lineHeight-l)/2:0,m=n.y+p;if(i.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(d,c)+c/2,E=m+l/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Bd(t,_,y,E),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Bd(t,_,y,E)}else{t.lineWidth=Gt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const _=r.leftForLtr(d,c),y=r.leftForLtr(r.xPlus(d,1),c-2),E=Qa(o.borderRadius);Object.values(E).some(P=>P!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Ud(t,{x:_,y:m,w:c,h:l,radius:E}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ud(t,{x:y,y:m+1,w:c-2,h:l-2,radius:E}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(_,m,c,l),t.strokeRect(_,m,c,l),t.fillStyle=o.backgroundColor,t.fillRect(y,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=s,f=Xe(s.bodyFont);let d=f.lineHeight,p=0;const m=vo(s.rtl,this.x,this.width),_=function(b){n.fillText(b,m.x(t.x+p),t.y+d/2),t.y+=d+i},y=m.textAlign(o);let E,P,D,R,O,V,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,t.x=Mc(this,y,s),n.fillStyle=s.bodyColor,Zt(this.beforeBody,_),p=a&&y!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,V=r.length;R<V;++R){for(E=r[R],P=this.labelTextColors[R],n.fillStyle=P,Zt(E.before,_),D=E.lines,a&&D.length&&(this._drawColorBox(n,t,R,m,s),d=Math.max(f.lineHeight,l)),O=0,T=D.length;O<T;++O)_(D[O]),d=f.lineHeight;Zt(E.after,_)}p=0,d=f.lineHeight,Zt(this.afterBody,_),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=vo(s.rtl,this.x,this.width);for(t.x=Mc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Xe(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=s,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:m}=Qa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(t,n,s,r),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(a+c,l+h-m),n.quadraticCurveTo(a+c,l+h,a+c-m,l+h),o==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(a+p,l+h),n.quadraticCurveTo(a,l+h,a,l+h-p),o==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Ra[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=vb(this,t),l=Object.assign({},o,this._size),c=_b(n,t,l),h=yb(t,l,c,n);(r._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Fn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),uI(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),hI(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Lu(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,s),a=this._positionChanged(o,t),l=n||!Lu(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,o=Ra[i.position].call(this,t,n);return o!==!1&&(s!==o.x||r!==o.y)}}Vt(Wd,"positioners",Ra);var V4={id:"tooltip",_element:Wd,positioners:Ra,afterInit(e,t,n){n&&(e.tooltip=new Wd({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $4=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function F4(e,t,n,s){const r=e.indexOf(t);if(r===-1)return $4(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const B4=(e,t)=>e===null?null:kn(Math.round(e),0,t);function Eb(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Yd extends qo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ae(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:F4(s,t,Wt(n,t),this._addedLabels),B4(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)r.push({value:o});return r}getLabelForValue(t){return Eb.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Vt(Yd,"id","category"),Vt(Yd,"defaults",{ticks:{callback:Eb}});function U4(e,t){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:d}=e,p=i||1,m=h-1,{min:_,max:y}=t,E=!ae(o),P=!ae(a),D=!ae(c),R=(y-_)/(f+1);let O=Cy((y-_)/m/p)*p,V,T,b,w;if(O<1e-14&&!E&&!P)return[{value:_},{value:y}];w=Math.ceil(y/O)-Math.floor(_/O),w>m&&(O=Cy(w*O/m/p)*p),ae(l)||(V=Math.pow(10,l),O=Math.ceil(O*V)/V),r==="ticks"?(T=Math.floor(_/O)*O,b=Math.ceil(y/O)*O):(T=_,b=y),E&&P&&i&&AV((a-o)/i,O/1e3)?(w=Math.round(Math.min((a-o)/O,h)),O=(a-o)/w,T=o,b=a):D?(T=E?o:T,b=P?a:b,w=c-1,O=(b-T)/w):(w=(b-T)/O,Ka(w,Math.round(w),O/1e3)?w=Math.round(w):w=Math.ceil(w));const C=Math.max(xy(O),xy(T));V=Math.pow(10,ae(l)?C:l),T=Math.round(T*V)/V,b=Math.round(b*V)/V;let x=0;for(E&&(d&&T!==o?(n.push({value:o}),T<o&&x++,Ka(Math.round((T+x*O)*V)/V,o,Tb(o,R,e))&&x++):T<o&&x++);x<w;++x){const A=Math.round((T+x*O)*V)/V;if(P&&A>a)break;n.push({value:A})}return P&&d&&b!==a?n.length&&Ka(n[n.length-1].value,a,Tb(a,R,e))?n[n.length-1].value=a:n.push({value:a}):(!P||b===a)&&n.push({value:b}),n}function Tb(e,t,{horizontal:n,minRotation:s}){const r=hi(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class H4 extends qo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(t){const l=ko(r),c=ko(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),t||o(r-l)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=U4(r,i);return t.bounds==="ticks"&&CV(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return eI(t,this.chart.options.locale,this.options.ticks.format)}}class qd extends H4{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=$n(t)?t:0,this.max=$n(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=hi(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Vt(qd,"id","linear"),Vt(qd,"defaults",{ticks:{callback:nI.formatters.numeric}});const Bh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pn=Object.keys(Bh);function Ib(e,t){return e-t}function Sb(e,t){if(ae(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),$n(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Il(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function Ab(e,t,n,s){const r=pn.length;for(let i=pn.indexOf(e);i<r-1;++i){const o=Bh[pn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return pn[i]}return pn[r-1]}function j4(e,t,n,s,r){for(let i=pn.length-1;i>=pn.indexOf(n);i--){const o=pn[i];if(Bh[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return pn[n?pn.indexOf(n):0]}function z4(e){for(let t=pn.indexOf(e)+1,n=pn.length;t<n;++t)if(Bh[pn[t]].common)return pn[t]}function Cb(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=wg(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function W4(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function xb(e,t,n){const s=[],r={},i=t.length;let o,a;for(o=0;o<i;++o)a=t[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:W4(e,s,r,n)}class ju extends qo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new rF._date(t.adapters.date);r.init(n),qa(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Sb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=$n(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=$n(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=MV(r,i,o);return this._unit=n.unit||(s.autoSkip?Ab(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):j4(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:z4(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),xb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=kn(n,0,o),s=kn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||Ab(i.minUnit,n,s,this._getLabelCapacity(n)),a=Wt(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Il(l)||l===!0,h={};let f=n,d,p;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(d=f,p=0;d<s;d=+t.add(d,a,o),p++)Cb(h,d,m);return(d===s||r.bounds==="ticks"||p===1)&&Cb(h,d,m),Object.keys(h).sort(Ib).map(_=>+_)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return he(o,[t,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],d=s[n],p=c&&f&&d&&d.major;return this._adapter.format(t,r||(p?f:h))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=hi(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,xb(this,[t],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(Sb(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return NV(t.sort(Ib))}}Vt(ju,"id","time"),Vt(ju,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Oc(e,t,n){let s=0,r=e.length-1,i,o,a,l;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=fi(e,"pos",t)),{pos:i,time:a}=e[s],{pos:o,time:l}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=fi(e,"time",t)),{time:i,pos:a}=e[s],{time:o,pos:l}=e[r]);const c=o-i;return c?a+(l-a)*(t-i)/c:a}class Pb extends ju{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Oc(n,this.min),this._tableRange=Oc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Oc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Oc(this._table,s*this._tableRange+this._minPos,!0)}}Vt(Pb,"id","timeseries"),Vt(Pb,"defaults",ju.defaults);const PI={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Y4={ariaLabel:{type:String},ariaDescribedby:{type:String}},q4={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...PI,...Y4},K4=oE[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function Gi(e){return Rl(e)?jt(e):e}function G4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Rl(t)?new Proxy(e,{}):e}function X4(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function kI(e,t){e.labels=t}function DI(e,t,n){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function Q4(e,t){const n={labels:[],datasets:[]};return kI(n,e.labels),DI(n,e.datasets,t),n}const J4=tn({props:q4,setup(e,t){let{expose:n,slots:s}=t;const r=Nt(null),i=mp(null);n({chart:i});const o=()=>{if(!r.value)return;const{type:c,data:h,options:f,plugins:d,datasetIdKey:p}=e,m=Q4(h,p),_=G4(m,h);i.value=new Fh(r.value,{type:c,data:_,options:{...f},plugins:d})},a=()=>{const c=jt(i.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},e.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(e.updateMode)};return bs(o),Fo(a),an([()=>e.options,()=>e.data],(c,h)=>{let[f,d]=c,[p,m]=h;const _=jt(i.value);if(!_)return;let y=!1;if(f){const E=Gi(f),P=Gi(p);E&&E!==P&&(X4(_,E),y=!0)}if(d){const E=Gi(d.labels),P=Gi(m.labels),D=Gi(d.datasets),R=Gi(m.datasets);E!==P&&(kI(_.config.data,E),y=!0),D&&D!==R&&(DI(_.config.data,D,e.datasetIdKey),y=!0)}y&&_i(()=>{l(_)})},{deep:!0}),()=>yo("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:r},[yo("p",{},[s.default?s.default():""])])}});function Z4(e,t){return Fh.register(t),tn({props:PI,setup(n,s){let{expose:r}=s;const i=mp(null),o=a=>{i.value=a==null?void 0:a.chart};return r({chart:i}),()=>yo(J4,K4({ref:o},{type:e,...n}))}})}const t5=Z4("line",Zc),e5={class:"statistics-container"},n5={class:"toggle-segment"},s5={class:"stats-chart"},r5={__name:"Statistics",setup(e){Fh.register(Da,nu,qd,P4,Yd,V4,C4);const t=Nt("week"),n=["","","","","","",""],s=["","","","","","","","","","","",""];function r(){const h={};for(let f=0;f<localStorage.length;f++){const d=localStorage.key(f);if(d&&d.startsWith("groups_")){const p=d.replace("groups_",""),[m,_,y]=p.split("-").map(Number),P=JSON.parse(localStorage.getItem(d)||"[]").reduce((D,R)=>D+R.count,0);h[p]={year:m,month:_,day:y,count:P}}}return h}const i=Nt({}),o=Nt(null);bs(()=>{i.value=r(),_i(()=>{o.value&&o.value.chart&&o.value.chart.update()})});const a=G(()=>{const h=new Date;if(t.value==="week"){const f=[],d=[];for(let p=6;p>=0;p--){const m=new Date(h);m.setDate(h.getDate()-p);const _=n[m.getDay()===0?6:m.getDay()-1];f.push(_);const y=`${m.getFullYear()}-${m.getMonth()+1}-${m.getDate()}`,E=i.value[y];d.push(E?E.count:0)}return{labels:f,datasets:[{label:"",data:d,fill:!0,borderColor:"#fff",backgroundColor:p=>{const m=p.chart,{ctx:_,chartArea:y}=m;if(!y)return getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61";const E=_.createLinearGradient(0,y.top,0,y.bottom),P=getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",D=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#2F5249";return E.addColorStop(0,P),E.addColorStop(1,D),E},tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",pointHoverRadius:7}]}}else{const f=h.getFullYear(),d=Array(12).fill(0);return Object.values(i.value).forEach(p=>{p.year===f&&(d[p.month-1]+=p.count)}),{labels:s,datasets:[{label:"Clicks",data:d,fill:!0,borderColor:"#fff",backgroundColor:p=>{const m=p.chart,{ctx:_,chartArea:y}=m;if(console.log("Chart backgroundColor ctx:",p),!y)return getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61";const E=_.createLinearGradient(0,y.top,0,y.bottom),P=getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",D=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#2F5249";return E.addColorStop(0,P),E.addColorStop(1,D),E},tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:"#42b883",pointHoverRadius:7}]}}}),l={responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",font:{size:14}}},y:{grid:{color:"rgba(255,255,255,0.15)"},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",font:{size:14}}}}},c=t5;return(h,f)=>(ct(),vt("div",e5,[X("button",{class:"back-btn",onClick:f[0]||(f[0]=d=>h.$router.push("/")),"aria-label":"Back"},f[3]||(f[3]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",n5,[X("button",{class:re(["toggle-btn",{active:t.value==="week"}]),onClick:f[1]||(f[1]=d=>t.value="week")},"  ",2),X("button",{class:re(["toggle-btn",{active:t.value==="month"}]),onClick:f[2]||(f[2]=d=>t.value="month")},"  ",2)]),X("div",s5,[xt(dt(c),{ref_key:"chartRef",ref:o,data:a.value,options:l},null,8,["data"])])]))}},i5=Hr(r5,[["__scopeId","data-v-072b0557"]]),o5={key:0,class:"auth-error"},a5={__name:"Auth",setup(e){const t=Nt(localStorage.getItem("color-primary"));Nt(localStorage.getItem("color-accent"));function n(p){let m=p.replace("#","");m.length===3&&(m=m.split("").map(y=>y+y).join(""));const _=parseInt(m,16);return[_>>16,_>>8&255,_&255]}function s([p,m,_]){return"#"+[p,m,_].map(y=>y.toString(16).padStart(2,"0")).join("")}function r(p,m){const[_,y,E]=n(p),P=m<0?0:255,D=Math.abs(m);return s([Math.round((P-_)*D+_),Math.round((P-y)*D+y),Math.round((P-E)*D+E)])}const i=G(()=>{const p=t.value,m=r(p,.5),_=r(p,-.3);return`linear-gradient(135deg, ${m} 0%, ${p} 50%, ${_} 100%)`}),o=Nt(""),a=Nt(""),l=Nt(""),c=Ap(),h=async()=>{l.value="";try{await YR(Si,o.value,a.value),c.push("/")}catch(p){l.value=p.message}},f=async()=>{l.value="";try{await WR(Si,o.value,a.value),c.push("/")}catch(p){l.value=p.message}},d=()=>{h()};return(p,m)=>(ct(),vt("div",{class:"auth-container",style:Qe({background:i.value})},[m[2]||(m[2]=X("h2",null,"",-1)),X("form",{onSubmit:Ip(d,["prevent"])},[du(X("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>o.value=_),type:"email",placeholder:"Email",required:""},null,512),[[Av,o.value]]),du(X("input",{"onUpdate:modelValue":m[1]||(m[1]=_=>a.value=_),type:"password",placeholder:"Password",required:""},null,512),[[Av,a.value]]),X("div",{class:"auth-actions"},[X("button",{type:"button",onClick:h},""),X("button",{type:"button",onClick:f},"")]),l.value?(ct(),vt("div",o5,cn(l.value),1)):Je("",!0)],32)],4))}},l5=Hr(a5,[["__scopeId","data-v-845b558b"]]),c5={class:"palette-section"},u5={class:"palette-scroll-mask"},h5={class:"palette-options"},f5=["onClick"],d5={class:"palette-section"},p5={class:"palette-scroll-mask"},g5={class:"palette-options"},m5=["onClick"],v5={__name:"Settings",setup(e){const t=["#E3F0FF","#4cae4f","#282828","#FFD6C0","#F8F9FA","#E6E6FA"],n=["#FFB74D","#121212","#FF654F","#71ADBA","#388E3C","#FFFFF0"],s=Nt(t[0]),r=Nt(n[0]);function i(d){s.value=d,a()}function o(d){r.value=d,a()}function a(){document.documentElement.style.setProperty("--primary",s.value),document.documentElement.style.setProperty("--accent",r.value),localStorage.setItem("color-primary",s.value),localStorage.setItem("color-accent",r.value)}bs(()=>{const d=localStorage.getItem("color-primary"),p=localStorage.getItem("color-accent");d&&t.includes(d)&&(s.value=d),p&&n.includes(p)&&(r.value=p),a()});function l(d){let p=d.replace("#","");p.length===3&&(p=p.split("").map(_=>_+_).join(""));const m=parseInt(p,16);return[m>>16,m>>8&255,m&255]}function c([d,p,m]){return"#"+[d,p,m].map(_=>_.toString(16).padStart(2,"0")).join("")}function h(d,p){const[m,_,y]=l(d),E=p<0?0:255,P=Math.abs(p);return c([Math.round((E-m)*P+m),Math.round((E-_)*P+_),Math.round((E-y)*P+y)])}const f=G(()=>{const d=s.value,p=h(d,.5),m=h(d,-.3);return`linear-gradient(135deg, ${p} 0%, ${d} 50%, ${m} 100%)`});return(d,p)=>(ct(),vt("div",{class:"settings-container",style:Qe({background:f.value})},[X("button",{class:"back-btn",onClick:p[0]||(p[0]=m=>d.$router.push("/")),"aria-label":"Back"},p[1]||(p[1]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",c5,[p[2]||(p[2]=X("div",{class:"palette-label"}," :",-1)),X("div",u5,[X("div",h5,[(ct(),vt(se,null,En(t,m=>X("button",{key:m,style:Qe({background:m}),class:re({selected:m===s.value}),onClick:_=>i(m)},null,14,f5)),64))])])]),X("div",d5,[p[3]||(p[3]=X("div",{class:"palette-label"},":",-1)),X("div",p5,[X("div",g5,[(ct(),vt(se,null,En(n,m=>X("button",{key:m,style:Qe({background:m}),class:re({selected:m===r.value}),onClick:_=>o(m)},null,14,m5)),64))])])])],4))}},_5=Hr(v5,[["__scopeId","data-v-1ae74be5"]]);var mn="top",Bn="bottom",Un="right",vn="left",Rg="auto",ql=[mn,Bn,Un,vn],Mo="start",xl="end",y5="clippingParents",RI="viewport",ya="popper",b5="reference",kb=ql.reduce(function(e,t){return e.concat([t+"-"+Mo,t+"-"+xl])},[]),MI=[].concat(ql,[Rg]).reduce(function(e,t){return e.concat([t,t+"-"+Mo,t+"-"+xl])},[]),w5="beforeRead",E5="read",T5="afterRead",I5="beforeMain",S5="main",A5="afterMain",C5="beforeWrite",x5="write",P5="afterWrite",k5=[w5,E5,T5,I5,S5,A5,C5,x5,P5];function _s(e){return e?(e.nodeName||"").toLowerCase():null}function Tn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ci(e){var t=Tn(e).Element;return e instanceof t||e instanceof Element}function On(e){var t=Tn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Mg(e){if(typeof ShadowRoot>"u")return!1;var t=Tn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function D5(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},r=t.attributes[n]||{},i=t.elements[n];!On(i)||!_s(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var a=r[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function R5(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!On(r)||!_s(r)||(Object.assign(r.style,a),Object.keys(i).forEach(function(l){r.removeAttribute(l)}))})}}const M5={name:"applyStyles",enabled:!0,phase:"write",fn:D5,effect:R5,requires:["computeStyles"]};function ps(e){return e.split("-")[0]}var vi=Math.max,zu=Math.min,Oo=Math.round;function Kd(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function OI(){return!/^((?!chrome|android).)*safari/i.test(Kd())}function No(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&On(e)&&(r=e.offsetWidth>0&&Oo(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Oo(s.height)/e.offsetHeight||1);var o=Ci(e)?Tn(e):window,a=o.visualViewport,l=!OI()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/r,h=(s.top+(l&&a?a.offsetTop:0))/i,f=s.width/r,d=s.height/i;return{width:f,height:d,top:h,right:c+f,bottom:h+d,left:c,x:c,y:h}}function Og(e){var t=No(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function NI(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Mg(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Gs(e){return Tn(e).getComputedStyle(e)}function O5(e){return["table","td","th"].indexOf(_s(e))>=0}function Wr(e){return((Ci(e)?e.ownerDocument:e.document)||window.document).documentElement}function Uh(e){return _s(e)==="html"?e:e.assignedSlot||e.parentNode||(Mg(e)?e.host:null)||Wr(e)}function Db(e){return!On(e)||Gs(e).position==="fixed"?null:e.offsetParent}function N5(e){var t=/firefox/i.test(Kd()),n=/Trident/i.test(Kd());if(n&&On(e)){var s=Gs(e);if(s.position==="fixed")return null}var r=Uh(e);for(Mg(r)&&(r=r.host);On(r)&&["html","body"].indexOf(_s(r))<0;){var i=Gs(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Kl(e){for(var t=Tn(e),n=Db(e);n&&O5(n)&&Gs(n).position==="static";)n=Db(n);return n&&(_s(n)==="html"||_s(n)==="body"&&Gs(n).position==="static")?t:n||N5(e)||t}function Ng(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Za(e,t,n){return vi(e,zu(t,n))}function L5(e,t,n){var s=Za(e,t,n);return s>n?n:s}function LI(){return{top:0,right:0,bottom:0,left:0}}function VI(e){return Object.assign({},LI(),e)}function $I(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var V5=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,VI(typeof t!="number"?t:$I(t,ql))};function $5(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ps(n.placement),l=Ng(a),c=[vn,Un].indexOf(a)>=0,h=c?"height":"width";if(!(!i||!o)){var f=V5(r.padding,n),d=Og(i),p=l==="y"?mn:vn,m=l==="y"?Bn:Un,_=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],y=o[l]-n.rects.reference[l],E=Kl(i),P=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,D=_/2-y/2,R=f[p],O=P-d[h]-f[m],V=P/2-d[h]/2+D,T=Za(R,V,O),b=l;n.modifiersData[s]=(t={},t[b]=T,t.centerOffset=T-V,t)}}function F5(e){var t=e.state,n=e.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||NI(t.elements.popper,r)&&(t.elements.arrow=r))}const B5={name:"arrow",enabled:!0,phase:"main",fn:$5,effect:F5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Lo(e){return e.split("-")[1]}var U5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function H5(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Oo(n*r)/r||0,y:Oo(s*r)/r||0}}function Rb(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,h=e.roundOffsets,f=e.isFixed,d=o.x,p=d===void 0?0:d,m=o.y,_=m===void 0?0:m,y=typeof h=="function"?h({x:p,y:_}):{x:p,y:_};p=y.x,_=y.y;var E=o.hasOwnProperty("x"),P=o.hasOwnProperty("y"),D=vn,R=mn,O=window;if(c){var V=Kl(n),T="clientHeight",b="clientWidth";if(V===Tn(n)&&(V=Wr(n),Gs(V).position!=="static"&&a==="absolute"&&(T="scrollHeight",b="scrollWidth")),V=V,r===mn||(r===vn||r===Un)&&i===xl){R=Bn;var w=f&&V===O&&O.visualViewport?O.visualViewport.height:V[T];_-=w-s.height,_*=l?1:-1}if(r===vn||(r===mn||r===Bn)&&i===xl){D=Un;var C=f&&V===O&&O.visualViewport?O.visualViewport.width:V[b];p-=C-s.width,p*=l?1:-1}}var x=Object.assign({position:a},c&&U5),A=h===!0?H5({x:p,y:_},Tn(n)):{x:p,y:_};if(p=A.x,_=A.y,l){var S;return Object.assign({},x,(S={},S[R]=P?"0":"",S[D]=E?"0":"",S.transform=(O.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",S))}return Object.assign({},x,(t={},t[R]=P?_+"px":"",t[D]=E?p+"px":"",t.transform="",t))}function j5(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=s===void 0?!0:s,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ps(t.placement),variation:Lo(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Rb(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Rb(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const z5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:j5,data:{}};var Nc={passive:!0};function W5(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,a=o===void 0?!0:o,l=Tn(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach(function(h){h.addEventListener("scroll",n.update,Nc)}),a&&l.addEventListener("resize",n.update,Nc),function(){i&&c.forEach(function(h){h.removeEventListener("scroll",n.update,Nc)}),a&&l.removeEventListener("resize",n.update,Nc)}}const Y5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:W5,data:{}};var q5={left:"right",right:"left",bottom:"top",top:"bottom"};function su(e){return e.replace(/left|right|bottom|top/g,function(t){return q5[t]})}var K5={start:"end",end:"start"};function Mb(e){return e.replace(/start|end/g,function(t){return K5[t]})}function Lg(e){var t=Tn(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Vg(e){return No(Wr(e)).left+Lg(e).scrollLeft}function G5(e,t){var n=Tn(e),s=Wr(e),r=n.visualViewport,i=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){i=r.width,o=r.height;var c=OI();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:o,x:a+Vg(e),y:l}}function X5(e){var t,n=Wr(e),s=Lg(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=vi(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=vi(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-s.scrollLeft+Vg(e),l=-s.scrollTop;return Gs(r||n).direction==="rtl"&&(a+=vi(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function $g(e){var t=Gs(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function FI(e){return["html","body","#document"].indexOf(_s(e))>=0?e.ownerDocument.body:On(e)&&$g(e)?e:FI(Uh(e))}function tl(e,t){var n;t===void 0&&(t=[]);var s=FI(e),r=s===((n=e.ownerDocument)==null?void 0:n.body),i=Tn(s),o=r?[i].concat(i.visualViewport||[],$g(s)?s:[]):s,a=t.concat(o);return r?a:a.concat(tl(Uh(o)))}function Gd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Q5(e,t){var n=No(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Ob(e,t,n){return t===RI?Gd(G5(e,n)):Ci(t)?Q5(t,n):Gd(X5(Wr(e)))}function J5(e){var t=tl(Uh(e)),n=["absolute","fixed"].indexOf(Gs(e).position)>=0,s=n&&On(e)?Kl(e):e;return Ci(s)?t.filter(function(r){return Ci(r)&&NI(r,s)&&_s(r)!=="body"}):[]}function Z5(e,t,n,s){var r=t==="clippingParents"?J5(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce(function(l,c){var h=Ob(e,c,s);return l.top=vi(h.top,l.top),l.right=zu(h.right,l.right),l.bottom=zu(h.bottom,l.bottom),l.left=vi(h.left,l.left),l},Ob(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function BI(e){var t=e.reference,n=e.element,s=e.placement,r=s?ps(s):null,i=s?Lo(s):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(r){case mn:l={x:o,y:t.y-n.height};break;case Bn:l={x:o,y:t.y+t.height};break;case Un:l={x:t.x+t.width,y:a};break;case vn:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?Ng(r):null;if(c!=null){var h=c==="y"?"height":"width";switch(i){case Mo:l[c]=l[c]-(t[h]/2-n[h]/2);break;case xl:l[c]=l[c]+(t[h]/2-n[h]/2);break}}return l}function Pl(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=s===void 0?e.placement:s,i=n.strategy,o=i===void 0?e.strategy:i,a=n.boundary,l=a===void 0?y5:a,c=n.rootBoundary,h=c===void 0?RI:c,f=n.elementContext,d=f===void 0?ya:f,p=n.altBoundary,m=p===void 0?!1:p,_=n.padding,y=_===void 0?0:_,E=VI(typeof y!="number"?y:$I(y,ql)),P=d===ya?b5:ya,D=e.rects.popper,R=e.elements[m?P:d],O=Z5(Ci(R)?R:R.contextElement||Wr(e.elements.popper),l,h,o),V=No(e.elements.reference),T=BI({reference:V,element:D,placement:r}),b=Gd(Object.assign({},D,T)),w=d===ya?b:V,C={top:O.top-w.top+E.top,bottom:w.bottom-O.bottom+E.bottom,left:O.left-w.left+E.left,right:w.right-O.right+E.right},x=e.modifiersData.offset;if(d===ya&&x){var A=x[r];Object.keys(C).forEach(function(S){var ht=[Un,Bn].indexOf(S)>=0?1:-1,Q=[mn,Bn].indexOf(S)>=0?"y":"x";C[S]+=A[Q]*ht})}return C}function t3(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?MI:l,h=Lo(s),f=h?a?kb:kb.filter(function(m){return Lo(m)===h}):ql,d=f.filter(function(m){return c.indexOf(m)>=0});d.length===0&&(d=f);var p=d.reduce(function(m,_){return m[_]=Pl(e,{placement:_,boundary:r,rootBoundary:i,padding:o})[ps(_)],m},{});return Object.keys(p).sort(function(m,_){return p[m]-p[_]})}function e3(e){if(ps(e)===Rg)return[];var t=su(e);return[Mb(e),t,Mb(t)]}function n3(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,_=n.allowedAutoPlacements,y=t.options.placement,E=ps(y),P=E===y,D=l||(P||!m?[su(y)]:e3(y)),R=[y].concat(D).reduce(function(Rt,Yt){return Rt.concat(ps(Yt)===Rg?t3(t,{placement:Yt,boundary:h,rootBoundary:f,padding:c,flipVariations:m,allowedAutoPlacements:_}):Yt)},[]),O=t.rects.reference,V=t.rects.popper,T=new Map,b=!0,w=R[0],C=0;C<R.length;C++){var x=R[C],A=ps(x),S=Lo(x)===Mo,ht=[mn,Bn].indexOf(A)>=0,Q=ht?"width":"height",at=Pl(t,{placement:x,boundary:h,rootBoundary:f,altBoundary:d,padding:c}),ot=ht?S?Un:vn:S?Bn:mn;O[Q]>V[Q]&&(ot=su(ot));var gt=su(ot),Lt=[];if(i&&Lt.push(at[A]<=0),a&&Lt.push(at[ot]<=0,at[gt]<=0),Lt.every(function(Rt){return Rt})){w=x,b=!1;break}T.set(x,Lt)}if(b)for(var z=m?3:1,At=function(Yt){var Ht=R.find(function(F){var st=T.get(F);if(st)return st.slice(0,Yt).every(function(Z){return Z})});if(Ht)return w=Ht,"break"},et=z;et>0;et--){var Pt=At(et);if(Pt==="break")break}t.placement!==w&&(t.modifiersData[s]._skip=!0,t.placement=w,t.reset=!0)}}const s3={name:"flip",enabled:!0,phase:"main",fn:n3,requiresIfExists:["offset"],data:{_skip:!1}};function Nb(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Lb(e){return[mn,Un,Bn,vn].some(function(t){return e[t]>=0})}function r3(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=Pl(t,{elementContext:"reference"}),a=Pl(t,{altBoundary:!0}),l=Nb(o,s),c=Nb(a,r,i),h=Lb(l),f=Lb(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}const i3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:r3};function o3(e,t,n){var s=ps(e),r=[vn,mn].indexOf(s)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*r,[vn,Un].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function a3(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=r===void 0?[0,0]:r,o=MI.reduce(function(h,f){return h[f]=o3(f,t.rects,i),h},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=o}const l3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:a3};function c3(e){var t=e.state,n=e.name;t.modifiersData[n]=BI({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const u3={name:"popperOffsets",enabled:!0,phase:"read",fn:c3,data:{}};function h3(e){return e==="x"?"y":"x"}function f3(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,m=n.tetherOffset,_=m===void 0?0:m,y=Pl(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:h}),E=ps(t.placement),P=Lo(t.placement),D=!P,R=Ng(E),O=h3(R),V=t.modifiersData.popperOffsets,T=t.rects.reference,b=t.rects.popper,w=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,C=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),x=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(V){if(i){var S,ht=R==="y"?mn:vn,Q=R==="y"?Bn:Un,at=R==="y"?"height":"width",ot=V[R],gt=ot+y[ht],Lt=ot-y[Q],z=p?-b[at]/2:0,At=P===Mo?T[at]:b[at],et=P===Mo?-b[at]:-T[at],Pt=t.elements.arrow,Rt=p&&Pt?Og(Pt):{width:0,height:0},Yt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:LI(),Ht=Yt[ht],F=Yt[Q],st=Za(0,T[at],Rt[at]),Z=D?T[at]/2-z-st-Ht-C.mainAxis:At-st-Ht-C.mainAxis,lt=D?-T[at]/2+z+st+F+C.mainAxis:et+st+F+C.mainAxis,Ot=t.elements.arrow&&Kl(t.elements.arrow),k=Ot?R==="y"?Ot.clientTop||0:Ot.clientLeft||0:0,M=(S=x==null?void 0:x[R])!=null?S:0,N=ot+Z-M-k,B=ot+lt-M,H=Za(p?zu(gt,N):gt,ot,p?vi(Lt,B):Lt);V[R]=H,A[R]=H-ot}if(a){var U,rt=R==="x"?mn:vn,J=R==="x"?Bn:Un,K=V[O],W=O==="y"?"height":"width",pt=K+y[rt],nt=K-y[J],ft=[mn,vn].indexOf(E)!==-1,yt=(U=x==null?void 0:x[O])!=null?U:0,mt=ft?pt:K-T[W]-b[W]-yt+C.altAxis,It=ft?K+T[W]+b[W]-yt-C.altAxis:nt,$t=p&&ft?L5(mt,K,It):Za(p?mt:pt,K,p?It:nt);V[O]=$t,A[O]=$t-K}t.modifiersData[s]=A}}const d3={name:"preventOverflow",enabled:!0,phase:"main",fn:f3,requiresIfExists:["offset"]};function p3(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function g3(e){return e===Tn(e)||!On(e)?Lg(e):p3(e)}function m3(e){var t=e.getBoundingClientRect(),n=Oo(t.width)/e.offsetWidth||1,s=Oo(t.height)/e.offsetHeight||1;return n!==1||s!==1}function v3(e,t,n){n===void 0&&(n=!1);var s=On(t),r=On(t)&&m3(t),i=Wr(t),o=No(e,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((_s(t)!=="body"||$g(i))&&(a=g3(t)),On(t)?(l=No(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=Vg(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function _3(e){var t=new Map,n=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&r(l)}}),s.push(i)}return e.forEach(function(i){n.has(i.name)||r(i)}),s}function y3(e){var t=_3(e);return k5.reduce(function(n,s){return n.concat(t.filter(function(r){return r.phase===s}))},[])}function b3(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function w3(e){var t=e.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var Vb={placement:"bottom",modifiers:[],strategy:"absolute"};function $b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function E3(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,r=t.defaultOptions,i=r===void 0?Vb:r;return function(a,l,c){c===void 0&&(c=i);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vb,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,p={state:h,setOptions:function(E){var P=typeof E=="function"?E(h.options):E;_(),h.options=Object.assign({},i,h.options,P),h.scrollParents={reference:Ci(a)?tl(a):a.contextElement?tl(a.contextElement):[],popper:tl(l)};var D=y3(w3([].concat(s,h.options.modifiers)));return h.orderedModifiers=D.filter(function(R){return R.enabled}),m(),p.update()},forceUpdate:function(){if(!d){var E=h.elements,P=E.reference,D=E.popper;if($b(P,D)){h.rects={reference:v3(P,Kl(D),h.options.strategy==="fixed"),popper:Og(D)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(C){return h.modifiersData[C.name]=Object.assign({},C.data)});for(var R=0;R<h.orderedModifiers.length;R++){if(h.reset===!0){h.reset=!1,R=-1;continue}var O=h.orderedModifiers[R],V=O.fn,T=O.options,b=T===void 0?{}:T,w=O.name;typeof V=="function"&&(h=V({state:h,options:b,name:w,instance:p})||h)}}}},update:b3(function(){return new Promise(function(y){p.forceUpdate(),y(h)})}),destroy:function(){_(),d=!0}};if(!$b(a,l))return p;p.setOptions(c).then(function(y){!d&&c.onFirstUpdate&&c.onFirstUpdate(y)});function m(){h.orderedModifiers.forEach(function(y){var E=y.name,P=y.options,D=P===void 0?{}:P,R=y.effect;if(typeof R=="function"){var O=R({state:h,name:E,instance:p,options:D}),V=function(){};f.push(O||V)}})}function _(){f.forEach(function(y){return y()}),f=[]}return p}}var T3=[Y5,u3,z5,M5,l3,s3,d3,B5,i3],I3=E3({defaultModifiers:T3}),S3=Object.defineProperty,A3=(e,t,n)=>t in e?S3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t,n)=>(A3(e,typeof t!="symbol"?t+"":t,n),n),Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function UI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C3=Object.prototype,x3=C3.hasOwnProperty;function P3(e,t){return e!=null&&x3.call(e,t)}var k3=P3,D3=Array.isArray,Qn=D3,R3=typeof Lc=="object"&&Lc&&Lc.Object===Object&&Lc,HI=R3,M3=HI,O3=typeof self=="object"&&self&&self.Object===Object&&self,N3=M3||O3||Function("return this")(),ws=N3,L3=ws,V3=L3.Symbol,Hh=V3,Fb=Hh,jI=Object.prototype,$3=jI.hasOwnProperty,F3=jI.toString,ba=Fb?Fb.toStringTag:void 0;function B3(e){var t=$3.call(e,ba),n=e[ba];try{e[ba]=void 0;var s=!0}catch{}var r=F3.call(e);return s&&(t?e[ba]=n:delete e[ba]),r}var U3=B3,H3=Object.prototype,j3=H3.toString;function z3(e){return j3.call(e)}var W3=z3,Bb=Hh,Y3=U3,q3=W3,K3="[object Null]",G3="[object Undefined]",Ub=Bb?Bb.toStringTag:void 0;function X3(e){return e==null?e===void 0?G3:K3:Ub&&Ub in Object(e)?Y3(e):q3(e)}var Es=X3;function Q3(e){return e!=null&&typeof e=="object"}var Jn=Q3,J3=Es,Z3=Jn,t6="[object Symbol]";function e6(e){return typeof e=="symbol"||Z3(e)&&J3(e)==t6}var Fg=e6,n6=Qn,s6=Fg,r6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i6=/^\w*$/;function o6(e,t){if(n6(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||s6(e)?!0:i6.test(e)||!r6.test(e)||t!=null&&e in Object(t)}var Bg=o6;function a6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var tr=a6,l6=Es,c6=tr,u6="[object AsyncFunction]",h6="[object Function]",f6="[object GeneratorFunction]",d6="[object Proxy]";function p6(e){if(!c6(e))return!1;var t=l6(e);return t==h6||t==f6||t==u6||t==d6}var Vi=p6,g6=ws,m6=g6["__core-js_shared__"],v6=m6,jf=v6,Hb=function(){var e=/[^.]+$/.exec(jf&&jf.keys&&jf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _6(e){return!!Hb&&Hb in e}var y6=_6,b6=Function.prototype,w6=b6.toString;function E6(e){if(e!=null){try{return w6.call(e)}catch{}try{return e+""}catch{}}return""}var zI=E6,T6=Vi,I6=y6,S6=tr,A6=zI,C6=/[\\^$.*+?()[\]{}|]/g,x6=/^\[object .+?Constructor\]$/,P6=Function.prototype,k6=Object.prototype,D6=P6.toString,R6=k6.hasOwnProperty,M6=RegExp("^"+D6.call(R6).replace(C6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O6(e){if(!S6(e)||I6(e))return!1;var t=T6(e)?M6:x6;return t.test(A6(e))}var N6=O6;function L6(e,t){return e==null?void 0:e[t]}var V6=L6,$6=N6,F6=V6;function B6(e,t){var n=F6(e,t);return $6(n)?n:void 0}var $i=B6,U6=$i,H6=U6(Object,"create"),jh=H6,jb=jh;function j6(){this.__data__=jb?jb(null):{},this.size=0}var z6=j6;function W6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Y6=W6,q6=jh,K6="__lodash_hash_undefined__",G6=Object.prototype,X6=G6.hasOwnProperty;function Q6(e){var t=this.__data__;if(q6){var n=t[e];return n===K6?void 0:n}return X6.call(t,e)?t[e]:void 0}var J6=Q6,Z6=jh,tB=Object.prototype,eB=tB.hasOwnProperty;function nB(e){var t=this.__data__;return Z6?t[e]!==void 0:eB.call(t,e)}var sB=nB,rB=jh,iB="__lodash_hash_undefined__";function oB(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rB&&t===void 0?iB:t,this}var aB=oB,lB=z6,cB=Y6,uB=J6,hB=sB,fB=aB;function Ko(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Ko.prototype.clear=lB;Ko.prototype.delete=cB;Ko.prototype.get=uB;Ko.prototype.has=hB;Ko.prototype.set=fB;var dB=Ko;function pB(){this.__data__=[],this.size=0}var gB=pB;function mB(e,t){return e===t||e!==e&&t!==t}var Go=mB,vB=Go;function _B(e,t){for(var n=e.length;n--;)if(vB(e[n][0],t))return n;return-1}var zh=_B,yB=zh,bB=Array.prototype,wB=bB.splice;function EB(e){var t=this.__data__,n=yB(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():wB.call(t,n,1),--this.size,!0}var TB=EB,IB=zh;function SB(e){var t=this.__data__,n=IB(t,e);return n<0?void 0:t[n][1]}var AB=SB,CB=zh;function xB(e){return CB(this.__data__,e)>-1}var PB=xB,kB=zh;function DB(e,t){var n=this.__data__,s=kB(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var RB=DB,MB=gB,OB=TB,NB=AB,LB=PB,VB=RB;function Xo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Xo.prototype.clear=MB;Xo.prototype.delete=OB;Xo.prototype.get=NB;Xo.prototype.has=LB;Xo.prototype.set=VB;var Wh=Xo,$B=$i,FB=ws,BB=$B(FB,"Map"),Ug=BB,zb=dB,UB=Wh,HB=Ug;function jB(){this.size=0,this.__data__={hash:new zb,map:new(HB||UB),string:new zb}}var zB=jB;function WB(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var YB=WB,qB=YB;function KB(e,t){var n=e.__data__;return qB(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Yh=KB,GB=Yh;function XB(e){var t=GB(this,e).delete(e);return this.size-=t?1:0,t}var QB=XB,JB=Yh;function ZB(e){return JB(this,e).get(e)}var tU=ZB,eU=Yh;function nU(e){return eU(this,e).has(e)}var sU=nU,rU=Yh;function iU(e,t){var n=rU(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var oU=iU,aU=zB,lU=QB,cU=tU,uU=sU,hU=oU;function Qo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Qo.prototype.clear=aU;Qo.prototype.delete=lU;Qo.prototype.get=cU;Qo.prototype.has=uU;Qo.prototype.set=hU;var Hg=Qo,WI=Hg,fU="Expected a function";function jg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(fU);var n=function(){var s=arguments,r=t?t.apply(this,s):s[0],i=n.cache;if(i.has(r))return i.get(r);var o=e.apply(this,s);return n.cache=i.set(r,o)||i,o};return n.cache=new(jg.Cache||WI),n}jg.Cache=WI;var dU=jg,pU=dU,gU=500;function mU(e){var t=pU(e,function(s){return n.size===gU&&n.clear(),s}),n=t.cache;return t}var vU=mU,_U=vU,yU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bU=/\\(\\)?/g,wU=_U(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yU,function(n,s,r,i){t.push(r?i.replace(bU,"$1"):s||n)}),t}),EU=wU;function TU(e,t){for(var n=-1,s=e==null?0:e.length,r=Array(s);++n<s;)r[n]=t(e[n],n,e);return r}var IU=TU,Wb=Hh,SU=IU,AU=Qn,CU=Fg,Yb=Wb?Wb.prototype:void 0,qb=Yb?Yb.toString:void 0;function YI(e){if(typeof e=="string")return e;if(AU(e))return SU(e,YI)+"";if(CU(e))return qb?qb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var xU=YI,PU=xU;function kU(e){return e==null?"":PU(e)}var DU=kU,RU=Qn,MU=Bg,OU=EU,NU=DU;function LU(e,t){return RU(e)?e:MU(e,t)?[e]:OU(NU(e))}var qI=LU,VU=Es,$U=Jn,FU="[object Arguments]";function BU(e){return $U(e)&&VU(e)==FU}var UU=BU,Kb=UU,HU=Jn,KI=Object.prototype,jU=KI.hasOwnProperty,zU=KI.propertyIsEnumerable,WU=Kb(function(){return arguments}())?Kb:function(e){return HU(e)&&jU.call(e,"callee")&&!zU.call(e,"callee")},zg=WU,YU=9007199254740991,qU=/^(?:0|[1-9]\d*)$/;function KU(e,t){var n=typeof e;return t=t??YU,!!t&&(n=="number"||n!="symbol"&&qU.test(e))&&e>-1&&e%1==0&&e<t}var Wg=KU,GU=9007199254740991;function XU(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=GU}var Yg=XU,QU=Fg;function JU(e){if(typeof e=="string"||QU(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var qh=JU,ZU=qI,t9=zg,e9=Qn,n9=Wg,s9=Yg,r9=qh;function i9(e,t,n){t=ZU(t,e);for(var s=-1,r=t.length,i=!1;++s<r;){var o=r9(t[s]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++s!=r?i:(r=e==null?0:e.length,!!r&&s9(r)&&n9(o,r)&&(e9(e)||t9(e)))}var GI=i9,o9=k3,a9=GI;function l9(e,t){return e!=null&&a9(e,t,o9)}var XI=l9,c9=Es,u9=Jn,h9="[object Date]";function f9(e){return u9(e)&&c9(e)==h9}var d9=f9;function p9(e){return function(t){return e(t)}}var QI=p9,kl={},g9={get exports(){return kl},set exports(e){kl=e}};(function(e,t){var n=HI,s=t&&!t.nodeType&&t,r=s&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===s,o=i&&n.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(g9,kl);var m9=d9,v9=QI,Gb=kl,Xb=Gb&&Gb.isDate,_9=Xb?v9(Xb):m9,y9=_9,b9=Es,w9=Qn,E9=Jn,T9="[object String]";function I9(e){return typeof e=="string"||!w9(e)&&E9(e)&&b9(e)==T9}var Bs=I9;function S9(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var JI=S9,A9=Wh;function C9(){this.__data__=new A9,this.size=0}var x9=C9;function P9(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var k9=P9;function D9(e){return this.__data__.get(e)}var R9=D9;function M9(e){return this.__data__.has(e)}var O9=M9,N9=Wh,L9=Ug,V9=Hg,$9=200;function F9(e,t){var n=this.__data__;if(n instanceof N9){var s=n.__data__;if(!L9||s.length<$9-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new V9(s)}return n.set(e,t),this.size=n.size,this}var B9=F9,U9=Wh,H9=x9,j9=k9,z9=R9,W9=O9,Y9=B9;function Jo(e){var t=this.__data__=new U9(e);this.size=t.size}Jo.prototype.clear=H9;Jo.prototype.delete=j9;Jo.prototype.get=z9;Jo.prototype.has=W9;Jo.prototype.set=Y9;var qg=Jo,q9="__lodash_hash_undefined__";function K9(e){return this.__data__.set(e,q9),this}var G9=K9;function X9(e){return this.__data__.has(e)}var Q9=X9,J9=Hg,Z9=G9,tH=Q9;function Wu(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new J9;++t<n;)this.add(e[t])}Wu.prototype.add=Wu.prototype.push=Z9;Wu.prototype.has=tH;var eH=Wu;function nH(e,t){return e.has(t)}var sH=nH,rH=eH,iH=JI,oH=sH,aH=1,lH=2;function cH(e,t,n,s,r,i){var o=n&aH,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(e),h=i.get(t);if(c&&h)return c==t&&h==e;var f=-1,d=!0,p=n&lH?new rH:void 0;for(i.set(e,t),i.set(t,e);++f<a;){var m=e[f],_=t[f];if(s)var y=o?s(_,m,f,t,e,i):s(m,_,f,e,t,i);if(y!==void 0){if(y)continue;d=!1;break}if(p){if(!iH(t,function(E,P){if(!oH(p,P)&&(m===E||r(m,E,n,s,i)))return p.push(P)})){d=!1;break}}else if(!(m===_||r(m,_,n,s,i))){d=!1;break}}return i.delete(e),i.delete(t),d}var ZI=cH,uH=ws,hH=uH.Uint8Array,tS=hH;function fH(e){var t=-1,n=Array(e.size);return e.forEach(function(s,r){n[++t]=[r,s]}),n}var dH=fH;function pH(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var gH=pH,Qb=Hh,Jb=tS,mH=Go,vH=ZI,_H=dH,yH=gH,bH=1,wH=2,EH="[object Boolean]",TH="[object Date]",IH="[object Error]",SH="[object Map]",AH="[object Number]",CH="[object RegExp]",xH="[object Set]",PH="[object String]",kH="[object Symbol]",DH="[object ArrayBuffer]",RH="[object DataView]",Zb=Qb?Qb.prototype:void 0,zf=Zb?Zb.valueOf:void 0;function MH(e,t,n,s,r,i,o){switch(n){case RH:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case DH:return!(e.byteLength!=t.byteLength||!i(new Jb(e),new Jb(t)));case EH:case TH:case AH:return mH(+e,+t);case IH:return e.name==t.name&&e.message==t.message;case CH:case PH:return e==t+"";case SH:var a=_H;case xH:var l=s&bH;if(a||(a=yH),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;s|=wH,o.set(e,t);var h=vH(a(e),a(t),s,r,i,o);return o.delete(e),h;case kH:if(zf)return zf.call(e)==zf.call(t)}return!1}var OH=MH;function NH(e,t){for(var n=-1,s=t.length,r=e.length;++n<s;)e[r+n]=t[n];return e}var LH=NH,VH=LH,$H=Qn;function FH(e,t,n){var s=t(e);return $H(e)?s:VH(s,n(e))}var BH=FH;function UH(e,t){for(var n=-1,s=e==null?0:e.length,r=0,i=[];++n<s;){var o=e[n];t(o,n,e)&&(i[r++]=o)}return i}var HH=UH;function jH(){return[]}var zH=jH,WH=HH,YH=zH,qH=Object.prototype,KH=qH.propertyIsEnumerable,t0=Object.getOwnPropertySymbols,GH=t0?function(e){return e==null?[]:(e=Object(e),WH(t0(e),function(t){return KH.call(e,t)}))}:YH,XH=GH;function QH(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var JH=QH,Vo={},ZH={get exports(){return Vo},set exports(e){Vo=e}};function tj(){return!1}var ej=tj;(function(e,t){var n=ws,s=ej,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||s;e.exports=c})(ZH,Vo);var nj=Es,sj=Yg,rj=Jn,ij="[object Arguments]",oj="[object Array]",aj="[object Boolean]",lj="[object Date]",cj="[object Error]",uj="[object Function]",hj="[object Map]",fj="[object Number]",dj="[object Object]",pj="[object RegExp]",gj="[object Set]",mj="[object String]",vj="[object WeakMap]",_j="[object ArrayBuffer]",yj="[object DataView]",bj="[object Float32Array]",wj="[object Float64Array]",Ej="[object Int8Array]",Tj="[object Int16Array]",Ij="[object Int32Array]",Sj="[object Uint8Array]",Aj="[object Uint8ClampedArray]",Cj="[object Uint16Array]",xj="[object Uint32Array]",ue={};ue[bj]=ue[wj]=ue[Ej]=ue[Tj]=ue[Ij]=ue[Sj]=ue[Aj]=ue[Cj]=ue[xj]=!0;ue[ij]=ue[oj]=ue[_j]=ue[aj]=ue[yj]=ue[lj]=ue[cj]=ue[uj]=ue[hj]=ue[fj]=ue[dj]=ue[pj]=ue[gj]=ue[mj]=ue[vj]=!1;function Pj(e){return rj(e)&&sj(e.length)&&!!ue[nj(e)]}var kj=Pj,Dj=kj,Rj=QI,e0=kl,n0=e0&&e0.isTypedArray,Mj=n0?Rj(n0):Dj,Kg=Mj,Oj=JH,Nj=zg,Lj=Qn,Vj=Vo,$j=Wg,Fj=Kg,Bj=Object.prototype,Uj=Bj.hasOwnProperty;function Hj(e,t){var n=Lj(e),s=!n&&Nj(e),r=!n&&!s&&Vj(e),i=!n&&!s&&!r&&Fj(e),o=n||s||r||i,a=o?Oj(e.length,String):[],l=a.length;for(var c in e)(t||Uj.call(e,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||$j(c,l)))&&a.push(c);return a}var eS=Hj,jj=Object.prototype;function zj(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||jj;return e===n}var Gg=zj;function Wj(e,t){return function(n){return e(t(n))}}var nS=Wj,Yj=nS,qj=Yj(Object.keys,Object),Kj=qj,Gj=Gg,Xj=Kj,Qj=Object.prototype,Jj=Qj.hasOwnProperty;function Zj(e){if(!Gj(e))return Xj(e);var t=[];for(var n in Object(e))Jj.call(e,n)&&n!="constructor"&&t.push(n);return t}var tz=Zj,ez=Vi,nz=Yg;function sz(e){return e!=null&&nz(e.length)&&!ez(e)}var Gl=sz,rz=eS,iz=tz,oz=Gl;function az(e){return oz(e)?rz(e):iz(e)}var Xg=az,lz=BH,cz=XH,uz=Xg;function hz(e){return lz(e,uz,cz)}var fz=hz,s0=fz,dz=1,pz=Object.prototype,gz=pz.hasOwnProperty;function mz(e,t,n,s,r,i){var o=n&dz,a=s0(e),l=a.length,c=s0(t),h=c.length;if(l!=h&&!o)return!1;for(var f=l;f--;){var d=a[f];if(!(o?d in t:gz.call(t,d)))return!1}var p=i.get(e),m=i.get(t);if(p&&m)return p==t&&m==e;var _=!0;i.set(e,t),i.set(t,e);for(var y=o;++f<l;){d=a[f];var E=e[d],P=t[d];if(s)var D=o?s(P,E,d,t,e,i):s(E,P,d,e,t,i);if(!(D===void 0?E===P||r(E,P,n,s,i):D)){_=!1;break}y||(y=d=="constructor")}if(_&&!y){var R=e.constructor,O=t.constructor;R!=O&&"constructor"in e&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof O=="function"&&O instanceof O)&&(_=!1)}return i.delete(e),i.delete(t),_}var vz=mz,_z=$i,yz=ws,bz=_z(yz,"DataView"),wz=bz,Ez=$i,Tz=ws,Iz=Ez(Tz,"Promise"),Sz=Iz,Az=$i,Cz=ws,xz=Az(Cz,"Set"),Pz=xz,kz=$i,Dz=ws,Rz=kz(Dz,"WeakMap"),Mz=Rz,Xd=wz,Qd=Ug,Jd=Sz,Zd=Pz,tp=Mz,sS=Es,Zo=zI,r0="[object Map]",Oz="[object Object]",i0="[object Promise]",o0="[object Set]",a0="[object WeakMap]",l0="[object DataView]",Nz=Zo(Xd),Lz=Zo(Qd),Vz=Zo(Jd),$z=Zo(Zd),Fz=Zo(tp),li=sS;(Xd&&li(new Xd(new ArrayBuffer(1)))!=l0||Qd&&li(new Qd)!=r0||Jd&&li(Jd.resolve())!=i0||Zd&&li(new Zd)!=o0||tp&&li(new tp)!=a0)&&(li=function(e){var t=sS(e),n=t==Oz?e.constructor:void 0,s=n?Zo(n):"";if(s)switch(s){case Nz:return l0;case Lz:return r0;case Vz:return i0;case $z:return o0;case Fz:return a0}return t});var Bz=li,Wf=qg,Uz=ZI,Hz=OH,jz=vz,c0=Bz,u0=Qn,h0=Vo,zz=Kg,Wz=1,f0="[object Arguments]",d0="[object Array]",Vc="[object Object]",Yz=Object.prototype,p0=Yz.hasOwnProperty;function qz(e,t,n,s,r,i){var o=u0(e),a=u0(t),l=o?d0:c0(e),c=a?d0:c0(t);l=l==f0?Vc:l,c=c==f0?Vc:c;var h=l==Vc,f=c==Vc,d=l==c;if(d&&h0(e)){if(!h0(t))return!1;o=!0,h=!1}if(d&&!h)return i||(i=new Wf),o||zz(e)?Uz(e,t,n,s,r,i):Hz(e,t,l,n,s,r,i);if(!(n&Wz)){var p=h&&p0.call(e,"__wrapped__"),m=f&&p0.call(t,"__wrapped__");if(p||m){var _=p?e.value():e,y=m?t.value():t;return i||(i=new Wf),r(_,y,n,s,i)}}return d?(i||(i=new Wf),jz(e,t,n,s,r,i)):!1}var Kz=qz,Gz=Kz,g0=Jn;function rS(e,t,n,s,r){return e===t?!0:e==null||t==null||!g0(e)&&!g0(t)?e!==e&&t!==t:Gz(e,t,n,s,rS,r)}var iS=rS,Xz=qg,Qz=iS,Jz=1,Zz=2;function tW(e,t,n,s){var r=n.length,i=r,o=!s;if(e==null)return!i;for(e=Object(e);r--;){var a=n[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){a=n[r];var l=a[0],c=e[l],h=a[1];if(o&&a[2]){if(c===void 0&&!(l in e))return!1}else{var f=new Xz;if(s)var d=s(c,h,l,e,t,f);if(!(d===void 0?Qz(h,c,Jz|Zz,s,f):d))return!1}}return!0}var eW=tW,nW=tr;function sW(e){return e===e&&!nW(e)}var oS=sW,rW=oS,iW=Xg;function oW(e){for(var t=iW(e),n=t.length;n--;){var s=t[n],r=e[s];t[n]=[s,r,rW(r)]}return t}var aW=oW;function lW(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var aS=lW,cW=eW,uW=aW,hW=aS;function fW(e){var t=uW(e);return t.length==1&&t[0][2]?hW(t[0][0],t[0][1]):function(n){return n===e||cW(n,e,t)}}var dW=fW,pW=qI,gW=qh;function mW(e,t){t=pW(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[gW(t[n++])];return n&&n==s?e:void 0}var lS=mW,vW=lS;function _W(e,t,n){var s=e==null?void 0:vW(e,t);return s===void 0?n:s}var di=_W;function yW(e,t){return e!=null&&t in Object(e)}var bW=yW,wW=bW,EW=GI;function TW(e,t){return e!=null&&EW(e,t,wW)}var IW=TW,SW=iS,AW=di,CW=IW,xW=Bg,PW=oS,kW=aS,DW=qh,RW=1,MW=2;function OW(e,t){return xW(e)&&PW(t)?kW(DW(e),t):function(n){var s=AW(n,e);return s===void 0&&s===t?CW(n,e):SW(t,s,RW|MW)}}var NW=OW;function LW(e){return e}var Qg=LW;function VW(e){return function(t){return t==null?void 0:t[e]}}var $W=VW,FW=lS;function BW(e){return function(t){return FW(t,e)}}var UW=BW,HW=$W,jW=UW,zW=Bg,WW=qh;function YW(e){return zW(e)?HW(WW(e)):jW(e)}var qW=YW,KW=dW,GW=NW,XW=Qg,QW=Qn,JW=qW;function ZW(e){return typeof e=="function"?e:e==null?XW:typeof e=="object"?QW(e)?GW(e[0],e[1]):KW(e):JW(e)}var cS=ZW;function t7(e){return function(t,n,s){for(var r=-1,i=Object(t),o=s(t),a=o.length;a--;){var l=o[e?a:++r];if(n(i[l],l,i)===!1)break}return t}}var e7=t7,n7=e7,s7=n7(),uS=s7,r7=uS,i7=Xg;function o7(e,t){return e&&r7(e,t,i7)}var hS=o7,a7=Gl;function l7(e,t){return function(n,s){if(n==null)return n;if(!a7(n))return e(n,s);for(var r=n.length,i=t?r:-1,o=Object(n);(t?i--:++i<r)&&s(o[i],i,o)!==!1;);return n}}var c7=l7,u7=hS,h7=c7,f7=h7(u7),d7=f7,p7=d7;function g7(e,t){var n;return p7(e,function(s,r,i){return n=t(s,r,i),!n}),!!n}var m7=g7,v7=Go,_7=Gl,y7=Wg,b7=tr;function w7(e,t,n){if(!b7(n))return!1;var s=typeof t;return(s=="number"?_7(n)&&y7(t,n.length):s=="string"&&t in n)?v7(n[t],e):!1}var Jg=w7,E7=JI,T7=cS,I7=m7,S7=Qn,A7=Jg;function C7(e,t,n){var s=S7(e)?E7:I7;return n&&A7(e,t,n)&&(t=void 0),s(e,T7(t))}var x7=C7,P7=Es,k7=Jn,D7="[object Boolean]";function R7(e){return e===!0||e===!1||k7(e)&&P7(e)==D7}var M7=R7,O7=Es,N7=Jn,L7="[object Number]";function V7(e){return typeof e=="number"||N7(e)&&O7(e)==L7}var ys=V7,$7=$i,F7=function(){try{var e=$7(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fS=F7,m0=fS;function B7(e,t,n){t=="__proto__"&&m0?m0(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Kh=B7,U7=Kh,H7=Go,j7=Object.prototype,z7=j7.hasOwnProperty;function W7(e,t,n){var s=e[t];(!(z7.call(e,t)&&H7(s,n))||n===void 0&&!(t in e))&&U7(e,t,n)}var Y7=W7,q7=Kh,K7=hS,G7=cS;function X7(e,t){var n={};return t=G7(t),K7(e,function(s,r,i){q7(n,r,t(s,r,i))}),n}var Q7=X7;function J7(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var dS=J7,Z7=dS,v0=Math.max;function tY(e,t,n){return t=v0(t===void 0?e.length-1:t,0),function(){for(var s=arguments,r=-1,i=v0(s.length-t,0),o=Array(i);++r<i;)o[r]=s[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=s[r];return a[t]=n(o),Z7(e,this,a)}}var eY=tY;function nY(e){return function(){return e}}var sY=nY,rY=sY,_0=fS,iY=Qg,oY=_0?function(e,t){return _0(e,"toString",{configurable:!0,enumerable:!1,value:rY(t),writable:!0})}:iY,aY=oY,lY=800,cY=16,uY=Date.now;function hY(e){var t=0,n=0;return function(){var s=uY(),r=cY-(s-n);if(n=s,r>0){if(++t>=lY)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var fY=hY,dY=aY,pY=fY,gY=pY(dY),mY=gY,vY=Qg,_Y=eY,yY=mY;function bY(e,t){return yY(_Y(e,t,vY),e+"")}var Zg=bY;function wY(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var EY=wY,TY=tr,IY=Gg,SY=EY,AY=Object.prototype,CY=AY.hasOwnProperty;function xY(e){if(!TY(e))return SY(e);var t=IY(e),n=[];for(var s in e)s=="constructor"&&(t||!CY.call(e,s))||n.push(s);return n}var PY=xY,kY=eS,DY=PY,RY=Gl;function MY(e){return RY(e)?kY(e,!0):DY(e)}var tm=MY,OY=Zg,NY=Go,LY=Jg,VY=tm,pS=Object.prototype,$Y=pS.hasOwnProperty,FY=OY(function(e,t){e=Object(e);var n=-1,s=t.length,r=s>2?t[2]:void 0;for(r&&LY(t[0],t[1],r)&&(s=1);++n<s;)for(var i=t[n],o=VY(i),a=-1,l=o.length;++a<l;){var c=o[a],h=e[c];(h===void 0||NY(h,pS[c])&&!$Y.call(e,c))&&(e[c]=i[c])}return e}),y0=FY,BY=Kh,UY=Go;function HY(e,t,n){(n!==void 0&&!UY(e[t],n)||n===void 0&&!(t in e))&&BY(e,t,n)}var gS=HY,Yu={},jY={get exports(){return Yu},set exports(e){Yu=e}};(function(e,t){var n=ws,s=t&&!t.nodeType&&t,r=s&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===s,o=i?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,h){if(h)return c.slice();var f=c.length,d=a?a(f):new c.constructor(f);return c.copy(d),d}e.exports=l})(jY,Yu);var b0=tS;function zY(e){var t=new e.constructor(e.byteLength);return new b0(t).set(new b0(e)),t}var WY=zY,YY=WY;function qY(e,t){var n=t?YY(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var KY=qY;function GY(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var XY=GY,QY=tr,w0=Object.create,JY=function(){function e(){}return function(t){if(!QY(t))return{};if(w0)return w0(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),ZY=JY,t8=nS,e8=t8(Object.getPrototypeOf,Object),mS=e8,n8=ZY,s8=mS,r8=Gg;function i8(e){return typeof e.constructor=="function"&&!r8(e)?n8(s8(e)):{}}var o8=i8,a8=Gl,l8=Jn;function c8(e){return l8(e)&&a8(e)}var u8=c8,h8=Es,f8=mS,d8=Jn,p8="[object Object]",g8=Function.prototype,m8=Object.prototype,vS=g8.toString,v8=m8.hasOwnProperty,_8=vS.call(Object);function y8(e){if(!d8(e)||h8(e)!=p8)return!1;var t=f8(e);if(t===null)return!0;var n=v8.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&vS.call(n)==_8}var b8=y8;function w8(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var _S=w8,E8=Y7,T8=Kh;function I8(e,t,n,s){var r=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),r?T8(n,a,l):E8(n,a,l)}return n}var S8=I8,A8=S8,C8=tm;function x8(e){return A8(e,C8(e))}var P8=x8,E0=gS,k8=Yu,D8=KY,R8=XY,M8=o8,T0=zg,I0=Qn,O8=u8,N8=Vo,L8=Vi,V8=tr,$8=b8,F8=Kg,S0=_S,B8=P8;function U8(e,t,n,s,r,i,o){var a=S0(e,n),l=S0(t,n),c=o.get(l);if(c){E0(e,n,c);return}var h=i?i(a,l,n+"",e,t,o):void 0,f=h===void 0;if(f){var d=I0(l),p=!d&&N8(l),m=!d&&!p&&F8(l);h=l,d||p||m?I0(a)?h=a:O8(a)?h=R8(a):p?(f=!1,h=k8(l,!0)):m?(f=!1,h=D8(l,!0)):h=[]:$8(l)||T0(l)?(h=a,T0(a)?h=B8(a):(!V8(a)||L8(a))&&(h=M8(l))):f=!1}f&&(o.set(l,h),r(h,l,s,i,o),o.delete(l)),E0(e,n,h)}var H8=U8,j8=qg,z8=gS,W8=uS,Y8=H8,q8=tr,K8=tm,G8=_S;function yS(e,t,n,s,r){e!==t&&W8(t,function(i,o){if(r||(r=new j8),q8(i))Y8(e,t,o,n,yS,s,r);else{var a=s?s(G8(e,o),i,o+"",e,t,r):void 0;a===void 0&&(a=i),z8(e,o,a)}},K8)}var bS=yS,X8=bS,A0=tr;function wS(e,t,n,s,r,i){return A0(e)&&A0(t)&&(i.set(t,e),X8(e,t,void 0,wS,i),i.delete(t)),e}var Q8=wS,J8=Zg,Z8=Jg;function tq(e){return J8(function(t,n){var s=-1,r=n.length,i=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(r--,i):void 0,o&&Z8(n[0],n[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++s<r;){var a=n[s];a&&e(t,a,s,i)}return t})}var eq=tq,nq=bS,sq=eq,rq=sq(function(e,t,n,s){nq(e,t,n,s)}),iq=rq,oq=dS,aq=Zg,lq=Q8,cq=iq,uq=aq(function(e){return e.push(void 0,lq),oq(cq,void 0,e)}),qu=uq;function hq(e){return e&&e.length?e[0]:void 0}var ES=hq;function fq(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var io=fq;const dq=e=>Object.prototype.toString.call(e).slice(8,-1),ep=e=>y9(e)&&!isNaN(e.getTime()),xi=e=>dq(e)==="Object",TS=XI,C0=(e,t)=>x7(t,n=>XI(e,n)),te=(e,t,n="0")=>{for(e=e!=null?String(e):"",t=t||2;e.length<t;)e=`${n}${e}`;return e},gs=e=>Array.isArray(e),pi=e=>gs(e)&&e.length>0,Ku=e=>e==null?null:document&&Bs(e)?document.querySelector(e):e.$el??e,br=(e,t,n,s=void 0)=>{e.removeEventListener(t,n,s)},wr=(e,t,n,s=void 0)=>(e.addEventListener(t,n,s),()=>br(e,t,n,s)),ru=(e,t)=>!!e&&!!t&&(e===t||e.contains(t)),$c=(e,t)=>{(e.key===" "||e.key==="Enter")&&(t(e),e.preventDefault())},pq=(e,...t)=>{const n={};let s;for(s in e)t.includes(s)||(n[s]=e[s]);return n},IS=(e,t)=>{const n={};return t.forEach(s=>{s in e&&(n[s]=e[s])}),n};function gq(e,t,n){return Math.min(Math.max(e,t),n)}var Gu={},mq={get exports(){return Gu},set exports(e){Gu=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){if(s===null||s===!0||s===!1)return NaN;var r=Number(s);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}e.exports=t.default})(mq,Gu);const vq=UI(Gu);var Xu={},_q={get exports(){return Xu},set exports(e){Xu=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){var r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),s.getTime()-r.getTime()}e.exports=t.default})(_q,Xu);const x0=UI(Xu);function yq(e,t){var n=Tq(t);return n.formatToParts?wq(n,e):Eq(n,e)}var bq={year:0,month:1,day:2,hour:3,minute:4,second:5};function wq(e,t){try{for(var n=e.formatToParts(t),s=[],r=0;r<n.length;r++){var i=bq[n[r].type];i>=0&&(s[i]=parseInt(n[r].value,10))}return s}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function Eq(e,t){var n=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[s[3],s[1],s[2],s[4],s[5],s[6]]}var Yf={};function Tq(e){if(!Yf[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";Yf[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Yf[e]}function SS(e,t,n,s,r,i,o){var a=new Date(0);return a.setUTCFullYear(e,t,n),a.setUTCHours(s,r,i,o),a}var P0=36e5,Iq=6e4,qf={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Sq(e,t,n){var s,r;if(!e||(s=qf.timezoneZ.exec(e),s))return 0;var i;if(s=qf.timezoneHH.exec(e),s)return i=parseInt(s[1],10),k0(i)?-(i*P0):NaN;if(s=qf.timezoneHHMM.exec(e),s){i=parseInt(s[1],10);var o=parseInt(s[2],10);return k0(i,o)?(r=Math.abs(i)*P0+o*Iq,i>0?-r:r):NaN}if(xq(e)){t=new Date(t||Date.now());var a=Aq(t),l=np(a,e),c=Cq(t,l,e);return-c}return NaN}function Aq(e){return SS(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function np(e,t){var n=yq(e,t),s=SS(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),r=e.getTime(),i=r%1e3;return r-=i>=0?i:1e3+i,s-r}function Cq(e,t,n){var s=e.getTime(),r=s-t,i=np(new Date(r),n);if(t===i)return t;r-=i-t;var o=np(new Date(r),n);return i===o?i:Math.max(i,o)}function k0(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var D0={};function xq(e){if(D0[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),D0[e]=!0,!0}catch{return!1}}var Pq=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const kq=Pq;var Kf=36e5,R0=6e4,Dq=2,ln={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:kq};function Rq(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},s=n.additionalDigits==null?Dq:vq(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var r=Mq(e),i=Oq(r.date,s),o=i.year,a=i.restDateString,l=Nq(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),h=0,f;if(r.time&&(h=Lq(r.time),isNaN(h)))return new Date(NaN);if(r.timeZone||n.timeZone){if(f=Sq(r.timeZone||n.timeZone,new Date(c+h)),isNaN(f))return new Date(NaN)}else f=x0(new Date(c+h)),f=x0(new Date(c+h+f));return new Date(c+h+f)}else return new Date(NaN)}function Mq(e){var t={},n=ln.dateTimePattern.exec(e),s;if(n?(t.date=n[1],s=n[3]):(n=ln.datePattern.exec(e),n?(t.date=n[1],s=n[2]):(t.date=null,s=e)),s){var r=ln.timeZone.exec(s);r?(t.time=s.replace(r[1],""),t.timeZone=r[1].trim()):t.time=s}return t}function Oq(e,t){var n=ln.YYY[t],s=ln.YYYYY[t],r;if(r=ln.YYYY.exec(e)||s.exec(e),r){var i=r[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(r=ln.YY.exec(e)||n.exec(e),r){var o=r[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function Nq(e,t){if(t===null)return null;var n,s,r,i;if(e.length===0)return s=new Date(0),s.setUTCFullYear(t),s;if(n=ln.MM.exec(e),n)return s=new Date(0),r=parseInt(n[1],10)-1,O0(t,r)?(s.setUTCFullYear(t,r),s):new Date(NaN);if(n=ln.DDD.exec(e),n){s=new Date(0);var o=parseInt(n[1],10);return Fq(t,o)?(s.setUTCFullYear(t,0,o),s):new Date(NaN)}if(n=ln.MMDD.exec(e),n){s=new Date(0),r=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return O0(t,r,a)?(s.setUTCFullYear(t,r,a),s):new Date(NaN)}if(n=ln.Www.exec(e),n)return i=parseInt(n[1],10)-1,N0(t,i)?M0(t,i):new Date(NaN);if(n=ln.WwwD.exec(e),n){i=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return N0(t,i,l)?M0(t,i,l):new Date(NaN)}return null}function Lq(e){var t,n,s;if(t=ln.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),Gf(n)?n%24*Kf:NaN;if(t=ln.HHMM.exec(e),t)return n=parseInt(t[1],10),s=parseFloat(t[2].replace(",",".")),Gf(n,s)?n%24*Kf+s*R0:NaN;if(t=ln.HHMMSS.exec(e),t){n=parseInt(t[1],10),s=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return Gf(n,s,r)?n%24*Kf+s*R0+r*1e3:NaN}return null}function M0(e,t,n){t=t||0,n=n||0;var s=new Date(0);s.setUTCFullYear(e,0,4);var r=s.getUTCDay()||7,i=t*7+n+1-r;return s.setUTCDate(s.getUTCDate()+i),s}var Vq=[31,28,31,30,31,30,31,31,30,31,30,31],$q=[31,29,31,30,31,30,31,31,30,31,30,31];function AS(e){return e%400===0||e%4===0&&e%100!==0}function O0(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var s=AS(e);if(s&&n>$q[t]||!s&&n>Vq[t])return!1}return!0}function Fq(e,t){if(t<1)return!1;var n=AS(e);return!(n&&t>366||!n&&t>365)}function N0(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function Gf(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function en(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function iu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?iu=function(n){return typeof n}:iu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},iu(e)}function er(e){en(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||iu(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ta(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var Bq={};function em(){return Bq}function Pi(e,t){var n,s,r,i,o,a,l,c;en(1,arguments);var h=em(),f=ta((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&r!==void 0?r:h.weekStartsOn)!==null&&s!==void 0?s:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=er(e),p=d.getDay(),m=(p<f?7:0)+p-f;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}function L0(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var Uq=6048e5;function Hq(e,t,n){en(2,arguments);var s=Pi(e,n),r=Pi(t,n),i=s.getTime()-L0(s),o=r.getTime()-L0(r);return Math.round((i-o)/Uq)}function jq(e){en(1,arguments);var t=er(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function zq(e){en(1,arguments);var t=er(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Wq(e,t){return en(1,arguments),Hq(jq(e),zq(e),t)+1}function Yq(e,t){var n,s,r,i,o,a,l,c;en(1,arguments);var h=er(e),f=h.getFullYear(),d=em(),p=ta((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&s!==void 0?s:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(f+1,0,p),m.setHours(0,0,0,0);var _=Pi(m,t),y=new Date(0);y.setFullYear(f,0,p),y.setHours(0,0,0,0);var E=Pi(y,t);return h.getTime()>=_.getTime()?f+1:h.getTime()>=E.getTime()?f:f-1}function qq(e,t){var n,s,r,i,o,a,l,c;en(1,arguments);var h=em(),f=ta((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&r!==void 0?r:h.firstWeekContainsDate)!==null&&s!==void 0?s:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),d=Yq(e,t),p=new Date(0);p.setFullYear(d,0,f),p.setHours(0,0,0,0);var m=Pi(p,t);return m}var Kq=6048e5;function Gq(e,t){en(1,arguments);var n=er(e),s=Pi(n,t).getTime()-qq(n,t).getTime();return Math.round(s/Kq)+1}function Qu(e){return en(1,arguments),Pi(e,{weekStartsOn:1})}function Xq(e){en(1,arguments);var t=er(e),n=t.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var r=Qu(s),i=new Date(0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);var o=Qu(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Qq(e){en(1,arguments);var t=Xq(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var s=Qu(n);return s}var Jq=6048e5;function Zq(e){en(1,arguments);var t=er(e),n=Qu(t).getTime()-Qq(t).getTime();return Math.round(n/Jq)+1}function on(e,t){en(2,arguments);var n=er(e),s=ta(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Ju(e,t){en(2,arguments);var n=er(e),s=ta(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var r=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+s+1,0);var o=i.getDate();return r>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function V0(e,t){en(2,arguments);var n=ta(t);return Ju(e,n*12)}const tK={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function eK({monthComps:e,prevMonthComps:t,nextMonthComps:n},s){const r=[],{firstDayOfWeek:i,firstWeekday:o,isoWeeknumbers:a,weeknumbers:l,numDays:c,numWeeks:h}=e,f=o+(o<i?ze:0)-i;let d=!0,p=!1,m=!1,_=0;const y=new Intl.DateTimeFormat(s.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let E=t.numDays-f+1,P=t.numDays-E+1,D=Math.floor((E-1)/ze+1),R=1,O=t.numWeeks,V=1,T=t.month,b=t.year;const w=new Date,C=w.getDate(),x=w.getMonth()+1,A=w.getFullYear();for(let S=1;S<=KK;S++){for(let ht=1,Q=i;ht<=ze;ht++,Q+=Q===ze?1-ze:1){d&&Q===o&&(E=1,P=e.numDays,D=Math.floor((E-1)/ze+1),R=Math.floor((c-E)/ze+1),O=1,V=h,T=e.month,b=e.year,d=!1,p=!0);const at=s.getDateFromParams(b,T,E,0,0,0,0),ot=s.getDateFromParams(b,T,E,12,0,0,0),gt=s.getDateFromParams(b,T,E,23,59,59,999),Lt=at,z=`${te(b,4)}-${te(T,2)}-${te(E,2)}`,At=ht,et=ze-ht,Pt=l[S-1],Rt=a[S-1],Yt=E===C&&T===x&&b===A,Ht=p&&E===1,F=p&&E===c,st=S===1,Z=S===h,lt=ht===1,Ot=ht===ze,k=VS(b,T,E);r.push({locale:s,id:z,position:++_,label:E.toString(),ariaLabel:y.format(new Date(b,T-1,E)),day:E,dayFromEnd:P,weekday:Q,weekdayPosition:At,weekdayPositionFromEnd:et,weekdayOrdinal:D,weekdayOrdinalFromEnd:R,week:O,weekFromEnd:V,weekPosition:S,weeknumber:Pt,isoWeeknumber:Rt,month:T,year:b,date:Lt,startDate:at,endDate:gt,noonDate:ot,dayIndex:k,isToday:Yt,isFirstDay:Ht,isLastDay:F,isDisabled:!p,isFocusable:!p,isFocused:!1,inMonth:p,inPrevMonth:d,inNextMonth:m,onTop:st,onBottom:Z,onLeft:lt,onRight:Ot,classes:[`id-${z}`,`day-${E}`,`day-from-end-${P}`,`weekday-${Q}`,`weekday-position-${At}`,`weekday-ordinal-${D}`,`weekday-ordinal-from-end-${R}`,`week-${O}`,`week-from-end-${V}`,{"is-today":Yt,"is-first-day":Ht,"is-last-day":F,"in-month":p,"in-prev-month":d,"in-next-month":m,"on-top":st,"on-bottom":Z,"on-left":lt,"on-right":Ot}]}),p&&F?(p=!1,m=!0,E=1,P=c,D=1,R=Math.floor((c-E)/ze+1),O=1,V=n.numWeeks,T=n.month,b=n.year):(E++,P--,D=Math.floor((E-1)/ze+1),R=Math.floor((c-E)/ze+1))}O++,V--}return r}function nK(e,t,n,s){const r=e.reduce((i,o,a)=>{const l=Math.floor(a/7);let c=i[l];return c||(c={id:`week-${l+1}`,title:"",week:o.week,weekPosition:o.weekPosition,weeknumber:o.weeknumber,isoWeeknumber:o.isoWeeknumber,weeknumberDisplay:t?o.weeknumber:n?o.isoWeeknumber:void 0,days:[]},i[l]=c),c.days.push(o),i},Array(e.length/ze));return r.forEach(i=>{const o=i.days[0],a=i.days[i.days.length-1];o.month===a.month?i.title=`${s.formatDate(o.date,"MMMM YYYY")}`:o.year===a.year?i.title=`${s.formatDate(o.date,"MMM")} - ${s.formatDate(a.date,"MMM YYYY")}`:i.title=`${s.formatDate(o.date,"MMM YYYY")} - ${s.formatDate(a.date,"MMM YYYY")}`}),r}function sK(e,t){return e.days.map(n=>({label:t.formatDate(n.date,t.masks.weekdays),weekday:n.weekday}))}function rK(e,t){return`${t}.${te(e,2)}`}function iK(e,t,n){return IS(n.getDateParts(n.toDate(e)),tK[t])}function CS({day:e,week:t,month:n,year:s},r,i,o){if(i==="daily"&&e){const a=new Date(s,n-1,e),l=on(a,r);return{day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()}}else if(i==="weekly"&&t){const l=o.getMonthParts(n,s).firstDayOfMonth,c=on(l,(t-1+r)*7),h=o.getDateParts(c);return{week:h.week,month:h.month,year:h.year}}else{const a=new Date(s,n-1,1),l=Ju(a,r);return{month:l.getMonth()+1,year:l.getFullYear()}}}function os(e){return e!=null&&e.month!=null&&e.year!=null}function sp(e,t){return!os(e)||!os(t)?!1:(e=e,t=t,e.year!==t.year?e.year<t.year:e.month&&t.month&&e.month!==t.month?e.month<t.month:e.week&&t.week&&e.week!==t.week?e.week<t.week:e.day&&t.day&&e.day!==t.day?e.day<t.day:!1)}function Zu(e,t){return!os(e)||!os(t)?!1:(e=e,t=t,e.year!==t.year?e.year>t.year:e.month&&t.month&&e.month!==t.month?e.month>t.month:e.week&&t.week&&e.week!==t.week?e.week>t.week:e.day&&t.day&&e.day!==t.day?e.day>t.day:!1)}function oK(e,t,n){return(e||!1)&&!sp(e,t)&&!Zu(e,n)}function aK(e,t){return!e&&t||e&&!t?!1:!e&&!t?!0:(e=e,t=t,e.year===t.year&&e.month===t.month&&e.week===t.week&&e.day===t.day)}function lK(e,t,n,s){if(!os(e)||!os(t))return[];const r=[];for(;!Zu(e,t);)r.push(e),e=CS(e,1,n,s);return r}function xS(e){const{day:t,week:n,month:s,year:r}=e;let i=`${r}-${te(s,2)}`;return n&&(i=`${i}-w${n}`),t&&(i=`${i}-${te(t,2)}`),i}function cK(e,t){const{month:n,year:s,showWeeknumbers:r,showIsoWeeknumbers:i}=e,o=new Date(s,n-1,15),a=t.getMonthParts(n,s),l=t.getPrevMonthParts(n,s),c=t.getNextMonthParts(n,s),h=eK({monthComps:a,prevMonthComps:l,nextMonthComps:c},t),f=nK(h,r,i,t),d=sK(f[0],t);return{id:xS(e),month:n,year:s,monthTitle:t.formatDate(o,t.masks.title),shortMonthLabel:t.formatDate(o,"MMM"),monthLabel:t.formatDate(o,"MMMM"),shortYearLabel:s.toString().substring(2),yearLabel:s.toString(),monthComps:a,prevMonthComps:l,nextMonthComps:c,days:h,weeks:f,weekdays:d}}function uK(e,t){const{day:n,week:s,view:r,trimWeeks:i}=e,o={...t,...e,title:"",viewDays:[],viewWeeks:[]};switch(r){case"daily":{let a=o.days.find(c=>c.inMonth);n?a=o.days.find(c=>c.day===n&&c.inMonth)||a:s&&(a=o.days.find(c=>c.week===s&&c.inMonth));const l=o.weeks[a.week-1];o.viewWeeks=[l],o.viewDays=[a],o.week=a.week,o.weekTitle=l.title,o.day=a.day,o.dayTitle=a.ariaLabel,o.title=o.dayTitle;break}case"weekly":{o.week=s||1;const a=o.weeks[o.week-1];o.viewWeeks=[a],o.viewDays=a.days,o.weekTitle=a.title,o.title=o.weekTitle;break}default:{o.title=o.monthTitle,o.viewWeeks=o.weeks.slice(0,i?o.monthComps.numWeeks:void 0),o.viewDays=o.days;break}}return o}class $0{constructor(t,n,s){_t(this,"keys",[]),_t(this,"store",{}),this.size=t,this.createKey=n,this.createItem=s}get(...t){const n=this.createKey(...t);return this.store[n]}getOrSet(...t){const n=this.createKey(...t);if(this.store[n])return this.store[n];const s=this.createItem(...t);if(this.keys.length>=this.size){const r=this.keys.shift();r!=null&&delete this.store[r]}return this.keys.push(n),this.store[n]=s,s}}class _o{constructor(t,n=new th){_t(this,"order"),_t(this,"locale"),_t(this,"start",null),_t(this,"end",null),_t(this,"repeat",null);var s;this.locale=n;const{start:r,end:i,span:o,order:a,repeat:l}=t;ep(r)&&(this.start=n.getDateParts(r)),ep(i)?this.end=n.getDateParts(i):this.start!=null&&o&&(this.end=n.getDateParts(on(this.start.date,o-1))),this.order=a??0,l&&(this.repeat=new eh({from:(s=this.start)==null?void 0:s.date,...l},{locale:this.locale}))}static fromMany(t,n){return(gs(t)?t:[t]).filter(s=>s).map(s=>_o.from(s,n))}static from(t,n){if(t instanceof _o)return t;const s={start:null,end:null};return t!=null&&(gs(t)?(s.start=t[0]??null,s.end=t[1]??null):xi(t)?Object.assign(s,t):(s.start=t,s.end=t)),s.start!=null&&(s.start=new Date(s.start)),s.end!=null&&(s.end=new Date(s.end)),new _o(s,n)}get opts(){const{order:t,locale:n}=this;return{order:t,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:t,end:n}=this;return t&&n&&t.year===n.year&&t.month===n.month&&t.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(t){var n,s;return((n=this.start)==null?void 0:n.dayIndex)===t.dayIndex||!!((s=this.repeat)!=null&&s.passes(t))}intersectsDay(t){return this.intersectsDayRange(t,t)}intersectsRange(t){var n,s;return this.intersectsDayRange(((n=t.start)==null?void 0:n.dayIndex)??-1/0,((s=t.end)==null?void 0:s.dayIndex)??1/0)}intersectsDayRange(t,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<t)}}class hK{constructor(){_t(this,"records",{})}render(t,n,s){var r,i,o,a;let l=null;const c=s[0].dayIndex,h=s[s.length-1].dayIndex;return n.hasRepeat?s.forEach(f=>{var d,p;if(n.startsOnDay(f)){const m=n.daySpan<1/0?n.daySpan:1;l={startDay:f.dayIndex,startTime:((d=n.start)==null?void 0:d.time)??0,endDay:f.dayIndex+m-1,endTime:((p=n.end)==null?void 0:p.time)??ou},this.getRangeRecords(t).push(l)}}):n.intersectsDayRange(c,h)&&(l={startDay:((r=n.start)==null?void 0:r.dayIndex)??-1/0,startTime:((i=n.start)==null?void 0:i.time)??-1/0,endDay:((o=n.end)==null?void 0:o.dayIndex)??1/0,endTime:((a=n.end)==null?void 0:a.time)??1/0},this.getRangeRecords(t).push(l)),l}getRangeRecords(t){let n=this.records[t.key];return n||(n={ranges:[],data:t},this.records[t.key]=n),n.ranges}getCell(t,n){return this.getCells(n).find(i=>i.data.key===t)}cellExists(t,n){const s=this.records[t];return s==null?!1:s.ranges.some(r=>r.startDay<=n&&r.endDay>=n)}getCells(t){const n=Object.values(this.records),s=[],{dayIndex:r}=t;return n.forEach(({data:i,ranges:o})=>{o.filter(a=>a.startDay<=r&&a.endDay>=r).forEach(a=>{const l=r===a.startDay,c=r===a.endDay,h=l?a.startTime:0,f=new Date(t.startDate.getTime()+h),d=c?a.endTime:ou,p=new Date(t.endDate.getTime()+d),m=h===0&&d===ou,_=i.order||0;s.push({...a,data:i,onStart:l,onEnd:c,startTime:h,startDate:f,endTime:d,endDate:p,allDay:m,order:_})})}),s.sort((i,o)=>i.order-o.order),s}}const Xs={ar:{dow:7,L:"D/M/YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYYMD"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};Xs.en=Xs["en-US"];Xs.es=Xs["es-ES"];Xs.no=Xs.nb;Xs.zh=Xs["zh-CN"];const fK=Object.entries(Xs).reduce((e,[t,{dow:n,L:s}])=>(e[t]={id:t,firstDayOfWeek:n,masks:{L:s}},e),{}),dK="MMMM YYYY",pK="W",gK="MMM",mK="h A",vK=["L","YYYY-MM-DD","YYYY/MM/DD"],_K=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],yK=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],bK=["h:mm A"],wK=["HH:mm"],EK="WWW, MMM D, YYYY",TK=["L","YYYY-MM-DD","YYYY/MM/DD"],IK="iso",SK="YYYY-MM-DDTHH:mm:ss.SSSZ",AK={title:dK,weekdays:pK,navMonths:gK,hours:mK,input:vK,inputDateTime:_K,inputDateTime24hr:yK,inputTime:bK,inputTime24hr:wK,dayPopover:EK,data:TK,model:IK,iso:SK},CK=300,xK=60,PK=80,kK={maxSwipeTime:CK,minHorizontalSwipeDistance:xK,maxVerticalSwipeDistance:PK},DK={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:kK,masks:AK,locales:fK,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},rp=$o(DK),RK=G(()=>Q7(rp.locales,e=>(e.masks=qu(e.masks,rp.masks),e))),Dl=e=>typeof window<"u"&&TS(window.__vcalendar__,e)?di(window.__vcalendar__,e):di(rp,e),MK=12,OK=5;function NK(e,t){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let s;Bs(e)?s=e:TS(e,"id")&&(s=e.id),s=(s||n).toLowerCase();const r=Object.keys(t),i=l=>r.find(c=>c.toLowerCase()===l);s=i(s)||i(s.substring(0,2))||n;const o={...t["en-IE"],...t[s],id:s,monthCacheSize:MK,pageCacheSize:OK};return xi(e)?qu(e,o):o}class th{constructor(t=void 0,n){_t(this,"id"),_t(this,"daysInWeek"),_t(this,"firstDayOfWeek"),_t(this,"masks"),_t(this,"timezone"),_t(this,"hourLabels"),_t(this,"dayNames"),_t(this,"dayNamesShort"),_t(this,"dayNamesShorter"),_t(this,"dayNamesNarrow"),_t(this,"monthNames"),_t(this,"monthNamesShort"),_t(this,"relativeTimeNames"),_t(this,"amPm",["am","pm"]),_t(this,"monthCache"),_t(this,"pageCache");const{id:s,firstDayOfWeek:r,masks:i,monthCacheSize:o,pageCacheSize:a}=NK(t,RK.value);this.monthCache=new $0(o,iG,oG),this.pageCache=new $0(a,xS,cK),this.id=s,this.daysInWeek=ze,this.firstDayOfWeek=gq(r,1,ze),this.masks=i,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=Xf("long",this.id),this.dayNamesShort=Xf("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(l=>l.substring(0,2)),this.dayNamesNarrow=Xf("narrow",this.id),this.monthNames=z0("long",this.id),this.monthNamesShort=z0("short",this.id),this.relativeTimeNames=cG(this.id)}formatDate(t,n){return pG(t,n,this)}parseDate(t,n){return W0(t,n,this)}toDate(t,n={}){const s=new Date(NaN);let r=s;const{fillDate:i,mask:o,patch:a,rules:l}=n;if(ys(t)?(n.type="number",r=new Date(+t)):Bs(t)?(n.type="string",r=t?W0(t,o||"iso",this):s):ep(t)?(n.type="date",r=new Date(t.getTime())):eG(t)&&(n.type="object",r=this.getDateFromParts(t)),r&&(a||l)){let c=this.getDateParts(r);if(a&&i!=null){const h=this.getDateParts(this.toDate(i));c=this.getDateParts(this.toDate({...h,...IS(c,qK[a])}))}l&&(c=dG(c,l)),r=this.getDateFromParts(c)}return r||s}toDateOrNull(t,n={}){const s=this.toDate(t,n);return isNaN(s.getTime())?null:s}fromDate(t,{type:n,mask:s}={}){switch(n){case"number":return t?t.getTime():NaN;case"string":return t?this.formatDate(t,s||"iso"):"";case"object":return t?this.getDateParts(t):null;default:return t?new Date(t):null}}range(t){return _o.from(t,this)}ranges(t){return _o.fromMany(t,this)}getDateParts(t){return rG(t,this)}getDateFromParts(t){return FS(t,this.timezone)}getDateFromParams(t,n,s,r,i,o,a){return this.getDateFromParts({year:t,month:n,day:s,hours:r,minutes:i,seconds:o,milliseconds:a})}getPage(t){const n=this.pageCache.getOrSet(t,this);return uK(t,n)}getMonthParts(t,n){const{firstDayOfWeek:s}=this;return this.monthCache.getOrSet(t,n,s)}getThisMonthParts(){const t=new Date;return this.getMonthParts(t.getMonth()+1,t.getFullYear())}getPrevMonthParts(t,n){return t===1?this.getMonthParts(12,n-1):this.getMonthParts(t-1,n)}getNextMonthParts(t,n){return t===12?this.getMonthParts(1,n+1):this.getMonthParts(t+1,n)}getHourLabels(){return lG().map(t=>this.formatDate(t,this.masks.hours))}getDayId(t){return this.formatDate(t,"YYYY-MM-DD")}}var so=(e=>(e.Any="any",e.All="all",e))(so||{}),PS=(e=>(e.Days="days",e.Weeks="weeks",e.Months="months",e.Years="years",e))(PS||{}),kS=(e=>(e.Days="days",e.Weekdays="weekdays",e.Weeks="weeks",e.Months="months",e.Years="years",e))(kS||{}),DS=(e=>(e.OrdinalWeekdays="ordinalWeekdays",e))(DS||{});class LK{constructor(t,n,s){_t(this,"validated",!0),this.type=t,this.interval=n,this.from=s,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(t){if(!this.validated)return!0;const{date:n}=t;switch(this.type){case"days":return nm(this.from.date,n)%this.interval===0;case"weeks":return nG(this.from.date,n)%this.interval===0;case"months":return sG(this.from.date,n)%this.interval===0;case"years":return $S(this.from.date,n)%this.interval===0;default:return!1}}}class ea{constructor(t,n,s,r){_t(this,"components",[]),this.type=t,this.validator=s,this.getter=r,this.components=this.normalizeComponents(n)}static create(t,n){switch(t){case"days":return new VK(n);case"weekdays":return new $K(n);case"weeks":return new FK(n);case"months":return new BK(n);case"years":return new UK(n)}}normalizeComponents(t){if(this.validator(t))return[t];if(!gs(t))return[];const n=[];return t.forEach(s=>{if(!this.validator(s)){console.error(`Component value ${s} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(s)}),n}passes(t){return this.getter(t).some(r=>this.components.includes(r))}}class VK extends ea{constructor(t){super("days",t,zK,({day:n,dayFromEnd:s})=>[n,-s])}}class $K extends ea{constructor(t){super("weekdays",t,ip,({weekday:n})=>[n])}}class FK extends ea{constructor(t){super("weeks",t,WK,({week:n,weekFromEnd:s})=>[n,-s])}}class BK extends ea{constructor(t){super("months",t,YK,({month:n})=>[n])}}class UK extends ea{constructor(t){super("years",t,ys,({year:n})=>[n])}}class HK{constructor(t,n){_t(this,"components"),this.type=t,this.components=this.normalizeComponents(n)}normalizeArrayConfig(t){const n=[];return t.forEach((s,r)=>{if(ys(s)){if(r===0)return;if(!F0(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!ip(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else gs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}normalizeComponents(t){const n=[];return t.forEach((s,r)=>{if(ys(s)){if(r===0)return;if(!F0(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!ip(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else gs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}passes(t){const{weekday:n,weekdayOrdinal:s,weekdayOrdinalFromEnd:r}=t;return this.components.some(([i,o])=>(i===s||i===-r)&&n===o)}}class jK{constructor(t){_t(this,"type","function"),_t(this,"validated",!0),this.fn=t,Vi(t)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(t){return this.validated?this.fn(t):!0}}class eh{constructor(t,n={},s){_t(this,"validated",!0),_t(this,"config"),_t(this,"type",so.Any),_t(this,"from"),_t(this,"until"),_t(this,"rules",[]),_t(this,"locale",new th),this.parent=s,n.locale&&(this.locale=n.locale),this.config=t,Vi(t)?(this.type=so.All,this.rules=[new jK(t)]):gs(t)?(this.type=so.Any,this.rules=t.map(r=>new eh(r,n,this))):xi(t)?(this.type=so.All,this.from=t.from?this.locale.getDateParts(t.from):s==null?void 0:s.from,this.until=t.until?this.locale.getDateParts(t.until):s==null?void 0:s.until,this.rules=this.getObjectRules(t)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(t){const n=[];if(t.every&&(Bs(t.every)&&(t.every=[1,`${t.every}s`]),gs(t.every))){const[s=1,r=PS.Days]=t.every;n.push(new LK(r,s,this.from))}return Object.values(kS).forEach(s=>{s in t&&n.push(ea.create(s,t[s]))}),Object.values(DS).forEach(s=>{s in t&&n.push(new HK(s,t[s]))}),t.on!=null&&(gs(t.on)||(t.on=[t.on]),n.push(new eh(t.on,{locale:this.locale},this.parent))),n}passes(t){return this.validated?this.from&&t.dayIndex<=this.from.dayIndex||this.until&&t.dayIndex>=this.until.dayIndex?!1:this.type===so.Any?this.rules.some(n=>n.passes(t)):this.rules.every(n=>n.passes(t)):!0}}function zK(e){return ys(e)?e>=1&&e<=31:!1}function ip(e){return ys(e)?e>=1&&e<=7:!1}function WK(e){return ys(e)?e>=-6&&e<=-1||e>=1&&e<=6:!1}function YK(e){return ys(e)?e>=1&&e<=12:!1}function F0(e){return!(!ys(e)||e<-5||e>5||e===0)}const qK={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},ze=7,KK=6,RS=1e3,MS=RS*60,OS=MS*60,ou=OS*24,GK=[31,28,31,30,31,30,31,31,30,31,30,31],XK=["L","iso"],QK={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},NS=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,JK=/\[([^]*?)\]/gm,B0={D(e){return e.day},DD(e){return te(e.day,2)},d(e){return e.weekday-1},dd(e){return te(e.weekday-1,2)},W(e,t){return t.dayNamesNarrow[e.weekday-1]},WW(e,t){return t.dayNamesShorter[e.weekday-1]},WWW(e,t){return t.dayNamesShort[e.weekday-1]},WWWW(e,t){return t.dayNames[e.weekday-1]},M(e){return e.month},MM(e){return te(e.month,2)},MMM(e,t){return t.monthNamesShort[e.month-1]},MMMM(e,t){return t.monthNames[e.month-1]},YY(e){return String(e.year).substr(2)},YYYY(e){return te(e.year,4)},h(e){return e.hours%12||12},hh(e){return te(e.hours%12||12,2)},H(e){return e.hours},HH(e){return te(e.hours,2)},m(e){return e.minutes},mm(e){return te(e.minutes,2)},s(e){return e.seconds},ss(e){return te(e.seconds,2)},S(e){return Math.round(e.milliseconds/100)},SS(e){return te(Math.round(e.milliseconds/10),2)},SSS(e){return te(e.milliseconds,3)},a(e,t){return e.hours<12?t.amPm[0]:t.amPm[1]},A(e,t){return e.hours<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${te(Math.floor(Math.abs(t)/60),2)}`},ZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${te(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)}`},ZZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${te(Math.floor(Math.abs(t)/60),2)}:${te(Math.abs(t)%60,2)}`}},cr=/\d\d?/,ZK=/\d{3}/,tG=/\d{4}/,wa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,U0=()=>{},H0=e=>(t,n,s)=>{const r=s[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~r&&(t.month=r)},ie={D:[cr,(e,t)=>{e.day=t}],Do:[new RegExp(cr.source+wa.source),(e,t)=>{e.day=parseInt(t,10)}],d:[cr,U0],W:[wa,U0],M:[cr,(e,t)=>{e.month=t-1}],MMM:[wa,H0("monthNamesShort")],MMMM:[wa,H0("monthNames")],YY:[cr,(e,t)=>{const s=+new Date().getFullYear().toString().substr(0,2);e.year=+`${t>68?s-1:s}${t}`}],YYYY:[tG,(e,t)=>{e.year=t}],S:[/\d/,(e,t)=>{e.milliseconds=t*100}],SS:[/\d{2}/,(e,t)=>{e.milliseconds=t*10}],SSS:[ZK,(e,t)=>{e.milliseconds=t}],h:[cr,(e,t)=>{e.hours=t}],m:[cr,(e,t)=>{e.minutes=t}],s:[cr,(e,t)=>{e.seconds=t}],a:[wa,(e,t,n)=>{const s=t.toLowerCase();s===n.amPm[0]?e.isPm=!1:s===n.amPm[1]&&(e.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(e,t)=>{t==="Z"&&(t="+00:00");const n=`${t}`.match(/([+-]|\d\d)/gi);if(n){const s=+n[1]*60+parseInt(n[2],10);e.timezoneOffset=n[0]==="+"?s:-s}}]};ie.DD=ie.D;ie.dd=ie.d;ie.WWWW=ie.WWW=ie.WW=ie.W;ie.MM=ie.M;ie.mm=ie.m;ie.hh=ie.H=ie.HH=ie.h;ie.ss=ie.s;ie.A=ie.a;ie.ZZZZ=ie.ZZZ=ie.ZZ=ie.Z;function LS(e,t){return(pi(e)&&e||[Bs(e)&&e||"YYYY-MM-DD"]).map(n=>XK.reduce((s,r)=>s.replace(r,t.masks[r]||""),n))}function eG(e){return xi(e)&&"year"in e&&"month"in e&&"day"in e}function j0(e,t=1){const n=e.getDay()+1,s=n>=t?t-n:-(7-(t-n));return on(e,s)}function VS(e,t,n){const s=Date.UTC(e,t-1,n);return nm(new Date(0),new Date(s))}function nm(e,t){return Math.round((t.getTime()-e.getTime())/ou)}function nG(e,t){return Math.ceil(nm(j0(e),j0(t))/7)}function $S(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}function sG(e,t){return $S(e,t)*12+(t.getMonth()-e.getMonth())}function FS(e,t=""){const n=new Date,{year:s=n.getFullYear(),month:r=n.getMonth()+1,day:i=n.getDate(),hours:o=0,minutes:a=0,seconds:l=0,milliseconds:c=0}=e;if(t){const h=`${te(s,4)}-${te(r,2)}-${te(i,2)}T${te(o,2)}:${te(a,2)}:${te(l,2)}.${te(c,3)}`;return Rq(h,{timeZone:t})}return new Date(s,r-1,i,o,a,l,c)}function rG(e,t){let n=new Date(e.getTime());t.timezone&&(n=new Date(e.toLocaleString("en-US",{timeZone:t.timezone})),n.setMilliseconds(e.getMilliseconds()));const s=n.getMilliseconds(),r=n.getSeconds(),i=n.getMinutes(),o=n.getHours(),a=s+r*RS+i*MS+o*OS,l=n.getMonth()+1,c=n.getFullYear(),h=t.getMonthParts(l,c),f=n.getDate(),d=h.numDays-f+1,p=n.getDay()+1,m=Math.floor((f-1)/7+1),_=Math.floor((h.numDays-f)/7+1),y=Math.ceil((f+Math.abs(h.firstWeekday-h.firstDayOfWeek))/7),E=h.numWeeks-y+1,P=h.weeknumbers[y],D=VS(c,l,f);return{milliseconds:s,seconds:r,minutes:i,hours:o,time:a,day:f,dayFromEnd:d,weekday:p,weekdayOrdinal:m,weekdayOrdinalFromEnd:_,week:y,weekFromEnd:E,weeknumber:P,month:l,year:c,date:n,dateTime:n.getTime(),dayIndex:D,timezoneOffset:0,isValid:!0}}function iG(e,t,n){return`${t}-${e}-${n}`}function oG(e,t,n){const s=t%4===0&&t%100!==0||t%400===0,r=new Date(t,e-1,1),i=r.getDay()+1,o=e===2&&s?29:GK[e-1],a=n-1,l=Wq(r,{weekStartsOn:a}),c=[],h=[];for(let f=0;f<l;f++){const d=on(r,f*7);c.push(Gq(d,{weekStartsOn:a})),h.push(Zq(d))}return{firstDayOfWeek:n,firstDayOfMonth:r,inLeapYear:s,firstWeekday:i,numDays:o,numWeeks:l,month:e,year:t,weeknumbers:c,isoWeeknumbers:h}}function aG(){const e=[];for(let r=0;r<ze;r++)e.push(FS({year:2020,month:1,day:5+r,hours:12}));return e}function Xf(e,t=void 0){const n=new Intl.DateTimeFormat(t,{weekday:e});return aG().map(s=>n.format(s))}function lG(){const e=[];for(let t=0;t<=24;t++)e.push(new Date(2e3,0,1,t));return e}function cG(e=void 0){const t=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(e);return t.reduce((s,r)=>{const i=n.formatToParts(100,r);return s[r]=i[1].unit,s},{})}function BS(){const e=[];for(let t=0;t<12;t++)e.push(new Date(2e3,t,15));return e}function z0(e,t=void 0){const n=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return BS().map(s=>n.format(s))}function uG(e,t,n){return ys(t)?t===e:gs(t)?t.includes(e):Vi(t)?t(e,n):!(t.min!=null&&t.min>e||t.max!=null&&t.max<e||t.interval!=null&&e%t.interval!==0)}function hG(e,t,n){const s=[],[r,i,o]=t;for(let a=r;a<=i;a++)(n==null||uG(a,n,e))&&s.push({value:a,label:te(a,o)});return s}function fG(e,t,n,s){const i=hG(e,t,s).reduce((o,a)=>{if(a.disabled)return o;if(isNaN(o))return a.value;const l=Math.abs(o-n);return Math.abs(a.value-n)<l?a.value:o},NaN);return isNaN(i)?n:i}function dG(e,t){const n={...e};return Object.entries(t).forEach(([s,r])=>{const i=QK[s],o=e[s];n[s]=fG(e,i,o,r)}),n}function W0(e,t,n){return LS(t,n).map(r=>{if(typeof r!="string")throw new Error("Invalid mask");let i=e;if(i.length>1e3)return!1;let o=!0;const a={};if(r.replace(NS,h=>{if(ie[h]){const f=ie[h],d=i.search(f[0]);~d?i.replace(f[0],p=>(f[1](a,p,n),i=i.substr(d+p.length),p)):o=!1}return ie[h]?"":h.slice(1,h.length-1)}),!o)return!1;const l=new Date;a.hours!=null&&(a.isPm===!0&&+a.hours!=12?a.hours=+a.hours+12:a.isPm===!1&&+a.hours==12&&(a.hours=0));let c;return a.timezoneOffset!=null?(a.minutes=+(a.minutes||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hours||0,a.minutes||0,a.seconds||0,a.milliseconds||0))):c=n.getDateFromParts({year:a.year||l.getFullYear(),month:(a.month||0)+1,day:a.day||1,hours:a.hours||0,minutes:a.minutes||0,seconds:a.seconds||0,milliseconds:a.milliseconds||0}),c}).find(r=>r)||new Date(e)}function pG(e,t,n){if(e==null)return"";let s=LS(t,n)[0];/Z$/.test(s)&&(n.timezone="utc");const r=[];s=s.replace(JK,(o,a)=>(r.push(a),"??"));const i=n.getDateParts(e);return s=s.replace(NS,o=>o in B0?B0[o](i,n):o.slice(1,o.length-1)),s.replace(/\?\?/g,()=>r.shift())}let gG=0;class US{constructor(t,n,s){_t(this,"key",""),_t(this,"hashcode",""),_t(this,"highlight",null),_t(this,"content",null),_t(this,"dot",null),_t(this,"bar",null),_t(this,"event",null),_t(this,"popover",null),_t(this,"customData",null),_t(this,"ranges"),_t(this,"hasRanges",!1),_t(this,"order",0),_t(this,"pinPage",!1),_t(this,"maxRepeatSpan",0),_t(this,"locale");const{dates:r}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},t);this.key||(this.key=++gG),this.locale=s,n.normalizeGlyphs(this),this.ranges=s.ranges(r??[]),this.hasRanges=!!pi(this.ranges),this.maxRepeatSpan=this.ranges.filter(i=>i.hasRepeat).map(i=>i.daySpan).reduce((i,o)=>Math.max(i,o),0)}intersectsRange({start:t,end:n}){if(t==null||n==null)return!1;const s=this.ranges.filter(o=>!o.hasRepeat);for(const o of s)if(o.intersectsDayRange(t.dayIndex,n.dayIndex))return!0;const r=this.ranges.filter(o=>o.hasRepeat);if(!r.length)return!1;let i=t;for(this.maxRepeatSpan>1&&(i=this.locale.getDateParts(on(i.date,-this.maxRepeatSpan)));i.dayIndex<=n.dayIndex;){for(const o of r)if(o.startsOnDay(i))return!0;i=this.locale.getDateParts(on(i.date,1))}return!1}}function Y0(e){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:e}))}function nh(e){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:e}))}function mG(e){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:e}))}function vG(e){const{visibility:t}=e,n=t==="click",s=t==="hover",r=t==="hover-focus",i=t==="focus";e.autoHide=!n;let o=!1,a=!1;const l=m=>{n&&(mG({...e,target:e.target||m.currentTarget}),m.stopPropagation())},c=m=>{o||(o=!0,(s||r)&&Y0({...e,target:e.target||m.currentTarget}))},h=()=>{o&&(o=!1,(s||r&&!a)&&nh(e))},f=m=>{a||(a=!0,(i||r)&&Y0({...e,target:e.target||m.currentTarget}))},d=m=>{a&&!ru(m.currentTarget,m.relatedTarget)&&(a=!1,(i||r&&!o)&&nh(e))},p={};switch(e.visibility){case"click":p.click=l;break;case"hover":p.mousemove=c,p.mouseleave=h;break;case"focus":p.focusin=f,p.focusout=d;break;case"hover-focus":p.mousemove=c,p.mouseleave=h,p.focusin=f,p.focusout=d;break}return p}const q0=e=>{const t=Ku(e);if(t==null)return;const n=t.popoverHandlers;!n||!n.length||(n.forEach(s=>s()),delete t.popoverHandlers)},K0=(e,t)=>{const n=Ku(e);if(n==null)return;const s=[],r=vG(t);Object.entries(r).forEach(([i,o])=>{s.push(wr(n,i,o))}),n.popoverHandlers=s},HS={mounted(e,t){const{value:n}=t;n&&K0(e,n)},updated(e,t){const{oldValue:n,value:s}=t,r=n==null?void 0:n.visibility,i=s==null?void 0:s.visibility;r!==i&&(r&&(q0(e),i||nh(n)),i&&K0(e,s))},unmounted(e){q0(e)}},_G=(e,t,{maxSwipeTime:n,minHorizontalSwipeDistance:s,maxVerticalSwipeDistance:r})=>{if(!e||!e.addEventListener||!Vi(t))return null;let i=0,o=0,a=null,l=!1;function c(f){const d=f.changedTouches[0];i=d.screenX,o=d.screenY,a=new Date().getTime(),l=!0}function h(f){if(!l||!a)return;l=!1;const d=f.changedTouches[0],p=d.screenX-i,m=d.screenY-o;if(new Date().getTime()-a<n&&Math.abs(p)>=s&&Math.abs(m)<=r){const y={toLeft:!1,toRight:!1};p<0?y.toLeft=!0:y.toRight=!0,t(y)}}return wr(e,"touchstart",c,{passive:!0}),wr(e,"touchend",h,{passive:!0}),()=>{br(e,"touchstart",c),br(e,"touchend",h)}},au={},yG=(e,t=10)=>{au[e]=Date.now()+t},bG=(e,t)=>{if(e in au){const n=au[e];if(Date.now()<n)return;delete au[e]}t()};function jS(){return typeof window<"u"}function wG(e){return jS()&&e in window}function EG(e){const t=Nt(!1),n=G(()=>t.value?"dark":"light");let s,r;function i(p){t.value=p.matches}function o(){wG("matchMedia")&&(s=window.matchMedia("(prefers-color-scheme: dark)"),s.addEventListener("change",i),t.value=s.matches)}function a(){const{selector:p=":root",darkClass:m="dark"}=e.value,_=document.querySelector(p);t.value=_.classList.contains(m)}function l(p){const{selector:m=":root",darkClass:_="dark"}=p;if(jS()&&m&&_){const y=document.querySelector(m);y&&(r=new MutationObserver(a),r.observe(y,{attributes:!0,attributeFilter:["class"]}),t.value=y.classList.contains(_))}}function c(){f();const p=typeof e.value;p==="string"&&e.value.toLowerCase()==="system"?o():p==="object"?l(e.value):t.value=!!e.value}const h=an(()=>e.value,()=>c(),{immediate:!0});function f(){s&&(s.removeEventListener("change",i),s=void 0),r&&(r.disconnect(),r=void 0)}function d(){f(),h()}return Fo(()=>d()),{isDark:t,displayMode:n,cleanup:d}}const TG=["base","start","end","startEnd"],IG=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],SG={base:{},start:{},end:{}};function sm(e,t,n=SG){let s=e,r={};t===!0||Bs(t)?(s=Bs(t)?t:s,r={...n}):xi(t)&&(C0(t,TG)?r={...t}:r={base:{...t},start:{...t},end:{...t}});const i=qu(r,{start:r.startEnd,end:r.startEnd},n);return Object.entries(i).forEach(([o,a])=>{let l=s;a===!0||Bs(a)?(l=Bs(a)?a:l,i[o]={color:l}):xi(a)&&(C0(a,IG)?i[o]={...a}:i[o]={}),qu(i[o],{color:l})}),i}class AG{constructor(){_t(this,"type","highlight")}normalizeConfig(t,n){return sm(t,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(t){t.highlights=[],t.content||(t.content=[])}render({data:t,onStart:n,onEnd:s},r){const{key:i,highlight:o}=t;if(!o)return;const{highlights:a}=r,{base:l,start:c,end:h}=o;n&&s?a.push({...c,key:i,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]}):n?(a.push({...l,key:`${i}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...c,key:i,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]})):s?(a.push({...l,key:`${i}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...h,key:i,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${h.color}`,class:[`vc-highlight vc-highlight-bg-${h.fillMode}`,h.class],contentClass:[`vc-attr vc-highlight-content-${h.fillMode} vc-${h.color}`,h.contentClass]})):a.push({...l,key:`${i}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${l.fillMode}`,l.class],contentClass:[`vc-attr vc-highlight-content-${l.fillMode} vc-${l.color}`,l.contentClass]})}}class rm{constructor(t,n){_t(this,"type",""),_t(this,"collectionType",""),this.type=t,this.collectionType=n}normalizeConfig(t,n){return sm(t,n)}prepareRender(t){t[this.collectionType]=[]}render({data:t,onStart:n,onEnd:s},r){const{key:i}=t,o=t[this.type];if(!i||!o)return;const a=r[this.collectionType],{base:l,start:c,end:h}=o;n?a.push({...c,key:i,class:[`vc-${this.type} vc-${this.type}-start vc-${c.color} vc-attr`,c.class]}):s?a.push({...h,key:i,class:[`vc-${this.type} vc-${this.type}-end vc-${h.color} vc-attr`,h.class]}):a.push({...l,key:i,class:[`vc-${this.type} vc-${this.type}-base vc-${l.color} vc-attr`,l.class]})}}class CG extends rm{constructor(){super("content","content")}normalizeConfig(t,n){return sm("base",n)}}class xG extends rm{constructor(){super("dot","dots")}}class PG extends rm{constructor(){super("bar","bars")}}class kG{constructor(t){_t(this,"color"),_t(this,"renderers",[new CG,new AG,new xG,new PG]),this.color=t}normalizeGlyphs(t){this.renderers.forEach(n=>{const s=n.type;t[s]!=null&&(t[s]=n.normalizeConfig(this.color,t[s]))})}prepareRender(t={}){return this.renderers.forEach(n=>{n.prepareRender(t)}),t}render(t,n){this.renderers.forEach(s=>{s.render(t,n)})}}const zS=Symbol("__vc_base_context__"),DG={color:{type:String,default:()=>Dl("color")},isDark:{type:[Boolean,String,Object],default:()=>Dl("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function RG(e){const t=G(()=>e.color??""),n=G(()=>e.isDark??!1),{displayMode:s}=EG(n),r=G(()=>new kG(t.value)),i=G(()=>{if(e.locale instanceof th)return e.locale;const d=xi(e.locale)?e.locale:{id:e.locale,firstDayOfWeek:e.firstDayOfWeek,masks:e.masks};return new th(d,e.timezone)}),o=G(()=>i.value.masks),a=G(()=>e.minDate),l=G(()=>e.maxDate),c=G(()=>{const d=e.disabledDates?[...e.disabledDates]:[];return a.value!=null&&d.push({start:null,end:on(i.value.toDate(a.value),-1)}),l.value!=null&&d.push({start:on(i.value.toDate(l.value),1),end:null}),i.value.ranges(d)}),h=G(()=>new US({key:"disabled",dates:c.value,order:100},r.value,i.value)),f={color:t,isDark:n,displayMode:s,theme:r,locale:i,masks:o,minDate:a,maxDate:l,disabledDates:c,disabledAttribute:h};return Sr(zS,f),f}function MG(e){return gn(zS,()=>RG(e),!0)}function WS(e){return`__vc_slot_${e}__`}function OG(e,t={}){Object.keys(e).forEach(n=>{Sr(WS(t[n]??n),e[n])})}function YS(e){return gn(WS(e),null)}const NG={...DG,view:{type:String,default:"monthly",validator(e){return["daily","weekly","monthly"].includes(e)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>Dl("titlePosition")},navVisibility:{type:String,default:()=>Dl("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},LG=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],qS=Symbol("__vc_calendar_context__");function VG(e,{slots:t,emit:n}){const s=Nt(null),r=Nt(null),i=Nt(new Date().getDate()),o=Nt(!1),a=Nt(Symbol()),l=Nt(Symbol()),c=Nt(e.view),h=Nt([]),f=Nt("");let d=null,p=null;OG(t);const{theme:m,color:_,displayMode:y,locale:E,masks:P,minDate:D,maxDate:R,disabledAttribute:O,disabledDates:V}=MG(e),T=G(()=>e.rows*e.columns),b=G(()=>e.step||T.value),w=G(()=>ES(h.value)??null),C=G(()=>io(h.value)??null),x=G(()=>e.minPage||(D.value?et(D.value):null)),A=G(()=>e.maxPage||(R.value?et(R.value):null)),S=G(()=>e.navVisibility),ht=G(()=>!!e.showWeeknumbers),Q=G(()=>!!e.showIsoWeeknumbers),at=G(()=>c.value==="monthly"),ot=G(()=>c.value==="weekly"),gt=G(()=>c.value==="daily"),Lt=()=>{o.value=!0,n("transition-start")},z=()=>{o.value=!1,n("transition-end"),d&&(d.resolve(!0),d=null)},At=(Y,tt,Ct=c.value)=>CS(Y,tt,Ct,E.value),et=Y=>iK(Y,c.value,E.value),Pt=Y=>{!O.value||!Z.value||(Y.isDisabled=Z.value.cellExists(O.value.key,Y.dayIndex))},Rt=Y=>{Y.isFocusable=Y.inMonth&&Y.day===i.value},Yt=(Y,tt)=>{for(const Ct of Y)for(const Kt of Ct.days)if(tt(Kt)===!1)return},Ht=G(()=>h.value.reduce((Y,tt)=>(Y.push(...tt.viewDays),Y),[])),F=G(()=>{const Y=[];return(e.attributes||[]).forEach((tt,Ct)=>{!tt||!tt.dates||Y.push(new US({...tt,order:tt.order||0},m.value,E.value))}),O.value&&Y.push(O.value),Y}),st=G(()=>pi(F.value)),Z=G(()=>{const Y=new hK;return F.value.forEach(tt=>{tt.ranges.forEach(Ct=>{Y.render(tt,Ct,Ht.value)})}),Y}),lt=G(()=>Ht.value.reduce((Y,tt)=>(Y[tt.dayIndex]={day:tt,cells:[]},Y[tt.dayIndex].cells.push(...Z.value.getCells(tt)),Y),{})),Ot=(Y,tt)=>{const Ct=e.showWeeknumbers||e.showIsoWeeknumbers;return Ct==null?"":M7(Ct)?Ct?"left":"":Ct.startsWith("right")?tt>1?"right":Ct:Y>1?"left":Ct},k=()=>{var Y,tt;if(!st.value)return null;const Ct=F.value.find(In=>In.pinPage)||F.value[0];if(!Ct||!Ct.hasRanges)return null;const[Kt]=Ct.ranges,fe=((Y=Kt.start)==null?void 0:Y.date)||((tt=Kt.end)==null?void 0:tt.date);return fe?et(fe):null},M=()=>{if(os(w.value))return w.value;const Y=k();return os(Y)?Y:et(new Date)},N=(Y,tt={})=>{const{view:Ct=c.value,position:Kt=1,force:fe}=tt,In=Kt>0?1-Kt:-(T.value+Kt);let Sn=At(Y,In,Ct),_n=At(Sn,T.value-1,Ct);return fe||(sp(Sn,x.value)?Sn=x.value:Zu(_n,A.value)&&(Sn=At(A.value,1-T.value)),_n=At(Sn,T.value-1)),{fromPage:Sn,toPage:_n}},B=(Y,tt,Ct="")=>{if(Ct==="none"||Ct==="fade")return Ct;if((Y==null?void 0:Y.view)!==(tt==null?void 0:tt.view))return"fade";const Kt=Zu(tt,Y),fe=sp(tt,Y);return!Kt&&!fe?"fade":Ct==="slide-v"?fe?"slide-down":"slide-up":fe?"slide-right":"slide-left"},H=(Y={})=>new Promise((tt,Ct)=>{const{position:Kt=1,force:fe=!1,transition:In}=Y,Sn=os(Y.page)?Y.page:M(),{fromPage:_n}=N(Sn,{position:Kt,force:fe}),Ui=[];for(let Ts=0;Ts<T.value;Ts++){const Xl=At(_n,Ts),Is=Ts+1,na=Math.ceil(Is/e.columns),Oe=e.rows-na+1,Hi=Is%e.columns||e.columns,nr=e.columns-Hi+1,qr=Ot(Hi,nr);Ui.push(E.value.getPage({...Xl,view:c.value,titlePosition:e.titlePosition,trimWeeks:e.trimWeeks,position:Is,row:na,rowFromEnd:Oe,column:Hi,columnFromEnd:nr,showWeeknumbers:ht.value,showIsoWeeknumbers:Q.value,weeknumberPosition:qr}))}f.value=B(h.value[0],Ui[0],In),h.value=Ui,f.value&&f.value!=="none"?d={resolve:tt,reject:Ct}:tt(!0)}),U=Y=>{const tt=w.value??et(new Date);return At(tt,Y)},rt=(Y,tt={})=>{const Ct=os(Y)?Y:et(Y);return Object.assign(tt,N(Ct,{...tt,force:!0})),lK(tt.fromPage,tt.toPage,c.value,E.value).map(fe=>oK(fe,x.value,A.value)).some(fe=>fe)},J=(Y,tt={})=>rt(U(Y),tt),K=G(()=>J(-b.value)),W=G(()=>J(b.value)),pt=async(Y,tt={})=>!tt.force&&!rt(Y,tt)?!1:(tt.fromPage&&!aK(tt.fromPage,w.value)&&(nh({id:a.value,hideDelay:0}),tt.view&&(yG("view",10),c.value=tt.view),await H({...tt,page:tt.fromPage,position:1,force:!0}),n("did-move",h.value)),!0),nt=(Y,tt={})=>pt(U(Y),tt),ft=()=>nt(-b.value),yt=()=>nt(b.value),mt=Y=>{const tt=at.value?".in-month":"",Ct=`.id-${E.value.getDayId(Y)}${tt}`,Kt=`${Ct}.vc-focusable, ${Ct} .vc-focusable`,fe=s.value;if(fe){const In=fe.querySelector(Kt);if(In)return In.focus(),!0}return!1},It=async(Y,tt={})=>mt(Y)?!0:(await pt(Y,tt),mt(Y)),$t=(Y,tt)=>{i.value=Y.day,n("dayclick",Y,tt)},we=(Y,tt)=>{n("daymouseenter",Y,tt)},Ee=(Y,tt)=>{n("daymouseleave",Y,tt)},un=(Y,tt)=>{i.value=Y.day,r.value=Y,Y.isFocused=!0,n("dayfocusin",Y,tt)},Ce=(Y,tt)=>{r.value=null,Y.isFocused=!1,n("dayfocusout",Y,tt)},Hn=(Y,tt)=>{n("daykeydown",Y,tt);const Ct=Y.noonDate;let Kt=null;switch(tt.key){case"ArrowLeft":{Kt=on(Ct,-1);break}case"ArrowRight":{Kt=on(Ct,1);break}case"ArrowUp":{Kt=on(Ct,-7);break}case"ArrowDown":{Kt=on(Ct,7);break}case"Home":{Kt=on(Ct,-Y.weekdayPosition+1);break}case"End":{Kt=on(Ct,Y.weekdayPositionFromEnd);break}case"PageUp":{tt.altKey?Kt=V0(Ct,-1):Kt=Ju(Ct,-1);break}case"PageDown":{tt.altKey?Kt=V0(Ct,1):Kt=Ju(Ct,1);break}}Kt&&(tt.preventDefault(),It(Kt).catch())},Yr=Y=>{const tt=r.value;tt!=null&&Hn(tt,Y)},Te=(Y,tt)=>{n("weeknumberclick",Y,tt)};H({page:e.initialPage,position:e.initialPagePosition}),bs(()=>{!e.disablePageSwipe&&s.value&&(p=_G(s.value,({toLeft:Y=!1,toRight:tt=!1})=>{Y?yt():tt&&ft()},Dl("touch")))}),Fo(()=>{h.value=[],p&&p()}),an(()=>E.value,()=>{H()}),an(()=>T.value,()=>H()),an(()=>e.view,()=>c.value=e.view),an(()=>c.value,()=>{bG("view",()=>{H()}),n("update:view",c.value)}),an(()=>i.value,()=>{Yt(h.value,Y=>Rt(Y))}),Qw(()=>{n("update:pages",h.value),Yt(h.value,Y=>{Pt(Y),Rt(Y)})});const nn={emit:n,containerRef:s,focusedDay:r,inTransition:o,navPopoverId:a,dayPopoverId:l,view:c,pages:h,transitionName:f,theme:m,color:_,displayMode:y,locale:E,masks:P,attributes:F,disabledAttribute:O,disabledDates:V,attributeContext:Z,days:Ht,dayCells:lt,count:T,step:b,firstPage:w,lastPage:C,canMovePrev:K,canMoveNext:W,minPage:x,maxPage:A,isMonthly:at,isWeekly:ot,isDaily:gt,navVisibility:S,showWeeknumbers:ht,showIsoWeeknumbers:Q,getDateAddress:et,canMove:rt,canMoveBy:J,move:pt,moveBy:nt,movePrev:ft,moveNext:yt,onTransitionBeforeEnter:Lt,onTransitionAfterEnter:z,tryFocusDate:mt,focusDate:It,onKeydown:Yr,onDayKeydown:Hn,onDayClick:$t,onDayMouseenter:we,onDayMouseleave:Ee,onDayFocusin:un,onDayFocusout:Ce,onWeeknumberClick:Te};return Sr(qS,nn),nn}function Fi(){const e=gn(qS);if(e)return e;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const $G=tn({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(e,{emit:t}){let n;const s=Nt();let r=null,i=null;const o=$o({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function a(z){z&&(o.direction=z.split("-")[0])}function l({placement:z,options:At}){a(z||(At==null?void 0:At.placement))}const c=G(()=>({placement:o.placement,strategy:o.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:l},...o.modifiers||[]],onFirstUpdate:l})),h=G(()=>{const z=o.direction==="left"||o.direction==="right";let At="";if(o.placement){const et=o.placement.split("-");et.length>1&&(At=et[1])}return["start","top","left"].includes(At)?z?"top":"left":["end","bottom","right"].includes(At)?z?"bottom":"right":z?"middle":"center"});function f(){i&&(i.destroy(),i=null)}function d(){_i(()=>{const z=Ku(o.target);!z||!s.value||(i&&i.state.elements.reference!==z&&f(),i?i.update():i=I3(z,s.value,c.value))})}function p(z){Object.assign(o,pq(z,"force"))}function m(z,At){clearTimeout(n),z>0?n=setTimeout(At,z):At()}function _(z){return!z||!i?!1:Ku(z)===i.state.elements.reference}async function y(z={}){o.force||(z.force&&(o.force=!0),m(z.showDelay??e.showDelay,()=>{o.isVisible&&(o.force=!1),p({...z,isVisible:!0}),d()}))}function E(z={}){i&&(z.target&&!_(z.target)||o.force||(z.force&&(o.force=!0),m(z.hideDelay??e.hideDelay,()=>{o.isVisible||(o.force=!1),o.isVisible=!1})))}function P(z={}){z.target!=null&&(o.isVisible&&_(z.target)?E(z):y(z))}function D(z){if(!i)return;const At=i.state.elements.reference;if(!s.value||!At)return;const et=z.target;ru(s.value,et)||ru(At,et)||E({force:!0})}function R(z){(z.key==="Esc"||z.key==="Escape")&&E()}function O({detail:z}){!z.id||z.id!==e.id||y(z)}function V({detail:z}){!z.id||z.id!==e.id||E(z)}function T({detail:z}){!z.id||z.id!==e.id||P(z)}function b(){wr(document,"keydown",R),wr(document,"click",D),wr(document,"show-popover",O),wr(document,"hide-popover",V),wr(document,"toggle-popover",T)}function w(){br(document,"keydown",R),br(document,"click",D),br(document,"show-popover",O),br(document,"hide-popover",V),br(document,"toggle-popover",T)}function C(z){t("before-show",z)}function x(z){o.force=!1,t("after-show",z)}function A(z){t("before-hide",z)}function S(z){o.force=!1,f(),t("after-hide",z)}function ht(z){z.stopPropagation()}function Q(){o.isHovered=!0,o.isInteractive&&["hover","hover-focus"].includes(o.visibility)&&y()}function at(){if(o.isHovered=!1,!i)return;const z=i.state.elements.reference;o.autoHide&&!o.isFocused&&(!z||z!==document.activeElement)&&["hover","hover-focus"].includes(o.visibility)&&E()}function ot(){o.isFocused=!0,o.isInteractive&&["focus","hover-focus"].includes(o.visibility)&&y()}function gt(z){["focus","hover-focus"].includes(o.visibility)&&(!z.relatedTarget||!ru(s.value,z.relatedTarget))&&(o.isFocused=!1,!o.isHovered&&o.autoHide&&E())}function Lt(){r!=null&&(r.disconnect(),r=null)}return an(()=>s.value,z=>{Lt(),z&&(r=new ResizeObserver(()=>{i&&i.update()}),r.observe(z))}),an(()=>o.placement,a,{immediate:!0}),bs(()=>{b()}),Fo(()=>{f(),Lt(),w()}),{...uC(o),popoverRef:s,alignment:h,hide:E,setupPopper:d,beforeEnter:C,afterEnter:x,beforeLeave:A,afterLeave:S,onClick:ht,onMouseOver:Q,onMouseLeave:at,onFocusIn:ot,onFocusOut:gt}}}),Bi=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n};function FG(e,t,n,s,r,i){return ct(),vt("div",{class:re(["vc-popover-content-wrapper",{"is-interactive":e.isInteractive}]),ref:"popoverRef",onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o)),onMouseover:t[1]||(t[1]=(...o)=>e.onMouseOver&&e.onMouseOver(...o)),onMouseleave:t[2]||(t[2]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onFocusin:t[3]||(t[3]=(...o)=>e.onFocusIn&&e.onFocusIn(...o)),onFocusout:t[4]||(t[4]=(...o)=>e.onFocusOut&&e.onFocusOut(...o))},[xt(_h,{name:`vc-${e.transition}`,appear:"",onBeforeEnter:e.beforeEnter,onAfterEnter:e.afterEnter,onBeforeLeave:e.beforeLeave,onAfterLeave:e.afterLeave},{default:ve(()=>[e.isVisible?(ct(),vt("div",Ol({key:0,tabindex:"-1",class:`vc-popover-content direction-${e.direction}`},e.$attrs),[dh(e.$slots,"default",{direction:e.direction,alignment:e.alignment,data:e.data,hide:e.hide},()=>[mh(cn(e.data),1)]),X("span",{class:re(["vc-popover-caret",`direction-${e.direction}`,`align-${e.alignment}`])},null,2)],16)):Je("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const KS=Bi($G,[["render",FG]]),BG={class:"vc-day-popover-row"},UG={key:0,class:"vc-day-popover-row-indicator"},HG={class:"vc-day-popover-row-label"},jG=tn({__name:"PopoverRow",props:{attribute:null},setup(e){const t=e,n=G(()=>{const{content:s,highlight:r,dot:i,bar:o,popover:a}=t.attribute;return a&&a.hideIndicator?null:s?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${s.base.color}`}:r?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${r.base.color}`}:i?{class:`vc-dot vc-attr vc-${i.base.color}`}:o?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${o.base.color}`}:null});return(s,r)=>(ct(),vt("div",BG,[dt(n)?(ct(),vt("div",UG,[X("span",{class:re(dt(n).class)},null,2)])):Je("",!0),X("div",HG,[dh(s.$slots,"default",{},()=>[mh(cn(e.attribute.popover?e.attribute.popover.label:"No content provided"),1)])])]))}}),zG={inheritAttrs:!1},as=tn({...zG,__name:"CalendarSlot",props:{name:null},setup(e){const n=YS(e.name);return(s,r)=>dt(n)?(ct(),Ln(Lw(dt(n)),VA(Ol({key:0},s.$attrs)),null,16)):dh(s.$slots,"default",{key:1})}}),WG={class:"vc-day-popover-container"},YG={key:0,class:"vc-day-popover-header"},qG=tn({__name:"CalendarDayPopover",setup(e){const{dayPopoverId:t,displayMode:n,color:s,masks:r,locale:i}=Fi();function o(l,c){return i.value.formatDate(l,c)}function a(l){return i.value.formatDate(l.date,r.value.dayPopover)}return(l,c)=>(ct(),Ln(KS,{id:dt(t),class:re([`vc-${dt(s)}`,`vc-${dt(n)}`])},{default:ve(({data:{day:h,attributes:f},hide:d})=>[xt(as,{name:"day-popover",day:h,"day-title":a(h),attributes:f,format:o,masks:dt(r),hide:d},{default:ve(()=>[X("div",WG,[dt(r).dayPopover?(ct(),vt("div",YG,cn(a(h)),1)):Je("",!0),(ct(!0),vt(se,null,En(f,p=>(ct(),Ln(jG,{key:p.key,attribute:p},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),KG={},GG={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},XG=X("polyline",{points:"9 18 15 12 9 6"},null,-1),QG=[XG];function JG(e,t){return ct(),vt("svg",GG,QG)}const ZG=Bi(KG,[["render",JG]]),tX={},eX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},nX=X("polyline",{points:"15 18 9 12 15 6"},null,-1),sX=[nX];function rX(e,t){return ct(),vt("svg",eX,sX)}const iX=Bi(tX,[["render",rX]]),oX={},aX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},lX=X("polyline",{points:"6 9 12 15 18 9"},null,-1),cX=[lX];function uX(e,t){return ct(),vt("svg",aX,cX)}const hX=Bi(oX,[["render",uX]]),fX={},dX={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},pX=X("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),gX=[pX];function mX(e,t){return ct(),vt("svg",dX,gX)}const vX=Bi(fX,[["render",mX]]),_X=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:hX,IconChevronLeft:iX,IconChevronRight:ZG,IconClock:vX},Symbol.toStringTag,{value:"Module"})),sh=tn({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(e){const t=e,n=G(()=>t.width||t.size),s=G(()=>t.height||t.size),r=G(()=>_X[`Icon${t.name}`]);return(i,o)=>(ct(),Ln(Lw(dt(r)),{width:dt(n),height:dt(s),class:"vc-base-icon"},null,8,["width","height"]))}}),yX=["disabled"],bX={key:1,class:"vc-title-wrapper"},wX={type:"button",class:"vc-title"},EX=["disabled"],GS=tn({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(e){const t=e,{navPopoverId:n,navVisibility:s,canMovePrev:r,movePrev:i,canMoveNext:o,moveNext:a}=Fi(),l=G(()=>{switch(t.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),c=G(()=>{const{page:_}=t;return{id:n.value,visibility:s.value,placement:l.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:_},isInteractive:!0}}),h=G(()=>t.page.titlePosition.includes("left")),f=G(()=>t.page.titlePosition.includes("right")),d=G(()=>t.layout?t.layout:h.value?"tu-pn":f.value?"pn-tu":"p-tu-n;"),p=G(()=>({prev:d.value.includes("p")&&!t.hideArrows,title:d.value.includes("t")&&!t.hideTitle,next:d.value.includes("n")&&!t.hideArrows})),m=G(()=>({gridTemplateColumns:d.value.split("").map(y=>{switch(y){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(_,y)=>(ct(),vt("div",{class:re(["vc-header",{"is-lg":e.isLg,"is-xl":e.isXl,"is-2xl":e.is2xl}]),style:Qe(dt(m))},[dt(p).prev?(ct(),vt("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!dt(r),onClick:y[0]||(y[0]=(...E)=>dt(i)&&dt(i)(...E)),onKeydown:y[1]||(y[1]=Cv((...E)=>dt(i)&&dt(i)(...E),["space","enter"]))},[xt(as,{name:"header-prev-button",disabled:!dt(r)},{default:ve(()=>[xt(sh,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,yX)):Je("",!0),dt(p).title?(ct(),vt("div",bX,[xt(as,{name:"header-title-wrapper"},{default:ve(()=>[du((ct(),vt("button",wX,[xt(as,{name:"header-title",title:e.page.title},{default:ve(()=>[X("span",null,cn(e.page.title),1)]),_:1},8,["title"])])),[[dt(HS),dt(c)]])]),_:1})])):Je("",!0),dt(p).next?(ct(),vt("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!dt(o),onClick:y[2]||(y[2]=(...E)=>dt(a)&&dt(a)(...E)),onKeydown:y[3]||(y[3]=Cv((...E)=>dt(a)&&dt(a)(...E),["space","enter"]))},[xt(as,{name:"header-next-button",disabled:!dt(o)},{default:ve(()=>[xt(sh,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,EX)):Je("",!0)],6))}}),XS=Symbol("__vc_page_context__");function TX(e){const{locale:t,getDateAddress:n,canMove:s}=Fi();function r(a,l){const{month:c,year:h}=n(new Date);return BS().map((f,d)=>{const p=d+1;return{month:p,year:a,id:rK(p,a),label:t.value.formatDate(f,l),ariaLabel:t.value.formatDate(f,"MMMM"),isActive:p===e.value.month&&a===e.value.year,isCurrent:p===c&&a===h,isDisabled:!s({month:p,year:a},{position:e.value.position})}})}function i(a,l){const{year:c}=n(new Date),{position:h}=e.value,f=[];for(let d=a;d<=l;d+=1){const p=[...Array(12).keys()].some(m=>s({month:m+1,year:d},{position:h}));f.push({year:d,id:d.toString(),label:d.toString(),ariaLabel:d.toString(),isActive:d===e.value.year,isCurrent:d===c,isDisabled:!p})}return f}const o={page:e,getMonthItems:r,getYearItems:i};return Sr(XS,o),o}function QS(){const e=gn(XS);if(e)return e;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const IX={class:"vc-nav-header"},SX=["disabled"],AX=["disabled"],CX={class:"vc-nav-items"},xX=["data-id","aria-label","disabled","onClick","onKeydown"],PX=tn({__name:"CalendarNav",setup(e){const{masks:t,move:n}=Fi(),{page:s,getMonthItems:r,getYearItems:i}=QS(),o=Nt(!0),a=12,l=Nt(s.value.year),c=Nt(d(s.value.year)),h=Nt(null);function f(){setTimeout(()=>{if(h.value==null)return;const et=h.value.querySelector(".vc-nav-item:not(:disabled)");et&&et.focus()},10)}function d(et){return Math.floor(et/a)}function p(){o.value=!o.value}function m(et){return et*a}function _(et){return a*(et+1)-1}function y(){ot.value&&(o.value&&P(),R())}function E(){gt.value&&(o.value&&D(),O())}function P(){l.value--}function D(){l.value++}function R(){c.value--}function O(){c.value++}const V=G(()=>r(l.value,t.value.navMonths).map(et=>({...et,click:()=>n({month:et.month,year:et.year},{position:s.value.position})}))),T=G(()=>r(l.value-1,t.value.navMonths)),b=G(()=>T.value.some(et=>!et.isDisabled)),w=G(()=>r(l.value+1,t.value.navMonths)),C=G(()=>w.value.some(et=>!et.isDisabled)),x=G(()=>i(m(c.value),_(c.value)).map(et=>({...et,click:()=>{l.value=et.year,o.value=!0,f()}}))),A=G(()=>i(m(c.value-1),_(c.value-1))),S=G(()=>A.value.some(et=>!et.isDisabled)),ht=G(()=>i(m(c.value+1),_(c.value+1))),Q=G(()=>ht.value.some(et=>!et.isDisabled)),at=G(()=>o.value?V.value:x.value),ot=G(()=>o.value?b.value:S.value),gt=G(()=>o.value?C.value:Q.value),Lt=G(()=>ES(x.value.map(et=>et.year))),z=G(()=>io(x.value.map(et=>et.year))),At=G(()=>o.value?l.value:`${Lt.value} - ${z.value}`);return Qw(()=>{l.value=s.value.year,f()}),an(()=>l.value,et=>c.value=d(et)),bs(()=>f()),(et,Pt)=>(ct(),vt("div",{class:"vc-nav-container",ref_key:"navContainer",ref:h},[X("div",IX,[X("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!dt(ot),onClick:y,onKeydown:Pt[0]||(Pt[0]=Rt=>dt($c)(Rt,y))},[xt(as,{name:"nav-prev-button",move:y,disabled:!dt(ot)},{default:ve(()=>[xt(sh,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,SX),X("button",{type:"button",class:"vc-nav-title vc-focus",onClick:p,onKeydown:Pt[1]||(Pt[1]=Rt=>dt($c)(Rt,p))},cn(dt(At)),33),X("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!dt(gt),onClick:E,onKeydown:Pt[2]||(Pt[2]=Rt=>dt($c)(Rt,E))},[xt(as,{name:"nav-next-button",move:E,disabled:!dt(gt)},{default:ve(()=>[xt(sh,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,AX)]),X("div",CX,[(ct(!0),vt(se,null,En(dt(at),Rt=>(ct(),vt("button",{key:Rt.label,type:"button","data-id":Rt.id,"aria-label":Rt.ariaLabel,class:re(["vc-nav-item vc-focus",[Rt.isActive?"is-active":Rt.isCurrent?"is-current":""]]),disabled:Rt.isDisabled,onClick:Rt.click,onKeydown:Yt=>dt($c)(Yt,Rt.click)},cn(Rt.label),43,xX))),128))])],512))}}),JS=tn({__name:"CalendarPageProvider",props:{page:null},setup(e){return TX(dC(e,"page")),(n,s)=>dh(n.$slots,"default")}}),kX=tn({__name:"CalendarNavPopover",setup(e){const{navPopoverId:t,color:n,displayMode:s}=Fi();return(r,i)=>(ct(),Ln(KS,{id:dt(t),class:re(["vc-nav-popover-container",`vc-${dt(n)}`,`vc-${dt(s)}`])},{default:ve(({data:o})=>[xt(JS,{page:o.page},{default:ve(()=>[xt(as,{name:"nav"},{default:ve(()=>[xt(PX)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),DX=tn({directives:{popover:HS},components:{CalendarSlot:as},props:{day:{type:Object,required:!0}},setup(e){const{locale:t,theme:n,attributeContext:s,dayPopoverId:r,onDayClick:i,onDayMouseenter:o,onDayMouseleave:a,onDayFocusin:l,onDayFocusout:c,onDayKeydown:h}=Fi(),f=G(()=>e.day),d=G(()=>s.value.getCells(f.value)),p=G(()=>d.value.map(Q=>Q.data)),m=G(()=>({...f.value,attributes:p.value,attributeCells:d.value}));function _({data:Q},{popovers:at}){const{key:ot,customData:gt,popover:Lt}=Q;if(!Lt)return;const z=y0({key:ot,customData:gt,attribute:Q},{...Lt},{visibility:Lt.label?"hover":"click",placement:"bottom",isInteractive:!Lt.label});at.splice(0,0,z)}const y=G(()=>{const Q={...n.value.prepareRender({}),popovers:[]};return d.value.forEach(at=>{n.value.render(at,Q),_(at,Q)}),Q}),E=G(()=>y.value.highlights),P=G(()=>!!pi(E.value)),D=G(()=>y.value.content),R=G(()=>y.value.dots),O=G(()=>!!pi(R.value)),V=G(()=>y.value.bars),T=G(()=>!!pi(V.value)),b=G(()=>y.value.popovers),w=G(()=>b.value.map(Q=>Q.attribute)),C=YS("day-content"),x=G(()=>["vc-day",...f.value.classes,{"vc-day-box-center-center":!C},{"is-not-in-month":!e.day.inMonth}]),A=G(()=>{let Q;f.value.isFocusable?Q="0":Q="-1";const at=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":f.value.isDisabled},di(io(E.value),"contentClass"),di(io(D.value),"class")||""],ot={...di(io(E.value),"contentStyle"),...di(io(D.value),"style")};return{class:at,style:ot,tabindex:Q,"aria-label":f.value.ariaLabel,"aria-disabled":!!f.value.isDisabled,role:"button"}}),S=G(()=>({click(Q){i(m.value,Q)},mouseenter(Q){o(m.value,Q)},mouseleave(Q){a(m.value,Q)},focusin(Q){l(m.value,Q)},focusout(Q){c(m.value,Q)},keydown(Q){h(m.value,Q)}})),ht=G(()=>pi(b.value)?y0({id:r.value,data:{day:f,attributes:w.value}},...b.value):null);return{attributes:p,attributeCells:d,bars:V,dayClasses:x,dayContentProps:A,dayContentEvents:S,dayPopover:ht,glyphs:y,dots:R,hasDots:O,hasBars:T,highlights:E,hasHighlights:P,locale:t,popovers:b}}}),RX={key:0,class:"vc-highlights vc-day-layer"},MX={key:1,class:"vc-day-layer vc-day-box-center-bottom"},OX={class:"vc-dots"},NX={key:2,class:"vc-day-layer vc-day-box-center-bottom"},LX={class:"vc-bars"};function VX(e,t,n,s,r,i){const o=Os("CalendarSlot"),a=LC("popover");return ct(),vt("div",{class:re(e.dayClasses)},[e.hasHighlights?(ct(),vt("div",RX,[(ct(!0),vt(se,null,En(e.highlights,({key:l,wrapperClass:c,class:h,style:f})=>(ct(),vt("div",{key:l,class:re(c)},[X("div",{class:re(h),style:Qe(f)},null,6)],2))),128))])):Je("",!0),xt(o,{name:"day-content",day:e.day,attributes:e.attributes,"attribute-cells":e.attributeCells,dayProps:e.dayContentProps,dayEvents:e.dayContentEvents,locale:e.locale},{default:ve(()=>[du((ct(),vt("div",Ol(e.dayContentProps,VC(e.dayContentEvents,!0)),[mh(cn(e.day.label),1)],16)),[[a,e.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),e.hasDots?(ct(),vt("div",MX,[X("div",OX,[(ct(!0),vt(se,null,En(e.dots,({key:l,class:c,style:h})=>(ct(),vt("span",{key:l,class:re(c),style:Qe(h)},null,6))),128))])])):Je("",!0),e.hasBars?(ct(),vt("div",NX,[X("div",LX,[(ct(!0),vt(se,null,En(e.bars,({key:l,class:c,style:h})=>(ct(),vt("span",{key:l,class:re(c),style:Qe(h)},null,6))),128))])])):Je("",!0)],2)}const $X=Bi(DX,[["render",VX]]),FX={class:"vc-weekdays"},BX=["onClick"],UX={inheritAttrs:!1},HX=tn({...UX,__name:"CalendarPage",setup(e){const{page:t}=QS(),{onWeeknumberClick:n}=Fi();return(s,r)=>(ct(),vt("div",{class:re(["vc-pane",`row-${dt(t).row}`,`row-from-end-${dt(t).rowFromEnd}`,`column-${dt(t).column}`,`column-from-end-${dt(t).columnFromEnd}`]),ref:"pane"},[xt(GS,{page:dt(t),"is-lg":"","hide-arrows":""},null,8,["page"]),X("div",{class:re(["vc-weeks",{[`vc-show-weeknumbers-${dt(t).weeknumberPosition}`]:dt(t).weeknumberPosition}])},[X("div",FX,[(ct(!0),vt(se,null,En(dt(t).weekdays,({weekday:i,label:o},a)=>(ct(),vt("div",{key:a,class:re(`vc-weekday vc-weekday-${i}`)},cn(o),3))),128))]),(ct(!0),vt(se,null,En(dt(t).viewWeeks,i=>(ct(),vt("div",{key:`weeknumber-${i.weeknumber}`,class:"vc-week"},[dt(t).weeknumberPosition?(ct(),vt("div",{key:0,class:re(["vc-weeknumber",`is-${dt(t).weeknumberPosition}`])},[X("span",{class:re(["vc-weeknumber-content"]),onClick:o=>dt(n)(i,o)},cn(i.weeknumberDisplay),9,BX)],2)):Je("",!0),(ct(!0),vt(se,null,En(i.days,o=>(ct(),Ln($X,{key:o.id,day:o},null,8,["day"]))),128))]))),128))],2)],2))}}),jX=tn({components:{CalendarHeader:GS,CalendarPage:HX,CalendarNavPopover:kX,CalendarDayPopover:qG,CalendarPageProvider:JS,CalendarSlot:as},props:NG,emit:LG,setup(e,{emit:t,slots:n}){return VG(e,{emit:t,slots:n})}}),zX={class:"vc-pane-header-wrapper"};function WX(e,t,n,s,r,i){const o=Os("CalendarHeader"),a=Os("CalendarPage"),l=Os("CalendarSlot"),c=Os("CalendarPageProvider"),h=Os("CalendarDayPopover"),f=Os("CalendarNavPopover");return ct(),vt(se,null,[X("div",Ol({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},e.$attrs,{class:["vc-container",`vc-${e.view}`,`vc-${e.color}`,`vc-${e.displayMode}`,{"vc-expanded":e.expanded,"vc-bordered":!e.borderless,"vc-transparent":e.transparent}],onMouseup:t[0]||(t[0]=Ip(()=>{},["prevent"])),ref:"containerRef"}),[X("div",{class:re(["vc-pane-container",{"in-transition":e.inTransition}])},[X("div",zX,[e.firstPage?(ct(),Ln(o,{key:0,page:e.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):Je("",!0)]),xt(_h,{name:`vc-${e.transitionName}`,onBeforeEnter:e.onTransitionBeforeEnter,onAfterEnter:e.onTransitionAfterEnter},{default:ve(()=>[(ct(),vt("div",{key:e.pages[0].id,class:"vc-pane-layout",style:Qe({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})},[(ct(!0),vt(se,null,En(e.pages,d=>(ct(),Ln(c,{key:d.id,page:d},{default:ve(()=>[xt(l,{name:"page",page:d},{default:ve(()=>[xt(a)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),xt(l,{name:"footer"})],2)],16),xt(h),xt(f)],64)}const YX=Bi(jX,[["render",WX]]),qX={class:"calendar-container"},KX={class:"calendar-heatmap themed-calendar"},GX={key:0,class:"day-info-box"},XX={key:0},QX={__name:"Calendar",setup(e){const t=Nt({}),n=Nt([]),s=new Date,r=Nt(new Date(s.getFullYear(),s.getMonth(),1)),i=Nt(null);function o(m){return m.toString().padStart(2,"0")}function a(m){const _=m.date,y=`${_.getFullYear()}-${o(_.getMonth()+1)}-${o(_.getDate())}`,E=t.value[y];console.log(m.date,y,E),i.value=y}function l(){const m={};for(let _=0;_<localStorage.length;_++){const y=localStorage.key(_);if(y&&y.startsWith("groups_")){const E=y.replace("groups_",""),[P,D,R]=E.split("-").map(Number),V=JSON.parse(localStorage.getItem(y)||"[]").reduce((b,w)=>b+w.count,0),T=`${P}-${o(D)}-${o(R)}`;m[T]=V}}return m}async function c(){await _i(),t.value=l(),n.value=Object.entries(t.value).map(([m,_])=>({key:m,highlight:!0,dates:m})),_i(()=>p())}bs(()=>{c()}),an(r,()=>{c()});let h=null;function f(m){const _=m[0].monthTitle;_!==h&&(t.value=l(),h=_)}const d=G(()=>i.value?t.value[i.value]||0:null),p=()=>{document.querySelectorAll(".vc-day").forEach(_=>{const y=[..._.classList].find(A=>A.includes("id-")).replace("id-","");if(!y)return;const E=t.value[y]||0;if(E===0)return;const P=_.querySelector(".vc-highlights");if(!P)return;const D=.7+.7*Math.min(E/10,1);P.style.transform=`scale(${D})`;const R=getComputedStyle(document.documentElement).getPropertyValue("--accent").split(",").map(Number),O=getComputedStyle(document.documentElement).getPropertyValue("--primary").split(",").map(Number),V=Math.max(0,Math.min(1,(D-.7)/.7)),T=(A,S,ht)=>Math.round(A+(S-A)*ht),b=T(R[0],O[0],V),w=T(R[1],O[1],V),C=T(R[2],O[2],V),x=`rgb(${b},${w},${C})`;P.style.backgroundColor=x})};return(m,_)=>(ct(),vt("div",qX,[X("button",{class:"back-btn",onClick:_[0]||(_[0]=y=>m.$router.push("/")),"aria-label":"Back"},_[2]||(_[2]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",KX,[xt(dt(YX),{modelValue:r.value,"onUpdate:modelValue":_[1]||(_[1]=y=>r.value=y),attributes:n.value,"show-months":1,"title-position":"left","max-date":dt(s),borderless:"",transparent:"","onUpdate:pages":f,onDayclick:a},null,8,["modelValue","attributes","max-date"])]),i.value?(ct(),vt("div",GX,[d.value!==null?(ct(),vt("span",XX,": "+cn(d.value),1)):Je("",!0)])):Je("",!0)]))}},JX=Hr(QX,[["__scopeId","data-v-7bde03a2"]]),ZX=[{path:"/",component:YL,meta:{requiresAuth:!0}},{path:"/stats",component:i5,meta:{requiresAuth:!0}},{path:"/calendar",component:JX,meta:{requiresAuth:!0}},{path:"/auth",component:l5},{path:"/settings",component:_5,meta:{requiresAuth:!0}}],ZS=ak({history:LP(),routes:ZX});ZS.beforeEach((e,t,n)=>{const s=e.matched.some(i=>i.meta.requiresAuth),r=Si.currentUser;if(s&&!r){const i=Si.onAuthStateChanged(o=>{i(),o?n():n("/auth")})}else n()});localStorage.getItem("color-primary")||localStorage.setItem("color-primary","#E3F0FF");localStorage.getItem("color-accent")||localStorage.setItem("color-accent","#FFB74D");const tA=localStorage.getItem("color-primary"),eA=localStorage.getItem("color-accent");console.log(tA,eA);document.documentElement.style.setProperty("--primary",tA);document.documentElement.style.setProperty("--accent",eA);tP(rP).use(ZS).mount("#app");
