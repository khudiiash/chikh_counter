var QA=Object.defineProperty;var JA=(e,t,n)=>t in e?QA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pt=(e,t,n)=>(JA(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xp(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ie={},_o=[],Qn=()=>{},ZA=()=>!1,Eh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Cp=e=>e.startsWith("onUpdate:"),Pe=Object.assign,Pp=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tx=Object.prototype.hasOwnProperty,Jt=(e,t)=>tx.call(e,t),Tt=Array.isArray,yo=e=>Ih(e)==="[object Map]",ww=e=>Ih(e)==="[object Set]",Rt=e=>typeof e=="function",ve=e=>typeof e=="string",ni=e=>typeof e=="symbol",ue=e=>e!==null&&typeof e=="object",Tw=e=>(ue(e)||Rt(e))&&Rt(e.then)&&Rt(e.catch),Ew=Object.prototype.toString,Ih=e=>Ew.call(e),ex=e=>Ih(e).slice(8,-1),Iw=e=>Ih(e)==="[object Object]",kp=e=>ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Wa=xp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},nx=/-(\w)/g,Un=Sh(e=>e.replace(nx,(t,n)=>n?n.toUpperCase():"")),sx=/\B([A-Z])/g,Gi=Sh(e=>e.replace(sx,"-$1").toLowerCase()),Ah=Sh(e=>e.charAt(0).toUpperCase()+e.slice(1)),nu=Sh(e=>e?`on${Ah(e)}`:""),ki=(e,t)=>!Object.is(e,t),su=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},mf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},vf=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ix=e=>{const t=ve(e)?Number(e):NaN;return isNaN(t)?e:t};let pv;const xh=()=>pv||(pv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sn(e){if(Tt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=ve(s)?lx(s):sn(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(ve(e)||ue(e))return e}const rx=/;(?![^(]*\))/g,ox=/:([^]+)/,ax=/\/\*[^]*?\*\//g;function lx(e){const t={};return e.replace(ax,"").split(rx).forEach(n=>{if(n){const s=n.split(ox);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function oe(e){let t="";if(ve(e))t=e;else if(Tt(e))for(let n=0;n<e.length;n++){const s=oe(e[n]);s&&(t+=s+" ")}else if(ue(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function cx(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ve(t)&&(e.class=oe(t)),n&&(e.style=sn(n)),e}const ux="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hx=xp(ux);function Sw(e){return!!e||e===""}const Aw=e=>!!(e&&e.__v_isRef===!0),We=e=>ve(e)?e:e==null?"":Tt(e)||ue(e)&&(e.toString===Ew||!Rt(e.toString))?Aw(e)?We(e.value):JSON.stringify(e,xw,2):String(e),xw=(e,t)=>Aw(t)?xw(e,t.value):yo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[Sd(s,r)+" =>"]=i,n),{})}:ww(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Sd(n))}:ni(t)?Sd(t):ue(t)&&!Tt(t)&&!Iw(t)?String(t):t,Sd=(e,t="")=>{var n;return ni(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vn;class dx{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vn,!t&&vn&&(this.index=(vn.scopes||(vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=vn;try{return vn=this,t()}finally{vn=n}}}on(){++this._on===1&&(this.prevScope=vn,vn=this)}off(){this._on>0&&--this._on===0&&(vn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function fx(){return vn}let le;const Ad=new WeakSet;class Cw{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vn&&vn.active&&vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ad.has(this)&&(Ad.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||kw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gv(this),Dw(this);const t=le,n=Jn;le=this,Jn=!0;try{return this.fn()}finally{Rw(this),le=t,Jn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Mp(t);this.deps=this.depsTail=void 0,gv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ad.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_f(this)&&this.run()}get dirty(){return _f(this)}}let Pw=0,Ya,qa;function kw(e,t=!1){if(e.flags|=8,t){e.next=qa,qa=e;return}e.next=Ya,Ya=e}function Dp(){Pw++}function Rp(){if(--Pw>0)return;if(qa){let t=qa;for(qa=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ya;){let t=Ya;for(Ya=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Dw(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Rw(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Mp(s),px(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function _f(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Mw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Mw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===fl)||(e.globalVersion=fl,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!_f(e))))return;e.flags|=2;const t=e.dep,n=le,s=Jn;le=e,Jn=!0;try{Dw(e);const i=e.fn(e._value);(t.version===0||ki(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{le=n,Jn=s,Rw(e),e.flags&=-3}}function Mp(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Mp(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function px(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Jn=!0;const Ow=[];function Ks(){Ow.push(Jn),Jn=!1}function Gs(){const e=Ow.pop();Jn=e===void 0?!0:e}function gv(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=le;le=void 0;try{t()}finally{le=n}}}let fl=0;class gx{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Op{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!le||!Jn||le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==le)n=this.activeLink=new gx(le,this),le.deps?(n.prevDep=le.depsTail,le.depsTail.nextDep=n,le.depsTail=n):le.deps=le.depsTail=n,Lw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=le.depsTail,n.nextDep=void 0,le.depsTail.nextDep=n,le.depsTail=n,le.deps===n&&(le.deps=s)}return n}trigger(t){this.version++,fl++,this.notify(t)}notify(t){Dp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Rp()}}}function Lw(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Lw(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Su=new WeakMap,Sr=Symbol(""),yf=Symbol(""),pl=Symbol("");function Ze(e,t,n){if(Jn&&le){let s=Su.get(e);s||Su.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Op),i.map=s,i.key=n),i.track()}}function Bs(e,t,n,s,i,r){const o=Su.get(e);if(!o){fl++;return}const a=l=>{l&&l.trigger()};if(Dp(),t==="clear")o.forEach(a);else{const l=Tt(e),c=l&&kp(n);if(l&&n==="length"){const u=Number(s);o.forEach((d,f)=>{(f==="length"||f===pl||!ni(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(pl)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Sr)),yo(e)&&a(o.get(yf)));break;case"delete":l||(a(o.get(Sr)),yo(e)&&a(o.get(yf)));break;case"set":yo(e)&&a(o.get(Sr));break}}Rp()}function mx(e,t){const n=Su.get(e);return n&&n.get(t)}function io(e){const t=Ht(e);return t===e?t:(Ze(t,"iterate",pl),Fn(e)?t:t.map(je))}function Ch(e){return Ze(e=Ht(e),"iterate",pl),e}const vx={__proto__:null,[Symbol.iterator](){return xd(this,Symbol.iterator,je)},concat(...e){return io(this).concat(...e.map(t=>Tt(t)?io(t):t))},entries(){return xd(this,"entries",e=>(e[1]=je(e[1]),e))},every(e,t){return Ds(this,"every",e,t,void 0,arguments)},filter(e,t){return Ds(this,"filter",e,t,n=>n.map(je),arguments)},find(e,t){return Ds(this,"find",e,t,je,arguments)},findIndex(e,t){return Ds(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ds(this,"findLast",e,t,je,arguments)},findLastIndex(e,t){return Ds(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ds(this,"forEach",e,t,void 0,arguments)},includes(...e){return Cd(this,"includes",e)},indexOf(...e){return Cd(this,"indexOf",e)},join(e){return io(this).join(e)},lastIndexOf(...e){return Cd(this,"lastIndexOf",e)},map(e,t){return Ds(this,"map",e,t,void 0,arguments)},pop(){return wa(this,"pop")},push(...e){return wa(this,"push",e)},reduce(e,...t){return mv(this,"reduce",e,t)},reduceRight(e,...t){return mv(this,"reduceRight",e,t)},shift(){return wa(this,"shift")},some(e,t){return Ds(this,"some",e,t,void 0,arguments)},splice(...e){return wa(this,"splice",e)},toReversed(){return io(this).toReversed()},toSorted(e){return io(this).toSorted(e)},toSpliced(...e){return io(this).toSpliced(...e)},unshift(...e){return wa(this,"unshift",e)},values(){return xd(this,"values",je)}};function xd(e,t,n){const s=Ch(e),i=s[t]();return s!==e&&!Fn(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const _x=Array.prototype;function Ds(e,t,n,s,i,r){const o=Ch(e),a=o!==e&&!Fn(e),l=o[t];if(l!==_x[t]){const d=l.apply(e,r);return a?je(d):d}let c=n;o!==e&&(a?c=function(d,f){return n.call(this,je(d),f,e)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function mv(e,t,n,s){const i=Ch(e);let r=n;return i!==e&&(Fn(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,je(a),l,e)}),i[t](r,...s)}function Cd(e,t,n){const s=Ht(e);Ze(s,"iterate",pl);const i=s[t](...n);return(i===-1||i===!1)&&zl(n[0])?(n[0]=Ht(n[0]),s[t](...n)):i}function wa(e,t,n=[]){Ks(),Dp();const s=Ht(e)[t].apply(e,n);return Rp(),Gs(),s}const yx=xp("__proto__,__v_isRef,__isVue"),Nw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ni));function bx(e){ni(e)||(e=String(e));const t=Ht(this);return Ze(t,"has",e),t.hasOwnProperty(e)}class Vw{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?kx:Uw:r?Bw:$w).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Tt(t);if(!i){let l;if(o&&(l=vx[n]))return l;if(n==="hasOwnProperty")return bx}const a=Reflect.get(t,n,$e(t)?t:s);return(ni(n)?Nw.has(n):yx(n))||(i||Ze(t,"get",n),r)?a:$e(a)?o&&kp(n)?a:a.value:ue(a)?i?Hw(a):Ko(a):a}}class Fw extends Vw{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=Fi(r);if(!Fn(s)&&!Fi(s)&&(r=Ht(r),s=Ht(s)),!Tt(t)&&$e(r)&&!$e(s))return l?!1:(r.value=s,!0)}const o=Tt(t)&&kp(n)?Number(n)<t.length:Jt(t,n),a=Reflect.set(t,n,s,$e(t)?t:i);return t===Ht(i)&&(o?ki(s,r)&&Bs(t,"set",n,s):Bs(t,"add",n,s)),a}deleteProperty(t,n){const s=Jt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Bs(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!ni(n)||!Nw.has(n))&&Ze(t,"has",n),s}ownKeys(t){return Ze(t,"iterate",Tt(t)?"length":Sr),Reflect.ownKeys(t)}}class wx extends Vw{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Tx=new Fw,Ex=new wx,Ix=new Fw(!0);const bf=e=>e,Ac=e=>Reflect.getPrototypeOf(e);function Sx(e,t,n){return function(...s){const i=this.__v_raw,r=Ht(i),o=yo(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?bf:t?Au:je;return!t&&Ze(r,"iterate",l?yf:Sr),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function xc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ax(e,t){const n={get(i){const r=this.__v_raw,o=Ht(r),a=Ht(i);e||(ki(i,a)&&Ze(o,"get",i),Ze(o,"get",a));const{has:l}=Ac(o),c=t?bf:e?Au:je;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Ze(Ht(i),"iterate",Sr),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Ht(r),a=Ht(i);return e||(ki(i,a)&&Ze(o,"has",i),Ze(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Ht(a),c=t?bf:e?Au:je;return!e&&Ze(l,"iterate",Sr),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return Pe(n,e?{add:xc("add"),set:xc("set"),delete:xc("delete"),clear:xc("clear")}:{add(i){!t&&!Fn(i)&&!Fi(i)&&(i=Ht(i));const r=Ht(this);return Ac(r).has.call(r,i)||(r.add(i),Bs(r,"add",i,i)),this},set(i,r){!t&&!Fn(r)&&!Fi(r)&&(r=Ht(r));const o=Ht(this),{has:a,get:l}=Ac(o);let c=a.call(o,i);c||(i=Ht(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?ki(r,u)&&Bs(o,"set",i,r):Bs(o,"add",i,r),this},delete(i){const r=Ht(this),{has:o,get:a}=Ac(r);let l=o.call(r,i);l||(i=Ht(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&Bs(r,"delete",i,void 0),c},clear(){const i=Ht(this),r=i.size!==0,o=i.clear();return r&&Bs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Sx(i,e,t)}),n}function Lp(e,t){const n=Ax(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Jt(n,i)&&i in s?n:s,i,r)}const xx={get:Lp(!1,!1)},Cx={get:Lp(!1,!0)},Px={get:Lp(!0,!1)};const $w=new WeakMap,Bw=new WeakMap,Uw=new WeakMap,kx=new WeakMap;function Dx(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rx(e){return e.__v_skip||!Object.isExtensible(e)?0:Dx(ex(e))}function Ko(e){return Fi(e)?e:Np(e,!1,Tx,xx,$w)}function jw(e){return Np(e,!1,Ix,Cx,Bw)}function Hw(e){return Np(e,!0,Ex,Px,Uw)}function Np(e,t,n,s,i){if(!ue(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Rx(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function bo(e){return Fi(e)?bo(e.__v_raw):!!(e&&e.__v_isReactive)}function Fi(e){return!!(e&&e.__v_isReadonly)}function Fn(e){return!!(e&&e.__v_isShallow)}function zl(e){return e?!!e.__v_raw:!1}function Ht(e){const t=e&&e.__v_raw;return t?Ht(t):e}function Mx(e){return!Jt(e,"__v_skip")&&Object.isExtensible(e)&&mf(e,"__v_skip",!0),e}const je=e=>ue(e)?Ko(e):e,Au=e=>ue(e)?Hw(e):e;function $e(e){return e?e.__v_isRef===!0:!1}function Lt(e){return zw(e,!1)}function Vp(e){return zw(e,!0)}function zw(e,t){return $e(e)?e:new Ox(e,t)}class Ox{constructor(t,n){this.dep=new Op,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ht(t),this._value=n?t:je(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Fn(t)||Fi(t);t=s?t:Ht(t),ki(t,n)&&(this._rawValue=t,this._value=s?t:je(t),this.dep.trigger())}}function ft(e){return $e(e)?e.value:e}const Lx={get:(e,t,n)=>t==="__v_raw"?e:ft(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return $e(i)&&!$e(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Ww(e){return bo(e)?e:new Proxy(e,Lx)}function Nx(e){const t=Tt(e)?new Array(e.length):{};for(const n in e)t[n]=Yw(e,n);return t}class Vx{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return mx(Ht(this._object),this._key)}}class Fx{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $x(e,t,n){return $e(e)?e:Rt(e)?new Fx(e):ue(e)&&arguments.length>1?Yw(e,t,n):Lt(e)}function Yw(e,t,n){const s=e[t];return $e(s)?s:new Vx(e,t,n)}class Bx{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Op(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&le!==this)return kw(this,!0),!0}get value(){const t=this.dep.track();return Mw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ux(e,t,n=!1){let s,i;return Rt(e)?s=e:(s=e.get,i=e.set),new Bx(s,i,n)}const Cc={},xu=new WeakMap;let gr;function jx(e,t=!1,n=gr){if(n){let s=xu.get(n);s||xu.set(n,s=[]),s.push(e)}}function Hx(e,t,n=ie){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=b=>i?b:Fn(b)||i===!1||i===0?Us(b,1):Us(b);let u,d,f,p,m=!1,_=!1;if($e(e)?(d=()=>e.value,m=Fn(e)):bo(e)?(d=()=>c(e),m=!0):Tt(e)?(_=!0,m=e.some(b=>bo(b)||Fn(b)),d=()=>e.map(b=>{if($e(b))return b.value;if(bo(b))return c(b);if(Rt(b))return l?l(b,2):b()})):Rt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Ks();try{f()}finally{Gs()}}const b=gr;gr=u;try{return l?l(e,3,[p]):e(p)}finally{gr=b}}:d=Qn,t&&i){const b=d,R=i===!0?1/0:i;d=()=>Us(b(),R)}const y=fx(),x=()=>{u.stop(),y&&y.active&&Pp(y.effects,u)};if(r&&t){const b=t;t=(...R)=>{b(...R),x()}}let M=_?new Array(e.length).fill(Cc):Cc;const E=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(t){const R=u.run();if(i||m||(_?R.some((L,I)=>ki(L,M[I])):ki(R,M))){f&&f();const L=gr;gr=u;try{const I=[R,M===Cc?void 0:_&&M[0]===Cc?[]:M,p];M=R,l?l(t,3,I):t(...I)}finally{gr=L}}}else u.run()};return a&&a(E),u=new Cw(d),u.scheduler=o?()=>o(E,!1):E,p=b=>jx(b,!1,u),f=u.onStop=()=>{const b=xu.get(u);if(b){if(l)l(b,4);else for(const R of b)R();xu.delete(u)}},t?s?E(!0):M=u.run():o?o(E.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Us(e,t=1/0,n){if(t<=0||!ue(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,$e(e))Us(e.value,t,n);else if(Tt(e))for(let s=0;s<e.length;s++)Us(e[s],t,n);else if(ww(e)||yo(e))e.forEach(s=>{Us(s,t,n)});else if(Iw(e)){for(const s in e)Us(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Us(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wl(e,t,n,s){try{return s?e(...s):e()}catch(i){Ph(i,t,n)}}function Zn(e,t,n,s){if(Rt(e)){const i=Wl(e,t,n,s);return i&&Tw(i)&&i.catch(r=>{Ph(r,t,n)}),i}if(Tt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Zn(e[r],t,n,s));return i}}function Ph(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ie;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(r){Ks(),Wl(r,null,10,[e,l,c]),Gs();return}}zx(e,n,i,s,o)}function zx(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const hn=[];let as=-1;const wo=[];let mi=null,ao=0;const qw=Promise.resolve();let Cu=null;function Pr(e){const t=Cu||qw;return e?t.then(this?e.bind(this):e):t}function Wx(e){let t=as+1,n=hn.length;for(;t<n;){const s=t+n>>>1,i=hn[s],r=gl(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function Fp(e){if(!(e.flags&1)){const t=gl(e),n=hn[hn.length-1];!n||!(e.flags&2)&&t>=gl(n)?hn.push(e):hn.splice(Wx(t),0,e),e.flags|=1,Kw()}}function Kw(){Cu||(Cu=qw.then(Xw))}function Yx(e){Tt(e)?wo.push(...e):mi&&e.id===-1?mi.splice(ao+1,0,e):e.flags&1||(wo.push(e),e.flags|=1),Kw()}function vv(e,t,n=as+1){for(;n<hn.length;n++){const s=hn[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;hn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Gw(e){if(wo.length){const t=[...new Set(wo)].sort((n,s)=>gl(n)-gl(s));if(wo.length=0,mi){mi.push(...t);return}for(mi=t,ao=0;ao<mi.length;ao++){const n=mi[ao];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}mi=null,ao=0}}const gl=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Xw(e){const t=Qn;try{for(as=0;as<hn.length;as++){const n=hn[as];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Wl(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;as<hn.length;as++){const n=hn[as];n&&(n.flags&=-2)}as=-1,hn.length=0,Gw(),Cu=null,(hn.length||wo.length)&&Xw()}}let Ne=null,Qw=null;function Pu(e){const t=Ne;return Ne=e,Qw=e&&e.type.__scopeId||null,t}function me(e,t=Ne,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&xv(-1);const r=Pu(t);let o;try{o=e(...i)}finally{Pu(r),s._d&&xv(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ml(e,t){if(Ne===null)return e;const n=Nh(Ne),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=ie]=t[i];r&&(Rt(r)&&(r={mounted:r,updated:r}),r.deep&&Us(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function ar(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Ks(),Zn(l,n,8,[e.el,a,e,t]),Gs())}}const qx=Symbol("_vte"),Jw=e=>e.__isTeleport,vi=Symbol("_leaveCb"),Pc=Symbol("_enterCb");function Kx(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ss(()=>{e.isMounted=!0}),o1(()=>{e.isUnmounting=!0}),e}const Dn=[Function,Array],Zw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dn,onEnter:Dn,onAfterEnter:Dn,onEnterCancelled:Dn,onBeforeLeave:Dn,onLeave:Dn,onAfterLeave:Dn,onLeaveCancelled:Dn,onBeforeAppear:Dn,onAppear:Dn,onAfterAppear:Dn,onAppearCancelled:Dn},t1=e=>{const t=e.subTree;return t.component?t1(t.component):t},Gx={name:"BaseTransition",props:Zw,setup(e,{slots:t}){const n=P1(),s=Kx();return()=>{const i=t.default&&s1(t.default(),!0);if(!i||!i.length)return;const r=e1(i),o=Ht(e),{mode:a}=o;if(s.isLeaving)return Pd(r);const l=_v(r);if(!l)return Pd(r);let c=wf(l,o,s,n,d=>c=d);l.type!==nn&&vl(l,c);let u=n.subTree&&_v(n.subTree);if(u&&u.type!==nn&&!br(l,u)&&t1(n).type!==nn){let d=wf(u,o,s,n);if(vl(u,d),a==="out-in"&&l.type!==nn)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},Pd(r);a==="in-out"&&l.type!==nn?d.delayLeave=(f,p,m)=>{const _=n1(s,u);_[String(u.key)]=u,f[vi]=()=>{p(),f[vi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function e1(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==nn){t=n;break}}return t}const Xx=Gx;function n1(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function wf(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:_,onBeforeAppear:y,onAppear:x,onAfterAppear:M,onAppearCancelled:E}=t,b=String(e.key),R=n1(n,e),L=(T,k)=>{T&&Zn(T,s,9,k)},I=(T,k)=>{const S=k[1];L(T,k),Tt(T)?T.every(P=>P.length<=1)&&S():T.length<=1&&S()},w={mode:o,persisted:a,beforeEnter(T){let k=l;if(!n.isMounted)if(r)k=y||l;else return;T[vi]&&T[vi](!0);const S=R[b];S&&br(e,S)&&S.el[vi]&&S.el[vi](),L(k,[T])},enter(T){let k=c,S=u,P=d;if(!n.isMounted)if(r)k=x||c,S=M||u,P=E||d;else return;let C=!1;const ot=T[Pc]=K=>{C||(C=!0,K?L(P,[T]):L(S,[T]),w.delayedLeave&&w.delayedLeave(),T[Pc]=void 0)};k?I(k,[T,ot]):ot()},leave(T,k){const S=String(e.key);if(T[Pc]&&T[Pc](!0),n.isUnmounting)return k();L(f,[T]);let P=!1;const C=T[vi]=ot=>{P||(P=!0,k(),ot?L(_,[T]):L(m,[T]),T[vi]=void 0,R[S]===e&&delete R[S])};R[S]=e,p?I(p,[T,C]):C()},clone(T){const k=wf(T,t,n,s,i);return i&&i(k),k}};return w}function Pd(e){if(kh(e))return e=$i(e),e.children=null,e}function _v(e){if(!kh(e))return Jw(e.type)&&e.children?e1(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Rt(n.default))return n.default()}}function vl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,vl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function s1(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===re?(o.patchFlag&128&&i++,s=s.concat(s1(o.children,t,a))):(t||o.type!==nn)&&s.push(a!=null?$i(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function an(e,t){return Rt(e)?(()=>Pe({name:e.name},t,{setup:e}))():e}function i1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ka(e,t,n,s,i=!1){if(Tt(e)){e.forEach((m,_)=>Ka(m,t&&(Tt(t)?t[_]:t),n,s,i));return}if(To(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ka(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Nh(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ie?a.refs={}:a.refs,d=a.setupState,f=Ht(d),p=d===ie?()=>!1:m=>Jt(f,m);if(c!=null&&c!==l&&(ve(c)?(u[c]=null,p(c)&&(d[c]=null)):$e(c)&&(c.value=null)),Rt(l))Wl(l,a,12,[o,u]);else{const m=ve(l),_=$e(l);if(m||_){const y=()=>{if(e.f){const x=m?p(l)?d[l]:u[l]:l.value;i?Tt(x)&&Pp(x,r):Tt(x)?x.includes(r)||x.push(r):m?(u[l]=[r],p(l)&&(d[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else m?(u[l]=o,p(l)&&(d[l]=o)):_&&(l.value=o,e.k&&(u[e.k]=o))};o?(y.id=-1,In(y,n)):y()}}}xh().requestIdleCallback;xh().cancelIdleCallback;const To=e=>!!e.type.__asyncLoader,kh=e=>e.type.__isKeepAlive;function Qx(e,t){r1(e,"a",t)}function Jx(e,t){r1(e,"da",t)}function r1(e,t,n=He){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Dh(t,s,n),n){let i=n.parent;for(;i&&i.parent;)kh(i.parent.vnode)&&Zx(s,t,n,i),i=i.parent}}function Zx(e,t,n,s){const i=Dh(t,e,s,!0);Go(()=>{Pp(s[t],i)},n)}function Dh(e,t,n=He,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ks();const a=ql(n),l=Zn(t,n,e,o);return a(),Gs(),l});return s?i.unshift(r):i.push(r),r}}const si=e=>(t,n=He)=>{(!bl||e==="sp")&&Dh(e,(...s)=>t(...s),n)},tC=si("bm"),Ss=si("m"),eC=si("bu"),nC=si("u"),o1=si("bum"),Go=si("um"),sC=si("sp"),iC=si("rtg"),rC=si("rtc");function oC(e,t=He){Dh("ec",e,t)}const $p="components",aC="directives";function Fs(e,t){return Bp($p,e,!0,t)||e}const a1=Symbol.for("v-ndc");function l1(e){return ve(e)?Bp($p,e,!1)||e:e||a1}function c1(e){return Bp(aC,e)}function Bp(e,t,n=!0,s=!1){const i=Ne||He;if(i){const r=i.type;if(e===$p){const a=qC(r,!1);if(a&&(a===t||a===Un(t)||a===Ah(Un(t))))return r}const o=yv(i[e]||r[e],t)||yv(i.appContext[e],t);return!o&&s?r:o}}function yv(e,t){return e&&(e[t]||e[Un(t)]||e[Ah(Un(t))])}function Cn(e,t,n,s){let i;const r=n&&n[s],o=Tt(e);if(o||ve(e)){const a=o&&bo(e);let l=!1,c=!1;a&&(l=!Fn(e),c=Fi(e),e=Ch(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?Au(je(e[u])):je(e[u]):e[u],u,void 0,r&&r[u])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r&&r[a])}else if(ue(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r&&r[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r&&r[l])}}else i=[];return n&&(n[s]=i),i}function Rh(e,t,n={},s,i){if(Ne.ce||Ne.parent&&To(Ne.parent)&&Ne.parent.ce)return t!=="default"&&(n.name=t),ht(),jn(re,null,[Ct("slot",n,s&&s())],64);let r=e[t];r&&r._c&&(r._d=!1),ht();const o=r&&u1(r(n)),a=n.key||o&&o.key,l=jn(re,{key:(a&&!ni(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function u1(e){return e.some(t=>yl(t)?!(t.type===nn||t.type===re&&!u1(t.children)):!0)?e:null}function lC(e,t){const n={};for(const s in e)n[t&&/[A-Z]/.test(s)?`on:${s}`:nu(s)]=e[s];return n}const Tf=e=>e?k1(e)?Nh(e):Tf(e.parent):null,Ga=Pe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tf(e.parent),$root:e=>Tf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Up(e),$forceUpdate:e=>e.f||(e.f=()=>{Fp(e.update)}),$nextTick:e=>e.n||(e.n=Pr.bind(e.proxy)),$watch:e=>PC.bind(e)}),kd=(e,t)=>e!==ie&&!e.__isScriptSetup&&Jt(e,t),cC={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(kd(s,t))return o[t]=1,s[t];if(i!==ie&&Jt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Jt(c,t))return o[t]=3,r[t];if(n!==ie&&Jt(n,t))return o[t]=4,n[t];Ef&&(o[t]=0)}}const u=Ga[t];let d,f;if(u)return t==="$attrs"&&Ze(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==ie&&Jt(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,Jt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return kd(i,t)?(i[t]=n,!0):s!==ie&&Jt(s,t)?(s[t]=n,!0):Jt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==ie&&Jt(e,o)||kd(t,o)||(a=r[0])&&Jt(a,o)||Jt(s,o)||Jt(Ga,o)||Jt(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Jt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function bv(e){return Tt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ef=!0;function uC(e){const t=Up(e),n=e.proxy,s=e.ctx;Ef=!1,t.beforeCreate&&wv(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:_,deactivated:y,beforeDestroy:x,beforeUnmount:M,destroyed:E,unmounted:b,render:R,renderTracked:L,renderTriggered:I,errorCaptured:w,serverPrefetch:T,expose:k,inheritAttrs:S,components:P,directives:C,filters:ot}=t;if(c&&hC(c,s,null),o)for(const at in o){const gt=o[at];Rt(gt)&&(s[at]=gt.bind(n))}if(i){const at=i.call(n,n);ue(at)&&(e.data=Ko(at))}if(Ef=!0,r)for(const at in r){const gt=r[at],Vt=Rt(gt)?gt.bind(n,n):Rt(gt.get)?gt.get.bind(n,n):Qn,W=!Rt(gt)&&Rt(gt.set)?gt.set.bind(n):Qn,St=G({get:Vt,set:W});Object.defineProperty(s,at,{enumerable:!0,configurable:!0,get:()=>St.value,set:et=>St.value=et})}if(a)for(const at in a)h1(a[at],s,n,at);if(l){const at=Rt(l)?l.call(n):l;Reflect.ownKeys(at).forEach(gt=>{Di(gt,at[gt])})}u&&wv(u,e,"c");function lt(at,gt){Tt(gt)?gt.forEach(Vt=>at(Vt.bind(n))):gt&&at(gt.bind(n))}if(lt(tC,d),lt(Ss,f),lt(eC,p),lt(nC,m),lt(Qx,_),lt(Jx,y),lt(oC,w),lt(rC,L),lt(iC,I),lt(o1,M),lt(Go,b),lt(sC,T),Tt(k))if(k.length){const at=e.exposed||(e.exposed={});k.forEach(gt=>{Object.defineProperty(at,gt,{get:()=>n[gt],set:Vt=>n[gt]=Vt})})}else e.exposed||(e.exposed={});R&&e.render===Qn&&(e.render=R),S!=null&&(e.inheritAttrs=S),P&&(e.components=P),C&&(e.directives=C),T&&i1(e)}function hC(e,t,n=Qn){Tt(e)&&(e=If(e));for(const s in e){const i=e[s];let r;ue(i)?"default"in i?r=bn(i.from||s,i.default,!0):r=bn(i.from||s):r=bn(i),$e(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function wv(e,t,n){Zn(Tt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function h1(e,t,n,s){let i=s.includes(".")?I1(n,s):()=>n[s];if(ve(e)){const r=t[e];Rt(r)&&en(i,r)}else if(Rt(e))en(i,e.bind(n));else if(ue(e))if(Tt(e))e.forEach(r=>h1(r,t,n,s));else{const r=Rt(e.handler)?e.handler.bind(n):t[e.handler];Rt(r)&&en(i,r,e)}}function Up(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>ku(l,c,o,!0)),ku(l,t,o)),ue(t)&&r.set(t,l),l}function ku(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&ku(e,r,n,!0),i&&i.forEach(o=>ku(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=dC[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const dC={data:Tv,props:Ev,emits:Ev,methods:Ma,computed:Ma,beforeCreate:un,created:un,beforeMount:un,mounted:un,beforeUpdate:un,updated:un,beforeDestroy:un,beforeUnmount:un,destroyed:un,unmounted:un,activated:un,deactivated:un,errorCaptured:un,serverPrefetch:un,components:Ma,directives:Ma,watch:pC,provide:Tv,inject:fC};function Tv(e,t){return t?e?function(){return Pe(Rt(e)?e.call(this,this):e,Rt(t)?t.call(this,this):t)}:t:e}function fC(e,t){return Ma(If(e),If(t))}function If(e){if(Tt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function un(e,t){return e?[...new Set([].concat(e,t))]:t}function Ma(e,t){return e?Pe(Object.create(null),e,t):t}function Ev(e,t){return e?Tt(e)&&Tt(t)?[...new Set([...e,...t])]:Pe(Object.create(null),bv(e),bv(t??{})):t}function pC(e,t){if(!e)return t;if(!t)return e;const n=Pe(Object.create(null),e);for(const s in t)n[s]=un(e[s],t[s]);return n}function d1(){return{app:null,config:{isNativeTag:ZA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gC=0;function mC(e,t){return function(s,i=null){Rt(s)||(s=Pe({},s)),i!=null&&!ue(i)&&(i=null);const r=d1(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:gC++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:R1,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&Rt(u.install)?(o.add(u),u.install(c,...d)):Rt(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||Ct(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),d&&t?t(p,u):e(p,u,f),l=!0,c._container=u,u.__vue_app__=c,Nh(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Zn(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=Eo;Eo=c;try{return u()}finally{Eo=d}}};return c}}let Eo=null;function Di(e,t){if(He){let n=He.provides;const s=He.parent&&He.parent.provides;s===n&&(n=He.provides=Object.create(s)),n[e]=t}}function bn(e,t,n=!1){const s=He||Ne;if(s||Eo){let i=Eo?Eo._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Rt(t)?t.call(s&&s.proxy):t}}const f1={},p1=()=>Object.create(f1),g1=e=>Object.getPrototypeOf(e)===f1;function vC(e,t,n,s=!1){const i={},r=p1();e.propsDefaults=Object.create(null),m1(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:jw(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function _C(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Ht(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Mh(e.emitsOptions,f))continue;const p=t[f];if(l)if(Jt(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const m=Un(f);i[m]=Sf(l,a,m,p,e,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{m1(e,t,i,r)&&(c=!0);let u;for(const d in a)(!t||!Jt(t,d)&&((u=Gi(d))===d||!Jt(t,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Sf(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Jt(t,d))&&(delete r[d],c=!0)}c&&Bs(e.attrs,"set","")}function m1(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Wa(l))continue;const c=t[l];let u;i&&Jt(i,u=Un(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Mh(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Ht(n),c=a||ie;for(let u=0;u<r.length;u++){const d=r[u];n[d]=Sf(i,l,d,c[d],e,!Jt(c,d))}}return o}function Sf(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Jt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Rt(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=ql(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Gi(n))&&(s=!0))}return s}const yC=new WeakMap;function v1(e,t,n=!1){const s=n?yC:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!Rt(e)){const u=d=>{l=!0;const[f,p]=v1(d,t,!0);Pe(o,f),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return ue(e)&&s.set(e,_o),_o;if(Tt(r))for(let u=0;u<r.length;u++){const d=Un(r[u]);Iv(d)&&(o[d]=ie)}else if(r)for(const u in r){const d=Un(u);if(Iv(d)){const f=r[u],p=o[d]=Tt(f)||Rt(f)?{type:f}:Pe({},f),m=p.type;let _=!1,y=!0;if(Tt(m))for(let x=0;x<m.length;++x){const M=m[x],E=Rt(M)&&M.name;if(E==="Boolean"){_=!0;break}else E==="String"&&(y=!1)}else _=Rt(m)&&m.name==="Boolean";p[0]=_,p[1]=y,(_||Jt(p,"default"))&&a.push(d)}}const c=[o,a];return ue(e)&&s.set(e,c),c}function Iv(e){return e[0]!=="$"&&!Wa(e)}const jp=e=>e[0]==="_"||e==="$stable",Hp=e=>Tt(e)?e.map(us):[us(e)],bC=(e,t,n)=>{if(t._n)return t;const s=me((...i)=>Hp(t(...i)),n);return s._c=!1,s},_1=(e,t,n)=>{const s=e._ctx;for(const i in e){if(jp(i))continue;const r=e[i];if(Rt(r))t[i]=bC(i,r,s);else if(r!=null){const o=Hp(r);t[i]=()=>o}}},y1=(e,t)=>{const n=Hp(t);e.slots.default=()=>n},b1=(e,t,n)=>{for(const s in t)(n||!jp(s))&&(e[s]=t[s])},wC=(e,t,n)=>{const s=e.slots=p1();if(e.vnode.shapeFlag&32){const i=t.__;i&&mf(s,"__",i,!0);const r=t._;r?(b1(s,t,n),n&&mf(s,"_",r,!0)):_1(t,s)}else t&&y1(e,t)},TC=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=ie;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:b1(i,t,n):(r=!t.$stable,_1(t,i)),o=t}else t&&(y1(e,t),o={default:1});if(r)for(const a in i)!jp(a)&&o[a]==null&&delete i[a]},In=NC;function EC(e){return IC(e)}function IC(e,t){const n=xh();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=Qn,insertStaticContent:m}=e,_=(D,O,V,j=null,B=null,z=null,st=void 0,Q=null,J=!!O.dynamicChildren)=>{if(D===O)return;D&&!br(D,O)&&(j=$(D),et(D,B,z,!0),D=null),O.patchFlag===-2&&(J=!1,O.dynamicChildren=null);const{type:Y,ref:pt,shapeFlag:nt}=O;switch(Y){case Oh:y(D,O,V,j);break;case nn:x(D,O,V,j);break;case Md:D==null&&M(O,V,j,st);break;case re:P(D,O,V,j,B,z,st,Q,J);break;default:nt&1?R(D,O,V,j,B,z,st,Q,J):nt&6?C(D,O,V,j,B,z,st,Q,J):(nt&64||nt&128)&&Y.process(D,O,V,j,B,z,st,Q,J,ct)}pt!=null&&B?Ka(pt,D&&D.ref,z,O||D,!O):pt==null&&D&&D.ref!=null&&Ka(D.ref,null,z,D,!0)},y=(D,O,V,j)=>{if(D==null)s(O.el=a(O.children),V,j);else{const B=O.el=D.el;O.children!==D.children&&c(B,O.children)}},x=(D,O,V,j)=>{D==null?s(O.el=l(O.children||""),V,j):O.el=D.el},M=(D,O,V,j)=>{[D.el,D.anchor]=m(D.children,O,V,j,D.el,D.anchor)},E=({el:D,anchor:O},V,j)=>{let B;for(;D&&D!==O;)B=f(D),s(D,V,j),D=B;s(O,V,j)},b=({el:D,anchor:O})=>{let V;for(;D&&D!==O;)V=f(D),i(D),D=V;i(O)},R=(D,O,V,j,B,z,st,Q,J)=>{O.type==="svg"?st="svg":O.type==="math"&&(st="mathml"),D==null?L(O,V,j,B,z,st,Q,J):T(D,O,B,z,st,Q,J)},L=(D,O,V,j,B,z,st,Q)=>{let J,Y;const{props:pt,shapeFlag:nt,transition:dt,dirs:yt}=D;if(J=D.el=o(D.type,z,pt&&pt.is,pt),nt&8?u(J,D.children):nt&16&&w(D.children,J,null,j,B,Dd(D,z),st,Q),yt&&ar(D,null,j,"created"),I(J,D,D.scopeId,st,j),pt){for(const At in pt)At!=="value"&&!Wa(At)&&r(J,At,null,pt[At],z,j);"value"in pt&&r(J,"value",null,pt.value,z),(Y=pt.onVnodeBeforeMount)&&rs(Y,j,D)}yt&&ar(D,null,j,"beforeMount");const mt=SC(B,dt);mt&&dt.beforeEnter(J),s(J,O,V),((Y=pt&&pt.onVnodeMounted)||mt||yt)&&In(()=>{Y&&rs(Y,j,D),mt&&dt.enter(J),yt&&ar(D,null,j,"mounted")},B)},I=(D,O,V,j,B)=>{if(V&&p(D,V),j)for(let z=0;z<j.length;z++)p(D,j[z]);if(B){let z=B.subTree;if(O===z||A1(z.type)&&(z.ssContent===O||z.ssFallback===O)){const st=B.vnode;I(D,st,st.scopeId,st.slotScopeIds,B.parent)}}},w=(D,O,V,j,B,z,st,Q,J=0)=>{for(let Y=J;Y<D.length;Y++){const pt=D[Y]=Q?_i(D[Y]):us(D[Y]);_(null,pt,O,V,j,B,z,st,Q)}},T=(D,O,V,j,B,z,st)=>{const Q=O.el=D.el;let{patchFlag:J,dynamicChildren:Y,dirs:pt}=O;J|=D.patchFlag&16;const nt=D.props||ie,dt=O.props||ie;let yt;if(V&&lr(V,!1),(yt=dt.onVnodeBeforeUpdate)&&rs(yt,V,O,D),pt&&ar(O,D,V,"beforeUpdate"),V&&lr(V,!0),(nt.innerHTML&&dt.innerHTML==null||nt.textContent&&dt.textContent==null)&&u(Q,""),Y?k(D.dynamicChildren,Y,Q,V,j,Dd(O,B),z):st||gt(D,O,Q,null,V,j,Dd(O,B),z,!1),J>0){if(J&16)S(Q,nt,dt,V,B);else if(J&2&&nt.class!==dt.class&&r(Q,"class",null,dt.class,B),J&4&&r(Q,"style",nt.style,dt.style,B),J&8){const mt=O.dynamicProps;for(let At=0;At<mt.length;At++){const $t=mt[At],ke=nt[$t],Te=dt[$t];(Te!==ke||$t==="value")&&r(Q,$t,ke,Te,B,V)}}J&1&&D.children!==O.children&&u(Q,O.children)}else!st&&Y==null&&S(Q,nt,dt,V,B);((yt=dt.onVnodeUpdated)||pt)&&In(()=>{yt&&rs(yt,V,O,D),pt&&ar(O,D,V,"updated")},j)},k=(D,O,V,j,B,z,st)=>{for(let Q=0;Q<O.length;Q++){const J=D[Q],Y=O[Q],pt=J.el&&(J.type===re||!br(J,Y)||J.shapeFlag&198)?d(J.el):V;_(J,Y,pt,null,j,B,z,st,!0)}},S=(D,O,V,j,B)=>{if(O!==V){if(O!==ie)for(const z in O)!Wa(z)&&!(z in V)&&r(D,z,O[z],null,B,j);for(const z in V){if(Wa(z))continue;const st=V[z],Q=O[z];st!==Q&&z!=="value"&&r(D,z,Q,st,B,j)}"value"in V&&r(D,"value",O.value,V.value,B)}},P=(D,O,V,j,B,z,st,Q,J)=>{const Y=O.el=D?D.el:a(""),pt=O.anchor=D?D.anchor:a("");let{patchFlag:nt,dynamicChildren:dt,slotScopeIds:yt}=O;yt&&(Q=Q?Q.concat(yt):yt),D==null?(s(Y,V,j),s(pt,V,j),w(O.children||[],V,pt,B,z,st,Q,J)):nt>0&&nt&64&&dt&&D.dynamicChildren?(k(D.dynamicChildren,dt,V,B,z,st,Q),(O.key!=null||B&&O===B.subTree)&&w1(D,O,!0)):gt(D,O,V,pt,B,z,st,Q,J)},C=(D,O,V,j,B,z,st,Q,J)=>{O.slotScopeIds=Q,D==null?O.shapeFlag&512?B.ctx.activate(O,V,j,st,J):ot(O,V,j,B,z,st,J):K(D,O,J)},ot=(D,O,V,j,B,z,st)=>{const Q=D.component=jC(D,j,B);if(kh(D)&&(Q.ctx.renderer=ct),HC(Q,!1,st),Q.asyncDep){if(B&&B.registerDep(Q,lt,st),!D.el){const J=Q.subTree=Ct(nn);x(null,J,O,V)}}else lt(Q,D,O,V,B,z,st)},K=(D,O,V)=>{const j=O.component=D.component;if(OC(D,O,V))if(j.asyncDep&&!j.asyncResolved){at(j,O,V);return}else j.next=O,j.update();else O.el=D.el,j.vnode=O},lt=(D,O,V,j,B,z,st)=>{const Q=()=>{if(D.isMounted){let{next:nt,bu:dt,u:yt,parent:mt,vnode:At}=D;{const ye=T1(D);if(ye){nt&&(nt.el=At.el,at(D,nt,st)),ye.asyncDep.then(()=>{D.isUnmounted||Q()});return}}let $t=nt,ke;lr(D,!1),nt?(nt.el=At.el,at(D,nt,st)):nt=At,dt&&su(dt),(ke=nt.props&&nt.props.onVnodeBeforeUpdate)&&rs(ke,mt,nt,At),lr(D,!0);const Te=Rd(D),cn=D.subTree;D.subTree=Te,_(cn,Te,d(cn.el),$(cn),D,B,z),nt.el=Te.el,$t===null&&LC(D,Te.el),yt&&In(yt,B),(ke=nt.props&&nt.props.onVnodeUpdated)&&In(()=>rs(ke,mt,nt,At),B)}else{let nt;const{el:dt,props:yt}=O,{bm:mt,m:At,parent:$t,root:ke,type:Te}=D,cn=To(O);if(lr(D,!1),mt&&su(mt),!cn&&(nt=yt&&yt.onVnodeBeforeMount)&&rs(nt,$t,O),lr(D,!0),dt&&Wt){const ye=()=>{D.subTree=Rd(D),Wt(dt,D.subTree,D,B,null)};cn&&Te.__asyncHydrate?Te.__asyncHydrate(dt,D,ye):ye()}else{ke.ce&&ke.ce._def.shadowRoot!==!1&&ke.ce._injectChildStyle(Te);const ye=D.subTree=Rd(D);_(null,ye,V,j,D,B,z),O.el=ye.el}if(At&&In(At,B),!cn&&(nt=yt&&yt.onVnodeMounted)){const ye=O;In(()=>rs(nt,$t,ye),B)}(O.shapeFlag&256||$t&&To($t.vnode)&&$t.vnode.shapeFlag&256)&&D.a&&In(D.a,B),D.isMounted=!0,O=V=j=null}};D.scope.on();const J=D.effect=new Cw(Q);D.scope.off();const Y=D.update=J.run.bind(J),pt=D.job=J.runIfDirty.bind(J);pt.i=D,pt.id=D.uid,J.scheduler=()=>Fp(pt),lr(D,!0),Y()},at=(D,O,V)=>{O.component=D;const j=D.vnode.props;D.vnode=O,D.next=null,_C(D,O.props,j,V),TC(D,O.children,V),Ks(),vv(D),Gs()},gt=(D,O,V,j,B,z,st,Q,J=!1)=>{const Y=D&&D.children,pt=D?D.shapeFlag:0,nt=O.children,{patchFlag:dt,shapeFlag:yt}=O;if(dt>0){if(dt&128){W(Y,nt,V,j,B,z,st,Q,J);return}else if(dt&256){Vt(Y,nt,V,j,B,z,st,Q,J);return}}yt&8?(pt&16&&jt(Y,B,z),nt!==Y&&u(V,nt)):pt&16?yt&16?W(Y,nt,V,j,B,z,st,Q,J):jt(Y,B,z,!0):(pt&8&&u(V,""),yt&16&&w(nt,V,j,B,z,st,Q,J))},Vt=(D,O,V,j,B,z,st,Q,J)=>{D=D||_o,O=O||_o;const Y=D.length,pt=O.length,nt=Math.min(Y,pt);let dt;for(dt=0;dt<nt;dt++){const yt=O[dt]=J?_i(O[dt]):us(O[dt]);_(D[dt],yt,V,null,B,z,st,Q,J)}Y>pt?jt(D,B,z,!0,!1,nt):w(O,V,j,B,z,st,Q,J,nt)},W=(D,O,V,j,B,z,st,Q,J)=>{let Y=0;const pt=O.length;let nt=D.length-1,dt=pt-1;for(;Y<=nt&&Y<=dt;){const yt=D[Y],mt=O[Y]=J?_i(O[Y]):us(O[Y]);if(br(yt,mt))_(yt,mt,V,null,B,z,st,Q,J);else break;Y++}for(;Y<=nt&&Y<=dt;){const yt=D[nt],mt=O[dt]=J?_i(O[dt]):us(O[dt]);if(br(yt,mt))_(yt,mt,V,null,B,z,st,Q,J);else break;nt--,dt--}if(Y>nt){if(Y<=dt){const yt=dt+1,mt=yt<pt?O[yt].el:j;for(;Y<=dt;)_(null,O[Y]=J?_i(O[Y]):us(O[Y]),V,mt,B,z,st,Q,J),Y++}}else if(Y>dt)for(;Y<=nt;)et(D[Y],B,z,!0),Y++;else{const yt=Y,mt=Y,At=new Map;for(Y=mt;Y<=dt;Y++){const Ie=O[Y]=J?_i(O[Y]):us(O[Y]);Ie.key!=null&&At.set(Ie.key,Y)}let $t,ke=0;const Te=dt-mt+1;let cn=!1,ye=0;const is=new Array(Te);for(Y=0;Y<Te;Y++)is[Y]=0;for(Y=yt;Y<=nt;Y++){const Ie=D[Y];if(ke>=Te){et(Ie,B,z,!0);continue}let H;if(Ie.key!=null)H=At.get(Ie.key);else for($t=mt;$t<=dt;$t++)if(is[$t-mt]===0&&br(Ie,O[$t])){H=$t;break}H===void 0?et(Ie,B,z,!0):(is[H-mt]=Y+1,H>=ye?ye=H:cn=!0,_(Ie,O[H],V,null,B,z,st,Q,J),ke++)}const er=cn?AC(is):_o;for($t=er.length-1,Y=Te-1;Y>=0;Y--){const Ie=mt+Y,H=O[Ie],tt=Ie+1<pt?O[Ie+1].el:j;is[Y]===0?_(null,H,V,tt,B,z,st,Q,J):cn&&($t<0||Y!==er[$t]?St(H,V,tt,2):$t--)}}},St=(D,O,V,j,B=null)=>{const{el:z,type:st,transition:Q,children:J,shapeFlag:Y}=D;if(Y&6){St(D.component.subTree,O,V,j);return}if(Y&128){D.suspense.move(O,V,j);return}if(Y&64){st.move(D,O,V,ct);return}if(st===re){s(z,O,V);for(let nt=0;nt<J.length;nt++)St(J[nt],O,V,j);s(D.anchor,O,V);return}if(st===Md){E(D,O,V);return}if(j!==2&&Y&1&&Q)if(j===0)Q.beforeEnter(z),s(z,O,V),In(()=>Q.enter(z),B);else{const{leave:nt,delayLeave:dt,afterLeave:yt}=Q,mt=()=>{D.ctx.isUnmounted?i(z):s(z,O,V)},At=()=>{nt(z,()=>{mt(),yt&&yt()})};dt?dt(z,mt,At):At()}else s(z,O,V)},et=(D,O,V,j=!1,B=!1)=>{const{type:z,props:st,ref:Q,children:J,dynamicChildren:Y,shapeFlag:pt,patchFlag:nt,dirs:dt,cacheIndex:yt}=D;if(nt===-2&&(B=!1),Q!=null&&(Ks(),Ka(Q,null,V,D,!0),Gs()),yt!=null&&(O.renderCache[yt]=void 0),pt&256){O.ctx.deactivate(D);return}const mt=pt&1&&dt,At=!To(D);let $t;if(At&&($t=st&&st.onVnodeBeforeUnmount)&&rs($t,O,D),pt&6)qt(D.component,V,j);else{if(pt&128){D.suspense.unmount(V,j);return}mt&&ar(D,null,O,"beforeUnmount"),pt&64?D.type.remove(D,O,V,ct,j):Y&&!Y.hasOnce&&(z!==re||nt>0&&nt&64)?jt(Y,O,V,!1,!0):(z===re&&nt&384||!B&&pt&16)&&jt(J,O,V),j&&kt(D)}(At&&($t=st&&st.onVnodeUnmounted)||mt)&&In(()=>{$t&&rs($t,O,D),mt&&ar(D,null,O,"unmounted")},V)},kt=D=>{const{type:O,el:V,anchor:j,transition:B}=D;if(O===re){Mt(V,j);return}if(O===Md){b(D);return}const z=()=>{i(V),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(D.shapeFlag&1&&B&&!B.persisted){const{leave:st,delayLeave:Q}=B,J=()=>st(V,z);Q?Q(D.el,z,J):J()}else z()},Mt=(D,O)=>{let V;for(;D!==O;)V=f(D),i(D),D=V;i(O)},qt=(D,O,V)=>{const{bum:j,scope:B,job:z,subTree:st,um:Q,m:J,a:Y,parent:pt,slots:{__:nt}}=D;Sv(J),Sv(Y),j&&su(j),pt&&Tt(nt)&&nt.forEach(dt=>{pt.renderCache[dt]=void 0}),B.stop(),z&&(z.flags|=8,et(st,D,O,V)),Q&&In(Q,O),In(()=>{D.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},jt=(D,O,V,j=!1,B=!1,z=0)=>{for(let st=z;st<D.length;st++)et(D[st],O,V,j,B)},$=D=>{if(D.shapeFlag&6)return $(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const O=f(D.anchor||D.el),V=O&&O[qx];return V?f(V):O};let it=!1;const Z=(D,O,V)=>{D==null?O._vnode&&et(O._vnode,null,null,!0):_(O._vnode||null,D,O,null,null,null,V),O._vnode=D,it||(it=!0,vv(),Gw(),it=!1)},ct={p:_,um:et,m:St,r:kt,mt:ot,mc:w,pc:gt,pbc:k,n:$,o:e};let Ot,Wt;return t&&([Ot,Wt]=t(ct)),{render:Z,hydrate:Ot,createApp:mC(Z,Ot)}}function Dd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function lr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function SC(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function w1(e,t,n=!1){const s=e.children,i=t.children;if(Tt(s)&&Tt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=_i(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&w1(o,a)),a.type===Oh&&(a.el=o.el),a.type===nn&&!a.el&&(a.el=o.el)}}function AC(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function T1(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:T1(t)}function Sv(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const xC=Symbol.for("v-scx"),CC=()=>bn(xC);function E1(e,t){return zp(e,null,t)}function en(e,t,n){return zp(e,t,n)}function zp(e,t,n=ie){const{immediate:s,deep:i,flush:r,once:o}=n,a=Pe({},n),l=t&&s||!t&&r!=="post";let c;if(bl){if(r==="sync"){const p=CC();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Qn,p.resume=Qn,p.pause=Qn,p}}const u=He;a.call=(p,m,_)=>Zn(p,u,m,_);let d=!1;r==="post"?a.scheduler=p=>{In(p,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(p,m)=>{m?p():Fp(p)}),a.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=Hx(e,t,a);return bl&&(c?c.push(f):l&&f()),f}function PC(e,t,n){const s=this.proxy,i=ve(e)?e.includes(".")?I1(s,e):()=>s[e]:e.bind(s,s);let r;Rt(t)?r=t:(r=t.handler,n=t);const o=ql(this),a=zp(i,r.bind(s),n);return o(),a}function I1(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const kC=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Un(t)}Modifiers`]||e[`${Gi(t)}Modifiers`];function DC(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||ie;let i=n;const r=t.startsWith("update:"),o=r&&kC(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>ve(u)?u.trim():u)),o.number&&(i=n.map(vf)));let a,l=s[a=nu(t)]||s[a=nu(Un(t))];!l&&r&&(l=s[a=nu(Gi(t))]),l&&Zn(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Zn(c,e,6,i)}}function S1(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!Rt(e)){const l=c=>{const u=S1(c,t,!0);u&&(a=!0,Pe(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(ue(e)&&s.set(e,null),null):(Tt(r)?r.forEach(l=>o[l]=null):Pe(o,r),ue(e)&&s.set(e,o),o)}function Mh(e,t){return!e||!Eh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Jt(e,t[0].toLowerCase()+t.slice(1))||Jt(e,Gi(t))||Jt(e,t))}function Rd(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:m,inheritAttrs:_}=e,y=Pu(e);let x,M;try{if(n.shapeFlag&4){const b=i||s,R=b;x=us(c.call(R,b,u,d,p,f,m)),M=a}else{const b=t;x=us(b.length>1?b(d,{attrs:a,slots:o,emit:l}):b(d,null)),M=t.props?a:RC(a)}}catch(b){Xa.length=0,Ph(b,e,1),x=Ct(nn)}let E=x;if(M&&_!==!1){const b=Object.keys(M),{shapeFlag:R}=E;b.length&&R&7&&(r&&b.some(Cp)&&(M=MC(M,r)),E=$i(E,M,!1,!0))}return n.dirs&&(E=$i(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&vl(E,n.transition),x=E,Pu(y),x}const RC=e=>{let t;for(const n in e)(n==="class"||n==="style"||Eh(n))&&((t||(t={}))[n]=e[n]);return t},MC=(e,t)=>{const n={};for(const s in e)(!Cp(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function OC(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Av(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==s[f]&&!Mh(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Av(s,o,c):!0:!!o;return!1}function Av(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Mh(n,r))return!0}return!1}function LC({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const A1=e=>e.__isSuspense;function NC(e,t){t&&t.pendingBranch?Tt(e)?t.effects.push(...e):t.effects.push(e):Yx(e)}const re=Symbol.for("v-fgt"),Oh=Symbol.for("v-txt"),nn=Symbol.for("v-cmt"),Md=Symbol.for("v-stc"),Xa=[];let An=null;function ht(e=!1){Xa.push(An=e?null:[])}function VC(){Xa.pop(),An=Xa[Xa.length-1]||null}let _l=1;function xv(e,t=!1){_l+=e,e<0&&An&&t&&(An.hasOnce=!0)}function x1(e){return e.dynamicChildren=_l>0?An||_o:null,VC(),_l>0&&An&&An.push(e),e}function vt(e,t,n,s,i,r){return x1(X(e,t,n,s,i,r,!0))}function jn(e,t,n,s,i){return x1(Ct(e,t,n,s,i,!0))}function yl(e){return e?e.__v_isVNode===!0:!1}function br(e,t){return e.type===t.type&&e.key===t.key}const C1=({key:e})=>e??null,iu=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ve(e)||$e(e)||Rt(e)?{i:Ne,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,s=0,i=null,r=e===re?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&C1(t),ref:t&&iu(t),scopeId:Qw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ne};return a?(Wp(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=ve(n)?8:16),_l>0&&!o&&An&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&An.push(l),l}const Ct=FC;function FC(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===a1)&&(e=nn),yl(e)){const a=$i(e,t,!0);return n&&Wp(a,n),_l>0&&!r&&An&&(a.shapeFlag&6?An[An.indexOf(e)]=a:An.push(a)),a.patchFlag=-2,a}if(KC(e)&&(e=e.__vccOpts),t){t=$C(t);let{class:a,style:l}=t;a&&!ve(a)&&(t.class=oe(a)),ue(l)&&(zl(l)&&!Tt(l)&&(l=Pe({},l)),t.style=sn(l))}const o=ve(e)?1:A1(e)?128:Jw(e)?64:ue(e)?4:Rt(e)?2:0;return X(e,t,n,s,i,o,r,!0)}function $C(e){return e?zl(e)||g1(e)?Pe({},e):e:null}function $i(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Yl(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&C1(c),ref:t&&t.ref?n&&r?Tt(r)?r.concat(iu(t)):[r,iu(t)]:iu(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==re?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$i(e.ssContent),ssFallback:e.ssFallback&&$i(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&vl(u,l.clone(u)),u}function Lh(e=" ",t=0){return Ct(Oh,null,e,t)}function pn(e="",t=!1){return t?(ht(),jn(nn,null,e)):Ct(nn,null,e)}function us(e){return e==null||typeof e=="boolean"?Ct(nn):Tt(e)?Ct(re,null,e.slice()):yl(e)?_i(e):Ct(Oh,null,String(e))}function _i(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$i(e)}function Wp(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Tt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Wp(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!g1(t)?t._ctx=Ne:i===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Rt(t)?(t={default:t,_ctx:Ne},n=32):(t=String(t),s&64?(n=16,t=[Lh(t)]):n=8);e.children=t,e.shapeFlag|=n}function Yl(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=oe([t.class,s.class]));else if(i==="style")t.style=sn([t.style,s.style]);else if(Eh(i)){const r=t[i],o=s[i];o&&r!==o&&!(Tt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function rs(e,t,n,s=null){Zn(e,t,7,[n,s])}const BC=d1();let UC=0;function jC(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||BC,r={uid:UC++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new dx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:v1(s,i),emitsOptions:S1(s,i),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:s.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=DC.bind(null,r),e.ce&&e.ce(r),r}let He=null;const P1=()=>He||Ne;let Du,Af;{const e=xh(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Du=t("__VUE_INSTANCE_SETTERS__",n=>He=n),Af=t("__VUE_SSR_SETTERS__",n=>bl=n)}const ql=e=>{const t=He;return Du(e),e.scope.on(),()=>{e.scope.off(),Du(t)}},Cv=()=>{He&&He.scope.off(),Du(null)};function k1(e){return e.vnode.shapeFlag&4}let bl=!1;function HC(e,t=!1,n=!1){t&&Af(t);const{props:s,children:i}=e.vnode,r=k1(e);vC(e,s,r,t),wC(e,i,n||t);const o=r?zC(e,t):void 0;return t&&Af(!1),o}function zC(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,cC);const{setup:s}=n;if(s){Ks();const i=e.setupContext=s.length>1?YC(e):null,r=ql(e),o=Wl(s,e,0,[e.props,i]),a=Tw(o);if(Gs(),r(),(a||e.sp)&&!To(e)&&i1(e),a){if(o.then(Cv,Cv),t)return o.then(l=>{Pv(e,l,t)}).catch(l=>{Ph(l,e,0)});e.asyncDep=o}else Pv(e,o,t)}else D1(e,t)}function Pv(e,t,n){Rt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ue(t)&&(e.setupState=Ww(t)),D1(e,n)}let kv;function D1(e,t,n){const s=e.type;if(!e.render){if(!t&&kv&&!s.render){const i=s.template||Up(e).template;if(i){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,c=Pe(Pe({isCustomElement:r,delimiters:a},o),l);s.render=kv(i,c)}}e.render=s.render||Qn}{const i=ql(e);Ks();try{uC(e)}finally{Gs(),i()}}}const WC={get(e,t){return Ze(e,"get",""),e[t]}};function YC(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,WC),slots:e.slots,emit:e.emit,expose:t}}function Nh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ww(Mx(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ga)return Ga[n](e)},has(t,n){return n in t||n in Ga}})):e.proxy}function qC(e,t=!0){return Rt(e)?e.displayName||e.name:e.name||t&&e.__name}function KC(e){return Rt(e)&&"__vccOpts"in e}const G=(e,t)=>Ux(e,t,bl);function Do(e,t,n){const s=arguments.length;return s===2?ue(t)&&!Tt(t)?yl(t)?Ct(e,null,[t]):Ct(e,t):Ct(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&yl(n)&&(n=[n]),Ct(e,t,n))}const R1="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xf;const Dv=typeof window<"u"&&window.trustedTypes;if(Dv)try{xf=Dv.createPolicy("vue",{createHTML:e=>e})}catch{}const M1=xf?e=>xf.createHTML(e):e=>e,GC="http://www.w3.org/2000/svg",XC="http://www.w3.org/1998/Math/MathML",Vs=typeof document<"u"?document:null,Rv=Vs&&Vs.createElement("template"),QC={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Vs.createElementNS(GC,e):t==="mathml"?Vs.createElementNS(XC,e):n?Vs.createElement(e,{is:n}):Vs.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Vs.createTextNode(e),createComment:e=>Vs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Rv.innerHTML=M1(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Rv.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hi="transition",Ta="animation",wl=Symbol("_vtc"),O1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},JC=Pe({},Zw,O1),ZC=e=>(e.displayName="Transition",e.props=JC,e),Kl=ZC((e,{slots:t})=>Do(Xx,tP(e),t)),cr=(e,t=[])=>{Tt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Mv=e=>e?Tt(e)?e.some(t=>t.length>1):e.length>1:!1;function tP(e){const t={};for(const P in e)P in O1||(t[P]=e[P]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=eP(i),_=m&&m[0],y=m&&m[1],{onBeforeEnter:x,onEnter:M,onEnterCancelled:E,onLeave:b,onLeaveCancelled:R,onBeforeAppear:L=x,onAppear:I=M,onAppearCancelled:w=E}=t,T=(P,C,ot,K)=>{P._enterCancelled=K,ur(P,C?u:a),ur(P,C?c:o),ot&&ot()},k=(P,C)=>{P._isLeaving=!1,ur(P,d),ur(P,p),ur(P,f),C&&C()},S=P=>(C,ot)=>{const K=P?I:M,lt=()=>T(C,P,ot);cr(K,[C,lt]),Ov(()=>{ur(C,P?l:r),Rs(C,P?u:a),Mv(K)||Lv(C,s,_,lt)})};return Pe(t,{onBeforeEnter(P){cr(x,[P]),Rs(P,r),Rs(P,o)},onBeforeAppear(P){cr(L,[P]),Rs(P,l),Rs(P,c)},onEnter:S(!1),onAppear:S(!0),onLeave(P,C){P._isLeaving=!0;const ot=()=>k(P,C);Rs(P,d),P._enterCancelled?(Rs(P,f),Fv()):(Fv(),Rs(P,f)),Ov(()=>{P._isLeaving&&(ur(P,d),Rs(P,p),Mv(b)||Lv(P,s,y,ot))}),cr(b,[P,ot])},onEnterCancelled(P){T(P,!1,void 0,!0),cr(E,[P])},onAppearCancelled(P){T(P,!0,void 0,!0),cr(w,[P])},onLeaveCancelled(P){k(P),cr(R,[P])}})}function eP(e){if(e==null)return null;if(ue(e))return[Od(e.enter),Od(e.leave)];{const t=Od(e);return[t,t]}}function Od(e){return ix(e)}function Rs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[wl]||(e[wl]=new Set)).add(t)}function ur(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[wl];n&&(n.delete(t),n.size||(e[wl]=void 0))}function Ov(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let nP=0;function Lv(e,t,n,s){const i=e._endId=++nP,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=sP(e,t);if(!o)return s();const c=o+"end";let u=0;const d=()=>{e.removeEventListener(c,f),r()},f=p=>{p.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,f)}function sP(e,t){const n=window.getComputedStyle(e),s=m=>(n[m]||"").split(", "),i=s(`${hi}Delay`),r=s(`${hi}Duration`),o=Nv(i,r),a=s(`${Ta}Delay`),l=s(`${Ta}Duration`),c=Nv(a,l);let u=null,d=0,f=0;t===hi?o>0&&(u=hi,d=o,f=r.length):t===Ta?c>0&&(u=Ta,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?hi:Ta:null,f=u?u===hi?r.length:l.length:0);const p=u===hi&&/\b(transform|all)(,|$)/.test(s(`${hi}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function Nv(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Vv(n)+Vv(e[s])))}function Vv(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Fv(){return document.body.offsetHeight}function iP(e,t,n){const s=e[wl];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const $v=Symbol("_vod"),rP=Symbol("_vsh"),oP=Symbol(""),aP=/(^|;)\s*display\s*:/;function lP(e,t,n){const s=e.style,i=ve(n);let r=!1;if(n&&!i){if(t)if(ve(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ru(s,a,"")}else for(const o in t)n[o]==null&&ru(s,o,"");for(const o in n)o==="display"&&(r=!0),ru(s,o,n[o])}else if(i){if(t!==n){const o=s[oP];o&&(n+=";"+o),s.cssText=n,r=aP.test(n)}}else t&&e.removeAttribute("style");$v in e&&(e[$v]=r?s.display:"",e[rP]&&(s.display="none"))}const Bv=/\s*!important$/;function ru(e,t,n){if(Tt(n))n.forEach(s=>ru(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=cP(e,t);Bv.test(n)?e.setProperty(Gi(s),n.replace(Bv,""),"important"):e[s]=n}}const Uv=["Webkit","Moz","ms"],Ld={};function cP(e,t){const n=Ld[t];if(n)return n;let s=Un(t);if(s!=="filter"&&s in e)return Ld[t]=s;s=Ah(s);for(let i=0;i<Uv.length;i++){const r=Uv[i]+s;if(r in e)return Ld[t]=r}return t}const jv="http://www.w3.org/1999/xlink";function Hv(e,t,n,s,i,r=hx(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(jv,t.slice(6,t.length)):e.setAttributeNS(jv,t,n):n==null||r&&!Sw(n)?e.removeAttribute(t):e.setAttribute(t,r?"":ni(n)?String(n):n)}function zv(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?M1(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Sw(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function lo(e,t,n,s){e.addEventListener(t,n,s)}function uP(e,t,n,s){e.removeEventListener(t,n,s)}const Wv=Symbol("_vei");function hP(e,t,n,s,i=null){const r=e[Wv]||(e[Wv]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=dP(t);if(s){const c=r[t]=gP(s,i);lo(e,a,c,l)}else o&&(uP(e,a,o,l),r[t]=void 0)}}const Yv=/(?:Once|Passive|Capture)$/;function dP(e){let t;if(Yv.test(e)){t={};let s;for(;s=e.match(Yv);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Gi(e.slice(2)),t]}let Nd=0;const fP=Promise.resolve(),pP=()=>Nd||(fP.then(()=>Nd=0),Nd=Date.now());function gP(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Zn(mP(s,n.value),t,5,[s])};return n.value=e,n.attached=pP(),n}function mP(e,t){if(Tt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const qv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,vP=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?iP(e,s,o):t==="style"?lP(e,n,s):Eh(t)?Cp(t)||hP(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):_P(e,t,s,o))?(zv(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Hv(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ve(s))?zv(e,Un(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Hv(e,t,s,o))};function _P(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&qv(t)&&Rt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return qv(t)&&ve(n)?!1:t in e}const Kv=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Tt(t)?n=>su(t,n):t};function yP(e){e.target.composing=!0}function Gv(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Vd=Symbol("_assign"),Xv={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[Vd]=Kv(i);const r=s||i.props&&i.props.type==="number";lo(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=vf(a)),e[Vd](a)}),n&&lo(e,"change",()=>{e.value=e.value.trim()}),t||(lo(e,"compositionstart",yP),lo(e,"compositionend",Gv),lo(e,"change",Gv))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[Vd]=Kv(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?vf(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},bP=["ctrl","shift","alt","meta"],wP={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bP.some(n=>e[`${n}Key`]&&!t.includes(n))},Yp=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=wP[t[o]];if(a&&a(i,t))return}return e(i,...r)})},TP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qv=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=Gi(i.key);if(t.some(o=>o===r||TP[o]===r))return e(i)})},EP=Pe({patchProp:vP},QC);let Jv;function IP(){return Jv||(Jv=EC(EP))}const SP=(...e)=>{const t=IP().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=xP(s);if(!i)return;const r=t._component;!Rt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,AP(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function AP(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function xP(e){return ve(e)?document.querySelector(e):e}const Xi=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},CP={__name:"App",setup(e){return(t,n)=>{const s=Fs("router-view");return ht(),jn(s)}}},PP=Xi(CP,[["__scopeId","data-v-9e390217"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const co=typeof document<"u";function L1(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function kP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&L1(e.default)}const Qt=Object.assign;function Fd(e,t){const n={};for(const s in t){const i=t[s];n[s]=ts(i)?i.map(e):e(i)}return n}const Qa=()=>{},ts=Array.isArray,N1=/#/g,DP=/&/g,RP=/\//g,MP=/=/g,OP=/\?/g,V1=/\+/g,LP=/%5B/g,NP=/%5D/g,F1=/%5E/g,VP=/%60/g,$1=/%7B/g,FP=/%7C/g,B1=/%7D/g,$P=/%20/g;function qp(e){return encodeURI(""+e).replace(FP,"|").replace(LP,"[").replace(NP,"]")}function BP(e){return qp(e).replace($1,"{").replace(B1,"}").replace(F1,"^")}function Cf(e){return qp(e).replace(V1,"%2B").replace($P,"+").replace(N1,"%23").replace(DP,"%26").replace(VP,"`").replace($1,"{").replace(B1,"}").replace(F1,"^")}function UP(e){return Cf(e).replace(MP,"%3D")}function jP(e){return qp(e).replace(N1,"%23").replace(OP,"%3F")}function HP(e){return e==null?"":jP(e).replace(RP,"%2F")}function Tl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const zP=/\/$/,WP=e=>e.replace(zP,"");function $d(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=GP(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:Tl(o)}}function YP(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Zv(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function qP(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Ro(t.matched[s],n.matched[i])&&U1(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ro(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function U1(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!KP(e[n],t[n]))return!1;return!0}function KP(e,t){return ts(e)?t_(e,t):ts(t)?t_(t,e):e===t}function t_(e,t){return ts(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function GP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const di={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var El;(function(e){e.pop="pop",e.push="push"})(El||(El={}));var Ja;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ja||(Ja={}));function XP(e){if(!e)if(co){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),WP(e)}const QP=/^[^#]+#/;function JP(e,t){return e.replace(QP,"#")+t}function ZP(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Vh=()=>({left:window.scrollX,top:window.scrollY});function tk(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=ZP(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function e_(e,t){return(history.state?history.state.position-t:-1)+e}const Pf=new Map;function ek(e,t){Pf.set(e,t)}function nk(e){const t=Pf.get(e);return Pf.delete(e),t}let sk=()=>location.protocol+"//"+location.host;function j1(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Zv(l,"")}return Zv(n,e)+s+i}function ik(e,t,n,s){let i=[],r=[],o=null;const a=({state:f})=>{const p=j1(e,location),m=n.value,_=t.value;let y=0;if(f){if(n.value=p,t.value=f,o&&o===m){o=null;return}y=_?f.position-_.position:0}else s(p);i.forEach(x=>{x(n.value,m,{delta:y,type:El.pop,direction:y?y>0?Ja.forward:Ja.back:Ja.unknown})})};function l(){o=n.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return r.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(Qt({},f.state,{scroll:Vh()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function n_(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Vh():null}}function rk(e){const{history:t,location:n}=window,s={value:j1(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:sk()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),n[u?"replace":"assign"](f)}}function o(l,c){const u=Qt({},t.state,n_(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=Qt({},i.value,t.state,{forward:l,scroll:Vh()});r(u.current,u,!0);const d=Qt({},n_(s.value,l,null),{position:u.position+1},c);r(l,d,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function ok(e){e=XP(e);const t=rk(e),n=ik(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Qt({location:"",base:e,go:s,createHref:JP.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function ak(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),ok(e)}function lk(e){return typeof e=="string"||e&&typeof e=="object"}function H1(e){return typeof e=="string"||typeof e=="symbol"}const z1=Symbol("");var s_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(s_||(s_={}));function Mo(e,t){return Qt(new Error,{type:e,[z1]:!0},t)}function Ms(e,t){return e instanceof Error&&z1 in e&&(t==null||!!(e.type&t))}const i_="[^/]+?",ck={sensitive:!1,strict:!1,start:!0,end:!0},uk=/[.+*?^${}()[\]/\\]/g;function hk(e,t){const n=Qt({},ck,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=40+(n.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(uk,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:_,optional:y,regexp:x}=f;r.push({name:m,repeatable:_,optional:y});const M=x||i_;if(M!==i_){p+=10;try{new RegExp(`(${M})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${m}" (${M}): `+b.message)}}let E=_?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(E=y&&c.length<2?`(?:/${E})`:"/"+E),y&&(E+="?"),i+=E,p+=20,y&&(p+=-8),_&&(p+=-20),M===".*"&&(p+=-50)}u.push(p)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=r[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:_,optional:y}=p,x=m in c?c[m]:"";if(ts(x)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const M=ts(x)?x.join("/"):x;if(!M)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=M}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function dk(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function W1(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=dk(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(r_(s))return 1;if(r_(i))return-1}return i.length-s.length}function r_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const fk={type:0,value:""},pk=/[a-zA-Z0-9_]/;function gk(e){if(!e)return[[]];if(e==="/")return[[fk]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:pk.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function mk(e,t,n){const s=hk(gk(e.path),n),i=Qt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function vk(e,t){const n=[],s=new Map;t=c_({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function r(d,f,p){const m=!p,_=a_(d);_.aliasOf=p&&p.record;const y=c_(t,d),x=[_];if("alias"in d){const b=typeof d.alias=="string"?[d.alias]:d.alias;for(const R of b)x.push(a_(Qt({},_,{components:p?p.record.components:_.components,path:R,aliasOf:p?p.record:_})))}let M,E;for(const b of x){const{path:R}=b;if(f&&R[0]!=="/"){const L=f.record.path,I=L[L.length-1]==="/"?"":"/";b.path=f.record.path+(R&&I+R)}if(M=mk(b,f,y),p?p.alias.push(M):(E=E||M,E!==M&&E.alias.push(M),m&&d.name&&!l_(M)&&o(d.name)),Y1(M)&&l(M),_.children){const L=_.children;for(let I=0;I<L.length;I++)r(L[I],M,p&&p.children[I])}p=p||M}return E?()=>{o(E)}:Qa}function o(d){if(H1(d)){const f=s.get(d);f&&(s.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=bk(d,n);n.splice(f,0,d),d.record.name&&!l_(d)&&s.set(d.record.name,d)}function c(d,f){let p,m={},_,y;if("name"in d&&d.name){if(p=s.get(d.name),!p)throw Mo(1,{location:d});y=p.record.name,m=Qt(o_(f.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),d.params&&o_(d.params,p.keys.map(E=>E.name))),_=p.stringify(m)}else if(d.path!=null)_=d.path,p=n.find(E=>E.re.test(_)),p&&(m=p.parse(_),y=p.record.name);else{if(p=f.name?s.get(f.name):n.find(E=>E.re.test(f.path)),!p)throw Mo(1,{location:d,currentLocation:f});y=p.record.name,m=Qt({},f.params,d.params),_=p.stringify(m)}const x=[];let M=p;for(;M;)x.unshift(M.record),M=M.parent;return{name:y,path:_,params:m,matched:x,meta:yk(x)}}e.forEach(d=>r(d));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function o_(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function a_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:_k(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function _k(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function l_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function yk(e){return e.reduce((t,n)=>Qt(t,n.meta),{})}function c_(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function bk(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;W1(e,t[r])<0?s=r:n=r+1}const i=wk(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function wk(e){let t=e;for(;t=t.parent;)if(Y1(t)&&W1(e,t)===0)return t}function Y1({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Tk(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(V1," "),o=r.indexOf("="),a=Tl(o<0?r:r.slice(0,o)),l=o<0?null:Tl(r.slice(o+1));if(a in t){let c=t[a];ts(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function u_(e){let t="";for(let n in e){const s=e[n];if(n=UP(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(ts(s)?s.map(r=>r&&Cf(r)):[s&&Cf(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Ek(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=ts(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Ik=Symbol(""),h_=Symbol(""),Fh=Symbol(""),q1=Symbol(""),kf=Symbol("");function Ea(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function yi(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Mo(4,{from:n,to:t})):f instanceof Error?l(f):lk(f)?l(Mo(2,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Bd(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(L1(l)){const u=(l.__vccOpts||l)[t];u&&r.push(yi(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=kP(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const p=(d.__vccOpts||d)[t];return p&&yi(p,n,s,o,a,i)()}))}}return r}function d_(e){const t=bn(Fh),n=bn(q1),s=G(()=>{const l=ft(e.to);return t.resolve(l)}),i=G(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Ro.bind(null,u));if(f>-1)return f;const p=f_(l[c-2]);return c>1&&f_(u)===p&&d[d.length-1].path!==p?d.findIndex(Ro.bind(null,l[c-2])):f}),r=G(()=>i.value>-1&&Pk(n.params,s.value.params)),o=G(()=>i.value>-1&&i.value===n.matched.length-1&&U1(n.params,s.value.params));function a(l={}){if(Ck(l)){const c=t[ft(e.replace)?"replace":"push"](ft(e.to)).catch(Qa);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:G(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function Sk(e){return e.length===1?e[0]:e}const Ak=an({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:d_,setup(e,{slots:t}){const n=Ko(d_(e)),{options:s}=bn(Fh),i=G(()=>({[p_(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[p_(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Sk(t.default(n));return e.custom?r:Do("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),xk=Ak;function Ck(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Pk(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!ts(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function f_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const p_=(e,t,n)=>e??t??n,kk=an({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=bn(kf),i=G(()=>e.route||s.value),r=bn(h_,0),o=G(()=>{let c=ft(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=G(()=>i.value.matched[o.value]);Di(h_,G(()=>o.value+1)),Di(Ik,a),Di(kf,i);const l=Lt();return en(()=>[l.value,a.value,e.name],([c,u,d],[f,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ro(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,d=a.value,f=d&&d.components[u];if(!f)return g_(n.default,{Component:f,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=Do(f,Qt({},m,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return g_(n.default,{Component:y,route:c})||y}}});function g_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Dk=kk;function Rk(e){const t=vk(e.routes,e),n=e.parseQuery||Tk,s=e.stringifyQuery||u_,i=e.history,r=Ea(),o=Ea(),a=Ea(),l=Vp(di);let c=di;co&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Fd.bind(null,$=>""+$),d=Fd.bind(null,HP),f=Fd.bind(null,Tl);function p($,it){let Z,ct;return H1($)?(Z=t.getRecordMatcher($),ct=it):ct=$,t.addRoute(ct,Z)}function m($){const it=t.getRecordMatcher($);it&&t.removeRoute(it)}function _(){return t.getRoutes().map($=>$.record)}function y($){return!!t.getRecordMatcher($)}function x($,it){if(it=Qt({},it||l.value),typeof $=="string"){const O=$d(n,$,it.path),V=t.resolve({path:O.path},it),j=i.createHref(O.fullPath);return Qt(O,V,{params:f(V.params),hash:Tl(O.hash),redirectedFrom:void 0,href:j})}let Z;if($.path!=null)Z=Qt({},$,{path:$d(n,$.path,it.path).path});else{const O=Qt({},$.params);for(const V in O)O[V]==null&&delete O[V];Z=Qt({},$,{params:d(O)}),it.params=d(it.params)}const ct=t.resolve(Z,it),Ot=$.hash||"";ct.params=u(f(ct.params));const Wt=YP(s,Qt({},$,{hash:BP(Ot),path:ct.path})),D=i.createHref(Wt);return Qt({fullPath:Wt,hash:Ot,query:s===u_?Ek($.query):$.query||{}},ct,{redirectedFrom:void 0,href:D})}function M($){return typeof $=="string"?$d(n,$,l.value.path):Qt({},$)}function E($,it){if(c!==$)return Mo(8,{from:it,to:$})}function b($){return I($)}function R($){return b(Qt(M($),{replace:!0}))}function L($){const it=$.matched[$.matched.length-1];if(it&&it.redirect){const{redirect:Z}=it;let ct=typeof Z=="function"?Z($):Z;return typeof ct=="string"&&(ct=ct.includes("?")||ct.includes("#")?ct=M(ct):{path:ct},ct.params={}),Qt({query:$.query,hash:$.hash,params:ct.path!=null?{}:$.params},ct)}}function I($,it){const Z=c=x($),ct=l.value,Ot=$.state,Wt=$.force,D=$.replace===!0,O=L(Z);if(O)return I(Qt(M(O),{state:typeof O=="object"?Qt({},Ot,O.state):Ot,force:Wt,replace:D}),it||Z);const V=Z;V.redirectedFrom=it;let j;return!Wt&&qP(s,ct,Z)&&(j=Mo(16,{to:V,from:ct}),St(ct,ct,!0,!1)),(j?Promise.resolve(j):k(V,ct)).catch(B=>Ms(B)?Ms(B,2)?B:W(B):gt(B,V,ct)).then(B=>{if(B){if(Ms(B,2))return I(Qt({replace:D},M(B.to),{state:typeof B.to=="object"?Qt({},Ot,B.to.state):Ot,force:Wt}),it||V)}else B=P(V,ct,!0,D,Ot);return S(V,ct,B),B})}function w($,it){const Z=E($,it);return Z?Promise.reject(Z):Promise.resolve()}function T($){const it=Mt.values().next().value;return it&&typeof it.runWithContext=="function"?it.runWithContext($):$()}function k($,it){let Z;const[ct,Ot,Wt]=Mk($,it);Z=Bd(ct.reverse(),"beforeRouteLeave",$,it);for(const O of ct)O.leaveGuards.forEach(V=>{Z.push(yi(V,$,it))});const D=w.bind(null,$,it);return Z.push(D),jt(Z).then(()=>{Z=[];for(const O of r.list())Z.push(yi(O,$,it));return Z.push(D),jt(Z)}).then(()=>{Z=Bd(Ot,"beforeRouteUpdate",$,it);for(const O of Ot)O.updateGuards.forEach(V=>{Z.push(yi(V,$,it))});return Z.push(D),jt(Z)}).then(()=>{Z=[];for(const O of Wt)if(O.beforeEnter)if(ts(O.beforeEnter))for(const V of O.beforeEnter)Z.push(yi(V,$,it));else Z.push(yi(O.beforeEnter,$,it));return Z.push(D),jt(Z)}).then(()=>($.matched.forEach(O=>O.enterCallbacks={}),Z=Bd(Wt,"beforeRouteEnter",$,it,T),Z.push(D),jt(Z))).then(()=>{Z=[];for(const O of o.list())Z.push(yi(O,$,it));return Z.push(D),jt(Z)}).catch(O=>Ms(O,8)?O:Promise.reject(O))}function S($,it,Z){a.list().forEach(ct=>T(()=>ct($,it,Z)))}function P($,it,Z,ct,Ot){const Wt=E($,it);if(Wt)return Wt;const D=it===di,O=co?history.state:{};Z&&(ct||D?i.replace($.fullPath,Qt({scroll:D&&O&&O.scroll},Ot)):i.push($.fullPath,Ot)),l.value=$,St($,it,Z,D),W()}let C;function ot(){C||(C=i.listen(($,it,Z)=>{if(!qt.listening)return;const ct=x($),Ot=L(ct);if(Ot){I(Qt(Ot,{replace:!0,force:!0}),ct).catch(Qa);return}c=ct;const Wt=l.value;co&&ek(e_(Wt.fullPath,Z.delta),Vh()),k(ct,Wt).catch(D=>Ms(D,12)?D:Ms(D,2)?(I(Qt(M(D.to),{force:!0}),ct).then(O=>{Ms(O,20)&&!Z.delta&&Z.type===El.pop&&i.go(-1,!1)}).catch(Qa),Promise.reject()):(Z.delta&&i.go(-Z.delta,!1),gt(D,ct,Wt))).then(D=>{D=D||P(ct,Wt,!1),D&&(Z.delta&&!Ms(D,8)?i.go(-Z.delta,!1):Z.type===El.pop&&Ms(D,20)&&i.go(-1,!1)),S(ct,Wt,D)}).catch(Qa)}))}let K=Ea(),lt=Ea(),at;function gt($,it,Z){W($);const ct=lt.list();return ct.length?ct.forEach(Ot=>Ot($,it,Z)):console.error($),Promise.reject($)}function Vt(){return at&&l.value!==di?Promise.resolve():new Promise(($,it)=>{K.add([$,it])})}function W($){return at||(at=!$,ot(),K.list().forEach(([it,Z])=>$?Z($):it()),K.reset()),$}function St($,it,Z,ct){const{scrollBehavior:Ot}=e;if(!co||!Ot)return Promise.resolve();const Wt=!Z&&nk(e_($.fullPath,0))||(ct||!Z)&&history.state&&history.state.scroll||null;return Pr().then(()=>Ot($,it,Wt)).then(D=>D&&tk(D)).catch(D=>gt(D,$,it))}const et=$=>i.go($);let kt;const Mt=new Set,qt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:_,resolve:x,options:e,push:b,replace:R,go:et,back:()=>et(-1),forward:()=>et(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:lt.add,isReady:Vt,install($){const it=this;$.component("RouterLink",xk),$.component("RouterView",Dk),$.config.globalProperties.$router=it,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(l)}),co&&!kt&&l.value===di&&(kt=!0,b(i.location).catch(Ot=>{}));const Z={};for(const Ot in di)Object.defineProperty(Z,Ot,{get:()=>l.value[Ot],enumerable:!0});$.provide(Fh,it),$.provide(q1,jw(Z)),$.provide(kf,l);const ct=$.unmount;Mt.add($),$.unmount=function(){Mt.delete($),Mt.size<1&&(c=di,C&&C(),C=null,l.value=di,kt=!1,at=!1),ct()}}};function jt($){return $.reduce((it,Z)=>it.then(()=>T(Z)),Promise.resolve())}return qt}function Mk(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>Ro(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Ro(c,l))||i.push(l))}return[n,s,i]}function Kp(){return bn(Fh)}const Ok=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Lk=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},G1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),s.push(n[u],n[d],n[f],n[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(K1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Lk(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new Nk;const f=r<<2|a>>4;if(s.push(f),c!==64){const p=a<<4&240|c>>2;if(s.push(p),d!==64){const m=c<<6&192|d;s.push(m)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Nk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vk=function(e){const t=K1(e);return G1.encodeByteArray(t,!0)},Ru=function(e){return Vk(e).replace(/\./g,"")},X1=function(e){try{return G1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=()=>Fk().__FIREBASE_DEFAULTS__,Bk=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Uk=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&X1(e[1]);return t&&JSON.parse(t)},$h=()=>{try{return Ok()||$k()||Bk()||Uk()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Q1=e=>{var t,n;return(n=(t=$h())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},jk=e=>{const t=Q1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},J1=()=>{var e;return(e=$h())===null||e===void 0?void 0:e.config},Z1=e=>{var t;return(t=$h())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Ru(JSON.stringify(n)),Ru(JSON.stringify(o)),a].join(".")}const Za={};function Wk(){const e={prod:[],emulator:[]};for(const t of Object.keys(Za))Za[t]?e.emulator.push(t):e.prod.push(t);return e}function Yk(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let m_=!1;function eT(e,t){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||Za[e]===t||Za[e]||m_)return;Za[e]=t;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=Wk().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{m_=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Yk(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),y=document.getElementById(_)||document.createElement("a"),x=n("preprendIcon"),M=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),u(y,_);const b=c();l(M,x),E.append(M,m,y,b),document.body.appendChild(E)}r?(m.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function Kk(){var e;const t=(e=$h())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xk(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Qk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jk(){const e=rn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Zk(){return!Kk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tD(){try{return typeof indexedDB=="object"}catch{return!1}}function eD(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="FirebaseError";class ii extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=nD,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?sD(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ii(i,a,s)}}function sD(e,t){return e.replace(iD,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const iD=/\{\$([^}]+)}/g;function rD(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function kr(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(v_(r)&&v_(o)){if(!kr(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function v_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Oa(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function La(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function oD(e,t){const n=new aD(e,t);return n.subscribe.bind(n)}class aD{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");lD(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Ud),i.error===void 0&&(i.error=Ud),i.complete===void 0&&(i.complete=Ud);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lD(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e){return e&&e._delegate?e._delegate:e}class Dr{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Hk;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hD(t))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=mr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=mr){return this.instances.has(t)}getOptions(t=mr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:uD(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=mr){return this.component?this.component.multipleInstances?t:mr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uD(e){return e===mr?void 0:e}function hD(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new cD(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bt||(Bt={}));const fD={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},pD=Bt.INFO,gD={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},mD=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=gD[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gp{constructor(t){this.name=t,this._logLevel=pD,this._logHandler=mD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...t),this._logHandler(this,Bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...t),this._logHandler(this,Bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...t),this._logHandler(this,Bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...t),this._logHandler(this,Bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...t),this._logHandler(this,Bt.ERROR,...t)}}const vD=(e,t)=>t.some(n=>e instanceof n);let __,y_;function _D(){return __||(__=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yD(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nT=new WeakMap,Df=new WeakMap,sT=new WeakMap,jd=new WeakMap,Xp=new WeakMap;function bD(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Ri(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&nT.set(n,e)}).catch(()=>{}),Xp.set(t,e),t}function wD(e){if(Df.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Df.set(e,t)}let Rf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Df.get(e);if(t==="objectStoreNames")return e.objectStoreNames||sT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function TD(e){Rf=e(Rf)}function ED(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Hd(this),t,...n);return sT.set(s,t.sort?t.sort():[t]),Ri(s)}:yD().includes(e)?function(...t){return e.apply(Hd(this),t),Ri(nT.get(this))}:function(...t){return Ri(e.apply(Hd(this),t))}}function ID(e){return typeof e=="function"?ED(e):(e instanceof IDBTransaction&&wD(e),vD(e,_D())?new Proxy(e,Rf):e)}function Ri(e){if(e instanceof IDBRequest)return bD(e);if(jd.has(e))return jd.get(e);const t=ID(e);return t!==e&&(jd.set(e,t),Xp.set(t,e)),t}const Hd=e=>Xp.get(e);function SD(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Ri(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ri(o.result),l.oldVersion,l.newVersion,Ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const AD=["get","getKey","getAll","getAllKeys","count"],xD=["put","add","delete","clear"],zd=new Map;function b_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(zd.get(t))return zd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=xD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||AD.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zd.set(t,r),r}TD(e=>({...e,get:(t,n,s)=>b_(t,n)||e.get(t,n,s),has:(t,n)=>!!b_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PD(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PD(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Mf="@firebase/app",w_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Gp("@firebase/app"),kD="@firebase/app-compat",DD="@firebase/analytics-compat",RD="@firebase/analytics",MD="@firebase/app-check-compat",OD="@firebase/app-check",LD="@firebase/auth",ND="@firebase/auth-compat",VD="@firebase/database",FD="@firebase/data-connect",$D="@firebase/database-compat",BD="@firebase/functions",UD="@firebase/functions-compat",jD="@firebase/installations",HD="@firebase/installations-compat",zD="@firebase/messaging",WD="@firebase/messaging-compat",YD="@firebase/performance",qD="@firebase/performance-compat",KD="@firebase/remote-config",GD="@firebase/remote-config-compat",XD="@firebase/storage",QD="@firebase/storage-compat",JD="@firebase/firestore",ZD="@firebase/ai",tR="@firebase/firestore-compat",eR="firebase",nR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="[DEFAULT]",sR={[Mf]:"fire-core",[kD]:"fire-core-compat",[RD]:"fire-analytics",[DD]:"fire-analytics-compat",[OD]:"fire-app-check",[MD]:"fire-app-check-compat",[LD]:"fire-auth",[ND]:"fire-auth-compat",[VD]:"fire-rtdb",[FD]:"fire-data-connect",[$D]:"fire-rtdb-compat",[BD]:"fire-fn",[UD]:"fire-fn-compat",[jD]:"fire-iid",[HD]:"fire-iid-compat",[zD]:"fire-fcm",[WD]:"fire-fcm-compat",[YD]:"fire-perf",[qD]:"fire-perf-compat",[KD]:"fire-rc",[GD]:"fire-rc-compat",[XD]:"fire-gcs",[QD]:"fire-gcs-compat",[JD]:"fire-fst",[tR]:"fire-fst-compat",[ZD]:"fire-vertex","fire-js":"fire-js",[eR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Map,iR=new Map,Lf=new Map;function T_(e,t){try{e.container.addComponent(t)}catch(n){Xs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Oo(e){const t=e.name;if(Lf.has(t))return Xs.debug(`There were multiple attempts to register component ${t}.`),!1;Lf.set(t,e);for(const n of Mu.values())T_(n,e);for(const n of iR.values())T_(n,e);return!0}function Qp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new Gl("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=nR;function iT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Of,automaticDataCollectionEnabled:!0},t),i=s.name;if(typeof i!="string"||!i)throw Mi.create("bad-app-name",{appName:String(i)});if(n||(n=J1()),!n)throw Mi.create("no-options");const r=Mu.get(i);if(r){if(kr(n,r.options)&&kr(s,r.config))return r;throw Mi.create("duplicate-app",{appName:i})}const o=new dD(i);for(const l of Lf.values())o.addComponent(l);const a=new oR(n,s,o);return Mu.set(i,a),a}function rT(e=Of){const t=Mu.get(e);if(!t&&e===Of&&J1())return iT();if(!t)throw Mi.create("no-app",{appName:e});return t}function Oi(e,t,n){var s;let i=(s=sR[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}Oo(new Dr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="firebase-heartbeat-database",lR=1,Il="firebase-heartbeat-store";let Wd=null;function oT(){return Wd||(Wd=SD(aR,lR,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Il)}catch(n){console.warn(n)}}}}).catch(e=>{throw Mi.create("idb-open",{originalErrorMessage:e.message})})),Wd}async function cR(e){try{const n=(await oT()).transaction(Il),s=await n.objectStore(Il).get(aT(e));return await n.done,s}catch(t){if(t instanceof ii)Xs.warn(t.message);else{const n=Mi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xs.warn(n.message)}}}async function E_(e,t){try{const s=(await oT()).transaction(Il,"readwrite");await s.objectStore(Il).put(t,aT(e)),await s.done}catch(n){if(n instanceof ii)Xs.warn(n.message);else{const s=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(s.message)}}}function aT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1024,hR=30;class dR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=I_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>hR){const o=gR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Xs.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=I_(),{heartbeatsToSend:s,unsentEntries:i}=fR(this._heartbeatsCache.heartbeats),r=Ru(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Xs.warn(n),""}}}function I_(){return new Date().toISOString().substring(0,10)}function fR(e,t=uR){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),S_(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),S_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class pR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tD()?eD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return E_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return E_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function S_(e){return Ru(JSON.stringify({version:2,heartbeats:e})).length}function gR(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(e){Oo(new Dr("platform-logger",t=>new CD(t),"PRIVATE")),Oo(new Dr("heartbeat",t=>new dR(t),"PRIVATE")),Oi(Mf,w_,e),Oi(Mf,w_,"esm2017"),Oi("fire-js","")}mR("");var vR="firebase",_R="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(vR,_R,"app");function Jp(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function lT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yR=lT,cT=new Gl("auth","Firebase",lT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Gp("@firebase/auth");function bR(e,...t){Ou.logLevel<=Bt.WARN&&Ou.warn(`Auth (${Qo}): ${e}`,...t)}function ou(e,...t){Ou.logLevel<=Bt.ERROR&&Ou.error(`Auth (${Qo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e,...t){throw Zp(e,...t)}function fs(e,...t){return Zp(e,...t)}function uT(e,t,n){const s=Object.assign(Object.assign({},yR()),{[t]:n});return new Gl("auth","Firebase",s).create(t,{appName:e.name})}function Ys(e){return uT(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zp(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return cT.create(e,...t)}function Et(e,t,...n){if(!e)throw Zp(t,...n)}function js(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ou(t),new Error(t)}function Qs(e,t){e||js(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function wR(){return A_()==="http:"||A_()==="https:"}function A_(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wR()||Xk()||"connection"in navigator)?navigator.onLine:!0}function ER(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qs(n>t,"Short delay should be less than long delay!"),this.isMobile=qk()||Qk()}get(){return TR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(e,t){Qs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AR=new Ql(3e4,6e4);function Qi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ji(e,t,n,s,i={}){return dT(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=Xl(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},r);return Gk()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Xo(e.emulatorConfig.host)&&(c.credentials="include"),hT.fetch()(await fT(e,e.config.apiHost,n,a),c)})}async function dT(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},IR),t);try{const i=new CR(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw kc(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kc(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw kc(e,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uT(e,u,c);es(e,u)}}catch(i){if(i instanceof ii)throw i;es(e,"network-request-failed",{message:String(i)})}}async function Jl(e,t,n,s,i={}){const r=await Ji(e,t,n,s,i);return"mfaPendingCredential"in r&&es(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function fT(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?tg(e.config,i):`${e.config.apiScheme}://${i}`;return SR.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function xR(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(fs(this.auth,"network-request-failed")),AR.get())})}}function kc(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=fs(e,t,s);return i.customData._tokenResponse=n,i}function x_(e){return e!==void 0&&e.enterprise!==void 0}class PR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return xR(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kR(e,t){return Ji(e,"GET","/v2/recaptchaConfig",Qi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(e,t){return Ji(e,"POST","/v1/accounts:delete",t)}async function Lu(e,t){return Ji(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function RR(e,t=!1){const n=Hn(e),s=await n.getIdToken(t),i=eg(s);Et(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:tl(Yd(i.auth_time)),issuedAtTime:tl(Yd(i.iat)),expirationTime:tl(Yd(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Yd(e){return Number(e)*1e3}function eg(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return ou("JWT malformed, contained fewer than 3 sections"),null;try{const i=X1(n);return i?JSON.parse(i):(ou("Failed to decode base64 JWT payload"),null)}catch(i){return ou("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function C_(e){const t=eg(e);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ii&&MR(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function MR({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(e){var t;const n=e.auth,s=await e.getIdToken(),i=await Sl(e,Lu(n,{idToken:s}));Et(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?pT(r.providerUserInfo):[],a=NR(e.providerData,o),l=e.isAnonymous,c=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Vf(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function LR(e){const t=Hn(e);await Nu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function NR(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function pT(e){return e.map(t=>{var{providerId:n}=t,s=Jp(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(e,t){const n=await dT(e,{},async()=>{const s=Xl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await fT(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Xo(e.emulatorConfig.host)&&(l.credentials="include"),hT.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FR(e,t){return Ji(e,"POST","/v2/accounts:revokeToken",Qi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):C_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const n=C_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await VR(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Io;return s&&(Et(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(Et(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(Et(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t){Et(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Gn{constructor(t){var{uid:n,auth:s,stsTokenManager:i}=t,r=Jp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Sl(this,this.stsTokenManager.getToken(this.auth,t));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return RR(this,t)}reload(){return LR(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Gn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Nu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Ys(this.auth));const t=await this.getIdToken();return await Sl(this,DR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,i,r,o,a,l,c,u;const d=(s=n.displayName)!==null&&s!==void 0?s:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,M=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:b,isAnonymous:R,providerData:L,stsTokenManager:I}=n;Et(E&&I,t,"internal-error");const w=Io.fromJSON(this.name,I);Et(typeof E=="string",t,"internal-error"),fi(d,t.name),fi(f,t.name),Et(typeof b=="boolean",t,"internal-error"),Et(typeof R=="boolean",t,"internal-error"),fi(p,t.name),fi(m,t.name),fi(_,t.name),fi(y,t.name),fi(x,t.name),fi(M,t.name);const T=new Gn({uid:E,auth:t,email:f,emailVerified:b,displayName:d,isAnonymous:R,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:w,createdAt:x,lastLoginAt:M});return L&&Array.isArray(L)&&(T.providerData=L.map(k=>Object.assign({},k))),y&&(T._redirectEventId=y),T}static async _fromIdTokenResponse(t,n,s=!1){const i=new Io;i.updateFromServerResponse(n);const r=new Gn({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Nu(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];Et(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?pT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),a=new Io;a.updateFromIdToken(s);const l=new Gn({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Vf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new Map;function Hs(e){Qs(e instanceof Function,"Expected a class definition");let t=P_.get(e);return t?(Qs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,P_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}gT.type="NONE";const k_=gT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(e,t,n){return`firebase:${e}:${t}:${n}`}class So{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=au(this.userKey,i.apiKey,r),this.fullPersistenceKey=au("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Lu(this.auth,{idToken:t}).catch(()=>{});return n?Gn._fromGetAccountInfoResponse(this.auth,n,t):null}return Gn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new So(Hs(k_),t,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||Hs(k_);const o=au(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await Lu(t,{idToken:u}).catch(()=>{});if(!f)break;d=await Gn._fromGetAccountInfoResponse(t,f,u)}else d=Gn._fromJSON(t,u);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new So(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new So(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wT(t))return"Blackberry";if(TT(t))return"Webos";if(vT(t))return"Safari";if((t.includes("chrome/")||_T(t))&&!t.includes("edge/"))return"Chrome";if(bT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function mT(e=rn()){return/firefox\//i.test(e)}function vT(e=rn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _T(e=rn()){return/crios\//i.test(e)}function yT(e=rn()){return/iemobile/i.test(e)}function bT(e=rn()){return/android/i.test(e)}function wT(e=rn()){return/blackberry/i.test(e)}function TT(e=rn()){return/webos/i.test(e)}function ng(e=rn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $R(e=rn()){var t;return ng(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function BR(){return Jk()&&document.documentMode===10}function ET(e=rn()){return ng(e)||bT(e)||TT(e)||wT(e)||/windows phone/i.test(e)||yT(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(e,t=[]){let n;switch(e){case"Browser":n=D_(rn());break;case"Worker":n=`${D_(rn())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(e,t={}){return Ji(e,"GET","/v2/passwordPolicy",Qi(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=6;class zR{constructor(t){var n,s,i,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:HR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,i,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new UR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hs(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await So.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Lu(this,{idToken:t}),s=await Gn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Nu(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ER()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Mn(this.app))return Promise.reject(Ys(this));const n=t?Hn(t):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Mn(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await jR(this),n=new zR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await FR(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hs(t)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[Hs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&bR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ur(e){return Hn(e)}class R_{constructor(t){this.auth=t,this.observer=null,this.addObserver=oD(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YR(e){Bh=e}function ST(e){return Bh.loadJS(e)}function qR(){return Bh.recaptchaEnterpriseScript}function KR(){return Bh.gapiScript}function GR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class XR{constructor(){this.enterprise=new QR}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class QR{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const JR="recaptcha-enterprise",AT="NO_RECAPTCHA";class ZR{constructor(t){this.type=JR,this.auth=Ur(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{kR(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new PR(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;x_(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(AT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XR().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&x_(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=qR();l.length!==0&&(l+=a),ST(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ia(e,t,n,s=!1,i=!1){const r=new ZR(e);let o;if(i)o=AT;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ff(e,t,n,s,i){var r,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ia(e,t,n,n==="getOobCode");return s(e,a)}else return s(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ia(e,t,n,n==="getOobCode");return s(e,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=e._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Ia(e,t,n);return s(e,a).catch(async l=>{var c;if(((c=e._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Ia(e,t,n,!1,!0);return s(e,u)}return Promise.reject(l)})}else{const a=await Ia(e,t,n,!1,!0);return s(e,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(e,t){const n=Qp(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(kr(r,t??{}))return i;es(i,"already-initialized")}return n.initialize({options:t})}function eM(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Hs);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function nM(e,t,n){const s=Ur(e);Et(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),r=xT(t),{host:o,port:a}=sM(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(kr(c,s.config.emulator)&&kr(u,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,Xo(o)?(tT(`${r}//${o}${l}`),eT("Auth",!0)):i||iM()}function xT(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sM(e){const t=xT(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:M_(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:M_(o)}}}function M_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function iM(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(t){return js("not implemented")}_linkToIdToken(t,n){return js("not implemented")}_getReauthenticationResolver(t){return js("not implemented")}}async function rM(e,t){return Ji(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(e,t){return Jl(e,"POST","/v1/accounts:signInWithPassword",Qi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(e,t){return Jl(e,"POST","/v1/accounts:signInWithEmailLink",Qi(e,t))}async function lM(e,t){return Jl(e,"POST","/v1/accounts:signInWithEmailLink",Qi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends sg{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new Al(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Al(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ff(t,n,"signInWithPassword",oM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return aM(t,{email:this._email,oobCode:this._password});default:es(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ff(t,s,"signUpPassword",rM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lM(t,{idToken:n,email:this._email,oobCode:this._password});default:es(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(e,t){return Jl(e,"POST","/v1/accounts:signInWithIdp",Qi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="http://localhost";class Rr extends sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Rr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=n,r=Jp(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Rr(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ao(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ao(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ao(t,n)}buildRequest(){const t={requestUri:cM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Xl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hM(e){const t=Oa(La(e)).link,n=t?Oa(La(t)).deep_link_id:null,s=Oa(La(e)).deep_link_id;return(s?Oa(La(s)).link:null)||s||n||t||e}class ig{constructor(t){var n,s,i,r,o,a;const l=Oa(La(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,d=uM((i=l.mode)!==null&&i!==void 0?i:null);Et(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=hM(t);try{return new ig(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(t,n){return Al._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=ig.parseLink(n);return Et(s,"argument-error"),Al._fromEmailAndCode(t,s.code,s.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends CT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Zl{constructor(){super("facebook.com")}static credential(t){return Rr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bi.credentialFromTaggedObject(t)}static credentialFromError(t){return bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bi.credential(t.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Zl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Rr._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wi.credentialFromTaggedObject(t)}static credentialFromError(t){return wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return wi.credential(n,s)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Zl{constructor(){super("github.com")}static credential(t){return Rr._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ti.credentialFromTaggedObject(t)}static credentialFromError(t){return Ti.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ti.credential(t.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Zl{constructor(){super("twitter.com")}static credential(t,n){return Rr._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ei.credentialFromTaggedObject(t)}static credentialFromError(t){return Ei.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ei.credential(n,s)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(e,t){return Jl(e,"POST","/v1/accounts:signUp",Qi(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await Gn._fromIdTokenResponse(t,s,i),o=O_(s);return new Mr({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=O_(s);return new Mr({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function O_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends ii{constructor(t,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Vu.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new Vu(t,n,s,i)}}function PT(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Vu._fromErrorAndOperation(e,r,t,s):r})}async function fM(e,t,n=!1){const s=await Sl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Mr._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(e,t,n=!1){const{auth:s}=e;if(Mn(s.app))return Promise.reject(Ys(s));const i="reauthenticate";try{const r=await Sl(e,PT(s,i,t,e),n);Et(r.idToken,s,"internal-error");const o=eg(r.idToken);Et(o,s,"internal-error");const{sub:a}=o;return Et(e.uid===a,s,"user-mismatch"),Mr._forOperation(e,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&es(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(e,t,n=!1){if(Mn(e.app))return Promise.reject(Ys(e));const s="signIn",i=await PT(e,s,t),r=await Mr._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function gM(e,t){return kT(Ur(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(e){const t=Ur(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function mM(e,t,n){if(Mn(e.app))return Promise.reject(Ys(e));const s=Ur(e),o=await Ff(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dM,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&DT(e),l}),a=await Mr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function vM(e,t,n){return Mn(e.app)?Promise.reject(Ys(e)):gM(Hn(e),Jo.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&DT(e),s})}function _M(e,t,n,s){return Hn(e).onIdTokenChanged(t,n,s)}function yM(e,t,n){return Hn(e).beforeAuthStateChanged(t,n)}function bM(e){return Hn(e).signOut()}const Fu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fu,"1"),this.storage.removeItem(Fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=1e3,TM=10;class MT extends RT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ET(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);BR()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,TM):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},wM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}MT.type="LOCAL";const EM=MT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends RT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}OT.type="SESSION";const LT=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Uh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await IM(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=rg("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(){return window}function AM(e){ps().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){return typeof ps().WorkerGlobalScope<"u"&&typeof ps().importScripts=="function"}async function xM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CM(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function PM(){return NT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firebaseLocalStorageDb",kM=1,$u="firebaseLocalStorage",FT="fbase_key";class tc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jh(e,t){return e.transaction([$u],t?"readwrite":"readonly").objectStore($u)}function DM(){const e=indexedDB.deleteDatabase(VT);return new tc(e).toPromise()}function $f(){const e=indexedDB.open(VT,kM);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore($u,{keyPath:FT})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains($u)?t(s):(s.close(),await DM(),t(await $f()))})})}async function L_(e,t,n){const s=jh(e,!0).put({[FT]:t,value:n});return new tc(s).toPromise()}async function RM(e,t){const n=jh(e,!1).get(t),s=await new tc(n).toPromise();return s===void 0?null:s.value}function N_(e,t){const n=jh(e,!0).delete(t);return new tc(n).toPromise()}const MM=800,OM=3;class $T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $f(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>OM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(PM()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await xM(),!this.activeServiceWorker)return;this.sender=new SM(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||CM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $f();return await L_(t,Fu,"1"),await N_(t,Fu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>L_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>RM(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>N_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=jh(i,!1).getAll();return new tc(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$T.type="LOCAL";const LM=$T;new Ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(e,t){return t?Hs(t):(Et(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends sg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ao(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ao(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ao(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function VM(e){return kT(e.auth,new og(e),e.bypassAuthState)}function FM(e){const{auth:t,user:n}=e;return Et(n,t,"internal-error"),pM(n,new og(e),e.bypassAuthState)}async function $M(e){const{auth:t,user:n}=e;return Et(n,t,"internal-error"),fM(n,new og(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return VM;case"linkViaPopup":case"linkViaRedirect":return $M;case"reauthViaPopup":case"reauthViaRedirect":return FM;default:es(this.auth,"internal-error")}}resolve(t){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new Ql(2e3,1e4);class mo extends BT{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){Qs(this.filter.length===1,"Popup operations only handle one event");const t=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,BM.get())};t()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="pendingRedirect",lu=new Map;class jM extends BT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=lu.get(this.auth._key());if(!t){try{const s=await HM(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}lu.set(this.auth._key(),t)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HM(e,t){const n=YM(t),s=WM(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function zM(e,t){lu.set(e._key(),t)}function WM(e){return Hs(e._redirectPersistence)}function YM(e){return au(UM,e.config.apiKey,e.name)}async function qM(e,t,n=!1){if(Mn(e.app))return Promise.reject(Ys(e));const s=Ur(e),i=NM(s,t),o=await new jM(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=10*60*1e3;class GM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!XM(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!UT(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(fs(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=KM&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(t))}saveEventToCache(t){this.cachedEventUids.add(V_(t)),this.lastProcessedEventTime=Date.now()}}function V_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function UT({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function XM(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UT(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(e,t={}){return Ji(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZM=/^https?/;async function tO(e){if(e.config.emulator)return;const{authorizedDomains:t}=await QM(e);for(const n of t)try{if(eO(n))return}catch{}es(e,"unauthorized-domain")}function eO(e){const t=Nf(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!ZM.test(n))return!1;if(JM.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Ql(3e4,6e4);function F_(){const e=ps().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function sO(e){return new Promise((t,n)=>{var s,i,r;function o(){F_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{F_(),n(fs(e,"network-request-failed"))},timeout:nO.get()})}if(!((i=(s=ps().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((r=ps().gapi)===null||r===void 0)&&r.load)o();else{const a=GR("iframefcb");return ps()[a]=()=>{gapi.load?o():n(fs(e,"network-request-failed"))},ST(`${KR()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw cu=null,t})}let cu=null;function iO(e){return cu=cu||sO(e),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new Ql(5e3,15e3),oO="__/auth/iframe",aO="emulator/auth/iframe",lO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uO(e){const t=e.config;Et(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tg(t,aO):`https://${e.config.authDomain}/${oO}`,s={apiKey:t.apiKey,appName:e.name,v:Qo},i=cO.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Xl(s).slice(1)}`}async function hO(e){const t=await iO(e),n=ps().gapi;return Et(n,e,"internal-error"),t.open({where:document.body,url:uO(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lO,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=fs(e,"network-request-failed"),a=ps().setTimeout(()=>{r(o)},rO.get());function l(){ps().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fO=500,pO=600,gO="_blank",mO="http://localhost";class $_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vO(e,t,n,s=fO,i=pO){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dO),{width:s.toString(),height:i.toString(),top:r,left:o}),c=rn().toLowerCase();n&&(a=_T(c)?gO:n),mT(c)&&(t=t||mO,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if($R(c)&&a!=="_self")return _O(t||"",a),new $_(null);const d=window.open(t||"",a,u);Et(d,e,"popup-blocked");try{d.focus()}catch{}return new $_(d)}function _O(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="__/auth/handler",bO="emulator/auth/handler",wO=encodeURIComponent("fac");async function B_(e,t,n,s,i,r){Et(e.config.authDomain,e,"auth-domain-config-required"),Et(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Qo,eventId:i};if(t instanceof CT){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",rD(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,d]of Object.entries(r||{}))o[u]=d}if(t instanceof Zl){const u=t.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${wO}=${encodeURIComponent(l)}`:"";return`${TO(e)}?${Xl(a).slice(1)}${c}`}function TO({config:e}){return e.emulator?tg(e,bO):`https://${e.authDomain}/${yO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class EO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LT,this._completeRedirectFn=qM,this._overrideRedirectResult=zM}async _openPopup(t,n,s,i){var r;Qs((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await B_(t,n,s,Nf(),i);return vO(t,o,rg())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await B_(t,n,s,Nf(),i);return AM(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(Qs(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await hO(t),s=new GM(t);return n.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(qd,{type:qd},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[qd];o!==void 0&&n(!!o),es(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ET()||vT()||ng()}}const IO=EO;var U_="@firebase/auth",j_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xO(e){Oo(new Dr("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Et(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(e)},c=new WR(s,i,r,l);return eM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Oo(new Dr("auth-internal",t=>{const n=Ur(t.getProvider("auth").getImmediate());return(s=>new SO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(U_,j_,AO(e)),Oi(U_,j_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=5*60,PO=Z1("authIdTokenMaxAge")||CO;let H_=null;const kO=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>PO)return;const i=n==null?void 0:n.token;H_!==i&&(H_=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DO(e=rT()){const t=Qp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=tM(e,{popupRedirectResolver:IO,persistence:[LM,EM,LT]}),s=Z1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=kO(r.toString());yM(n,o,()=>o(n.currentUser)),_M(n,a=>o(a))}}const i=Q1("auth");return i&&nM(n,`http://${i}`),n}function RO(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}YR({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=fs("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",RO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xO("Browser");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,jT;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function T(){}T.prototype=w.prototype,I.D=w.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(k,S,P){for(var C=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)C[ot-2]=arguments[ot];return w.prototype[S].apply(k,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,T){T||(T=0);var k=Array(16);if(typeof w=="string")for(var S=0;16>S;++S)k[S]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(S=0;16>S;++S)k[S]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=I.g[0],T=I.g[1],S=I.g[2];var P=I.g[3],C=w+(P^T&(S^P))+k[0]+3614090360&4294967295;w=T+(C<<7&4294967295|C>>>25),C=P+(S^w&(T^S))+k[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=S+(T^P&(w^T))+k[2]+606105819&4294967295,S=P+(C<<17&4294967295|C>>>15),C=T+(w^S&(P^w))+k[3]+3250441966&4294967295,T=S+(C<<22&4294967295|C>>>10),C=w+(P^T&(S^P))+k[4]+4118548399&4294967295,w=T+(C<<7&4294967295|C>>>25),C=P+(S^w&(T^S))+k[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=S+(T^P&(w^T))+k[6]+2821735955&4294967295,S=P+(C<<17&4294967295|C>>>15),C=T+(w^S&(P^w))+k[7]+4249261313&4294967295,T=S+(C<<22&4294967295|C>>>10),C=w+(P^T&(S^P))+k[8]+1770035416&4294967295,w=T+(C<<7&4294967295|C>>>25),C=P+(S^w&(T^S))+k[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=S+(T^P&(w^T))+k[10]+4294925233&4294967295,S=P+(C<<17&4294967295|C>>>15),C=T+(w^S&(P^w))+k[11]+2304563134&4294967295,T=S+(C<<22&4294967295|C>>>10),C=w+(P^T&(S^P))+k[12]+1804603682&4294967295,w=T+(C<<7&4294967295|C>>>25),C=P+(S^w&(T^S))+k[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=S+(T^P&(w^T))+k[14]+2792965006&4294967295,S=P+(C<<17&4294967295|C>>>15),C=T+(w^S&(P^w))+k[15]+1236535329&4294967295,T=S+(C<<22&4294967295|C>>>10),C=w+(S^P&(T^S))+k[1]+4129170786&4294967295,w=T+(C<<5&4294967295|C>>>27),C=P+(T^S&(w^T))+k[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=S+(w^T&(P^w))+k[11]+643717713&4294967295,S=P+(C<<14&4294967295|C>>>18),C=T+(P^w&(S^P))+k[0]+3921069994&4294967295,T=S+(C<<20&4294967295|C>>>12),C=w+(S^P&(T^S))+k[5]+3593408605&4294967295,w=T+(C<<5&4294967295|C>>>27),C=P+(T^S&(w^T))+k[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=S+(w^T&(P^w))+k[15]+3634488961&4294967295,S=P+(C<<14&4294967295|C>>>18),C=T+(P^w&(S^P))+k[4]+3889429448&4294967295,T=S+(C<<20&4294967295|C>>>12),C=w+(S^P&(T^S))+k[9]+568446438&4294967295,w=T+(C<<5&4294967295|C>>>27),C=P+(T^S&(w^T))+k[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=S+(w^T&(P^w))+k[3]+4107603335&4294967295,S=P+(C<<14&4294967295|C>>>18),C=T+(P^w&(S^P))+k[8]+1163531501&4294967295,T=S+(C<<20&4294967295|C>>>12),C=w+(S^P&(T^S))+k[13]+2850285829&4294967295,w=T+(C<<5&4294967295|C>>>27),C=P+(T^S&(w^T))+k[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=S+(w^T&(P^w))+k[7]+1735328473&4294967295,S=P+(C<<14&4294967295|C>>>18),C=T+(P^w&(S^P))+k[12]+2368359562&4294967295,T=S+(C<<20&4294967295|C>>>12),C=w+(T^S^P)+k[5]+4294588738&4294967295,w=T+(C<<4&4294967295|C>>>28),C=P+(w^T^S)+k[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=S+(P^w^T)+k[11]+1839030562&4294967295,S=P+(C<<16&4294967295|C>>>16),C=T+(S^P^w)+k[14]+4259657740&4294967295,T=S+(C<<23&4294967295|C>>>9),C=w+(T^S^P)+k[1]+2763975236&4294967295,w=T+(C<<4&4294967295|C>>>28),C=P+(w^T^S)+k[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=S+(P^w^T)+k[7]+4139469664&4294967295,S=P+(C<<16&4294967295|C>>>16),C=T+(S^P^w)+k[10]+3200236656&4294967295,T=S+(C<<23&4294967295|C>>>9),C=w+(T^S^P)+k[13]+681279174&4294967295,w=T+(C<<4&4294967295|C>>>28),C=P+(w^T^S)+k[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=S+(P^w^T)+k[3]+3572445317&4294967295,S=P+(C<<16&4294967295|C>>>16),C=T+(S^P^w)+k[6]+76029189&4294967295,T=S+(C<<23&4294967295|C>>>9),C=w+(T^S^P)+k[9]+3654602809&4294967295,w=T+(C<<4&4294967295|C>>>28),C=P+(w^T^S)+k[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=S+(P^w^T)+k[15]+530742520&4294967295,S=P+(C<<16&4294967295|C>>>16),C=T+(S^P^w)+k[2]+3299628645&4294967295,T=S+(C<<23&4294967295|C>>>9),C=w+(S^(T|~P))+k[0]+4096336452&4294967295,w=T+(C<<6&4294967295|C>>>26),C=P+(T^(w|~S))+k[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=S+(w^(P|~T))+k[14]+2878612391&4294967295,S=P+(C<<15&4294967295|C>>>17),C=T+(P^(S|~w))+k[5]+4237533241&4294967295,T=S+(C<<21&4294967295|C>>>11),C=w+(S^(T|~P))+k[12]+1700485571&4294967295,w=T+(C<<6&4294967295|C>>>26),C=P+(T^(w|~S))+k[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=S+(w^(P|~T))+k[10]+4293915773&4294967295,S=P+(C<<15&4294967295|C>>>17),C=T+(P^(S|~w))+k[1]+2240044497&4294967295,T=S+(C<<21&4294967295|C>>>11),C=w+(S^(T|~P))+k[8]+1873313359&4294967295,w=T+(C<<6&4294967295|C>>>26),C=P+(T^(w|~S))+k[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=S+(w^(P|~T))+k[6]+2734768916&4294967295,S=P+(C<<15&4294967295|C>>>17),C=T+(P^(S|~w))+k[13]+1309151649&4294967295,T=S+(C<<21&4294967295|C>>>11),C=w+(S^(T|~P))+k[4]+4149444226&4294967295,w=T+(C<<6&4294967295|C>>>26),C=P+(T^(w|~S))+k[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=S+(w^(P|~T))+k[2]+718787259&4294967295,S=P+(C<<15&4294967295|C>>>17),C=T+(P^(S|~w))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+P&4294967295}s.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var T=w-this.blockSize,k=this.B,S=this.h,P=0;P<w;){if(S==0)for(;P<=T;)i(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(k[S++]=I.charCodeAt(P++),S==this.blockSize){i(this,k),S=0;break}}else for(;P<w;)if(k[S++]=I[P++],S==this.blockSize){i(this,k),S=0;break}}this.h=S,this.o+=w},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var T=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=T&255,T/=256;for(this.u(I),I=Array(16),w=T=0;4>w;++w)for(var k=0;32>k;k+=8)I[T++]=this.g[w]>>>k&255;return I};function r(I,w){var T=a;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=w(I)}function o(I,w){this.h=w;for(var T=[],k=!0,S=I.length-1;0<=S;S--){var P=I[S]|0;k&&P==w||(T[S]=P,k=!1)}this.g=T}var a={};function l(I){return-128<=I&&128>I?r(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return y(c(-I));for(var w=[],T=1,k=0;I>=T;k++)w[k]=I/T|0,T*=4294967296;return new o(w,0)}function u(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return y(u(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(w,8)),k=d,S=0;S<I.length;S+=8){var P=Math.min(8,I.length-S),C=parseInt(I.substring(S,S+P),w);8>P?(P=c(Math.pow(w,P)),k=k.j(P).add(c(C))):(k=k.j(T),k=k.add(c(C)))}return k}var d=l(0),f=l(1),p=l(16777216);e=o.prototype,e.m=function(){if(_(this))return-y(this).m();for(var I=0,w=1,T=0;T<this.g.length;T++){var k=this.i(T);I+=(0<=k?k:4294967296+k)*w,w*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(m(this))return"0";if(_(this))return"-"+y(this).toString(I);for(var w=c(Math.pow(I,6)),T=this,k="";;){var S=b(T,w).g;T=x(T,S.j(w));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=S,m(T))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function m(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function _(I){return I.h==-1}e.l=function(I){return I=x(this,I),_(I)?-1:m(I)?0:1};function y(I){for(var w=I.g.length,T=[],k=0;k<w;k++)T[k]=~I.g[k];return new o(T,~I.h).add(f)}e.abs=function(){return _(this)?y(this):this},e.add=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],k=0,S=0;S<=w;S++){var P=k+(this.i(S)&65535)+(I.i(S)&65535),C=(P>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);k=C>>>16,P&=65535,C&=65535,T[S]=C<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(I,w){return I.add(y(w))}e.j=function(I){if(m(this)||m(I))return d;if(_(this))return _(I)?y(this).j(y(I)):y(y(this).j(I));if(_(I))return y(this.j(y(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,T=[],k=0;k<2*w;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var S=0;S<I.g.length;S++){var P=this.i(k)>>>16,C=this.i(k)&65535,ot=I.i(S)>>>16,K=I.i(S)&65535;T[2*k+2*S]+=C*K,M(T,2*k+2*S),T[2*k+2*S+1]+=P*K,M(T,2*k+2*S+1),T[2*k+2*S+1]+=C*ot,M(T,2*k+2*S+1),T[2*k+2*S+2]+=P*ot,M(T,2*k+2*S+2)}for(k=0;k<w;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=w;k<2*w;k++)T[k]=0;return new o(T,0)};function M(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function E(I,w){this.g=I,this.h=w}function b(I,w){if(m(w))throw Error("division by zero");if(m(I))return new E(d,d);if(_(I))return w=b(y(I),w),new E(y(w.g),y(w.h));if(_(w))return w=b(I,y(w)),new E(y(w.g),w.h);if(30<I.g.length){if(_(I)||_(w))throw Error("slowDivide_ only works with positive integers.");for(var T=f,k=w;0>=k.l(I);)T=R(T),k=R(k);var S=L(T,1),P=L(k,1);for(k=L(k,2),T=L(T,2);!m(k);){var C=P.add(k);0>=C.l(I)&&(S=S.add(T),P=C),k=L(k,1),T=L(T,1)}return w=x(I,S.j(w)),new E(S,w)}for(S=d;0<=I.l(w);){for(T=Math.max(1,Math.floor(I.m()/w.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=c(T),C=P.j(w);_(C)||0<C.l(I);)T-=k,P=c(T),C=P.j(w);m(P)&&(P=f),S=S.add(P),I=x(I,C)}return new E(S,I)}e.A=function(I){return b(this,I).h},e.and=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],k=0;k<w;k++)T[k]=this.i(k)&I.i(k);return new o(T,this.h&I.h)},e.or=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],k=0;k<w;k++)T[k]=this.i(k)|I.i(k);return new o(T,this.h|I.h)},e.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),T=[],k=0;k<w;k++)T[k]=this.i(k)^I.i(k);return new o(T,this.h^I.h)};function R(I){for(var w=I.g.length+1,T=[],k=0;k<w;k++)T[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(T,I.h)}function L(I,w){var T=w>>5;w%=32;for(var k=I.g.length-T,S=[],P=0;P<k;P++)S[P]=0<w?I.i(P+T)>>>w|I.i(P+T+1)<<32-w:I.i(P+T);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,jT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Li=o}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HT,Na,zT,uu,Bf,WT,YT,qT;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,v){return h==Array.prototype||h==Object.prototype||(h[g]=v.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dc=="object"&&Dc];for(var g=0;g<h.length;++g){var v=h[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function i(h,g){if(g)t:{var v=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var N=h[A];if(!(N in v))break t;v=v[N]}h=h[h.length-1],A=v[h],g=g(A),g!=A&&g!=null&&t(v,h,{configurable:!0,writable:!0,value:g})}}function r(h,g){h instanceof String&&(h+="");var v=0,A=!1,N={next:function(){if(!A&&v<h.length){var F=v++;return{value:g(F,h[F]),done:!1}}return A=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(h){return h||function(){return r(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,v){return h.call.apply(h.bind,arguments)}function d(h,g,v){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,A),h.apply(g,N)}}return function(){return h.apply(g,arguments)}}function f(h,g,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(h,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function m(h,g){function v(){}v.prototype=g.prototype,h.aa=g.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(A,N,F){for(var rt=Array(arguments.length-2),se=2;se<arguments.length;se++)rt[se-2]=arguments[se];return g.prototype[N].apply(A,rt)}}function _(h){const g=h.length;if(0<g){const v=Array(g);for(let A=0;A<g;A++)v[A]=h[A];return v}return[]}function y(h,g){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(l(A)){const N=h.length||0,F=A.length||0;h.length=N+F;for(let rt=0;rt<F;rt++)h[N+rt]=A[rt]}else h.push(A)}}class x{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function b(h){return b[" "](h),h}b[" "]=function(){};var R=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function L(h,g,v){for(const A in h)g.call(v,h[A],A,h)}function I(h,g){for(const v in h)g.call(void 0,h[v],v,h)}function w(h){const g={};for(const v in h)g[v]=h[v];return g}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,g){let v,A;for(let N=1;N<arguments.length;N++){A=arguments[N];for(v in A)h[v]=A[v];for(let F=0;F<T.length;F++)v=T[F],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function S(h){var g=1;h=h.split(":");const v=[];for(;0<g&&h.length;)v.push(h.shift()),g--;return h.length&&v.push(h.join(":")),v}function P(h){a.setTimeout(()=>{throw h},0)}function C(){var h=Vt;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class ot{constructor(){this.h=this.g=null}add(g,v){const A=K.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var K=new x(()=>new lt,h=>h.reset());class lt{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let at,gt=!1,Vt=new ot,W=()=>{const h=a.Promise.resolve(void 0);at=()=>{h.then(St)}};var St=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){P(v)}var g=K;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}gt=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return h}();function qt(h,g){if(kt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(R){t:{try{b(g.nodeName);var N=!0;break t}catch{}N=!1}N||(g=null)}}else v=="mouseover"?g=h.fromElement:v=="mouseout"&&(g=h.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:jt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&qt.aa.h.call(this)}}m(qt,kt);var jt={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),it=0;function Z(h,g,v,A,N){this.listener=h,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=N,this.key=++it,this.da=this.fa=!1}function ct(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ot(h){this.src=h,this.g={},this.h=0}Ot.prototype.add=function(h,g,v,A,N){var F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);var rt=D(h,g,A,N);return-1<rt?(g=h[rt],v||(g.fa=!1)):(g=new Z(g,this.src,F,!!A,N),g.fa=v,h.push(g)),g};function Wt(h,g){var v=g.type;if(v in h.g){var A=h.g[v],N=Array.prototype.indexOf.call(A,g,void 0),F;(F=0<=N)&&Array.prototype.splice.call(A,N,1),F&&(ct(g),h.g[v].length==0&&(delete h.g[v],h.h--))}}function D(h,g,v,A){for(var N=0;N<h.length;++N){var F=h[N];if(!F.da&&F.listener==g&&F.capture==!!v&&F.ha==A)return N}return-1}var O="closure_lm_"+(1e6*Math.random()|0),V={};function j(h,g,v,A,N){if(A&&A.once)return st(h,g,v,A,N);if(Array.isArray(g)){for(var F=0;F<g.length;F++)j(h,g[F],v,A,N);return null}return v=yt(v),h&&h[$]?h.K(g,v,c(A)?!!A.capture:!!A,N):B(h,g,v,!1,A,N)}function B(h,g,v,A,N,F){if(!g)throw Error("Invalid event type");var rt=c(N)?!!N.capture:!!N,se=nt(h);if(se||(h[O]=se=new Ot(h)),v=se.add(g,v,A,rt,F),v.proxy)return v;if(A=z(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)Mt||(N=rt),N===void 0&&(N=!1),h.addEventListener(g.toString(),A,N);else if(h.attachEvent)h.attachEvent(Y(g.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function z(){function h(v){return g.call(h.src,h.listener,v)}const g=pt;return h}function st(h,g,v,A,N){if(Array.isArray(g)){for(var F=0;F<g.length;F++)st(h,g[F],v,A,N);return null}return v=yt(v),h&&h[$]?h.L(g,v,c(A)?!!A.capture:!!A,N):B(h,g,v,!0,A,N)}function Q(h,g,v,A,N){if(Array.isArray(g))for(var F=0;F<g.length;F++)Q(h,g[F],v,A,N);else A=c(A)?!!A.capture:!!A,v=yt(v),h&&h[$]?(h=h.i,g=String(g).toString(),g in h.g&&(F=h.g[g],v=D(F,v,A,N),-1<v&&(ct(F[v]),Array.prototype.splice.call(F,v,1),F.length==0&&(delete h.g[g],h.h--)))):h&&(h=nt(h))&&(g=h.g[g.toString()],h=-1,g&&(h=D(g,v,A,N)),(v=-1<h?g[h]:null)&&J(v))}function J(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[$])Wt(g.i,h);else{var v=h.type,A=h.proxy;g.removeEventListener?g.removeEventListener(v,A,h.capture):g.detachEvent?g.detachEvent(Y(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=nt(g))?(Wt(v,h),v.h==0&&(v.src=null,g[O]=null)):ct(h)}}}function Y(h){return h in V?V[h]:V[h]="on"+h}function pt(h,g){if(h.da)h=!0;else{g=new qt(g,this);var v=h.listener,A=h.ha||h.src;h.fa&&J(h),h=v.call(A,g)}return h}function nt(h){return h=h[O],h instanceof Ot?h:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(h){return typeof h=="function"?h:(h[dt]||(h[dt]=function(g){return h.handleEvent(g)}),h[dt])}function mt(){et.call(this),this.i=new Ot(this),this.M=this,this.F=null}m(mt,et),mt.prototype[$]=!0,mt.prototype.removeEventListener=function(h,g,v,A){Q(this,h,g,v,A)};function At(h,g){var v,A=h.F;if(A)for(v=[];A;A=A.F)v.push(A);if(h=h.M,A=g.type||g,typeof g=="string")g=new kt(g,h);else if(g instanceof kt)g.target=g.target||h;else{var N=g;g=new kt(A,h),k(g,N)}if(N=!0,v)for(var F=v.length-1;0<=F;F--){var rt=g.g=v[F];N=$t(rt,A,!0,g)&&N}if(rt=g.g=h,N=$t(rt,A,!0,g)&&N,N=$t(rt,A,!1,g)&&N,v)for(F=0;F<v.length;F++)rt=g.g=v[F],N=$t(rt,A,!1,g)&&N}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var v=h.g[g],A=0;A<v.length;A++)ct(v[A]);delete h.g[g],h.h--}}this.F=null},mt.prototype.K=function(h,g,v,A){return this.i.add(String(h),g,!1,v,A)},mt.prototype.L=function(h,g,v,A){return this.i.add(String(h),g,!0,v,A)};function $t(h,g,v,A){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var N=!0,F=0;F<g.length;++F){var rt=g[F];if(rt&&!rt.da&&rt.capture==v){var se=rt.listener,Be=rt.ha||rt.src;rt.fa&&Wt(h.i,rt),N=se.call(Be,A)!==!1&&N}}return N&&!A.defaultPrevented}function ke(h,g,v){if(typeof h=="function")v&&(h=f(h,v));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Te(h){h.g=ke(()=>{h.g=null,h.i&&(h.i=!1,Te(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class cn extends et{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(h){et.call(this),this.h=h,this.g={}}m(ye,et);var is=[];function er(h){L(h.g,function(g,v){this.g.hasOwnProperty(v)&&J(g)},h),h.g={}}ye.prototype.N=function(){ye.aa.N.call(this),er(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ie=a.JSON.stringify,H=a.JSON.parse,tt=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function xt(){}xt.prototype.h=null;function Gt(h){return h.h||(h.h=h.i())}function Se(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){kt.call(this,"d")}m(kn,kt);function Cs(){kt.call(this,"c")}m(Cs,kt);var Yn={},nr=null;function Jr(){return nr=nr||new mt}Yn.La="serverreachability";function Zr(h){kt.call(this,Yn.La,h)}m(Zr,kt);function ai(h){const g=Jr();At(g,new Zr(g))}Yn.STAT_EVENT="statevent";function hc(h,g){kt.call(this,Yn.STAT_EVENT,h),this.stat=g}m(hc,kt);function De(h){const g=Jr();At(g,new hc(g,h))}Yn.Ma="timingevent";function ha(h,g){kt.call(this,Yn.Ma,h),this.size=g}m(ha,kt);function sr(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function CA(h,g,v,A,N,F){h.info(function(){if(h.g)if(F)for(var rt="",se=F.split("&"),Be=0;Be<se.length;Be++){var Kt=se[Be].split("=");if(1<Kt.length){var qe=Kt[0];Kt=Kt[1];var Ke=qe.split("_");rt=2<=Ke.length&&Ke[1]=="type"?rt+(qe+"="+Kt+"&"):rt+(qe+"=redacted&")}}else rt=null;else rt=F;return"XMLHTTP REQ ("+A+") [attempt "+N+"]: "+g+`
`+v+`
`+rt})}function PA(h,g,v,A,N,F,rt){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+N+"]: "+g+`
`+v+`
`+F+" "+rt})}function to(h,g,v,A){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+DA(h,v)+(A?" "+A:"")})}function kA(h,g){h.info(function(){return"TIMEOUT: "+g})}da.prototype.info=function(){};function DA(h,g){if(!h.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var A=v[h];if(!(2>A.length)){var N=A[1];if(Array.isArray(N)&&!(1>N.length)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(var rt=1;rt<N.length;rt++)N[rt]=""}}}}return Ie(v)}catch{return g}}var dc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fd;function fc(){}m(fc,xt),fc.prototype.g=function(){return new XMLHttpRequest},fc.prototype.i=function(){return{}},fd=new fc;function li(h,g,v,A){this.j=h,this.i=g,this.l=v,this.R=A||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new km}function km(){this.i=null,this.g="",this.h=!1}var Dm={},pd={};function gd(h,g,v){h.L=1,h.v=vc(Ps(g)),h.m=v,h.P=!0,Rm(h,null)}function Rm(h,g){h.F=Date.now(),pc(h),h.A=Ps(h.v);var v=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),Ym(v.i,"t",A),h.C=0,v=h.j.J,h.h=new km,h.g=uv(h.j,v?g:null,!h.m),0<h.O&&(h.M=new cn(f(h.Y,h,h.g),h.O)),g=h.U,v=h.g,A=h.ca;var N="readystatechange";Array.isArray(N)||(N&&(is[0]=N.toString()),N=is);for(var F=0;F<N.length;F++){var rt=j(v,N[F],A||g.handleEvent,!1,g.h||g);if(!rt)break;g.g[rt.key]=rt}g=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),ai(),CA(h.i,h.u,h.A,h.l,h.R,h.m)}li.prototype.ca=function(h){h=h.target;const g=this.M;g&&ks(h)==3?g.j():this.Y(h)},li.prototype.Y=function(h){try{if(h==this.g)t:{const Ke=ks(this.g);var g=this.g.Ba();const so=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||Zm(this.g)))){this.J||Ke!=4||g==7||(g==8||0>=so?ai(3):ai(2)),md(this);var v=this.g.Z();this.X=v;e:if(Mm(this)){var A=Zm(this.g);h="";var N=A.length,F=ks(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),fa(this);var rt="";break e}this.h.i=new a.TextDecoder}for(g=0;g<N;g++)this.h.h=!0,h+=this.h.i.decode(A[g],{stream:!(F&&g==N-1)});A.length=0,this.h.g+=h,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=v==200,PA(this.i,this.u,this.A,this.l,this.R,Ke,v),this.o){if(this.T&&!this.K){e:{if(this.g){var se,Be=this.g;if((se=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(se)){var Kt=se;break e}}Kt=null}if(v=Kt)to(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,v);else{this.o=!1,this.s=3,De(12),ir(this),fa(this);break t}}if(this.P){v=!0;let qn;for(;!this.J&&this.C<rt.length;)if(qn=RA(this,rt),qn==pd){Ke==4&&(this.s=4,De(14),v=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Dm){this.s=4,De(15),to(this.i,this.l,rt,"[Invalid Chunk]"),v=!1;break}else to(this.i,this.l,qn,null),vd(this,qn);if(Mm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||rt.length!=0||this.h.h||(this.s=1,De(16),v=!1),this.o=this.o&&v,!v)to(this.i,this.l,rt,"[Invalid Chunked Response]"),ir(this),fa(this);else if(0<rt.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),Ed(qe),qe.M=!0,De(11))}}else to(this.i,this.l,rt,null),vd(this,rt);Ke==4&&ir(this),this.o&&!this.J&&(Ke==4?ov(this.j,this):(this.o=!1,pc(this)))}else GA(this.g),v==400&&0<rt.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),ir(this),fa(this)}}}catch{}finally{}};function Mm(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function RA(h,g){var v=h.C,A=g.indexOf(`
`,v);return A==-1?pd:(v=Number(g.substring(v,A)),isNaN(v)?Dm:(A+=1,A+v>g.length?pd:(g=g.slice(A,A+v),h.C=A+v,g)))}li.prototype.cancel=function(){this.J=!0,ir(this)};function pc(h){h.S=Date.now()+h.I,Om(h,h.I)}function Om(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=sr(f(h.ba,h),g)}function md(h){h.B&&(a.clearTimeout(h.B),h.B=null)}li.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(kA(this.i,this.A),this.L!=2&&(ai(),De(17)),ir(this),this.s=2,fa(this)):Om(this,this.S-h)};function fa(h){h.j.G==0||h.J||ov(h.j,h)}function ir(h){md(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,er(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function vd(h,g){try{var v=h.j;if(v.G!=0&&(v.g==h||_d(v.h,h))){if(!h.K&&_d(v.h,h)&&v.G==3){try{var A=v.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var N=A;if(N[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Ec(v),wc(v);else break t;Td(v),De(18)}}else v.za=N[1],0<v.za-v.T&&37500>N[2]&&v.F&&v.v==0&&!v.C&&(v.C=sr(f(v.Za,v),6e3));if(1>=Vm(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else or(v,11)}else if((h.K||v.g==h)&&Ec(v),!M(g))for(N=v.Da.g.parse(g),g=0;g<N.length;g++){let Kt=N[g];if(v.T=Kt[0],Kt=Kt[1],v.G==2)if(Kt[0]=="c"){v.K=Kt[1],v.ia=Kt[2];const qe=Kt[3];qe!=null&&(v.la=qe,v.j.info("VER="+v.la));const Ke=Kt[4];Ke!=null&&(v.Aa=Ke,v.j.info("SVER="+v.Aa));const so=Kt[5];so!=null&&typeof so=="number"&&0<so&&(A=1.5*so,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const qn=h.g;if(qn){const Sc=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sc){var F=A.h;F.g||Sc.indexOf("spdy")==-1&&Sc.indexOf("quic")==-1&&Sc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(yd(F,F.h),F.h=null))}if(A.D){const Id=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(A.ya=Id,he(A.I,A.D,Id))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var rt=h;if(A.qa=cv(A,A.J?A.ia:null,A.W),rt.K){Fm(A.h,rt);var se=rt,Be=A.L;Be&&(se.I=Be),se.B&&(md(se),pc(se)),A.g=rt}else iv(A);0<v.i.length&&Tc(v)}else Kt[0]!="stop"&&Kt[0]!="close"||or(v,7);else v.G==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?or(v,7):wd(v):Kt[0]!="noop"&&v.l&&v.l.ta(Kt),v.v=0)}}ai(4)}catch{}}var MA=class{constructor(h,g){this.g=h,this.map=g}};function Lm(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nm(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Vm(h){return h.h?1:h.g?h.g.size:0}function _d(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function yd(h,g){h.g?h.g.add(g):h.h=g}function Fm(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}Lm.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $m(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const v of h.g.values())g=g.concat(v.D);return g}return _(h.i)}function OA(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],v=h.length,A=0;A<v;A++)g.push(h[A]);return g}g=[],v=0;for(A in h)g[v++]=h[A];return g}function LA(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var v=0;v<h;v++)g.push(v);return g}g=[],v=0;for(const A in h)g[v++]=A;return g}}}function Bm(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var v=LA(h),A=OA(h),N=A.length,F=0;F<N;F++)g.call(void 0,A[F],v&&v[F],h)}var Um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NA(h,g){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var A=h[v].indexOf("="),N=null;if(0<=A){var F=h[v].substring(0,A);N=h[v].substring(A+1)}else F=h[v];g(F,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function rr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof rr){this.h=h.h,gc(this,h.j),this.o=h.o,this.g=h.g,mc(this,h.s),this.l=h.l;var g=h.i,v=new ma;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),jm(this,v),this.m=h.m}else h&&(g=String(h).match(Um))?(this.h=!1,gc(this,g[1]||"",!0),this.o=pa(g[2]||""),this.g=pa(g[3]||"",!0),mc(this,g[4]),this.l=pa(g[5]||"",!0),jm(this,g[6]||"",!0),this.m=pa(g[7]||"")):(this.h=!1,this.i=new ma(null,this.h))}rr.prototype.toString=function(){var h=[],g=this.j;g&&h.push(ga(g,Hm,!0),":");var v=this.g;return(v||g=="file")&&(h.push("//"),(g=this.o)&&h.push(ga(g,Hm,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ga(v,v.charAt(0)=="/"?$A:FA,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ga(v,UA)),h.join("")};function Ps(h){return new rr(h)}function gc(h,g,v){h.j=v?pa(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function mc(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function jm(h,g,v){g instanceof ma?(h.i=g,jA(h.i,h.h)):(v||(g=ga(g,BA)),h.i=new ma(g,h.h))}function he(h,g,v){h.i.set(g,v)}function vc(h){return he(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function pa(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ga(h,g,v){return typeof h=="string"?(h=encodeURI(h).replace(g,VA),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function VA(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Hm=/[#\/\?@]/g,FA=/[#\?:]/g,$A=/[#\?]/g,BA=/[#\?@]/g,UA=/#/g;function ma(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function ci(h){h.g||(h.g=new Map,h.h=0,h.i&&NA(h.i,function(g,v){h.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}e=ma.prototype,e.add=function(h,g){ci(this),this.i=null,h=eo(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(g),this.h+=1,this};function zm(h,g){ci(h),g=eo(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function Wm(h,g){return ci(h),g=eo(h,g),h.g.has(g)}e.forEach=function(h,g){ci(this),this.g.forEach(function(v,A){v.forEach(function(N){h.call(g,N,A,this)},this)},this)},e.na=function(){ci(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let A=0;A<g.length;A++){const N=h[A];for(let F=0;F<N.length;F++)v.push(g[A])}return v},e.V=function(h){ci(this);let g=[];if(typeof h=="string")Wm(this,h)&&(g=g.concat(this.g.get(eo(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)g=g.concat(h[v])}return g},e.set=function(h,g){return ci(this),this.i=null,h=eo(this,h),Wm(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},e.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function Ym(h,g,v){zm(h,g),0<v.length&&(h.i=null,h.g.set(eo(h,g),_(v)),h.h+=v.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var A=g[v];const F=encodeURIComponent(String(A)),rt=this.V(A);for(A=0;A<rt.length;A++){var N=F;rt[A]!==""&&(N+="="+encodeURIComponent(String(rt[A]))),h.push(N)}}return this.i=h.join("&")};function eo(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function jA(h,g){g&&!h.j&&(ci(h),h.i=null,h.g.forEach(function(v,A){var N=A.toLowerCase();A!=N&&(zm(this,A),Ym(this,N,v))},h)),h.j=g}function HA(h,g){const v=new da;if(a.Image){const A=new Image;A.onload=p(ui,v,"TestLoadImage: loaded",!0,g,A),A.onerror=p(ui,v,"TestLoadImage: error",!1,g,A),A.onabort=p(ui,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=p(ui,v,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else g(!1)}function zA(h,g){const v=new da,A=new AbortController,N=setTimeout(()=>{A.abort(),ui(v,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:A.signal}).then(F=>{clearTimeout(N),F.ok?ui(v,"TestPingServer: ok",!0,g):ui(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(N),ui(v,"TestPingServer: error",!1,g)})}function ui(h,g,v,A,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),A(v)}catch{}}function WA(){this.g=new tt}function YA(h,g,v){const A=v||"";try{Bm(h,function(N,F){let rt=N;c(N)&&(rt=Ie(N)),g.push(A+F+"="+encodeURIComponent(rt))})}catch(N){throw g.push(A+"type="+encodeURIComponent("_badmap")),N}}function _c(h){this.l=h.Ub||null,this.j=h.eb||!1}m(_c,xt),_c.prototype.g=function(){return new yc(this.l,this.j)},_c.prototype.i=function(h){return function(){return h}}({});function yc(h,g){mt.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(yc,mt),e=yc.prototype,e.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,_a(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qm(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qm(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?va(this):_a(this),this.readyState==3&&qm(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,va(this))},e.Qa=function(h){this.g&&(this.response=h,va(this))},e.ga=function(){this.g&&va(this)};function va(h){h.readyState=4,h.l=null,h.j=null,h.v=null,_a(h)}e.setRequestHeader=function(h,g){this.u.append(h,g)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=g.next();return h.join(`\r
`)};function _a(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Km(h){let g="";return L(h,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function bd(h,g,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Km(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):he(h,g,v))}function be(h){mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(be,mt);var qA=/^https?$/i,KA=["POST","PUT"];e=be.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fd.g(),this.v=this.o?Gt(this.o):Gt(fd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(F){Gm(this,F);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var N in A)v.set(N,A[N]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())v.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),N=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(KA,g,void 0))||A||N||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,rt]of v)this.g.setRequestHeader(F,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jm(this),this.u=!0,this.g.send(h),this.u=!1}catch(F){Gm(this,F)}};function Gm(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,Xm(h),bc(h)}function Xm(h){h.A||(h.A=!0,At(h,"complete"),At(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,At(this,"complete"),At(this,"abort"),bc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bc(this,!0)),be.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Qm(this):this.bb())},e.bb=function(){Qm(this)};function Qm(h){if(h.h&&typeof o<"u"&&(!h.v[1]||ks(h)!=4||h.Z()!=2)){if(h.u&&ks(h)==4)ke(h.Ea,0,h);else if(At(h,"readystatechange"),ks(h)==4){h.h=!1;try{const rt=h.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var A;if(A=rt===0){var N=String(h.D).match(Um)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),A=!qA.test(N?N.toLowerCase():"")}v=A}if(v)At(h,"complete"),At(h,"success");else{h.m=6;try{var F=2<ks(h)?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.Z()+"]",Xm(h)}}finally{bc(h)}}}}function bc(h,g){if(h.g){Jm(h);const v=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||At(h,"ready");try{v.onreadystatechange=A}catch{}}}function Jm(h){h.I&&(a.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ks(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ks(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),H(g)}};function Zm(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function GA(h){const g={};h=(h.g&&2<=ks(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(M(h[A]))continue;var v=S(h[A]);const N=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=g[N]||[];g[N]=F,F.push(v)}I(g,function(A){return A.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(h,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||g}function tv(h){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ya("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ya("baseRetryDelayMs",5e3,h),this.cb=ya("retryDelaySeedMs",1e4,h),this.Wa=ya("forwardChannelMaxRetries",2,h),this.wa=ya("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Lm(h&&h.concurrentRequestLimit),this.Da=new WA,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=tv.prototype,e.la=8,e.G=1,e.connect=function(h,g,v,A){De(0),this.W=h,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=cv(this,null,this.W),Tc(this)};function wd(h){if(ev(h),h.G==3){var g=h.U++,v=Ps(h.I);if(he(v,"SID",h.K),he(v,"RID",g),he(v,"TYPE","terminate"),ba(h,v),g=new li(h,h.j,g),g.L=2,g.v=vc(Ps(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=uv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),pc(g)}lv(h)}function wc(h){h.g&&(Ed(h),h.g.cancel(),h.g=null)}function ev(h){wc(h),h.u&&(a.clearTimeout(h.u),h.u=null),Ec(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Tc(h){if(!Nm(h.h)&&!h.s){h.s=!0;var g=h.Ga;at||W(),gt||(at(),gt=!0),Vt.add(g,h),h.B=0}}function XA(h,g){return Vm(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=sr(f(h.Ga,h,g),av(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const N=new li(this,this.j,h);let F=this.o;if(this.S&&(F?(F=w(F),k(F,this.S)):F=this.S),this.m!==null||this.O||(N.H=F,F=null),this.P)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=sv(this,N,g),v=Ps(this.I),he(v,"RID",h),he(v,"CVER",22),this.D&&he(v,"X-HTTP-Session-Id",this.D),ba(this,v),F&&(this.O?g="headers="+encodeURIComponent(String(Km(F)))+"&"+g:this.m&&bd(v,this.m,F)),yd(this.h,N),this.Ua&&he(v,"TYPE","init"),this.P?(he(v,"$req",g),he(v,"SID","null"),N.T=!0,gd(N,v,null)):gd(N,v,g),this.G=2}}else this.G==3&&(h?nv(this,h):this.i.length==0||Nm(this.h)||nv(this))};function nv(h,g){var v;g?v=g.l:v=h.U++;const A=Ps(h.I);he(A,"SID",h.K),he(A,"RID",v),he(A,"AID",h.T),ba(h,A),h.m&&h.o&&bd(A,h.m,h.o),v=new li(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),g&&(h.i=g.D.concat(h.i)),g=sv(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),yd(h.h,v),gd(v,A,g)}function ba(h,g){h.H&&L(h.H,function(v,A){he(g,A,v)}),h.l&&Bm({},function(v,A){he(g,A,v)})}function sv(h,g,v){v=Math.min(h.i.length,v);var A=h.l?f(h.l.Na,h.l,h):null;t:{var N=h.i;let F=-1;for(;;){const rt=["count="+v];F==-1?0<v?(F=N[0].g,rt.push("ofs="+F)):F=0:rt.push("ofs="+F);let se=!0;for(let Be=0;Be<v;Be++){let Kt=N[Be].g;const qe=N[Be].map;if(Kt-=F,0>Kt)F=Math.max(0,N[Be].g-100),se=!1;else try{YA(qe,rt,"req"+Kt+"_")}catch{A&&A(qe)}}if(se){A=rt.join("&");break t}}}return h=h.i.splice(0,v),g.D=h,A}function iv(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;at||W(),gt||(at(),gt=!0),Vt.add(g,h),h.v=0}}function Td(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=sr(f(h.Fa,h),av(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,rv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=sr(f(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),wc(this),rv(this))};function Ed(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function rv(h){h.g=new li(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=Ps(h.qa);he(g,"RID","rpc"),he(g,"SID",h.K),he(g,"AID",h.T),he(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&he(g,"TO",h.ja),he(g,"TYPE","xmlhttp"),ba(h,g),h.m&&h.o&&bd(g,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=vc(Ps(g)),v.m=null,v.P=!0,Rm(v,h)}e.Za=function(){this.C!=null&&(this.C=null,wc(this),Td(this),De(19))};function Ec(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function ov(h,g){var v=null;if(h.g==g){Ec(h),Ed(h),h.g=null;var A=2}else if(_d(h.h,g))v=g.D,Fm(h.h,g),A=1;else return;if(h.G!=0){if(g.o)if(A==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var N=h.B;A=Jr(),At(A,new ha(A,v)),Tc(h)}else iv(h);else if(N=g.s,N==3||N==0&&0<g.X||!(A==1&&XA(h,g)||A==2&&Td(h)))switch(v&&0<v.length&&(g=h.h,g.i=g.i.concat(v)),N){case 1:or(h,5);break;case 4:or(h,10);break;case 3:or(h,6);break;default:or(h,2)}}}function av(h,g){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*g}function or(h,g){if(h.j.info("Error code "+g),g==2){var v=f(h.fb,h),A=h.Xa;const N=!A;A=new rr(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gc(A,"https"),vc(A),N?HA(A.toString(),v):zA(A.toString(),v)}else De(2);h.G=0,h.l&&h.l.sa(g),lv(h),ev(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function lv(h){if(h.G=0,h.ka=[],h.l){const g=$m(h.h);(g.length!=0||h.i.length!=0)&&(y(h.ka,g),y(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function cv(h,g,v){var A=v instanceof rr?Ps(v):new rr(v);if(A.g!="")g&&(A.g=g+"."+A.g),mc(A,A.s);else{var N=a.location;A=N.protocol,g=g?g+"."+N.hostname:N.hostname,N=+N.port;var F=new rr(null);A&&gc(F,A),g&&(F.g=g),N&&mc(F,N),v&&(F.l=v),A=F}return v=h.D,g=h.ya,v&&g&&he(A,v,g),he(A,"VER",h.la),ba(h,A),A}function uv(h,g,v){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new be(new _c({eb:v})):new be(h.pa),g.Ha(h.J),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function hv(){}e=hv.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ic(){}Ic.prototype.g=function(h,g){return new En(h,g)};function En(h,g){mt.call(this),this.g=new tv(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!M(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!M(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new no(this)}m(En,mt),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){wd(this.g)},En.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Ie(h),h=v);g.i.push(new MA(g.Ya++,h)),g.G==3&&Tc(g)},En.prototype.N=function(){this.g.l=null,delete this.j,wd(this.g),delete this.g,En.aa.N.call(this)};function dv(h){kn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){t:{for(const v in g){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}m(dv,kn);function fv(){Cs.call(this),this.status=1}m(fv,Cs);function no(h){this.g=h}m(no,hv),no.prototype.ua=function(){At(this.g,"a")},no.prototype.ta=function(h){At(this.g,new dv(h))},no.prototype.sa=function(h){At(this.g,new fv)},no.prototype.ra=function(){At(this.g,"b")},Ic.prototype.createWebChannel=Ic.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,qT=function(){return new Ic},YT=function(){return Jr()},WT=Yn,Bf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dc.NO_ERROR=0,dc.TIMEOUT=8,dc.HTTP_ERROR=6,uu=dc,Pm.COMPLETE="complete",zT=Pm,Se.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Na=Se,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,HT=be}).apply(typeof Dc<"u"?Dc:typeof self<"u"?self:typeof window<"u"?window:{});const W_="@firebase/firestore",Y_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Gp("@firebase/firestore");function uo(){return Or.logLevel}function ut(e,...t){if(Or.logLevel<=Bt.DEBUG){const n=t.map(ag);Or.debug(`Firestore (${Zo}): ${e}`,...n)}}function Js(e,...t){if(Or.logLevel<=Bt.ERROR){const n=t.map(ag);Or.error(`Firestore (${Zo}): ${e}`,...n)}}function Bi(e,...t){if(Or.logLevel<=Bt.WARN){const n=t.map(ag);Or.warn(`Firestore (${Zo}): ${e}`,...n)}}function ag(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,KT(e,s,n)}function KT(e,t,n){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Js(s),new Error(s)}function Zt(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||KT(t,i,s)}function Nt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends ii{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class MO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class OO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LO{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Zt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ni,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ni)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Zt(typeof s.accessToken=="string",31837,{l:s}),new GT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class NO{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VO{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new NO(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FO{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Zt(this.o===void 0,3512);const s=r=>{r.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,ut("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new q_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new q_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=$O(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Ft(e,t){return e<t?-1:e>t?1:0}function Uf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=e.codePointAt(n),i=t.codePointAt(n);if(s!==i){if(s<128&&i<128)return Ft(s,i);{const r=XT(),o=BO(r.encode(K_(e,n)),r.encode(K_(t,n)));return o!==0?o:Ft(s,i)}}n+=s>65535?2:1}return Ft(e.length,t.length)}function K_(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function BO(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ft(e[n],t[n]);return Ft(e.length,t.length)}function Lo(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="__name__";class cs{constructor(t,n,s){n===void 0?n=0:n>t.length&&It(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&It(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return cs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof cs?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=cs.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Ft(t.length,n.length)}static compareSegments(t,n){const s=cs.isNumericId(t),i=cs.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?cs.extractNumericId(t).compare(cs.extractNumericId(n)):Uf(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Li.fromString(t.substring(4,t.length-2))}}class pe extends cs{construct(t,n,s){return new pe(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new _t(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const UO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends cs{construct(t,n,s){return new ze(t,n,s)}static isValidIdentifier(t){return UO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G_}static keyField(){return new ze([G_])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new _t(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new _t(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new _t(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.path=t}static fromPath(t){return new wt(pe.fromString(t))}static fromName(t){return new wt(pe.fromString(t).popFirst(5))}static empty(){return new wt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(e,t,n){if(!n)throw new _t(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function HO(e,t,n,s){if(t===!0&&s===!0)throw new _t(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function X_(e){if(!wt.isDocumentKey(e))throw new _t(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function QT(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function cg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":It(12329,{type:typeof e})}function xl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cg(e);throw new _t(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(e,t){const n={typeString:e};return t&&(n.value=t),n}function ec(e,t){if(!QT(e))throw new _t(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new _t(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=-62135596800,J_=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*J_);return new fe(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Q_)throw new _t(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J_}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ec(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Q_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:xe("string",fe._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{static fromTimestamp(t){return new Dt(t)}static min(){return new Dt(new fe(0,0))}static max(){return new Dt(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function zO(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(s===1e9?new fe(n+1,0):new fe(n,s));return new Ui(i,wt.empty(),t)}function WO(e){return new Ui(e.readTime,e.key,Cl)}class Ui{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Ui(Dt.min(),wt.empty(),Cl)}static max(){return new Ui(Dt.max(),wt.empty(),Cl)}}function YO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=wt.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==qO)throw e;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,s)=>{n(t)})}static reject(t){return new U((n,s)=>{s(t)})}static waitFor(t){return new U((n,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},l=>s(l))}),o=!0,r===i&&n()})}static or(t){let n=U.resolve(!1);for(const s of t)n=n.next(i=>i?U.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new U((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(t,n){return new U((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}}function GO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Hh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=-1;function zh(e){return e==null}function Bu(e){return e===0&&1/e==-1/0}function XO(e){return typeof e=="number"&&Number.isInteger(e)&&!Bu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="";function QO(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Z_(t)),t=JO(e.get(n),t);return Z_(t)}function JO(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case JT:n+="";break;default:n+=r}}return n}function Z_(e){return e+JT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ZT(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t,n){this.comparator=t,this.root=n||Ue.EMPTY}insert(t,n){return new _e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ue.BLACK,null,null))}remove(t){return new _e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ue.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rc(this.root,t,this.comparator,!0)}}class Rc{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ue{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Ue.RED,this.left=i??Ue.EMPTY,this.right=r??Ue.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Ue(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ue.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ue.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw It(27949);return t+(this.isRed()?0:1)}}Ue.EMPTY=null,Ue.RED=!0,Ue.BLACK=!1;Ue.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new Ue(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.comparator=t,this.data=new _e(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ey(this.data.getIterator())}getIteratorFrom(t){return new ey(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Oe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Oe(this.comparator);return n.data=t,n}}class ey{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this.fields=t,t.sort(ze.comparator)}static empty(){return new Xn([])}unionWith(t){let n=new Oe(ze.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Xn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Lo(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new tE("Invalid base64 string: "+r):r}}(t);return new Ye(n)}static fromUint8Array(t){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Ye(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const ZO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(e){if(Zt(!!e,39018),typeof e=="string"){let t=0;const n=ZO.exec(e);if(Zt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Ee(e.seconds),nanos:Ee(e.nanos)}}function Ee(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Hi(e){return typeof e=="string"?Ye.fromBase64String(e):Ye.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="server_timestamp",nE="__type__",sE="__previous_value__",iE="__local_write_time__";function hg(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[nE])===null||n===void 0?void 0:n.stringValue)===eE}function Wh(e){const t=e.mapValue.fields[sE];return hg(t)?Wh(t):t}function Pl(e){const t=ji(e.mapValue.fields[iE].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t,n,s,i,r,o,a,l,c,u){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Uu="(default)";class kl{constructor(t,n){this.projectId=t,this.database=n||Uu}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===Uu}isEqual(t){return t instanceof kl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="__type__",oE="__max__",Mc={mapValue:{fields:{__type__:{stringValue:oE}}}},aE="__vector__",ju="value";function zi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hg(e)?4:n2(e)?9007199254740991:e2(e)?10:11:It(28295,{value:e})}function ws(e,t){if(e===t)return!0;const n=zi(e);if(n!==zi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Pl(e).isEqual(Pl(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=ji(i.timestampValue),a=ji(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return Hi(i.bytesValue).isEqual(Hi(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return Ee(i.geoPointValue.latitude)===Ee(r.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ee(i.integerValue)===Ee(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ee(i.doubleValue),a=Ee(r.doubleValue);return o===a?Bu(o)===Bu(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Lo(e.arrayValue.values||[],t.arrayValue.values||[],ws);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(ty(o)!==ty(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ws(o[l],a[l])))return!1;return!0}(e,t);default:return It(52216,{left:e})}}function Dl(e,t){return(e.values||[]).find(n=>ws(n,t))!==void 0}function No(e,t){if(e===t)return 0;const n=zi(e),s=zi(t);if(n!==s)return Ft(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=Ee(r.integerValue||r.doubleValue),l=Ee(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return ny(e.timestampValue,t.timestampValue);case 4:return ny(Pl(e),Pl(t));case 5:return Uf(e.stringValue,t.stringValue);case 6:return function(r,o){const a=Hi(r),l=Hi(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ft(a[c],l[c]);if(u!==0)return u}return Ft(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=Ft(Ee(r.latitude),Ee(o.latitude));return a!==0?a:Ft(Ee(r.longitude),Ee(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return sy(e.arrayValue,t.arrayValue);case 10:return function(r,o){var a,l,c,u;const d=r.fields||{},f=o.fields||{},p=(a=d[ju])===null||a===void 0?void 0:a.arrayValue,m=(l=f[ju])===null||l===void 0?void 0:l.arrayValue,_=Ft(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:sy(p,m)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===Mc.mapValue&&o===Mc.mapValue)return 0;if(r===Mc.mapValue)return 1;if(o===Mc.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Uf(l[d],u[d]);if(f!==0)return f;const p=No(a[l[d]],c[u[d]]);if(p!==0)return p}return Ft(l.length,u.length)}(e.mapValue,t.mapValue);default:throw It(23264,{le:n})}}function ny(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=ji(e),s=ji(t),i=Ft(n.seconds,s.seconds);return i!==0?i:Ft(n.nanos,s.nanos)}function sy(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=No(n[i],s[i]);if(r)return r}return Ft(n.length,s.length)}function Vo(e){return jf(e)}function jf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=ji(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Hi(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return wt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=jf(r);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${jf(n.fields[o])}`;return i+"}"}(e.mapValue):It(61005,{value:e})}function hu(e){switch(zi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wh(e);return t?16+hu(t):16;case 5:return 2*e.stringValue.length;case 6:return Hi(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+hu(r),0)}(e.arrayValue);case 10:case 11:return function(s){let i=0;return jr(s.fields,(r,o)=>{i+=r.length+hu(o)}),i}(e.mapValue);default:throw It(13486,{value:e})}}function Hf(e){return!!e&&"integerValue"in e}function dg(e){return!!e&&"arrayValue"in e}function iy(e){return!!e&&"nullValue"in e}function ry(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function du(e){return!!e&&"mapValue"in e}function e2(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[rE])===null||n===void 0?void 0:n.stringValue)===aE}function el(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jr(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=el(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=el(e.arrayValue.values[n]);return t}return Object.assign({},e)}function n2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.value=t}static empty(){return new On({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!du(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=el(n)}setAll(t){let n=ze.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=el(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());du(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ws(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];du(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){jr(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new On(el(this.value))}}function lE(e){const t=[];return jr(e.fields,(n,s)=>{const i=new ze([n]);if(du(s)){const r=lE(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Xn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new tn(t,0,Dt.min(),Dt.min(),Dt.min(),On.empty(),0)}static newFoundDocument(t,n,s,i){return new tn(t,1,n,Dt.min(),s,i,0)}static newNoDocument(t,n){return new tn(t,2,n,Dt.min(),Dt.min(),On.empty(),0)}static newUnknownDocument(t,n){return new tn(t,3,n,Dt.min(),Dt.min(),On.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(t,n){this.position=t,this.inclusive=n}}function oy(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=wt.comparator(wt.fromName(o.referenceValue),n.key):s=No(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function ay(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ws(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n="asc"){this.field=t,this.dir=n}}function s2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{}class Re extends cE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new r2(t,n,s):n==="array-contains"?new l2(t,s):n==="in"?new c2(t,s):n==="not-in"?new u2(t,s):n==="array-contains-any"?new h2(t,s):new Re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new o2(t,s):new a2(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends cE{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new Ts(t,n)}matches(t){return uE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uE(e){return e.op==="and"}function hE(e){return i2(e)&&uE(e)}function i2(e){for(const t of e.filters)if(t instanceof Ts)return!1;return!0}function zf(e){if(e instanceof Re)return e.field.canonicalString()+e.op.toString()+Vo(e.value);if(hE(e))return e.filters.map(t=>zf(t)).join(",");{const t=e.filters.map(n=>zf(n)).join(",");return`${e.op}(${t})`}}function dE(e,t){return e instanceof Re?function(s,i){return i instanceof Re&&s.op===i.op&&s.field.isEqual(i.field)&&ws(s.value,i.value)}(e,t):e instanceof Ts?function(s,i){return i instanceof Ts&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&dE(o,i.filters[a]),!0):!1}(e,t):void It(19439)}function fE(e){return e instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`}(e):e instanceof Ts?function(n){return n.op.toString()+" {"+n.getFilters().map(fE).join(" ,")+"}"}(e):"Filter"}class r2 extends Re{constructor(t,n,s){super(t,n,s),this.key=wt.fromName(s.referenceValue)}matches(t){const n=wt.comparator(t.key,this.key);return this.matchesComparison(n)}}class o2 extends Re{constructor(t,n){super(t,"in",n),this.keys=pE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class a2 extends Re{constructor(t,n){super(t,"not-in",n),this.keys=pE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function pE(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>wt.fromName(s.referenceValue))}class l2 extends Re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return dg(n)&&Dl(n.arrayValue,this.value)}}class c2 extends Re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class u2 extends Re{constructor(t,n){super(t,"not-in",n)}matches(t){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dl(this.value.arrayValue,n)}}class h2 extends Re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!dg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Dl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Pe=null}}function ly(e,t=null,n=[],s=[],i=null,r=null,o=null){return new d2(e,t,n,s,i,r,o)}function fg(e){const t=Nt(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>zf(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),zh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Vo(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Vo(s)).join(",")),t.Pe=n}return t.Pe}function pg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!s2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ay(e.startAt,t.startAt)&&ay(e.endAt,t.endAt)}function Wf(e){return wt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function f2(e,t,n,s,i,r,o,a){return new Yh(e,t,n,s,i,r,o,a)}function gg(e){return new Yh(e)}function cy(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function p2(e){return e.collectionGroup!==null}function nl(e){const t=Nt(e);if(t.Te===null){t.Te=[];const n=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oe(ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Te.push(new zu(r,s))}),n.has(ze.keyField().canonicalString())||t.Te.push(new zu(ze.keyField(),s))}return t.Te}function gs(e){const t=Nt(e);return t.Ie||(t.Ie=g2(t,nl(e))),t.Ie}function g2(e,t){if(e.limitType==="F")return ly(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new zu(i.field,r)});const n=e.endAt?new Hu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Hu(e.startAt.position,e.startAt.inclusive):null;return ly(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Yf(e,t,n){return new Yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qh(e,t){return pg(gs(e),gs(t))&&e.limitType===t.limitType}function gE(e){return`${fg(gs(e))}|lt:${e.limitType}`}function ho(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>fE(i)).join(", ")}]`),zh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Vo(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Vo(i)).join(",")),`Target(${s})`}(gs(e))}; limitType=${e.limitType})`}function Kh(e,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):wt.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(e,t)&&function(s,i){for(const r of nl(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(s,i){return!(s.startAt&&!function(o,a,l){const c=oy(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,nl(s),i)||s.endAt&&!function(o,a,l){const c=oy(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,nl(s),i))}(e,t)}function m2(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mE(e){return(t,n)=>{let s=!1;for(const i of nl(e)){const r=v2(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function v2(e,t,n){const s=e.field.isKeyField()?wt.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?No(l,c):It(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return It(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jr(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return ZT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new _e(wt.comparator);function Zs(){return _2}const vE=new _e(wt.comparator);function Va(...e){let t=vE;for(const n of e)t=t.insert(n.key,n);return t}function _E(e){let t=vE;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function wr(){return sl()}function yE(){return sl()}function sl(){return new Hr(e=>e.toString(),(e,t)=>e.isEqual(t))}const y2=new _e(wt.comparator),b2=new Oe(wt.comparator);function Ut(...e){let t=b2;for(const n of e)t=t.add(n);return t}const w2=new Oe(Ft);function T2(){return w2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(t)?"-0":t}}function bE(e){return{integerValue:""+e}}function E2(e,t){return XO(t)?bE(t):mg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function I2(e,t,n){return e instanceof Wu?function(i,r){const o={fields:{[nE]:{stringValue:eE},[iE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&hg(r)&&(r=Wh(r)),r&&(o.fields[sE]=r),{mapValue:o}}(n,t):e instanceof Rl?TE(e,t):e instanceof Ml?EE(e,t):function(i,r){const o=wE(i,r),a=uy(o)+uy(i.Ee);return Hf(o)&&Hf(i.Ee)?bE(a):mg(i.serializer,a)}(e,t)}function S2(e,t,n){return e instanceof Rl?TE(e,t):e instanceof Ml?EE(e,t):n}function wE(e,t){return e instanceof Yu?function(s){return Hf(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class Wu extends Gh{}class Rl extends Gh{constructor(t){super(),this.elements=t}}function TE(e,t){const n=IE(t);for(const s of e.elements)n.some(i=>ws(i,s))||n.push(s);return{arrayValue:{values:n}}}class Ml extends Gh{constructor(t){super(),this.elements=t}}function EE(e,t){let n=IE(t);for(const s of e.elements)n=n.filter(i=>!ws(i,s));return{arrayValue:{values:n}}}class Yu extends Gh{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function uy(e){return Ee(e.integerValue||e.doubleValue)}function IE(e){return dg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function A2(e,t){return e.field.isEqual(t.field)&&function(s,i){return s instanceof Rl&&i instanceof Rl||s instanceof Ml&&i instanceof Ml?Lo(s.elements,i.elements,ws):s instanceof Yu&&i instanceof Yu?ws(s.Ee,i.Ee):s instanceof Wu&&i instanceof Wu}(e.transform,t.transform)}class x2{constructor(t,n){this.version=t,this.transformResults=n}}class qs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qs}static exists(t){return new qs(void 0,t)}static updateTime(t){return new qs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xh{}function SE(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new xE(e.key,qs.none()):new nc(e.key,e.data,qs.none());{const n=e.data,s=On.empty();let i=new Oe(ze.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new zr(e.key,s,new Xn(i.toArray()),qs.none())}}function C2(e,t,n){e instanceof nc?function(i,r,o){const a=i.value.clone(),l=dy(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof zr?function(i,r,o){if(!fu(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=dy(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(AE(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function il(e,t,n,s){return e instanceof nc?function(r,o,a,l){if(!fu(r.precondition,o))return a;const c=r.value.clone(),u=fy(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,s):e instanceof zr?function(r,o,a,l){if(!fu(r.precondition,o))return a;const c=fy(r.fieldTransforms,l,o),u=o.data;return u.setAll(AE(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(e,t,n,s):function(r,o,a){return fu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function P2(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=wE(s.transform,i||null);r!=null&&(n===null&&(n=On.empty()),n.set(s.field,r))}return n||null}function hy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Lo(s,i,(r,o)=>A2(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nc extends Xh{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zr extends Xh{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function AE(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function dy(e,t,n){const s=new Map;Zt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,S2(o,a,n[i]))}return s}function fy(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,I2(r,o,t))}return s}class xE extends Xh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k2 extends Xh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&C2(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=il(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=il(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=yE();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=SE(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Dt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,(n,s)=>hy(n,s))&&Lo(this.baseMutations,t.baseMutations,(n,s)=>hy(n,s))}}class vg{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Zt(t.mutations.length===s.length,58842,{Ve:t.mutations.length,me:s.length});let i=function(){return y2}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new vg(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,Yt;function O2(e){switch(e){case q.OK:return It(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return It(15467,{code:e})}}function CE(e){if(e===void 0)return Js("GRPC error has no .code"),q.UNKNOWN;switch(e){case Ae.OK:return q.OK;case Ae.CANCELLED:return q.CANCELLED;case Ae.UNKNOWN:return q.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return q.INTERNAL;case Ae.UNAVAILABLE:return q.UNAVAILABLE;case Ae.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ae.NOT_FOUND:return q.NOT_FOUND;case Ae.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ae.ABORTED:return q.ABORTED;case Ae.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ae.DATA_LOSS:return q.DATA_LOSS;default:return It(39323,{code:e})}}(Yt=Ae||(Ae={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new Li([4294967295,4294967295],0);function py(e){const t=XT().encode(e),n=new jT;return n.update(t),new Uint8Array(n.digest())}function gy(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Li([n,s],0),new Li([i,r],0)]}class _g{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Fa(`Invalid padding: ${n}`);if(s<0)throw new Fa(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Fa(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Fa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Li.fromNumber(this.fe)}pe(t,n,s){let i=t.add(n.multiply(Li.fromNumber(s)));return i.compare(L2)===1&&(i=new Li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=py(t),[s,i]=gy(n);for(let r=0;r<this.hashCount;r++){const o=this.pe(s,i,r);if(!this.ye(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new _g(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.fe===0)return;const n=py(t),[s,i]=gy(n);for(let r=0;r<this.hashCount;r++){const o=this.pe(s,i,r);this.we(o)}}we(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,sc.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Qh(Dt.min(),i,new _e(Ft),Zs(),Ut())}}class sc{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new sc(s,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t,n,s,i){this.Se=t,this.removedTargetIds=n,this.key=s,this.be=i}}class PE{constructor(t,n){this.targetId=t,this.De=n}}class kE{constructor(t,n,s=Ye.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class my{constructor(){this.ve=0,this.Ce=vy(),this.Fe=Ye.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Ut(),n=Ut(),s=Ut();return this.Ce.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:It(38017,{changeType:r})}}),new sc(this.Fe,this.Me,t,n,s)}ke(){this.xe=!1,this.Ce=vy()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class N2{constructor(t){this.We=t,this.Ge=new Map,this.ze=Zs(),this.je=Oc(),this.Je=Oc(),this.He=new _e(Ft)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,n=>{const s=this.tt(n);switch(t.state){case 0:this.nt(n)&&s.Be(t.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(t.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(t.resumeToken));break;default:It(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach((s,i)=>{this.nt(i)&&n(i)})}it(t){const n=t.targetId,s=t.De.count,i=this.st(n);if(i){const r=i.target;if(Wf(r))if(s===0){const o=new wt(r.path);this.Xe(n,o,tn.newNoDocument(o,Dt.min()))}else Zt(s===1,20013,{expectedCount:s});else{const o=this.ot(n);if(o!==s){const a=this._t(t),l=a?this.ut(a,t,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Hi(s).toUint8Array()}catch(l){if(l instanceof tE)return Bi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _g(o,i,r)}catch(l){return Bi(l instanceof Fa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(t,n,s){return n.De.count===s-this.ht(t,n.targetId)?0:2}ht(t,n){const s=this.We.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Xe(n,r,null),i++)}),i}Pt(t){const n=new Map;this.Ge.forEach((r,o)=>{const a=this.st(o);if(a){if(r.current&&Wf(a.target)){const l=new wt(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,tn.newNoDocument(l,t))}r.Ne&&(n.set(o,r.Le()),r.ke())}});let s=Ut();this.Je.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.ze.forEach((r,o)=>o.setReadTime(t));const i=new Qh(t,n,this.He,this.ze,s);return this.ze=Zs(),this.je=Oc(),this.Je=Oc(),this.He=new _e(Ft),i}Ze(t,n){if(!this.nt(t))return;const s=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,s){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new my,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Oe(Ft),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Oe(Ft),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new my),this.We.getRemoteKeysForTarget(t).forEach(n=>{this.Xe(t,n,null)})}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Oc(){return new _e(wt.comparator)}function vy(){return new _e(wt.comparator)}const V2=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),F2=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$2=(()=>({and:"AND",or:"OR"}))();class B2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function qf(e,t){return e.useProto3Json||zh(t)?t:{value:t}}function qu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function U2(e,t){return qu(e,t.toTimestamp())}function ms(e){return Zt(!!e,49232),Dt.fromTimestamp(function(n){const s=ji(n);return new fe(s.seconds,s.nanos)}(e))}function yg(e,t){return Kf(e,t).canonicalString()}function Kf(e,t){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function RE(e){const t=pe.fromString(e);return Zt(VE(t),10190,{key:t.toString()}),t}function Gf(e,t){return yg(e.databaseId,t.path)}function Kd(e,t){const n=RE(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wt(OE(n))}function ME(e,t){return yg(e.databaseId,t)}function j2(e){const t=RE(e);return t.length===4?pe.emptyPath():OE(t)}function Xf(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function OE(e){return Zt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function _y(e,t,n){return{name:Gf(e,t),fields:n.value.mapValue.fields}}function H2(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:It(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Zt(u===void 0||typeof u=="string",58123),Ye.fromBase64String(u||"")):(Zt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ye.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?q.UNKNOWN:CE(c.code);return new _t(u,c.message||"")}(o);n=new kE(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Kd(e,s.document.name),r=ms(s.document.updateTime),o=s.document.createTime?ms(s.document.createTime):Dt.min(),a=new On({mapValue:{fields:s.document.fields}}),l=tn.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new pu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Kd(e,s.document),r=s.readTime?ms(s.readTime):Dt.min(),o=tn.newNoDocument(i,r),a=s.removedTargetIds||[];n=new pu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Kd(e,s.document),r=s.removedTargetIds||[];n=new pu([],r,i,null)}else{if(!("filter"in t))return It(11601,{At:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new M2(i,r),a=s.targetId;n=new PE(a,o)}}return n}function z2(e,t){let n;if(t instanceof nc)n={update:_y(e,t.key,t.value)};else if(t instanceof xE)n={delete:Gf(e,t.key)};else if(t instanceof zr)n={update:_y(e,t.key,t.data),updateMask:Z2(t.fieldMask)};else{if(!(t instanceof k2))return It(16599,{Rt:t.type});n={verify:Gf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw It(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:U2(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:It(27497)}(e,t.precondition)),n}function W2(e,t){return e&&e.length>0?(Zt(t!==void 0,14353),e.map(n=>function(i,r){let o=i.updateTime?ms(i.updateTime):ms(r);return o.isEqual(Dt.min())&&(o=ms(r)),new x2(o,i.transformResults||[])}(n,t))):[]}function Y2(e,t){return{documents:[ME(e,t.path)]}}function q2(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ME(e,i);const r=function(c){if(c.length!==0)return NE(Ts.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:fo(f.field),direction:X2(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=qf(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:n,parent:i}}function K2(e){let t=j2(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Zt(s===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(d){const f=LE(d);return f instanceof Ts&&hE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new zu(po(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,zh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Hu(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Hu(p,f)}(n.endAt)),f2(t,i,o,r,a,"F",l,c)}function G2(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function LE(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=po(n.unaryFilter.field);return Re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=po(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=po(n.unaryFilter.field);return Re.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=po(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(e):e.fieldFilter!==void 0?function(n){return Re.create(po(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ts.create(n.compositeFilter.filters.map(s=>LE(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(n.compositeFilter.op))}(e):It(30097,{filter:e})}function X2(e){return V2[e]}function Q2(e){return F2[e]}function J2(e){return $2[e]}function fo(e){return{fieldPath:e.canonicalString()}}function po(e){return ze.fromServerFormat(e.fieldPath)}function NE(e){return e instanceof Re?function(n){if(n.op==="=="){if(ry(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(iy(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ry(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(iy(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:Q2(n.op),value:n.value}}}(e):e instanceof Ts?function(n){const s=n.getFilters().map(i=>NE(i));return s.length===1?s[0]:{compositeFilter:{op:J2(n.op),filters:s}}}(e):It(54877,{filter:e})}function Z2(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function VE(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n,s,i,r=Dt.min(),o=Dt.min(),a=Ye.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Ai(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(t){this.gt=t}}function eL(e){const t=K2({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Yf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.Dn=new sL}addToCollectionParentIndex(t,n){return this.Dn.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(Ui.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(Ui.min())}updateCollectionGroup(t,n,s){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class sL{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new Oe(pe.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Oe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FE=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(FE,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Fo(0)}static ur(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="LruGarbageCollector",iL=1048576;function wy([e,t],[n,s]){const i=Ft(e,n);return i===0?Ft(t,s):i}class rL{constructor(t){this.Tr=t,this.buffer=new Oe(wy),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();wy(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oL{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){ut(by,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?ut(by,"Ignoring IndexedDB error during garbage collection: ",n):await ta(n)}await this.Rr(3e5)})}}class aL{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return U.resolve(Hh.ue);const s=new rL(n);return this.Vr.forEachTarget(t,i=>s.Er(i.sequenceNumber)).next(()=>this.Vr.gr(t,i=>s.Er(i))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.Vr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(yy)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yy):this.pr(t,n))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let s,i,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(s=d,a=Date.now(),this.removeTargets(t,s,n))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s))).next(d=>(c=Date.now(),uo()<=Bt.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d})))}}function lL(e,t){return new aL(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.changes=new Hr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?U.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&il(s.mutation,i,Xn.empty(),fe.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Ut()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Ut()){const i=wr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let o=Va();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=wr();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Ut()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,i){let r=Zs();const o=sl(),a=function(){return sl()}();return n.forEach((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof zr)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),il(u.mutation,c,u.mutation.getFieldMask(),fe.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new uL(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const s=sl();let i=new _e((o,a)=>o-a),r=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||Xn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const d=(i.get(a.batchId)||Ut()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=yE();u.forEach(f=>{if(!r.has(f)){const p=SE(n.get(f),s.get(f));p!==null&&d.set(f,p),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return U.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,i){return function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):p2(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):U.resolve(wr());let a=Cl,l=r;return o.next(c=>U.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(u)?U.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,Ut())).next(u=>({batchId:a,changes:_E(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new wt(n)).next(s=>{let i=Va();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=Va();return this.indexManager.getCollectionParents(t,r).next(a=>U.forEach(a,l=>{const c=function(d,f){return new Yh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,tn.newInvalidDocument(u)))});let a=Va();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&il(u.mutation,c,Xn.empty(),fe.now()),Kh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ms(i.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:eL(i.bundledQuery),readTime:ms(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.overlays=new _e(wt.comparator),this.kr=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const s=wr();return U.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.wt(t,n,r)}),U.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.kr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.kr.delete(s)),U.resolve()}getOverlaysForCollection(t,n,s){const i=wr(),r=n.length+1,o=new wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new _e((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=wr(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=wr(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return U.resolve(a)}wt(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(s.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new R2(n,s));let r=this.kr.get(n);r===void 0&&(r=Ut(),this.kr.set(n,r)),this.kr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.qr=new Oe(Le.Qr),this.$r=new Oe(Le.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const s=new Le(t,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Wr(new Le(t,n))}Gr(t,n){t.forEach(s=>this.removeReference(s,n))}zr(t){const n=new wt(new pe([])),s=new Le(n,t),i=new Le(n,t+1),r=[];return this.$r.forEachInRange([s,i],o=>{this.Wr(o),r.push(o.key)}),r}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new wt(new pe([])),s=new Le(n,t),i=new Le(n,t+1);let r=Ut();return this.$r.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new Le(t,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Le{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return wt.comparator(t.key,n.key)||Ft(t.Hr,n.Hr)}static Ur(t,n){return Ft(t.Hr,n.Hr)||wt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Oe(Le.Qr)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new D2(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Le(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(t,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.Xr(s),r=i<0?0:i;return U.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ug:this.er-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([s,i],o=>{const a=this.Zr(o.Hr);r.push(a)}),U.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Oe(Ft);return n.forEach(i=>{const r=new Le(i,0),o=new Le(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([r,o],a=>{s=s.add(a.Hr)})}),U.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;wt.isDocumentKey(r)||(r=r.child(""));const o=new Le(new wt(r),0);let a=new Oe(Ft);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Hr)),!0)},o),U.resolve(this.ei(a))}ei(t){const n=[];return t.forEach(s=>{const i=this.Zr(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Zt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return U.forEach(n.mutations,i=>{const r=new Le(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Yr=s})}rr(t){}containsKey(t,n){const s=new Le(n,0),i=this.Yr.firstAfterOrEqual(s);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(t){this.ni=t,this.docs=function(){return new _e(wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return U.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(t,n){let s=Zs();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():tn.newInvalidDocument(i))}),U.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Zs();const o=n.path,a=new wt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||YO(WO(u),s)<=0||(i.has(u.key)||Kh(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return U.resolve(r)}getAllFromCollectionGroup(t,n,s,i){It(9500)}ri(t,n){return U.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new vL(this)}getSize(t){return U.resolve(this.size)}}class vL extends cL{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(s)}),U.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(t){this.persistence=t,this.ii=new Hr(n=>fg(n),pg),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.si=0,this.oi=new bg,this.targetCount=0,this._i=Fo.ar()}forEachTarget(t,n){return this.ii.forEach((s,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),U.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Fo(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.hr(n),U.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.ii.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),U.waitFor(r).next(()=>i)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const s=this.ii.get(n)||null;return U.resolve(s)}addMatchingKeys(t,n,s){return this.oi.Kr(n,s),U.resolve()}removeMatchingKeys(t,n,s){this.oi.Gr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),U.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const s=this.oi.Jr(n);return U.resolve(s)}containsKey(t,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,n){this.ai={},this.overlays={},this.ui=new Hh(0),this.ci=!1,this.ci=!0,this.li=new pL,this.referenceDelegate=t(this),this.hi=new _L(this),this.indexManager=new nL,this.remoteDocumentCache=function(i){return new mL(i)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new tL(n),this.Ti=new dL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new fL,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ai[t.toKey()];return s||(s=new gL(n,this.referenceDelegate),this.ai[t.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,s){ut("MemoryPersistence","Starting transaction:",t);const i=new yL(this.ui.next());return this.referenceDelegate.Ii(),s(i).next(r=>this.referenceDelegate.di(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(t,n){return U.or(Object.values(this.ai).map(s=>()=>s.containsKey(t,n)))}}class yL extends KO{constructor(t){super(),this.currentSequenceNumber=t}}class wg{constructor(t){this.persistence=t,this.Ai=new bg,this.Ri=null}static Vi(t){return new wg(t)}get mi(){if(this.Ri)return this.Ri;throw It(60996)}addReference(t,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),U.resolve()}removeReference(t,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.mi.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,s=>{const i=wt.fromPath(s);return this.fi(t,i).next(r=>{r||n.removeEntry(i,Dt.min())})}).next(()=>(this.Ri=null,n.apply(t)))}updateLimboDocument(t,n){return this.fi(t,n).next(s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(t){return 0}fi(t,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Ku{constructor(t,n){this.persistence=t,this.gi=new Hr(s=>QO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=lL(this,n)}static Vi(t,n){return new Ku(t,n)}Ii(){}di(t){return U.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(i=>s+i))}yr(t){let n=0;return this.gr(t,s=>{n++}).next(()=>n)}gr(t,n){return U.forEach(this.gi,(s,i)=>this.Sr(t,s,i).next(r=>r?U.resolve():n(i)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ri(t,o=>this.Sr(t,o,n).next(a=>{a||(s++,r.removeEntry(o,Dt.min()))})).next(()=>r.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),U.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.gi.set(s,t.currentSequenceNumber),U.resolve()}removeReference(t,n,s){return this.gi.set(s,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),U.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=hu(t.data.value)),n}Sr(t,n,s){return U.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return U.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Is=s,this.ds=i}static Es(t,n){let s=Ut(),i=Ut();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Tg(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Zk()?8:GO(rn())>0?6:4}()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ps(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ys(t,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new bL;return this.ws(t,n,o).next(a=>{if(r.result=a,this.Rs)return this.Ss(t,n,o,a.size)})}).next(()=>r.result)}Ss(t,n,s,i){return s.documentReadCount<this.Vs?(uo()<=Bt.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(uo()<=Bt.DEBUG&&ut("QueryEngine","Query:",ho(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.fs*i?(uo()<=Bt.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gs(n))):U.resolve())}ps(t,n){if(cy(n))return U.resolve(null);let s=gs(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yf(n,null,"F"),s=gs(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=Ut(...r);return this.gs.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(t,Yf(n,null,"F")):this.vs(t,c,n,l)}))})))}ys(t,n,s,i){return cy(n)||i.isEqual(Dt.min())?U.resolve(null):this.gs.getDocuments(t,s).next(r=>{const o=this.bs(n,r);return this.Ds(n,o,s,i)?U.resolve(null):(uo()<=Bt.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ho(n)),this.vs(t,o,n,zO(i,Cl)).next(a=>a))})}bs(t,n){let s=new Oe(mE(t));return n.forEach((i,r)=>{Kh(t,r)&&(s=s.add(r))}),s}Ds(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ws(t,n,s){return uo()<=Bt.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",ho(n)),this.gs.getDocumentsMatchingQuery(t,n,Ui.min(),s)}vs(t,n,s,i){return this.gs.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",TL=3e8;class EL{constructor(t,n,s,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new _e(Ft),this.Ms=new Hr(r=>fg(r),pg),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(s)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Fs))}}function IL(e,t,n,s){return new EL(e,t,n,s)}async function BE(e,t){const n=Nt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Ns(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=Ut();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function SL(e,t){const n=Nt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=U.resolve();return f.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(_=>{const y=c.docVersions.get(m);Zt(y!==null,48541),_.version.compareTo(y)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=Ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function UE(e){const t=Nt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.hi.getLastRemoteSnapshotVersion(n))}function AL(e,t){const n=Nt(e),s=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];t.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.hi.removeMatchingKeys(r,u.removedDocuments,d).next(()=>n.hi.addMatchingKeys(r,u.addedDocuments,d)));let p=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?p=p.withResumeToken(Ye.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,s)),i=i.insert(d,p),function(_,y,x){return _.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=TL?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,p,u)&&a.push(n.hi.updateTargetData(r,p))});let l=Zs(),c=Ut();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(xL(r,o,t.documentUpdates).next(u=>{l=u.Ls,c=u.ks})),!s.isEqual(Dt.min())){const u=n.hi.getLastRemoteSnapshotVersion(r).next(d=>n.hi.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return U.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Fs=i,r))}function xL(e,t,n){let s=Ut(),i=Ut();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let o=Zs();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Dt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ut(Eg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function CL(e,t){const n=Nt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=ug),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function PL(e,t){const n=Nt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.hi.getTargetData(s,t).next(r=>r?(i=r,U.resolve(i)):n.hi.allocateTargetId(s).next(o=>(i=new Ai(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Fs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(t,s.targetId)),s})}async function Qf(e,t,n){const s=Nt(e),i=s.Fs.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ea(o))throw o;ut(Eg,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Fs=s.Fs.remove(t),s.Ms.delete(i.target)}function Ty(e,t,n){const s=Nt(e);let i=Dt.min(),r=Ut();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Nt(l),f=d.Ms.get(u);return f!==void 0?U.resolve(d.Fs.get(f)):d.hi.getTargetData(c,u)}(s,o,gs(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.Cs.getDocumentsMatchingQuery(o,t,n?i:Dt.min(),n?r:Ut())).next(a=>(kL(s,m2(t),a),{documents:a,qs:r})))}function kL(e,t,n){let s=e.xs.get(t)||Dt.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.xs.set(t,s)}class Ey{constructor(){this.activeTargetIds=T2()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class DL{constructor(){this.Fo=new Ey,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,s){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Ey,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="ConnectivityMonitor";class Sy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ut(Iy,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){ut(Iy,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function Jf(){return Lc===null?Lc=function(){return 268435456+Math.round(2147483648*Math.random())}():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RestConnection",ML={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OL{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${s}/databases/${i}`,this.Ko=this.databaseId.database===Uu?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(t,n,s,i,r){const o=Jf(),a=this.Go(t,n.toUriEncodedString());ut(Gd,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,r);const{host:c}=new URL(a),u=Xo(c);return this.jo(t,a,l,s,u).then(d=>(ut(Gd,`Received RPC '${t}' ${o}: `,d),d),d=>{throw Bi(Gd,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Jo(t,n,s,i,r,o){return this.Wo(t,n,s,i,r)}zo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>t[r]=i),s&&s.headers.forEach((i,r)=>t[r]=i)}Go(t,n){const s=ML[t];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class NL extends OL{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,s,i,r){const o=Jf();return new Promise((a,l)=>{const c=new HT;c.setWithCredentials(!0),c.listenOnce(zT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uu.NO_ERROR:const d=c.getResponseJson();ut(Ge,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case uu.TIMEOUT:ut(Ge,`RPC '${t}' ${o} timed out`),l(new _t(q.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const f=c.getStatus();if(ut(Ge,`RPC '${t}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const _=function(x){const M=x.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(M)>=0?M:q.UNKNOWN}(m.status);l(new _t(_,m.message))}else l(new _t(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new _t(q.UNAVAILABLE,"Connection failed."));break;default:It(9055,{c_:t,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{ut(Ge,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(i);ut(Ge,`RPC '${t}' ${o} sending request:`,i),c.send(n,"POST",u,s,15)})}P_(t,n,s){const i=Jf(),r=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=qT(),a=YT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");ut(Ge,`Creating RPC '${t}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.T_(d);let f=!1,p=!1;const m=new LL({Ho:y=>{p?ut(Ge,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(f||(ut(Ge,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),ut(Ge,`RPC '${t}' stream ${i} sending:`,y),d.send(y))},Yo:()=>d.close()}),_=(y,x,M)=>{y.listen(x,E=>{try{M(E)}catch(b){setTimeout(()=>{throw b},0)}})};return _(d,Na.EventType.OPEN,()=>{p||(ut(Ge,`RPC '${t}' stream ${i} transport opened.`),m.s_())}),_(d,Na.EventType.CLOSE,()=>{p||(p=!0,ut(Ge,`RPC '${t}' stream ${i} transport closed`),m.__(),this.I_(d))}),_(d,Na.EventType.ERROR,y=>{p||(p=!0,Bi(Ge,`RPC '${t}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),m.__(new _t(q.UNAVAILABLE,"The operation could not be completed")))}),_(d,Na.EventType.MESSAGE,y=>{var x;if(!p){const M=y.data[0];Zt(!!M,16349);const E=M,b=(E==null?void 0:E.error)||((x=E[0])===null||x===void 0?void 0:x.error);if(b){ut(Ge,`RPC '${t}' stream ${i} received error:`,b);const R=b.status;let L=function(T){const k=Ae[T];if(k!==void 0)return CE(k)}(R),I=b.message;L===void 0&&(L=q.INTERNAL,I="Unknown error status: "+R+" with message "+b.message),p=!0,m.__(new _t(L,I)),d.close()}else ut(Ge,`RPC '${t}' stream ${i} received:`,M),m.a_(M)}}),_(a,WT.STAT_EVENT,y=>{y.stat===Bf.PROXY?ut(Ge,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===Bf.NOPROXY&&ut(Ge,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.o_()},0),m}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(n=>n===t)}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(e){return new B2(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t,n,s=1e3,i=1.5,r=6e4){this.Fi=t,this.timerId=n,this.d_=s,this.E_=i,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-s);i>0&&ut("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="PersistentStream";class HE{constructor(t,n,s,i,r,o,a,l){this.Fi=t,this.w_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new jE(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Js(n.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.b_===n&&this.W_(s,i)},s=>{t(()=>{const i=new _t(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(i)})})}W_(t,n){const s=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{s(()=>this.G_(i))}),this.stream.onMessage(i=>{s(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return ut(Ay,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget(()=>this.b_===t?n():(ut(Ay,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VL extends HE{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=H2(this.serializer,t),s=function(r){if(!("targetChange"in r))return Dt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?ms(o.readTime):Dt.min()}(t);return this.listener.J_(n,s)}H_(t){const n={};n.database=Xf(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Wf(l)?{documents:Y2(r,l)}:{query:q2(r,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DE(r,o.resumeToken);const c=qf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Dt.min())>0){a.readTime=qu(r,o.snapshotVersion.toTimestamp());const c=qf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const s=G2(this.serializer,t);s&&(n.labels=s),this.k_(n)}Y_(t){const n={};n.database=Xf(this.serializer),n.removeTarget=t,this.k_(n)}}class FL extends HE{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=W2(t.writeResults,t.commitTime),s=ms(t.commitTime);return this.listener.ta(s,n)}na(){const t={};t.database=Xf(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>z2(this.serializer,s))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{}class BL extends $L{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new _t(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Wo(t,Kf(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new _t(q.UNKNOWN,r.toString())})}Jo(t,n,s,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(t,Kf(n,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class UL{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Js(n),this._a=!1):ut("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="RemoteStore";class jL{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(o=>{s.enqueueAndForget(async()=>{Wr(this)&&(ut(Lr,"Restarting streams for network reachability change."),await async function(l){const c=Nt(l);c.Ia.add(4),await ic(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Zh(c)}(this))})}),this.Aa=new UL(s,i)}}async function Zh(e){if(Wr(e))for(const t of e.da)await t(!0)}async function ic(e){for(const t of e.da)await t(!1)}function zE(e,t){const n=Nt(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),xg(n)?Ag(n):na(n).x_()&&Sg(n,t))}function Ig(e,t){const n=Nt(e),s=na(n);n.Ta.delete(t),s.x_()&&WE(n,t),n.Ta.size===0&&(s.x_()?s.B_():Wr(n)&&n.Aa.set("Unknown"))}function Sg(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}na(e).H_(t)}function WE(e,t){e.Ra.$e(t),na(e).Y_(t)}function Ag(e){e.Ra=new N2({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),na(e).start(),e.Aa.aa()}function xg(e){return Wr(e)&&!na(e).M_()&&e.Ta.size>0}function Wr(e){return Nt(e).Ia.size===0}function YE(e){e.Ra=void 0}async function HL(e){e.Aa.set("Online")}async function zL(e){e.Ta.forEach((t,n)=>{Sg(e,t)})}async function WL(e,t){YE(e),xg(e)?(e.Aa.la(t),Ag(e)):e.Aa.set("Unknown")}async function YL(e,t,n){if(e.Aa.set("Online"),t instanceof kE&&t.state===2&&t.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(e,t)}catch(s){ut(Lr,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Gu(e,s)}else if(t instanceof pu?e.Ra.Ye(t):t instanceof PE?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Dt.min()))try{const s=await UE(e.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.Ta.get(c);u&&r.Ta.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.Ta.get(l);if(!u)return;r.Ta.set(l,u.withResumeToken(Ye.EMPTY_BYTE_STRING,u.snapshotVersion)),WE(r,l);const d=new Ai(u.target,l,c,u.sequenceNumber);Sg(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(s){ut(Lr,"Failed to raise snapshot:",s),await Gu(e,s)}}async function Gu(e,t,n){if(!ea(t))throw t;e.Ia.add(1),await ic(e),e.Aa.set("Offline"),n||(n=()=>UE(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ut(Lr,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Zh(e)})}function qE(e,t){return t().catch(n=>Gu(e,n,t))}async function td(e){const t=Nt(e),n=Wi(t);let s=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:ug;for(;qL(t);)try{const i=await CL(t.localStore,s);if(i===null){t.Pa.length===0&&n.B_();break}s=i.batchId,KL(t,i)}catch(i){await Gu(t,i)}KE(t)&&GE(t)}function qL(e){return Wr(e)&&e.Pa.length<10}function KL(e,t){e.Pa.push(t);const n=Wi(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function KE(e){return Wr(e)&&!Wi(e).M_()&&e.Pa.length>0}function GE(e){Wi(e).start()}async function GL(e){Wi(e).na()}async function XL(e){const t=Wi(e);for(const n of e.Pa)t.X_(n.mutations)}async function QL(e,t,n){const s=e.Pa.shift(),i=vg.from(s,t,n);await qE(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await td(e)}async function JL(e,t){t&&Wi(e).Z_&&await async function(s,i){if(function(o){return O2(o)&&o!==q.ABORTED}(i.code)){const r=s.Pa.shift();Wi(s).N_(),await qE(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await td(s)}}(e,t),KE(e)&&GE(e)}async function xy(e,t){const n=Nt(e);n.asyncQueue.verifyOperationInProgress(),ut(Lr,"RemoteStore received new credentials");const s=Wr(n);n.Ia.add(3),await ic(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Zh(n)}async function ZL(e,t){const n=Nt(e);t?(n.Ia.delete(2),await Zh(n)):t||(n.Ia.add(2),await ic(n),n.Aa.set("Unknown"))}function na(e){return e.Va||(e.Va=function(n,s,i){const r=Nt(n);return r.ia(),new VL(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Zo:HL.bind(null,e),e_:zL.bind(null,e),n_:WL.bind(null,e),J_:YL.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),xg(e)?Ag(e):e.Aa.set("Unknown")):(await e.Va.stop(),YE(e))})),e.Va}function Wi(e){return e.ma||(e.ma=function(n,s,i){const r=Nt(n);return r.ia(),new FL(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:GL.bind(null,e),n_:JL.bind(null,e),ea:XL.bind(null,e),ta:QL.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await td(e)):(await e.ma.stop(),e.Pa.length>0&&(ut(Lr,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Cg(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pg(e,t){if(Js("AsyncQueue",`${t}: ${e}`),ea(e))return new _t(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static emptySet(t){return new xo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||wt.comparator(n.key,s.key):(n,s)=>wt.comparator(n.key,s.key),this.keyedMap=Va(),this.sortedSet=new _e(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof xo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new xo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.fa=new _e(wt.comparator)}track(t){const n=t.doc.key,s=this.fa.get(n);s?t.type!==0&&s.type===3?this.fa=this.fa.insert(n,t):t.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.fa=this.fa.remove(n):t.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):It(63341,{At:t,ga:s}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal((n,s)=>{t.push(s)}),t}}class $o{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $o(t,n,xo.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class eN{constructor(){this.queries=Py(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const i=Nt(n),r=i.queries;i.queries=Py(),r.forEach((o,a)=>{for(const l of a.wa)l.onError(s)})})(this,new _t(q.ABORTED,"Firestore shutting down"))}}function Py(){return new Hr(e=>gE(e),qh)}async function nN(e,t){const n=Nt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.Sa()&&t.ba()&&(s=2):(r=new tN,s=t.ba()?0:1);try{switch(s){case 0:r.ya=await n.onListen(i,!0);break;case 1:r.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Pg(o,`Initialization of query '${ho(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.wa.push(t),t.va(n.onlineState),r.ya&&t.Ca(r.ya)&&kg(n)}async function sN(e,t){const n=Nt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.wa.indexOf(t);o>=0&&(r.wa.splice(o,1),r.wa.length===0?i=t.ba()?0:1:!r.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function iN(e,t){const n=Nt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.wa)a.Ca(i)&&(s=!0);o.ya=i}}s&&kg(n)}function rN(e,t,n){const s=Nt(e),i=s.queries.get(t);if(i)for(const r of i.wa)r.onError(n);s.queries.delete(t)}function kg(e){e.Da.forEach(t=>{t.next()})}var Zf,ky;(ky=Zf||(Zf={})).Fa="default",ky.Cache="cache";class oN{constructor(t,n,s){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new $o(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Zf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(t){this.key=t}}class QE{constructor(t){this.key=t}}class aN{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ut(),this.mutatedKeys=Ut(),this.Xa=mE(t),this.eu=new xo(this.Xa)}get tu(){return this.Ha}nu(t,n){const s=n?n.ru:new Cy,i=n?n.eu:this.eu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,d)=>{const f=i.get(u),p=Kh(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;f&&p?f.data.isEqual(p.data)?m!==_&&(s.track({type:3,doc:p}),y=!0):this.iu(f,p)||(s.track({type:2,doc:p}),y=!0,(l&&this.Xa(p,l)>0||c&&this.Xa(p,c)<0)&&(a=!0)):!f&&p?(s.track({type:0,doc:p}),y=!0):f&&!p&&(s.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(p?(o=o.add(p),r=_?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{eu:o,ru:s,Ds:a,mutatedKeys:r}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const o=t.ru.pa();o.sort((u,d)=>function(p,m){const _=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{At:y})}};return _(p)-_(m)}(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(s),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new $o(this.query,t.eu,r,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Cy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Ut(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const n=[];return t.forEach(s=>{this.Za.has(s)||n.push(new QE(s))}),this.Za.forEach(s=>{t.has(s)||n.push(new XE(s))}),n}uu(t){this.Ha=t.qs,this.Za=Ut();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return $o.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Dg="SyncEngine";class lN{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class cN{constructor(t){this.key=t,this.lu=!1}}class uN{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Hr(a=>gE(a),qh),this.Tu=new Map,this.Iu=new Set,this.du=new _e(wt.comparator),this.Eu=new Map,this.Au=new bg,this.Ru={},this.Vu=new Map,this.mu=Fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function hN(e,t,n=!0){const s=sI(e);let i;const r=s.Pu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.cu()):i=await JE(s,t,n,!0),i}async function dN(e,t){const n=sI(e);await JE(n,t,!0,!1)}async function JE(e,t,n,s){const i=await PL(e.localStore,gs(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await fN(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&zE(e.remoteStore,i),a}async function fN(e,t,n,s,i){e.gu=(d,f,p)=>async function(_,y,x,M){let E=y.view.nu(x);E.Ds&&(E=await Ty(_.localStore,y.query,!1).then(({documents:I})=>y.view.nu(I,E)));const b=M&&M.targetChanges.get(y.targetId),R=M&&M.targetMismatches.get(y.targetId)!=null,L=y.view.applyChanges(E,_.isPrimaryClient,b,R);return Ry(_,y.targetId,L._u),L.snapshot}(e,d,f,p);const r=await Ty(e.localStore,t,!0),o=new aN(t,r.qs),a=o.nu(r.documents),l=sc.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);Ry(e,n,c._u);const u=new lN(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function pN(e,t,n){const s=Nt(e),i=s.Pu.get(t),r=s.Tu.get(i.targetId);if(r.length>1)return s.Tu.set(i.targetId,r.filter(o=>!qh(o,t))),void s.Pu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Qf(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Ig(s.remoteStore,i.targetId),tp(s,i.targetId)}).catch(ta)):(tp(s,i.targetId),await Qf(s.localStore,i.targetId,!0))}async function gN(e,t){const n=Nt(e),s=n.Pu.get(t),i=n.Tu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ig(n.remoteStore,s.targetId))}async function mN(e,t,n){const s=EN(e);try{const i=await function(o,a){const l=Nt(o),c=fe.now(),u=a.reduce((p,m)=>p.add(m.key),Ut());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Zs(),_=Ut();return l.Os.getEntries(p,u).next(y=>{m=y,m.forEach((x,M)=>{M.isValidDocument()||(_=_.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(y=>{d=y;const x=[];for(const M of a){const E=P2(M,d.get(M.key).overlayedDocument);E!=null&&x.push(new zr(M.key,E,lE(E.value.mapValue),qs.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(y=>{f=y;const x=y.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(p,y.batchId,x)})}).then(()=>({batchId:f.batchId,changes:_E(d)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new _e(Ft)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(s,i.batchId,n),await rc(s,i.changes),await td(s.remoteStore)}catch(i){const r=Pg(i,"Failed to persist write");n.reject(r)}}async function ZE(e,t){const n=Nt(e);try{const s=await AL(n.localStore,t);t.targetChanges.forEach((i,r)=>{const o=n.Eu.get(r);o&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Zt(o.lu,14607):i.removedDocuments.size>0&&(Zt(o.lu,42227),o.lu=!1))}),await rc(n,s,t)}catch(s){await ta(s)}}function Dy(e,t,n){const s=Nt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Pu.forEach((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Nt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.wa)f.va(a)&&(c=!0)}),c&&kg(l)}(s.eventManager,t),i.length&&s.hu.J_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function vN(e,t,n){const s=Nt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Eu.get(t),r=i&&i.key;if(r){let o=new _e(wt.comparator);o=o.insert(r,tn.newNoDocument(r,Dt.min()));const a=Ut().add(r),l=new Qh(Dt.min(),new Map,new _e(Ft),o,a);await ZE(s,l),s.du=s.du.remove(r),s.Eu.delete(t),Rg(s)}else await Qf(s.localStore,t,!1).then(()=>tp(s,t,n)).catch(ta)}async function _N(e,t){const n=Nt(e),s=t.batch.batchId;try{const i=await SL(n.localStore,t);eI(n,s,null),tI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await rc(n,i)}catch(i){await ta(i)}}async function yN(e,t,n){const s=Nt(e);try{const i=await function(o,a){const l=Nt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Zt(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,t);eI(s,t,n),tI(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await rc(s,i)}catch(i){await ta(i)}}function tI(e,t){(e.Vu.get(t)||[]).forEach(n=>{n.resolve()}),e.Vu.delete(t)}function eI(e,t,n){const s=Nt(e);let i=s.Ru[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Ru[s.currentUser.toKey()]=i}}function tp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Tu.get(t))e.Pu.delete(s),n&&e.hu.pu(s,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(s=>{e.Au.containsKey(s)||nI(e,s)})}function nI(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ig(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Rg(e))}function Ry(e,t,n){for(const s of n)s instanceof XE?(e.Au.addReference(s.key,t),bN(e,s)):s instanceof QE?(ut(Dg,"Document no longer in limbo: "+s.key),e.Au.removeReference(s.key,t),e.Au.containsKey(s.key)||nI(e,s.key)):It(19791,{yu:s})}function bN(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Iu.has(s)||(ut(Dg,"New document in limbo: "+n),e.Iu.add(s),Rg(e))}function Rg(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new wt(pe.fromString(t)),s=e.mu.next();e.Eu.set(s,new cN(n)),e.du=e.du.insert(n,s),zE(e.remoteStore,new Ai(gs(gg(n.path)),s,"TargetPurposeLimboResolution",Hh.ue))}}async function rc(e,t,n){const s=Nt(e),i=[],r=[],o=[];s.Pu.isEmpty()||(s.Pu.forEach((a,l)=>{o.push(s.gu(l,t,n).then(c=>{var u;if((c||n)&&s.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;s.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Tg.Es(l.targetId,c);r.push(d)}}))}),await Promise.all(o),s.hu.J_(i),await async function(l,c){const u=Nt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,f=>U.forEach(f.Is,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>U.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!ea(d))throw d;ut(Eg,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.Fs.get(f),m=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(m);u.Fs=u.Fs.insert(f,_)}}}(s.localStore,r))}async function wN(e,t){const n=Nt(e);if(!n.currentUser.isEqual(t)){ut(Dg,"User change. New user:",t.toKey());const s=await BE(n.localStore,t);n.currentUser=t,function(r,o){r.Vu.forEach(a=>{a.forEach(l=>{l.reject(new _t(q.CANCELLED,o))})}),r.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await rc(n,s.Bs)}}function TN(e,t){const n=Nt(e),s=n.Eu.get(t);if(s&&s.lu)return Ut().add(s.key);{let i=Ut();const r=n.Tu.get(t);if(!r)return i;for(const o of r){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function sI(e){const t=Nt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vN.bind(null,t),t.hu.J_=iN.bind(null,t.eventManager),t.hu.pu=rN.bind(null,t.eventManager),t}function EN(e){const t=Nt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_N.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yN.bind(null,t),t}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return IL(this.persistence,new wL,t.initialUser,this.serializer)}Du(t){return new $E(wg.Vi,this.serializer)}bu(t){return new DL}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class IN extends Xu{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){Zt(this.persistence.referenceDelegate instanceof Ku,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new oL(s,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new $E(s=>Ku.Vi(s,n),this.serializer)}}class ep{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Dy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=wN.bind(null,this.syncEngine),await ZL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new eN}()}createDatastore(t){const n=Jh(t.databaseInfo.databaseId),s=function(r){return new NL(r)}(t.databaseInfo);return function(r,o,a,l){return new BL(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,i,r,o,a){return new jL(s,i,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Dy(this.syncEngine,n,0),function(){return Sy.C()?new Sy:new RL}())}createSyncEngine(t,n){return function(i,r,o,a,l,c,u){const d=new uN(i,r,o,a,l,c);return u&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const r=Nt(i);ut(Lr,"RemoteStore shutting down."),r.Ia.add(5),await ic(r),r.Ea.shutdown(),r.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Js("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="FirestoreClient";class AN{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{ut(Yi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ut(Yi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Pg(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Qd(e,t){e.asyncQueue.verifyOperationInProgress(),ut(Yi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await BE(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>{Bi("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{ut("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Bi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),e._offlineComponents=t}async function My(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xN(e);ut(Yi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>xy(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>xy(t.remoteStore,i)),e._onlineComponents=t}async function xN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ut(Yi,"Using user provided OfflineComponentProvider");try{await Qd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),await Qd(e,new Xu)}}else ut(Yi,"Using default OfflineComponentProvider"),await Qd(e,new IN(void 0));return e._offlineComponents}async function iI(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ut(Yi,"Using user provided OnlineComponentProvider"),await My(e,e._uninitializedComponentsProvider._online)):(ut(Yi,"Using default OnlineComponentProvider"),await My(e,new ep))),e._onlineComponents}function CN(e){return iI(e).then(t=>t.syncEngine)}async function PN(e){const t=await iI(e),n=t.eventManager;return n.onListen=hN.bind(null,t.syncEngine),n.onUnlisten=pN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=gN.bind(null,t.syncEngine),n}function kN(e,t,n={}){const s=new Ni;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new SN({next:f=>{u.Ou(),o.enqueueAndForget(()=>sN(r,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new _t(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new _t(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new oN(gg(a.path),u,{includeMetadataChanges:!0,ka:!0});return nN(r,d)}(await PN(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firestore.googleapis.com",Ly=!0;class Ny{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oI,this.ssl=Ly}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ly;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=FE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iL)throw new _t(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}HO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rI((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _t(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _t(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _t(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Mg{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _t(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new _t(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ny(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new MO;switch(s.type){case"firstParty":return new VO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _t(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Oy.get(n);s&&(ut("ComponentProvider","Removing Datastore"),Oy.delete(n),s.terminate())}(this),Promise.resolve()}}function DN(e,t,n,s={}){var i;e=xl(e,Mg);const r=Xo(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;r&&(tT(`https://${l}`),eT("Firestore",!0)),o.host!==oI&&o.host!==l&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:r,emulatorOptions:s});if(!kr(c,a)&&(e._setSettings(c),s.mockUserToken)){let u,d;if(typeof s.mockUserToken=="string")u=s.mockUserToken,d=Je.MOCK_USER;else{u=zk(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new _t(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Je(f)}e._authCredentials=new OO(new GT(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Og(this.firestore,t,this._query)}}class Ve{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ve(this.firestore,t,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(ec(n,Ve._jsonSchema))return new Ve(t,s||null,new wt(pe.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:xe("string",Ve._jsonSchemaVersion),referencePath:xe("string")};class Ol extends Og{constructor(t,n,s){super(t,n,gg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ve(this.firestore,null,new wt(t))}withConverter(t){return new Ol(this.firestore,t,this._path)}}function np(e,t,...n){if(e=Hn(e),arguments.length===1&&(t=lg.newId()),jO("doc","path",t),e instanceof Mg){const s=pe.fromString(t,...n);return X_(s),new Ve(e,null,new wt(s))}{if(!(e instanceof Ve||e instanceof Ol))throw new _t(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(pe.fromString(t,...n));return X_(s),new Ve(e.firestore,e instanceof Ol?e.converter:null,new wt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="AsyncQueue";class Fy{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new jE(this,"async_queue_retry"),this.oc=()=>{const s=Xd();s&&ut(Vy,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=t;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ni;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!ea(t))throw t;ut(Vy,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const n=this._c.then(()=>(this.nc=!0,t().catch(s=>{throw this.tc=s,this.nc=!1,Js("INTERNAL UNHANDLED ERROR: ",$y(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(t,n,s){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=Cg.createAndSchedule(this,t,n,s,r=>this.lc(r));return this.ec.push(i),i}ac(){this.tc&&It(47125,{hc:$y(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function $y(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Lg extends Mg{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new Fy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Fy(t),this._firestoreClient=void 0,await t}}}function RN(e,t){const n=typeof e=="object"?e:rT(),s=typeof e=="string"?e:t||Uu,i=Qp(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=jk("firestore");r&&DN(i,...r)}return i}function aI(e){if(e._terminated)throw new _t(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||MN(e),e._firestoreClient}function MN(e){var t,n,s;const i=e._freezeSettings(),r=function(a,l,c,u){return new t2(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,rI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new AN(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ln(Ye.fromBase64String(t))}catch(n){throw new _t(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ln(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ec(t,Ln._jsonSchema))return Ln.fromBase64String(t.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:xe("string",Ln._jsonSchemaVersion),bytes:xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(t){if(ec(t,vs._jsonSchema))return new vs(t.latitude,t.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:xe("string",vs._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ec(t,_s._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new _s(t.vectorValues);throw new _t(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:xe("string",_s._jsonSchemaVersion),vectorValues:xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=/^__.*__$/;class LN{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new zr(t,this.data,this.fieldMask,n,this.fieldTransforms):new nc(t,this.data,n,this.fieldTransforms)}}function cI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ec:e})}}class Vg{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Vg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:s,mc:!1});return i.fc(t),i}gc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:s,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Qu(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(cI(this.Ec)&&ON.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class NN{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Jh(t)}Dc(t,n,s,i=!1){return new Vg({Ec:t,methodName:n,bc:s,path:ze.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function VN(e){const t=e._freezeSettings(),n=Jh(e._databaseId);return new NN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FN(e,t,n,s,i,r={}){const o=e.Dc(r.merge||r.mergeFields?2:0,t,n,i);fI("Data must be an object, but it was:",o,s);const a=hI(s,o);let l,c;if(r.merge)l=new Xn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const d of r.mergeFields){const f=$N(t,d,n);if(!o.contains(f))throw new _t(q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);UN(u,f)||u.push(f)}l=new Xn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new LN(new On(a),l,c)}function uI(e,t){if(dI(e=Hn(e)))return fI("Unsupported field value:",t,e),hI(e,t);if(e instanceof lI)return function(s,i){if(!cI(i.Ec))throw i.wc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let l=uI(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(s,i){if((s=Hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return E2(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=fe.fromDate(s);return{timestampValue:qu(i.serializer,r)}}if(s instanceof fe){const r=new fe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qu(i.serializer,r)}}if(s instanceof vs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ln)return{bytesValue:DE(i.serializer,s._byteString)};if(s instanceof Ve){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:yg(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof _s)return function(o,a){return{mapValue:{fields:{[rE]:{stringValue:aE},[ju]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return mg(a.serializer,c)})}}}}}}(s,i);throw i.wc(`Unsupported field value: ${cg(s)}`)}(e,t)}function hI(e,t){const n={};return ZT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jr(e,(s,i)=>{const r=uI(i,t.Vc(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function dI(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof fe||e instanceof vs||e instanceof Ln||e instanceof Ve||e instanceof lI||e instanceof _s)}function fI(e,t,n){if(!dI(n)||!QT(n)){const s=cg(n);throw s==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+s)}}function $N(e,t,n){if((t=Hn(t))instanceof Ng)return t._internalPath;if(typeof t=="string")return pI(e,t);throw Qu("Field path arguments must be of type string or ",e,!1,void 0,n)}const BN=new RegExp("[~\\*/\\[\\]]");function pI(e,t,n){if(t.search(BN)>=0)throw Qu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ng(...t.split("."))._internalPath}catch{throw Qu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Qu(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new _t(q.INVALID_ARGUMENT,a+e+l)}function UN(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(mI("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jN extends gI{data(){return super.data()}}function mI(e,t){return typeof t=="string"?pI(e,t):t instanceof Ng?t._internalPath:t._delegate._internalPath}class HN{convertValue(t,n="none"){switch(zi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Hi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw It(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return jr(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(t){var n,s,i;const r=(i=(s=(n=t.fields)===null||n===void 0?void 0:n[ju].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>Ee(o.doubleValue));return new _s(r)}convertGeoPoint(t){return new vs(Ee(t.latitude),Ee(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Wh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Pl(t));default:return null}}convertTimestamp(t){const n=ji(t);return new fe(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=pe.fromString(t);Zt(VE(s),9688,{name:t});const i=new kl(s.get(1),s.get(3)),r=new wt(s.popFirst(5));return i.isEqual(n)||Js(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class $a{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ar extends gI{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(mI("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ar._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ar._jsonSchema={type:xe("string",Ar._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class gu extends Ar{data(t={}){return super.data(t)}}class rl{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new $a(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new gu(this._firestore,this._userDataWriter,s.key,s,new $a(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new gu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new gu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:WN(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=rl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=lg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(e){e=xl(e,Ve);const t=xl(e.firestore,Lg);return kN(aI(t),e._key).then(n=>GN(t,e,n))}rl._jsonSchemaVersion="firestore/querySnapshot/1.0",rl._jsonSchema={type:xe("string",rl._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class YN extends HN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ln(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function qN(e,t,n){e=xl(e,Ve);const s=xl(e.firestore,Lg),i=zN(e.converter,t,n);return KN(s,[FN(VN(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,qs.none())])}function KN(e,t){return function(s,i){const r=new Ni;return s.asyncQueue.enqueueAndForget(async()=>mN(await CN(s),i,r)),r.promise}(aI(e),t)}function GN(e,t,n){const s=n.docs.get(t._key),i=new YN(e);return new Ar(e,i,t._key,s,new $a(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){Zo=i})(Qo),Oo(new Dr("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Lg(new LO(s.getProvider("auth-internal")),new FO(o,s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _t(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(c.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Oi(W_,Y_,t),Oi(W_,Y_,"esm2017")})();const XN={apiKey:"AIzaSyDXxGvAaldYqYysPQHlMkQXbOVTpaxnjuA",authDomain:"chikh-counter.firebaseapp.com",projectId:"chikh-counter",storageBucket:"chikh-counter.firebasestorage.app",messagingSenderId:"600153083247",appId:"1:600153083247:web:f214631934a7f62d25ec9a"},_I=iT(XN),qi=DO(_I),sp=RN(_I);async function yI(){const e=qi.currentUser;if(!e)return{};const t=np(sp,"users",e.uid),n=await vI(t);return n.exists()?n.data().groups||{}:{}}const QN={class:"clock-container"},JN={class:"clock-face",viewBox:"0 0 100 100"},ZN={id:"clock-bg",cx:"50%",cy:"50%",r:"100%"},tV=["stop-color"],eV=["stop-color"],nV={id:"dot-gradient",x1:"0",y1:"0",x2:"1",y2:"1"},sV=["stop-color"],iV=["stop-color"],rV=["x1","y1","x2","y2"],oV=["cx","cy","r"],aV=["x","y","fill"],lV={__name:"ClockGroups",props:{groups:{type:Array,required:!0}},setup(e){const t=e;function n(u){const d=new Date(u.start);let f=d.getHours()%12,p=d.getMinutes();return f+p/60}function s(u,d){const f=(u-3)/12*2*Math.PI;return{x:50+d*Math.cos(f),y:50+d*Math.sin(f)}}function i(u){return 8}const r=Lt(null),o=Lt({});function a(u){return{transition:`r 0.5s cubic-bezier(.68,-0.55,.27,1.55) ${(u*.07).toFixed(2)}s`}}function l(){return getComputedStyle(document.documentElement).getPropertyValue("--primary")}function c(){return getComputedStyle(document.documentElement).getPropertyValue("--accent")}return typeof window<"u"&&(window.addDebugGroup=function(u,d=0,f=1){const p=new Date;p.setHours(u),p.setMinutes(d),p.setSeconds(0),p.setMilliseconds(0);const m={start:p.getTime(),count:f};if(Array.isArray(t.groups))t.groups.push(m);else{const _=P1();_&&_.emit&&_.emit("add-debug-group",m)}return m}),(u,d)=>(ht(),vt("div",QN,[(ht(),vt("svg",JN,[X("defs",null,[X("radialGradient",ZN,[X("stop",{offset:"0%","stop-color":c(),"stop-opacity":"0.4"},null,8,tV),X("stop",{offset:"100%","stop-color":l(),"stop-opacity":"1.0"},null,8,eV)]),X("linearGradient",nV,[X("stop",{offset:"0%","stop-color":c()},null,8,sV),X("stop",{offset:"100%","stop-color":l()},null,8,iV)])]),d[0]||(d[0]=X("circle",{cx:"50",cy:"50",r:"20",fill:"url(#clock-bg)"},null,-1)),d[1]||(d[1]=X("circle",{cx:"50",cy:"50",r:"30",class:"clock-outline",fill:"none"},null,-1)),X("g",null,[(ht(),vt(re,null,Cn(12,f=>X("line",{key:f,x1:s(f,40).x,y1:s(f,40).y,x2:s(f,40).x,y2:s(f,40).y,class:"hour-mark"},null,8,rV)),64))]),X("g",null,[(ht(!0),vt(re,null,Cn(e.groups,(f,p)=>(ht(),vt("g",{key:f.start},[X("circle",{cx:s(n(f),40).x,cy:s(n(f),40).y,r:i(f.count),class:"group-dot",style:sn(a(p)),fill:"url(#dot-gradient)"},null,12,oV),X("text",{x:s(n(f),40).x,y:s(n(f),40).y,"text-anchor":"middle","dominant-baseline":"central","font-size":"10","font-weight":"bold",fill:c(),style:{"pointer-events":"none","user-select":"none","text-shadow":"0 2px 8px #00000025"}},We(f.count),9,aV)]))),128))]),d[2]||(d[2]=X("circle",{cx:"50",cy:"50",r:"3",fill:"#555555"},null,-1))])),Ct(Kl,{name:"fade"},{default:me(()=>{var f;return[r.value!==null&&e.groups[r.value]?(ht(),vt("div",{key:0,class:"dot-count",style:sn(o.value)},We((f=e.groups[r.value])==null?void 0:f.count),5)):pn("",!0)]}),_:1})]))}},cV=Xi(lV,[["__scopeId","data-v-ccd9b32d"]]);const uV={class:"menu-panel"},hV={__name:"BurgerMenu",setup(e){const t=Lt(!1),n=Kp(),s=async()=>{await bM(qi),t.value=!1,n.push("/auth")};return(i,r)=>{const o=Fs("router-link");return ht(),vt("div",null,[X("button",{class:"burger-btn",onClick:r[0]||(r[0]=a=>t.value=!t.value)},r[5]||(r[5]=[X("span",null,null,-1),X("span",null,null,-1),X("span",null,null,-1)])),Ct(Kl,{name:"slide"},{default:me(()=>[t.value?(ht(),vt("div",{key:0,class:"menu-overlay",onClick:r[4]||(r[4]=Yp(a=>t.value=!1,["self"]))},[X("nav",uV,[Ct(o,{to:"/stats",class:"menu-link",onClick:r[1]||(r[1]=a=>t.value=!1),"aria-label":"Статистика"},{default:me(()=>r[6]||(r[6]=[X("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[X("path",{d:"M4 18V10M9 18V6M15 18V14M20 18V2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_:1,__:[6]}),Ct(o,{to:"/calendar",class:"menu-link",onClick:r[2]||(r[2]=a=>t.value=!1),"aria-label":"Календар"},{default:me(()=>r[7]||(r[7]=[X("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[X("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor","stroke-width":"2"}),X("path",{d:"M16 3v4M8 3v4M3 9h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])),_:1,__:[7]}),Ct(o,{to:"/settings",class:"menu-link",onClick:r[3]||(r[3]=a=>t.value=!1),"aria-label":"Налаштування"},{default:me(()=>r[8]||(r[8]=[X("svg",{viewBox:"0 0 45.973 45.973",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M43.454,18.443h-2.437c-0.453-1.766-1.16-3.42-2.082-4.933l1.752-1.756c0.473-0.473,0.733-1.104,0.733-1.774 c0-0.669-0.262-1.301-0.733-1.773l-2.92-2.917c-0.947-0.948-2.602-0.947-3.545-0.001l-1.826,1.815 C30.9,6.232,29.296,5.56,27.529,5.128V2.52c0-1.383-1.105-2.52-2.488-2.52h-4.128c-1.383,0-2.471,1.137-2.471,2.52v2.607 c-1.766,0.431-3.38,1.104-4.878,1.977l-1.825-1.815c-0.946-0.948-2.602-0.947-3.551-0.001L5.27,8.205 C4.802,8.672,4.535,9.318,4.535,9.978c0,0.669,0.259,1.299,0.733,1.772l1.752,1.76c-0.921,1.513-1.629,3.167-2.081,4.933H2.501 C1.117,18.443,0,19.555,0,20.935v4.125c0,1.384,1.117,2.471,2.501,2.471h2.438c0.452,1.766,1.159,3.43,2.079,4.943l-1.752,1.763 c-0.474,0.473-0.734,1.106-0.734,1.776s0.261,1.303,0.734,1.776l2.92,2.919c0.474,0.473,1.103,0.733,1.772,0.733 s1.299-0.261,1.773-0.733l1.833-1.816c1.498,0.873,3.112,1.545,4.878,1.978v2.604c0,1.383,1.088,2.498,2.471,2.498h4.128 c1.383,0,2.488-1.115,2.488-2.498v-2.605c1.767-0.432,3.371-1.104,4.869-1.977l1.817,1.812c0.474,0.475,1.104,0.735,1.775,0.735 c0.67,0,1.301-0.261,1.774-0.733l2.92-2.917c0.473-0.472,0.732-1.103,0.734-1.772c0-0.67-0.262-1.299-0.734-1.773l-1.75-1.77 c0.92-1.514,1.627-3.179,2.08-4.943h2.438c1.383,0,2.52-1.087,2.52-2.471v-4.125C45.973,19.555,44.837,18.443,43.454,18.443z M22.976,30.85c-4.378,0-7.928-3.517-7.928-7.852c0-4.338,3.55-7.85,7.928-7.85c4.379,0,7.931,3.512,7.931,7.85 C30.906,27.334,27.355,30.85,22.976,30.85z",fill:"currentColor"})],-1)])),_:1,__:[8]}),X("button",{class:"menu-link logout-link",onClick:s,"aria-label":"Logout"},r[9]||(r[9]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M16 17L21 12L16 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),X("path",{d:"M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),X("path",{d:"M12 19C7.58172 19 4 15.4183 4 11C4 6.58172 7.58172 3 12 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))])])):pn("",!0)]),_:1})])}}},dV=Xi(hV,[["__scopeId","data-v-fde26930"]]);const fV={class:"today-label-fixed"},pV={class:"slide-parent"},gV={class:"center-content"},mV={__name:"Home",setup(e){const t=Lt(localStorage.getItem("color-primary"));function n(S){let P=S.replace("#","");P.length===3&&(P=P.split("").map(ot=>ot+ot).join(""));const C=parseInt(P,16);return[C>>16,C>>8&255,C&255]}function s([S,P,C]){return"#"+[S,P,C].map(ot=>ot.toString(16).padStart(2,"0")).join("")}function i(S,P){const[C,ot,K]=n(S),lt=P<0?0:255,at=Math.abs(P);return s([Math.round((lt-C)*at+C),Math.round((lt-ot)*at+ot),Math.round((lt-K)*at+K)])}const r=G(()=>{const S=t.value,P=i(S,.5),C=i(S,-.3);return`linear-gradient(135deg, ${P} 0%, ${S} 50%, ${C} 100%)`}),o=Lt(0),a=Lt(!1),l=Lt([]),c=Lt({}),u=Lt(!0),d=Lt(null),f=Lt(new Date),p=G(()=>d.value?f.value.getFullYear()===d.value.getFullYear()&&f.value.getMonth()===d.value.getMonth()&&f.value.getDate()===d.value.getDate():!1);function m(S){return`${S.getFullYear()}-${S.getMonth()+1}-${S.getDate()}`}function _(S){f.value=new Date(S.getFullYear(),S.getMonth(),S.getDate())}const y=Lt("");function x(){const S=new Date(f.value);S.setDate(S.getDate()-1),y.value="right",requestAnimationFrame(()=>{_(S)})}function M(){if(!p.value){const S=new Date(f.value);if(S.setDate(S.getDate()+1),S.getFullYear()>d.value.getFullYear()||S.getFullYear()===d.value.getFullYear()&&S.getMonth()>d.value.getMonth()||S.getFullYear()===d.value.getFullYear()&&S.getMonth()===d.value.getMonth()&&S.getDate()>d.value.getDate())return;y.value="left",requestAnimationFrame(()=>{_(S)})}}function E(){d.value&&(p.value||(y.value="left",requestAnimationFrame(()=>{_(new Date(d.value.getFullYear(),d.value.getMonth(),d.value.getDate()))})))}function b(){const S=m(f.value);l.value=c.value[S]||[];const P=l.value.reduce((C,ot)=>C+ot.count,0);o.value!==P&&(a.value=!0,setTimeout(()=>{a.value=!1},250)),o.value=P}async function R(){u.value=!0;const S=qi.currentUser;if(!S){u.value=!1;return}const P=np(sp,"users",S.uid),C=await vI(P);C.exists()?c.value=C.data().groups||{}:c.value={},b(),u.value=!1}async function L(){const S=qi.currentUser;if(!S)return;const P=np(sp,"users",S.uid);await qN(P,{groups:c.value},{merge:!0})}function I(){localStorage.setItem("groups_"+m(f.value),JSON.stringify(l.value))}async function w(){const S=new Date().getTime(),P=m(f.value);c.value[P]||(c.value[P]=[]);const C=c.value[P];if(C.length===0)C.push({start:S,count:1});else{const ot=C[C.length-1],K=30*60*1e3;S-ot.start<K?ot.count++:C.push({start:S,count:1})}l.value=C,o.value=l.value.reduce((ot,K)=>ot+K.count,0),c.value[P]=C,I(),await L()}Kp();const T=G(()=>f.value.toLocaleDateString("uk-UA",{weekday:"long",month:"long",day:"numeric"}).replace(/^./,P=>P.toUpperCase()));en(f,b);const k=G(()=>p.value?0:1);return Ss(()=>{const S=new Date;d.value=new Date(S.getFullYear(),S.getMonth(),S.getDate()),_(new Date(d.value)),R()}),(S,P)=>{const C=c1("touch");return ml((ht(),vt("main",{class:"main-container",style:sn({background:r.value,filter:`grayscale(${k.value})`,transition:"filter 0.4s"})},[Ct(dV),X("div",fV,We(T.value),1),X("div",pV,[Ct(Kl,{name:y.value==="left"?"slide-left":y.value==="right"?"slide-right":"",mode:"out-in",onAfterEnter:P[1]||(P[1]=ot=>y.value="")},{default:me(()=>[(ht(),vt("div",{class:"swipe-content",key:m(f.value)},[P[2]||(P[2]=X("div",{class:"spacer-top"},null,-1)),X("div",gV,[X("div",{class:oe(["counter",{animated:a.value}])},We(o.value),3),Ct(cV,{groups:l.value},null,8,["groups"])]),P[3]||(P[3]=X("div",{class:"spacer-bottom"},null,-1)),X("button",{class:"tap-btn",onClick:P[0]||(P[0]=ot=>p.value?w():E())},We(p.value?"ЧІХ":"Назад"),1)]))]),_:1},8,["name"])])],4)),[[C,x,"swipe",{right:!0}],[C,M,"swipe",{left:!0}]])}}},vV=Xi(mV,[["__scopeId","data-v-0d140216"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function oc(e){return e+.5|0}const xi=(e,t,n)=>Math.max(Math.min(e,n),t);function Ba(e){return xi(oc(e*2.55),0,255)}function Vi(e){return xi(oc(e*255),0,255)}function $s(e){return xi(oc(e/2.55)/100,0,1)}function By(e){return xi(oc(e*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ip=[..."0123456789ABCDEF"],_V=e=>ip[e&15],yV=e=>ip[(e&240)>>4]+ip[e&15],Nc=e=>(e&240)>>4===(e&15),bV=e=>Nc(e.r)&&Nc(e.g)&&Nc(e.b)&&Nc(e.a);function wV(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Rn[e[1]]*17,g:255&Rn[e[2]]*17,b:255&Rn[e[3]]*17,a:t===5?Rn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Rn[e[1]]<<4|Rn[e[2]],g:Rn[e[3]]<<4|Rn[e[4]],b:Rn[e[5]]<<4|Rn[e[6]],a:t===9?Rn[e[7]]<<4|Rn[e[8]]:255})),n}const TV=(e,t)=>e<255?t(e):"";function EV(e){var t=bV(e)?_V:yV;return e?"#"+t(e.r)+t(e.g)+t(e.b)+TV(e.a,t):void 0}const IV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bI(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function SV(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function AV(e,t,n){const s=bI(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function xV(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function Fg(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=xV(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function $g(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Vi)}function Bg(e,t,n){return $g(bI,e,t,n)}function CV(e,t,n){return $g(AV,e,t,n)}function PV(e,t,n){return $g(SV,e,t,n)}function wI(e){return(e%360+360)%360}function kV(e){const t=IV.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Ba(+t[5]):Vi(+t[5]));const i=wI(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=CV(i,r,o):t[1]==="hsv"?s=PV(i,r,o):s=Bg(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function DV(e,t){var n=Fg(e);n[0]=wI(n[0]+t),n=Bg(n),e.r=n[0],e.g=n[1],e.b=n[2]}function RV(e){if(!e)return;const t=Fg(e),n=t[0],s=By(t[1]),i=By(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${$s(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Uy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function MV(){const e={},t=Object.keys(jy),n=Object.keys(Uy);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Uy[r]);r=parseInt(jy[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Vc;function OV(e){Vc||(Vc=MV(),Vc.transparent=[0,0,0,0]);const t=Vc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const LV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function NV(e){const t=LV.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Ba(o):xi(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Ba(s):xi(s,0,255)),i=255&(t[4]?Ba(i):xi(i,0,255)),r=255&(t[6]?Ba(r):xi(r,0,255)),{r:s,g:i,b:r,a:n}}}function VV(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${$s(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Jd=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ro=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function FV(e,t,n){const s=ro($s(e.r)),i=ro($s(e.g)),r=ro($s(e.b));return{r:Vi(Jd(s+n*(ro($s(t.r))-s))),g:Vi(Jd(i+n*(ro($s(t.g))-i))),b:Vi(Jd(r+n*(ro($s(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Fc(e,t,n){if(e){let s=Fg(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Bg(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function TI(e,t){return e&&Object.assign(t||{},e)}function Hy(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Vi(e[3]))):(t=TI(e,{r:0,g:0,b:0,a:1}),t.a=Vi(t.a)),t}function $V(e){return e.charAt(0)==="r"?NV(e):kV(e)}class Ll{constructor(t){if(t instanceof Ll)return t;const n=typeof t;let s;n==="object"?s=Hy(t):n==="string"&&(s=wV(t)||OV(t)||$V(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=TI(this._rgb);return t&&(t.a=$s(t.a)),t}set rgb(t){this._rgb=Hy(t)}rgbString(){return this._valid?VV(this._rgb):void 0}hexString(){return this._valid?EV(this._rgb):void 0}hslString(){return this._valid?RV(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=FV(this._rgb,t._rgb,n)),this}clone(){return new Ll(this.rgb)}alpha(t){return this._rgb.a=Vi(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=oc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fc(this._rgb,2,t),this}darken(t){return Fc(this._rgb,2,-t),this}saturate(t){return Fc(this._rgb,1,t),this}desaturate(t){return Fc(this._rgb,1,-t),this}rotate(t){return DV(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Os(){}const BV=(()=>{let e=0;return()=>e++})();function ee(e){return e==null}function ge(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Xt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Fe(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Sn(e,t){return Fe(e)?e:t}function zt(e,t){return typeof e>"u"?t:e}const UV=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ce(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function te(e,t,n,s){let i,r,o;if(ge(e))if(r=e.length,s)for(i=r-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<r;i++)t.call(n,e[i],i);else if(Xt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function Ju(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Zu(e){if(ge(e))return e.map(Zu);if(Xt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Zu(e[n[i]]);return t}return e}function EI(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function jV(e,t,n,s){if(!EI(e))return;const i=t[e],r=n[e];Xt(i)&&Xt(r)?Nl(i,r,s):t[e]=Zu(r)}function Nl(e,t,n){const s=ge(t)?t:[t],i=s.length;if(!Xt(e))return e;n=n||{};const r=n.merger||jV;let o;for(let a=0;a<i;++a){if(o=s[a],!Xt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function ol(e,t){return Nl(e,t,{merger:HV})}function HV(e,t,n){if(!EI(e))return;const s=t[e],i=n[e];Xt(s)&&Xt(i)?ol(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Zu(i))}const zy={"":e=>e,x:e=>e.x,y:e=>e.y};function zV(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function WV(e){const t=zV(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function th(e,t){return(zy[t]||(zy[t]=WV(t)))(e)}function Ug(e){return e.charAt(0).toUpperCase()+e.slice(1)}const eh=e=>typeof e<"u",Ki=e=>typeof e=="function",Wy=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function YV(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ce=Math.PI,$n=2*Ce,qV=$n+Ce,nh=Number.POSITIVE_INFINITY,KV=Ce/180,xn=Ce/2,hr=Ce/4,Yy=Ce*2/3,Ci=Math.log10,Bo=Math.sign;function al(e,t,n){return Math.abs(e-t)<n}function qy(e){const t=Math.round(e);e=al(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ci(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function GV(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function XV(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Vl(e){return!XV(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function QV(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function II(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Pi(e){return e*(Ce/180)}function jg(e){return e*(180/Ce)}function Ky(e){if(!Fe(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function JV(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Ce&&(r+=$n),{angle:r,distance:i}}function rp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ZV(e,t){return(e-t+qV)%$n-Ce}function Kn(e){return(e%$n+$n)%$n}function SI(e,t,n,s){const i=Kn(e),r=Kn(t),o=Kn(n),a=Kn(r-i),l=Kn(o-i),c=Kn(i-r),u=Kn(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function Nn(e,t,n){return Math.max(t,Math.min(n,e))}function tF(e){return Nn(e,-32768,32767)}function Ua(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function Hg(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Tr=(e,t,n,s)=>Hg(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),eF=(e,t,n)=>Hg(e,n,s=>e[s][t]>=n);function nF(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const AI=["push","pop","shift","splice","unshift"];function sF(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),AI.forEach(n=>{const s="_onData"+Ug(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Gy(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(AI.forEach(r=>{delete e[r]}),delete e._chartjs)}function iF(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const xI=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function CI(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,xI.call(window,()=>{s=!1,e.apply(t,n)}))}}function rF(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const zg=e=>e==="start"?"left":e==="end"?"right":"center",Qe=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,oF=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function aF(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(i=Math.min(Tr(l,u,d).lo,n?s:Tr(t,u,o.getPixelForValue(d)).lo),c){const _=l.slice(0,i+1).reverse().findIndex(y=>!ee(y[a.axis]));i-=Math.max(0,_)}i=Nn(i,0,s-1)}if(m){let _=Math.max(Tr(l,o.axis,f,!0).hi+1,n?0:Tr(t,u,o.getPixelForValue(f),!0).hi+1);if(c){const y=l.slice(_-1).findIndex(x=>!ee(x[a.axis]));_+=Math.max(0,y)}r=Nn(_,i,s)-i}else r=s-i}return{start:i,count:r}}function lF(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const $c=e=>e===0||e===1,Xy=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*$n/n)),Qy=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*$n/n)+1,ll={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xn)+1,easeOutSine:e=>Math.sin(e*xn),easeInOutSine:e=>-.5*(Math.cos(Ce*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>$c(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>$c(e)?e:Xy(e,.075,.3),easeOutElastic:e=>$c(e)?e:Qy(e,.075,.3),easeInOutElastic(e){return $c(e)?e:e<.5?.5*Xy(e*2,.1125,.45):.5+.5*Qy(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ll.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ll.easeInBounce(e*2)*.5:ll.easeOutBounce(e*2-1)*.5+.5};function Wg(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Jy(e){return Wg(e)?e:new Ll(e)}function Zd(e){return Wg(e)?e:new Ll(e).saturate(.5).darken(.1).hexString()}const cF=["x","y","borderWidth","radius","tension"],uF=["color","borderColor","backgroundColor"];function hF(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:uF},numbers:{type:"number",properties:cF}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function dF(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zy=new Map;function fF(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Zy.get(n);return s||(s=new Intl.NumberFormat(e,t),Zy.set(n,s)),s}function Yg(e,t,n){return fF(t,n).format(e)}const PI={values(e){return ge(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=pF(e,n)}const o=Ci(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Yg(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Ci(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?PI.numeric.call(this,e,t,n):""}};function pF(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var ed={formatters:PI};function gF(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ed.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Nr=Object.create(null),op=Object.create(null);function cl(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function tf(e,t,n){return typeof t=="string"?Nl(cl(e,t),n):Nl(cl(e,""),t)}class mF{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Zd(i.backgroundColor),this.hoverBorderColor=(s,i)=>Zd(i.borderColor),this.hoverColor=(s,i)=>Zd(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return tf(this,t,n)}get(t){return cl(this,t)}describe(t,n){return tf(op,t,n)}override(t,n){return tf(Nr,t,n)}route(t,n,s,i){const r=cl(this,t),o=cl(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Xt(l)?Object.assign({},c,l):zt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var we=new mF({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hF,dF,gF]);function vF(e){return!e||ee(e.size)||ee(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function sh(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function _F(e,t,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!ge(d))o=sh(e,i,r,o,d);else if(ge(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!ge(f)&&(o=sh(e,i,r,o,f));e.restore();const p=r.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[r[l]];r.splice(0,p)}return o}function dr(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function tb(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ap(e,t,n,s){kI(e,t,n,s,null)}function kI(e,t,n,s,i){let r,o,a,l,c,u,d,f;const p=t.pointStyle,m=t.rotation,_=t.radius;let y=(m||0)*KV;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(y),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(_)||_<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,s,i/2,_,0,0,$n):e.arc(n,s,_,0,$n),e.closePath();break;case"triangle":u=i?i/2:_,e.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*_),y+=Yy,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*_),y+=Yy,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*_),e.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(y+hr)*l,d=Math.cos(y+hr)*(i?i/2-c:l),a=Math.sin(y+hr)*l,f=Math.sin(y+hr)*(i?i/2-c:l),e.arc(n-d,s-a,c,y-Ce,y-xn),e.arc(n+f,s-o,c,y-xn,y),e.arc(n+d,s+a,c,y,y+xn),e.arc(n-f,s+o,c,y+xn,y+Ce),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*_,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}y+=hr;case"rectRot":d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+f,s-o),e.lineTo(n+d,s+a),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":y+=hr;case"cross":d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),y+=hr,d=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,f=Math.sin(y)*(i?i/2:_),e.moveTo(n-d,s-a),e.lineTo(n+d,s+a),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(y)*_,a=Math.sin(y)*_,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(y)*(i?i/2:_),s+Math.sin(y)*_);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function zs(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function qg(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Kg(e){e.restore()}function yF(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function bF(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function wF(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ee(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function TF(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function EF(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Vr(e,t,n,s,i,r={}){const o=ge(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,wF(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&EF(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),ee(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),TF(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function ih(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Ce,Ce,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Ce,xn,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,xn,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-xn,!0),e.lineTo(n+o.topLeft,s)}const IF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function AF(e,t){const n=(""+e).match(IF);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const xF=e=>+e||0;function DI(e,t){const n={},s=Xt(t),i=s?Object.keys(t):t,r=Xt(e)?s?o=>zt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=xF(r(o));return n}function CF(e){return DI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Co(e){return DI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function on(e){const t=CF(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Me(e,t){e=e||{},t=t||we.font;let n=zt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=zt(e.style,t.style);s&&!(""+s).match(SF)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:zt(e.family,t.family),lineHeight:AF(zt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:zt(e.weight,t.weight),string:""};return i.string=vF(i),i}function Bc(e,t,n,s){let i=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),n!==void 0&&ge(a)&&(a=a[n%a.length],i=!1),a!==void 0))return s&&!i&&(s.cacheable=!1),a}function PF(e,t,n){const{min:s,max:i}=e,r=UV(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Zi(e,t){return Object.assign(Object.create(e),t)}function Gg(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=LI("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Gg([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return MI(a,l,()=>VF(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return nb(a).includes(l)},ownKeys(a){return nb(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Uo(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:RI(e,s),setContext:r=>Uo(e,r,n,s),override:r=>Uo(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return MI(r,o,()=>DF(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function RI(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Ki(n)?n:()=>n,isIndexable:Ki(s)?s:()=>s}}const kF=(e,t)=>e?e+Ug(t):t,Xg=(e,t)=>Xt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function MI(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function DF(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return Ki(a)&&o.isScriptable(t)&&(a=RF(t,a,e,n)),ge(a)&&a.length&&(a=MF(t,a,e,o.isIndexable)),Xg(t,a)&&(a=Uo(a,i,r&&r[t],o)),a}function RF(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),Xg(e,l)&&(l=Qg(i._scopes,i,e,l)),l}function MF(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Xt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=Qg(c,i,e,u);t.push(Uo(d,r,o&&o[e],a))}}return t}function OI(e,t,n){return Ki(e)?e(t,n):e}const OF=(e,t)=>e===!0?t:typeof e=="string"?th(t,e):void 0;function LF(e,t,n,s,i){for(const r of t){const o=OF(n,r);if(o){e.add(o);const a=OI(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Qg(e,t,n,s){const i=t._rootScopes,r=OI(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=eb(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=eb(a,o,r,l,s),l===null)?!1:Gg(Array.from(a),[""],i,r,()=>NF(t,n,s))}function eb(e,t,n,s,i){for(;n;)n=LF(e,t,n,s,i);return n}function NF(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return ge(i)&&Xt(n)?n:i||{}}function VF(e,t,n,s){let i;for(const r of t)if(i=LI(kF(r,e),n),typeof i<"u")return Xg(e,i)?Qg(n,s,e,i):i}function LI(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function nb(e){let t=e._keys;return t||(t=e._keys=FF(e._scopes)),t}function FF(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}const $F=Number.EPSILON||1e-14,jo=(e,t)=>t<e.length&&!e[t].skip&&e[t],NI=e=>e==="x"?"y":"x";function BF(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=rp(r,i),l=rp(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function UF(e,t,n){const s=e.length;let i,r,o,a,l,c=jo(e,0);for(let u=0;u<s-1;++u)if(l=c,c=jo(e,u+1),!(!l||!c)){if(al(t[u],0,$F)){n[u]=n[u+1]=0;continue}i=n[u]/t[u],r=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=r*o*t[u])}}function jF(e,t,n="x"){const s=NI(n),i=e.length;let r,o,a,l=jo(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=jo(e,c+1),!a)continue;const u=a[n],d=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=d-r*t[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=d+r*t[c])}}function HF(e,t="x"){const n=NI(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=jo(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=jo(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?Bo(i[o-1])!==Bo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}UF(e,i,r),jF(e,r,t)}function Uc(e,t,n){return Math.max(Math.min(e,n),t)}function zF(e,t){let n,s,i,r,o,a=zs(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&zs(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Uc(i.cp1x,t.left,t.right),i.cp1y=Uc(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Uc(i.cp2x,t.left,t.right),i.cp2y=Uc(i.cp2y,t.top,t.bottom)))}function WF(e,t,n,s,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")HF(e,i);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=BF(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&zF(e,n)}function Jg(){return typeof window<"u"&&typeof document<"u"}function Zg(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rh(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const nd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function YF(e,t){return nd(e).getPropertyValue(t)}const qF=["top","right","bottom","left"];function xr(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=qF[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const KF=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function GF(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(KF(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function vr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=nd(n),r=i.boxSizing==="border-box",o=xr(i,"padding"),a=xr(i,"border","width"),{x:l,y:c,box:u}=GF(e,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=t;return r&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/s),y:Math.round((c-f)/m*n.height/s)}}function XF(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&Zg(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=nd(r),l=xr(a,"border","width"),c=xr(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=rh(a.maxWidth,r,"clientWidth"),i=rh(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||nh,maxHeight:i||nh}}const jc=e=>Math.round(e*10)/10;function QF(e,t,n,s){const i=nd(e),r=xr(i,"margin"),o=rh(i.maxWidth,e,"clientWidth")||nh,a=rh(i.maxHeight,e,"clientHeight")||nh,l=XF(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=xr(i,"border","width"),p=xr(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=jc(Math.min(c,o,l.maxWidth)),u=jc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=jc(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=jc(Math.floor(u*s))),{width:c,height:u}}function sb(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const JF=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Jg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function ib(e,t){const n=YF(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function _r(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function ZF(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function t$(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=_r(e,i,n),a=_r(i,r,n),l=_r(r,t,n),c=_r(o,a,n),u=_r(a,l,n);return _r(c,u,n)}const e$=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},n$=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Po(e,t,n){return e?e$(t,n):n$()}function VI(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function FI(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function $I(e){return e==="angle"?{between:SI,compare:ZV,normalize:Kn}:{between:Ua,compare:(t,n)=>t-n,normalize:t=>t}}function rb({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function s$(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=$I(s),l=t.length;let{start:c,end:u,loop:d}=e,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(t[c%l][s]),i,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function i$(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=$I(s),{start:u,end:d,loop:f,style:p}=s$(e,t,n),m=[];let _=!1,y=null,x,M,E;const b=()=>l(i,E,x)&&a(i,E)!==0,R=()=>a(r,x)===0||l(r,E,x),L=()=>_||b(),I=()=>!_||R();for(let w=u,T=u;w<=d;++w)M=t[w%o],!M.skip&&(x=c(M[s]),x!==E&&(_=l(x,i,r),y===null&&L()&&(y=a(x,i)===0?w:T),y!==null&&I()&&(m.push(rb({start:y,end:w,loop:f,count:o,style:p})),y=null),T=w,E=x));return y!==null&&m.push(rb({start:y,end:d,loop:f,count:o,style:p})),m}function r$(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=i$(s[i],e.points,t);r.length&&n.push(...r)}return n}function o$(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function a$(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function l$(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=o$(n,i,r,s);if(s===!0)return ob(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return ob(e,a$(n,o,l,c),n,t)}function ob(e,t,n,s){return!s||!s.setContext||!n?t:c$(e,t,n,s)}function c$(e,t,n,s){const i=e._chart.getContext(),r=ab(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=r,d=t[0].start,f=d;function p(m,_,y,x){const M=a?-1:1;if(m!==_){for(m+=l;n[m%l].skip;)m-=M;for(;n[_%l].skip;)_+=M;m%l!==_%l&&(c.push({start:m%l,end:_%l,loop:y,style:x}),u=x,d=_%l)}}for(const m of t){d=a?d:m.start;let _=n[d%l],y;for(f=d+1;f<=m.end;f++){const x=n[f%l];y=ab(s.setContext(Zi(i,{type:"segment",p0:_,p1:x,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),u$(y,u)&&p(d,f-1,m.loop,u),_=x,u=y}d<f-1&&p(d,f-1,m.loop,u)}return c}function ab(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function u$(e,t){if(!t)return!1;const n=[],s=function(i,r){return Wg(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Hc(e,t,n){return e.options.clip?e[n]:t[n]}function h$(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Hc(n,t,"left"),right:Hc(n,t,"right"),top:Hc(s,t,"top"),bottom:Hc(s,t,"bottom")}:t}function d$(e,t){const n=t._clip;if(n.disabled)return!1;const s=h$(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class f${constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=xI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ls=new f$;const lb="transparent",p$={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Jy(e||lb),i=s.valid&&Jy(t||lb);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class g${constructor(t,n,s,i){const r=n[s];i=Bc([t.to,i,r,t.from]);const o=Bc([t.from,r,i]);this._active=!0,this._fn=t.fn||p$[t.type||typeof o],this._easing=ll[t.easing]||ll.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Bc([t.to,n,i,t.from]),this._from=Bc([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class BI{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Xt(t))return;const n=Object.keys(we.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Xt(r))return;const o={};for(const a of n)o[a]=r[a];(ge(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=v$(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&m$(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let d=r[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){t[c]=u;continue}r[c]=d=new g$(f,t,c,u),i.push(d)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Ls.add(this._chart,s),!0}}function m$(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function v$(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function cb(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function _$(e,t,n){if(n===!1)return!1;const s=cb(e,n),i=cb(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function y$(e){let t,n,s,i;return Xt(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function UI(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function ub(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],Fe(c)&&(r||t===0||Bo(t)===Bo(c))&&(t+=c)}return!u&&!s.all?0:t}function b$(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function ef(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function w$(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function T$(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function E$(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function hb(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function db(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=w$(r,o,s),d=t.length;let f;for(let p=0;p<d;++p){const m=t[p],{[l]:_,[c]:y}=m,x=m._stacks||(m._stacks={});f=x[c]=E$(i,u,_),f[a]=y,f._top=hb(f,o,!0,s.type),f._bottom=hb(f,o,!1,s.type);const M=f._visualValues||(f._visualValues={});M[a]=y}}function nf(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function I$(e,t){return Zi(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function S$(e,t,n){return Zi(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Sa(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const sf=e=>e==="reset"||e==="none",fb=(e,t)=>t?e:Object.assign({},e),A$=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:UI(n,!0),values:null};class ul{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ef(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Sa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,r=n.xAxisID=zt(s.xAxisID,nf(t,"x")),o=n.yAxisID=zt(s.yAxisID,nf(t,"y")),a=n.rAxisID=zt(s.rAxisID,nf(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Gy(this._data,this),t._stacked&&Sa(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Xt(n)){const i=this._cachedMeta;this._data=b$(n,i)}else if(s!==n){if(s){Gy(s,this);const i=this._cachedMeta;Sa(i),i._parsed=[]}n&&Object.isExtensible(n)&&sF(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=ef(n.vScale,n),n.stack!==s.stack&&(i=!0,Sa(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(db(this,n._parsed),n._stacked=ef(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{ge(i[t])?f=this.parseArrayData(s,i,t,n):Xt(i[t])?f=this.parseObjectData(s,i,t,n):f=this.parsePrimitiveData(s,i,t,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=d=f[u],l&&(p()&&(l=!1),c=d);s._sorted=l}o&&db(this,f)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+s,d[f]={[a]:u||r.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+s,d=n[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+s,p=n[f],c[u]={x:r.parse(th(p,a),f),y:o.parse(th(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:UI(i,!0),values:n._stacks[t.axis]._visualValues};return ub(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=ub(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=A$(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=T$(a);let f,p;function m(){p=i[f];const _=p[a.axis];return!Fe(p[t.axis])||u>_||d<_}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],Fe(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=y$(zt(this.options.clip,_$(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=S$(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=I$(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&eh(s);if(a)return fb(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(we.elements[t]),m=()=>this.getContext(s,i,n),_=c.resolveNamedOptions(f,p,m,d);return _.$shared&&(_.$shared=l,r[o]=Object.freeze(fb(_,l))),_}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(t,s,n))}const c=new BI(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||sf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){sf(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!sf(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Sa(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Pt(ul,"defaults",{}),Pt(ul,"datasetElementType",null),Pt(ul,"dataElementType",null);class mu extends ul{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=aF(n,i,o);this._drawStart=a,this._drawCount=l,lF(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,y=Vl(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||i==="none",M=n+s,E=t.length;let b=n>0&&this.getParsed(n-1);for(let R=0;R<E;++R){const L=t[R],I=x?L:{};if(R<n||R>=M){I.skip=!0;continue}const w=this.getParsed(R),T=ee(w[p]),k=I[f]=o.getPixelForValue(w[f],R),S=I[p]=r||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[p],R);I.skip=isNaN(k)||isNaN(S)||T,I.stop=R>0&&Math.abs(w[f]-b[f])>y,_&&(I.parsed=w,I.raw=c.data[R]),d&&(I.options=u||this.resolveDataElementOptions(R,L.active?"active":i)),x||this.updateElement(L,R,I,i),b=w}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Pt(mu,"id","line"),Pt(mu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Pt(mu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function fr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tm{constructor(t){Pt(this,"options");this.options=t||{}}static override(t){Object.assign(tm.prototype,t)}init(){}formats(){return fr()}parse(){return fr()}format(){return fr()}add(){return fr()}diff(){return fr()}startOf(){return fr()}endOf(){return fr()}}var x$={_date:tm};function C$(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?eF:Tr;if(s){if(i._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const f=c(r,t,n-d),p=c(r,t,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=e,p=f.slice(0,u.lo+1).reverse().findIndex(_=>!ee(_[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(_=>!ee(_[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:r.length-1}}function ac(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=C$(r[a],t,o,i);for(let p=d;p<=f;++p){const m=u[p];m.skip||s(m,c,p)}}}function P$(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function rf(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||ac(e,n,t,function(a,l,c){!i&&!zs(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function k$(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=JV(o,{x:t.x,y:t.y});SI(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return ac(e,n,t,r),i}function D$(e,t,n,s,i,r){let o=[];const a=P$(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(t.x,t.y,i);if(s&&!p)return;const m=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(m))&&!p)return;const y=a(t,m);y<l?(o=[{element:u,datasetIndex:d,index:f}],l=y):y===l&&o.push({element:u,datasetIndex:d,index:f})}return ac(e,n,t,c),o}function of(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?k$(e,t,n,i):D$(e,t,n,s,i,r)}function pb(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ac(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var R$={evaluateInteractionItems:ac,modes:{index(e,t,n,s){const i=vr(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?rf(e,i,r,s,o):of(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=vr(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?rf(e,i,r,s,o):of(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=vr(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return rf(e,i,r,s,o)},nearest(e,t,n,s){const i=vr(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return of(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=vr(t,e);return pb(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=vr(t,e);return pb(e,i,"y",n.intersect,s)}}};const jI=["left","top","right","bottom"];function Aa(e,t){return e.filter(n=>n.pos===t)}function gb(e,t){return e.filter(n=>jI.indexOf(n.pos)===-1&&n.box.axis===t)}function xa(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function M$(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function O$(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!jI.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function L$(e,t){const n=O$(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function N$(e){const t=M$(e),n=xa(t.filter(c=>c.box.fullSize),!0),s=xa(Aa(t,"left"),!0),i=xa(Aa(t,"right")),r=xa(Aa(t,"top"),!0),o=xa(Aa(t,"bottom")),a=gb(t,"x"),l=gb(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Aa(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function mb(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function HI(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function V$(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Xt(i)){n.size&&(e[i]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[i]+=n.size}r.getPadding&&HI(o,r.getPadding());const a=Math.max(0,t.outerWidth-mb(o,e,"left","right")),l=Math.max(0,t.outerHeight-mb(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function F$(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function $$(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function ja(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,$$(a.horizontal,t));const{same:d,other:f}=V$(t,n,a,s);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&ja(i,t,n,s)||u}function zc(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function vb(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,f=c.size||l.height;eh(c.start)&&(o=c.start),l.fullSize?zc(l,i.left,o,n.outerWidth-i.right-i.left,f):zc(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*u,f=c.size||l.width;eh(c.start)&&(r=c.start),l.fullSize?zc(l,r,i.top,f,n.outerHeight-i.bottom-i.top):zc(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var Vn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=on(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=N$(e.boxes),l=a.vertical,c=a.horizontal;te(e.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,y)=>y.box.options&&y.box.options.display===!1?_:_+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);HI(f,on(s));const p=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),m=L$(l.concat(c),d);ja(a.fullSize,p,d,m),ja(l,p,d,m),ja(c,p,d,m)&&ja(l,p,d,m),F$(p),vb(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,vb(a.rightAndBottom,p,d,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},te(a.chartArea,_=>{const y=_.box;Object.assign(y,e.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class zI{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class B$ extends zI{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const vu="$chartjs",U$={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_b=e=>e===null||e==="";function j$(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[vu]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_b(i)){const r=ib(e,"width");r!==void 0&&(e.width=r)}if(_b(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=ib(e,"height");r!==void 0&&(e.height=r)}return e}const WI=JF?{passive:!0}:!1;function H$(e,t,n){e&&e.addEventListener(t,n,WI)}function z$(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,WI)}function W$(e,t){const n=U$[e.type]||e.type,{x:s,y:i}=vr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function oh(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Y$(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||oh(a.addedNodes,s),o=o&&!oh(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function q$(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||oh(a.removedNodes,s),o=o&&!oh(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Fl=new Map;let yb=0;function YI(){const e=window.devicePixelRatio;e!==yb&&(yb=e,Fl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function K$(e,t){Fl.size||window.addEventListener("resize",YI),Fl.set(e,t)}function G$(e){Fl.delete(e),Fl.size||window.removeEventListener("resize",YI)}function X$(e,t,n){const s=e.canvas,i=s&&Zg(s);if(!i)return;const r=CI((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),K$(e,r),o}function af(e,t,n){n&&n.disconnect(),t==="resize"&&G$(e)}function Q$(e,t,n){const s=e.canvas,i=CI(r=>{e.ctx!==null&&n(W$(r,e))},e);return H$(s,t,i),i}class J$ extends zI{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(j$(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[vu])return!1;const s=n[vu].initial;["height","width"].forEach(r=>{const o=s[r];ee(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[vu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:Y$,detach:q$,resize:X$}[n]||Q$;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:af,detach:af,resize:af}[n]||z$)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return QF(t,n,s,i)}isAttached(t){const n=t&&Zg(t);return!!(n&&n.isConnected)}}function Z$(e){return!Jg()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?B$:J$}var eu;let Yr=(eu=class{constructor(){Pt(this,"x");Pt(this,"y");Pt(this,"active",!1);Pt(this,"options");Pt(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Vl(this.x)&&Vl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},Pt(eu,"defaults",{}),Pt(eu,"defaultRoutes"),eu);function t4(e,t){const n=e.options.ticks,s=e4(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?s4(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return i4(t,c,r,o/i),c;const u=n4(r,t,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Wc(t,c,u,ee(p)?0:a-p,a),d=0,f=o-1;d<f;d++)Wc(t,c,u,r[d],r[d+1]);return Wc(t,c,u,l,ee(p)?t.length:l+p),c}return Wc(t,c,u),c}function e4(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function n4(e,t,n){const s=r4(e),i=t.length/n;if(!s)return Math.max(i,1);const r=GV(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function s4(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function i4(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Wc(e,t,n,s,i){const r=zt(s,0),o=Math.min(zt(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function r4(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const o4=e=>e==="left"?"right":e==="right"?"left":e,bb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,wb=(e,t)=>Math.min(t||e,e);function Tb(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function a4(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function l4(e,t){te(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Ca(e){return e.drawTicks?e.tickLength:0}function Eb(e,t){if(!e.display)return 0;const n=Me(e.font,t),s=on(e.padding);return(ge(e.text)?e.text.length:1)*n.lineHeight+s.height}function c4(e,t){return Zi(e,{scale:t,type:"scale"})}function u4(e,t,n){return Zi(e,{tick:n,index:t,type:"tick"})}function h4(e,t,n){let s=zg(e);return(n&&t!=="right"||!n&&t==="right")&&(s=o4(s)),s}function d4(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,f,p,m;const _=o-i,y=a-r;if(e.isHorizontal()){if(p=Qe(s,r,a),Xt(n)){const x=Object.keys(n)[0],M=n[x];m=u[x].getPixelForValue(M)+_-t}else n==="center"?m=(c.bottom+c.top)/2+_-t:m=bb(e,n,t);f=a-r}else{if(Xt(n)){const x=Object.keys(n)[0],M=n[x];p=u[x].getPixelForValue(M)-y+t}else n==="center"?p=(c.left+c.right)/2-y+t:p=bb(e,n,t);m=Qe(s,o,i),d=n==="left"?-xn:xn}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class qr extends Yr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Sn(t,Number.POSITIVE_INFINITY),n=Sn(n,Number.NEGATIVE_INFINITY),s=Sn(s,Number.POSITIVE_INFINITY),i=Sn(i,Number.NEGATIVE_INFINITY),{min:Sn(t,s),max:Sn(n,i),minDefined:Fe(t),maxDefined:Fe(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Sn(n,Sn(s,n)),max:Sn(s,Sn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ce(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=PF(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Tb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=t4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ce(this.options.afterUpdate,[this])}beforeSetDimensions(){ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ce(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ce(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=ce(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=wb(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=Nn(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-Ca(t.grid)-n.padding-Eb(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=jg(Math.min(Math.asin(Nn((u.highest.height+6)/a,-1,1)),Math.asin(Nn(l/c,-1,1))-Math.asin(Nn(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ce(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Eb(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=Ca(r)+l):(t.height=this.maxHeight,t.width=Ca(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=s.padding*2,m=Pi(this.labelRotation),_=Math.cos(m),y=Math.sin(m);if(a){const x=s.mirror?0:y*d.width+_*f.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{const x=s.mirror?0:_*d.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(c,u,y,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*t.width,p=s*n.height):(f=s*t.height,p=i*n.width):r==="start"?p=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ce(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ee(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Tb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/wb(n,s));let c=0,u=0,d,f,p,m,_,y,x,M,E,b,R;for(d=0;d<n;d+=l){if(m=t[d].label,_=this._resolveTickFontOptions(d),i.font=y=_.string,x=r[y]=r[y]||{data:{},gc:[]},M=_.lineHeight,E=b=0,!ee(m)&&!ge(m))E=sh(i,x.data,x.gc,E,m),b=M;else if(ge(m))for(f=0,p=m.length;f<p;++f)R=m[f],!ee(R)&&!ge(R)&&(E=sh(i,x.data,x.gc,E,R),b+=M);o.push(E),a.push(b),c=Math.max(E,c),u=Math.max(b,u)}l4(r,n);const L=o.indexOf(c),I=a.indexOf(u),w=T=>({width:o[T]||0,height:a[T]||0});return{first:w(0),last:w(n-1),widest:w(L),highest:w(I),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return tF(this._alignToPixels?dr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=u4(this.getContext(),t,s))}return this.$context||(this.$context=c4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Pi(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ca(r),p=[],m=a.setContext(this.getContext()),_=m.display?m.width:0,y=_/2,x=function(lt){return dr(s,lt,_)};let M,E,b,R,L,I,w,T,k,S,P,C;if(o==="top")M=x(this.bottom),I=this.bottom-f,T=M-y,S=x(t.top)+y,C=t.bottom;else if(o==="bottom")M=x(this.top),S=t.top,C=x(t.bottom)-y,I=M+y,T=this.top+f;else if(o==="left")M=x(this.right),L=this.right-f,w=M-y,k=x(t.left)+y,P=t.right;else if(o==="right")M=x(this.left),k=t.left,P=x(t.right)-y,L=M+y,w=this.left+f;else if(n==="x"){if(o==="center")M=x((t.top+t.bottom)/2+.5);else if(Xt(o)){const lt=Object.keys(o)[0],at=o[lt];M=x(this.chart.scales[lt].getPixelForValue(at))}S=t.top,C=t.bottom,I=M+y,T=I+f}else if(n==="y"){if(o==="center")M=x((t.left+t.right)/2);else if(Xt(o)){const lt=Object.keys(o)[0],at=o[lt];M=x(this.chart.scales[lt].getPixelForValue(at))}L=M-y,w=L-f,k=t.left,P=t.right}const ot=zt(i.ticks.maxTicksLimit,d),K=Math.max(1,Math.ceil(d/ot));for(E=0;E<d;E+=K){const lt=this.getContext(E),at=r.setContext(lt),gt=a.setContext(lt),Vt=at.lineWidth,W=at.color,St=gt.dash||[],et=gt.dashOffset,kt=at.tickWidth,Mt=at.tickColor,qt=at.tickBorderDash||[],jt=at.tickBorderDashOffset;b=a4(this,E,l),b!==void 0&&(R=dr(s,b,Vt),c?L=w=k=P=R:I=T=S=C=R,p.push({tx1:L,ty1:I,tx2:w,ty2:T,x1:k,y1:S,x2:P,y2:C,width:Vt,color:W,borderDash:St,borderDashOffset:et,tickWidth:kt,tickColor:Mt,tickBorderDash:qt,tickBorderDashOffset:jt}))}return this._ticksLength=d,this._borderValue=M,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=Ca(s.grid),p=f+u,m=d?-u:p,_=-Pi(this.labelRotation),y=[];let x,M,E,b,R,L,I,w,T,k,S,P,C="middle";if(i==="top")L=this.bottom-m,I=this._getXAxisLabelAlignment();else if(i==="bottom")L=this.top+m,I=this._getXAxisLabelAlignment();else if(i==="left"){const K=this._getYAxisLabelAlignment(f);I=K.textAlign,R=K.x}else if(i==="right"){const K=this._getYAxisLabelAlignment(f);I=K.textAlign,R=K.x}else if(n==="x"){if(i==="center")L=(t.top+t.bottom)/2+p;else if(Xt(i)){const K=Object.keys(i)[0],lt=i[K];L=this.chart.scales[K].getPixelForValue(lt)+p}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")R=(t.left+t.right)/2-p;else if(Xt(i)){const K=Object.keys(i)[0],lt=i[K];R=this.chart.scales[K].getPixelForValue(lt)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const ot=this._getLabelSizes();for(x=0,M=a.length;x<M;++x){E=a[x],b=E.label;const K=r.setContext(this.getContext(x));w=this.getPixelForTick(x)+r.labelOffset,T=this._resolveTickFontOptions(x),k=T.lineHeight,S=ge(b)?b.length:1;const lt=S/2,at=K.color,gt=K.textStrokeColor,Vt=K.textStrokeWidth;let W=I;o?(R=w,I==="inner"&&(x===M-1?W=this.options.reverse?"left":"right":x===0?W=this.options.reverse?"right":"left":W="center"),i==="top"?c==="near"||_!==0?P=-S*k+k/2:c==="center"?P=-ot.highest.height/2-lt*k+k:P=-ot.highest.height+k/2:c==="near"||_!==0?P=k/2:c==="center"?P=ot.highest.height/2-lt*k:P=ot.highest.height-S*k,d&&(P*=-1),_!==0&&!K.showLabelBackdrop&&(R+=k/2*Math.sin(_))):(L=w,P=(1-S)*k/2);let St;if(K.showLabelBackdrop){const et=on(K.backdropPadding),kt=ot.heights[x],Mt=ot.widths[x];let qt=P-et.top,jt=0-et.left;switch(C){case"middle":qt-=kt/2;break;case"bottom":qt-=kt;break}switch(I){case"center":jt-=Mt/2;break;case"right":jt-=Mt;break;case"inner":x===M-1?jt-=Mt:x>0&&(jt-=Mt/2);break}St={left:jt,top:qt,width:Mt+et.width,height:kt+et.height,color:K.backdropColor}}y.push({label:b,font:T,textOffset:P,options:{rotation:_,color:at,strokeColor:gt,strokeWidth:Vt,textAlign:W,textBaseline:C,translation:[R,L],backdrop:St}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Pi(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=dr(t,this.left,o)-o/2,u=dr(t,this.right,a)+a/2,d=f=l):(d=dr(t,this.top,o)-o/2,f=dr(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&qg(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Vr(s,c,0,u,l,a)}i&&Kg(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Me(s.font),o=on(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Xt(n)?(l+=o.bottom,ge(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=d4(this,l,n,a);Vr(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:h4(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=zt(t.grid&&t.grid.z,-1),i=zt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qr.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Me(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Yc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;g4(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,f4(t,o,s),this.override&&we.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in we[i]&&(delete we[i][s],this.override&&delete Nr[s])}}function f4(e,t,n){const s=Nl(Object.create(null),[n?we.get(n):{},we.get(t),e.defaults]);we.set(t,s),e.defaultRoutes&&p4(t,e.defaultRoutes),e.descriptors&&we.describe(t,e.descriptors)}function p4(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");we.route(r,i,l,a)})}function g4(e){return"id"in e&&"defaults"in e}class m4{constructor(){this.controllers=new Yc(ul,"datasets",!0),this.elements=new Yc(Yr,"elements"),this.plugins=new Yc(Object,"plugins"),this.scales=new Yc(qr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):te(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=Ug(t);ce(s["before"+i],[],s),n[t](s),ce(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var ls=new m4;class v4{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(ce(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=zt(s.options&&s.options.plugins,{}),r=_4(s);return i===!1&&!n?[]:b4(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function _4(e){const t={},n=[],s=Object.keys(ls.plugins.items);for(let r=0;r<s.length;r++)n.push(ls.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function y4(e,t){return!t&&e===!1?null:e===!0?{}:e}function b4(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=y4(s[l],i);c!==null&&r.push({plugin:a,options:w4(e.config,{plugin:a,local:n[l]},c,o)})}return r}function w4(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lp(e,t){const n=we.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function T4(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function E4(e,t){return e===t?"_index_":"_value_"}function Ib(e){if(e==="x"||e==="y"||e==="r")return e}function I4(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function cp(e,...t){if(Ib(e))return e;for(const n of t){const s=n.axis||I4(n.position)||e.length>1&&Ib(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Sb(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function S4(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Sb(e,"x",n[0])||Sb(e,"y",n[0])}return{}}function A4(e,t){const n=Nr[e.type]||{scales:{}},s=t.scales||{},i=lp(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Xt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=cp(o,a,S4(o,e),we.scales[a.type]),c=E4(l,i),u=n.scales||{};r[o]=ol(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||lp(a,t),u=(Nr[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=T4(d,l),p=o[f+"AxisID"]||f;r[p]=r[p]||Object.create(null),ol(r[p],[{axis:f},s[p],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];ol(a,[we.scales[a.type],we.scale])}),r}function qI(e){const t=e.options||(e.options={});t.plugins=zt(t.plugins,{}),t.scales=A4(e,t)}function KI(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function x4(e){return e=e||{},e.data=KI(e.data),qI(e),e}const Ab=new Map,GI=new Set;function qc(e,t){let n=Ab.get(e);return n||(n=t(),Ab.set(e,n),GI.add(n)),n}const Pa=(e,t,n)=>{const s=th(t,n);s!==void 0&&e.add(s)};class C4{constructor(t){this._config=x4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=KI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return qc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return qc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return qc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return qc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(d=>Pa(l,t,d))),u.forEach(d=>Pa(l,i,d)),u.forEach(d=>Pa(l,Nr[r]||{},d)),u.forEach(d=>Pa(l,we,d)),u.forEach(d=>Pa(l,op,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),GI.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Nr[n]||{},we.datasets[n]||{},{type:n},we,op]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=xb(this._resolverCache,t,i);let l=o;if(k4(o,n)){r.$shared=!1,s=Ki(s)?s():s;const c=this.createResolver(t,s,a);l=Uo(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=xb(this._resolverCache,t,s);return Xt(n)?Uo(r,n,void 0,i):r}}function xb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:Gg(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const P4=e=>Xt(e)&&Object.getOwnPropertyNames(e).some(t=>Ki(e[t]));function k4(e,t){const{isScriptable:n,isIndexable:s}=RI(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(Ki(a)||P4(a))||o&&ge(a))return!0}return!1}var D4="4.5.0";const R4=["top","bottom","left","right","chartArea"];function Cb(e,t){return e==="top"||e==="bottom"||R4.indexOf(e)===-1&&t==="x"}function Pb(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function kb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ce(n&&n.onComplete,[e],t)}function M4(e){const t=e.chart,n=t.options.animation;ce(n&&n.onProgress,[e],t)}function XI(e){return Jg()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const _u={},Db=e=>{const t=XI(e);return Object.values(_u).filter(n=>n.canvas===t).pop()};function O4(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function L4(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var gi;let sd=(gi=class{static register(...t){ls.add(...t),Rb()}static unregister(...t){ls.remove(...t),Rb()}constructor(t,n){const s=this.config=new C4(n),i=XI(t),r=Db(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Z$(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=BV(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new v4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],_u[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ls.listen(this,"complete",kb),Ls.listen(this,"progress",M4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return ee(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tb(this.canvas,this.ctx),this}stop(){return Ls.stop(this),this}resize(t,n){Ls.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ce(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};te(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=cp(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),te(r,o=>{const a=o.options,l=a.id,c=cp(l,a),u=zt(a.type,o.dtype);(a.position===void 0||Cb(a.position,c)!==Cb(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=ls.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),te(i,(o,a)=>{o||delete s[a]}),te(s,o=>{Vn.configure(this,o,o.options),Vn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Pb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||lp(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=ls.getController(a),{datasetElementType:c,dataElementType:u}=we.datasets[a];Object.assign(l,{dataElementType:ls.getElement(u),datasetElementType:c&&ls.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){te(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||te(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){te(this.scales,t=>{Vn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Wy(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;O4(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!Wy(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],te(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Ki(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ls.has(this)?this.attached&&!Ls.running(this)&&Ls.start(this):(this.draw(),kb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=d$(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&qg(n,i),t.controller.draw(),i&&Kg(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return zs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=R$.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Zi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);eh(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ls.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),tb(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _u[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};te(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){te(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},te(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ju(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=YV(t),c=L4(t,this._lastEvent,s,l);s&&(this._lastEvent=null,ce(r.onHover,[t,a,this],this),l&&ce(r.onClick,[t,a,this],this));const u=!Ju(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},Pt(gi,"defaults",we),Pt(gi,"instances",_u),Pt(gi,"overrides",Nr),Pt(gi,"registry",ls),Pt(gi,"version",D4),Pt(gi,"getChart",Db),gi);function Rb(){return te(sd.instances,e=>e._plugins.invalidate())}function QI(e,t,n=t){e.lineCap=zt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(zt(n.borderDash,t.borderDash)),e.lineDashOffset=zt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=zt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=zt(n.borderWidth,t.borderWidth),e.strokeStyle=zt(n.borderColor,t.borderColor)}function N4(e,t,n){e.lineTo(n.x,n.y)}function V4(e){return e.stepped?yF:e.tension||e.cubicInterpolationMode==="monotone"?bF:N4}function JI(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function F4(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=JI(i,n,s),u=V4(r);let{move:d=!0,reverse:f}=s||{},p,m,_;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%o],!m.skip&&(d?(e.moveTo(m.x,m.y),d=!1):u(e,_,m,f,r.stepped),_=m);return l&&(m=i[(a+(f?c:0))%o],u(e,_,m,f,r.stepped)),!!l}function $4(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=JI(i,n,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,p,m,_,y,x;const M=b=>(o+(c?a-b:b))%r,E=()=>{_!==y&&(e.lineTo(u,y),e.lineTo(u,_),e.lineTo(u,x))};for(l&&(p=i[M(0)],e.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[M(f)],p.skip)continue;const b=p.x,R=p.y,L=b|0;L===m?(R<_?_=R:R>y&&(y=R),u=(d*u+b)/++d):(E(),e.lineTo(b,R),m=L,d=0,_=y=R),x=R}E()}function up(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?$4:F4}function B4(e){return e.stepped?ZF:e.tension||e.cubicInterpolationMode==="monotone"?t$:_r}function U4(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),QI(e,t.options),e.stroke(i)}function j4(e,t,n,s){const{segments:i,options:r}=t,o=up(t);for(const a of i)QI(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const H4=typeof Path2D=="function";function z4(e,t,n,s){H4&&!t.options.segment?U4(e,t,n,s):j4(e,t,n,s)}class Ha extends Yr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;WF(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=l$(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=r$(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=B4(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=r[d],m=r[f];if(p===m){a.push(p);continue}const _=Math.abs((i-p[n])/(m[n]-p[n])),y=l(p,m,_,s.stepped);y[n]=t[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(t,n,s){return up(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=up(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),z4(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Pt(Ha,"id","line"),Pt(Ha,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Pt(Ha,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Pt(Ha,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Mb(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class yu extends Yr{constructor(n){super();Pt(this,"parsed");Pt(this,"skip");Pt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return Mb(this,n,"x",s)}inYRange(n,s){return Mb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!zs(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,ap(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Pt(yu,"id","point"),Pt(yu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Pt(yu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ob=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},W4=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Lb extends Yr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ce(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Me(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ob(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,_)=>{const y=s+n/2+r.measureText(m.text).width;(_===0||c[c.length-1]+y+2*a>o)&&(d+=u,c[c.length-(_>0?0:1)]=0,p+=u,f++),l[_]={left:0,top:p,row:f,width:y,height:i},c[c.length-1]+=y+a}),d}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let d=a,f=0,p=0,m=0,_=0;return this.legendItems.forEach((y,x)=>{const{itemWidth:M,itemHeight:E}=Y4(s,n,r,y,i);x>0&&p+E+2*a>u&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,_++,f=p=0),l[x]={left:m,top:p,col:_,width:M,height:E},f=Math.max(f,M),p+=E+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Po(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Qe(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Qe(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Qe(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Qe(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;qg(t,this),this._draw(),Kg(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=we.color,l=Po(t.rtl,this.left,this.width),c=Me(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:_,itemHeight:y}=Ob(o,d),x=function(L,I,w){if(isNaN(m)||m<=0||isNaN(_)||_<0)return;i.save();const T=zt(w.lineWidth,1);if(i.fillStyle=zt(w.fillStyle,a),i.lineCap=zt(w.lineCap,"butt"),i.lineDashOffset=zt(w.lineDashOffset,0),i.lineJoin=zt(w.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=zt(w.strokeStyle,a),i.setLineDash(zt(w.lineDash,[])),o.usePointStyle){const k={radius:_*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:T},S=l.xPlus(L,m/2),P=I+f;kI(i,k,S,P,o.pointStyleWidth&&m)}else{const k=I+Math.max((d-_)/2,0),S=l.leftForLtr(L,m),P=Co(w.borderRadius);i.beginPath(),Object.values(P).some(C=>C!==0)?ih(i,{x:S,y:k,w:m,h:_,radius:P}):i.rect(S,k,m,_),i.fill(),T!==0&&i.stroke()}i.restore()},M=function(L,I,w){Vr(i,w.text,L,I+y/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},E=this.isHorizontal(),b=this._computeTitleHeight();E?p={x:Qe(r,this.left+u,this.right-s[0]),y:this.top+u+b,line:0}:p={x:this.left+u,y:Qe(r,this.top+b+u,this.bottom-n[0].height),line:0},VI(this.ctx,t.textDirection);const R=y+u;this.legendItems.forEach((L,I)=>{i.strokeStyle=L.fontColor,i.fillStyle=L.fontColor;const w=i.measureText(L.text).width,T=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),k=m+f+w;let S=p.x,P=p.y;l.setWidth(this.width),E?I>0&&S+k+u>this.right&&(P=p.y+=R,p.line++,S=p.x=Qe(r,this.left+u,this.right-s[p.line])):I>0&&P+R>this.bottom&&(S=p.x=S+n[p.line].width+u,p.line++,P=p.y=Qe(r,this.top+b+u,this.bottom-n[p.line].height));const C=l.x(S);if(x(C,P,L),S=oF(T,S+m+f,E?S+k:this.right,t.rtl),M(l.x(S),P,L),E)p.x+=k+u;else if(typeof L.text!="string"){const ot=c.lineHeight;p.y+=ZI(L,ot)+u}else p.y+=R}),FI(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Me(n.font),i=on(n.padding);if(!n.display)return;const r=Po(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Qe(t.align,d,this.right-f);else{const m=this.columnSizes.reduce((_,y)=>Math.max(_,y.height),0);u=c+Qe(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=Qe(a,d,d+f);o.textAlign=r.textAlign(zg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Vr(o,n.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,n=Me(t.font),s=on(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Ua(t,this.left,this.right)&&Ua(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Ua(t,i.left,i.left+i.width)&&Ua(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!G4(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=W4(i,s);i&&!r&&ce(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&ce(n.onHover,[t,s,this],this)}else s&&ce(n.onClick,[t,s,this],this)}}function Y4(e,t,n,s,i){const r=q4(s,e,t,n),o=K4(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function q4(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function K4(e,t,n){let s=e;return typeof t.text!="string"&&(s=ZI(t,n)),s}function ZI(e,t){const n=e.text?e.text.length:0;return t*n}function G4(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var X4={id:"legend",_element:Lb,start(e,t,n){const s=e.legend=new Lb({ctx:e.ctx,options:n,chart:e});Vn.configure(e,s,n),Vn.addBox(e,s)},stop(e){Vn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Vn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=on(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class tS extends Yr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=ge(s.text)?s.text.length:1;this._padding=on(s.padding);const r=i*Me(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Qe(a,s,r),d=n+t,c=r-s):(o.position==="left"?(u=s+t,d=Qe(a,i,n),l=Ce*-.5):(u=r-t,d=Qe(a,n,i),l=Ce*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Me(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Vr(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:zg(n.align),textBaseline:"middle",translation:[o,a]})}}function Q4(e,t){const n=new tS({ctx:e.ctx,options:t,chart:e});Vn.configure(e,n,t),Vn.addBox(e,n),e.titleBlock=n}var J4={id:"title",_element:tS,start(e,t,n){Q4(e,n)},stop(e){const t=e.titleBlock;Vn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Vn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const za={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=rp(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function os(e,t){return t&&(ge(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ns(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Z4(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function Nb(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Me(t.bodyFont),c=Me(t.titleFont),u=Me(t.footerFont),d=r.length,f=i.length,p=s.length,m=on(t.padding);let _=m.height,y=0,x=s.reduce((b,R)=>b+R.before.length+R.lines.length+R.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,d&&(_+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),x){const b=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=p*b+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}f&&(_+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let M=0;const E=function(b){y=Math.max(y,n.measureText(b).width+M)};return n.save(),n.font=c.string,te(e.title,E),n.font=l.string,te(e.beforeBody.concat(e.afterBody),E),M=t.displayColors?o+2+t.boxPadding:0,te(s,b=>{te(b.before,E),te(b.lines,E),te(b.after,E)}),M=0,n.font=u.string,te(e.footer,E),n.restore(),y+=m.width,{width:y,height:_}}function t3(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function e3(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function n3(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),e3(c,e,t,n)&&(c="center"),c}function Vb(e,t,n){const s=n.yAlign||t.yAlign||t3(e,n);return{xAlign:n.xAlign||t.xAlign||n3(e,t,n,s),yAlign:s}}function s3(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function i3(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function Fb(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Co(o);let m=s3(t,a);const _=i3(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+i:a==="right"&&(m+=Math.max(d,p)+i),{x:Nn(m,0,s.width-t.width),y:Nn(_,0,s.height-t.height)}}function Kc(e,t,n){const s=on(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function $b(e){return os([],Ns(e))}function r3(e,t,n){return Zi(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Bb(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const eS={beforeTitle:Os,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Os,beforeBody:Os,beforeLabel:Os,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ee(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Os,afterBody:Os,beforeFooter:Os,footer:Os,afterFooter:Os};function mn(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?eS[t].call(n,s):i}class hp extends Yr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new BI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=r3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=mn(s,"beforeTitle",this,t),r=mn(s,"title",this,t),o=mn(s,"afterTitle",this,t);let a=[];return a=os(a,Ns(i)),a=os(a,Ns(r)),a=os(a,Ns(o)),a}getBeforeBody(t,n){return $b(mn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return te(t,r=>{const o={before:[],lines:[],after:[]},a=Bb(s,r);os(o.before,Ns(mn(a,"beforeLabel",this,r))),os(o.lines,mn(a,"label",this,r)),os(o.after,Ns(mn(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return $b(mn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=mn(s,"beforeFooter",this,t),r=mn(s,"footer",this,t),o=mn(s,"afterFooter",this,t);let a=[];return a=os(a,Ns(i)),a=os(a,Ns(r)),a=os(a,Ns(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Z4(this.chart,n[l]));return t.filter&&(a=a.filter((u,d,f)=>t.filter(u,d,f,s))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,s))),te(a,u=>{const d=Bb(t.callbacks,u);i.push(mn(d,"labelColor",this,u)),r.push(mn(d,"labelPointStyle",this,u)),o.push(mn(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=za[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Nb(this,s),c=Object.assign({},a,l),u=Vb(this.chart,s,c),d=Fb(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Co(a),{x:f,y:p}=t,{width:m,height:_}=n;let y,x,M,E,b,R;return r==="center"?(b=p+_/2,i==="left"?(y=f,x=y-o,E=b+o,R=b-o):(y=f+m,x=y+o,E=b-o,R=b+o),M=y):(i==="left"?x=f+Math.max(l,u)+o:i==="right"?x=f+m-Math.max(c,d)-o:x=this.caretX,r==="top"?(E=p,b=E-o,y=x-o,M=x+o):(E=p+_,b=E+o,y=x+o,M=x-o),R=E),{x1:y,x2:x,x3:M,y1:E,y2:b,y3:R}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=Po(s.rtl,this.x,this.width);for(t.x=Kc(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Me(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Me(r.bodyFont),d=Kc(this,"left",r),f=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(r.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=i.leftForLtr(f,c)+c/2,x=m+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ap(t,_,y,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ap(t,_,y,x)}else{t.lineWidth=Xt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(f,c),y=i.leftForLtr(i.xPlus(f,1),c-2),x=Co(o.borderRadius);Object.values(x).some(M=>M!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ih(t,{x:_,y:m,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ih(t,{x:y,y:m+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(_,m,c,l),t.strokeRect(_,m,c,l),t.fillStyle=o.backgroundColor,t.fillRect(y,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=Me(s.bodyFont);let f=d.lineHeight,p=0;const m=Po(s.rtl,this.x,this.width),_=function(w){n.fillText(w,m.x(t.x+p),t.y+f/2),t.y+=f+r},y=m.textAlign(o);let x,M,E,b,R,L,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=Kc(this,y,s),n.fillStyle=s.bodyColor,te(this.beforeBody,_),p=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,L=i.length;b<L;++b){for(x=i[b],M=this.labelTextColors[b],n.fillStyle=M,te(x.before,_),E=x.lines,a&&E.length&&(this._drawColorBox(n,t,b,m,s),f=Math.max(d.lineHeight,l)),R=0,I=E.length;R<I;++R)_(E[R]),f=d.lineHeight;te(x.after,_)}p=0,f=d.lineHeight,te(this.afterBody,_),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Po(s.rtl,this.x,this.width);for(t.x=Kc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Me(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=Co(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=za[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Nb(this,t),l=Object.assign({},o,this._size),c=Vb(n,t,l),u=Fb(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=on(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),VI(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),FI(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Ju(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!Ju(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=za[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}Pt(hp,"positioners",za);var o3={id:"tooltip",_element:hp,positioners:za,afterInit(e,t,n){n&&(e.tooltip=new hp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:eS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const a3=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function l3(e,t,n,s){const i=e.indexOf(t);if(i===-1)return a3(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const c3=(e,t)=>e===null?null:Nn(Math.round(e),0,t);function Ub(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class dp extends qr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ee(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:l3(s,t,zt(n,t),this._addedLabels),c3(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return Ub.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Pt(dp,"id","category"),Pt(dp,"defaults",{ticks:{callback:Ub}});function u3(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=e,p=r||1,m=u-1,{min:_,max:y}=t,x=!ee(o),M=!ee(a),E=!ee(c),b=(y-_)/(d+1);let R=qy((y-_)/m/p)*p,L,I,w,T;if(R<1e-14&&!x&&!M)return[{value:_},{value:y}];T=Math.ceil(y/R)-Math.floor(_/R),T>m&&(R=qy(T*R/m/p)*p),ee(l)||(L=Math.pow(10,l),R=Math.ceil(R*L)/L),i==="ticks"?(I=Math.floor(_/R)*R,w=Math.ceil(y/R)*R):(I=_,w=y),x&&M&&r&&QV((a-o)/r,R/1e3)?(T=Math.round(Math.min((a-o)/R,u)),R=(a-o)/T,I=o,w=a):E?(I=x?o:I,w=M?a:w,T=c-1,R=(w-I)/T):(T=(w-I)/R,al(T,Math.round(T),R/1e3)?T=Math.round(T):T=Math.ceil(T));const k=Math.max(Ky(R),Ky(I));L=Math.pow(10,ee(l)?k:l),I=Math.round(I*L)/L,w=Math.round(w*L)/L;let S=0;for(x&&(f&&I!==o?(n.push({value:o}),I<o&&S++,al(Math.round((I+S*R)*L)/L,o,jb(o,b,e))&&S++):I<o&&S++);S<T;++S){const P=Math.round((I+S*R)*L)/L;if(M&&P>a)break;n.push({value:P})}return M&&f&&w!==a?n.length&&al(n[n.length-1].value,a,jb(a,b,e))?n[n.length-1].value=a:n.push({value:a}):(!M||w===a)&&n.push({value:w}),n}function jb(e,t,{horizontal:n,minRotation:s}){const i=Pi(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class ah extends qr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ee(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(t){const l=Bo(i),c=Bo(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=u3(i,r);return t.bounds==="ticks"&&II(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Yg(t,this.chart.options.locale,this.options.ticks.format)}}class fp extends ah{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Fe(t)?t:0,this.max=Fe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Pi(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Pt(fp,"id","linear"),Pt(fp,"defaults",{ticks:{callback:ed.formatters.numeric}});const $l=e=>Math.floor(Ci(e)),pr=(e,t)=>Math.pow(10,$l(e)+t);function Hb(e){return e/Math.pow(10,$l(e))===1}function zb(e,t,n){const s=Math.pow(10,n),i=Math.floor(e/s);return Math.ceil(t/s)-i}function h3(e,t){const n=t-e;let s=$l(n);for(;zb(e,t,s)>10;)s++;for(;zb(e,t,s)<10;)s--;return Math.min(s,$l(e))}function d3(e,{min:t,max:n}){t=Sn(e.min,t);const s=[],i=$l(t);let r=h3(t,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=Sn(e.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<n;)s.push({value:f,major:Hb(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const p=Sn(e.max,f);return s.push({value:p,major:Hb(p),significand:d}),s}class Wb extends qr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=ah.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return Fe(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Fe(t)?Math.max(0,t):null,this.max=Fe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Fe(this._userMin)&&(this.min=t===pr(this.min,0)?pr(this.min,-1):pr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(pr(s,-1)),o(pr(i,1)))),s<=0&&r(pr(i,-1)),i<=0&&o(pr(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=d3(n,this);return t.bounds==="ticks"&&II(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Yg(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ci(t),this._valueRange=Ci(this.max)-Ci(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ci(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}Pt(Wb,"id","logarithmic"),Pt(Wb,"defaults",{ticks:{callback:ed.formatters.logarithmic,major:{enabled:!0}}});function pp(e){const t=e.ticks;if(t.display&&e.display){const n=on(t.backdropPadding);return zt(t.font&&t.font.size,we.font.size)+n.height}return 0}function f3(e,t,n){return n=ge(n)?n:[n],{w:_F(e,t.string,n),h:n.length*t.lineHeight}}function Yb(e,t,n,s,i){return e===s||e===i?{start:t-n/2,end:t+n/2}:e<s||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function p3(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],i=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Ce/r:0;for(let l=0;l<r;l++){const c=o.setContext(e.getPointLabelContext(l));i[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],a),d=Me(c.font),f=f3(e.ctx,d,e._pointLabels[l]);s[l]=f;const p=Kn(e.getIndexAngle(l)+a),m=Math.round(jg(p)),_=Yb(m,u.x,f.w,0,180),y=Yb(m,u.y,f.h,90,270);g3(n,t,p,_,y)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=_3(e,s,i)}function g3(e,t,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function m3(e,t,n){const s=e.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,l=e.getPointPosition(t,s+i+o,r),c=Math.round(jg(Kn(l.angle+xn))),u=w3(l.y,a.h,c),d=y3(c),f=b3(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function v3(e,t){if(!t)return!0;const{left:n,top:s,right:i,bottom:r}=e;return!(zs({x:n,y:s},t)||zs({x:n,y:r},t)||zs({x:i,y:s},t)||zs({x:i,y:r},t))}function _3(e,t,n){const s=[],i=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:pp(r)/2,additionalAngle:o?Ce/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const d=m3(e,u,l);s.push(d),a==="auto"&&(d.visible=v3(d,c),d.visible&&(c=d))}return s}function y3(e){return e===0||e===180?"center":e<180?"left":"right"}function b3(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function w3(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function T3(e,t,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=t;if(!ee(a)){const l=Co(t.borderRadius),c=on(t.backdropPadding);e.fillStyle=a;const u=s-c.left,d=i-c.top,f=r-s+c.width,p=o-i+c.height;Object.values(l).some(m=>m!==0)?(e.beginPath(),ih(e,{x:u,y:d,w:f,h:p,radius:l}),e.fill()):e.fillRect(u,d,f,p)}}function E3(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let i=t-1;i>=0;i--){const r=e._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(e.getPointLabelContext(i));T3(n,o,r);const a=Me(o.font),{x:l,y:c,textAlign:u}=r;Vr(n,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function nS(e,t,n,s){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,$n);else{let r=e.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function I3(e,t,n,s,i){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),nS(e,n,o,s),r.closePath(),r.stroke(),r.restore())}function S3(e,t,n){return Zi(e,{label:n,index:t,type:"pointLabel"})}class Gc extends ah{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=on(pp(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Fe(t)&&!isNaN(t)?t:0,this.max=Fe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/pp(this.options))}generateTickLabels(t){ah.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const i=ce(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?p3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,i))}getIndexAngle(t){const n=$n/(this._pointLabels.length||1),s=this.options.startAngle||0;return Kn(t*n+Pi(s))}getDistanceFromCenterForValue(t){if(ee(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(ee(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return S3(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const i=this.getIndexAngle(t)-xn+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),nS(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&E3(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),p=i.setContext(f),m=r.setContext(f);I3(this,p,l,o,m)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(t.lineWidth=f,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=s.setContext(this.getContext(l)),u=Me(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=on(c.backdropPadding);t.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}Vr(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}Pt(Gc,"id","radialLinear"),Pt(Gc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ed.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Pt(Gc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Pt(Gc,"descriptors",{angleLines:{_fallback:"grid"}});const id={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(id);function qb(e,t){return e-t}function Kb(e,t){if(ee(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Fe(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Vl(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Gb(e,t,n,s){const i=yn.length;for(let r=yn.indexOf(e);r<i-1;++r){const o=id[yn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return yn[r]}return yn[i-1]}function A3(e,t,n,s,i){for(let r=yn.length-1;r>=yn.indexOf(n);r--){const o=yn[r];if(id[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return yn[n?yn.indexOf(n):0]}function x3(e){for(let t=yn.indexOf(e)+1,n=yn.length;t<n;++t)if(id[yn[t]].common)return yn[t]}function Xb(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=Hg(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function C3(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Qb(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:C3(e,s,i,n)}class lh extends qr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new x$._date(t.adapters.date);i.init(n),ol(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Kb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Fe(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=Fe(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=nF(i,r,o);return this._unit=n.unit||(s.autoSkip?Gb(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):A3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:x3(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Qb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Nn(n,0,o),s=Nn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Gb(r.minUnit,n,s,this._getLabelCapacity(n)),a=zt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Vl(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+t.add(f,a,o),p++)Xb(u,f,m);return(f===s||i.bounds==="ticks"||p===1)&&Xb(u,f,m),Object.keys(u).sort(qb).map(_=>+_)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return ce(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[n],p=c&&d&&f&&f.major;return this._adapter.format(t,i||(p?d:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Pi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Qb(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Kb(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return iF(t.sort(qb))}}Pt(lh,"id","time"),Pt(lh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xc(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=Tr(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=Tr(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Jb extends lh{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Xc(n,this.min),this._tableRange=Xc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Xc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Xc(this._table,s*this._tableRange+this._minPos,!0)}}Pt(Jb,"id","timeseries"),Pt(Jb,"defaults",lh.defaults);const sS={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},P3={ariaLabel:{type:String},ariaDescribedby:{type:String}},k3={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...sS,...P3},D3=R1[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function oo(e){return zl(e)?Ht(e):e}function R3(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return zl(t)?new Proxy(e,{}):e}function M3(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function iS(e,t){e.labels=t}function rS(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function O3(e,t){const n={labels:[],datasets:[]};return iS(n,e.labels),rS(n,e.datasets,t),n}const L3=an({props:k3,setup(e,t){let{expose:n,slots:s}=t;const i=Lt(null),r=Vp(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:d,plugins:f,datasetIdKey:p}=e,m=O3(u,p),_=R3(m,u);r.value=new sd(i.value,{type:c,data:_,options:{...d},plugins:f})},a=()=>{const c=Ht(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return Ss(o),Go(a),en([()=>e.options,()=>e.data],(c,u)=>{let[d,f]=c,[p,m]=u;const _=Ht(r.value);if(!_)return;let y=!1;if(d){const x=oo(d),M=oo(p);x&&x!==M&&(M3(_,x),y=!0)}if(f){const x=oo(f.labels),M=oo(m.labels),E=oo(f.datasets),b=oo(m.datasets);x!==M&&(iS(_.config.data,x),y=!0),E&&E!==b&&(rS(_.config.data,E,e.datasetIdKey),y=!0)}y&&Pr(()=>{l(_)})},{deep:!0}),()=>Do("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[Do("p",{},[s.default?s.default():""])])}});function N3(e,t){return sd.register(t),an({props:sS,setup(n,s){let{expose:i}=s;const r=Vp(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>Do(L3,D3({ref:o},{type:e,...n}))}})}const V3=N3("line",mu);const F3={class:"statistics-container"},$3={class:"toggle-segment"},B3={class:"stats-chart"},U3={__name:"Statistics",setup(e){sd.register(Ha,yu,fp,J4,dp,o3,X4);const t=Lt("week"),n=["Пн","Вт","Ср","Чт","Пт","Сб","Нд"],s=["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"];async function i(){const u=await yI(),d={};for(const f in u){const p=u[f]||[],m=p.reduce((_,y)=>_+y.count,0);d[f]={...p.length?{year:Number(f.split("-")[0]),month:Number(f.split("-")[1]),day:Number(f.split("-")[2])}:{},count:m}}return d}const r=Lt({}),o=Lt(null);Ss(async()=>{r.value=await i(),Pr(()=>{o.value&&o.value.chart&&o.value.chart.update()})});const a=G(()=>{const u=new Date;if(t.value==="week"){const d=[],f=[];for(let p=6;p>=0;p--){const m=new Date(u);m.setDate(u.getDate()-p);const _=n[m.getDay()===0?6:m.getDay()-1];d.push(_);const y=`${m.getFullYear()}-${m.getMonth()+1}-${m.getDate()}`,x=r.value[y];f.push(x?x.count:0)}return{labels:d,datasets:[{label:"Чіхи",data:f,fill:!0,borderColor:"#fff",backgroundColor:p=>{const m=p.chart,{ctx:_,chartArea:y}=m;if(!y)return getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61";const x=_.createLinearGradient(0,y.top,0,y.bottom),M=getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",E=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#2F5249";return x.addColorStop(0,M),x.addColorStop(1,E),x},tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",pointHoverRadius:7}]}}else{const d=u.getFullYear(),f=Array(12).fill(0);return Object.values(r.value).forEach(p=>{p.year===d&&(f[p.month-1]+=p.count)}),{labels:s,datasets:[{label:"Clicks",data:f,fill:!0,borderColor:"#fff",backgroundColor:p=>{const m=p.chart,{ctx:_,chartArea:y}=m;if(!y)return getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61";const x=_.createLinearGradient(0,y.top,0,y.bottom),M=getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",E=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#2F5249";return x.addColorStop(0,M),x.addColorStop(1,E),x},tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:"#42b883",pointHoverRadius:7}]}}}),l={responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",font:{size:14}}},y:{grid:{color:"rgba(255,255,255,0.15)"},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--accent")||"#E3DE61",font:{size:14}}}}},c=V3;return(u,d)=>(ht(),vt("div",F3,[X("button",{class:"back-btn",onClick:d[0]||(d[0]=f=>u.$router.push("/")),"aria-label":"Back"},d[3]||(d[3]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",$3,[X("button",{class:oe(["toggle-btn",{active:t.value==="week"}]),onClick:d[1]||(d[1]=f=>t.value="week")}," Тиждень ",2),X("button",{class:oe(["toggle-btn",{active:t.value==="month"}]),onClick:d[2]||(d[2]=f=>t.value="month")}," Місяць ",2)]),X("div",B3,[Ct(ft(c),{ref_key:"chartRef",ref:o,data:a.value,options:l},null,8,["data"])])]))}},j3=Xi(U3,[["__scopeId","data-v-df77ffaa"]]);const H3={key:0,class:"auth-error"},z3={__name:"Auth",setup(e){const t=Lt(localStorage.getItem("color-primary"));Lt(localStorage.getItem("color-accent"));function n(p){let m=p.replace("#","");m.length===3&&(m=m.split("").map(y=>y+y).join(""));const _=parseInt(m,16);return[_>>16,_>>8&255,_&255]}function s([p,m,_]){return"#"+[p,m,_].map(y=>y.toString(16).padStart(2,"0")).join("")}function i(p,m){const[_,y,x]=n(p),M=m<0?0:255,E=Math.abs(m);return s([Math.round((M-_)*E+_),Math.round((M-y)*E+y),Math.round((M-x)*E+x)])}const r=G(()=>{const p=t.value,m=i(p,.5),_=i(p,-.3);return`linear-gradient(135deg, ${m} 0%, ${p} 50%, ${_} 100%)`}),o=Lt(""),a=Lt(""),l=Lt(""),c=Kp(),u=async()=>{l.value="";try{await vM(qi,o.value,a.value),c.push("/")}catch(p){l.value=p.message}},d=async()=>{l.value="";try{await mM(qi,o.value,a.value),c.push("/")}catch(p){l.value=p.message}},f=()=>{u()};return(p,m)=>(ht(),vt("div",{class:"auth-container",style:sn({background:r.value})},[m[2]||(m[2]=X("h2",null,"Привіт",-1)),X("form",{onSubmit:Yp(f,["prevent"])},[ml(X("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>o.value=_),type:"email",placeholder:"Email",required:""},null,512),[[Xv,o.value]]),ml(X("input",{"onUpdate:modelValue":m[1]||(m[1]=_=>a.value=_),type:"password",placeholder:"Password",required:""},null,512),[[Xv,a.value]]),X("div",{class:"auth-actions"},[X("button",{type:"button",onClick:u},"Вхід"),X("button",{type:"button",onClick:d},"Реєстрація")]),l.value?(ht(),vt("div",H3,We(l.value),1)):pn("",!0)],32)],4))}},W3=Xi(z3,[["__scopeId","data-v-98730007"]]);const Y3={class:"palette-section"},q3={class:"palette-scroll-mask"},K3={class:"palette-options"},G3=["onClick"],X3={class:"palette-section"},Q3={class:"palette-scroll-mask"},J3={class:"palette-options"},Z3=["onClick"],t5={__name:"Settings",setup(e){const t=["#E3F0FF","#4cae4f","#282828","#FFD6C0","#F8F9FA","#E6E6FA"],n=["#FFB74D","#121212","#FF654F","#71ADBA","#388E3C","#FFFFF0"],s=Lt(t[0]),i=Lt(n[0]);function r(f){s.value=f,a()}function o(f){i.value=f,a()}function a(){document.documentElement.style.setProperty("--primary",s.value),document.documentElement.style.setProperty("--accent",i.value),localStorage.setItem("color-primary",s.value),localStorage.setItem("color-accent",i.value)}Ss(()=>{const f=localStorage.getItem("color-primary"),p=localStorage.getItem("color-accent");f&&t.includes(f)&&(s.value=f),p&&n.includes(p)&&(i.value=p),a()});function l(f){let p=f.replace("#","");p.length===3&&(p=p.split("").map(_=>_+_).join(""));const m=parseInt(p,16);return[m>>16,m>>8&255,m&255]}function c([f,p,m]){return"#"+[f,p,m].map(_=>_.toString(16).padStart(2,"0")).join("")}function u(f,p){const[m,_,y]=l(f),x=p<0?0:255,M=Math.abs(p);return c([Math.round((x-m)*M+m),Math.round((x-_)*M+_),Math.round((x-y)*M+y)])}const d=G(()=>{const f=s.value,p=u(f,.5),m=u(f,-.3);return`linear-gradient(135deg, ${p} 0%, ${f} 50%, ${m} 100%)`});return(f,p)=>(ht(),vt("div",{class:"settings-container",style:sn({background:d.value})},[X("button",{class:"back-btn",onClick:p[0]||(p[0]=m=>f.$router.push("/")),"aria-label":"Back"},p[1]||(p[1]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",Y3,[p[2]||(p[2]=X("div",{class:"palette-label"},"Основний колір:",-1)),X("div",q3,[X("div",K3,[(ht(),vt(re,null,Cn(t,m=>X("button",{key:m,style:sn({background:m}),class:oe({selected:m===s.value}),onClick:_=>r(m)},null,14,G3)),64))])])]),X("div",X3,[p[3]||(p[3]=X("div",{class:"palette-label"},"Акцент:",-1)),X("div",Q3,[X("div",J3,[(ht(),vt(re,null,Cn(n,m=>X("button",{key:m,style:sn({background:m}),class:oe({selected:m===i.value}),onClick:_=>o(m)},null,14,Z3)),64))])])])],4))}},e5=Xi(t5,[["__scopeId","data-v-e9e4fcec"]]);var wn="top",zn="bottom",Wn="right",Tn="left",em="auto",lc=[wn,zn,Wn,Tn],Ho="start",Bl="end",n5="clippingParents",oS="viewport",ka="popper",s5="reference",Zb=lc.reduce(function(e,t){return e.concat([t+"-"+Ho,t+"-"+Bl])},[]),aS=[].concat(lc,[em]).reduce(function(e,t){return e.concat([t,t+"-"+Ho,t+"-"+Bl])},[]),i5="beforeRead",r5="read",o5="afterRead",a5="beforeMain",l5="main",c5="afterMain",u5="beforeWrite",h5="write",d5="afterWrite",f5=[i5,r5,o5,a5,l5,c5,u5,h5,d5];function Es(e){return e?(e.nodeName||"").toLowerCase():null}function Pn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Fr(e){var t=Pn(e).Element;return e instanceof t||e instanceof Element}function Bn(e){var t=Pn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function nm(e){if(typeof ShadowRoot>"u")return!1;var t=Pn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function p5(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},i=t.attributes[n]||{},r=t.elements[n];!Bn(r)||!Es(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function g5(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var i=t.elements[s],r=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!Bn(i)||!Es(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}const m5={name:"applyStyles",enabled:!0,phase:"write",fn:p5,effect:g5,requires:["computeStyles"]};function ys(e){return e.split("-")[0]}var Cr=Math.max,ch=Math.min,zo=Math.round;function gp(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function lS(){return!/^((?!chrome|android).)*safari/i.test(gp())}function Wo(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),i=1,r=1;t&&Bn(e)&&(i=e.offsetWidth>0&&zo(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&zo(s.height)/e.offsetHeight||1);var o=Fr(e)?Pn(e):window,a=o.visualViewport,l=!lS()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/i,u=(s.top+(l&&a?a.offsetTop:0))/r,d=s.width/i,f=s.height/r;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function sm(e){var t=Wo(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function cS(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&nm(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ti(e){return Pn(e).getComputedStyle(e)}function v5(e){return["table","td","th"].indexOf(Es(e))>=0}function tr(e){return((Fr(e)?e.ownerDocument:e.document)||window.document).documentElement}function rd(e){return Es(e)==="html"?e:e.assignedSlot||e.parentNode||(nm(e)?e.host:null)||tr(e)}function t0(e){return!Bn(e)||ti(e).position==="fixed"?null:e.offsetParent}function _5(e){var t=/firefox/i.test(gp()),n=/Trident/i.test(gp());if(n&&Bn(e)){var s=ti(e);if(s.position==="fixed")return null}var i=rd(e);for(nm(i)&&(i=i.host);Bn(i)&&["html","body"].indexOf(Es(i))<0;){var r=ti(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function cc(e){for(var t=Pn(e),n=t0(e);n&&v5(n)&&ti(n).position==="static";)n=t0(n);return n&&(Es(n)==="html"||Es(n)==="body"&&ti(n).position==="static")?t:n||_5(e)||t}function im(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function hl(e,t,n){return Cr(e,ch(t,n))}function y5(e,t,n){var s=hl(e,t,n);return s>n?n:s}function uS(){return{top:0,right:0,bottom:0,left:0}}function hS(e){return Object.assign({},uS(),e)}function dS(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var b5=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,hS(typeof t!="number"?t:dS(t,lc))};function w5(e){var t,n=e.state,s=e.name,i=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ys(n.placement),l=im(a),c=[Tn,Wn].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var d=b5(i.padding,n),f=sm(r),p=l==="y"?wn:Tn,m=l==="y"?zn:Wn,_=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],x=cc(r),M=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,E=_/2-y/2,b=d[p],R=M-f[u]-d[m],L=M/2-f[u]/2+E,I=hl(b,L,R),w=l;n.modifiersData[s]=(t={},t[w]=I,t.centerOffset=I-L,t)}}function T5(e){var t=e.state,n=e.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||cS(t.elements.popper,i)&&(t.elements.arrow=i))}const E5={name:"arrow",enabled:!0,phase:"main",fn:w5,effect:T5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yo(e){return e.split("-")[1]}var I5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function S5(e,t){var n=e.x,s=e.y,i=t.devicePixelRatio||1;return{x:zo(n*i)/i||0,y:zo(s*i)/i||0}}function e0(e){var t,n=e.popper,s=e.popperRect,i=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,f=o.x,p=f===void 0?0:f,m=o.y,_=m===void 0?0:m,y=typeof u=="function"?u({x:p,y:_}):{x:p,y:_};p=y.x,_=y.y;var x=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),E=Tn,b=wn,R=window;if(c){var L=cc(n),I="clientHeight",w="clientWidth";if(L===Pn(n)&&(L=tr(n),ti(L).position!=="static"&&a==="absolute"&&(I="scrollHeight",w="scrollWidth")),L=L,i===wn||(i===Tn||i===Wn)&&r===Bl){b=zn;var T=d&&L===R&&R.visualViewport?R.visualViewport.height:L[I];_-=T-s.height,_*=l?1:-1}if(i===Tn||(i===wn||i===zn)&&r===Bl){E=Wn;var k=d&&L===R&&R.visualViewport?R.visualViewport.width:L[w];p-=k-s.width,p*=l?1:-1}}var S=Object.assign({position:a},c&&I5),P=u===!0?S5({x:p,y:_},Pn(n)):{x:p,y:_};if(p=P.x,_=P.y,l){var C;return Object.assign({},S,(C={},C[b]=M?"0":"",C[E]=x?"0":"",C.transform=(R.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",C))}return Object.assign({},S,(t={},t[b]=M?_+"px":"",t[E]=x?p+"px":"",t.transform="",t))}function A5(e){var t=e.state,n=e.options,s=n.gpuAcceleration,i=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ys(t.placement),variation:Yo(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,e0(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,e0(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const x5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:A5,data:{}};var Qc={passive:!0};function C5(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,l=Pn(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,Qc)}),a&&l.addEventListener("resize",n.update,Qc),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Qc)}),a&&l.removeEventListener("resize",n.update,Qc)}}const P5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:C5,data:{}};var k5={left:"right",right:"left",bottom:"top",top:"bottom"};function bu(e){return e.replace(/left|right|bottom|top/g,function(t){return k5[t]})}var D5={start:"end",end:"start"};function n0(e){return e.replace(/start|end/g,function(t){return D5[t]})}function rm(e){var t=Pn(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function om(e){return Wo(tr(e)).left+rm(e).scrollLeft}function R5(e,t){var n=Pn(e),s=tr(e),i=n.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var c=lS();(c||!c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+om(e),y:l}}function M5(e){var t,n=tr(e),s=rm(e),i=(t=e.ownerDocument)==null?void 0:t.body,r=Cr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Cr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+om(e),l=-s.scrollTop;return ti(i||n).direction==="rtl"&&(a+=Cr(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function am(e){var t=ti(e),n=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function fS(e){return["html","body","#document"].indexOf(Es(e))>=0?e.ownerDocument.body:Bn(e)&&am(e)?e:fS(rd(e))}function dl(e,t){var n;t===void 0&&(t=[]);var s=fS(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),r=Pn(s),o=i?[r].concat(r.visualViewport||[],am(s)?s:[]):s,a=t.concat(o);return i?a:a.concat(dl(rd(o)))}function mp(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function O5(e,t){var n=Wo(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function s0(e,t,n){return t===oS?mp(R5(e,n)):Fr(t)?O5(t,n):mp(M5(tr(e)))}function L5(e){var t=dl(rd(e)),n=["absolute","fixed"].indexOf(ti(e).position)>=0,s=n&&Bn(e)?cc(e):e;return Fr(s)?t.filter(function(i){return Fr(i)&&cS(i,s)&&Es(i)!=="body"}):[]}function N5(e,t,n,s){var i=t==="clippingParents"?L5(e):[].concat(t),r=[].concat(i,[n]),o=r[0],a=r.reduce(function(l,c){var u=s0(e,c,s);return l.top=Cr(u.top,l.top),l.right=ch(u.right,l.right),l.bottom=ch(u.bottom,l.bottom),l.left=Cr(u.left,l.left),l},s0(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function pS(e){var t=e.reference,n=e.element,s=e.placement,i=s?ys(s):null,r=s?Yo(s):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(i){case wn:l={x:o,y:t.y-n.height};break;case zn:l={x:o,y:t.y+t.height};break;case Wn:l={x:t.x+t.width,y:a};break;case Tn:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=i?im(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Ho:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Bl:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function Ul(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=s===void 0?e.placement:s,r=n.strategy,o=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?n5:a,c=n.rootBoundary,u=c===void 0?oS:c,d=n.elementContext,f=d===void 0?ka:d,p=n.altBoundary,m=p===void 0?!1:p,_=n.padding,y=_===void 0?0:_,x=hS(typeof y!="number"?y:dS(y,lc)),M=f===ka?s5:ka,E=e.rects.popper,b=e.elements[m?M:f],R=N5(Fr(b)?b:b.contextElement||tr(e.elements.popper),l,u,o),L=Wo(e.elements.reference),I=pS({reference:L,element:E,strategy:"absolute",placement:i}),w=mp(Object.assign({},E,I)),T=f===ka?w:L,k={top:R.top-T.top+x.top,bottom:T.bottom-R.bottom+x.bottom,left:R.left-T.left+x.left,right:T.right-R.right+x.right},S=e.modifiersData.offset;if(f===ka&&S){var P=S[i];Object.keys(k).forEach(function(C){var ot=[Wn,zn].indexOf(C)>=0?1:-1,K=[wn,zn].indexOf(C)>=0?"y":"x";k[C]+=P[K]*ot})}return k}function V5(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?aS:l,u=Yo(s),d=u?a?Zb:Zb.filter(function(m){return Yo(m)===u}):lc,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var p=f.reduce(function(m,_){return m[_]=Ul(e,{placement:_,boundary:i,rootBoundary:r,padding:o})[ys(_)],m},{});return Object.keys(p).sort(function(m,_){return p[m]-p[_]})}function F5(e){if(ys(e)===em)return[];var t=bu(e);return[n0(e),t,n0(t)]}function $5(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,_=n.allowedAutoPlacements,y=t.options.placement,x=ys(y),M=x===y,E=l||(M||!m?[bu(y)]:F5(y)),b=[y].concat(E).reduce(function(Mt,qt){return Mt.concat(ys(qt)===em?V5(t,{placement:qt,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:_}):qt)},[]),R=t.rects.reference,L=t.rects.popper,I=new Map,w=!0,T=b[0],k=0;k<b.length;k++){var S=b[k],P=ys(S),C=Yo(S)===Ho,ot=[wn,zn].indexOf(P)>=0,K=ot?"width":"height",lt=Ul(t,{placement:S,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),at=ot?C?Wn:Tn:C?zn:wn;R[K]>L[K]&&(at=bu(at));var gt=bu(at),Vt=[];if(r&&Vt.push(lt[P]<=0),a&&Vt.push(lt[at]<=0,lt[gt]<=0),Vt.every(function(Mt){return Mt})){T=S,w=!1;break}I.set(S,Vt)}if(w)for(var W=m?3:1,St=function(qt){var jt=b.find(function($){var it=I.get($);if(it)return it.slice(0,qt).every(function(Z){return Z})});if(jt)return T=jt,"break"},et=W;et>0;et--){var kt=St(et);if(kt==="break")break}t.placement!==T&&(t.modifiersData[s]._skip=!0,t.placement=T,t.reset=!0)}}const B5={name:"flip",enabled:!0,phase:"main",fn:$5,requiresIfExists:["offset"],data:{_skip:!1}};function i0(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function r0(e){return[wn,Wn,zn,Tn].some(function(t){return e[t]>=0})}function U5(e){var t=e.state,n=e.name,s=t.rects.reference,i=t.rects.popper,r=t.modifiersData.preventOverflow,o=Ul(t,{elementContext:"reference"}),a=Ul(t,{altBoundary:!0}),l=i0(o,s),c=i0(a,i,r),u=r0(l),d=r0(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const j5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:U5};function H5(e,t,n){var s=ys(e),i=[Tn,wn].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[Tn,Wn].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function z5(e){var t=e.state,n=e.options,s=e.name,i=n.offset,r=i===void 0?[0,0]:i,o=aS.reduce(function(u,d){return u[d]=H5(d,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=o}const W5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:z5};function Y5(e){var t=e.state,n=e.name;t.modifiersData[n]=pS({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const q5={name:"popperOffsets",enabled:!0,phase:"read",fn:Y5,data:{}};function K5(e){return e==="x"?"y":"x"}function G5(e){var t=e.state,n=e.options,s=e.name,i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,m=n.tetherOffset,_=m===void 0?0:m,y=Ul(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),x=ys(t.placement),M=Yo(t.placement),E=!M,b=im(x),R=K5(b),L=t.modifiersData.popperOffsets,I=t.rects.reference,w=t.rects.popper,T=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,k=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(L){if(r){var C,ot=b==="y"?wn:Tn,K=b==="y"?zn:Wn,lt=b==="y"?"height":"width",at=L[b],gt=at+y[ot],Vt=at-y[K],W=p?-w[lt]/2:0,St=M===Ho?I[lt]:w[lt],et=M===Ho?-w[lt]:-I[lt],kt=t.elements.arrow,Mt=p&&kt?sm(kt):{width:0,height:0},qt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:uS(),jt=qt[ot],$=qt[K],it=hl(0,I[lt],Mt[lt]),Z=E?I[lt]/2-W-it-jt-k.mainAxis:St-it-jt-k.mainAxis,ct=E?-I[lt]/2+W+it+$+k.mainAxis:et+it+$+k.mainAxis,Ot=t.elements.arrow&&cc(t.elements.arrow),Wt=Ot?b==="y"?Ot.clientTop||0:Ot.clientLeft||0:0,D=(C=S==null?void 0:S[b])!=null?C:0,O=at+Z-D-Wt,V=at+ct-D,j=hl(p?ch(gt,O):gt,at,p?Cr(Vt,V):Vt);L[b]=j,P[b]=j-at}if(a){var B,z=b==="x"?wn:Tn,st=b==="x"?zn:Wn,Q=L[R],J=R==="y"?"height":"width",Y=Q+y[z],pt=Q-y[st],nt=[wn,Tn].indexOf(x)!==-1,dt=(B=S==null?void 0:S[R])!=null?B:0,yt=nt?Y:Q-I[J]-w[J]-dt+k.altAxis,mt=nt?Q+I[J]+w[J]-dt-k.altAxis:pt,At=p&&nt?y5(yt,Q,mt):hl(p?yt:Y,Q,p?mt:pt);L[R]=At,P[R]=At-Q}t.modifiersData[s]=P}}const X5={name:"preventOverflow",enabled:!0,phase:"main",fn:G5,requiresIfExists:["offset"]};function Q5(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function J5(e){return e===Pn(e)||!Bn(e)?rm(e):Q5(e)}function Z5(e){var t=e.getBoundingClientRect(),n=zo(t.width)/e.offsetWidth||1,s=zo(t.height)/e.offsetHeight||1;return n!==1||s!==1}function t6(e,t,n){n===void 0&&(n=!1);var s=Bn(t),i=Bn(t)&&Z5(t),r=tr(t),o=Wo(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Es(t)!=="body"||am(r))&&(a=J5(t)),Bn(t)?(l=Wo(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=om(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function e6(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function i(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&i(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||i(r)}),s}function n6(e){var t=e6(e);return f5.reduce(function(n,s){return n.concat(t.filter(function(i){return i.phase===s}))},[])}function s6(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function i6(e){var t=e.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var o0={placement:"bottom",modifiers:[],strategy:"absolute"};function a0(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function r6(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,i=t.defaultOptions,r=i===void 0?o0:i;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},o0,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(x){var M=typeof x=="function"?x(u.options):x;_(),u.options=Object.assign({},r,u.options,M),u.scrollParents={reference:Fr(a)?dl(a):a.contextElement?dl(a.contextElement):[],popper:dl(l)};var E=n6(i6([].concat(s,u.options.modifiers)));return u.orderedModifiers=E.filter(function(b){return b.enabled}),m(),p.update()},forceUpdate:function(){if(!f){var x=u.elements,M=x.reference,E=x.popper;if(a0(M,E)){u.rects={reference:t6(M,cc(E),u.options.strategy==="fixed"),popper:sm(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var R=u.orderedModifiers[b],L=R.fn,I=R.options,w=I===void 0?{}:I,T=R.name;typeof L=="function"&&(u=L({state:u,options:w,name:T,instance:p})||u)}}}},update:s6(function(){return new Promise(function(y){p.forceUpdate(),y(u)})}),destroy:function(){_(),f=!0}};if(!a0(a,l))return p;p.setOptions(c).then(function(y){!f&&c.onFirstUpdate&&c.onFirstUpdate(y)});function m(){u.orderedModifiers.forEach(function(y){var x=y.name,M=y.options,E=M===void 0?{}:M,b=y.effect;if(typeof b=="function"){var R=b({state:u,name:x,instance:p,options:E}),L=function(){};d.push(R||L)}})}function _(){d.forEach(function(y){return y()}),d=[]}return p}}var o6=[P5,q5,x5,m5,W5,B5,X5,E5,j5],a6=r6({defaultModifiers:o6}),l6=Object.defineProperty,c6=(e,t,n)=>t in e?l6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bt=(e,t,n)=>(c6(e,typeof t!="symbol"?t+"":t,n),n),Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u6=Object.prototype,h6=u6.hasOwnProperty;function d6(e,t){return e!=null&&h6.call(e,t)}var f6=d6,p6=Array.isArray,ns=p6,g6=typeof Jc=="object"&&Jc&&Jc.Object===Object&&Jc,mS=g6,m6=mS,v6=typeof self=="object"&&self&&self.Object===Object&&self,_6=m6||v6||Function("return this")(),As=_6,y6=As,b6=y6.Symbol,od=b6,l0=od,vS=Object.prototype,w6=vS.hasOwnProperty,T6=vS.toString,Da=l0?l0.toStringTag:void 0;function E6(e){var t=w6.call(e,Da),n=e[Da];try{e[Da]=void 0;var s=!0}catch{}var i=T6.call(e);return s&&(t?e[Da]=n:delete e[Da]),i}var I6=E6,S6=Object.prototype,A6=S6.toString;function x6(e){return A6.call(e)}var C6=x6,c0=od,P6=I6,k6=C6,D6="[object Null]",R6="[object Undefined]",u0=c0?c0.toStringTag:void 0;function M6(e){return e==null?e===void 0?R6:D6:u0&&u0 in Object(e)?P6(e):k6(e)}var xs=M6;function O6(e){return e!=null&&typeof e=="object"}var ss=O6,L6=xs,N6=ss,V6="[object Symbol]";function F6(e){return typeof e=="symbol"||N6(e)&&L6(e)==V6}var lm=F6,$6=ns,B6=lm,U6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j6=/^\w*$/;function H6(e,t){if($6(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||B6(e)?!0:j6.test(e)||!U6.test(e)||t!=null&&e in Object(t)}var cm=H6;function z6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ri=z6,W6=xs,Y6=ri,q6="[object AsyncFunction]",K6="[object Function]",G6="[object GeneratorFunction]",X6="[object Proxy]";function Q6(e){if(!Y6(e))return!1;var t=W6(e);return t==K6||t==G6||t==q6||t==X6}var Kr=Q6,J6=As,Z6=J6["__core-js_shared__"],tB=Z6,lf=tB,h0=function(){var e=/[^.]+$/.exec(lf&&lf.keys&&lf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function eB(e){return!!h0&&h0 in e}var nB=eB,sB=Function.prototype,iB=sB.toString;function rB(e){if(e!=null){try{return iB.call(e)}catch{}try{return e+""}catch{}}return""}var _S=rB,oB=Kr,aB=nB,lB=ri,cB=_S,uB=/[\\^$.*+?()[\]{}|]/g,hB=/^\[object .+?Constructor\]$/,dB=Function.prototype,fB=Object.prototype,pB=dB.toString,gB=fB.hasOwnProperty,mB=RegExp("^"+pB.call(gB).replace(uB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vB(e){if(!lB(e)||aB(e))return!1;var t=oB(e)?mB:hB;return t.test(cB(e))}var _B=vB;function yB(e,t){return e==null?void 0:e[t]}var bB=yB,wB=_B,TB=bB;function EB(e,t){var n=TB(e,t);return wB(n)?n:void 0}var Gr=EB,IB=Gr,SB=IB(Object,"create"),ad=SB,d0=ad;function AB(){this.__data__=d0?d0(null):{},this.size=0}var xB=AB;function CB(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var PB=CB,kB=ad,DB="__lodash_hash_undefined__",RB=Object.prototype,MB=RB.hasOwnProperty;function OB(e){var t=this.__data__;if(kB){var n=t[e];return n===DB?void 0:n}return MB.call(t,e)?t[e]:void 0}var LB=OB,NB=ad,VB=Object.prototype,FB=VB.hasOwnProperty;function $B(e){var t=this.__data__;return NB?t[e]!==void 0:FB.call(t,e)}var BB=$B,UB=ad,jB="__lodash_hash_undefined__";function HB(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=UB&&t===void 0?jB:t,this}var zB=HB,WB=xB,YB=PB,qB=LB,KB=BB,GB=zB;function sa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}sa.prototype.clear=WB;sa.prototype.delete=YB;sa.prototype.get=qB;sa.prototype.has=KB;sa.prototype.set=GB;var XB=sa;function QB(){this.__data__=[],this.size=0}var JB=QB;function ZB(e,t){return e===t||e!==e&&t!==t}var ia=ZB,tU=ia;function eU(e,t){for(var n=e.length;n--;)if(tU(e[n][0],t))return n;return-1}var ld=eU,nU=ld,sU=Array.prototype,iU=sU.splice;function rU(e){var t=this.__data__,n=nU(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():iU.call(t,n,1),--this.size,!0}var oU=rU,aU=ld;function lU(e){var t=this.__data__,n=aU(t,e);return n<0?void 0:t[n][1]}var cU=lU,uU=ld;function hU(e){return uU(this.__data__,e)>-1}var dU=hU,fU=ld;function pU(e,t){var n=this.__data__,s=fU(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var gU=pU,mU=JB,vU=oU,_U=cU,yU=dU,bU=gU;function ra(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}ra.prototype.clear=mU;ra.prototype.delete=vU;ra.prototype.get=_U;ra.prototype.has=yU;ra.prototype.set=bU;var cd=ra,wU=Gr,TU=As,EU=wU(TU,"Map"),um=EU,f0=XB,IU=cd,SU=um;function AU(){this.size=0,this.__data__={hash:new f0,map:new(SU||IU),string:new f0}}var xU=AU;function CU(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var PU=CU,kU=PU;function DU(e,t){var n=e.__data__;return kU(t)?n[typeof t=="string"?"string":"hash"]:n.map}var ud=DU,RU=ud;function MU(e){var t=RU(this,e).delete(e);return this.size-=t?1:0,t}var OU=MU,LU=ud;function NU(e){return LU(this,e).get(e)}var VU=NU,FU=ud;function $U(e){return FU(this,e).has(e)}var BU=$U,UU=ud;function jU(e,t){var n=UU(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var HU=jU,zU=xU,WU=OU,YU=VU,qU=BU,KU=HU;function oa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}oa.prototype.clear=zU;oa.prototype.delete=WU;oa.prototype.get=YU;oa.prototype.has=qU;oa.prototype.set=KU;var hm=oa,yS=hm,GU="Expected a function";function dm(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(GU);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],r=n.cache;if(r.has(i))return r.get(i);var o=e.apply(this,s);return n.cache=r.set(i,o)||r,o};return n.cache=new(dm.Cache||yS),n}dm.Cache=yS;var XU=dm,QU=XU,JU=500;function ZU(e){var t=QU(e,function(s){return n.size===JU&&n.clear(),s}),n=t.cache;return t}var t9=ZU,e9=t9,n9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s9=/\\(\\)?/g,i9=e9(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(n9,function(n,s,i,r){t.push(i?r.replace(s9,"$1"):s||n)}),t}),r9=i9;function o9(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var a9=o9,p0=od,l9=a9,c9=ns,u9=lm,h9=1/0,g0=p0?p0.prototype:void 0,m0=g0?g0.toString:void 0;function bS(e){if(typeof e=="string")return e;if(c9(e))return l9(e,bS)+"";if(u9(e))return m0?m0.call(e):"";var t=e+"";return t=="0"&&1/e==-h9?"-0":t}var d9=bS,f9=d9;function p9(e){return e==null?"":f9(e)}var g9=p9,m9=ns,v9=cm,_9=r9,y9=g9;function b9(e,t){return m9(e)?e:v9(e,t)?[e]:_9(y9(e))}var wS=b9,w9=xs,T9=ss,E9="[object Arguments]";function I9(e){return T9(e)&&w9(e)==E9}var S9=I9,v0=S9,A9=ss,TS=Object.prototype,x9=TS.hasOwnProperty,C9=TS.propertyIsEnumerable,P9=v0(function(){return arguments}())?v0:function(e){return A9(e)&&x9.call(e,"callee")&&!C9.call(e,"callee")},fm=P9,k9=9007199254740991,D9=/^(?:0|[1-9]\d*)$/;function R9(e,t){var n=typeof e;return t=t??k9,!!t&&(n=="number"||n!="symbol"&&D9.test(e))&&e>-1&&e%1==0&&e<t}var pm=R9,M9=9007199254740991;function O9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=M9}var gm=O9,L9=lm,N9=1/0;function V9(e){if(typeof e=="string"||L9(e))return e;var t=e+"";return t=="0"&&1/e==-N9?"-0":t}var hd=V9,F9=wS,$9=fm,B9=ns,U9=pm,j9=gm,H9=hd;function z9(e,t,n){t=F9(t,e);for(var s=-1,i=t.length,r=!1;++s<i;){var o=H9(t[s]);if(!(r=e!=null&&n(e,o)))break;e=e[o]}return r||++s!=i?r:(i=e==null?0:e.length,!!i&&j9(i)&&U9(o,i)&&(B9(e)||$9(e)))}var ES=z9,W9=f6,Y9=ES;function q9(e,t){return e!=null&&Y9(e,t,W9)}var IS=q9,K9=xs,G9=ss,X9="[object Date]";function Q9(e){return G9(e)&&K9(e)==X9}var J9=Q9;function Z9(e){return function(t){return e(t)}}var SS=Z9,jl={},tj={get exports(){return jl},set exports(e){jl=e}};(function(e,t){var n=mS,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,r=i&&i.exports===s,o=r&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(tj,jl);var ej=J9,nj=SS,_0=jl,y0=_0&&_0.isDate,sj=y0?nj(y0):ej,ij=sj,rj=xs,oj=ns,aj=ss,lj="[object String]";function cj(e){return typeof e=="string"||!oj(e)&&aj(e)&&rj(e)==lj}var Ws=cj;function uj(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var AS=uj,hj=cd;function dj(){this.__data__=new hj,this.size=0}var fj=dj;function pj(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var gj=pj;function mj(e){return this.__data__.get(e)}var vj=mj;function _j(e){return this.__data__.has(e)}var yj=_j,bj=cd,wj=um,Tj=hm,Ej=200;function Ij(e,t){var n=this.__data__;if(n instanceof bj){var s=n.__data__;if(!wj||s.length<Ej-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Tj(s)}return n.set(e,t),this.size=n.size,this}var Sj=Ij,Aj=cd,xj=fj,Cj=gj,Pj=vj,kj=yj,Dj=Sj;function aa(e){var t=this.__data__=new Aj(e);this.size=t.size}aa.prototype.clear=xj;aa.prototype.delete=Cj;aa.prototype.get=Pj;aa.prototype.has=kj;aa.prototype.set=Dj;var mm=aa,Rj="__lodash_hash_undefined__";function Mj(e){return this.__data__.set(e,Rj),this}var Oj=Mj;function Lj(e){return this.__data__.has(e)}var Nj=Lj,Vj=hm,Fj=Oj,$j=Nj;function uh(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Vj;++t<n;)this.add(e[t])}uh.prototype.add=uh.prototype.push=Fj;uh.prototype.has=$j;var Bj=uh;function Uj(e,t){return e.has(t)}var jj=Uj,Hj=Bj,zj=AS,Wj=jj,Yj=1,qj=2;function Kj(e,t,n,s,i,r){var o=n&Yj,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(e),u=r.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,p=n&qj?new Hj:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var m=e[d],_=t[d];if(s)var y=o?s(_,m,d,t,e,r):s(m,_,d,e,t,r);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!zj(t,function(x,M){if(!Wj(p,M)&&(m===x||i(m,x,n,s,r)))return p.push(M)})){f=!1;break}}else if(!(m===_||i(m,_,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}var xS=Kj,Gj=As,Xj=Gj.Uint8Array,CS=Xj;function Qj(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var Jj=Qj;function Zj(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var tH=Zj,b0=od,w0=CS,eH=ia,nH=xS,sH=Jj,iH=tH,rH=1,oH=2,aH="[object Boolean]",lH="[object Date]",cH="[object Error]",uH="[object Map]",hH="[object Number]",dH="[object RegExp]",fH="[object Set]",pH="[object String]",gH="[object Symbol]",mH="[object ArrayBuffer]",vH="[object DataView]",T0=b0?b0.prototype:void 0,cf=T0?T0.valueOf:void 0;function _H(e,t,n,s,i,r,o){switch(n){case vH:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case mH:return!(e.byteLength!=t.byteLength||!r(new w0(e),new w0(t)));case aH:case lH:case hH:return eH(+e,+t);case cH:return e.name==t.name&&e.message==t.message;case dH:case pH:return e==t+"";case uH:var a=sH;case fH:var l=s&rH;if(a||(a=iH),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;s|=oH,o.set(e,t);var u=nH(a(e),a(t),s,i,r,o);return o.delete(e),u;case gH:if(cf)return cf.call(e)==cf.call(t)}return!1}var yH=_H;function bH(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var wH=bH,TH=wH,EH=ns;function IH(e,t,n){var s=t(e);return EH(e)?s:TH(s,n(e))}var SH=IH;function AH(e,t){for(var n=-1,s=e==null?0:e.length,i=0,r=[];++n<s;){var o=e[n];t(o,n,e)&&(r[i++]=o)}return r}var xH=AH;function CH(){return[]}var PH=CH,kH=xH,DH=PH,RH=Object.prototype,MH=RH.propertyIsEnumerable,E0=Object.getOwnPropertySymbols,OH=E0?function(e){return e==null?[]:(e=Object(e),kH(E0(e),function(t){return MH.call(e,t)}))}:DH,LH=OH;function NH(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var VH=NH,qo={},FH={get exports(){return qo},set exports(e){qo=e}};function $H(){return!1}var BH=$H;(function(e,t){var n=As,s=BH,i=t&&!t.nodeType&&t,r=i&&!0&&e&&!e.nodeType&&e,o=r&&r.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||s;e.exports=c})(FH,qo);var UH=xs,jH=gm,HH=ss,zH="[object Arguments]",WH="[object Array]",YH="[object Boolean]",qH="[object Date]",KH="[object Error]",GH="[object Function]",XH="[object Map]",QH="[object Number]",JH="[object Object]",ZH="[object RegExp]",tz="[object Set]",ez="[object String]",nz="[object WeakMap]",sz="[object ArrayBuffer]",iz="[object DataView]",rz="[object Float32Array]",oz="[object Float64Array]",az="[object Int8Array]",lz="[object Int16Array]",cz="[object Int32Array]",uz="[object Uint8Array]",hz="[object Uint8ClampedArray]",dz="[object Uint16Array]",fz="[object Uint32Array]",de={};de[rz]=de[oz]=de[az]=de[lz]=de[cz]=de[uz]=de[hz]=de[dz]=de[fz]=!0;de[zH]=de[WH]=de[sz]=de[YH]=de[iz]=de[qH]=de[KH]=de[GH]=de[XH]=de[QH]=de[JH]=de[ZH]=de[tz]=de[ez]=de[nz]=!1;function pz(e){return HH(e)&&jH(e.length)&&!!de[UH(e)]}var gz=pz,mz=gz,vz=SS,I0=jl,S0=I0&&I0.isTypedArray,_z=S0?vz(S0):mz,vm=_z,yz=VH,bz=fm,wz=ns,Tz=qo,Ez=pm,Iz=vm,Sz=Object.prototype,Az=Sz.hasOwnProperty;function xz(e,t){var n=wz(e),s=!n&&bz(e),i=!n&&!s&&Tz(e),r=!n&&!s&&!i&&Iz(e),o=n||s||i||r,a=o?yz(e.length,String):[],l=a.length;for(var c in e)(t||Az.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ez(c,l)))&&a.push(c);return a}var PS=xz,Cz=Object.prototype;function Pz(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Cz;return e===n}var _m=Pz;function kz(e,t){return function(n){return e(t(n))}}var kS=kz,Dz=kS,Rz=Dz(Object.keys,Object),Mz=Rz,Oz=_m,Lz=Mz,Nz=Object.prototype,Vz=Nz.hasOwnProperty;function Fz(e){if(!Oz(e))return Lz(e);var t=[];for(var n in Object(e))Vz.call(e,n)&&n!="constructor"&&t.push(n);return t}var $z=Fz,Bz=Kr,Uz=gm;function jz(e){return e!=null&&Uz(e.length)&&!Bz(e)}var uc=jz,Hz=PS,zz=$z,Wz=uc;function Yz(e){return Wz(e)?Hz(e):zz(e)}var ym=Yz,qz=SH,Kz=LH,Gz=ym;function Xz(e){return qz(e,Gz,Kz)}var Qz=Xz,A0=Qz,Jz=1,Zz=Object.prototype,tW=Zz.hasOwnProperty;function eW(e,t,n,s,i,r){var o=n&Jz,a=A0(e),l=a.length,c=A0(t),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in t:tW.call(t,f)))return!1}var p=r.get(e),m=r.get(t);if(p&&m)return p==t&&m==e;var _=!0;r.set(e,t),r.set(t,e);for(var y=o;++d<l;){f=a[d];var x=e[f],M=t[f];if(s)var E=o?s(M,x,f,t,e,r):s(x,M,f,e,t,r);if(!(E===void 0?x===M||i(x,M,n,s,r):E)){_=!1;break}y||(y=f=="constructor")}if(_&&!y){var b=e.constructor,R=t.constructor;b!=R&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof R=="function"&&R instanceof R)&&(_=!1)}return r.delete(e),r.delete(t),_}var nW=eW,sW=Gr,iW=As,rW=sW(iW,"DataView"),oW=rW,aW=Gr,lW=As,cW=aW(lW,"Promise"),uW=cW,hW=Gr,dW=As,fW=hW(dW,"Set"),pW=fW,gW=Gr,mW=As,vW=gW(mW,"WeakMap"),_W=vW,vp=oW,_p=um,yp=uW,bp=pW,wp=_W,DS=xs,la=_S,x0="[object Map]",yW="[object Object]",C0="[object Promise]",P0="[object Set]",k0="[object WeakMap]",D0="[object DataView]",bW=la(vp),wW=la(_p),TW=la(yp),EW=la(bp),IW=la(wp),yr=DS;(vp&&yr(new vp(new ArrayBuffer(1)))!=D0||_p&&yr(new _p)!=x0||yp&&yr(yp.resolve())!=C0||bp&&yr(new bp)!=P0||wp&&yr(new wp)!=k0)&&(yr=function(e){var t=DS(e),n=t==yW?e.constructor:void 0,s=n?la(n):"";if(s)switch(s){case bW:return D0;case wW:return x0;case TW:return C0;case EW:return P0;case IW:return k0}return t});var SW=yr,uf=mm,AW=xS,xW=yH,CW=nW,R0=SW,M0=ns,O0=qo,PW=vm,kW=1,L0="[object Arguments]",N0="[object Array]",Zc="[object Object]",DW=Object.prototype,V0=DW.hasOwnProperty;function RW(e,t,n,s,i,r){var o=M0(e),a=M0(t),l=o?N0:R0(e),c=a?N0:R0(t);l=l==L0?Zc:l,c=c==L0?Zc:c;var u=l==Zc,d=c==Zc,f=l==c;if(f&&O0(e)){if(!O0(t))return!1;o=!0,u=!1}if(f&&!u)return r||(r=new uf),o||PW(e)?AW(e,t,n,s,i,r):xW(e,t,l,n,s,i,r);if(!(n&kW)){var p=u&&V0.call(e,"__wrapped__"),m=d&&V0.call(t,"__wrapped__");if(p||m){var _=p?e.value():e,y=m?t.value():t;return r||(r=new uf),i(_,y,n,s,r)}}return f?(r||(r=new uf),CW(e,t,n,s,i,r)):!1}var MW=RW,OW=MW,F0=ss;function RS(e,t,n,s,i){return e===t?!0:e==null||t==null||!F0(e)&&!F0(t)?e!==e&&t!==t:OW(e,t,n,s,RS,i)}var MS=RS,LW=mm,NW=MS,VW=1,FW=2;function $W(e,t,n,s){var i=n.length,r=i,o=!s;if(e==null)return!r;for(e=Object(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<r;){a=n[i];var l=a[0],c=e[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in e))return!1}else{var d=new LW;if(s)var f=s(c,u,l,e,t,d);if(!(f===void 0?NW(u,c,VW|FW,s,d):f))return!1}}return!0}var BW=$W,UW=ri;function jW(e){return e===e&&!UW(e)}var OS=jW,HW=OS,zW=ym;function WW(e){for(var t=zW(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,HW(i)]}return t}var YW=WW;function qW(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var LS=qW,KW=BW,GW=YW,XW=LS;function QW(e){var t=GW(e);return t.length==1&&t[0][2]?XW(t[0][0],t[0][1]):function(n){return n===e||KW(n,e,t)}}var JW=QW,ZW=wS,tY=hd;function eY(e,t){t=ZW(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[tY(t[n++])];return n&&n==s?e:void 0}var NS=eY,nY=NS;function sY(e,t,n){var s=e==null?void 0:nY(e,t);return s===void 0?n:s}var Er=sY;function iY(e,t){return e!=null&&t in Object(e)}var rY=iY,oY=rY,aY=ES;function lY(e,t){return e!=null&&aY(e,t,oY)}var cY=lY,uY=MS,hY=Er,dY=cY,fY=cm,pY=OS,gY=LS,mY=hd,vY=1,_Y=2;function yY(e,t){return fY(e)&&pY(t)?gY(mY(e),t):function(n){var s=hY(n,e);return s===void 0&&s===t?dY(n,e):uY(t,s,vY|_Y)}}var bY=yY;function wY(e){return e}var bm=wY;function TY(e){return function(t){return t==null?void 0:t[e]}}var EY=TY,IY=NS;function SY(e){return function(t){return IY(t,e)}}var AY=SY,xY=EY,CY=AY,PY=cm,kY=hd;function DY(e){return PY(e)?xY(kY(e)):CY(e)}var RY=DY,MY=JW,OY=bY,LY=bm,NY=ns,VY=RY;function FY(e){return typeof e=="function"?e:e==null?LY:typeof e=="object"?NY(e)?OY(e[0],e[1]):MY(e):VY(e)}var VS=FY;function $Y(e){return function(t,n,s){for(var i=-1,r=Object(t),o=s(t),a=o.length;a--;){var l=o[e?a:++i];if(n(r[l],l,r)===!1)break}return t}}var BY=$Y,UY=BY,jY=UY(),FS=jY,HY=FS,zY=ym;function WY(e,t){return e&&HY(e,t,zY)}var $S=WY,YY=uc;function qY(e,t){return function(n,s){if(n==null)return n;if(!YY(n))return e(n,s);for(var i=n.length,r=t?i:-1,o=Object(n);(t?r--:++r<i)&&s(o[r],r,o)!==!1;);return n}}var KY=qY,GY=$S,XY=KY,QY=XY(GY),JY=QY,ZY=JY;function t7(e,t){var n;return ZY(e,function(s,i,r){return n=t(s,i,r),!n}),!!n}var e7=t7,n7=ia,s7=uc,i7=pm,r7=ri;function o7(e,t,n){if(!r7(n))return!1;var s=typeof t;return(s=="number"?s7(n)&&i7(t,n.length):s=="string"&&t in n)?n7(n[t],e):!1}var wm=o7,a7=AS,l7=VS,c7=e7,u7=ns,h7=wm;function d7(e,t,n){var s=u7(e)?a7:c7;return n&&h7(e,t,n)&&(t=void 0),s(e,l7(t))}var f7=d7,p7=xs,g7=ss,m7="[object Boolean]";function v7(e){return e===!0||e===!1||g7(e)&&p7(e)==m7}var _7=v7,y7=xs,b7=ss,w7="[object Number]";function T7(e){return typeof e=="number"||b7(e)&&y7(e)==w7}var Is=T7,E7=Gr,I7=function(){try{var e=E7(Object,"defineProperty");return e({},"",{}),e}catch{}}(),BS=I7,$0=BS;function S7(e,t,n){t=="__proto__"&&$0?$0(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var dd=S7,A7=dd,x7=ia,C7=Object.prototype,P7=C7.hasOwnProperty;function k7(e,t,n){var s=e[t];(!(P7.call(e,t)&&x7(s,n))||n===void 0&&!(t in e))&&A7(e,t,n)}var D7=k7,R7=dd,M7=$S,O7=VS;function L7(e,t){var n={};return t=O7(t),M7(e,function(s,i,r){R7(n,i,t(s,i,r))}),n}var N7=L7;function V7(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var US=V7,F7=US,B0=Math.max;function $7(e,t,n){return t=B0(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,r=B0(s.length-t,0),o=Array(r);++i<r;)o[i]=s[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=s[i];return a[t]=n(o),F7(e,this,a)}}var B7=$7;function U7(e){return function(){return e}}var j7=U7,H7=j7,U0=BS,z7=bm,W7=U0?function(e,t){return U0(e,"toString",{configurable:!0,enumerable:!1,value:H7(t),writable:!0})}:z7,Y7=W7,q7=800,K7=16,G7=Date.now;function X7(e){var t=0,n=0;return function(){var s=G7(),i=K7-(s-n);if(n=s,i>0){if(++t>=q7)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Q7=X7,J7=Y7,Z7=Q7,t8=Z7(J7),e8=t8,n8=bm,s8=B7,i8=e8;function r8(e,t){return i8(s8(e,t,n8),e+"")}var Tm=r8;function o8(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var a8=o8,l8=ri,c8=_m,u8=a8,h8=Object.prototype,d8=h8.hasOwnProperty;function f8(e){if(!l8(e))return u8(e);var t=c8(e),n=[];for(var s in e)s=="constructor"&&(t||!d8.call(e,s))||n.push(s);return n}var p8=f8,g8=PS,m8=p8,v8=uc;function _8(e){return v8(e)?g8(e,!0):m8(e)}var Em=_8,y8=Tm,b8=ia,w8=wm,T8=Em,jS=Object.prototype,E8=jS.hasOwnProperty,I8=y8(function(e,t){e=Object(e);var n=-1,s=t.length,i=s>2?t[2]:void 0;for(i&&w8(t[0],t[1],i)&&(s=1);++n<s;)for(var r=t[n],o=T8(r),a=-1,l=o.length;++a<l;){var c=o[a],u=e[c];(u===void 0||b8(u,jS[c])&&!E8.call(e,c))&&(e[c]=r[c])}return e}),j0=I8,S8=dd,A8=ia;function x8(e,t,n){(n!==void 0&&!A8(e[t],n)||n===void 0&&!(t in e))&&S8(e,t,n)}var HS=x8,hh={},C8={get exports(){return hh},set exports(e){hh=e}};(function(e,t){var n=As,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,r=i&&i.exports===s,o=r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}e.exports=l})(C8,hh);var H0=CS;function P8(e){var t=new e.constructor(e.byteLength);return new H0(t).set(new H0(e)),t}var k8=P8,D8=k8;function R8(e,t){var n=t?D8(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var M8=R8;function O8(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var L8=O8,N8=ri,z0=Object.create,V8=function(){function e(){}return function(t){if(!N8(t))return{};if(z0)return z0(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),F8=V8,$8=kS,B8=$8(Object.getPrototypeOf,Object),zS=B8,U8=F8,j8=zS,H8=_m;function z8(e){return typeof e.constructor=="function"&&!H8(e)?U8(j8(e)):{}}var W8=z8,Y8=uc,q8=ss;function K8(e){return q8(e)&&Y8(e)}var G8=K8,X8=xs,Q8=zS,J8=ss,Z8="[object Object]",tq=Function.prototype,eq=Object.prototype,WS=tq.toString,nq=eq.hasOwnProperty,sq=WS.call(Object);function iq(e){if(!J8(e)||X8(e)!=Z8)return!1;var t=Q8(e);if(t===null)return!0;var n=nq.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&WS.call(n)==sq}var rq=iq;function oq(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var YS=oq,aq=D7,lq=dd;function cq(e,t,n,s){var i=!n;n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),i?lq(n,a,l):aq(n,a,l)}return n}var uq=cq,hq=uq,dq=Em;function fq(e){return hq(e,dq(e))}var pq=fq,W0=HS,gq=hh,mq=M8,vq=L8,_q=W8,Y0=fm,q0=ns,yq=G8,bq=qo,wq=Kr,Tq=ri,Eq=rq,Iq=vm,K0=YS,Sq=pq;function Aq(e,t,n,s,i,r,o){var a=K0(e,n),l=K0(t,n),c=o.get(l);if(c){W0(e,n,c);return}var u=r?r(a,l,n+"",e,t,o):void 0,d=u===void 0;if(d){var f=q0(l),p=!f&&bq(l),m=!f&&!p&&Iq(l);u=l,f||p||m?q0(a)?u=a:yq(a)?u=vq(a):p?(d=!1,u=gq(l,!0)):m?(d=!1,u=mq(l,!0)):u=[]:Eq(l)||Y0(l)?(u=a,Y0(a)?u=Sq(a):(!Tq(a)||wq(a))&&(u=_q(l))):d=!1}d&&(o.set(l,u),i(u,l,s,r,o),o.delete(l)),W0(e,n,u)}var xq=Aq,Cq=mm,Pq=HS,kq=FS,Dq=xq,Rq=ri,Mq=Em,Oq=YS;function qS(e,t,n,s,i){e!==t&&kq(t,function(r,o){if(i||(i=new Cq),Rq(r))Dq(e,t,o,n,qS,s,i);else{var a=s?s(Oq(e,o),r,o+"",e,t,i):void 0;a===void 0&&(a=r),Pq(e,o,a)}},Mq)}var KS=qS,Lq=KS,G0=ri;function GS(e,t,n,s,i,r){return G0(e)&&G0(t)&&(r.set(t,e),Lq(e,t,void 0,GS,r),r.delete(t)),e}var Nq=GS,Vq=Tm,Fq=wm;function $q(e){return Vq(function(t,n){var s=-1,i=n.length,r=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(r=e.length>3&&typeof r=="function"?(i--,r):void 0,o&&Fq(n[0],n[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++s<i;){var a=n[s];a&&e(t,a,s,r)}return t})}var Bq=$q,Uq=KS,jq=Bq,Hq=jq(function(e,t,n,s){Uq(e,t,n,s)}),zq=Hq,Wq=US,Yq=Tm,qq=Nq,Kq=zq,Gq=Yq(function(e){return e.push(void 0,qq),Wq(Kq,void 0,e)}),dh=Gq;function Xq(e){return e&&e.length?e[0]:void 0}var XS=Xq;function Qq(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var vo=Qq;const Jq=e=>Object.prototype.toString.call(e).slice(8,-1),Tp=e=>ij(e)&&!isNaN(e.getTime()),$r=e=>Jq(e)==="Object",QS=IS,X0=(e,t)=>f7(t,n=>IS(e,n)),ne=(e,t,n="0")=>{for(e=e!=null?String(e):"",t=t||2;e.length<t;)e=`${n}${e}`;return e},bs=e=>Array.isArray(e),Ir=e=>bs(e)&&e.length>0,fh=e=>e==null?null:document&&Ws(e)?document.querySelector(e):e.$el??e,Ii=(e,t,n,s=void 0)=>{e.removeEventListener(t,n,s)},Si=(e,t,n,s=void 0)=>(e.addEventListener(t,n,s),()=>Ii(e,t,n,s)),wu=(e,t)=>!!e&&!!t&&(e===t||e.contains(t)),tu=(e,t)=>{(e.key===" "||e.key==="Enter")&&(t(e),e.preventDefault())},Zq=(e,...t)=>{const n={};let s;for(s in e)t.includes(s)||(n[s]=e[s]);return n},JS=(e,t)=>{const n={};return t.forEach(s=>{s in e&&(n[s]=e[s])}),n};function tK(e,t,n){return Math.min(Math.max(e,t),n)}var ph={},eK={get exports(){return ph},set exports(e){ph=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){if(s===null||s===!0||s===!1)return NaN;var i=Number(s);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}e.exports=t.default})(eK,ph);const nK=gS(ph);var gh={},sK={get exports(){return gh},set exports(e){gh=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){var i=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return i.setUTCFullYear(s.getFullYear()),s.getTime()-i.getTime()}e.exports=t.default})(sK,gh);const Q0=gS(gh);function iK(e,t){var n=lK(t);return n.formatToParts?oK(n,e):aK(n,e)}var rK={year:0,month:1,day:2,hour:3,minute:4,second:5};function oK(e,t){try{for(var n=e.formatToParts(t),s=[],i=0;i<n.length;i++){var r=rK[n[i].type];r>=0&&(s[r]=parseInt(n[i].value,10))}return s}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function aK(e,t){var n=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[s[3],s[1],s[2],s[4],s[5],s[6]]}var hf={};function lK(e){if(!hf[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";hf[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return hf[e]}function ZS(e,t,n,s,i,r,o){var a=new Date(0);return a.setUTCFullYear(e,t,n),a.setUTCHours(s,i,r,o),a}var J0=36e5,cK=6e4,df={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function uK(e,t,n){var s,i;if(!e||(s=df.timezoneZ.exec(e),s))return 0;var r;if(s=df.timezoneHH.exec(e),s)return r=parseInt(s[1],10),Z0(r)?-(r*J0):NaN;if(s=df.timezoneHHMM.exec(e),s){r=parseInt(s[1],10);var o=parseInt(s[2],10);return Z0(r,o)?(i=Math.abs(r)*J0+o*cK,r>0?-i:i):NaN}if(fK(e)){t=new Date(t||Date.now());var a=n?t:hK(t),l=Ep(a,e),c=n?l:dK(t,l,e);return-c}return NaN}function hK(e){return ZS(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Ep(e,t){var n=iK(e,t),s=ZS(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=e.getTime(),r=i%1e3;return i-=r>=0?r:1e3+r,s-i}function dK(e,t,n){var s=e.getTime(),i=s-t,r=Ep(new Date(i),n);if(t===r)return t;i-=r-t;var o=Ep(new Date(i),n);return r===o?r:Math.max(r,o)}function Z0(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var tw={};function fK(e){if(tw[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),tw[e]=!0,!0}catch{return!1}}var pK=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const gK=pK;var ff=36e5,ew=6e4,mK=2,fn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:gK};function vK(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},s=n.additionalDigits==null?mK:nK(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var i=_K(e),r=yK(i.date,s),o=r.year,a=r.restDateString,l=bK(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,d;if(i.time&&(u=wK(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(d=uK(i.timeZone||n.timeZone,new Date(c+u)),isNaN(d))return new Date(NaN)}else d=Q0(new Date(c+u)),d=Q0(new Date(c+u+d));return new Date(c+u+d)}else return new Date(NaN)}function _K(e){var t={},n=fn.dateTimePattern.exec(e),s;if(n?(t.date=n[1],s=n[3]):(n=fn.datePattern.exec(e),n?(t.date=n[1],s=n[2]):(t.date=null,s=e)),s){var i=fn.timeZone.exec(s);i?(t.time=s.replace(i[1],""),t.timeZone=i[1].trim()):t.time=s}return t}function yK(e,t){var n=fn.YYY[t],s=fn.YYYYY[t],i;if(i=fn.YYYY.exec(e)||s.exec(e),i){var r=i[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(i=fn.YY.exec(e)||n.exec(e),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function bK(e,t){if(t===null)return null;var n,s,i,r;if(e.length===0)return s=new Date(0),s.setUTCFullYear(t),s;if(n=fn.MM.exec(e),n)return s=new Date(0),i=parseInt(n[1],10)-1,sw(t,i)?(s.setUTCFullYear(t,i),s):new Date(NaN);if(n=fn.DDD.exec(e),n){s=new Date(0);var o=parseInt(n[1],10);return IK(t,o)?(s.setUTCFullYear(t,0,o),s):new Date(NaN)}if(n=fn.MMDD.exec(e),n){s=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return sw(t,i,a)?(s.setUTCFullYear(t,i,a),s):new Date(NaN)}if(n=fn.Www.exec(e),n)return r=parseInt(n[1],10)-1,iw(t,r)?nw(t,r):new Date(NaN);if(n=fn.WwwD.exec(e),n){r=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return iw(t,r,l)?nw(t,r,l):new Date(NaN)}return null}function wK(e){var t,n,s;if(t=fn.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),pf(n)?n%24*ff:NaN;if(t=fn.HHMM.exec(e),t)return n=parseInt(t[1],10),s=parseFloat(t[2].replace(",",".")),pf(n,s)?n%24*ff+s*ew:NaN;if(t=fn.HHMMSS.exec(e),t){n=parseInt(t[1],10),s=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return pf(n,s,i)?n%24*ff+s*ew+i*1e3:NaN}return null}function nw(e,t,n){t=t||0,n=n||0;var s=new Date(0);s.setUTCFullYear(e,0,4);var i=s.getUTCDay()||7,r=t*7+n+1-i;return s.setUTCDate(s.getUTCDate()+r),s}var TK=[31,28,31,30,31,30,31,31,30,31,30,31],EK=[31,29,31,30,31,30,31,31,30,31,30,31];function tA(e){return e%400===0||e%4===0&&e%100!==0}function sw(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var s=tA(e);if(s&&n>EK[t]||!s&&n>TK[t])return!1}return!0}function IK(e,t){if(t<1)return!1;var n=tA(e);return!(n&&t>366||!n&&t>365)}function iw(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function pf(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function ln(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Tu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tu=function(n){return typeof n}:Tu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tu(e)}function oi(e){ln(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Tu(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ca(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var SK={};function Im(){return SK}function Br(e,t){var n,s,i,r,o,a,l,c;ln(1,arguments);var u=Im(),d=ca((n=(s=(i=(r=t==null?void 0:t.weekStartsOn)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=oi(e),p=f.getDay(),m=(p<d?7:0)+p-d;return f.setDate(f.getDate()-m),f.setHours(0,0,0,0),f}function rw(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var AK=6048e5;function xK(e,t,n){ln(2,arguments);var s=Br(e,n),i=Br(t,n),r=s.getTime()-rw(s),o=i.getTime()-rw(i);return Math.round((r-o)/AK)}function CK(e){ln(1,arguments);var t=oi(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function PK(e){ln(1,arguments);var t=oi(e);return t.setDate(1),t.setHours(0,0,0,0),t}function kK(e,t){return ln(1,arguments),xK(CK(e),PK(e),t)+1}function DK(e,t){var n,s,i,r,o,a,l,c;ln(1,arguments);var u=oi(e),d=u.getFullYear(),f=Im(),p=ca((n=(s=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&s!==void 0?s:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(d+1,0,p),m.setHours(0,0,0,0);var _=Br(m,t),y=new Date(0);y.setFullYear(d,0,p),y.setHours(0,0,0,0);var x=Br(y,t);return u.getTime()>=_.getTime()?d+1:u.getTime()>=x.getTime()?d:d-1}function RK(e,t){var n,s,i,r,o,a,l,c;ln(1,arguments);var u=Im(),d=ca((n=(s=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=DK(e,t),p=new Date(0);p.setFullYear(f,0,d),p.setHours(0,0,0,0);var m=Br(p,t);return m}var MK=6048e5;function OK(e,t){ln(1,arguments);var n=oi(e),s=Br(n,t).getTime()-RK(n,t).getTime();return Math.round(s/MK)+1}function mh(e){return ln(1,arguments),Br(e,{weekStartsOn:1})}function LK(e){ln(1,arguments);var t=oi(e),n=t.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var i=mh(s),r=new Date(0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);var o=mh(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function NK(e){ln(1,arguments);var t=LK(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var s=mh(n);return s}var VK=6048e5;function FK(e){ln(1,arguments);var t=oi(e),n=mh(t).getTime()-NK(t).getTime();return Math.round(n/VK)+1}function dn(e,t){ln(2,arguments);var n=oi(e),s=ca(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function vh(e,t){ln(2,arguments);var n=oi(e),s=ca(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var i=n.getDate(),r=new Date(n.getTime());r.setMonth(n.getMonth()+s+1,0);var o=r.getDate();return i>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function ow(e,t){ln(2,arguments);var n=ca(t);return vh(e,n*12)}const $K={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function BK({monthComps:e,prevMonthComps:t,nextMonthComps:n},s){const i=[],{firstDayOfWeek:r,firstWeekday:o,isoWeeknumbers:a,weeknumbers:l,numDays:c,numWeeks:u}=e,d=o+(o<r?Xe:0)-r;let f=!0,p=!1,m=!1,_=0;const y=new Intl.DateTimeFormat(s.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let x=t.numDays-d+1,M=t.numDays-x+1,E=Math.floor((x-1)/Xe+1),b=1,R=t.numWeeks,L=1,I=t.month,w=t.year;const T=new Date,k=T.getDate(),S=T.getMonth()+1,P=T.getFullYear();for(let C=1;C<=MG;C++){for(let ot=1,K=r;ot<=Xe;ot++,K+=K===Xe?1-Xe:1){f&&K===o&&(x=1,M=e.numDays,E=Math.floor((x-1)/Xe+1),b=Math.floor((c-x)/Xe+1),R=1,L=u,I=e.month,w=e.year,f=!1,p=!0);const lt=s.getDateFromParams(w,I,x,0,0,0,0),at=s.getDateFromParams(w,I,x,12,0,0,0),gt=s.getDateFromParams(w,I,x,23,59,59,999),Vt=lt,W=`${ne(w,4)}-${ne(I,2)}-${ne(x,2)}`,St=ot,et=Xe-ot,kt=l[C-1],Mt=a[C-1],qt=x===k&&I===S&&w===P,jt=p&&x===1,$=p&&x===c,it=C===1,Z=C===u,ct=ot===1,Ot=ot===Xe,Wt=hA(w,I,x);i.push({locale:s,id:W,position:++_,label:x.toString(),ariaLabel:y.format(new Date(w,I-1,x)),day:x,dayFromEnd:M,weekday:K,weekdayPosition:St,weekdayPositionFromEnd:et,weekdayOrdinal:E,weekdayOrdinalFromEnd:b,week:R,weekFromEnd:L,weekPosition:C,weeknumber:kt,isoWeeknumber:Mt,month:I,year:w,date:Vt,startDate:lt,endDate:gt,noonDate:at,dayIndex:Wt,isToday:qt,isFirstDay:jt,isLastDay:$,isDisabled:!p,isFocusable:!p,isFocused:!1,inMonth:p,inPrevMonth:f,inNextMonth:m,onTop:it,onBottom:Z,onLeft:ct,onRight:Ot,classes:[`id-${W}`,`day-${x}`,`day-from-end-${M}`,`weekday-${K}`,`weekday-position-${St}`,`weekday-ordinal-${E}`,`weekday-ordinal-from-end-${b}`,`week-${R}`,`week-from-end-${L}`,{"is-today":qt,"is-first-day":jt,"is-last-day":$,"in-month":p,"in-prev-month":f,"in-next-month":m,"on-top":it,"on-bottom":Z,"on-left":ct,"on-right":Ot}]}),p&&$?(p=!1,m=!0,x=1,M=c,E=1,b=Math.floor((c-x)/Xe+1),R=1,L=n.numWeeks,I=n.month,w=n.year):(x++,M--,E=Math.floor((x-1)/Xe+1),b=Math.floor((c-x)/Xe+1))}R++,L--}return i}function UK(e,t,n,s){const i=e.reduce((r,o,a)=>{const l=Math.floor(a/7);let c=r[l];return c||(c={id:`week-${l+1}`,title:"",week:o.week,weekPosition:o.weekPosition,weeknumber:o.weeknumber,isoWeeknumber:o.isoWeeknumber,weeknumberDisplay:t?o.weeknumber:n?o.isoWeeknumber:void 0,days:[]},r[l]=c),c.days.push(o),r},Array(e.length/Xe));return i.forEach(r=>{const o=r.days[0],a=r.days[r.days.length-1];o.month===a.month?r.title=`${s.formatDate(o.date,"MMMM YYYY")}`:o.year===a.year?r.title=`${s.formatDate(o.date,"MMM")} - ${s.formatDate(a.date,"MMM YYYY")}`:r.title=`${s.formatDate(o.date,"MMM YYYY")} - ${s.formatDate(a.date,"MMM YYYY")}`}),i}function jK(e,t){return e.days.map(n=>({label:t.formatDate(n.date,t.masks.weekdays),weekday:n.weekday}))}function HK(e,t){return`${t}.${ne(e,2)}`}function zK(e,t,n){return JS(n.getDateParts(n.toDate(e)),$K[t])}function eA({day:e,week:t,month:n,year:s},i,r,o){if(r==="daily"&&e){const a=new Date(s,n-1,e),l=dn(a,i);return{day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()}}else if(r==="weekly"&&t){const l=o.getMonthParts(n,s).firstDayOfMonth,c=dn(l,(t-1+i)*7),u=o.getDateParts(c);return{week:u.week,month:u.month,year:u.year}}else{const a=new Date(s,n-1,1),l=vh(a,i);return{month:l.getMonth()+1,year:l.getFullYear()}}}function hs(e){return e!=null&&e.month!=null&&e.year!=null}function Ip(e,t){return!hs(e)||!hs(t)?!1:(e=e,t=t,e.year!==t.year?e.year<t.year:e.month&&t.month&&e.month!==t.month?e.month<t.month:e.week&&t.week&&e.week!==t.week?e.week<t.week:e.day&&t.day&&e.day!==t.day?e.day<t.day:!1)}function _h(e,t){return!hs(e)||!hs(t)?!1:(e=e,t=t,e.year!==t.year?e.year>t.year:e.month&&t.month&&e.month!==t.month?e.month>t.month:e.week&&t.week&&e.week!==t.week?e.week>t.week:e.day&&t.day&&e.day!==t.day?e.day>t.day:!1)}function WK(e,t,n){return(e||!1)&&!Ip(e,t)&&!_h(e,n)}function YK(e,t){return!e&&t||e&&!t?!1:!e&&!t?!0:(e=e,t=t,e.year===t.year&&e.month===t.month&&e.week===t.week&&e.day===t.day)}function qK(e,t,n,s){if(!hs(e)||!hs(t))return[];const i=[];for(;!_h(e,t);)i.push(e),e=eA(e,1,n,s);return i}function nA(e){const{day:t,week:n,month:s,year:i}=e;let r=`${i}-${ne(s,2)}`;return n&&(r=`${r}-w${n}`),t&&(r=`${r}-${ne(t,2)}`),r}function KK(e,t){const{month:n,year:s,showWeeknumbers:i,showIsoWeeknumbers:r}=e,o=new Date(s,n-1,15),a=t.getMonthParts(n,s),l=t.getPrevMonthParts(n,s),c=t.getNextMonthParts(n,s),u=BK({monthComps:a,prevMonthComps:l,nextMonthComps:c},t),d=UK(u,i,r,t),f=jK(d[0],t);return{id:nA(e),month:n,year:s,monthTitle:t.formatDate(o,t.masks.title),shortMonthLabel:t.formatDate(o,"MMM"),monthLabel:t.formatDate(o,"MMMM"),shortYearLabel:s.toString().substring(2),yearLabel:s.toString(),monthComps:a,prevMonthComps:l,nextMonthComps:c,days:u,weeks:d,weekdays:f}}function GK(e,t){const{day:n,week:s,view:i,trimWeeks:r}=e,o={...t,...e,title:"",viewDays:[],viewWeeks:[]};switch(i){case"daily":{let a=o.days.find(c=>c.inMonth);n?a=o.days.find(c=>c.day===n&&c.inMonth)||a:s&&(a=o.days.find(c=>c.week===s&&c.inMonth));const l=o.weeks[a.week-1];o.viewWeeks=[l],o.viewDays=[a],o.week=a.week,o.weekTitle=l.title,o.day=a.day,o.dayTitle=a.ariaLabel,o.title=o.dayTitle;break}case"weekly":{o.week=s||1;const a=o.weeks[o.week-1];o.viewWeeks=[a],o.viewDays=a.days,o.weekTitle=a.title,o.title=o.weekTitle;break}default:{o.title=o.monthTitle,o.viewWeeks=o.weeks.slice(0,r?o.monthComps.numWeeks:void 0),o.viewDays=o.days;break}}return o}class aw{constructor(t,n,s){bt(this,"keys",[]),bt(this,"store",{}),this.size=t,this.createKey=n,this.createItem=s}get(...t){const n=this.createKey(...t);return this.store[n]}getOrSet(...t){const n=this.createKey(...t);if(this.store[n])return this.store[n];const s=this.createItem(...t);if(this.keys.length>=this.size){const i=this.keys.shift();i!=null&&delete this.store[i]}return this.keys.push(n),this.store[n]=s,s}}class ko{constructor(t,n=new yh){bt(this,"order"),bt(this,"locale"),bt(this,"start",null),bt(this,"end",null),bt(this,"repeat",null);var s;this.locale=n;const{start:i,end:r,span:o,order:a,repeat:l}=t;Tp(i)&&(this.start=n.getDateParts(i)),Tp(r)?this.end=n.getDateParts(r):this.start!=null&&o&&(this.end=n.getDateParts(dn(this.start.date,o-1))),this.order=a??0,l&&(this.repeat=new bh({from:(s=this.start)==null?void 0:s.date,...l},{locale:this.locale}))}static fromMany(t,n){return(bs(t)?t:[t]).filter(s=>s).map(s=>ko.from(s,n))}static from(t,n){if(t instanceof ko)return t;const s={start:null,end:null};return t!=null&&(bs(t)?(s.start=t[0]??null,s.end=t[1]??null):$r(t)?Object.assign(s,t):(s.start=t,s.end=t)),s.start!=null&&(s.start=new Date(s.start)),s.end!=null&&(s.end=new Date(s.end)),new ko(s,n)}get opts(){const{order:t,locale:n}=this;return{order:t,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:t,end:n}=this;return t&&n&&t.year===n.year&&t.month===n.month&&t.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(t){var n,s;return((n=this.start)==null?void 0:n.dayIndex)===t.dayIndex||!!((s=this.repeat)!=null&&s.passes(t))}intersectsDay(t){return this.intersectsDayRange(t,t)}intersectsRange(t){var n,s;return this.intersectsDayRange(((n=t.start)==null?void 0:n.dayIndex)??-1/0,((s=t.end)==null?void 0:s.dayIndex)??1/0)}intersectsDayRange(t,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<t)}}class XK{constructor(){bt(this,"records",{})}render(t,n,s){var i,r,o,a;let l=null;const c=s[0].dayIndex,u=s[s.length-1].dayIndex;return n.hasRepeat?s.forEach(d=>{var f,p;if(n.startsOnDay(d)){const m=n.daySpan<1/0?n.daySpan:1;l={startDay:d.dayIndex,startTime:((f=n.start)==null?void 0:f.time)??0,endDay:d.dayIndex+m-1,endTime:((p=n.end)==null?void 0:p.time)??Eu},this.getRangeRecords(t).push(l)}}):n.intersectsDayRange(c,u)&&(l={startDay:((i=n.start)==null?void 0:i.dayIndex)??-1/0,startTime:((r=n.start)==null?void 0:r.time)??-1/0,endDay:((o=n.end)==null?void 0:o.dayIndex)??1/0,endTime:((a=n.end)==null?void 0:a.time)??1/0},this.getRangeRecords(t).push(l)),l}getRangeRecords(t){let n=this.records[t.key];return n||(n={ranges:[],data:t},this.records[t.key]=n),n.ranges}getCell(t,n){return this.getCells(n).find(r=>r.data.key===t)}cellExists(t,n){const s=this.records[t];return s==null?!1:s.ranges.some(i=>i.startDay<=n&&i.endDay>=n)}getCells(t){const n=Object.values(this.records),s=[],{dayIndex:i}=t;return n.forEach(({data:r,ranges:o})=>{o.filter(a=>a.startDay<=i&&a.endDay>=i).forEach(a=>{const l=i===a.startDay,c=i===a.endDay,u=l?a.startTime:0,d=new Date(t.startDate.getTime()+u),f=c?a.endTime:Eu,p=new Date(t.endDate.getTime()+f),m=u===0&&f===Eu,_=r.order||0;s.push({...a,data:r,onStart:l,onEnd:c,startTime:u,startDate:d,endTime:f,endDate:p,allDay:m,order:_})})}),s.sort((r,o)=>r.order-o.order),s}}const ei={ar:{dow:7,L:"D/‏M/‏YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYY年M月D日"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};ei.en=ei["en-US"];ei.es=ei["es-ES"];ei.no=ei.nb;ei.zh=ei["zh-CN"];const QK=Object.entries(ei).reduce((e,[t,{dow:n,L:s}])=>(e[t]={id:t,firstDayOfWeek:n,masks:{L:s}},e),{}),JK="MMMM YYYY",ZK="W",tG="MMM",eG="h A",nG=["L","YYYY-MM-DD","YYYY/MM/DD"],sG=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],iG=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],rG=["h:mm A"],oG=["HH:mm"],aG="WWW, MMM D, YYYY",lG=["L","YYYY-MM-DD","YYYY/MM/DD"],cG="iso",uG="YYYY-MM-DDTHH:mm:ss.SSSZ",hG={title:JK,weekdays:ZK,navMonths:tG,hours:eG,input:nG,inputDateTime:sG,inputDateTime24hr:iG,inputTime:rG,inputTime24hr:oG,dayPopover:aG,data:lG,model:cG,iso:uG},dG=300,fG=60,pG=80,gG={maxSwipeTime:dG,minHorizontalSwipeDistance:fG,maxVerticalSwipeDistance:pG},mG={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:gG,masks:hG,locales:QK,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},Sp=Ko(mG),vG=G(()=>N7(Sp.locales,e=>(e.masks=dh(e.masks,Sp.masks),e))),Hl=e=>typeof window<"u"&&QS(window.__vcalendar__,e)?Er(window.__vcalendar__,e):Er(Sp,e),_G=12,yG=5;function bG(e,t){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let s;Ws(e)?s=e:QS(e,"id")&&(s=e.id),s=(s||n).toLowerCase();const i=Object.keys(t),r=l=>i.find(c=>c.toLowerCase()===l);s=r(s)||r(s.substring(0,2))||n;const o={...t["en-IE"],...t[s],id:s,monthCacheSize:_G,pageCacheSize:yG};return $r(e)?dh(e,o):o}class yh{constructor(t=void 0,n){bt(this,"id"),bt(this,"daysInWeek"),bt(this,"firstDayOfWeek"),bt(this,"masks"),bt(this,"timezone"),bt(this,"hourLabels"),bt(this,"dayNames"),bt(this,"dayNamesShort"),bt(this,"dayNamesShorter"),bt(this,"dayNamesNarrow"),bt(this,"monthNames"),bt(this,"monthNamesShort"),bt(this,"relativeTimeNames"),bt(this,"amPm",["am","pm"]),bt(this,"monthCache"),bt(this,"pageCache");const{id:s,firstDayOfWeek:i,masks:r,monthCacheSize:o,pageCacheSize:a}=bG(t,vG.value);this.monthCache=new aw(o,zG,WG),this.pageCache=new aw(a,nA,KK),this.id=s,this.daysInWeek=Xe,this.firstDayOfWeek=tK(i,1,Xe),this.masks=r,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=gf("long",this.id),this.dayNamesShort=gf("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(l=>l.substring(0,2)),this.dayNamesNarrow=gf("narrow",this.id),this.monthNames=fw("long",this.id),this.monthNamesShort=fw("short",this.id),this.relativeTimeNames=KG(this.id)}formatDate(t,n){return ZG(t,n,this)}parseDate(t,n){return pw(t,n,this)}toDate(t,n={}){const s=new Date(NaN);let i=s;const{fillDate:r,mask:o,patch:a,rules:l}=n;if(Is(t)?(n.type="number",i=new Date(+t)):Ws(t)?(n.type="string",i=t?pw(t,o||"iso",this):s):Tp(t)?(n.type="date",i=new Date(t.getTime())):BG(t)&&(n.type="object",i=this.getDateFromParts(t)),i&&(a||l)){let c=this.getDateParts(i);if(a&&r!=null){const u=this.getDateParts(this.toDate(r));c=this.getDateParts(this.toDate({...u,...JS(c,RG[a])}))}l&&(c=JG(c,l)),i=this.getDateFromParts(c)}return i||s}toDateOrNull(t,n={}){const s=this.toDate(t,n);return isNaN(s.getTime())?null:s}fromDate(t,{type:n,mask:s}={}){switch(n){case"number":return t?t.getTime():NaN;case"string":return t?this.formatDate(t,s||"iso"):"";case"object":return t?this.getDateParts(t):null;default:return t?new Date(t):null}}range(t){return ko.from(t,this)}ranges(t){return ko.fromMany(t,this)}getDateParts(t){return HG(t,this)}getDateFromParts(t){return fA(t,this.timezone)}getDateFromParams(t,n,s,i,r,o,a){return this.getDateFromParts({year:t,month:n,day:s,hours:i,minutes:r,seconds:o,milliseconds:a})}getPage(t){const n=this.pageCache.getOrSet(t,this);return GK(t,n)}getMonthParts(t,n){const{firstDayOfWeek:s}=this;return this.monthCache.getOrSet(t,n,s)}getThisMonthParts(){const t=new Date;return this.getMonthParts(t.getMonth()+1,t.getFullYear())}getPrevMonthParts(t,n){return t===1?this.getMonthParts(12,n-1):this.getMonthParts(t-1,n)}getNextMonthParts(t,n){return t===12?this.getMonthParts(1,n+1):this.getMonthParts(t+1,n)}getHourLabels(){return qG().map(t=>this.formatDate(t,this.masks.hours))}getDayId(t){return this.formatDate(t,"YYYY-MM-DD")}}var go=(e=>(e.Any="any",e.All="all",e))(go||{}),sA=(e=>(e.Days="days",e.Weeks="weeks",e.Months="months",e.Years="years",e))(sA||{}),iA=(e=>(e.Days="days",e.Weekdays="weekdays",e.Weeks="weeks",e.Months="months",e.Years="years",e))(iA||{}),rA=(e=>(e.OrdinalWeekdays="ordinalWeekdays",e))(rA||{});class wG{constructor(t,n,s){bt(this,"validated",!0),this.type=t,this.interval=n,this.from=s,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(t){if(!this.validated)return!0;const{date:n}=t;switch(this.type){case"days":return Sm(this.from.date,n)%this.interval===0;case"weeks":return UG(this.from.date,n)%this.interval===0;case"months":return jG(this.from.date,n)%this.interval===0;case"years":return dA(this.from.date,n)%this.interval===0;default:return!1}}}class ua{constructor(t,n,s,i){bt(this,"components",[]),this.type=t,this.validator=s,this.getter=i,this.components=this.normalizeComponents(n)}static create(t,n){switch(t){case"days":return new TG(n);case"weekdays":return new EG(n);case"weeks":return new IG(n);case"months":return new SG(n);case"years":return new AG(n)}}normalizeComponents(t){if(this.validator(t))return[t];if(!bs(t))return[];const n=[];return t.forEach(s=>{if(!this.validator(s)){console.error(`Component value ${s} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(s)}),n}passes(t){return this.getter(t).some(i=>this.components.includes(i))}}class TG extends ua{constructor(t){super("days",t,PG,({day:n,dayFromEnd:s})=>[n,-s])}}class EG extends ua{constructor(t){super("weekdays",t,Ap,({weekday:n})=>[n])}}class IG extends ua{constructor(t){super("weeks",t,kG,({week:n,weekFromEnd:s})=>[n,-s])}}class SG extends ua{constructor(t){super("months",t,DG,({month:n})=>[n])}}class AG extends ua{constructor(t){super("years",t,Is,({year:n})=>[n])}}class xG{constructor(t,n){bt(this,"components"),this.type=t,this.components=this.normalizeComponents(n)}normalizeArrayConfig(t){const n=[];return t.forEach((s,i)=>{if(Is(s)){if(i===0)return;if(!lw(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!Ap(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else bs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}normalizeComponents(t){const n=[];return t.forEach((s,i)=>{if(Is(s)){if(i===0)return;if(!lw(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!Ap(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else bs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}passes(t){const{weekday:n,weekdayOrdinal:s,weekdayOrdinalFromEnd:i}=t;return this.components.some(([r,o])=>(r===s||r===-i)&&n===o)}}class CG{constructor(t){bt(this,"type","function"),bt(this,"validated",!0),this.fn=t,Kr(t)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(t){return this.validated?this.fn(t):!0}}class bh{constructor(t,n={},s){bt(this,"validated",!0),bt(this,"config"),bt(this,"type",go.Any),bt(this,"from"),bt(this,"until"),bt(this,"rules",[]),bt(this,"locale",new yh),this.parent=s,n.locale&&(this.locale=n.locale),this.config=t,Kr(t)?(this.type=go.All,this.rules=[new CG(t)]):bs(t)?(this.type=go.Any,this.rules=t.map(i=>new bh(i,n,this))):$r(t)?(this.type=go.All,this.from=t.from?this.locale.getDateParts(t.from):s==null?void 0:s.from,this.until=t.until?this.locale.getDateParts(t.until):s==null?void 0:s.until,this.rules=this.getObjectRules(t)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(t){const n=[];if(t.every&&(Ws(t.every)&&(t.every=[1,`${t.every}s`]),bs(t.every))){const[s=1,i=sA.Days]=t.every;n.push(new wG(i,s,this.from))}return Object.values(iA).forEach(s=>{s in t&&n.push(ua.create(s,t[s]))}),Object.values(rA).forEach(s=>{s in t&&n.push(new xG(s,t[s]))}),t.on!=null&&(bs(t.on)||(t.on=[t.on]),n.push(new bh(t.on,{locale:this.locale},this.parent))),n}passes(t){return this.validated?this.from&&t.dayIndex<=this.from.dayIndex||this.until&&t.dayIndex>=this.until.dayIndex?!1:this.type===go.Any?this.rules.some(n=>n.passes(t)):this.rules.every(n=>n.passes(t)):!0}}function PG(e){return Is(e)?e>=1&&e<=31:!1}function Ap(e){return Is(e)?e>=1&&e<=7:!1}function kG(e){return Is(e)?e>=-6&&e<=-1||e>=1&&e<=6:!1}function DG(e){return Is(e)?e>=1&&e<=12:!1}function lw(e){return!(!Is(e)||e<-5||e>5||e===0)}const RG={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},Xe=7,MG=6,oA=1e3,aA=oA*60,lA=aA*60,Eu=lA*24,OG=[31,28,31,30,31,30,31,31,30,31,30,31],LG=["L","iso"],NG={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},cA=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,VG=/\[([^]*?)\]/gm,cw={D(e){return e.day},DD(e){return ne(e.day,2)},d(e){return e.weekday-1},dd(e){return ne(e.weekday-1,2)},W(e,t){return t.dayNamesNarrow[e.weekday-1]},WW(e,t){return t.dayNamesShorter[e.weekday-1]},WWW(e,t){return t.dayNamesShort[e.weekday-1]},WWWW(e,t){return t.dayNames[e.weekday-1]},M(e){return e.month},MM(e){return ne(e.month,2)},MMM(e,t){return t.monthNamesShort[e.month-1]},MMMM(e,t){return t.monthNames[e.month-1]},YY(e){return String(e.year).substr(2)},YYYY(e){return ne(e.year,4)},h(e){return e.hours%12||12},hh(e){return ne(e.hours%12||12,2)},H(e){return e.hours},HH(e){return ne(e.hours,2)},m(e){return e.minutes},mm(e){return ne(e.minutes,2)},s(e){return e.seconds},ss(e){return ne(e.seconds,2)},S(e){return Math.round(e.milliseconds/100)},SS(e){return ne(Math.round(e.milliseconds/10),2)},SSS(e){return ne(e.milliseconds,3)},a(e,t){return e.hours<12?t.amPm[0]:t.amPm[1]},A(e,t){return e.hours<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${ne(Math.floor(Math.abs(t)/60),2)}`},ZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${ne(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)}`},ZZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${ne(Math.floor(Math.abs(t)/60),2)}:${ne(Math.abs(t)%60,2)}`}},pi=/\d\d?/,FG=/\d{3}/,$G=/\d{4}/,Ra=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,uw=()=>{},hw=e=>(t,n,s)=>{const i=s[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(t.month=i)},ae={D:[pi,(e,t)=>{e.day=t}],Do:[new RegExp(pi.source+Ra.source),(e,t)=>{e.day=parseInt(t,10)}],d:[pi,uw],W:[Ra,uw],M:[pi,(e,t)=>{e.month=t-1}],MMM:[Ra,hw("monthNamesShort")],MMMM:[Ra,hw("monthNames")],YY:[pi,(e,t)=>{const s=+new Date().getFullYear().toString().substr(0,2);e.year=+`${t>68?s-1:s}${t}`}],YYYY:[$G,(e,t)=>{e.year=t}],S:[/\d/,(e,t)=>{e.milliseconds=t*100}],SS:[/\d{2}/,(e,t)=>{e.milliseconds=t*10}],SSS:[FG,(e,t)=>{e.milliseconds=t}],h:[pi,(e,t)=>{e.hours=t}],m:[pi,(e,t)=>{e.minutes=t}],s:[pi,(e,t)=>{e.seconds=t}],a:[Ra,(e,t,n)=>{const s=t.toLowerCase();s===n.amPm[0]?e.isPm=!1:s===n.amPm[1]&&(e.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(e,t)=>{t==="Z"&&(t="+00:00");const n=`${t}`.match(/([+-]|\d\d)/gi);if(n){const s=+n[1]*60+parseInt(n[2],10);e.timezoneOffset=n[0]==="+"?s:-s}}]};ae.DD=ae.D;ae.dd=ae.d;ae.WWWW=ae.WWW=ae.WW=ae.W;ae.MM=ae.M;ae.mm=ae.m;ae.hh=ae.H=ae.HH=ae.h;ae.ss=ae.s;ae.A=ae.a;ae.ZZZZ=ae.ZZZ=ae.ZZ=ae.Z;function uA(e,t){return(Ir(e)&&e||[Ws(e)&&e||"YYYY-MM-DD"]).map(n=>LG.reduce((s,i)=>s.replace(i,t.masks[i]||""),n))}function BG(e){return $r(e)&&"year"in e&&"month"in e&&"day"in e}function dw(e,t=1){const n=e.getDay()+1,s=n>=t?t-n:-(7-(t-n));return dn(e,s)}function hA(e,t,n){const s=Date.UTC(e,t-1,n);return Sm(new Date(0),new Date(s))}function Sm(e,t){return Math.round((t.getTime()-e.getTime())/Eu)}function UG(e,t){return Math.ceil(Sm(dw(e),dw(t))/7)}function dA(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}function jG(e,t){return dA(e,t)*12+(t.getMonth()-e.getMonth())}function fA(e,t=""){const n=new Date,{year:s=n.getFullYear(),month:i=n.getMonth()+1,day:r=n.getDate(),hours:o=0,minutes:a=0,seconds:l=0,milliseconds:c=0}=e;if(t){const u=`${ne(s,4)}-${ne(i,2)}-${ne(r,2)}T${ne(o,2)}:${ne(a,2)}:${ne(l,2)}.${ne(c,3)}`;return vK(u,{timeZone:t})}return new Date(s,i-1,r,o,a,l,c)}function HG(e,t){let n=new Date(e.getTime());t.timezone&&(n=new Date(e.toLocaleString("en-US",{timeZone:t.timezone})),n.setMilliseconds(e.getMilliseconds()));const s=n.getMilliseconds(),i=n.getSeconds(),r=n.getMinutes(),o=n.getHours(),a=s+i*oA+r*aA+o*lA,l=n.getMonth()+1,c=n.getFullYear(),u=t.getMonthParts(l,c),d=n.getDate(),f=u.numDays-d+1,p=n.getDay()+1,m=Math.floor((d-1)/7+1),_=Math.floor((u.numDays-d)/7+1),y=Math.ceil((d+Math.abs(u.firstWeekday-u.firstDayOfWeek))/7),x=u.numWeeks-y+1,M=u.weeknumbers[y],E=hA(c,l,d);return{milliseconds:s,seconds:i,minutes:r,hours:o,time:a,day:d,dayFromEnd:f,weekday:p,weekdayOrdinal:m,weekdayOrdinalFromEnd:_,week:y,weekFromEnd:x,weeknumber:M,month:l,year:c,date:n,dateTime:n.getTime(),dayIndex:E,timezoneOffset:0,isValid:!0}}function zG(e,t,n){return`${t}-${e}-${n}`}function WG(e,t,n){const s=t%4===0&&t%100!==0||t%400===0,i=new Date(t,e-1,1),r=i.getDay()+1,o=e===2&&s?29:OG[e-1],a=n-1,l=kK(i,{weekStartsOn:a}),c=[],u=[];for(let d=0;d<l;d++){const f=dn(i,d*7);c.push(OK(f,{weekStartsOn:a})),u.push(FK(f))}return{firstDayOfWeek:n,firstDayOfMonth:i,inLeapYear:s,firstWeekday:r,numDays:o,numWeeks:l,month:e,year:t,weeknumbers:c,isoWeeknumbers:u}}function YG(){const e=[];for(let i=0;i<Xe;i++)e.push(fA({year:2020,month:1,day:5+i,hours:12}));return e}function gf(e,t=void 0){const n=new Intl.DateTimeFormat(t,{weekday:e});return YG().map(s=>n.format(s))}function qG(){const e=[];for(let t=0;t<=24;t++)e.push(new Date(2e3,0,1,t));return e}function KG(e=void 0){const t=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(e);return t.reduce((s,i)=>{const r=n.formatToParts(100,i);return s[i]=r[1].unit,s},{})}function pA(){const e=[];for(let t=0;t<12;t++)e.push(new Date(2e3,t,15));return e}function fw(e,t=void 0){const n=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return pA().map(s=>n.format(s))}function GG(e,t,n){return Is(t)?t===e:bs(t)?t.includes(e):Kr(t)?t(e,n):!(t.min!=null&&t.min>e||t.max!=null&&t.max<e||t.interval!=null&&e%t.interval!==0)}function XG(e,t,n){const s=[],[i,r,o]=t;for(let a=i;a<=r;a++)(n==null||GG(a,n,e))&&s.push({value:a,label:ne(a,o)});return s}function QG(e,t,n,s){const r=XG(e,t,s).reduce((o,a)=>{if(a.disabled)return o;if(isNaN(o))return a.value;const l=Math.abs(o-n);return Math.abs(a.value-n)<l?a.value:o},NaN);return isNaN(r)?n:r}function JG(e,t){const n={...e};return Object.entries(t).forEach(([s,i])=>{const r=NG[s],o=e[s];n[s]=QG(e,r,o,i)}),n}function pw(e,t,n){return uA(t,n).map(i=>{if(typeof i!="string")throw new Error("Invalid mask");let r=e;if(r.length>1e3)return!1;let o=!0;const a={};if(i.replace(cA,u=>{if(ae[u]){const d=ae[u],f=r.search(d[0]);~f?r.replace(d[0],p=>(d[1](a,p,n),r=r.substr(f+p.length),p)):o=!1}return ae[u]?"":u.slice(1,u.length-1)}),!o)return!1;const l=new Date;a.hours!=null&&(a.isPm===!0&&+a.hours!=12?a.hours=+a.hours+12:a.isPm===!1&&+a.hours==12&&(a.hours=0));let c;return a.timezoneOffset!=null?(a.minutes=+(a.minutes||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hours||0,a.minutes||0,a.seconds||0,a.milliseconds||0))):c=n.getDateFromParts({year:a.year||l.getFullYear(),month:(a.month||0)+1,day:a.day||1,hours:a.hours||0,minutes:a.minutes||0,seconds:a.seconds||0,milliseconds:a.milliseconds||0}),c}).find(i=>i)||new Date(e)}function ZG(e,t,n){if(e==null)return"";let s=uA(t,n)[0];/Z$/.test(s)&&(n.timezone="utc");const i=[];s=s.replace(VG,(o,a)=>(i.push(a),"??"));const r=n.getDateParts(e);return s=s.replace(cA,o=>o in cw?cw[o](r,n):o.slice(1,o.length-1)),s.replace(/\?\?/g,()=>i.shift())}let tX=0;class gA{constructor(t,n,s){bt(this,"key",""),bt(this,"hashcode",""),bt(this,"highlight",null),bt(this,"content",null),bt(this,"dot",null),bt(this,"bar",null),bt(this,"event",null),bt(this,"popover",null),bt(this,"customData",null),bt(this,"ranges"),bt(this,"hasRanges",!1),bt(this,"order",0),bt(this,"pinPage",!1),bt(this,"maxRepeatSpan",0),bt(this,"locale");const{dates:i}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},t);this.key||(this.key=++tX),this.locale=s,n.normalizeGlyphs(this),this.ranges=s.ranges(i??[]),this.hasRanges=!!Ir(this.ranges),this.maxRepeatSpan=this.ranges.filter(r=>r.hasRepeat).map(r=>r.daySpan).reduce((r,o)=>Math.max(r,o),0)}intersectsRange({start:t,end:n}){if(t==null||n==null)return!1;const s=this.ranges.filter(o=>!o.hasRepeat);for(const o of s)if(o.intersectsDayRange(t.dayIndex,n.dayIndex))return!0;const i=this.ranges.filter(o=>o.hasRepeat);if(!i.length)return!1;let r=t;for(this.maxRepeatSpan>1&&(r=this.locale.getDateParts(dn(r.date,-this.maxRepeatSpan)));r.dayIndex<=n.dayIndex;){for(const o of i)if(o.startsOnDay(r))return!0;r=this.locale.getDateParts(dn(r.date,1))}return!1}}function gw(e){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:e}))}function wh(e){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:e}))}function eX(e){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:e}))}function nX(e){const{visibility:t}=e,n=t==="click",s=t==="hover",i=t==="hover-focus",r=t==="focus";e.autoHide=!n;let o=!1,a=!1;const l=m=>{n&&(eX({...e,target:e.target||m.currentTarget}),m.stopPropagation())},c=m=>{o||(o=!0,(s||i)&&gw({...e,target:e.target||m.currentTarget}))},u=()=>{o&&(o=!1,(s||i&&!a)&&wh(e))},d=m=>{a||(a=!0,(r||i)&&gw({...e,target:e.target||m.currentTarget}))},f=m=>{a&&!wu(m.currentTarget,m.relatedTarget)&&(a=!1,(r||i&&!o)&&wh(e))},p={};switch(e.visibility){case"click":p.click=l;break;case"hover":p.mousemove=c,p.mouseleave=u;break;case"focus":p.focusin=d,p.focusout=f;break;case"hover-focus":p.mousemove=c,p.mouseleave=u,p.focusin=d,p.focusout=f;break}return p}const mw=e=>{const t=fh(e);if(t==null)return;const n=t.popoverHandlers;!n||!n.length||(n.forEach(s=>s()),delete t.popoverHandlers)},vw=(e,t)=>{const n=fh(e);if(n==null)return;const s=[],i=nX(t);Object.entries(i).forEach(([r,o])=>{s.push(Si(n,r,o))}),n.popoverHandlers=s},mA={mounted(e,t){const{value:n}=t;n&&vw(e,n)},updated(e,t){const{oldValue:n,value:s}=t,i=n==null?void 0:n.visibility,r=s==null?void 0:s.visibility;i!==r&&(i&&(mw(e),r||wh(n)),r&&vw(e,s))},unmounted(e){mw(e)}},sX=(e,t,{maxSwipeTime:n,minHorizontalSwipeDistance:s,maxVerticalSwipeDistance:i})=>{if(!e||!e.addEventListener||!Kr(t))return null;let r=0,o=0,a=null,l=!1;function c(d){const f=d.changedTouches[0];r=f.screenX,o=f.screenY,a=new Date().getTime(),l=!0}function u(d){if(!l||!a)return;l=!1;const f=d.changedTouches[0],p=f.screenX-r,m=f.screenY-o;if(new Date().getTime()-a<n&&Math.abs(p)>=s&&Math.abs(m)<=i){const y={toLeft:!1,toRight:!1};p<0?y.toLeft=!0:y.toRight=!0,t(y)}}return Si(e,"touchstart",c,{passive:!0}),Si(e,"touchend",u,{passive:!0}),()=>{Ii(e,"touchstart",c),Ii(e,"touchend",u)}},Iu={},iX=(e,t=10)=>{Iu[e]=Date.now()+t},rX=(e,t)=>{if(e in Iu){const n=Iu[e];if(Date.now()<n)return;delete Iu[e]}t()};function vA(){return typeof window<"u"}function oX(e){return vA()&&e in window}function aX(e){const t=Lt(!1),n=G(()=>t.value?"dark":"light");let s,i;function r(p){t.value=p.matches}function o(){oX("matchMedia")&&(s=window.matchMedia("(prefers-color-scheme: dark)"),s.addEventListener("change",r),t.value=s.matches)}function a(){const{selector:p=":root",darkClass:m="dark"}=e.value,_=document.querySelector(p);t.value=_.classList.contains(m)}function l(p){const{selector:m=":root",darkClass:_="dark"}=p;if(vA()&&m&&_){const y=document.querySelector(m);y&&(i=new MutationObserver(a),i.observe(y,{attributes:!0,attributeFilter:["class"]}),t.value=y.classList.contains(_))}}function c(){d();const p=typeof e.value;p==="string"&&e.value.toLowerCase()==="system"?o():p==="object"?l(e.value):t.value=!!e.value}const u=en(()=>e.value,()=>c(),{immediate:!0});function d(){s&&(s.removeEventListener("change",r),s=void 0),i&&(i.disconnect(),i=void 0)}function f(){d(),u()}return Go(()=>f()),{isDark:t,displayMode:n,cleanup:f}}const lX=["base","start","end","startEnd"],cX=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],uX={base:{},start:{},end:{}};function Am(e,t,n=uX){let s=e,i={};t===!0||Ws(t)?(s=Ws(t)?t:s,i={...n}):$r(t)&&(X0(t,lX)?i={...t}:i={base:{...t},start:{...t},end:{...t}});const r=dh(i,{start:i.startEnd,end:i.startEnd},n);return Object.entries(r).forEach(([o,a])=>{let l=s;a===!0||Ws(a)?(l=Ws(a)?a:l,r[o]={color:l}):$r(a)&&(X0(a,cX)?r[o]={...a}:r[o]={}),dh(r[o],{color:l})}),r}class hX{constructor(){bt(this,"type","highlight")}normalizeConfig(t,n){return Am(t,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(t){t.highlights=[],t.content||(t.content=[])}render({data:t,onStart:n,onEnd:s},i){const{key:r,highlight:o}=t;if(!o)return;const{highlights:a}=i,{base:l,start:c,end:u}=o;n&&s?a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]}):n?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]})):s?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...u,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${u.color}`,class:[`vc-highlight vc-highlight-bg-${u.fillMode}`,u.class],contentClass:[`vc-attr vc-highlight-content-${u.fillMode} vc-${u.color}`,u.contentClass]})):a.push({...l,key:`${r}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${l.fillMode}`,l.class],contentClass:[`vc-attr vc-highlight-content-${l.fillMode} vc-${l.color}`,l.contentClass]})}}class xm{constructor(t,n){bt(this,"type",""),bt(this,"collectionType",""),this.type=t,this.collectionType=n}normalizeConfig(t,n){return Am(t,n)}prepareRender(t){t[this.collectionType]=[]}render({data:t,onStart:n,onEnd:s},i){const{key:r}=t,o=t[this.type];if(!r||!o)return;const a=i[this.collectionType],{base:l,start:c,end:u}=o;n?a.push({...c,key:r,class:[`vc-${this.type} vc-${this.type}-start vc-${c.color} vc-attr`,c.class]}):s?a.push({...u,key:r,class:[`vc-${this.type} vc-${this.type}-end vc-${u.color} vc-attr`,u.class]}):a.push({...l,key:r,class:[`vc-${this.type} vc-${this.type}-base vc-${l.color} vc-attr`,l.class]})}}class dX extends xm{constructor(){super("content","content")}normalizeConfig(t,n){return Am("base",n)}}class fX extends xm{constructor(){super("dot","dots")}}class pX extends xm{constructor(){super("bar","bars")}}class gX{constructor(t){bt(this,"color"),bt(this,"renderers",[new dX,new hX,new fX,new pX]),this.color=t}normalizeGlyphs(t){this.renderers.forEach(n=>{const s=n.type;t[s]!=null&&(t[s]=n.normalizeConfig(this.color,t[s]))})}prepareRender(t={}){return this.renderers.forEach(n=>{n.prepareRender(t)}),t}render(t,n){this.renderers.forEach(s=>{s.render(t,n)})}}const _A=Symbol("__vc_base_context__"),mX={color:{type:String,default:()=>Hl("color")},isDark:{type:[Boolean,String,Object],default:()=>Hl("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function vX(e){const t=G(()=>e.color??""),n=G(()=>e.isDark??!1),{displayMode:s}=aX(n),i=G(()=>new gX(t.value)),r=G(()=>{if(e.locale instanceof yh)return e.locale;const f=$r(e.locale)?e.locale:{id:e.locale,firstDayOfWeek:e.firstDayOfWeek,masks:e.masks};return new yh(f,e.timezone)}),o=G(()=>r.value.masks),a=G(()=>e.minDate),l=G(()=>e.maxDate),c=G(()=>{const f=e.disabledDates?[...e.disabledDates]:[];return a.value!=null&&f.push({start:null,end:dn(r.value.toDate(a.value),-1)}),l.value!=null&&f.push({start:dn(r.value.toDate(l.value),1),end:null}),r.value.ranges(f)}),u=G(()=>new gA({key:"disabled",dates:c.value,order:100},i.value,r.value)),d={color:t,isDark:n,displayMode:s,theme:i,locale:r,masks:o,minDate:a,maxDate:l,disabledDates:c,disabledAttribute:u};return Di(_A,d),d}function _X(e){return bn(_A,()=>vX(e),!0)}function yA(e){return`__vc_slot_${e}__`}function yX(e,t={}){Object.keys(e).forEach(n=>{Di(yA(t[n]??n),e[n])})}function bA(e){return bn(yA(e),null)}const bX={...mX,view:{type:String,default:"monthly",validator(e){return["daily","weekly","monthly"].includes(e)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>Hl("titlePosition")},navVisibility:{type:String,default:()=>Hl("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},wX=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],wA=Symbol("__vc_calendar_context__");function TX(e,{slots:t,emit:n}){const s=Lt(null),i=Lt(null),r=Lt(new Date().getDate()),o=Lt(!1),a=Lt(Symbol()),l=Lt(Symbol()),c=Lt(e.view),u=Lt([]),d=Lt("");let f=null,p=null;yX(t);const{theme:m,color:_,displayMode:y,locale:x,masks:M,minDate:E,maxDate:b,disabledAttribute:R,disabledDates:L}=_X(e),I=G(()=>e.rows*e.columns),w=G(()=>e.step||I.value),T=G(()=>XS(u.value)??null),k=G(()=>vo(u.value)??null),S=G(()=>e.minPage||(E.value?et(E.value):null)),P=G(()=>e.maxPage||(b.value?et(b.value):null)),C=G(()=>e.navVisibility),ot=G(()=>!!e.showWeeknumbers),K=G(()=>!!e.showIsoWeeknumbers),lt=G(()=>c.value==="monthly"),at=G(()=>c.value==="weekly"),gt=G(()=>c.value==="daily"),Vt=()=>{o.value=!0,n("transition-start")},W=()=>{o.value=!1,n("transition-end"),f&&(f.resolve(!0),f=null)},St=(H,tt,xt=c.value)=>eA(H,tt,xt,x.value),et=H=>zK(H,c.value,x.value),kt=H=>{!R.value||!Z.value||(H.isDisabled=Z.value.cellExists(R.value.key,H.dayIndex))},Mt=H=>{H.isFocusable=H.inMonth&&H.day===r.value},qt=(H,tt)=>{for(const xt of H)for(const Gt of xt.days)if(tt(Gt)===!1)return},jt=G(()=>u.value.reduce((H,tt)=>(H.push(...tt.viewDays),H),[])),$=G(()=>{const H=[];return(e.attributes||[]).forEach((tt,xt)=>{!tt||!tt.dates||H.push(new gA({...tt,order:tt.order||0},m.value,x.value))}),R.value&&H.push(R.value),H}),it=G(()=>Ir($.value)),Z=G(()=>{const H=new XK;return $.value.forEach(tt=>{tt.ranges.forEach(xt=>{H.render(tt,xt,jt.value)})}),H}),ct=G(()=>jt.value.reduce((H,tt)=>(H[tt.dayIndex]={day:tt,cells:[]},H[tt.dayIndex].cells.push(...Z.value.getCells(tt)),H),{})),Ot=(H,tt)=>{const xt=e.showWeeknumbers||e.showIsoWeeknumbers;return xt==null?"":_7(xt)?xt?"left":"":xt.startsWith("right")?tt>1?"right":xt:H>1?"left":xt},Wt=()=>{var H,tt;if(!it.value)return null;const xt=$.value.find(gn=>gn.pinPage)||$.value[0];if(!xt||!xt.hasRanges)return null;const[Gt]=xt.ranges,Se=((H=Gt.start)==null?void 0:H.date)||((tt=Gt.end)==null?void 0:tt.date);return Se?et(Se):null},D=()=>{if(hs(T.value))return T.value;const H=Wt();return hs(H)?H:et(new Date)},O=(H,tt={})=>{const{view:xt=c.value,position:Gt=1,force:Se}=tt,gn=Gt>0?1-Gt:-(I.value+Gt);let kn=St(H,gn,xt),Cs=St(kn,I.value-1,xt);return Se||(Ip(kn,S.value)?kn=S.value:_h(Cs,P.value)&&(kn=St(P.value,1-I.value)),Cs=St(kn,I.value-1)),{fromPage:kn,toPage:Cs}},V=(H,tt,xt="")=>{if(xt==="none"||xt==="fade")return xt;if((H==null?void 0:H.view)!==(tt==null?void 0:tt.view))return"fade";const Gt=_h(tt,H),Se=Ip(tt,H);return!Gt&&!Se?"fade":xt==="slide-v"?Se?"slide-down":"slide-up":Se?"slide-right":"slide-left"},j=(H={})=>new Promise((tt,xt)=>{const{position:Gt=1,force:Se=!1,transition:gn}=H,kn=hs(H.page)?H.page:D(),{fromPage:Cs}=O(kn,{position:Gt,force:Se}),Yn=[];for(let nr=0;nr<I.value;nr++){const Jr=St(Cs,nr),Zr=nr+1,ai=Math.ceil(Zr/e.columns),hc=e.rows-ai+1,De=Zr%e.columns||e.columns,ha=e.columns-De+1,sr=Ot(De,ha);Yn.push(x.value.getPage({...Jr,view:c.value,titlePosition:e.titlePosition,trimWeeks:e.trimWeeks,position:Zr,row:ai,rowFromEnd:hc,column:De,columnFromEnd:ha,showWeeknumbers:ot.value,showIsoWeeknumbers:K.value,weeknumberPosition:sr}))}d.value=V(u.value[0],Yn[0],gn),u.value=Yn,d.value&&d.value!=="none"?f={resolve:tt,reject:xt}:tt(!0)}),B=H=>{const tt=T.value??et(new Date);return St(tt,H)},z=(H,tt={})=>{const xt=hs(H)?H:et(H);return Object.assign(tt,O(xt,{...tt,force:!0})),qK(tt.fromPage,tt.toPage,c.value,x.value).map(Se=>WK(Se,S.value,P.value)).some(Se=>Se)},st=(H,tt={})=>z(B(H),tt),Q=G(()=>st(-w.value)),J=G(()=>st(w.value)),Y=async(H,tt={})=>!tt.force&&!z(H,tt)?!1:(tt.fromPage&&!YK(tt.fromPage,T.value)&&(wh({id:a.value,hideDelay:0}),tt.view&&(iX("view",10),c.value=tt.view),await j({...tt,page:tt.fromPage,position:1,force:!0}),n("did-move",u.value)),!0),pt=(H,tt={})=>Y(B(H),tt),nt=()=>pt(-w.value),dt=()=>pt(w.value),yt=H=>{const tt=lt.value?".in-month":"",xt=`.id-${x.value.getDayId(H)}${tt}`,Gt=`${xt}.vc-focusable, ${xt} .vc-focusable`,Se=s.value;if(Se){const gn=Se.querySelector(Gt);if(gn)return gn.focus(),!0}return!1},mt=async(H,tt={})=>yt(H)?!0:(await Y(H,tt),yt(H)),At=(H,tt)=>{r.value=H.day,n("dayclick",H,tt)},$t=(H,tt)=>{n("daymouseenter",H,tt)},ke=(H,tt)=>{n("daymouseleave",H,tt)},Te=(H,tt)=>{r.value=H.day,i.value=H,H.isFocused=!0,n("dayfocusin",H,tt)},cn=(H,tt)=>{i.value=null,H.isFocused=!1,n("dayfocusout",H,tt)},ye=(H,tt)=>{n("daykeydown",H,tt);const xt=H.noonDate;let Gt=null;switch(tt.key){case"ArrowLeft":{Gt=dn(xt,-1);break}case"ArrowRight":{Gt=dn(xt,1);break}case"ArrowUp":{Gt=dn(xt,-7);break}case"ArrowDown":{Gt=dn(xt,7);break}case"Home":{Gt=dn(xt,-H.weekdayPosition+1);break}case"End":{Gt=dn(xt,H.weekdayPositionFromEnd);break}case"PageUp":{tt.altKey?Gt=ow(xt,-1):Gt=vh(xt,-1);break}case"PageDown":{tt.altKey?Gt=ow(xt,1):Gt=vh(xt,1);break}}Gt&&(tt.preventDefault(),mt(Gt).catch())},is=H=>{const tt=i.value;tt!=null&&ye(tt,H)},er=(H,tt)=>{n("weeknumberclick",H,tt)};j({page:e.initialPage,position:e.initialPagePosition}),Ss(()=>{!e.disablePageSwipe&&s.value&&(p=sX(s.value,({toLeft:H=!1,toRight:tt=!1})=>{H?dt():tt&&nt()},Hl("touch")))}),Go(()=>{u.value=[],p&&p()}),en(()=>x.value,()=>{j()}),en(()=>I.value,()=>j()),en(()=>e.view,()=>c.value=e.view),en(()=>c.value,()=>{rX("view",()=>{j()}),n("update:view",c.value)}),en(()=>r.value,()=>{qt(u.value,H=>Mt(H))}),E1(()=>{n("update:pages",u.value),qt(u.value,H=>{kt(H),Mt(H)})});const Ie={emit:n,containerRef:s,focusedDay:i,inTransition:o,navPopoverId:a,dayPopoverId:l,view:c,pages:u,transitionName:d,theme:m,color:_,displayMode:y,locale:x,masks:M,attributes:$,disabledAttribute:R,disabledDates:L,attributeContext:Z,days:jt,dayCells:ct,count:I,step:w,firstPage:T,lastPage:k,canMovePrev:Q,canMoveNext:J,minPage:S,maxPage:P,isMonthly:lt,isWeekly:at,isDaily:gt,navVisibility:C,showWeeknumbers:ot,showIsoWeeknumbers:K,getDateAddress:et,canMove:z,canMoveBy:st,move:Y,moveBy:pt,movePrev:nt,moveNext:dt,onTransitionBeforeEnter:Vt,onTransitionAfterEnter:W,tryFocusDate:yt,focusDate:mt,onKeydown:is,onDayKeydown:ye,onDayClick:At,onDayMouseenter:$t,onDayMouseleave:ke,onDayFocusin:Te,onDayFocusout:cn,onWeeknumberClick:er};return Di(wA,Ie),Ie}function Xr(){const e=bn(wA);if(e)return e;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const EX=an({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(e,{emit:t}){let n;const s=Lt();let i=null,r=null;const o=Ko({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function a(W){W&&(o.direction=W.split("-")[0])}function l({placement:W,options:St}){a(W||(St==null?void 0:St.placement))}const c=G(()=>({placement:o.placement,strategy:o.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:l},...o.modifiers||[]],onFirstUpdate:l})),u=G(()=>{const W=o.direction==="left"||o.direction==="right";let St="";if(o.placement){const et=o.placement.split("-");et.length>1&&(St=et[1])}return["start","top","left"].includes(St)?W?"top":"left":["end","bottom","right"].includes(St)?W?"bottom":"right":W?"middle":"center"});function d(){r&&(r.destroy(),r=null)}function f(){Pr(()=>{const W=fh(o.target);!W||!s.value||(r&&r.state.elements.reference!==W&&d(),r?r.update():r=a6(W,s.value,c.value))})}function p(W){Object.assign(o,Zq(W,"force"))}function m(W,St){clearTimeout(n),W>0?n=setTimeout(St,W):St()}function _(W){return!W||!r?!1:fh(W)===r.state.elements.reference}async function y(W={}){o.force||(W.force&&(o.force=!0),m(W.showDelay??e.showDelay,()=>{o.isVisible&&(o.force=!1),p({...W,isVisible:!0}),f()}))}function x(W={}){r&&(W.target&&!_(W.target)||o.force||(W.force&&(o.force=!0),m(W.hideDelay??e.hideDelay,()=>{o.isVisible||(o.force=!1),o.isVisible=!1})))}function M(W={}){W.target!=null&&(o.isVisible&&_(W.target)?x(W):y(W))}function E(W){if(!r)return;const St=r.state.elements.reference;if(!s.value||!St)return;const et=W.target;wu(s.value,et)||wu(St,et)||x({force:!0})}function b(W){(W.key==="Esc"||W.key==="Escape")&&x()}function R({detail:W}){!W.id||W.id!==e.id||y(W)}function L({detail:W}){!W.id||W.id!==e.id||x(W)}function I({detail:W}){!W.id||W.id!==e.id||M(W)}function w(){Si(document,"keydown",b),Si(document,"click",E),Si(document,"show-popover",R),Si(document,"hide-popover",L),Si(document,"toggle-popover",I)}function T(){Ii(document,"keydown",b),Ii(document,"click",E),Ii(document,"show-popover",R),Ii(document,"hide-popover",L),Ii(document,"toggle-popover",I)}function k(W){t("before-show",W)}function S(W){o.force=!1,t("after-show",W)}function P(W){t("before-hide",W)}function C(W){o.force=!1,d(),t("after-hide",W)}function ot(W){W.stopPropagation()}function K(){o.isHovered=!0,o.isInteractive&&["hover","hover-focus"].includes(o.visibility)&&y()}function lt(){if(o.isHovered=!1,!r)return;const W=r.state.elements.reference;o.autoHide&&!o.isFocused&&(!W||W!==document.activeElement)&&["hover","hover-focus"].includes(o.visibility)&&x()}function at(){o.isFocused=!0,o.isInteractive&&["focus","hover-focus"].includes(o.visibility)&&y()}function gt(W){["focus","hover-focus"].includes(o.visibility)&&(!W.relatedTarget||!wu(s.value,W.relatedTarget))&&(o.isFocused=!1,!o.isHovered&&o.autoHide&&x())}function Vt(){i!=null&&(i.disconnect(),i=null)}return en(()=>s.value,W=>{Vt(),W&&(i=new ResizeObserver(()=>{r&&r.update()}),i.observe(W))}),en(()=>o.placement,a,{immediate:!0}),Ss(()=>{w()}),Go(()=>{d(),Vt(),T()}),{...Nx(o),popoverRef:s,alignment:u,hide:x,setupPopper:f,beforeEnter:k,afterEnter:S,beforeLeave:P,afterLeave:C,onClick:ot,onMouseOver:K,onMouseLeave:lt,onFocusIn:at,onFocusOut:gt}}}),Qr=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};function IX(e,t,n,s,i,r){return ht(),vt("div",{class:oe(["vc-popover-content-wrapper",{"is-interactive":e.isInteractive}]),ref:"popoverRef",onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o)),onMouseover:t[1]||(t[1]=(...o)=>e.onMouseOver&&e.onMouseOver(...o)),onMouseleave:t[2]||(t[2]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onFocusin:t[3]||(t[3]=(...o)=>e.onFocusIn&&e.onFocusIn(...o)),onFocusout:t[4]||(t[4]=(...o)=>e.onFocusOut&&e.onFocusOut(...o))},[Ct(Kl,{name:`vc-${e.transition}`,appear:"",onBeforeEnter:e.beforeEnter,onAfterEnter:e.afterEnter,onBeforeLeave:e.beforeLeave,onAfterLeave:e.afterLeave},{default:me(()=>[e.isVisible?(ht(),vt("div",Yl({key:0,tabindex:"-1",class:`vc-popover-content direction-${e.direction}`},e.$attrs),[Rh(e.$slots,"default",{direction:e.direction,alignment:e.alignment,data:e.data,hide:e.hide},()=>[Lh(We(e.data),1)]),X("span",{class:oe(["vc-popover-caret",`direction-${e.direction}`,`align-${e.alignment}`])},null,2)],16)):pn("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const TA=Qr(EX,[["render",IX]]),SX={class:"vc-day-popover-row"},AX={key:0,class:"vc-day-popover-row-indicator"},xX={class:"vc-day-popover-row-label"},CX=an({__name:"PopoverRow",props:{attribute:null},setup(e){const t=e,n=G(()=>{const{content:s,highlight:i,dot:r,bar:o,popover:a}=t.attribute;return a&&a.hideIndicator?null:s?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${s.base.color}`}:i?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${i.base.color}`}:r?{class:`vc-dot vc-attr vc-${r.base.color}`}:o?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${o.base.color}`}:null});return(s,i)=>(ht(),vt("div",SX,[ft(n)?(ht(),vt("div",AX,[X("span",{class:oe(ft(n).class)},null,2)])):pn("",!0),X("div",xX,[Rh(s.$slots,"default",{},()=>[Lh(We(e.attribute.popover?e.attribute.popover.label:"No content provided"),1)])])]))}}),PX={inheritAttrs:!1},ds=an({...PX,__name:"CalendarSlot",props:{name:null},setup(e){const n=bA(e.name);return(s,i)=>ft(n)?(ht(),jn(l1(ft(n)),cx(Yl({key:0},s.$attrs)),null,16)):Rh(s.$slots,"default",{key:1})}}),kX={class:"vc-day-popover-container"},DX={key:0,class:"vc-day-popover-header"},RX=an({__name:"CalendarDayPopover",setup(e){const{dayPopoverId:t,displayMode:n,color:s,masks:i,locale:r}=Xr();function o(l,c){return r.value.formatDate(l,c)}function a(l){return r.value.formatDate(l.date,i.value.dayPopover)}return(l,c)=>(ht(),jn(TA,{id:ft(t),class:oe([`vc-${ft(s)}`,`vc-${ft(n)}`])},{default:me(({data:{day:u,attributes:d},hide:f})=>[Ct(ds,{name:"day-popover",day:u,"day-title":a(u),attributes:d,format:o,masks:ft(i),hide:f},{default:me(()=>[X("div",kX,[ft(i).dayPopover?(ht(),vt("div",DX,We(a(u)),1)):pn("",!0),(ht(!0),vt(re,null,Cn(d,p=>(ht(),jn(CX,{key:p.key,attribute:p},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),MX={},OX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},LX=X("polyline",{points:"9 18 15 12 9 6"},null,-1),NX=[LX];function VX(e,t){return ht(),vt("svg",OX,NX)}const FX=Qr(MX,[["render",VX]]),$X={},BX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},UX=X("polyline",{points:"15 18 9 12 15 6"},null,-1),jX=[UX];function HX(e,t){return ht(),vt("svg",BX,jX)}const zX=Qr($X,[["render",HX]]),WX={},YX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},qX=X("polyline",{points:"6 9 12 15 18 9"},null,-1),KX=[qX];function GX(e,t){return ht(),vt("svg",YX,KX)}const XX=Qr(WX,[["render",GX]]),QX={},JX={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},ZX=X("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),tQ=[ZX];function eQ(e,t){return ht(),vt("svg",JX,tQ)}const nQ=Qr(QX,[["render",eQ]]),sQ=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:XX,IconChevronLeft:zX,IconChevronRight:FX,IconClock:nQ},Symbol.toStringTag,{value:"Module"})),Th=an({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(e){const t=e,n=G(()=>t.width||t.size),s=G(()=>t.height||t.size),i=G(()=>sQ[`Icon${t.name}`]);return(r,o)=>(ht(),jn(l1(ft(i)),{width:ft(n),height:ft(s),class:"vc-base-icon"},null,8,["width","height"]))}}),iQ=["disabled"],rQ={key:1,class:"vc-title-wrapper"},oQ={type:"button",class:"vc-title"},aQ=["disabled"],EA=an({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(e){const t=e,{navPopoverId:n,navVisibility:s,canMovePrev:i,movePrev:r,canMoveNext:o,moveNext:a}=Xr(),l=G(()=>{switch(t.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),c=G(()=>{const{page:_}=t;return{id:n.value,visibility:s.value,placement:l.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:_},isInteractive:!0}}),u=G(()=>t.page.titlePosition.includes("left")),d=G(()=>t.page.titlePosition.includes("right")),f=G(()=>t.layout?t.layout:u.value?"tu-pn":d.value?"pn-tu":"p-tu-n;"),p=G(()=>({prev:f.value.includes("p")&&!t.hideArrows,title:f.value.includes("t")&&!t.hideTitle,next:f.value.includes("n")&&!t.hideArrows})),m=G(()=>({gridTemplateColumns:f.value.split("").map(y=>{switch(y){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(_,y)=>(ht(),vt("div",{class:oe(["vc-header",{"is-lg":e.isLg,"is-xl":e.isXl,"is-2xl":e.is2xl}]),style:sn(ft(m))},[ft(p).prev?(ht(),vt("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!ft(i),onClick:y[0]||(y[0]=(...x)=>ft(r)&&ft(r)(...x)),onKeydown:y[1]||(y[1]=Qv((...x)=>ft(r)&&ft(r)(...x),["space","enter"]))},[Ct(ds,{name:"header-prev-button",disabled:!ft(i)},{default:me(()=>[Ct(Th,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,iQ)):pn("",!0),ft(p).title?(ht(),vt("div",rQ,[Ct(ds,{name:"header-title-wrapper"},{default:me(()=>[ml((ht(),vt("button",oQ,[Ct(ds,{name:"header-title",title:e.page.title},{default:me(()=>[X("span",null,We(e.page.title),1)]),_:1},8,["title"])])),[[ft(mA),ft(c)]])]),_:1})])):pn("",!0),ft(p).next?(ht(),vt("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!ft(o),onClick:y[2]||(y[2]=(...x)=>ft(a)&&ft(a)(...x)),onKeydown:y[3]||(y[3]=Qv((...x)=>ft(a)&&ft(a)(...x),["space","enter"]))},[Ct(ds,{name:"header-next-button",disabled:!ft(o)},{default:me(()=>[Ct(Th,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,aQ)):pn("",!0)],6))}}),IA=Symbol("__vc_page_context__");function lQ(e){const{locale:t,getDateAddress:n,canMove:s}=Xr();function i(a,l){const{month:c,year:u}=n(new Date);return pA().map((d,f)=>{const p=f+1;return{month:p,year:a,id:HK(p,a),label:t.value.formatDate(d,l),ariaLabel:t.value.formatDate(d,"MMMM"),isActive:p===e.value.month&&a===e.value.year,isCurrent:p===c&&a===u,isDisabled:!s({month:p,year:a},{position:e.value.position})}})}function r(a,l){const{year:c}=n(new Date),{position:u}=e.value,d=[];for(let f=a;f<=l;f+=1){const p=[...Array(12).keys()].some(m=>s({month:m+1,year:f},{position:u}));d.push({year:f,id:f.toString(),label:f.toString(),ariaLabel:f.toString(),isActive:f===e.value.year,isCurrent:f===c,isDisabled:!p})}return d}const o={page:e,getMonthItems:i,getYearItems:r};return Di(IA,o),o}function SA(){const e=bn(IA);if(e)return e;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const cQ={class:"vc-nav-header"},uQ=["disabled"],hQ=["disabled"],dQ={class:"vc-nav-items"},fQ=["data-id","aria-label","disabled","onClick","onKeydown"],pQ=an({__name:"CalendarNav",setup(e){const{masks:t,move:n}=Xr(),{page:s,getMonthItems:i,getYearItems:r}=SA(),o=Lt(!0),a=12,l=Lt(s.value.year),c=Lt(f(s.value.year)),u=Lt(null);function d(){setTimeout(()=>{if(u.value==null)return;const et=u.value.querySelector(".vc-nav-item:not(:disabled)");et&&et.focus()},10)}function f(et){return Math.floor(et/a)}function p(){o.value=!o.value}function m(et){return et*a}function _(et){return a*(et+1)-1}function y(){at.value&&(o.value&&M(),b())}function x(){gt.value&&(o.value&&E(),R())}function M(){l.value--}function E(){l.value++}function b(){c.value--}function R(){c.value++}const L=G(()=>i(l.value,t.value.navMonths).map(et=>({...et,click:()=>n({month:et.month,year:et.year},{position:s.value.position})}))),I=G(()=>i(l.value-1,t.value.navMonths)),w=G(()=>I.value.some(et=>!et.isDisabled)),T=G(()=>i(l.value+1,t.value.navMonths)),k=G(()=>T.value.some(et=>!et.isDisabled)),S=G(()=>r(m(c.value),_(c.value)).map(et=>({...et,click:()=>{l.value=et.year,o.value=!0,d()}}))),P=G(()=>r(m(c.value-1),_(c.value-1))),C=G(()=>P.value.some(et=>!et.isDisabled)),ot=G(()=>r(m(c.value+1),_(c.value+1))),K=G(()=>ot.value.some(et=>!et.isDisabled)),lt=G(()=>o.value?L.value:S.value),at=G(()=>o.value?w.value:C.value),gt=G(()=>o.value?k.value:K.value),Vt=G(()=>XS(S.value.map(et=>et.year))),W=G(()=>vo(S.value.map(et=>et.year))),St=G(()=>o.value?l.value:`${Vt.value} - ${W.value}`);return E1(()=>{l.value=s.value.year,d()}),en(()=>l.value,et=>c.value=f(et)),Ss(()=>d()),(et,kt)=>(ht(),vt("div",{class:"vc-nav-container",ref_key:"navContainer",ref:u},[X("div",cQ,[X("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!ft(at),onClick:y,onKeydown:kt[0]||(kt[0]=Mt=>ft(tu)(Mt,y))},[Ct(ds,{name:"nav-prev-button",move:y,disabled:!ft(at)},{default:me(()=>[Ct(Th,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,uQ),X("button",{type:"button",class:"vc-nav-title vc-focus",onClick:p,onKeydown:kt[1]||(kt[1]=Mt=>ft(tu)(Mt,p))},We(ft(St)),33),X("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!ft(gt),onClick:x,onKeydown:kt[2]||(kt[2]=Mt=>ft(tu)(Mt,x))},[Ct(ds,{name:"nav-next-button",move:x,disabled:!ft(gt)},{default:me(()=>[Ct(Th,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,hQ)]),X("div",dQ,[(ht(!0),vt(re,null,Cn(ft(lt),Mt=>(ht(),vt("button",{key:Mt.label,type:"button","data-id":Mt.id,"aria-label":Mt.ariaLabel,class:oe(["vc-nav-item vc-focus",[Mt.isActive?"is-active":Mt.isCurrent?"is-current":""]]),disabled:Mt.isDisabled,onClick:Mt.click,onKeydown:qt=>ft(tu)(qt,Mt.click)},We(Mt.label),43,fQ))),128))])],512))}}),AA=an({__name:"CalendarPageProvider",props:{page:null},setup(e){return lQ($x(e,"page")),(n,s)=>Rh(n.$slots,"default")}}),gQ=an({__name:"CalendarNavPopover",setup(e){const{navPopoverId:t,color:n,displayMode:s}=Xr();return(i,r)=>(ht(),jn(TA,{id:ft(t),class:oe(["vc-nav-popover-container",`vc-${ft(n)}`,`vc-${ft(s)}`])},{default:me(({data:o})=>[Ct(AA,{page:o.page},{default:me(()=>[Ct(ds,{name:"nav"},{default:me(()=>[Ct(pQ)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),mQ=an({directives:{popover:mA},components:{CalendarSlot:ds},props:{day:{type:Object,required:!0}},setup(e){const{locale:t,theme:n,attributeContext:s,dayPopoverId:i,onDayClick:r,onDayMouseenter:o,onDayMouseleave:a,onDayFocusin:l,onDayFocusout:c,onDayKeydown:u}=Xr(),d=G(()=>e.day),f=G(()=>s.value.getCells(d.value)),p=G(()=>f.value.map(K=>K.data)),m=G(()=>({...d.value,attributes:p.value,attributeCells:f.value}));function _({data:K},{popovers:lt}){const{key:at,customData:gt,popover:Vt}=K;if(!Vt)return;const W=j0({key:at,customData:gt,attribute:K},{...Vt},{visibility:Vt.label?"hover":"click",placement:"bottom",isInteractive:!Vt.label});lt.splice(0,0,W)}const y=G(()=>{const K={...n.value.prepareRender({}),popovers:[]};return f.value.forEach(lt=>{n.value.render(lt,K),_(lt,K)}),K}),x=G(()=>y.value.highlights),M=G(()=>!!Ir(x.value)),E=G(()=>y.value.content),b=G(()=>y.value.dots),R=G(()=>!!Ir(b.value)),L=G(()=>y.value.bars),I=G(()=>!!Ir(L.value)),w=G(()=>y.value.popovers),T=G(()=>w.value.map(K=>K.attribute)),k=bA("day-content"),S=G(()=>["vc-day",...d.value.classes,{"vc-day-box-center-center":!k},{"is-not-in-month":!e.day.inMonth}]),P=G(()=>{let K;d.value.isFocusable?K="0":K="-1";const lt=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":d.value.isDisabled},Er(vo(x.value),"contentClass"),Er(vo(E.value),"class")||""],at={...Er(vo(x.value),"contentStyle"),...Er(vo(E.value),"style")};return{class:lt,style:at,tabindex:K,"aria-label":d.value.ariaLabel,"aria-disabled":!!d.value.isDisabled,role:"button"}}),C=G(()=>({click(K){r(m.value,K)},mouseenter(K){o(m.value,K)},mouseleave(K){a(m.value,K)},focusin(K){l(m.value,K)},focusout(K){c(m.value,K)},keydown(K){u(m.value,K)}})),ot=G(()=>Ir(w.value)?j0({id:i.value,data:{day:d,attributes:T.value}},...w.value):null);return{attributes:p,attributeCells:f,bars:L,dayClasses:S,dayContentProps:P,dayContentEvents:C,dayPopover:ot,glyphs:y,dots:b,hasDots:R,hasBars:I,highlights:x,hasHighlights:M,locale:t,popovers:w}}}),vQ={key:0,class:"vc-highlights vc-day-layer"},_Q={key:1,class:"vc-day-layer vc-day-box-center-bottom"},yQ={class:"vc-dots"},bQ={key:2,class:"vc-day-layer vc-day-box-center-bottom"},wQ={class:"vc-bars"};function TQ(e,t,n,s,i,r){const o=Fs("CalendarSlot"),a=c1("popover");return ht(),vt("div",{class:oe(e.dayClasses)},[e.hasHighlights?(ht(),vt("div",vQ,[(ht(!0),vt(re,null,Cn(e.highlights,({key:l,wrapperClass:c,class:u,style:d})=>(ht(),vt("div",{key:l,class:oe(c)},[X("div",{class:oe(u),style:sn(d)},null,6)],2))),128))])):pn("",!0),Ct(o,{name:"day-content",day:e.day,attributes:e.attributes,"attribute-cells":e.attributeCells,dayProps:e.dayContentProps,dayEvents:e.dayContentEvents,locale:e.locale},{default:me(()=>[ml((ht(),vt("div",Yl(e.dayContentProps,lC(e.dayContentEvents,!0)),[Lh(We(e.day.label),1)],16)),[[a,e.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),e.hasDots?(ht(),vt("div",_Q,[X("div",yQ,[(ht(!0),vt(re,null,Cn(e.dots,({key:l,class:c,style:u})=>(ht(),vt("span",{key:l,class:oe(c),style:sn(u)},null,6))),128))])])):pn("",!0),e.hasBars?(ht(),vt("div",bQ,[X("div",wQ,[(ht(!0),vt(re,null,Cn(e.bars,({key:l,class:c,style:u})=>(ht(),vt("span",{key:l,class:oe(c),style:sn(u)},null,6))),128))])])):pn("",!0)],2)}const EQ=Qr(mQ,[["render",TQ]]),IQ={class:"vc-weekdays"},SQ=["onClick"],AQ={inheritAttrs:!1},xQ=an({...AQ,__name:"CalendarPage",setup(e){const{page:t}=SA(),{onWeeknumberClick:n}=Xr();return(s,i)=>(ht(),vt("div",{class:oe(["vc-pane",`row-${ft(t).row}`,`row-from-end-${ft(t).rowFromEnd}`,`column-${ft(t).column}`,`column-from-end-${ft(t).columnFromEnd}`]),ref:"pane"},[Ct(EA,{page:ft(t),"is-lg":"","hide-arrows":""},null,8,["page"]),X("div",{class:oe(["vc-weeks",{[`vc-show-weeknumbers-${ft(t).weeknumberPosition}`]:ft(t).weeknumberPosition}])},[X("div",IQ,[(ht(!0),vt(re,null,Cn(ft(t).weekdays,({weekday:r,label:o},a)=>(ht(),vt("div",{key:a,class:oe(`vc-weekday vc-weekday-${r}`)},We(o),3))),128))]),(ht(!0),vt(re,null,Cn(ft(t).viewWeeks,r=>(ht(),vt("div",{key:`weeknumber-${r.weeknumber}`,class:"vc-week"},[ft(t).weeknumberPosition?(ht(),vt("div",{key:0,class:oe(["vc-weeknumber",`is-${ft(t).weeknumberPosition}`])},[X("span",{class:oe(["vc-weeknumber-content"]),onClick:o=>ft(n)(r,o)},We(r.weeknumberDisplay),9,SQ)],2)):pn("",!0),(ht(!0),vt(re,null,Cn(r.days,o=>(ht(),jn(EQ,{key:o.id,day:o},null,8,["day"]))),128))]))),128))],2)],2))}}),CQ=an({components:{CalendarHeader:EA,CalendarPage:xQ,CalendarNavPopover:gQ,CalendarDayPopover:RX,CalendarPageProvider:AA,CalendarSlot:ds},props:bX,emit:wX,setup(e,{emit:t,slots:n}){return TX(e,{emit:t,slots:n})}}),PQ={class:"vc-pane-header-wrapper"};function kQ(e,t,n,s,i,r){const o=Fs("CalendarHeader"),a=Fs("CalendarPage"),l=Fs("CalendarSlot"),c=Fs("CalendarPageProvider"),u=Fs("CalendarDayPopover"),d=Fs("CalendarNavPopover");return ht(),vt(re,null,[X("div",Yl({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},e.$attrs,{class:["vc-container",`vc-${e.view}`,`vc-${e.color}`,`vc-${e.displayMode}`,{"vc-expanded":e.expanded,"vc-bordered":!e.borderless,"vc-transparent":e.transparent}],onMouseup:t[0]||(t[0]=Yp(()=>{},["prevent"])),ref:"containerRef"}),[X("div",{class:oe(["vc-pane-container",{"in-transition":e.inTransition}])},[X("div",PQ,[e.firstPage?(ht(),jn(o,{key:0,page:e.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):pn("",!0)]),Ct(Kl,{name:`vc-${e.transitionName}`,onBeforeEnter:e.onTransitionBeforeEnter,onAfterEnter:e.onTransitionAfterEnter},{default:me(()=>[(ht(),vt("div",{key:e.pages[0].id,class:"vc-pane-layout",style:sn({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})},[(ht(!0),vt(re,null,Cn(e.pages,f=>(ht(),jn(c,{key:f.id,page:f},{default:me(()=>[Ct(l,{name:"page",page:f},{default:me(()=>[Ct(a)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),Ct(l,{name:"footer"})],2)],16),Ct(u),Ct(d)],64)}const DQ=Qr(CQ,[["render",kQ]]);const RQ={class:"calendar-container"},MQ={class:"calendar-heatmap themed-calendar"},OQ={class:"day-info-box"},LQ={key:0},NQ={__name:"Calendar",setup(e){const t=Lt({}),n=Lt([]),s=new Date,i=Lt(new Date(s.getFullYear(),s.getMonth(),1)),r=Lt(null);function o(m){return m.toString().padStart(2,"0")}function a(m){const _=m.date,y=`${_.getFullYear()}-${o(_.getMonth()+1)}-${o(_.getDate())}`;t.value[y],r.value=y}async function l(){const m=await yI(),_={};for(const y in m){const M=(m[y]||[]).reduce((I,w)=>I+w.count,0),[E,b,R]=y.split("-").map(Number),L=`${E}-${o(b)}-${o(R)}`;_[L]=M}return _}async function c(){await Pr(),t.value=await l(),n.value=Object.entries(t.value).map(([m,_])=>({key:m,highlight:!0,dates:m})),Pr(()=>p())}Ss(()=>{c()}),en(i,()=>{c()});let u=null;function d(m){const _=m[0].monthTitle;_!==u&&(c(),u=_)}const f=G(()=>r.value?t.value[r.value]||0:null),p=()=>{const m=document.querySelectorAll(".vc-day"),_=Math.max(...Object.values(t.value))||1;m.forEach(y=>{const x=[...y.classList].find(R=>R.includes("id-")).replace("id-","");if(!x)return;const M=t.value[x]||0;if(M===0)return;const E=y.querySelector(".vc-highlight");if(!E)return;const b=M/_;E.style.opacity=b})};return(m,_)=>(ht(),vt("div",RQ,[X("button",{class:"back-btn",onClick:_[0]||(_[0]=y=>m.$router.push("/")),"aria-label":"Back"},_[2]||(_[2]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",MQ,[Ct(ft(DQ),{modelValue:i.value,"onUpdate:modelValue":_[1]||(_[1]=y=>i.value=y),attributes:n.value,"show-months":1,"title-position":"left","max-date":ft(s),borderless:"",transparent:"","onUpdate:pages":d,onDayclick:a},null,8,["modelValue","attributes","max-date"])]),X("div",OQ,[r.value&&f.value!==null?(ht(),vt("span",LQ,"Чіхів: "+We(f.value),1)):pn("",!0)])]))}},VQ=Xi(NQ,[["__scopeId","data-v-392560f1"]]),FQ="modulepreload",$Q=function(e){return"/chikh_counter/"+e},_w={},BQ=function(t,n,s){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=$Q(r),r in _w)return;_w[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":FQ,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};function UQ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:r,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await BQ(()=>import("./workbox-window.prod.es5-5ffdab76.js"),[]).then(({Workbox:d})=>new d("/chikh_counter/sw.js",{scope:"/chikh_counter/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||s==null||s()}),a.register({immediate:t}).then(d=>{r?r("/chikh_counter/sw.js",d):i==null||i(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}function yw(e){var t,n,s;return e.type.indexOf("mouse")!==-1?e.clientX:(s=(n=(t=e.touches)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.clientX)!==null&&s!==void 0?s:0}function bw(e){var t,n,s;return e.type.indexOf("mouse")!==-1?e.clientY:(s=(n=(t=e.touches)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.clientY)!==null&&s!==void 0?s:0}(function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});window.addEventListener("test",null,t)}catch{}return e})();const jQ={install(e,t){var n=Object.assign({},{touchClass:"",namespace:"touch",disableClick:!1,tapTolerance:10,touchHoldTolerance:400,longTapTimeInterval:400,rollOverFrequency:100,dragFrequency:10,dragOutside:!1,swipeTolerance:100,swipeConeSize:.75,zoomFrequency:10,zoomDistance:10,zoomInOutDistance:100},t);function s(E){var b=this.$$touchObj,R=E.type.indexOf("touch")>=0,L=E.type.indexOf("mouse")>=0,I=this;R&&(b.lastTouchStartTime=E.timeStamp),!(L&&b.lastTouchStartTime&&E.timeStamp-b.lastTouchStartTime<350)&&(b.touchStarted||(p(this),b.touchStarted=!0,b.touchMoved=!1,b.swipeOutBounded=!1,b.isZooming=!1,b.startX=yw(E),b.startY=bw(E),b.currentX=0,b.currentY=0,b.touchStartTime=E.timeStamp,b.hasSwipe=d(b,"swipe")||d(b,"swipe.left")||d(b,"swipe.right")||d(b,"swipe.top")||d(b,"swipe.bottom"),b.hasZoom=d(b,"zoom")||d(b,"zoom.in")||d(b,"zoom.out"),d(b,"hold")&&(b.touchHoldTimer=setTimeout(function(){b.touchHoldTimer=null,f(E,I,"hold")},b.options.touchHoldTolerance)),f(E,this,"press")))}function i(E){var b=this.$$touchObj;if(b.touchStarted==!0)r(E,b,!1);else if(d(b,"rollover")&&E.clientX!=null){var R=E;const L=b.element.getBoundingClientRect();R.clientX>=L.left&&R.clientX<=L.right&&R.clientY>=L.top&&R.clientY<=L.bottom&&r(E,b,!0)}}function r(E,b=null,R=!1){b==null&&(b=this.$$touchObj);var L=yw(E),I=bw(E),w=b.currentX!=L||b.currentY!=I;if(b.currentX=L,b.currentY=I,!R)if(b.touchMoved){if(b.hasSwipe&&!b.swipeOutBounded){var k=b.options.swipeTolerance;Math.abs(b.startX-b.currentX)/Math.abs(b.startY-b.currentY)>b.options.swipeConeSize&&Math.abs(b.startY-b.currentY)/Math.abs(b.startX-b.currentX)>b.options.swipeConeSize&&(b.swipeOutBounded=Math.abs(b.startY-b.currentY)<k&&Math.abs(b.startX-b.currentX)<k)}}else{var T=b.options.tapTolerance;b.touchMoved=Math.abs(b.startX-b.currentX)>T||Math.abs(b.startY-b.currentY)>T,b.touchMoved&&(_(b),f(E,b.element,"drag.once"))}if(w&&d(b,"rollover")){var S=E.timeStamp;(b.touchRollTime==null||S>b.touchRollTime+b.options.rollOverFrequency)&&(b.touchRollTime=S,f(E,b.element,"rollover"))}if(!R){if(b.touchStarted&&b.touchMoved&&w&&d(b,"drag")){var S=E.timeStamp;(b.touchDragTime==null||S>b.touchDragTime+b.options.dragFrequency)&&(b.touchDragTime=S,f(E,b.element,"drag"))}if(b.touchStarted&&b.hasZoom){var S=E.timeStamp;(b.touchZoomTime==null||S>b.touchZoomTime+b.options.zoomFrequency)&&(b.touchZoomTime=S,o(b,E))}}}function o(E,b){const R=b.changedTouches;if(R.length!==2){E.isZooming=!1;return}const L=Math.sqrt(Math.pow(R[0].clientX-R[1].clientX,2)+Math.pow(R[0].clientY-R[1].clientY,2));if(!E.isZooming){E.isZooming=!0,E.initialZoomDistance=L;return}const I=L/E.initialZoomDistance;d(E,"zoom")&&Math.abs(I-1)>E.options.zoomDistance/E.initialZoomDistance&&f(b,E.element,"zoom",I),(d(E,"zoom.in")||d(E,"zoom.out"))&&Math.abs(L-E.initialZoomDistance)>E.options.zoomInOutDistance&&(L>E.initialZoomDistance?f(b,E.element,"zoom.in"):f(b,E.element,"zoom.out")),E.isZooming=!1}function a(){var E=this.$$touchObj;E.touchStarted==!0&&(_(E),m(this),E.touchStarted=E.touchMoved=!1,E.startX=E.startY=0)}function l(E){var b=this.$$touchObj;if(b.touchStarted==!0){var R=E.type.indexOf("touch")>=0,L=E.type.indexOf("mouse")>=0;R&&(b.lastTouchEndTime=E.timeStamp);var I=R&&!b.touchHoldTimer;if(_(b),b.touchStarted=!1,m(this),L&&b.lastTouchEndTime&&E.timeStamp-b.lastTouchEndTime<350)return;if(f(E,this,"release"),b.touchMoved){if(b.hasSwipe&&!b.swipeOutBounded){var w=b.options.swipeTolerance,T,k=Math.abs(b.startY-b.currentY),S=Math.abs(b.startX-b.currentX);(k>w||S>w)&&(S>w?T=b.startX>b.currentX?"left":"right":T=b.startY>b.currentY?"top":"bottom",d(b,"swipe."+T)?f(E,this,"swipe."+T,T):f(E,this,"swipe",T))}}else if(d(b,"longtap")&&E.timeStamp-b.touchStartTime>b.options.longTapTimeInterval)E.cancelable&&E.preventDefault(),f(E,this,"longtap");else if(d(b,"hold")&&I){E.cancelable&&E.preventDefault();return}else f(E,this,"tap")}}function c(){p(this)}function u(){m(this)}function d(E,b){var R=E.callbacks[b];return R!=null&&R.length>0}function f(E,b,R,L){var I=b.$$touchObj,w=I.callbacks[R];if(w==null||w.length===0)return null;for(var T=0;T<w.length;T++){var k=w[T];k.modifiers.stop&&E.stopPropagation(),k.modifiers.prevent&&E.preventDefault(),!(k.modifiers.self&&E.target!==E.currentTarget)&&typeof k.value=="function"&&(L?k.value(L,E):k.value(E))}}function p(E){var b=E.$$touchObj.options.touchClass;b&&E.classList.add(b)}function m(E){var b=E.$$touchObj.options.touchClass;b&&E.classList.remove(b)}function _(E){E&&E.touchHoldTimer&&(clearTimeout(E.touchHoldTimer),E.touchHoldTimer=null)}function y(E,b){var R=E.$$touchObj||{element:E,callbacks:{},hasBindTouchEvents:!1,options:n,events:{}};return b&&(R.options=Object.assign({},R.options,b)),E.$$touchObj=R,E.$$touchObj}function x(E){for(const b in E)if(E.hasOwnProperty(b)){const[R,L]=E[b];R.addEventListener(b,L)}}function M(E){for(const b in E)if(E.hasOwnProperty(b)){const[R,L]=E[b];R.removeEventListener(b,L)}}e.directive(n.namespace,{beforeMount:function(E,b){var R=y(E),L=b.arg||"tap";switch(L){case"swipe":var I=b.modifiers;if(I.left||I.right||I.top||I.bottom){for(var w in b.modifiers)if(["left","right","top","bottom"].indexOf(w)>=0){var T="swipe."+w;R.callbacks[T]=R.callbacks[T]||[],R.callbacks[T].push(b)}}else R.callbacks.swipe=R.callbacks.swipe||[],R.callbacks.swipe.push(b);break;case"press":case"drag":b.modifiers.disablePassive;default:R.callbacks[L]=R.callbacks[L]||[],R.callbacks[L].push(b)}R.hasBindTouchEvents||(R.options.dragOutside?(R.events.touchstart=[E,s],R.events.touchmove=[window,i.bind(E)],R.events.touchcancel=[window,a.bind(E)],R.events.touchend=[window,l.bind(E)]):(R.events.touchstart=[E,s],R.events.touchmove=[E,i],R.events.touchcancel=[E,a],R.events.touchend=[E,l]),R.options.disableClick||(R.options.dragOutside?(R.events.mousedown=[E,s],R.events.mousemove=[window,i.bind(E)],R.events.mouseup=[window,l.bind(E)],R.events.mouseenter=[E,c],R.events.mouseleave=[E,u]):(R.events.mousedown=[E,s],R.events.mousemove=[E,r],R.events.mouseup=[E,l],R.events.mouseenter=[E,c],R.events.mouseleave=[E,u])),x(R.events),R.hasBindTouchEvents=!0)},unmounted:function(E){var b=E.$$touchObj;_(b),b&&b.events&&(M(b.events),b.events={}),delete E.$$touchObj}}),e.directive(`${n.namespace}-class`,{beforeMount:function(E,b){y(E,{touchClass:b.value})}}),e.directive(`${n.namespace}-options`,{beforeMount:function(E,b){y(E,b.value)}})}},HQ=[{path:"/",component:vV,meta:{requiresAuth:!0}},{path:"/stats",component:j3,meta:{requiresAuth:!0}},{path:"/calendar",component:VQ,meta:{requiresAuth:!0}},{path:"/auth",component:W3},{path:"/settings",component:e5,meta:{requiresAuth:!0}}],xA=Rk({history:ak(),routes:HQ});xA.beforeEach((e,t,n)=>{const s=e.matched.some(r=>r.meta.requiresAuth),i=qi.currentUser;if(s&&!i){const r=qi.onAuthStateChanged(o=>{r(),o?n():n("/auth")})}else n()});localStorage.getItem("color-primary")||localStorage.setItem("color-primary","#E3F0FF");localStorage.getItem("color-accent")||localStorage.setItem("color-accent","#FFB74D");const zQ=localStorage.getItem("color-primary"),WQ=localStorage.getItem("color-accent");document.documentElement.style.setProperty("--primary",zQ);document.documentElement.style.setProperty("--accent",WQ);const Cm=SP(PP);Cm.use(xA);Cm.use(jQ);Cm.mount("#app");UQ({immediate:!0});
