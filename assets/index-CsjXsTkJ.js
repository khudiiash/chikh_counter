var EA=Object.defineProperty;var IA=(e,t,n)=>t in e?EA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lt=(e,t,n)=>IA(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function op(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const se={},ro=[],ls=()=>{},SA=()=>!1,ih=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ap=e=>e.startsWith("onUpdate:"),Me=Object.assign,lp=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},AA=Object.prototype.hasOwnProperty,Qt=(e,t)=>AA.call(e,t),Tt=Array.isArray,oo=e=>rh(e)==="[object Map]",G0=e=>rh(e)==="[object Set]",Dt=e=>typeof e=="function",de=e=>typeof e=="string",Qs=e=>typeof e=="symbol",le=e=>e!==null&&typeof e=="object",X0=e=>(le(e)||Dt(e))&&Dt(e.then)&&Dt(e.catch),Q0=Object.prototype.toString,rh=e=>Q0.call(e),CA=e=>rh(e).slice(8,-1),J0=e=>rh(e)==="[object Object]",cp=e=>de(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ma=op(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},xA=/-(\w)/g,Nn=oh(e=>e.replace(xA,(t,n)=>n?n.toUpperCase():"")),PA=/\B([A-Z])/g,Ui=oh(e=>e.replace(PA,"-$1").toLowerCase()),ah=oh(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bc=oh(e=>e?`on${ah(e)}`:""),Ii=(e,t)=>!Object.is(e,t),Uc=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Qf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Jf=e=>{const t=parseFloat(e);return isNaN(t)?e:t},kA=e=>{const t=de(e)?Number(e):NaN;return isNaN(t)?e:t};let zm;const lh=()=>zm||(zm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Je(e){if(Tt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=de(s)?OA(s):Je(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(de(e)||le(e))return e}const DA=/;(?![^(]*\))/g,RA=/:([^]+)/,MA=/\/\*[^]*?\*\//g;function OA(e){const t={};return e.replace(MA,"").split(DA).forEach(n=>{if(n){const s=n.split(RA);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ie(e){let t="";if(de(e))t=e;else if(Tt(e))for(let n=0;n<e.length;n++){const s=ie(e[n]);s&&(t+=s+" ")}else if(le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function NA(e){if(!e)return null;let{class:t,style:n}=e;return t&&!de(t)&&(e.class=ie(t)),n&&(e.style=Je(n)),e}const LA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",VA=op(LA);function Z0(e){return!!e||e===""}const tw=e=>!!(e&&e.__v_isRef===!0),Ze=e=>de(e)?e:e==null?"":Tt(e)||le(e)&&(e.toString===Q0||!Dt(e.toString))?tw(e)?Ze(e.value):JSON.stringify(e,ew,2):String(e),ew=(e,t)=>tw(t)?ew(e,t.value):oo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[lf(s,r)+" =>"]=i,n),{})}:G0(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>lf(n))}:Qs(t)?lf(t):le(t)&&!Tt(t)&&!J0(t)?String(t):t,lf=(e,t="")=>{var n;return Qs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class $A{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!t&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=fn;try{return fn=this,t()}finally{fn=n}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function FA(){return fn}let oe;const cf=new WeakSet;class nw{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cf.has(this)&&(cf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||iw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wm(this),rw(this);const t=oe,n=qn;oe=this,qn=!0;try{return this.fn()}finally{ow(this),oe=t,qn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fp(t);this.deps=this.depsTail=void 0,Wm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zf(this)&&this.run()}get dirty(){return Zf(this)}}let sw=0,Oa,Na;function iw(e,t=!1){if(e.flags|=8,t){e.next=Na,Na=e;return}e.next=Oa,Oa=e}function up(){sw++}function hp(){if(--sw>0)return;if(Na){let t=Na;for(Na=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Oa;){let t=Oa;for(Oa=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function rw(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ow(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),fp(s),BA(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Zf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(aw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function aw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===el)||(e.globalVersion=el,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Zf(e))))return;e.flags|=2;const t=e.dep,n=oe,s=qn;oe=e,qn=!0;try{rw(e);const i=e.fn(e._value);(t.version===0||Ii(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{oe=n,qn=s,ow(e),e.flags&=-3}}function fp(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)fp(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function BA(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let qn=!0;const lw=[];function js(){lw.push(qn),qn=!1}function zs(){const e=lw.pop();qn=e===void 0?!0:e}function Wm(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=oe;oe=void 0;try{t()}finally{oe=n}}}let el=0;class UA{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class dp{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!oe||!qn||oe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==oe)n=this.activeLink=new UA(oe,this),oe.deps?(n.prevDep=oe.depsTail,oe.depsTail.nextDep=n,oe.depsTail=n):oe.deps=oe.depsTail=n,cw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=oe.depsTail,n.nextDep=void 0,oe.depsTail.nextDep=n,oe.depsTail=n,oe.deps===n&&(oe.deps=s)}return n}trigger(t){this.version++,el++,this.notify(t)}notify(t){up();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{hp()}}}function cw(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)cw(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const lu=new WeakMap,gr=Symbol(""),td=Symbol(""),nl=Symbol("");function Ke(e,t,n){if(qn&&oe){let s=lu.get(e);s||lu.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new dp),i.map=s,i.key=n),i.track()}}function Ls(e,t,n,s,i,r){const o=lu.get(e);if(!o){el++;return}const a=l=>{l&&l.trigger()};if(up(),t==="clear")o.forEach(a);else{const l=Tt(e),c=l&&cp(n);if(l&&n==="length"){const u=Number(s);o.forEach((f,d)=>{(d==="length"||d===nl||!Qs(d)&&d>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(nl)),t){case"add":l?c&&a(o.get("length")):(a(o.get(gr)),oo(e)&&a(o.get(td)));break;case"delete":l||(a(o.get(gr)),oo(e)&&a(o.get(td)));break;case"set":oo(e)&&a(o.get(gr));break}}hp()}function HA(e,t){const n=lu.get(e);return n&&n.get(t)}function Yr(e){const t=jt(e);return t===e?t:(Ke(t,"iterate",nl),Rn(e)?t:t.map(Ve))}function ch(e){return Ke(e=jt(e),"iterate",nl),e}const jA={__proto__:null,[Symbol.iterator](){return uf(this,Symbol.iterator,Ve)},concat(...e){return Yr(this).concat(...e.map(t=>Tt(t)?Yr(t):t))},entries(){return uf(this,"entries",e=>(e[1]=Ve(e[1]),e))},every(e,t){return Cs(this,"every",e,t,void 0,arguments)},filter(e,t){return Cs(this,"filter",e,t,n=>n.map(Ve),arguments)},find(e,t){return Cs(this,"find",e,t,Ve,arguments)},findIndex(e,t){return Cs(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Cs(this,"findLast",e,t,Ve,arguments)},findLastIndex(e,t){return Cs(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Cs(this,"forEach",e,t,void 0,arguments)},includes(...e){return hf(this,"includes",e)},indexOf(...e){return hf(this,"indexOf",e)},join(e){return Yr(this).join(e)},lastIndexOf(...e){return hf(this,"lastIndexOf",e)},map(e,t){return Cs(this,"map",e,t,void 0,arguments)},pop(){return ha(this,"pop")},push(...e){return ha(this,"push",e)},reduce(e,...t){return Ym(this,"reduce",e,t)},reduceRight(e,...t){return Ym(this,"reduceRight",e,t)},shift(){return ha(this,"shift")},some(e,t){return Cs(this,"some",e,t,void 0,arguments)},splice(...e){return ha(this,"splice",e)},toReversed(){return Yr(this).toReversed()},toSorted(e){return Yr(this).toSorted(e)},toSpliced(...e){return Yr(this).toSpliced(...e)},unshift(...e){return ha(this,"unshift",e)},values(){return uf(this,"values",Ve)}};function uf(e,t,n){const s=ch(e),i=s[t]();return s!==e&&!Rn(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const zA=Array.prototype;function Cs(e,t,n,s,i,r){const o=ch(e),a=o!==e&&!Rn(e),l=o[t];if(l!==zA[t]){const f=l.apply(e,r);return a?Ve(f):f}let c=n;o!==e&&(a?c=function(f,d){return n.call(this,Ve(f),d,e)}:n.length>2&&(c=function(f,d){return n.call(this,f,d,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function Ym(e,t,n,s){const i=ch(e);let r=n;return i!==e&&(Rn(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Ve(a),l,e)}),i[t](r,...s)}function hf(e,t,n){const s=jt(e);Ke(s,"iterate",nl);const i=s[t](...n);return(i===-1||i===!1)&&Rl(n[0])?(n[0]=jt(n[0]),s[t](...n)):i}function ha(e,t,n=[]){js(),up();const s=jt(e)[t].apply(e,n);return hp(),zs(),s}const WA=op("__proto__,__v_isRef,__isVue"),uw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qs));function YA(e){Qs(e)||(e=String(e));const t=jt(this);return Ke(t,"has",e),t.hasOwnProperty(e)}class hw{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?nC:gw:r?pw:dw).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Tt(t);if(!i){let l;if(o&&(l=jA[n]))return l;if(n==="hasOwnProperty")return YA}const a=Reflect.get(t,n,De(t)?t:s);return(Qs(n)?uw.has(n):WA(n))||(i||Ke(t,"get",n),r)?a:De(a)?o&&cp(n)?a:a.value:le(a)?i?vw(a):$o(a):a}}class fw extends hw{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=Ri(r);if(!Rn(s)&&!Ri(s)&&(r=jt(r),s=jt(s)),!Tt(t)&&De(r)&&!De(s))return l?!1:(r.value=s,!0)}const o=Tt(t)&&cp(n)?Number(n)<t.length:Qt(t,n),a=Reflect.set(t,n,s,De(t)?t:i);return t===jt(i)&&(o?Ii(s,r)&&Ls(t,"set",n,s):Ls(t,"add",n,s)),a}deleteProperty(t,n){const s=Qt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Ls(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Qs(n)||!uw.has(n))&&Ke(t,"has",n),s}ownKeys(t){return Ke(t,"iterate",Tt(t)?"length":gr),Reflect.ownKeys(t)}}class qA extends hw{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const KA=new fw,GA=new qA,XA=new fw(!0);const ed=e=>e,hc=e=>Reflect.getPrototypeOf(e);function QA(e,t,n){return function(...s){const i=this.__v_raw,r=jt(i),o=oo(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?ed:t?cu:Ve;return!t&&Ke(r,"iterate",l?td:gr),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function fc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function JA(e,t){const n={get(i){const r=this.__v_raw,o=jt(r),a=jt(i);e||(Ii(i,a)&&Ke(o,"get",i),Ke(o,"get",a));const{has:l}=hc(o),c=t?ed:e?cu:Ve;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Ke(jt(i),"iterate",gr),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=jt(r),a=jt(i);return e||(Ii(i,a)&&Ke(o,"has",i),Ke(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=jt(a),c=t?ed:e?cu:Ve;return!e&&Ke(l,"iterate",gr),a.forEach((u,f)=>i.call(r,c(u),c(f),o))}};return Me(n,e?{add:fc("add"),set:fc("set"),delete:fc("delete"),clear:fc("clear")}:{add(i){!t&&!Rn(i)&&!Ri(i)&&(i=jt(i));const r=jt(this);return hc(r).has.call(r,i)||(r.add(i),Ls(r,"add",i,i)),this},set(i,r){!t&&!Rn(r)&&!Ri(r)&&(r=jt(r));const o=jt(this),{has:a,get:l}=hc(o);let c=a.call(o,i);c||(i=jt(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?Ii(r,u)&&Ls(o,"set",i,r):Ls(o,"add",i,r),this},delete(i){const r=jt(this),{has:o,get:a}=hc(r);let l=o.call(r,i);l||(i=jt(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&Ls(r,"delete",i,void 0),c},clear(){const i=jt(this),r=i.size!==0,o=i.clear();return r&&Ls(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=QA(i,e,t)}),n}function pp(e,t){const n=JA(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Qt(n,i)&&i in s?n:s,i,r)}const ZA={get:pp(!1,!1)},tC={get:pp(!1,!0)},eC={get:pp(!0,!1)};const dw=new WeakMap,pw=new WeakMap,gw=new WeakMap,nC=new WeakMap;function sC(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function iC(e){return e.__v_skip||!Object.isExtensible(e)?0:sC(CA(e))}function $o(e){return Ri(e)?e:gp(e,!1,KA,ZA,dw)}function mw(e){return gp(e,!1,XA,tC,pw)}function vw(e){return gp(e,!0,GA,eC,gw)}function gp(e,t,n,s,i){if(!le(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=iC(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function ao(e){return Ri(e)?ao(e.__v_raw):!!(e&&e.__v_isReactive)}function Ri(e){return!!(e&&e.__v_isReadonly)}function Rn(e){return!!(e&&e.__v_isShallow)}function Rl(e){return e?!!e.__v_raw:!1}function jt(e){const t=e&&e.__v_raw;return t?jt(t):e}function rC(e){return!Qt(e,"__v_skip")&&Object.isExtensible(e)&&Qf(e,"__v_skip",!0),e}const Ve=e=>le(e)?$o(e):e,cu=e=>le(e)?vw(e):e;function De(e){return e?e.__v_isRef===!0:!1}function $t(e){return _w(e,!1)}function mp(e){return _w(e,!0)}function _w(e,t){return De(e)?e:new oC(e,t)}class oC{constructor(t,n){this.dep=new dp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:jt(t),this._value=n?t:Ve(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Rn(t)||Ri(t);t=s?t:jt(t),Ii(t,n)&&(this._rawValue=t,this._value=s?t:Ve(t),this.dep.trigger())}}function ft(e){return De(e)?e.value:e}const aC={get:(e,t,n)=>t==="__v_raw"?e:ft(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return De(i)&&!De(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function yw(e){return ao(e)?e:new Proxy(e,aC)}function lC(e){const t=Tt(e)?new Array(e.length):{};for(const n in e)t[n]=bw(e,n);return t}class cC{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return HA(jt(this._object),this._key)}}class uC{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function hC(e,t,n){return De(e)?e:Dt(e)?new uC(e):le(e)&&arguments.length>1?bw(e,t,n):$t(e)}function bw(e,t,n){const s=e[t];return De(s)?s:new cC(e,t,n)}class fC{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new dp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=el-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&oe!==this)return iw(this,!0),!0}get value(){const t=this.dep.track();return aw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function dC(e,t,n=!1){let s,i;return Dt(e)?s=e:(s=e.get,i=e.set),new fC(s,i,n)}const dc={},uu=new WeakMap;let ir;function pC(e,t=!1,n=ir){if(n){let s=uu.get(n);s||uu.set(n,s=[]),s.push(e)}}function gC(e,t,n=se){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=k=>i?k:Rn(k)||i===!1||i===0?Vs(k,1):Vs(k);let u,f,d,p,m=!1,_=!1;if(De(e)?(f=()=>e.value,m=Rn(e)):ao(e)?(f=()=>c(e),m=!0):Tt(e)?(_=!0,m=e.some(k=>ao(k)||Rn(k)),f=()=>e.map(k=>{if(De(k))return k.value;if(ao(k))return c(k);if(Dt(k))return l?l(k,2):k()})):Dt(e)?t?f=l?()=>l(e,2):e:f=()=>{if(d){js();try{d()}finally{zs()}}const k=ir;ir=u;try{return l?l(e,3,[p]):e(p)}finally{ir=k}}:f=ls,t&&i){const k=f,O=i===!0?1/0:i;f=()=>Vs(k(),O)}const y=FA(),T=()=>{u.stop(),y&&y.active&&lp(y.effects,u)};if(r&&t){const k=t;t=(...O)=>{k(...O),T()}}let R=_?new Array(e.length).fill(dc):dc;const D=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(t){const O=u.run();if(i||m||(_?O.some((L,E)=>Ii(L,R[E])):Ii(O,R))){d&&d();const L=ir;ir=u;try{const E=[O,R===dc?void 0:_&&R[0]===dc?[]:R,p];R=O,l?l(t,3,E):t(...E)}finally{ir=L}}}else u.run()};return a&&a(D),u=new nw(f),u.scheduler=o?()=>o(D,!1):D,p=k=>pC(k,!1,u),d=u.onStop=()=>{const k=uu.get(u);if(k){if(l)l(k,4);else for(const O of k)O();uu.delete(u)}},t?s?D(!0):R=u.run():o?o(D.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function Vs(e,t=1/0,n){if(t<=0||!le(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,De(e))Vs(e.value,t,n);else if(Tt(e))for(let s=0;s<e.length;s++)Vs(e[s],t,n);else if(G0(e)||oo(e))e.forEach(s=>{Vs(s,t,n)});else if(J0(e)){for(const s in e)Vs(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Vs(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ml(e,t,n,s){try{return s?e(...s):e()}catch(i){uh(i,t,n)}}function Kn(e,t,n,s){if(Dt(e)){const i=Ml(e,t,n,s);return i&&X0(i)&&i.catch(r=>{uh(r,t,n)}),i}if(Tt(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Kn(e[r],t,n,s));return i}}function uh(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||se;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,c)===!1)return}a=a.parent}if(r){js(),Ml(r,null,10,[e,l,c]),zs();return}}mC(e,n,i,s,o)}function mC(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const on=[];let ns=-1;const lo=[];let fi=null,Gr=0;const ww=Promise.resolve();let hu=null;function _o(e){const t=hu||ww;return e?t.then(this?e.bind(this):e):t}function vC(e){let t=ns+1,n=on.length;for(;t<n;){const s=t+n>>>1,i=on[s],r=sl(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function vp(e){if(!(e.flags&1)){const t=sl(e),n=on[on.length-1];!n||!(e.flags&2)&&t>=sl(n)?on.push(e):on.splice(vC(t),0,e),e.flags|=1,Tw()}}function Tw(){hu||(hu=ww.then(Iw))}function _C(e){Tt(e)?lo.push(...e):fi&&e.id===-1?fi.splice(Gr+1,0,e):e.flags&1||(lo.push(e),e.flags|=1),Tw()}function qm(e,t,n=ns+1){for(;n<on.length;n++){const s=on[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;on.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ew(e){if(lo.length){const t=[...new Set(lo)].sort((n,s)=>sl(n)-sl(s));if(lo.length=0,fi){fi.push(...t);return}for(fi=t,Gr=0;Gr<fi.length;Gr++){const n=fi[Gr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fi=null,Gr=0}}const sl=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Iw(e){try{for(ns=0;ns<on.length;ns++){const t=on[ns];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ml(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ns<on.length;ns++){const t=on[ns];t&&(t.flags&=-2)}ns=-1,on.length=0,Ew(),hu=null,(on.length||lo.length)&&Iw()}}let ke=null,Sw=null;function fu(e){const t=ke;return ke=e,Sw=e&&e.type.__scopeId||null,t}function ve(e,t=ke,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&iv(-1);const r=fu(t);let o;try{o=e(...i)}finally{fu(r),s._d&&iv(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function du(e,t){if(ke===null)return e;const n=vh(ke),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=se]=t[i];r&&(Dt(r)&&(r={mounted:r,updated:r}),r.deep&&Vs(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Qi(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(js(),Kn(l,n,8,[e.el,a,e,t]),zs())}}const yC=Symbol("_vte"),Aw=e=>e.__isTeleport,di=Symbol("_leaveCb"),pc=Symbol("_enterCb");function bC(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bs(()=>{e.isMounted=!0}),Ow(()=>{e.isUnmounting=!0}),e}const An=[Function,Array],Cw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:An,onEnter:An,onAfterEnter:An,onEnterCancelled:An,onBeforeLeave:An,onLeave:An,onAfterLeave:An,onLeaveCancelled:An,onBeforeAppear:An,onAppear:An,onAfterAppear:An,onAppearCancelled:An},xw=e=>{const t=e.subTree;return t.component?xw(t.component):t},wC={name:"BaseTransition",props:Cw,setup(e,{slots:t}){const n=sT(),s=bC();return()=>{const i=t.default&&Dw(t.default(),!0);if(!i||!i.length)return;const r=Pw(i),o=jt(e),{mode:a}=o;if(s.isLeaving)return ff(r);const l=Km(r);if(!l)return ff(r);let c=nd(l,o,s,n,f=>c=f);l.type!==Xe&&il(l,c);let u=n.subTree&&Km(n.subTree);if(u&&u.type!==Xe&&!cr(l,u)&&xw(n).type!==Xe){let f=nd(u,o,s,n);if(il(u,f),a==="out-in"&&l.type!==Xe)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},ff(r);a==="in-out"&&l.type!==Xe?f.delayLeave=(d,p,m)=>{const _=kw(s,u);_[String(u.key)]=u,d[di]=()=>{p(),d[di]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Pw(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Xe){t=n;break}}return t}const TC=wC;function kw(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function nd(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:d,onLeave:p,onAfterLeave:m,onLeaveCancelled:_,onBeforeAppear:y,onAppear:T,onAfterAppear:R,onAppearCancelled:D}=t,k=String(e.key),O=kw(n,e),L=(w,A)=>{w&&Kn(w,s,9,A)},E=(w,A)=>{const x=A[1];L(w,A),Tt(w)?w.every(C=>C.length<=1)&&x():w.length<=1&&x()},b={mode:o,persisted:a,beforeEnter(w){let A=l;if(!n.isMounted)if(r)A=y||l;else return;w[di]&&w[di](!0);const x=O[k];x&&cr(e,x)&&x.el[di]&&x.el[di](),L(A,[w])},enter(w){let A=c,x=u,C=f;if(!n.isMounted)if(r)A=T||c,x=R||u,C=D||f;else return;let S=!1;const dt=w[pc]=Q=>{S||(S=!0,Q?L(C,[w]):L(x,[w]),b.delayedLeave&&b.delayedLeave(),w[pc]=void 0)};A?E(A,[w,dt]):dt()},leave(w,A){const x=String(e.key);if(w[pc]&&w[pc](!0),n.isUnmounting)return A();L(d,[w]);let C=!1;const S=w[di]=dt=>{C||(C=!0,A(),dt?L(_,[w]):L(m,[w]),w[di]=void 0,O[x]===e&&delete O[x])};O[x]=e,p?E(p,[w,S]):S()},clone(w){const A=nd(w,t,n,s,i);return i&&i(A),A}};return b}function ff(e){if(hh(e))return e=Mi(e),e.children=null,e}function Km(e){if(!hh(e))return Aw(e.type)&&e.children?Pw(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Dt(n.default))return n.default()}}function il(e,t){e.shapeFlag&6&&e.component?(e.transition=t,il(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Dw(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===ee?(o.patchFlag&128&&i++,s=s.concat(Dw(o.children,t,a))):(t||o.type!==Xe)&&s.push(a!=null?Mi(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function en(e,t){return Dt(e)?Me({name:e.name},t,{setup:e}):e}function Rw(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function La(e,t,n,s,i=!1){if(Tt(e)){e.forEach((m,_)=>La(m,t&&(Tt(t)?t[_]:t),n,s,i));return}if(co(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&La(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?vh(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===se?a.refs={}:a.refs,f=a.setupState,d=jt(f),p=f===se?()=>!1:m=>Qt(d,m);if(c!=null&&c!==l&&(de(c)?(u[c]=null,p(c)&&(f[c]=null)):De(c)&&(c.value=null)),Dt(l))Ml(l,a,12,[o,u]);else{const m=de(l),_=De(l);if(m||_){const y=()=>{if(e.f){const T=m?p(l)?f[l]:u[l]:l.value;i?Tt(T)&&lp(T,r):Tt(T)?T.includes(r)||T.push(r):m?(u[l]=[r],p(l)&&(f[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else m?(u[l]=o,p(l)&&(f[l]=o)):_&&(l.value=o,e.k&&(u[e.k]=o))};o?(y.id=-1,wn(y,n)):y()}}}lh().requestIdleCallback;lh().cancelIdleCallback;const co=e=>!!e.type.__asyncLoader,hh=e=>e.type.__isKeepAlive;function EC(e,t){Mw(e,"a",t)}function IC(e,t){Mw(e,"da",t)}function Mw(e,t,n=$e){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(fh(t,s,n),n){let i=n.parent;for(;i&&i.parent;)hh(i.parent.vnode)&&SC(s,t,n,i),i=i.parent}}function SC(e,t,n,s){const i=fh(t,e,s,!0);Fo(()=>{lp(s[t],i)},n)}function fh(e,t,n=$e,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{js();const a=Nl(n),l=Kn(t,n,e,o);return a(),zs(),l});return s?i.unshift(r):i.push(r),r}}const Js=e=>(t,n=$e)=>{(!al||e==="sp")&&fh(e,(...s)=>t(...s),n)},AC=Js("bm"),bs=Js("m"),CC=Js("bu"),xC=Js("u"),Ow=Js("bum"),Fo=Js("um"),PC=Js("sp"),kC=Js("rtg"),DC=Js("rtc");function RC(e,t=$e){fh("ec",e,t)}const _p="components",MC="directives";function Os(e,t){return yp(_p,e,!0,t)||e}const Nw=Symbol.for("v-ndc");function Lw(e){return de(e)?yp(_p,e,!1)||e:e||Nw}function OC(e){return yp(MC,e)}function yp(e,t,n=!0,s=!1){const i=ke||$e;if(i){const r=i.type;if(e===_p){const a=bx(r,!1);if(a&&(a===t||a===Nn(t)||a===ah(Nn(t))))return r}const o=Gm(i[e]||r[e],t)||Gm(i.appContext[e],t);return!o&&s?r:o}}function Gm(e,t){return e&&(e[t]||e[Nn(t)]||e[ah(Nn(t))])}function gn(e,t,n,s){let i;const r=n,o=Tt(e);if(o||de(e)){const a=o&&ao(e);let l=!1,c=!1;a&&(l=!Rn(e),c=Ri(e),e=ch(e)),i=new Array(e.length);for(let u=0,f=e.length;u<f;u++)i[u]=t(l?c?cu(Ve(e[u])):Ve(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(le(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}function dh(e,t,n={},s,i){if(ke.ce||ke.parent&&co(ke.parent)&&ke.parent.ce)return lt(),Ln(ee,null,[xt("slot",n,s&&s())],64);let r=e[t];r&&r._c&&(r._d=!1),lt();const o=r&&Vw(r(n)),a=n.key||o&&o.key,l=Ln(ee,{key:(a&&!Qs(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function Vw(e){return e.some(t=>ol(t)?!(t.type===Xe||t.type===ee&&!Vw(t.children)):!0)?e:null}function NC(e,t){const n={};for(const s in e)n[/[A-Z]/.test(s)?`on:${s}`:Bc(s)]=e[s];return n}const sd=e=>e?iT(e)?vh(e):sd(e.parent):null,Va=Me(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>sd(e.parent),$root:e=>sd(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fw(e),$forceUpdate:e=>e.f||(e.f=()=>{vp(e.update)}),$nextTick:e=>e.n||(e.n=_o.bind(e.proxy)),$watch:e=>nx.bind(e)}),df=(e,t)=>e!==se&&!e.__isScriptSetup&&Qt(e,t),LC={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(df(s,t))return o[t]=1,s[t];if(i!==se&&Qt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&Qt(c,t))return o[t]=3,r[t];if(n!==se&&Qt(n,t))return o[t]=4,n[t];id&&(o[t]=0)}}const u=Va[t];let f,d;if(u)return t==="$attrs"&&Ke(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==se&&Qt(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,Qt(d,t))return d[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return df(i,t)?(i[t]=n,!0):s!==se&&Qt(s,t)?(s[t]=n,!0):Qt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==se&&Qt(e,o)||df(t,o)||(a=r[0])&&Qt(a,o)||Qt(s,o)||Qt(Va,o)||Qt(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Qt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Xm(e){return Tt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let id=!0;function VC(e){const t=Fw(e),n=e.proxy,s=e.ctx;id=!1,t.beforeCreate&&Qm(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:p,updated:m,activated:_,deactivated:y,beforeDestroy:T,beforeUnmount:R,destroyed:D,unmounted:k,render:O,renderTracked:L,renderTriggered:E,errorCaptured:b,serverPrefetch:w,expose:A,inheritAttrs:x,components:C,directives:S,filters:dt}=t;if(c&&$C(c,s,null),o)for(const ot in o){const mt=o[ot];Dt(mt)&&(s[ot]=mt.bind(n))}if(i){const ot=i.call(n,n);le(ot)&&(e.data=$o(ot))}if(id=!0,r)for(const ot in r){const mt=r[ot],Nt=Dt(mt)?mt.bind(n,n):Dt(mt.get)?mt.get.bind(n,n):ls,z=!Dt(mt)&&Dt(mt.set)?mt.set.bind(n):ls,At=G({get:Nt,set:z});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>At.value,set:et=>At.value=et})}if(a)for(const ot in a)$w(a[ot],s,n,ot);if(l){const ot=Dt(l)?l.call(n):l;Reflect.ownKeys(ot).forEach(mt=>{Si(mt,ot[mt])})}u&&Qm(u,e,"c");function at(ot,mt){Tt(mt)?mt.forEach(Nt=>ot(Nt.bind(n))):mt&&ot(mt.bind(n))}if(at(AC,f),at(bs,d),at(CC,p),at(xC,m),at(EC,_),at(IC,y),at(RC,b),at(DC,L),at(kC,E),at(Ow,R),at(Fo,k),at(PC,w),Tt(A))if(A.length){const ot=e.exposed||(e.exposed={});A.forEach(mt=>{Object.defineProperty(ot,mt,{get:()=>n[mt],set:Nt=>n[mt]=Nt})})}else e.exposed||(e.exposed={});O&&e.render===ls&&(e.render=O),x!=null&&(e.inheritAttrs=x),C&&(e.components=C),S&&(e.directives=S),w&&Rw(e)}function $C(e,t,n=ls){Tt(e)&&(e=rd(e));for(const s in e){const i=e[s];let r;le(i)?"default"in i?r=mn(i.from||s,i.default,!0):r=mn(i.from||s):r=mn(i),De(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Qm(e,t,n){Kn(Tt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function $w(e,t,n,s){let i=s.includes(".")?Jw(n,s):()=>n[s];if(de(e)){const r=t[e];Dt(r)&&ln(i,r)}else if(Dt(e))ln(i,e.bind(n));else if(le(e))if(Tt(e))e.forEach(r=>$w(r,t,n,s));else{const r=Dt(e.handler)?e.handler.bind(n):t[e.handler];Dt(r)&&ln(i,r,e)}}function Fw(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>pu(l,c,o,!0)),pu(l,t,o)),le(t)&&r.set(t,l),l}function pu(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&pu(e,r,n,!0),i&&i.forEach(o=>pu(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=FC[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const FC={data:Jm,props:Zm,emits:Zm,methods:Ta,computed:Ta,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:Ta,directives:Ta,watch:UC,provide:Jm,inject:BC};function Jm(e,t){return t?e?function(){return Me(Dt(e)?e.call(this,this):e,Dt(t)?t.call(this,this):t)}:t:e}function BC(e,t){return Ta(rd(e),rd(t))}function rd(e){if(Tt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function rn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ta(e,t){return e?Me(Object.create(null),e,t):t}function Zm(e,t){return e?Tt(e)&&Tt(t)?[...new Set([...e,...t])]:Me(Object.create(null),Xm(e),Xm(t??{})):t}function UC(e,t){if(!e)return t;if(!t)return e;const n=Me(Object.create(null),e);for(const s in t)n[s]=rn(e[s],t[s]);return n}function Bw(){return{app:null,config:{isNativeTag:SA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HC=0;function jC(e,t){return function(s,i=null){Dt(s)||(s=Me({},s)),i!=null&&!le(i)&&(i=null);const r=Bw(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:HC++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:oT,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&Dt(u.install)?(o.add(u),u.install(c,...f)):Dt(u)&&(o.add(u),u(c,...f))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,f){return f?(r.components[u]=f,c):r.components[u]},directive(u,f){return f?(r.directives[u]=f,c):r.directives[u]},mount(u,f,d){if(!l){const p=c._ceVNode||xt(s,i);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),e(p,u,d),l=!0,c._container=u,u.__vue_app__=c,vh(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Kn(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return r.provides[u]=f,c},runWithContext(u){const f=uo;uo=c;try{return u()}finally{uo=f}}};return c}}let uo=null;function Si(e,t){if($e){let n=$e.provides;const s=$e.parent&&$e.parent.provides;s===n&&(n=$e.provides=Object.create(s)),n[e]=t}}function mn(e,t,n=!1){const s=$e||ke;if(s||uo){let i=uo?uo._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Dt(t)?t.call(s&&s.proxy):t}}const Uw={},Hw=()=>Object.create(Uw),jw=e=>Object.getPrototypeOf(e)===Uw;function zC(e,t,n,s=!1){const i={},r=Hw();e.propsDefaults=Object.create(null),zw(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:mw(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function WC(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=jt(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(ph(e.emitsOptions,d))continue;const p=t[d];if(l)if(Qt(r,d))p!==r[d]&&(r[d]=p,c=!0);else{const m=Nn(d);i[m]=od(l,a,m,p,e,!1)}else p!==r[d]&&(r[d]=p,c=!0)}}}else{zw(e,t,i,r)&&(c=!0);let u;for(const f in a)(!t||!Qt(t,f)&&((u=Ui(f))===f||!Qt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=od(l,a,f,void 0,e,!0)):delete i[f]);if(r!==a)for(const f in r)(!t||!Qt(t,f))&&(delete r[f],c=!0)}c&&Ls(e.attrs,"set","")}function zw(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ma(l))continue;const c=t[l];let u;i&&Qt(i,u=Nn(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:ph(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=jt(n),c=a||se;for(let u=0;u<r.length;u++){const f=r[u];n[f]=od(i,l,f,c[f],e,!Qt(c,f))}}return o}function od(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=Qt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Dt(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=Nl(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ui(n))&&(s=!0))}return s}const YC=new WeakMap;function Ww(e,t,n=!1){const s=n?YC:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!Dt(e)){const u=f=>{l=!0;const[d,p]=Ww(f,t,!0);Me(o,d),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return le(e)&&s.set(e,ro),ro;if(Tt(r))for(let u=0;u<r.length;u++){const f=Nn(r[u]);tv(f)&&(o[f]=se)}else if(r)for(const u in r){const f=Nn(u);if(tv(f)){const d=r[u],p=o[f]=Tt(d)||Dt(d)?{type:d}:Me({},d),m=p.type;let _=!1,y=!0;if(Tt(m))for(let T=0;T<m.length;++T){const R=m[T],D=Dt(R)&&R.name;if(D==="Boolean"){_=!0;break}else D==="String"&&(y=!1)}else _=Dt(m)&&m.name==="Boolean";p[0]=_,p[1]=y,(_||Qt(p,"default"))&&a.push(f)}}const c=[o,a];return le(e)&&s.set(e,c),c}function tv(e){return e[0]!=="$"&&!Ma(e)}const bp=e=>e[0]==="_"||e==="$stable",wp=e=>Tt(e)?e.map(rs):[rs(e)],qC=(e,t,n)=>{if(t._n)return t;const s=ve((...i)=>wp(t(...i)),n);return s._c=!1,s},Yw=(e,t,n)=>{const s=e._ctx;for(const i in e){if(bp(i))continue;const r=e[i];if(Dt(r))t[i]=qC(i,r,s);else if(r!=null){const o=wp(r);t[i]=()=>o}}},qw=(e,t)=>{const n=wp(t);e.slots.default=()=>n},Kw=(e,t,n)=>{for(const s in t)(n||!bp(s))&&(e[s]=t[s])},KC=(e,t,n)=>{const s=e.slots=Hw();if(e.vnode.shapeFlag&32){const i=t.__;i&&Qf(s,"__",i,!0);const r=t._;r?(Kw(s,t,n),n&&Qf(s,"_",r,!0)):Yw(t,s)}else t&&qw(e,t)},GC=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=se;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Kw(i,t,n):(r=!t.$stable,Yw(t,i)),o=t}else t&&(qw(e,t),o={default:1});if(r)for(const a in i)!bp(a)&&o[a]==null&&delete i[a]},wn=cx;function XC(e){return QC(e)}function QC(e,t){const n=lh();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:d,setScopeId:p=ls,insertStaticContent:m}=e,_=(P,M,N,B=null,H=null,U=null,it=void 0,J=null,K=!!M.dynamicChildren)=>{if(P===M)return;P&&!cr(P,M)&&(B=F(P),et(P,H,U,!0),P=null),M.patchFlag===-2&&(K=!1,M.dynamicChildren=null);const{type:W,ref:pt,shapeFlag:nt}=M;switch(W){case gh:y(P,M,N,B);break;case Xe:T(P,M,N,B);break;case gf:P==null&&R(M,N,B,it);break;case ee:C(P,M,N,B,H,U,it,J,K);break;default:nt&1?O(P,M,N,B,H,U,it,J,K):nt&6?S(P,M,N,B,H,U,it,J,K):(nt&64||nt&128)&&W.process(P,M,N,B,H,U,it,J,K,ct)}pt!=null&&H?La(pt,P&&P.ref,U,M||P,!M):pt==null&&P&&P.ref!=null&&La(P.ref,null,U,P,!0)},y=(P,M,N,B)=>{if(P==null)s(M.el=a(M.children),N,B);else{const H=M.el=P.el;M.children!==P.children&&c(H,M.children)}},T=(P,M,N,B)=>{P==null?s(M.el=l(M.children||""),N,B):M.el=P.el},R=(P,M,N,B)=>{[P.el,P.anchor]=m(P.children,M,N,B,P.el,P.anchor)},D=({el:P,anchor:M},N,B)=>{let H;for(;P&&P!==M;)H=d(P),s(P,N,B),P=H;s(M,N,B)},k=({el:P,anchor:M})=>{let N;for(;P&&P!==M;)N=d(P),i(P),P=N;i(M)},O=(P,M,N,B,H,U,it,J,K)=>{M.type==="svg"?it="svg":M.type==="math"&&(it="mathml"),P==null?L(M,N,B,H,U,it,J,K):w(P,M,H,U,it,J,K)},L=(P,M,N,B,H,U,it,J)=>{let K,W;const{props:pt,shapeFlag:nt,transition:ht,dirs:yt}=P;if(K=P.el=o(P.type,U,pt&&pt.is,pt),nt&8?u(K,P.children):nt&16&&b(P.children,K,null,B,H,pf(P,U),it,J),yt&&Qi(P,null,B,"created"),E(K,P,P.scopeId,it,B),pt){for(const It in pt)It!=="value"&&!Ma(It)&&r(K,It,null,pt[It],U,B);"value"in pt&&r(K,"value",null,pt.value,U),(W=pt.onVnodeBeforeMount)&&Zn(W,B,P)}yt&&Qi(P,null,B,"beforeMount");const vt=JC(H,ht);vt&&ht.beforeEnter(K),s(K,M,N),((W=pt&&pt.onVnodeMounted)||vt||yt)&&wn(()=>{W&&Zn(W,B,P),vt&&ht.enter(K),yt&&Qi(P,null,B,"mounted")},H)},E=(P,M,N,B,H)=>{if(N&&p(P,N),B)for(let U=0;U<B.length;U++)p(P,B[U]);if(H){let U=H.subTree;if(M===U||tT(U.type)&&(U.ssContent===M||U.ssFallback===M)){const it=H.vnode;E(P,it,it.scopeId,it.slotScopeIds,H.parent)}}},b=(P,M,N,B,H,U,it,J,K=0)=>{for(let W=K;W<P.length;W++){const pt=P[W]=J?pi(P[W]):rs(P[W]);_(null,pt,M,N,B,H,U,it,J)}},w=(P,M,N,B,H,U,it)=>{const J=M.el=P.el;let{patchFlag:K,dynamicChildren:W,dirs:pt}=M;K|=P.patchFlag&16;const nt=P.props||se,ht=M.props||se;let yt;if(N&&Ji(N,!1),(yt=ht.onVnodeBeforeUpdate)&&Zn(yt,N,M,P),pt&&Qi(M,P,N,"beforeUpdate"),N&&Ji(N,!0),(nt.innerHTML&&ht.innerHTML==null||nt.textContent&&ht.textContent==null)&&u(J,""),W?A(P.dynamicChildren,W,J,N,B,pf(M,H),U):it||mt(P,M,J,null,N,B,pf(M,H),U,!1),K>0){if(K&16)x(J,nt,ht,N,H);else if(K&2&&nt.class!==ht.class&&r(J,"class",null,ht.class,H),K&4&&r(J,"style",nt.style,ht.style,H),K&8){const vt=M.dynamicProps;for(let It=0;It<vt.length;It++){const Vt=vt[It],we=nt[Vt],Te=ht[Vt];(Te!==we||Vt==="value")&&r(J,Vt,we,Te,H,N)}}K&1&&P.children!==M.children&&u(J,M.children)}else!it&&W==null&&x(J,nt,ht,N,H);((yt=ht.onVnodeUpdated)||pt)&&wn(()=>{yt&&Zn(yt,N,M,P),pt&&Qi(M,P,N,"updated")},B)},A=(P,M,N,B,H,U,it)=>{for(let J=0;J<M.length;J++){const K=P[J],W=M[J],pt=K.el&&(K.type===ee||!cr(K,W)||K.shapeFlag&198)?f(K.el):N;_(K,W,pt,null,B,H,U,it,!0)}},x=(P,M,N,B,H)=>{if(M!==N){if(M!==se)for(const U in M)!Ma(U)&&!(U in N)&&r(P,U,M[U],null,H,B);for(const U in N){if(Ma(U))continue;const it=N[U],J=M[U];it!==J&&U!=="value"&&r(P,U,J,it,H,B)}"value"in N&&r(P,"value",M.value,N.value,H)}},C=(P,M,N,B,H,U,it,J,K)=>{const W=M.el=P?P.el:a(""),pt=M.anchor=P?P.anchor:a("");let{patchFlag:nt,dynamicChildren:ht,slotScopeIds:yt}=M;yt&&(J=J?J.concat(yt):yt),P==null?(s(W,N,B),s(pt,N,B),b(M.children||[],N,pt,H,U,it,J,K)):nt>0&&nt&64&&ht&&P.dynamicChildren?(A(P.dynamicChildren,ht,N,H,U,it,J),(M.key!=null||H&&M===H.subTree)&&Gw(P,M,!0)):mt(P,M,N,pt,H,U,it,J,K)},S=(P,M,N,B,H,U,it,J,K)=>{M.slotScopeIds=J,P==null?M.shapeFlag&512?H.ctx.activate(M,N,B,it,K):dt(M,N,B,H,U,it,K):Q(P,M,K)},dt=(P,M,N,B,H,U,it)=>{const J=P.component=gx(P,B,H);if(hh(P)&&(J.ctx.renderer=ct),mx(J,!1,it),J.asyncDep){if(H&&H.registerDep(J,at,it),!P.el){const K=J.subTree=xt(Xe);T(null,K,M,N)}}else at(J,P,M,N,H,U,it)},Q=(P,M,N)=>{const B=M.component=P.component;if(ax(P,M,N))if(B.asyncDep&&!B.asyncResolved){ot(B,M,N);return}else B.next=M,B.update();else M.el=P.el,B.vnode=M},at=(P,M,N,B,H,U,it)=>{const J=()=>{if(P.isMounted){let{next:nt,bu:ht,u:yt,parent:vt,vnode:It}=P;{const Ce=Xw(P);if(Ce){nt&&(nt.el=It.el,ot(P,nt,it)),Ce.asyncDep.then(()=>{P.isUnmounted||J()});return}}let Vt=nt,we;Ji(P,!1),nt?(nt.el=It.el,ot(P,nt,it)):nt=It,ht&&Uc(ht),(we=nt.props&&nt.props.onVnodeBeforeUpdate)&&Zn(we,vt,nt,It),Ji(P,!0);const Te=nv(P),un=P.subTree;P.subTree=Te,_(un,Te,f(un.el),F(un),P,H,U),nt.el=Te.el,Vt===null&&lx(P,Te.el),yt&&wn(yt,H),(we=nt.props&&nt.props.onVnodeUpdated)&&wn(()=>Zn(we,vt,nt,It),H)}else{let nt;const{el:ht,props:yt}=M,{bm:vt,m:It,parent:Vt,root:we,type:Te}=P,un=co(M);Ji(P,!1),vt&&Uc(vt),!un&&(nt=yt&&yt.onVnodeBeforeMount)&&Zn(nt,Vt,M),Ji(P,!0);{we.ce&&we.ce._def.shadowRoot!==!1&&we.ce._injectChildStyle(Te);const Ce=P.subTree=nv(P);_(null,Ce,N,B,P,H,U),M.el=Ce.el}if(It&&wn(It,H),!un&&(nt=yt&&yt.onVnodeMounted)){const Ce=M;wn(()=>Zn(nt,Vt,Ce),H)}(M.shapeFlag&256||Vt&&co(Vt.vnode)&&Vt.vnode.shapeFlag&256)&&P.a&&wn(P.a,H),P.isMounted=!0,M=N=B=null}};P.scope.on();const K=P.effect=new nw(J);P.scope.off();const W=P.update=K.run.bind(K),pt=P.job=K.runIfDirty.bind(K);pt.i=P,pt.id=P.uid,K.scheduler=()=>vp(pt),Ji(P,!0),W()},ot=(P,M,N)=>{M.component=P;const B=P.vnode.props;P.vnode=M,P.next=null,WC(P,M.props,B,N),GC(P,M.children,N),js(),qm(P),zs()},mt=(P,M,N,B,H,U,it,J,K=!1)=>{const W=P&&P.children,pt=P?P.shapeFlag:0,nt=M.children,{patchFlag:ht,shapeFlag:yt}=M;if(ht>0){if(ht&128){z(W,nt,N,B,H,U,it,J,K);return}else if(ht&256){Nt(W,nt,N,B,H,U,it,J,K);return}}yt&8?(pt&16&&Ht(W,H,U),nt!==W&&u(N,nt)):pt&16?yt&16?z(W,nt,N,B,H,U,it,J,K):Ht(W,H,U,!0):(pt&8&&u(N,""),yt&16&&b(nt,N,B,H,U,it,J,K))},Nt=(P,M,N,B,H,U,it,J,K)=>{P=P||ro,M=M||ro;const W=P.length,pt=M.length,nt=Math.min(W,pt);let ht;for(ht=0;ht<nt;ht++){const yt=M[ht]=K?pi(M[ht]):rs(M[ht]);_(P[ht],yt,N,null,H,U,it,J,K)}W>pt?Ht(P,H,U,!0,!1,nt):b(M,N,B,H,U,it,J,K,nt)},z=(P,M,N,B,H,U,it,J,K)=>{let W=0;const pt=M.length;let nt=P.length-1,ht=pt-1;for(;W<=nt&&W<=ht;){const yt=P[W],vt=M[W]=K?pi(M[W]):rs(M[W]);if(cr(yt,vt))_(yt,vt,N,null,H,U,it,J,K);else break;W++}for(;W<=nt&&W<=ht;){const yt=P[nt],vt=M[ht]=K?pi(M[ht]):rs(M[ht]);if(cr(yt,vt))_(yt,vt,N,null,H,U,it,J,K);else break;nt--,ht--}if(W>nt){if(W<=ht){const yt=ht+1,vt=yt<pt?M[yt].el:B;for(;W<=ht;)_(null,M[W]=K?pi(M[W]):rs(M[W]),N,vt,H,U,it,J,K),W++}}else if(W>ht)for(;W<=nt;)et(P[W],H,U,!0),W++;else{const yt=W,vt=W,It=new Map;for(W=vt;W<=ht;W++){const Ee=M[W]=K?pi(M[W]):rs(M[W]);Ee.key!=null&&It.set(Ee.key,W)}let Vt,we=0;const Te=ht-vt+1;let un=!1,Ce=0;const Hn=new Array(Te);for(W=0;W<Te;W++)Hn[W]=0;for(W=yt;W<=nt;W++){const Ee=P[W];if(we>=Te){et(Ee,H,U,!0);continue}let sn;if(Ee.key!=null)sn=It.get(Ee.key);else for(Vt=vt;Vt<=ht;Vt++)if(Hn[Vt-vt]===0&&cr(Ee,M[Vt])){sn=Vt;break}sn===void 0?et(Ee,H,U,!0):(Hn[sn-vt]=W+1,sn>=Ce?Ce=sn:un=!0,_(Ee,M[sn],N,null,H,U,it,J,K),we++)}const Yi=un?ZC(Hn):ro;for(Vt=Yi.length-1,W=Te-1;W>=0;W--){const Ee=vt+W,sn=M[Ee],Y=Ee+1<pt?M[Ee+1].el:B;Hn[W]===0?_(null,sn,N,Y,H,U,it,J,K):un&&(Vt<0||W!==Yi[Vt]?At(sn,N,Y,2):Vt--)}}},At=(P,M,N,B,H=null)=>{const{el:U,type:it,transition:J,children:K,shapeFlag:W}=P;if(W&6){At(P.component.subTree,M,N,B);return}if(W&128){P.suspense.move(M,N,B);return}if(W&64){it.move(P,M,N,ct);return}if(it===ee){s(U,M,N);for(let nt=0;nt<K.length;nt++)At(K[nt],M,N,B);s(P.anchor,M,N);return}if(it===gf){D(P,M,N);return}if(B!==2&&W&1&&J)if(B===0)J.beforeEnter(U),s(U,M,N),wn(()=>J.enter(U),H);else{const{leave:nt,delayLeave:ht,afterLeave:yt}=J,vt=()=>{P.ctx.isUnmounted?i(U):s(U,M,N)},It=()=>{nt(U,()=>{vt(),yt&&yt()})};ht?ht(U,vt,It):It()}else s(U,M,N)},et=(P,M,N,B=!1,H=!1)=>{const{type:U,props:it,ref:J,children:K,dynamicChildren:W,shapeFlag:pt,patchFlag:nt,dirs:ht,cacheIndex:yt}=P;if(nt===-2&&(H=!1),J!=null&&(js(),La(J,null,N,P,!0),zs()),yt!=null&&(M.renderCache[yt]=void 0),pt&256){M.ctx.deactivate(P);return}const vt=pt&1&&ht,It=!co(P);let Vt;if(It&&(Vt=it&&it.onVnodeBeforeUnmount)&&Zn(Vt,M,P),pt&6)Yt(P.component,N,B);else{if(pt&128){P.suspense.unmount(N,B);return}vt&&Qi(P,null,M,"beforeUnmount"),pt&64?P.type.remove(P,M,N,ct,B):W&&!W.hasOnce&&(U!==ee||nt>0&&nt&64)?Ht(W,M,N,!1,!0):(U===ee&&nt&384||!H&&pt&16)&&Ht(K,M,N),B&&Pt(P)}(It&&(Vt=it&&it.onVnodeUnmounted)||vt)&&wn(()=>{Vt&&Zn(Vt,M,P),vt&&Qi(P,null,M,"unmounted")},N)},Pt=P=>{const{type:M,el:N,anchor:B,transition:H}=P;if(M===ee){Rt(N,B);return}if(M===gf){k(P);return}const U=()=>{i(N),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(P.shapeFlag&1&&H&&!H.persisted){const{leave:it,delayLeave:J}=H,K=()=>it(N,U);J?J(P.el,U,K):K()}else U()},Rt=(P,M)=>{let N;for(;P!==M;)N=d(P),i(P),P=N;i(M)},Yt=(P,M,N)=>{const{bum:B,scope:H,job:U,subTree:it,um:J,m:K,a:W,parent:pt,slots:{__:nt}}=P;ev(K),ev(W),B&&Uc(B),pt&&Tt(nt)&&nt.forEach(ht=>{pt.renderCache[ht]=void 0}),H.stop(),U&&(U.flags|=8,et(it,P,M,N)),J&&wn(J,M),wn(()=>{P.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Ht=(P,M,N,B=!1,H=!1,U=0)=>{for(let it=U;it<P.length;it++)et(P[it],M,N,B,H)},F=P=>{if(P.shapeFlag&6)return F(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const M=d(P.anchor||P.el),N=M&&M[yC];return N?d(N):M};let st=!1;const Z=(P,M,N)=>{P==null?M._vnode&&et(M._vnode,null,null,!0):_(M._vnode||null,P,M,null,null,null,N),M._vnode=P,st||(st=!0,qm(),Ew(),st=!1)},ct={p:_,um:et,m:At,r:Pt,mt:dt,mc:b,pc:mt,pbc:A,n:F,o:e};return{render:Z,hydrate:void 0,createApp:jC(Z)}}function pf({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ji({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function JC(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Gw(e,t,n=!1){const s=e.children,i=t.children;if(Tt(s)&&Tt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=pi(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&Gw(o,a)),a.type===gh&&(a.el=o.el),a.type===Xe&&!a.el&&(a.el=o.el)}}function ZC(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function Xw(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Xw(t)}function ev(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const tx=Symbol.for("v-scx"),ex=()=>mn(tx);function Qw(e,t){return Tp(e,null,t)}function ln(e,t,n){return Tp(e,t,n)}function Tp(e,t,n=se){const{immediate:s,deep:i,flush:r,once:o}=n,a=Me({},n),l=t&&s||!t&&r!=="post";let c;if(al){if(r==="sync"){const p=ex();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=ls,p.resume=ls,p.pause=ls,p}}const u=$e;a.call=(p,m,_)=>Kn(p,u,m,_);let f=!1;r==="post"?a.scheduler=p=>{wn(p,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(p,m)=>{m?p():vp(p)}),a.augmentJob=p=>{t&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=gC(e,t,a);return al&&(c?c.push(d):l&&d()),d}function nx(e,t,n){const s=this.proxy,i=de(e)?e.includes(".")?Jw(s,e):()=>s[e]:e.bind(s,s);let r;Dt(t)?r=t:(r=t.handler,n=t);const o=Nl(this),a=Tp(i,r.bind(s),n);return o(),a}function Jw(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const sx=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Nn(t)}Modifiers`]||e[`${Ui(t)}Modifiers`];function ix(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||se;let i=n;const r=t.startsWith("update:"),o=r&&sx(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>de(u)?u.trim():u)),o.number&&(i=n.map(Jf)));let a,l=s[a=Bc(t)]||s[a=Bc(Nn(t))];!l&&r&&(l=s[a=Bc(Ui(t))]),l&&Kn(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Kn(c,e,6,i)}}function Zw(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!Dt(e)){const l=c=>{const u=Zw(c,t,!0);u&&(a=!0,Me(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(le(e)&&s.set(e,null),null):(Tt(r)?r.forEach(l=>o[l]=null):Me(o,r),le(e)&&s.set(e,o),o)}function ph(e,t){return!e||!ih(t)?!1:(t=t.slice(2).replace(/Once$/,""),Qt(e,t[0].toLowerCase()+t.slice(1))||Qt(e,Ui(t))||Qt(e,t))}function nv(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:d,setupState:p,ctx:m,inheritAttrs:_}=e,y=fu(e);let T,R;try{if(n.shapeFlag&4){const k=i||s,O=k;T=rs(c.call(O,k,u,f,p,d,m)),R=a}else{const k=t;T=rs(k.length>1?k(f,{attrs:a,slots:o,emit:l}):k(f,null)),R=t.props?a:rx(a)}}catch(k){$a.length=0,uh(k,e,1),T=xt(Xe)}let D=T;if(R&&_!==!1){const k=Object.keys(R),{shapeFlag:O}=D;k.length&&O&7&&(r&&k.some(ap)&&(R=ox(R,r)),D=Mi(D,R,!1,!0))}return n.dirs&&(D=Mi(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&il(D,n.transition),T=D,fu(y),T}const rx=e=>{let t;for(const n in e)(n==="class"||n==="style"||ih(n))&&((t||(t={}))[n]=e[n]);return t},ox=(e,t)=>{const n={};for(const s in e)(!ap(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function ax(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?sv(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(o[d]!==s[d]&&!ph(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?sv(s,o,c):!0:!!o;return!1}function sv(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!ph(n,r))return!0}return!1}function lx({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const tT=e=>e.__isSuspense;function cx(e,t){t&&t.pendingBranch?Tt(e)?t.effects.push(...e):t.effects.push(e):_C(e)}const ee=Symbol.for("v-fgt"),gh=Symbol.for("v-txt"),Xe=Symbol.for("v-cmt"),gf=Symbol.for("v-stc"),$a=[];let Tn=null;function lt(e=!1){$a.push(Tn=e?null:[])}function ux(){$a.pop(),Tn=$a[$a.length-1]||null}let rl=1;function iv(e,t=!1){rl+=e,e<0&&Tn&&t&&(Tn.hasOnce=!0)}function eT(e){return e.dynamicChildren=rl>0?Tn||ro:null,ux(),rl>0&&Tn&&Tn.push(e),e}function gt(e,t,n,s,i,r){return eT(X(e,t,n,s,i,r,!0))}function Ln(e,t,n,s,i){return eT(xt(e,t,n,s,i,!0))}function ol(e){return e?e.__v_isVNode===!0:!1}function cr(e,t){return e.type===t.type&&e.key===t.key}const nT=({key:e})=>e??null,Hc=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?de(e)||De(e)||Dt(e)?{i:ke,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,s=0,i=null,r=e===ee?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&nT(t),ref:t&&Hc(t),scopeId:Sw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ke};return a?(Ep(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=de(n)?8:16),rl>0&&!o&&Tn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Tn.push(l),l}const xt=hx;function hx(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Nw)&&(e=Xe),ol(e)){const a=Mi(e,t,!0);return n&&Ep(a,n),rl>0&&!r&&Tn&&(a.shapeFlag&6?Tn[Tn.indexOf(e)]=a:Tn.push(a)),a.patchFlag=-2,a}if(wx(e)&&(e=e.__vccOpts),t){t=fx(t);let{class:a,style:l}=t;a&&!de(a)&&(t.class=ie(a)),le(l)&&(Rl(l)&&!Tt(l)&&(l=Me({},l)),t.style=Je(l))}const o=de(e)?1:tT(e)?128:Aw(e)?64:le(e)?4:Dt(e)?2:0;return X(e,t,n,s,i,o,r,!0)}function fx(e){return e?Rl(e)||jw(e)?Me({},e):e:null}function Mi(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Ol(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&nT(c),ref:t&&t.ref?n&&r?Tt(r)?r.concat(Hc(t)):[r,Hc(t)]:Hc(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ee?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Mi(e.ssContent),ssFallback:e.ssFallback&&Mi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&il(u,l.clone(u)),u}function mh(e=" ",t=0){return xt(gh,null,e,t)}function Be(e="",t=!1){return t?(lt(),Ln(Xe,null,e)):xt(Xe,null,e)}function rs(e){return e==null||typeof e=="boolean"?xt(Xe):Tt(e)?xt(ee,null,e.slice()):ol(e)?pi(e):xt(gh,null,String(e))}function pi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Mi(e)}function Ep(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Tt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Ep(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!jw(t)?t._ctx=ke:i===3&&ke&&(ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Dt(t)?(t={default:t,_ctx:ke},n=32):(t=String(t),s&64?(n=16,t=[mh(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ol(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=ie([t.class,s.class]));else if(i==="style")t.style=Je([t.style,s.style]);else if(ih(i)){const r=t[i],o=s[i];o&&r!==o&&!(Tt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Zn(e,t,n,s=null){Kn(e,t,7,[n,s])}const dx=Bw();let px=0;function gx(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||dx,r={uid:px++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $A(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ww(s,i),emitsOptions:Zw(s,i),emit:null,emitted:null,propsDefaults:se,inheritAttrs:s.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ix.bind(null,r),e.ce&&e.ce(r),r}let $e=null;const sT=()=>$e||ke;let gu,ad;{const e=lh(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};gu=t("__VUE_INSTANCE_SETTERS__",n=>$e=n),ad=t("__VUE_SSR_SETTERS__",n=>al=n)}const Nl=e=>{const t=$e;return gu(e),e.scope.on(),()=>{e.scope.off(),gu(t)}},rv=()=>{$e&&$e.scope.off(),gu(null)};function iT(e){return e.vnode.shapeFlag&4}let al=!1;function mx(e,t=!1,n=!1){t&&ad(t);const{props:s,children:i}=e.vnode,r=iT(e);zC(e,s,r,t),KC(e,i,n||t);const o=r?vx(e,t):void 0;return t&&ad(!1),o}function vx(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,LC);const{setup:s}=n;if(s){js();const i=e.setupContext=s.length>1?yx(e):null,r=Nl(e),o=Ml(s,e,0,[e.props,i]),a=X0(o);if(zs(),r(),(a||e.sp)&&!co(e)&&Rw(e),a){if(o.then(rv,rv),t)return o.then(l=>{ov(e,l)}).catch(l=>{uh(l,e,0)});e.asyncDep=o}else ov(e,o)}else rT(e)}function ov(e,t,n){Dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:le(t)&&(e.setupState=yw(t)),rT(e)}function rT(e,t,n){const s=e.type;e.render||(e.render=s.render||ls);{const i=Nl(e);js();try{VC(e)}finally{zs(),i()}}}const _x={get(e,t){return Ke(e,"get",""),e[t]}};function yx(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,_x),slots:e.slots,emit:e.emit,expose:t}}function vh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(yw(rC(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Va)return Va[n](e)},has(t,n){return n in t||n in Va}})):e.proxy}function bx(e,t=!0){return Dt(e)?e.displayName||e.name:e.name||t&&e.__name}function wx(e){return Dt(e)&&"__vccOpts"in e}const G=(e,t)=>dC(e,t,al);function yo(e,t,n){const s=arguments.length;return s===2?le(t)&&!Tt(t)?ol(t)?xt(e,null,[t]):xt(e,t):xt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ol(n)&&(n=[n]),xt(e,t,n))}const oT="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ld;const av=typeof window<"u"&&window.trustedTypes;if(av)try{ld=av.createPolicy("vue",{createHTML:e=>e})}catch{}const aT=ld?e=>ld.createHTML(e):e=>e,Tx="http://www.w3.org/2000/svg",Ex="http://www.w3.org/1998/Math/MathML",Ms=typeof document<"u"?document:null,lv=Ms&&Ms.createElement("template"),Ix={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Ms.createElementNS(Tx,e):t==="mathml"?Ms.createElementNS(Ex,e):n?Ms.createElement(e,{is:n}):Ms.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Ms.createTextNode(e),createComment:e=>Ms.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ms.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{lv.innerHTML=aT(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=lv.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},oi="transition",fa="animation",ll=Symbol("_vtc"),lT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Sx=Me({},Cw,lT),Ax=e=>(e.displayName="Transition",e.props=Sx,e),_h=Ax((e,{slots:t})=>yo(TC,Cx(e),t)),Zi=(e,t=[])=>{Tt(e)?e.forEach(n=>n(...t)):e&&e(...t)},cv=e=>e?Tt(e)?e.some(t=>t.length>1):e.length>1:!1;function Cx(e){const t={};for(const C in e)C in lT||(t[C]=e[C]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=xx(i),_=m&&m[0],y=m&&m[1],{onBeforeEnter:T,onEnter:R,onEnterCancelled:D,onLeave:k,onLeaveCancelled:O,onBeforeAppear:L=T,onAppear:E=R,onAppearCancelled:b=D}=t,w=(C,S,dt,Q)=>{C._enterCancelled=Q,tr(C,S?u:a),tr(C,S?c:o),dt&&dt()},A=(C,S)=>{C._isLeaving=!1,tr(C,f),tr(C,p),tr(C,d),S&&S()},x=C=>(S,dt)=>{const Q=C?E:R,at=()=>w(S,C,dt);Zi(Q,[S,at]),uv(()=>{tr(S,C?l:r),xs(S,C?u:a),cv(Q)||hv(S,s,_,at)})};return Me(t,{onBeforeEnter(C){Zi(T,[C]),xs(C,r),xs(C,o)},onBeforeAppear(C){Zi(L,[C]),xs(C,l),xs(C,c)},onEnter:x(!1),onAppear:x(!0),onLeave(C,S){C._isLeaving=!0;const dt=()=>A(C,S);xs(C,f),C._enterCancelled?(xs(C,d),pv()):(pv(),xs(C,d)),uv(()=>{C._isLeaving&&(tr(C,f),xs(C,p),cv(k)||hv(C,s,y,dt))}),Zi(k,[C,dt])},onEnterCancelled(C){w(C,!1,void 0,!0),Zi(D,[C])},onAppearCancelled(C){w(C,!0,void 0,!0),Zi(b,[C])},onLeaveCancelled(C){A(C),Zi(O,[C])}})}function xx(e){if(e==null)return null;if(le(e))return[mf(e.enter),mf(e.leave)];{const t=mf(e);return[t,t]}}function mf(e){return kA(e)}function xs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ll]||(e[ll]=new Set)).add(t)}function tr(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[ll];n&&(n.delete(t),n.size||(e[ll]=void 0))}function uv(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Px=0;function hv(e,t,n,s){const i=e._endId=++Px,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=kx(e,t);if(!o)return s();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,d),r()},d=p=>{p.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,d)}function kx(e,t){const n=window.getComputedStyle(e),s=m=>(n[m]||"").split(", "),i=s(`${oi}Delay`),r=s(`${oi}Duration`),o=fv(i,r),a=s(`${fa}Delay`),l=s(`${fa}Duration`),c=fv(a,l);let u=null,f=0,d=0;t===oi?o>0&&(u=oi,f=o,d=r.length):t===fa?c>0&&(u=fa,f=c,d=l.length):(f=Math.max(o,c),u=f>0?o>c?oi:fa:null,d=u?u===oi?r.length:l.length:0);const p=u===oi&&/\b(transform|all)(,|$)/.test(s(`${oi}Property`).toString());return{type:u,timeout:f,propCount:d,hasTransform:p}}function fv(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>dv(n)+dv(e[s])))}function dv(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function pv(){return document.body.offsetHeight}function Dx(e,t,n){const s=e[ll];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const gv=Symbol("_vod"),Rx=Symbol("_vsh"),Mx=Symbol(""),Ox=/(^|;)\s*display\s*:/;function Nx(e,t,n){const s=e.style,i=de(n);let r=!1;if(n&&!i){if(t)if(de(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&jc(s,a,"")}else for(const o in t)n[o]==null&&jc(s,o,"");for(const o in n)o==="display"&&(r=!0),jc(s,o,n[o])}else if(i){if(t!==n){const o=s[Mx];o&&(n+=";"+o),s.cssText=n,r=Ox.test(n)}}else t&&e.removeAttribute("style");gv in e&&(e[gv]=r?s.display:"",e[Rx]&&(s.display="none"))}const mv=/\s*!important$/;function jc(e,t,n){if(Tt(n))n.forEach(s=>jc(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Lx(e,t);mv.test(n)?e.setProperty(Ui(s),n.replace(mv,""),"important"):e[s]=n}}const vv=["Webkit","Moz","ms"],vf={};function Lx(e,t){const n=vf[t];if(n)return n;let s=Nn(t);if(s!=="filter"&&s in e)return vf[t]=s;s=ah(s);for(let i=0;i<vv.length;i++){const r=vv[i]+s;if(r in e)return vf[t]=r}return t}const _v="http://www.w3.org/1999/xlink";function yv(e,t,n,s,i,r=VA(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(_v,t.slice(6,t.length)):e.setAttributeNS(_v,t,n):n==null||r&&!Z0(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Qs(n)?String(n):n)}function bv(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?aT(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Z0(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Xr(e,t,n,s){e.addEventListener(t,n,s)}function Vx(e,t,n,s){e.removeEventListener(t,n,s)}const wv=Symbol("_vei");function $x(e,t,n,s,i=null){const r=e[wv]||(e[wv]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=Fx(t);if(s){const c=r[t]=Hx(s,i);Xr(e,a,c,l)}else o&&(Vx(e,a,o,l),r[t]=void 0)}}const Tv=/(?:Once|Passive|Capture)$/;function Fx(e){let t;if(Tv.test(e)){t={};let s;for(;s=e.match(Tv);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ui(e.slice(2)),t]}let _f=0;const Bx=Promise.resolve(),Ux=()=>_f||(Bx.then(()=>_f=0),_f=Date.now());function Hx(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Kn(jx(s,n.value),t,5,[s])};return n.value=e,n.attached=Ux(),n}function jx(e,t){if(Tt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Ev=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zx=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?Dx(e,s,o):t==="style"?Nx(e,n,s):ih(t)?ap(t)||$x(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Wx(e,t,s,o))?(bv(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&yv(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!de(s))?bv(e,Nn(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),yv(e,t,s,o))};function Wx(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ev(t)&&Dt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ev(t)&&de(n)?!1:t in e}const Iv=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Tt(t)?n=>Uc(t,n):t};function Yx(e){e.target.composing=!0}function Sv(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yf=Symbol("_assign"),Av={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[yf]=Iv(i);const r=s||i.props&&i.props.type==="number";Xr(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Jf(a)),e[yf](a)}),n&&Xr(e,"change",()=>{e.value=e.value.trim()}),t||(Xr(e,"compositionstart",Yx),Xr(e,"compositionend",Sv),Xr(e,"change",Sv))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[yf]=Iv(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Jf(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},qx=["ctrl","shift","alt","meta"],Kx={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>qx.some(n=>e[`${n}Key`]&&!t.includes(n))},Ip=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=Kx[t[o]];if(a&&a(i,t))return}return e(i,...r)})},Gx={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Cv=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=Ui(i.key);if(t.some(o=>o===r||Gx[o]===r))return e(i)})},Xx=Me({patchProp:zx},Ix);let xv;function Qx(){return xv||(xv=XC(Xx))}const Jx=(...e)=>{const t=Qx().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=tP(s);if(!i)return;const r=t._component;!Dt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Zx(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Zx(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function tP(e){return de(e)?document.querySelector(e):e}const Hi=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},eP={__name:"App",setup(e){return(t,n)=>{const s=Os("router-view");return lt(),Ln(s)}}},nP=Hi(eP,[["__scopeId","data-v-9e390217"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Qr=typeof document<"u";function cT(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function sP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&cT(e.default)}const Xt=Object.assign;function bf(e,t){const n={};for(const s in t){const i=t[s];n[s]=Gn(i)?i.map(e):e(i)}return n}const Fa=()=>{},Gn=Array.isArray,uT=/#/g,iP=/&/g,rP=/\//g,oP=/=/g,aP=/\?/g,hT=/\+/g,lP=/%5B/g,cP=/%5D/g,fT=/%5E/g,uP=/%60/g,dT=/%7B/g,hP=/%7C/g,pT=/%7D/g,fP=/%20/g;function Sp(e){return encodeURI(""+e).replace(hP,"|").replace(lP,"[").replace(cP,"]")}function dP(e){return Sp(e).replace(dT,"{").replace(pT,"}").replace(fT,"^")}function cd(e){return Sp(e).replace(hT,"%2B").replace(fP,"+").replace(uT,"%23").replace(iP,"%26").replace(uP,"`").replace(dT,"{").replace(pT,"}").replace(fT,"^")}function pP(e){return cd(e).replace(oP,"%3D")}function gP(e){return Sp(e).replace(uT,"%23").replace(aP,"%3F")}function mP(e){return e==null?"":gP(e).replace(rP,"%2F")}function cl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const vP=/\/$/,_P=e=>e.replace(vP,"");function wf(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=TP(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:cl(o)}}function yP(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Pv(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function bP(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&bo(t.matched[s],n.matched[i])&&gT(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function bo(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gT(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!wP(e[n],t[n]))return!1;return!0}function wP(e,t){return Gn(e)?kv(e,t):Gn(t)?kv(t,e):e===t}function kv(e,t){return Gn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function TP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const ai={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ul;(function(e){e.pop="pop",e.push="push"})(ul||(ul={}));var Ba;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ba||(Ba={}));function EP(e){if(!e)if(Qr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),_P(e)}const IP=/^[^#]+#/;function SP(e,t){return e.replace(IP,"#")+t}function AP(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const yh=()=>({left:window.scrollX,top:window.scrollY});function CP(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=AP(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Dv(e,t){return(history.state?history.state.position-t:-1)+e}const ud=new Map;function xP(e,t){ud.set(e,t)}function PP(e){const t=ud.get(e);return ud.delete(e),t}let kP=()=>location.protocol+"//"+location.host;function mT(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Pv(l,"")}return Pv(n,e)+s+i}function DP(e,t,n,s){let i=[],r=[],o=null;const a=({state:d})=>{const p=mT(e,location),m=n.value,_=t.value;let y=0;if(d){if(n.value=p,t.value=d,o&&o===m){o=null;return}y=_?d.position-_.position:0}else s(p);i.forEach(T=>{T(n.value,m,{delta:y,type:ul.pop,direction:y?y>0?Ba.forward:Ba.back:Ba.unknown})})};function l(){o=n.value}function c(d){i.push(d);const p=()=>{const m=i.indexOf(d);m>-1&&i.splice(m,1)};return r.push(p),p}function u(){const{history:d}=window;d.state&&d.replaceState(Xt({},d.state,{scroll:yh()}),"")}function f(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function Rv(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?yh():null}}function RP(e){const{history:t,location:n}=window,s={value:mT(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const f=e.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:kP()+e+l;try{t[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(p){console.error(p),n[u?"replace":"assign"](d)}}function o(l,c){const u=Xt({},t.state,Rv(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=Xt({},i.value,t.state,{forward:l,scroll:yh()});r(u.current,u,!0);const f=Xt({},Rv(s.value,l,null),{position:u.position+1},c);r(l,f,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function MP(e){e=EP(e);const t=RP(e),n=DP(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Xt({location:"",base:e,go:s,createHref:SP.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function OP(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),MP(e)}function NP(e){return typeof e=="string"||e&&typeof e=="object"}function vT(e){return typeof e=="string"||typeof e=="symbol"}const _T=Symbol("");var Mv;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Mv||(Mv={}));function wo(e,t){return Xt(new Error,{type:e,[_T]:!0},t)}function Ps(e,t){return e instanceof Error&&_T in e&&(t==null||!!(e.type&t))}const Ov="[^/]+?",LP={sensitive:!1,strict:!1,start:!0,end:!0},VP=/[.+*?^${}()[\]/\\]/g;function $P(e,t){const n=Xt({},LP,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const d=c[f];let p=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(VP,"\\$&"),p+=40;else if(d.type===1){const{value:m,repeatable:_,optional:y,regexp:T}=d;r.push({name:m,repeatable:_,optional:y});const R=T||Ov;if(R!==Ov){p+=10;try{new RegExp(`(${R})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${m}" (${R}): `+k.message)}}let D=_?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;f||(D=y&&c.length<2?`(?:/${D})`:"/"+D),y&&(D+="?"),i+=D,p+=20,y&&(p+=-8),_&&(p+=-20),R===".*"&&(p+=-50)}u.push(p)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let d=1;d<u.length;d++){const p=u[d]||"",m=r[d-1];f[m.name]=p&&m.repeatable?p.split("/"):p}return f}function l(c){let u="",f=!1;for(const d of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of d)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:_,optional:y}=p,T=m in c?c[m]:"";if(Gn(T)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const R=Gn(T)?T.join("/"):T;if(!R)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);u+=R}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function FP(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yT(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=FP(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Nv(s))return 1;if(Nv(i))return-1}return i.length-s.length}function Nv(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const BP={type:0,value:""},UP=/[a-zA-Z0-9_]/;function HP(e){if(!e)return[[]];if(e==="/")return[[BP]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function f(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):d();break;case 4:d(),n=s;break;case 1:l==="("?n=2:UP.test(l)?d():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}function jP(e,t,n){const s=$P(HP(e.path),n),i=Xt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function zP(e,t){const n=[],s=new Map;t=Fv({strict:!1,end:!0,sensitive:!1},t);function i(f){return s.get(f)}function r(f,d,p){const m=!p,_=Vv(f);_.aliasOf=p&&p.record;const y=Fv(t,f),T=[_];if("alias"in f){const k=typeof f.alias=="string"?[f.alias]:f.alias;for(const O of k)T.push(Vv(Xt({},_,{components:p?p.record.components:_.components,path:O,aliasOf:p?p.record:_})))}let R,D;for(const k of T){const{path:O}=k;if(d&&O[0]!=="/"){const L=d.record.path,E=L[L.length-1]==="/"?"":"/";k.path=d.record.path+(O&&E+O)}if(R=jP(k,d,y),p?p.alias.push(R):(D=D||R,D!==R&&D.alias.push(R),m&&f.name&&!$v(R)&&o(f.name)),bT(R)&&l(R),_.children){const L=_.children;for(let E=0;E<L.length;E++)r(L[E],R,p&&p.children[E])}p=p||R}return D?()=>{o(D)}:Fa}function o(f){if(vT(f)){const d=s.get(f);d&&(s.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const d=qP(f,n);n.splice(d,0,f),f.record.name&&!$v(f)&&s.set(f.record.name,f)}function c(f,d){let p,m={},_,y;if("name"in f&&f.name){if(p=s.get(f.name),!p)throw wo(1,{location:f});y=p.record.name,m=Xt(Lv(d.params,p.keys.filter(D=>!D.optional).concat(p.parent?p.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),f.params&&Lv(f.params,p.keys.map(D=>D.name))),_=p.stringify(m)}else if(f.path!=null)_=f.path,p=n.find(D=>D.re.test(_)),p&&(m=p.parse(_),y=p.record.name);else{if(p=d.name?s.get(d.name):n.find(D=>D.re.test(d.path)),!p)throw wo(1,{location:f,currentLocation:d});y=p.record.name,m=Xt({},d.params,f.params),_=p.stringify(m)}const T=[];let R=p;for(;R;)T.unshift(R.record),R=R.parent;return{name:y,path:_,params:m,matched:T,meta:YP(T)}}e.forEach(f=>r(f));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Lv(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Vv(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:WP(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function WP(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function $v(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function YP(e){return e.reduce((t,n)=>Xt(t,n.meta),{})}function Fv(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function qP(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;yT(e,t[r])<0?s=r:n=r+1}const i=KP(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function KP(e){let t=e;for(;t=t.parent;)if(bT(t)&&yT(e,t)===0)return t}function bT({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function GP(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(hT," "),o=r.indexOf("="),a=cl(o<0?r:r.slice(0,o)),l=o<0?null:cl(r.slice(o+1));if(a in t){let c=t[a];Gn(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Bv(e){let t="";for(let n in e){const s=e[n];if(n=pP(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Gn(s)?s.map(r=>r&&cd(r)):[s&&cd(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function XP(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Gn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const QP=Symbol(""),Uv=Symbol(""),bh=Symbol(""),wT=Symbol(""),hd=Symbol("");function da(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gi(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(wo(4,{from:n,to:t})):d instanceof Error?l(d):NP(d)?l(wo(2,{from:t,to:d})):(o&&s.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let f=Promise.resolve(u);e.length<3&&(f=f.then(c)),f.catch(d=>l(d))})}function Tf(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(cT(l)){const u=(l.__vccOpts||l)[t];u&&r.push(gi(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=sP(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const p=(f.__vccOpts||f)[t];return p&&gi(p,n,s,o,a,i)()}))}}return r}function Hv(e){const t=mn(bh),n=mn(wT),s=G(()=>{const l=ft(e.to);return t.resolve(l)}),i=G(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(bo.bind(null,u));if(d>-1)return d;const p=jv(l[c-2]);return c>1&&jv(u)===p&&f[f.length-1].path!==p?f.findIndex(bo.bind(null,l[c-2])):d}),r=G(()=>i.value>-1&&nk(n.params,s.value.params)),o=G(()=>i.value>-1&&i.value===n.matched.length-1&&gT(n.params,s.value.params));function a(l={}){if(ek(l)){const c=t[ft(e.replace)?"replace":"push"](ft(e.to)).catch(Fa);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:G(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function JP(e){return e.length===1?e[0]:e}const ZP=en({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Hv,setup(e,{slots:t}){const n=$o(Hv(e)),{options:s}=mn(bh),i=G(()=>({[zv(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[zv(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&JP(t.default(n));return e.custom?r:yo("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),tk=ZP;function ek(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function nk(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Gn(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function jv(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const zv=(e,t,n)=>e??t??n,sk=en({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=mn(hd),i=G(()=>e.route||s.value),r=mn(Uv,0),o=G(()=>{let c=ft(r);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=G(()=>i.value.matched[o.value]);Si(Uv,G(()=>o.value+1)),Si(QP,a),Si(hd,i);const l=$t();return ln(()=>[l.value,a.value,e.name],([c,u,f],[d,p,m])=>{u&&(u.instances[f]=c,p&&p!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!bo(u,p)||!d)&&(u.enterCallbacks[f]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,f=a.value,d=f&&f.components[u];if(!d)return Wv(n.default,{Component:d,route:c});const p=f.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=yo(d,Xt({},m,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Wv(n.default,{Component:y,route:c})||y}}});function Wv(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const ik=sk;function rk(e){const t=zP(e.routes,e),n=e.parseQuery||GP,s=e.stringifyQuery||Bv,i=e.history,r=da(),o=da(),a=da(),l=mp(ai);let c=ai;Qr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bf.bind(null,F=>""+F),f=bf.bind(null,mP),d=bf.bind(null,cl);function p(F,st){let Z,ct;return vT(F)?(Z=t.getRecordMatcher(F),ct=st):ct=F,t.addRoute(ct,Z)}function m(F){const st=t.getRecordMatcher(F);st&&t.removeRoute(st)}function _(){return t.getRoutes().map(F=>F.record)}function y(F){return!!t.getRecordMatcher(F)}function T(F,st){if(st=Xt({},st||l.value),typeof F=="string"){const N=wf(n,F,st.path),B=t.resolve({path:N.path},st),H=i.createHref(N.fullPath);return Xt(N,B,{params:d(B.params),hash:cl(N.hash),redirectedFrom:void 0,href:H})}let Z;if(F.path!=null)Z=Xt({},F,{path:wf(n,F.path,st.path).path});else{const N=Xt({},F.params);for(const B in N)N[B]==null&&delete N[B];Z=Xt({},F,{params:f(N)}),st.params=f(st.params)}const ct=t.resolve(Z,st),Ot=F.hash||"";ct.params=u(d(ct.params));const P=yP(s,Xt({},F,{hash:dP(Ot),path:ct.path})),M=i.createHref(P);return Xt({fullPath:P,hash:Ot,query:s===Bv?XP(F.query):F.query||{}},ct,{redirectedFrom:void 0,href:M})}function R(F){return typeof F=="string"?wf(n,F,l.value.path):Xt({},F)}function D(F,st){if(c!==F)return wo(8,{from:st,to:F})}function k(F){return E(F)}function O(F){return k(Xt(R(F),{replace:!0}))}function L(F){const st=F.matched[F.matched.length-1];if(st&&st.redirect){const{redirect:Z}=st;let ct=typeof Z=="function"?Z(F):Z;return typeof ct=="string"&&(ct=ct.includes("?")||ct.includes("#")?ct=R(ct):{path:ct},ct.params={}),Xt({query:F.query,hash:F.hash,params:ct.path!=null?{}:F.params},ct)}}function E(F,st){const Z=c=T(F),ct=l.value,Ot=F.state,P=F.force,M=F.replace===!0,N=L(Z);if(N)return E(Xt(R(N),{state:typeof N=="object"?Xt({},Ot,N.state):Ot,force:P,replace:M}),st||Z);const B=Z;B.redirectedFrom=st;let H;return!P&&bP(s,ct,Z)&&(H=wo(16,{to:B,from:ct}),At(ct,ct,!0,!1)),(H?Promise.resolve(H):A(B,ct)).catch(U=>Ps(U)?Ps(U,2)?U:z(U):mt(U,B,ct)).then(U=>{if(U){if(Ps(U,2))return E(Xt({replace:M},R(U.to),{state:typeof U.to=="object"?Xt({},Ot,U.to.state):Ot,force:P}),st||B)}else U=C(B,ct,!0,M,Ot);return x(B,ct,U),U})}function b(F,st){const Z=D(F,st);return Z?Promise.reject(Z):Promise.resolve()}function w(F){const st=Rt.values().next().value;return st&&typeof st.runWithContext=="function"?st.runWithContext(F):F()}function A(F,st){let Z;const[ct,Ot,P]=ok(F,st);Z=Tf(ct.reverse(),"beforeRouteLeave",F,st);for(const N of ct)N.leaveGuards.forEach(B=>{Z.push(gi(B,F,st))});const M=b.bind(null,F,st);return Z.push(M),Ht(Z).then(()=>{Z=[];for(const N of r.list())Z.push(gi(N,F,st));return Z.push(M),Ht(Z)}).then(()=>{Z=Tf(Ot,"beforeRouteUpdate",F,st);for(const N of Ot)N.updateGuards.forEach(B=>{Z.push(gi(B,F,st))});return Z.push(M),Ht(Z)}).then(()=>{Z=[];for(const N of P)if(N.beforeEnter)if(Gn(N.beforeEnter))for(const B of N.beforeEnter)Z.push(gi(B,F,st));else Z.push(gi(N.beforeEnter,F,st));return Z.push(M),Ht(Z)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),Z=Tf(P,"beforeRouteEnter",F,st,w),Z.push(M),Ht(Z))).then(()=>{Z=[];for(const N of o.list())Z.push(gi(N,F,st));return Z.push(M),Ht(Z)}).catch(N=>Ps(N,8)?N:Promise.reject(N))}function x(F,st,Z){a.list().forEach(ct=>w(()=>ct(F,st,Z)))}function C(F,st,Z,ct,Ot){const P=D(F,st);if(P)return P;const M=st===ai,N=Qr?history.state:{};Z&&(ct||M?i.replace(F.fullPath,Xt({scroll:M&&N&&N.scroll},Ot)):i.push(F.fullPath,Ot)),l.value=F,At(F,st,Z,M),z()}let S;function dt(){S||(S=i.listen((F,st,Z)=>{if(!Yt.listening)return;const ct=T(F),Ot=L(ct);if(Ot){E(Xt(Ot,{replace:!0,force:!0}),ct).catch(Fa);return}c=ct;const P=l.value;Qr&&xP(Dv(P.fullPath,Z.delta),yh()),A(ct,P).catch(M=>Ps(M,12)?M:Ps(M,2)?(E(Xt(R(M.to),{force:!0}),ct).then(N=>{Ps(N,20)&&!Z.delta&&Z.type===ul.pop&&i.go(-1,!1)}).catch(Fa),Promise.reject()):(Z.delta&&i.go(-Z.delta,!1),mt(M,ct,P))).then(M=>{M=M||C(ct,P,!1),M&&(Z.delta&&!Ps(M,8)?i.go(-Z.delta,!1):Z.type===ul.pop&&Ps(M,20)&&i.go(-1,!1)),x(ct,P,M)}).catch(Fa)}))}let Q=da(),at=da(),ot;function mt(F,st,Z){z(F);const ct=at.list();return ct.length?ct.forEach(Ot=>Ot(F,st,Z)):console.error(F),Promise.reject(F)}function Nt(){return ot&&l.value!==ai?Promise.resolve():new Promise((F,st)=>{Q.add([F,st])})}function z(F){return ot||(ot=!F,dt(),Q.list().forEach(([st,Z])=>F?Z(F):st()),Q.reset()),F}function At(F,st,Z,ct){const{scrollBehavior:Ot}=e;if(!Qr||!Ot)return Promise.resolve();const P=!Z&&PP(Dv(F.fullPath,0))||(ct||!Z)&&history.state&&history.state.scroll||null;return _o().then(()=>Ot(F,st,P)).then(M=>M&&CP(M)).catch(M=>mt(M,F,st))}const et=F=>i.go(F);let Pt;const Rt=new Set,Yt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:_,resolve:T,options:e,push:k,replace:O,go:et,back:()=>et(-1),forward:()=>et(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:at.add,isReady:Nt,install(F){const st=this;F.component("RouterLink",tk),F.component("RouterView",ik),F.config.globalProperties.$router=st,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(l)}),Qr&&!Pt&&l.value===ai&&(Pt=!0,k(i.location).catch(Ot=>{}));const Z={};for(const Ot in ai)Object.defineProperty(Z,Ot,{get:()=>l.value[Ot],enumerable:!0});F.provide(bh,st),F.provide(wT,mw(Z)),F.provide(hd,l);const ct=F.unmount;Rt.add(F),F.unmount=function(){Rt.delete(F),Rt.size<1&&(c=ai,S&&S(),S=null,l.value=ai,Pt=!1,ot=!1),ct()}}};function Ht(F){return F.reduce((st,Z)=>st.then(()=>w(Z)),Promise.resolve())}return Yt}function ok(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>bo(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>bo(c,l))||i.push(l))}return[n,s,i]}function Ap(){return mn(bh)}const ak=()=>{};var Yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},lk=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},ET={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=r>>2,f=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(d=64)),s.push(n[u],n[f],n[d],n[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(TT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lk(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||f==null)throw new ck;const d=r<<2|a>>4;if(s.push(d),c!==64){const p=a<<4&240|c>>2;if(s.push(p),f!==64){const m=c<<6&192|f;s.push(m)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ck extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uk=function(e){const t=TT(e);return ET.encodeByteArray(t,!0)},mu=function(e){return uk(e).replace(/\./g,"")},IT=function(e){try{return ET.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=()=>hk().__FIREBASE_DEFAULTS__,dk=()=>{if(typeof process>"u"||typeof Yv>"u")return;const e=Yv.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pk=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&IT(e[1]);return t&&JSON.parse(t)},wh=()=>{try{return ak()||fk()||dk()||pk()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ST=e=>{var t,n;return(n=(t=wh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},gk=e=>{const t=ST(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},AT=()=>{var e;return(e=wh())===null||e===void 0?void 0:e.config},CT=e=>{var t;return(t=wh())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e){return e.endsWith(".cloudworkstations.dev")}async function xT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mu(JSON.stringify(n)),mu(JSON.stringify(o)),""].join(".")}const Ua={};function _k(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ua))Ua[t]?e.emulator.push(t):e.prod.push(t);return e}function yk(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let qv=!1;function PT(e,t){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||Ua[e]===t||Ua[e]||qv)return;Ua[e]=t;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=_k().prod.length>0;function o(){const d=document.getElementById(s);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{qv=!0,o()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=yk(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),y=document.getElementById(_)||document.createElement("a"),T=n("preprendIcon"),R=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const D=d.element;a(D),u(y,_);const k=c();l(R,T),D.append(R,m,y,k),document.body.appendChild(D)}r?(m.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function wk(){var e;const t=(e=wh())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ek(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ik(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sk(){const e=tn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ak(){return!wk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ck(){try{return typeof indexedDB=="object"}catch{return!1}}function xk(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="FirebaseError";class Zs extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Pk,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?kk(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zs(i,a,s)}}function kk(e,t){return e.replace(Dk,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const Dk=/\{\$([^}]+)}/g;function Rk(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _r(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(Kv(r)&&Kv(o)){if(!_r(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Kv(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Ea(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function Ia(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Mk(e,t){const n=new Ok(e,t);return n.subscribe.bind(n)}class Ok{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Nk(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Ef),i.error===void 0&&(i.error=Ef),i.complete===void 0&&(i.complete=Ef);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nk(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ef(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(e){return e&&e._delegate?e._delegate:e}class yr{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new mk;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($k(t))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=rr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rr){return this.instances.has(t)}getOptions(t=rr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vk(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=rr){return this.component?this.component.multipleInstances?t:rr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vk(e){return e===rr?void 0:e}function $k(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Lk(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bt||(Bt={}));const Bk={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},Uk=Bt.INFO,Hk={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},jk=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=Hk[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cp{constructor(t){this.name=t,this._logLevel=Uk,this._logHandler=jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Bk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...t),this._logHandler(this,Bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...t),this._logHandler(this,Bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...t),this._logHandler(this,Bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...t),this._logHandler(this,Bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...t),this._logHandler(this,Bt.ERROR,...t)}}const zk=(e,t)=>t.some(n=>e instanceof n);let Gv,Xv;function Wk(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yk(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kT=new WeakMap,fd=new WeakMap,DT=new WeakMap,If=new WeakMap,xp=new WeakMap;function qk(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Ai(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&kT.set(n,e)}).catch(()=>{}),xp.set(t,e),t}function Kk(e){if(fd.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});fd.set(e,t)}let dd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return fd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||DT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Gk(e){dd=e(dd)}function Xk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Sf(this),t,...n);return DT.set(s,t.sort?t.sort():[t]),Ai(s)}:Yk().includes(e)?function(...t){return e.apply(Sf(this),t),Ai(kT.get(this))}:function(...t){return Ai(e.apply(Sf(this),t))}}function Qk(e){return typeof e=="function"?Xk(e):(e instanceof IDBTransaction&&Kk(e),zk(e,Wk())?new Proxy(e,dd):e)}function Ai(e){if(e instanceof IDBRequest)return qk(e);if(If.has(e))return If.get(e);const t=Qk(e);return t!==e&&(If.set(e,t),xp.set(t,e)),t}const Sf=e=>xp.get(e);function Jk(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Ai(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ai(o.result),l.oldVersion,l.newVersion,Ai(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Zk=["get","getKey","getAll","getAllKeys","count"],tD=["put","add","delete","clear"],Af=new Map;function Qv(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Af.get(t))return Af.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=tD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Zk.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Af.set(t,r),r}Gk(e=>({...e,get:(t,n,s)=>Qv(t,n)||e.get(t,n,s),has:(t,n)=>!!Qv(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nD(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function nD(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const pd="@firebase/app",Jv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Cp("@firebase/app"),sD="@firebase/app-compat",iD="@firebase/analytics-compat",rD="@firebase/analytics",oD="@firebase/app-check-compat",aD="@firebase/app-check",lD="@firebase/auth",cD="@firebase/auth-compat",uD="@firebase/database",hD="@firebase/data-connect",fD="@firebase/database-compat",dD="@firebase/functions",pD="@firebase/functions-compat",gD="@firebase/installations",mD="@firebase/installations-compat",vD="@firebase/messaging",_D="@firebase/messaging-compat",yD="@firebase/performance",bD="@firebase/performance-compat",wD="@firebase/remote-config",TD="@firebase/remote-config-compat",ED="@firebase/storage",ID="@firebase/storage-compat",SD="@firebase/firestore",AD="@firebase/ai",CD="@firebase/firestore-compat",xD="firebase",PD="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]",kD={[pd]:"fire-core",[sD]:"fire-core-compat",[rD]:"fire-analytics",[iD]:"fire-analytics-compat",[aD]:"fire-app-check",[oD]:"fire-app-check-compat",[lD]:"fire-auth",[cD]:"fire-auth-compat",[uD]:"fire-rtdb",[hD]:"fire-data-connect",[fD]:"fire-rtdb-compat",[dD]:"fire-fn",[pD]:"fire-fn-compat",[gD]:"fire-iid",[mD]:"fire-iid-compat",[vD]:"fire-fcm",[_D]:"fire-fcm-compat",[yD]:"fire-perf",[bD]:"fire-perf-compat",[wD]:"fire-rc",[TD]:"fire-rc-compat",[ED]:"fire-gcs",[ID]:"fire-gcs-compat",[SD]:"fire-fst",[CD]:"fire-fst-compat",[AD]:"fire-vertex","fire-js":"fire-js",[xD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=new Map,DD=new Map,md=new Map;function Zv(e,t){try{e.container.addComponent(t)}catch(n){Ws.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function To(e){const t=e.name;if(md.has(t))return Ws.debug(`There were multiple attempts to register component ${t}.`),!1;md.set(t,e);for(const n of vu.values())Zv(n,e);for(const n of DD.values())Zv(n,e);return!0}function Pp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new Ll("app","Firebase",RD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=PD;function RT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:gd,automaticDataCollectionEnabled:!0},t),i=s.name;if(typeof i!="string"||!i)throw Ci.create("bad-app-name",{appName:String(i)});if(n||(n=AT()),!n)throw Ci.create("no-options");const r=vu.get(i);if(r){if(_r(n,r.options)&&_r(s,r.config))return r;throw Ci.create("duplicate-app",{appName:i})}const o=new Fk(i);for(const l of md.values())o.addComponent(l);const a=new MD(n,s,o);return vu.set(i,a),a}function MT(e=gd){const t=vu.get(e);if(!t&&e===gd&&AT())return RT();if(!t)throw Ci.create("no-app",{appName:e});return t}function xi(e,t,n){var s;let i=(s=kD[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ws.warn(a.join(" "));return}To(new yr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="firebase-heartbeat-database",ND=1,hl="firebase-heartbeat-store";let Cf=null;function OT(){return Cf||(Cf=Jk(OD,ND,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(hl)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ci.create("idb-open",{originalErrorMessage:e.message})})),Cf}async function LD(e){try{const n=(await OT()).transaction(hl),s=await n.objectStore(hl).get(NT(e));return await n.done,s}catch(t){if(t instanceof Zs)Ws.warn(t.message);else{const n=Ci.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ws.warn(n.message)}}}async function t_(e,t){try{const s=(await OT()).transaction(hl,"readwrite");await s.objectStore(hl).put(t,NT(e)),await s.done}catch(n){if(n instanceof Zs)Ws.warn(n.message);else{const s=Ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ws.warn(s.message)}}}function NT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=1024,$D=30;class FD{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=e_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>$D){const o=HD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ws.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e_(),{heartbeatsToSend:s,unsentEntries:i}=BD(this._heartbeatsCache.heartbeats),r=mu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ws.warn(n),""}}}function e_(){return new Date().toISOString().substring(0,10)}function BD(e,t=VD){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),n_(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),n_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class UD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ck()?xk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return t_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return t_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function n_(e){return mu(JSON.stringify({version:2,heartbeats:e})).length}function HD(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(e){To(new yr("platform-logger",t=>new eD(t),"PRIVATE")),To(new yr("heartbeat",t=>new FD(t),"PRIVATE")),xi(pd,Jv,e),xi(pd,Jv,"esm2017"),xi("fire-js","")}jD("");var zD="firebase",WD="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(zD,WD,"app");function kp(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function LT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YD=LT,VT=new Ll("auth","Firebase",LT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Cp("@firebase/auth");function qD(e,...t){_u.logLevel<=Bt.WARN&&_u.warn(`Auth (${Uo}): ${e}`,...t)}function zc(e,...t){_u.logLevel<=Bt.ERROR&&_u.error(`Auth (${Uo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e,...t){throw Dp(e,...t)}function cs(e,...t){return Dp(e,...t)}function $T(e,t,n){const s=Object.assign(Object.assign({},YD()),{[t]:n});return new Ll("auth","Firebase",s).create(t,{appName:e.name})}function Us(e){return $T(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return VT.create(e,...t)}function Et(e,t,...n){if(!e)throw Dp(t,...n)}function $s(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zc(t),new Error(t)}function Ys(e,t){e||$s(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function KD(){return s_()==="http:"||s_()==="https:"}function s_(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KD()||Ek()||"connection"in navigator)?navigator.onLine:!0}function XD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ys(n>t,"Short delay should be less than long delay!"),this.isMobile=bk()||Ik()}get(){return GD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(e,t){Ys(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZD=new $l(3e4,6e4);function ji(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zi(e,t,n,s,i={}){return BT(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=Vl(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},r);return Tk()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Bo(e.emulatorConfig.host)&&(c.credentials="include"),FT.fetch()(await UT(e,e.config.apiHost,n,a),c)})}async function BT(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},QD),t);try{const i=new eR(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw gc(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gc(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw gc(e,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $T(e,u,c);Xn(e,u)}}catch(i){if(i instanceof Zs)throw i;Xn(e,"network-request-failed",{message:String(i)})}}async function Fl(e,t,n,s,i={}){const r=await zi(e,t,n,s,i);return"mfaPendingCredential"in r&&Xn(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function UT(e,t,n,s){const i=`${t}${n}?${s}`,r=e,o=r.config.emulator?Rp(e.config,i):`${e.config.apiScheme}://${i}`;return JD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function tR(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cs(this.auth,"network-request-failed")),ZD.get())})}}function gc(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=cs(e,t,s);return i.customData._tokenResponse=n,i}function i_(e){return e!==void 0&&e.enterprise!==void 0}class nR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return tR(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sR(e,t){return zi(e,"GET","/v2/recaptchaConfig",ji(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(e,t){return zi(e,"POST","/v1/accounts:delete",t)}async function yu(e,t){return zi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rR(e,t=!1){const n=Vn(e),s=await n.getIdToken(t),i=Mp(s);Et(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Ha(xf(i.auth_time)),issuedAtTime:Ha(xf(i.iat)),expirationTime:Ha(xf(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function xf(e){return Number(e)*1e3}function Mp(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const i=IT(n);return i?JSON.parse(i):(zc("Failed to decode base64 JWT payload"),null)}catch(i){return zc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function r_(e){const t=Mp(e);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Zs&&oR(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function oR({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ha(this.lastLoginAt),this.creationTime=Ha(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(e){var t;const n=e.auth,s=await e.getIdToken(),i=await fl(e,yu(n,{idToken:s}));Et(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?HT(r.providerUserInfo):[],a=cR(e.providerData,o),l=e.isAnonymous,c=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new _d(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,f)}async function lR(e){const t=Vn(e);await bu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cR(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function HT(e){return e.map(t=>{var{providerId:n}=t,s=kp(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(e,t){const n=await BT(e,{},async()=>{const s=Vl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await UT(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return e.emulatorConfig&&Bo(e.emulatorConfig.host)&&(l.credentials="include"),FT.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hR(e,t){return zi(e,"POST","/v2/accounts:revokeToken",ji(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):r_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const n=r_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await uR(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new ho;return s&&(Et(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(Et(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(Et(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e,t){Et(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class zn{constructor(t){var{uid:n,auth:s,stsTokenManager:i}=t,r=kp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new _d(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await fl(this,this.stsTokenManager.getToken(this.auth,t));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return rR(this,t)}reload(){return lR(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await bu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Us(this.auth));const t=await this.getIdToken();return await fl(this,iR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,i,r,o,a,l,c,u;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,p=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,R=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:D,emailVerified:k,isAnonymous:O,providerData:L,stsTokenManager:E}=n;Et(D&&E,t,"internal-error");const b=ho.fromJSON(this.name,E);Et(typeof D=="string",t,"internal-error"),li(f,t.name),li(d,t.name),Et(typeof k=="boolean",t,"internal-error"),Et(typeof O=="boolean",t,"internal-error"),li(p,t.name),li(m,t.name),li(_,t.name),li(y,t.name),li(T,t.name),li(R,t.name);const w=new zn({uid:D,auth:t,email:d,emailVerified:k,displayName:f,isAnonymous:O,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:b,createdAt:T,lastLoginAt:R});return L&&Array.isArray(L)&&(w.providerData=L.map(A=>Object.assign({},A))),y&&(w._redirectEventId=y),w}static async _fromIdTokenResponse(t,n,s=!1){const i=new ho;i.updateFromServerResponse(n);const r=new zn({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await bu(r),r}static async _fromGetAccountInfoResponse(t,n,s){const i=n.users[0];Et(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?HT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),a=new ho;a.updateFromIdToken(s);const l=new zn({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new _d(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;function Fs(e){Ys(e instanceof Function,"Expected a class definition");let t=o_.get(e);return t?(Ys(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,o_.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}jT.type="NONE";const a_=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(e,t,n){return`firebase:${e}:${t}:${n}`}class fo{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Wc(this.userKey,i.apiKey,r),this.fullPersistenceKey=Wc("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await yu(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new fo(Fs(a_),t,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||Fs(a_);const o=Wc(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let f;if(typeof u=="string"){const d=await yu(t,{idToken:u}).catch(()=>{});if(!d)break;f=await zn._fromGetAccountInfoResponse(t,d,u)}else f=zn._fromJSON(t,u);c!==r&&(a=f),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new fo(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new fo(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(GT(t))return"Blackberry";if(XT(t))return"Webos";if(WT(t))return"Safari";if((t.includes("chrome/")||YT(t))&&!t.includes("edge/"))return"Chrome";if(KT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zT(e=tn()){return/firefox\//i.test(e)}function WT(e=tn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function YT(e=tn()){return/crios\//i.test(e)}function qT(e=tn()){return/iemobile/i.test(e)}function KT(e=tn()){return/android/i.test(e)}function GT(e=tn()){return/blackberry/i.test(e)}function XT(e=tn()){return/webos/i.test(e)}function Op(e=tn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fR(e=tn()){var t;return Op(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function dR(){return Sk()&&document.documentMode===10}function QT(e=tn()){return Op(e)||KT(e)||XT(e)||GT(e)||/windows phone/i.test(e)||qT(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(e,t=[]){let n;switch(e){case"Browser":n=l_(tn());break;case"Worker":n=`${l_(tn())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(e,t={}){return zi(e,"GET","/v2/passwordPolicy",ji(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=6;class vR{constructor(t){var n,s,i,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:mR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,i,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c_(this),this.idTokenSubscription=new c_(this),this.beforeStateQueue=new pR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Fs(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await fo.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await yu(this,{idToken:t}),s=await zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await bu(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(xn(this.app))return Promise.reject(Us(this));const n=t?Vn(t):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return xn(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gR(this),n=new vR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ll("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await hR(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Fs(t)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[Fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&qD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pr(e){return Vn(e)}class c_{constructor(t){this.auth=t,this.observer=null,this.addObserver=Mk(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yR(e){Th=e}function ZT(e){return Th.loadJS(e)}function bR(){return Th.recaptchaEnterpriseScript}function wR(){return Th.gapiScript}function TR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class ER{constructor(){this.enterprise=new IR}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class IR{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const SR="recaptcha-enterprise",tE="NO_RECAPTCHA";class AR{constructor(t){this.type=SR,this.auth=Pr(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{sR(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new nR(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;i_(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(tE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ER().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&i_(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bR();l.length!==0&&(l+=a),ZT(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function u_(e,t,n,s=!1,i=!1){const r=new AR(e);let o;if(i)o=tE;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yd(e,t,n,s,i){var r;if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await u_(e,t,n,n==="getOobCode");return s(e,o)}else return s(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await u_(e,t,n,n==="getOobCode");return s(e,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(e,t){const n=Pp(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(_r(r,t??{}))return i;Xn(i,"already-initialized")}return n.initialize({options:t})}function xR(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Fs);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function PR(e,t,n){const s=Pr(e);Et(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=eE(t),{host:o,port:a}=kR(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(_r(c,s.config.emulator)&&_r(u,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,Bo(o)?(xT(`${r}//${o}${l}`),PT("Auth",!0)):DR()}function eE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kR(e){const t=eE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:h_(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:h_(o)}}}function h_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function DR(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $s("not implemented")}_getIdTokenResponse(t){return $s("not implemented")}_linkToIdToken(t,n){return $s("not implemented")}_getReauthenticationResolver(t){return $s("not implemented")}}async function RR(e,t){return zi(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(e,t){return Fl(e,"POST","/v1/accounts:signInWithPassword",ji(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(e,t){return Fl(e,"POST","/v1/accounts:signInWithEmailLink",ji(e,t))}async function NR(e,t){return Fl(e,"POST","/v1/accounts:signInWithEmailLink",ji(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Np{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new dl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new dl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yd(t,n,"signInWithPassword",MR);case"emailLink":return OR(t,{email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yd(t,s,"signUpPassword",RR);case"emailLink":return NR(t,{idToken:n,email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(e,t){return Fl(e,"POST","/v1/accounts:signInWithIdp",ji(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="http://localhost";class br extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new br(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=n,r=kp(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new br(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return po(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,po(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,po(t,n)}buildRequest(){const t={requestUri:LR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Vl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $R(e){const t=Ea(Ia(e)).link,n=t?Ea(Ia(t)).deep_link_id:null,s=Ea(Ia(e)).deep_link_id;return(s?Ea(Ia(s)).link:null)||s||n||t||e}class Lp{constructor(t){var n,s,i,r,o,a;const l=Ea(Ia(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,f=VR((i=l.mode)!==null&&i!==void 0?i:null);Et(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=$R(t);try{return new Lp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(t,n){return dl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Lp.parseLink(n);return Et(s,"argument-error"),dl._fromEmailAndCode(t,s.code,s.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends nE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Bl{constructor(){super("facebook.com")}static credential(t){return br._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mi.credentialFromTaggedObject(t)}static credentialFromError(t){return mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mi.credential(t.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return br._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return vi.credentialFromTaggedObject(t)}static credentialFromError(t){return vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return vi.credential(n,s)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Bl{constructor(){super("github.com")}static credential(t){return br._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _i.credentialFromTaggedObject(t)}static credentialFromError(t){return _i.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _i.credential(t.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Bl{constructor(){super("twitter.com")}static credential(t,n){return br._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return yi.credentialFromTaggedObject(t)}static credentialFromError(t){return yi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return yi.credential(n,s)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(e,t){return Fl(e,"POST","/v1/accounts:signUp",ji(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await zn._fromIdTokenResponse(t,s,i),o=f_(s);return new wr({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=f_(s);return new wr({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function f_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Zs{constructor(t,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new wu(t,n,s,i)}}function sE(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?wu._fromErrorAndOperation(e,r,t,s):r})}async function BR(e,t,n=!1){const s=await fl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wr._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(e,t,n=!1){const{auth:s}=e;if(xn(s.app))return Promise.reject(Us(s));const i="reauthenticate";try{const r=await fl(e,sE(s,i,t,e),n);Et(r.idToken,s,"internal-error");const o=Mp(r.idToken);Et(o,s,"internal-error");const{sub:a}=o;return Et(e.uid===a,s,"user-mismatch"),wr._forOperation(e,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Xn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(e,t,n=!1){if(xn(e.app))return Promise.reject(Us(e));const s="signIn",i=await sE(e,s,t),r=await wr._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function HR(e,t){return iE(Pr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(e){const t=Pr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function jR(e,t,n){if(xn(e.app))return Promise.reject(Us(e));const s=Pr(e),o=await yd(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&rE(e),l}),a=await wr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function zR(e,t,n){return xn(e.app)?Promise.reject(Us(e)):HR(Vn(e),Ho.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&rE(e),s})}function WR(e,t,n,s){return Vn(e).onIdTokenChanged(t,n,s)}function YR(e,t,n){return Vn(e).beforeAuthStateChanged(t,n)}function qR(e){return Vn(e).signOut()}const Tu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tu,"1"),this.storage.removeItem(Tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1e3,GR=10;class aE extends oE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);dR()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,GR):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},KR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}aE.type="LOCAL";const XR=aE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends oE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}lE.type="SESSION";const cE=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Eh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await QR(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Vp("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function ZR(e){us().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function tM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eM(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function nM(){return uE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebaseLocalStorageDb",sM=1,Eu="firebaseLocalStorage",fE="fbase_key";class Ul{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(e,t){return e.transaction([Eu],t?"readwrite":"readonly").objectStore(Eu)}function iM(){const e=indexedDB.deleteDatabase(hE);return new Ul(e).toPromise()}function bd(){const e=indexedDB.open(hE,sM);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(Eu,{keyPath:fE})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(Eu)?t(s):(s.close(),await iM(),t(await bd()))})})}async function d_(e,t,n){const s=Ih(e,!0).put({[fE]:t,value:n});return new Ul(s).toPromise()}async function rM(e,t){const n=Ih(e,!1).get(t),s=await new Ul(n).toPromise();return s===void 0?null:s.value}function p_(e,t){const n=Ih(e,!0).delete(t);return new Ul(n).toPromise()}const oM=800,aM=3;class dE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>aM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(nM()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await tM(),!this.activeServiceWorker)return;this.sender=new JR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||eM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bd();return await d_(t,Tu,"1"),await p_(t,Tu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>d_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>rM(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>p_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=Ih(i,!1).getAll();return new Ul(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dE.type="LOCAL";const lM=dE;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(e,t){return t?Fs(t):(Et(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Np{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return po(t,this._buildIdpRequest())}_linkToIdToken(t,n){return po(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return po(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function uM(e){return iE(e.auth,new $p(e),e.bypassAuthState)}function hM(e){const{auth:t,user:n}=e;return Et(n,t,"internal-error"),UR(n,new $p(e),e.bypassAuthState)}async function fM(e){const{auth:t,user:n}=e;return Et(n,t,"internal-error"),BR(n,new $p(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return uM;case"linkViaPopup":case"linkViaRedirect":return fM;case"reauthViaPopup":case"reauthViaRedirect":return hM;default:Xn(this.auth,"internal-error")}}resolve(t){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new $l(2e3,1e4);class so extends pE{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const t=Vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,dM.get())};t()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="pendingRedirect",Yc=new Map;class gM extends pE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Yc.get(this.auth._key());if(!t){try{const s=await mM(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Yc.set(this.auth._key(),t)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mM(e,t){const n=yM(t),s=_M(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function vM(e,t){Yc.set(e._key(),t)}function _M(e){return Fs(e._redirectPersistence)}function yM(e){return Wc(pM,e.config.apiKey,e.name)}async function bM(e,t,n=!1){if(xn(e.app))return Promise.reject(Us(e));const s=Pr(e),i=cM(s,t),o=await new gM(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=10*60*1e3;class TM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!EM(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!gE(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=wM&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(t))}saveEventToCache(t){this.cachedEventUids.add(g_(t)),this.lastProcessedEventTime=Date.now()}}function g_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function gE({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function EM(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gE(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(e,t={}){return zi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AM=/^https?/;async function CM(e){if(e.config.emulator)return;const{authorizedDomains:t}=await IM(e);for(const n of t)try{if(xM(n))return}catch{}Xn(e,"unauthorized-domain")}function xM(e){const t=vd(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!AM.test(n))return!1;if(SM.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new $l(3e4,6e4);function m_(){const e=us().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function kM(e){return new Promise((t,n)=>{var s,i,r;function o(){m_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{m_(),n(cs(e,"network-request-failed"))},timeout:PM.get()})}if(!((i=(s=us().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((r=us().gapi)===null||r===void 0)&&r.load)o();else{const a=TR("iframefcb");return us()[a]=()=>{gapi.load?o():n(cs(e,"network-request-failed"))},ZT(`${wR()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw qc=null,t})}let qc=null;function DM(e){return qc=qc||kM(e),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new $l(5e3,15e3),MM="__/auth/iframe",OM="emulator/auth/iframe",NM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VM(e){const t=e.config;Et(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Rp(t,OM):`https://${e.config.authDomain}/${MM}`,s={apiKey:t.apiKey,appName:e.name,v:Uo},i=LM.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Vl(s).slice(1)}`}async function $M(e){const t=await DM(e),n=us().gapi;return Et(n,e,"internal-error"),t.open({where:document.body,url:VM(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NM,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=cs(e,"network-request-failed"),a=us().setTimeout(()=>{r(o)},RM.get());function l(){us().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BM=500,UM=600,HM="_blank",jM="http://localhost";class v_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zM(e,t,n,s=BM,i=UM){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FM),{width:s.toString(),height:i.toString(),top:r,left:o}),c=tn().toLowerCase();n&&(a=YT(c)?HM:n),zT(c)&&(t=t||jM,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(fR(c)&&a!=="_self")return WM(t||"",a),new v_(null);const f=window.open(t||"",a,u);Et(f,e,"popup-blocked");try{f.focus()}catch{}return new v_(f)}function WM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM="__/auth/handler",qM="emulator/auth/handler",KM=encodeURIComponent("fac");async function __(e,t,n,s,i,r){Et(e.config.authDomain,e,"auth-domain-config-required"),Et(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Uo,eventId:i};if(t instanceof nE){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Rk(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(t instanceof Bl){const u=t.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${KM}=${encodeURIComponent(l)}`:"";return`${GM(e)}?${Vl(a).slice(1)}${c}`}function GM({config:e}){return e.emulator?Rp(e,qM):`https://${e.authDomain}/${YM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class XM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cE,this._completeRedirectFn=bM,this._overrideRedirectResult=vM}async _openPopup(t,n,s,i){var r;Ys((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await __(t,n,s,vd(),i);return zM(t,o,Vp())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await __(t,n,s,vd(),i);return ZR(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(Ys(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await $M(t),s=new TM(t);return n.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Pf,{type:Pf},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[Pf];o!==void 0&&n(!!o),Xn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CM(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return QT()||WT()||Op()}}const QM=XM;var y_="@firebase/auth",b_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tO(e){To(new yr("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Et(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JT(e)},c=new _R(s,i,r,l);return xR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),To(new yr("auth-internal",t=>{const n=Pr(t.getProvider("auth").getImmediate());return(s=>new JM(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(y_,b_,ZM(e)),xi(y_,b_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=5*60,nO=CT("authIdTokenMaxAge")||eO;let w_=null;const sO=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>nO)return;const i=n==null?void 0:n.token;w_!==i&&(w_=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function iO(e=MT()){const t=Pp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=CR(e,{popupRedirectResolver:QM,persistence:[lM,XR,cE]}),s=CT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=sO(r.toString());YR(n,o,()=>o(n.currentUser)),WR(n,a=>o(a))}}const i=ST("auth");return i&&PR(n,`http://${i}`),n}function rO(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}yR({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=cs("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",rO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tO("Browser");var T_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,mE;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,b){function w(){}w.prototype=b.prototype,E.D=b.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(A,x,C){for(var S=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)S[dt-2]=arguments[dt];return b.prototype[x].apply(A,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,b,w){w||(w=0);var A=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)A[x]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(x=0;16>x;++x)A[x]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=E.g[0],w=E.g[1],x=E.g[2];var C=E.g[3],S=b+(C^w&(x^C))+A[0]+3614090360&4294967295;b=w+(S<<7&4294967295|S>>>25),S=C+(x^b&(w^x))+A[1]+3905402710&4294967295,C=b+(S<<12&4294967295|S>>>20),S=x+(w^C&(b^w))+A[2]+606105819&4294967295,x=C+(S<<17&4294967295|S>>>15),S=w+(b^x&(C^b))+A[3]+3250441966&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(C^w&(x^C))+A[4]+4118548399&4294967295,b=w+(S<<7&4294967295|S>>>25),S=C+(x^b&(w^x))+A[5]+1200080426&4294967295,C=b+(S<<12&4294967295|S>>>20),S=x+(w^C&(b^w))+A[6]+2821735955&4294967295,x=C+(S<<17&4294967295|S>>>15),S=w+(b^x&(C^b))+A[7]+4249261313&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(C^w&(x^C))+A[8]+1770035416&4294967295,b=w+(S<<7&4294967295|S>>>25),S=C+(x^b&(w^x))+A[9]+2336552879&4294967295,C=b+(S<<12&4294967295|S>>>20),S=x+(w^C&(b^w))+A[10]+4294925233&4294967295,x=C+(S<<17&4294967295|S>>>15),S=w+(b^x&(C^b))+A[11]+2304563134&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(C^w&(x^C))+A[12]+1804603682&4294967295,b=w+(S<<7&4294967295|S>>>25),S=C+(x^b&(w^x))+A[13]+4254626195&4294967295,C=b+(S<<12&4294967295|S>>>20),S=x+(w^C&(b^w))+A[14]+2792965006&4294967295,x=C+(S<<17&4294967295|S>>>15),S=w+(b^x&(C^b))+A[15]+1236535329&4294967295,w=x+(S<<22&4294967295|S>>>10),S=b+(x^C&(w^x))+A[1]+4129170786&4294967295,b=w+(S<<5&4294967295|S>>>27),S=C+(w^x&(b^w))+A[6]+3225465664&4294967295,C=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(C^b))+A[11]+643717713&4294967295,x=C+(S<<14&4294967295|S>>>18),S=w+(C^b&(x^C))+A[0]+3921069994&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(x^C&(w^x))+A[5]+3593408605&4294967295,b=w+(S<<5&4294967295|S>>>27),S=C+(w^x&(b^w))+A[10]+38016083&4294967295,C=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(C^b))+A[15]+3634488961&4294967295,x=C+(S<<14&4294967295|S>>>18),S=w+(C^b&(x^C))+A[4]+3889429448&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(x^C&(w^x))+A[9]+568446438&4294967295,b=w+(S<<5&4294967295|S>>>27),S=C+(w^x&(b^w))+A[14]+3275163606&4294967295,C=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(C^b))+A[3]+4107603335&4294967295,x=C+(S<<14&4294967295|S>>>18),S=w+(C^b&(x^C))+A[8]+1163531501&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(x^C&(w^x))+A[13]+2850285829&4294967295,b=w+(S<<5&4294967295|S>>>27),S=C+(w^x&(b^w))+A[2]+4243563512&4294967295,C=b+(S<<9&4294967295|S>>>23),S=x+(b^w&(C^b))+A[7]+1735328473&4294967295,x=C+(S<<14&4294967295|S>>>18),S=w+(C^b&(x^C))+A[12]+2368359562&4294967295,w=x+(S<<20&4294967295|S>>>12),S=b+(w^x^C)+A[5]+4294588738&4294967295,b=w+(S<<4&4294967295|S>>>28),S=C+(b^w^x)+A[8]+2272392833&4294967295,C=b+(S<<11&4294967295|S>>>21),S=x+(C^b^w)+A[11]+1839030562&4294967295,x=C+(S<<16&4294967295|S>>>16),S=w+(x^C^b)+A[14]+4259657740&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(w^x^C)+A[1]+2763975236&4294967295,b=w+(S<<4&4294967295|S>>>28),S=C+(b^w^x)+A[4]+1272893353&4294967295,C=b+(S<<11&4294967295|S>>>21),S=x+(C^b^w)+A[7]+4139469664&4294967295,x=C+(S<<16&4294967295|S>>>16),S=w+(x^C^b)+A[10]+3200236656&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(w^x^C)+A[13]+681279174&4294967295,b=w+(S<<4&4294967295|S>>>28),S=C+(b^w^x)+A[0]+3936430074&4294967295,C=b+(S<<11&4294967295|S>>>21),S=x+(C^b^w)+A[3]+3572445317&4294967295,x=C+(S<<16&4294967295|S>>>16),S=w+(x^C^b)+A[6]+76029189&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(w^x^C)+A[9]+3654602809&4294967295,b=w+(S<<4&4294967295|S>>>28),S=C+(b^w^x)+A[12]+3873151461&4294967295,C=b+(S<<11&4294967295|S>>>21),S=x+(C^b^w)+A[15]+530742520&4294967295,x=C+(S<<16&4294967295|S>>>16),S=w+(x^C^b)+A[2]+3299628645&4294967295,w=x+(S<<23&4294967295|S>>>9),S=b+(x^(w|~C))+A[0]+4096336452&4294967295,b=w+(S<<6&4294967295|S>>>26),S=C+(w^(b|~x))+A[7]+1126891415&4294967295,C=b+(S<<10&4294967295|S>>>22),S=x+(b^(C|~w))+A[14]+2878612391&4294967295,x=C+(S<<15&4294967295|S>>>17),S=w+(C^(x|~b))+A[5]+4237533241&4294967295,w=x+(S<<21&4294967295|S>>>11),S=b+(x^(w|~C))+A[12]+1700485571&4294967295,b=w+(S<<6&4294967295|S>>>26),S=C+(w^(b|~x))+A[3]+2399980690&4294967295,C=b+(S<<10&4294967295|S>>>22),S=x+(b^(C|~w))+A[10]+4293915773&4294967295,x=C+(S<<15&4294967295|S>>>17),S=w+(C^(x|~b))+A[1]+2240044497&4294967295,w=x+(S<<21&4294967295|S>>>11),S=b+(x^(w|~C))+A[8]+1873313359&4294967295,b=w+(S<<6&4294967295|S>>>26),S=C+(w^(b|~x))+A[15]+4264355552&4294967295,C=b+(S<<10&4294967295|S>>>22),S=x+(b^(C|~w))+A[6]+2734768916&4294967295,x=C+(S<<15&4294967295|S>>>17),S=w+(C^(x|~b))+A[13]+1309151649&4294967295,w=x+(S<<21&4294967295|S>>>11),S=b+(x^(w|~C))+A[4]+4149444226&4294967295,b=w+(S<<6&4294967295|S>>>26),S=C+(w^(b|~x))+A[11]+3174756917&4294967295,C=b+(S<<10&4294967295|S>>>22),S=x+(b^(C|~w))+A[2]+718787259&4294967295,x=C+(S<<15&4294967295|S>>>17),S=w+(C^(x|~b))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+b&4294967295,E.g[1]=E.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+x&4294967295,E.g[3]=E.g[3]+C&4294967295}s.prototype.u=function(E,b){b===void 0&&(b=E.length);for(var w=b-this.blockSize,A=this.B,x=this.h,C=0;C<b;){if(x==0)for(;C<=w;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<b;)if(A[x++]=E.charCodeAt(C++),x==this.blockSize){i(this,A),x=0;break}}else for(;C<b;)if(A[x++]=E[C++],x==this.blockSize){i(this,A),x=0;break}}this.h=x,this.o+=b},s.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var b=1;b<E.length-8;++b)E[b]=0;var w=8*this.o;for(b=E.length-8;b<E.length;++b)E[b]=w&255,w/=256;for(this.u(E),E=Array(16),b=w=0;4>b;++b)for(var A=0;32>A;A+=8)E[w++]=this.g[b]>>>A&255;return E};function r(E,b){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=b(E)}function o(E,b){this.h=b;for(var w=[],A=!0,x=E.length-1;0<=x;x--){var C=E[x]|0;A&&C==b||(w[x]=C,A=!1)}this.g=w}var a={};function l(E){return-128<=E&&128>E?r(E,function(b){return new o([b|0],0>b?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return y(c(-E));for(var b=[],w=1,A=0;E>=w;A++)b[A]=E/w|0,w*=4294967296;return new o(b,0)}function u(E,b){if(E.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(E.charAt(0)=="-")return y(u(E.substring(1),b));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(b,8)),A=f,x=0;x<E.length;x+=8){var C=Math.min(8,E.length-x),S=parseInt(E.substring(x,x+C),b);8>C?(C=c(Math.pow(b,C)),A=A.j(C).add(c(S))):(A=A.j(w),A=A.add(c(S)))}return A}var f=l(0),d=l(1),p=l(16777216);e=o.prototype,e.m=function(){if(_(this))return-y(this).m();for(var E=0,b=1,w=0;w<this.g.length;w++){var A=this.i(w);E+=(0<=A?A:4294967296+A)*b,b*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(m(this))return"0";if(_(this))return"-"+y(this).toString(E);for(var b=c(Math.pow(E,6)),w=this,A="";;){var x=k(w,b).g;w=T(w,x.j(b));var C=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=x,m(w))return C+A;for(;6>C.length;)C="0"+C;A=C+A}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function m(E){if(E.h!=0)return!1;for(var b=0;b<E.g.length;b++)if(E.g[b]!=0)return!1;return!0}function _(E){return E.h==-1}e.l=function(E){return E=T(this,E),_(E)?-1:m(E)?0:1};function y(E){for(var b=E.g.length,w=[],A=0;A<b;A++)w[A]=~E.g[A];return new o(w,~E.h).add(d)}e.abs=function(){return _(this)?y(this):this},e.add=function(E){for(var b=Math.max(this.g.length,E.g.length),w=[],A=0,x=0;x<=b;x++){var C=A+(this.i(x)&65535)+(E.i(x)&65535),S=(C>>>16)+(this.i(x)>>>16)+(E.i(x)>>>16);A=S>>>16,C&=65535,S&=65535,w[x]=S<<16|C}return new o(w,w[w.length-1]&-2147483648?-1:0)};function T(E,b){return E.add(y(b))}e.j=function(E){if(m(this)||m(E))return f;if(_(this))return _(E)?y(this).j(y(E)):y(y(this).j(E));if(_(E))return y(this.j(y(E)));if(0>this.l(p)&&0>E.l(p))return c(this.m()*E.m());for(var b=this.g.length+E.g.length,w=[],A=0;A<2*b;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var x=0;x<E.g.length;x++){var C=this.i(A)>>>16,S=this.i(A)&65535,dt=E.i(x)>>>16,Q=E.i(x)&65535;w[2*A+2*x]+=S*Q,R(w,2*A+2*x),w[2*A+2*x+1]+=C*Q,R(w,2*A+2*x+1),w[2*A+2*x+1]+=S*dt,R(w,2*A+2*x+1),w[2*A+2*x+2]+=C*dt,R(w,2*A+2*x+2)}for(A=0;A<b;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=b;A<2*b;A++)w[A]=0;return new o(w,0)};function R(E,b){for(;(E[b]&65535)!=E[b];)E[b+1]+=E[b]>>>16,E[b]&=65535,b++}function D(E,b){this.g=E,this.h=b}function k(E,b){if(m(b))throw Error("division by zero");if(m(E))return new D(f,f);if(_(E))return b=k(y(E),b),new D(y(b.g),y(b.h));if(_(b))return b=k(E,y(b)),new D(y(b.g),b.h);if(30<E.g.length){if(_(E)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var w=d,A=b;0>=A.l(E);)w=O(w),A=O(A);var x=L(w,1),C=L(A,1);for(A=L(A,2),w=L(w,2);!m(A);){var S=C.add(A);0>=S.l(E)&&(x=x.add(w),C=S),A=L(A,1),w=L(w,1)}return b=T(E,x.j(b)),new D(x,b)}for(x=f;0<=E.l(b);){for(w=Math.max(1,Math.floor(E.m()/b.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),C=c(w),S=C.j(b);_(S)||0<S.l(E);)w-=A,C=c(w),S=C.j(b);m(C)&&(C=d),x=x.add(C),E=T(E,S)}return new D(x,E)}e.A=function(E){return k(this,E).h},e.and=function(E){for(var b=Math.max(this.g.length,E.g.length),w=[],A=0;A<b;A++)w[A]=this.i(A)&E.i(A);return new o(w,this.h&E.h)},e.or=function(E){for(var b=Math.max(this.g.length,E.g.length),w=[],A=0;A<b;A++)w[A]=this.i(A)|E.i(A);return new o(w,this.h|E.h)},e.xor=function(E){for(var b=Math.max(this.g.length,E.g.length),w=[],A=0;A<b;A++)w[A]=this.i(A)^E.i(A);return new o(w,this.h^E.h)};function O(E){for(var b=E.g.length+1,w=[],A=0;A<b;A++)w[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(w,E.h)}function L(E,b){var w=b>>5;b%=32;for(var A=E.g.length-w,x=[],C=0;C<A;C++)x[C]=0<b?E.i(C+w)>>>b|E.i(C+w+1)<<32-b:E.i(C+w);return new o(x,E.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Pi=o}).apply(typeof T_<"u"?T_:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vE,Sa,_E,Kc,wd,yE,bE,wE;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,v){return h==Array.prototype||h==Object.prototype||(h[g]=v.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var g=0;g<h.length;++g){var v=h[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function i(h,g){if(g)t:{var v=s;h=h.split(".");for(var I=0;I<h.length-1;I++){var V=h[I];if(!(V in v))break t;v=v[V]}h=h[h.length-1],I=v[h],g=g(I),g!=I&&g!=null&&t(v,h,{configurable:!0,writable:!0,value:g})}}function r(h,g){h instanceof String&&(h+="");var v=0,I=!1,V={next:function(){if(!I&&v<h.length){var $=v++;return{value:g($,h[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(h){return h||function(){return r(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,v){return h.call.apply(h.bind,arguments)}function f(h,g,v){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),h.apply(g,V)}}return function(){return h.apply(g,arguments)}}function d(h,g,v){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,d.apply(null,arguments)}function p(h,g){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function m(h,g){function v(){}v.prototype=g.prototype,h.aa=g.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(I,V,$){for(var rt=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)rt[ne-2]=arguments[ne];return g.prototype[V].apply(I,rt)}}function _(h){const g=h.length;if(0<g){const v=Array(g);for(let I=0;I<g;I++)v[I]=h[I];return v}return[]}function y(h,g){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(l(I)){const V=h.length||0,$=I.length||0;h.length=V+$;for(let rt=0;rt<$;rt++)h[V+rt]=I[rt]}else h.push(I)}}class T{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function R(h){return/^[\s\xa0]*$/.test(h)}function D(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function k(h){return k[" "](h),h}k[" "]=function(){};var O=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function L(h,g,v){for(const I in h)g.call(v,h[I],I,h)}function E(h,g){for(const v in h)g.call(void 0,h[v],v,h)}function b(h){const g={};for(const v in h)g[v]=h[v];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(h,g){let v,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(v in I)h[v]=I[v];for(let $=0;$<w.length;$++)v=w[$],Object.prototype.hasOwnProperty.call(I,v)&&(h[v]=I[v])}}function x(h){var g=1;h=h.split(":");const v=[];for(;0<g&&h.length;)v.push(h.shift()),g--;return h.length&&v.push(h.join(":")),v}function C(h){a.setTimeout(()=>{throw h},0)}function S(){var h=Nt;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class dt{constructor(){this.h=this.g=null}add(g,v){const I=Q.get();I.set(g,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Q=new T(()=>new at,h=>h.reset());class at{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,mt=!1,Nt=new dt,z=()=>{const h=a.Promise.resolve(void 0);ot=()=>{h.then(At)}};var At=()=>{for(var h;h=S();){try{h.h.call(h.g)}catch(v){C(v)}var g=Q;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}mt=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var Rt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return h}();function Yt(h,g){if(Pt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(O){t:{try{k(g.nodeName);var V=!0;break t}catch{}V=!1}V||(g=null)}}else v=="mouseover"?g=h.fromElement:v=="mouseout"&&(g=h.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ht[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Yt.aa.h.call(this)}}m(Yt,Pt);var Ht={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),st=0;function Z(h,g,v,I,V){this.listener=h,this.proxy=null,this.src=g,this.type=v,this.capture=!!I,this.ha=V,this.key=++st,this.da=this.fa=!1}function ct(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ot(h){this.src=h,this.g={},this.h=0}Ot.prototype.add=function(h,g,v,I,V){var $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);var rt=M(h,g,I,V);return-1<rt?(g=h[rt],v||(g.fa=!1)):(g=new Z(g,this.src,$,!!I,V),g.fa=v,h.push(g)),g};function P(h,g){var v=g.type;if(v in h.g){var I=h.g[v],V=Array.prototype.indexOf.call(I,g,void 0),$;($=0<=V)&&Array.prototype.splice.call(I,V,1),$&&(ct(g),h.g[v].length==0&&(delete h.g[v],h.h--))}}function M(h,g,v,I){for(var V=0;V<h.length;++V){var $=h[V];if(!$.da&&$.listener==g&&$.capture==!!v&&$.ha==I)return V}return-1}var N="closure_lm_"+(1e6*Math.random()|0),B={};function H(h,g,v,I,V){if(Array.isArray(g)){for(var $=0;$<g.length;$++)H(h,g[$],v,I,V);return null}return v=yt(v),h&&h[F]?h.K(g,v,c(I)?!!I.capture:!1,V):U(h,g,v,!1,I,V)}function U(h,g,v,I,V,$){if(!g)throw Error("Invalid event type");var rt=c(V)?!!V.capture:!!V,ne=nt(h);if(ne||(h[N]=ne=new Ot(h)),v=ne.add(g,v,I,rt,$),v.proxy)return v;if(I=it(),v.proxy=I,I.src=h,I.listener=v,h.addEventListener)Rt||(V=rt),V===void 0&&(V=!1),h.addEventListener(g.toString(),I,V);else if(h.attachEvent)h.attachEvent(W(g.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function it(){function h(v){return g.call(h.src,h.listener,v)}const g=pt;return h}function J(h,g,v,I,V){if(Array.isArray(g))for(var $=0;$<g.length;$++)J(h,g[$],v,I,V);else I=c(I)?!!I.capture:!!I,v=yt(v),h&&h[F]?(h=h.i,g=String(g).toString(),g in h.g&&($=h.g[g],v=M($,v,I,V),-1<v&&(ct($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete h.g[g],h.h--)))):h&&(h=nt(h))&&(g=h.g[g.toString()],h=-1,g&&(h=M(g,v,I,V)),(v=-1<h?g[h]:null)&&K(v))}function K(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[F])P(g.i,h);else{var v=h.type,I=h.proxy;g.removeEventListener?g.removeEventListener(v,I,h.capture):g.detachEvent?g.detachEvent(W(v),I):g.addListener&&g.removeListener&&g.removeListener(I),(v=nt(g))?(P(v,h),v.h==0&&(v.src=null,g[N]=null)):ct(h)}}}function W(h){return h in B?B[h]:B[h]="on"+h}function pt(h,g){if(h.da)h=!0;else{g=new Yt(g,this);var v=h.listener,I=h.ha||h.src;h.fa&&K(h),h=v.call(I,g)}return h}function nt(h){return h=h[N],h instanceof Ot?h:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(h){return typeof h=="function"?h:(h[ht]||(h[ht]=function(g){return h.handleEvent(g)}),h[ht])}function vt(){et.call(this),this.i=new Ot(this),this.M=this,this.F=null}m(vt,et),vt.prototype[F]=!0,vt.prototype.removeEventListener=function(h,g,v,I){J(this,h,g,v,I)};function It(h,g){var v,I=h.F;if(I)for(v=[];I;I=I.F)v.push(I);if(h=h.M,I=g.type||g,typeof g=="string")g=new Pt(g,h);else if(g instanceof Pt)g.target=g.target||h;else{var V=g;g=new Pt(I,h),A(g,V)}if(V=!0,v)for(var $=v.length-1;0<=$;$--){var rt=g.g=v[$];V=Vt(rt,I,!0,g)&&V}if(rt=g.g=h,V=Vt(rt,I,!0,g)&&V,V=Vt(rt,I,!1,g)&&V,v)for($=0;$<v.length;$++)rt=g.g=v[$],V=Vt(rt,I,!1,g)&&V}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var v=h.g[g],I=0;I<v.length;I++)ct(v[I]);delete h.g[g],h.h--}}this.F=null},vt.prototype.K=function(h,g,v,I){return this.i.add(String(h),g,!1,v,I)},vt.prototype.L=function(h,g,v,I){return this.i.add(String(h),g,!0,v,I)};function Vt(h,g,v,I){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,$=0;$<g.length;++$){var rt=g[$];if(rt&&!rt.da&&rt.capture==v){var ne=rt.listener,Ne=rt.ha||rt.src;rt.fa&&P(h.i,rt),V=ne.call(Ne,I)!==!1&&V}}return V&&!I.defaultPrevented}function we(h,g,v){if(typeof h=="function")v&&(h=d(h,v));else if(h&&typeof h.handleEvent=="function")h=d(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Te(h){h.g=we(()=>{h.g=null,h.i&&(h.i=!1,Te(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class un extends et{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(h){et.call(this),this.h=h,this.g={}}m(Ce,et);var Hn=[];function Yi(h){L(h.g,function(g,v){this.g.hasOwnProperty(v)&&K(g)},h),h.g={}}Ce.prototype.N=function(){Ce.aa.N.call(this),Yi(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=a.JSON.stringify,sn=a.JSON.parse,Y=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function tt(){}tt.prototype.h=null;function Ct(h){return h.h||(h.h=h.i())}function Kt(){}var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function In(){Pt.call(this,"d")}m(In,Pt);function Sn(){Pt.call(this,"c")}m(Sn,Pt);var yn={},Br=null;function Es(){return Br=Br||new vt}yn.La="serverreachability";function Xl(h){Pt.call(this,yn.La,h)}m(Xl,Pt);function Is(h){const g=Es();It(g,new Xl(g))}yn.STAT_EVENT="statevent";function na(h,g){Pt.call(this,yn.STAT_EVENT,h),this.stat=g}m(na,Pt);function Oe(h){const g=Es();It(g,new na(g,h))}yn.Ma="timingevent";function Ur(h,g){Pt.call(this,yn.Ma,h),this.size=g}m(Ur,Pt);function ni(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function tA(h,g,v,I,V,$){h.info(function(){if(h.g)if($)for(var rt="",ne=$.split("&"),Ne=0;Ne<ne.length;Ne++){var qt=ne[Ne].split("=");if(1<qt.length){var He=qt[0];qt=qt[1];var je=He.split("_");rt=2<=je.length&&je[1]=="type"?rt+(He+"="+qt+"&"):rt+(He+"=redacted&")}}else rt=null;else rt=$;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+g+`
`+v+`
`+rt})}function eA(h,g,v,I,V,$,rt){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+g+`
`+v+`
`+$+" "+rt})}function Hr(h,g,v,I){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+sA(h,v)+(I?" "+I:"")})}function nA(h,g){h.info(function(){return"TIMEOUT: "+g})}qi.prototype.info=function(){};function sA(h,g){if(!h.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var I=v[h];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var rt=1;rt<V.length;rt++)V[rt]=""}}}}return Ee(v)}catch{return g}}var Ql={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gh;function Jl(){}m(Jl,tt),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},Gh=new Jl;function si(h,g,v,I){this.j=h,this.i=g,this.l=v,this.R=I||1,this.U=new Ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}var am={},Xh={};function Qh(h,g,v){h.L=1,h.v=nc(Ss(g)),h.m=v,h.P=!0,lm(h,null)}function lm(h,g){h.F=Date.now(),Zl(h),h.A=Ss(h.v);var v=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),Tm(v.i,"t",I),h.C=0,v=h.j.J,h.h=new om,h.g=Bm(h.j,v?g:null,!h.m),0<h.O&&(h.M=new un(d(h.Y,h,h.g),h.O)),g=h.U,v=h.g,I=h.ca;var V="readystatechange";Array.isArray(V)||(V&&(Hn[0]=V.toString()),V=Hn);for(var $=0;$<V.length;$++){var rt=H(v,V[$],I||g.handleEvent,!1,g.h||g);if(!rt)break;g.g[rt.key]=rt}g=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),Is(),tA(h.i,h.u,h.A,h.l,h.R,h.m)}si.prototype.ca=function(h){h=h.target;const g=this.M;g&&As(h)==3?g.j():this.Y(h)},si.prototype.Y=function(h){try{if(h==this.g)t:{const je=As(this.g);var g=this.g.Ba();const Wr=this.g.Z();if(!(3>je)&&(je!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||je!=4||g==7||(g==8||0>=Wr?Is(3):Is(2)),Jh(this);var v=this.g.Z();this.X=v;e:if(cm(this)){var I=Pm(this.g);h="";var V=I.length,$=As(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ki(this),sa(this);var rt="";break e}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,h+=this.h.i.decode(I[g],{stream:!($&&g==V-1)});I.length=0,this.h.g+=h,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=v==200,eA(this.i,this.u,this.A,this.l,this.R,je,v),this.o){if(this.T&&!this.K){e:{if(this.g){var ne,Ne=this.g;if((ne=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(ne)){var qt=ne;break e}}qt=null}if(v=qt)Hr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,v);else{this.o=!1,this.s=3,Oe(12),Ki(this),sa(this);break t}}if(this.P){v=!0;let jn;for(;!this.J&&this.C<rt.length;)if(jn=iA(this,rt),jn==Xh){je==4&&(this.s=4,Oe(14),v=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==am){this.s=4,Oe(15),Hr(this.i,this.l,rt,"[Invalid Chunk]"),v=!1;break}else Hr(this.i,this.l,jn,null),Zh(this,jn);if(cm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||rt.length!=0||this.h.h||(this.s=1,Oe(16),v=!1),this.o=this.o&&v,!v)Hr(this.i,this.l,rt,"[Invalid Chunked Response]"),Ki(this),sa(this);else if(0<rt.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),of(He),He.M=!0,Oe(11))}}else Hr(this.i,this.l,rt,null),Zh(this,rt);je==4&&Ki(this),this.o&&!this.J&&(je==4?Lm(this.j,this):(this.o=!1,Zl(this)))}else wA(this.g),v==400&&0<rt.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Ki(this),sa(this)}}}catch{}finally{}};function cm(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function iA(h,g){var v=h.C,I=g.indexOf(`
`,v);return I==-1?Xh:(v=Number(g.substring(v,I)),isNaN(v)?am:(I+=1,I+v>g.length?Xh:(g=g.slice(I,I+v),h.C=I+v,g)))}si.prototype.cancel=function(){this.J=!0,Ki(this)};function Zl(h){h.S=Date.now()+h.I,um(h,h.I)}function um(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ni(d(h.ba,h),g)}function Jh(h){h.B&&(a.clearTimeout(h.B),h.B=null)}si.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(nA(this.i,this.A),this.L!=2&&(Is(),Oe(17)),Ki(this),this.s=2,sa(this)):um(this,this.S-h)};function sa(h){h.j.G==0||h.J||Lm(h.j,h)}function Ki(h){Jh(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,Yi(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function Zh(h,g){try{var v=h.j;if(v.G!=0&&(v.g==h||tf(v.h,h))){if(!h.K&&tf(v.h,h)&&v.G==3){try{var I=v.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)lc(v),oc(v);else break t;rf(v),Oe(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=ni(d(v.Za,v),6e3));if(1>=dm(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Xi(v,11)}else if((h.K||v.g==h)&&lc(v),!R(g))for(V=v.Da.g.parse(g),g=0;g<V.length;g++){let qt=V[g];if(v.T=qt[0],qt=qt[1],v.G==2)if(qt[0]=="c"){v.K=qt[1],v.ia=qt[2];const He=qt[3];He!=null&&(v.la=He,v.j.info("VER="+v.la));const je=qt[4];je!=null&&(v.Aa=je,v.j.info("SVER="+v.Aa));const Wr=qt[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(I=1.5*Wr,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const jn=h.g;if(jn){const uc=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uc){var $=I.h;$.g||uc.indexOf("spdy")==-1&&uc.indexOf("quic")==-1&&uc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ef($,$.h),$.h=null))}if(I.D){const af=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(I.ya=af,ce(I.I,I.D,af))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var rt=h;if(I.qa=Fm(I,I.J?I.ia:null,I.W),rt.K){pm(I.h,rt);var ne=rt,Ne=I.L;Ne&&(ne.I=Ne),ne.B&&(Jh(ne),Zl(ne)),I.g=rt}else Om(I);0<v.i.length&&ac(v)}else qt[0]!="stop"&&qt[0]!="close"||Xi(v,7);else v.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?Xi(v,7):sf(v):qt[0]!="noop"&&v.l&&v.l.ta(qt),v.v=0)}}Is(4)}catch{}}var rA=class{constructor(h,g){this.g=h,this.map=g}};function hm(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fm(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function dm(h){return h.h?1:h.g?h.g.size:0}function tf(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function ef(h,g){h.g?h.g.add(g):h.h=g}function pm(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}hm.prototype.cancel=function(){if(this.i=gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gm(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const v of h.g.values())g=g.concat(v.D);return g}return _(h.i)}function oA(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],v=h.length,I=0;I<v;I++)g.push(h[I]);return g}g=[],v=0;for(I in h)g[v++]=h[I];return g}function aA(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var v=0;v<h;v++)g.push(v);return g}g=[],v=0;for(const I in h)g[v++]=I;return g}}}function mm(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var v=aA(h),I=oA(h),V=I.length,$=0;$<V;$++)g.call(void 0,I[$],v&&v[$],h)}var vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lA(h,g){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var I=h[v].indexOf("="),V=null;if(0<=I){var $=h[v].substring(0,I);V=h[v].substring(I+1)}else $=h[v];g($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Gi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Gi){this.h=h.h,tc(this,h.j),this.o=h.o,this.g=h.g,ec(this,h.s),this.l=h.l;var g=h.i,v=new oa;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),_m(this,v),this.m=h.m}else h&&(g=String(h).match(vm))?(this.h=!1,tc(this,g[1]||"",!0),this.o=ia(g[2]||""),this.g=ia(g[3]||"",!0),ec(this,g[4]),this.l=ia(g[5]||"",!0),_m(this,g[6]||"",!0),this.m=ia(g[7]||"")):(this.h=!1,this.i=new oa(null,this.h))}Gi.prototype.toString=function(){var h=[],g=this.j;g&&h.push(ra(g,ym,!0),":");var v=this.g;return(v||g=="file")&&(h.push("//"),(g=this.o)&&h.push(ra(g,ym,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ra(v,v.charAt(0)=="/"?hA:uA,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ra(v,dA)),h.join("")};function Ss(h){return new Gi(h)}function tc(h,g,v){h.j=v?ia(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function ec(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function _m(h,g,v){g instanceof oa?(h.i=g,pA(h.i,h.h)):(v||(g=ra(g,fA)),h.i=new oa(g,h.h))}function ce(h,g,v){h.i.set(g,v)}function nc(h){return ce(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ia(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ra(h,g,v){return typeof h=="string"?(h=encodeURI(h).replace(g,cA),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function cA(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ym=/[#\/\?@]/g,uA=/[#\?:]/g,hA=/[#\?]/g,fA=/[#\?@]/g,dA=/#/g;function oa(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function ii(h){h.g||(h.g=new Map,h.h=0,h.i&&lA(h.i,function(g,v){h.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}e=oa.prototype,e.add=function(h,g){ii(this),this.i=null,h=jr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(g),this.h+=1,this};function bm(h,g){ii(h),g=jr(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function wm(h,g){return ii(h),g=jr(h,g),h.g.has(g)}e.forEach=function(h,g){ii(this),this.g.forEach(function(v,I){v.forEach(function(V){h.call(g,V,I,this)},this)},this)},e.na=function(){ii(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let I=0;I<g.length;I++){const V=h[I];for(let $=0;$<V.length;$++)v.push(g[I])}return v},e.V=function(h){ii(this);let g=[];if(typeof h=="string")wm(this,h)&&(g=g.concat(this.g.get(jr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)g=g.concat(h[v])}return g},e.set=function(h,g){return ii(this),this.i=null,h=jr(this,h),wm(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},e.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function Tm(h,g,v){bm(h,g),0<v.length&&(h.i=null,h.g.set(jr(h,g),_(v)),h.h+=v.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var I=g[v];const $=encodeURIComponent(String(I)),rt=this.V(I);for(I=0;I<rt.length;I++){var V=$;rt[I]!==""&&(V+="="+encodeURIComponent(String(rt[I]))),h.push(V)}}return this.i=h.join("&")};function jr(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function pA(h,g){g&&!h.j&&(ii(h),h.i=null,h.g.forEach(function(v,I){var V=I.toLowerCase();I!=V&&(bm(this,I),Tm(this,V,v))},h)),h.j=g}function gA(h,g){const v=new qi;if(a.Image){const I=new Image;I.onload=p(ri,v,"TestLoadImage: loaded",!0,g,I),I.onerror=p(ri,v,"TestLoadImage: error",!1,g,I),I.onabort=p(ri,v,"TestLoadImage: abort",!1,g,I),I.ontimeout=p(ri,v,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else g(!1)}function mA(h,g){const v=new qi,I=new AbortController,V=setTimeout(()=>{I.abort(),ri(v,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:I.signal}).then($=>{clearTimeout(V),$.ok?ri(v,"TestPingServer: ok",!0,g):ri(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),ri(v,"TestPingServer: error",!1,g)})}function ri(h,g,v,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(v)}catch{}}function vA(){this.g=new Y}function _A(h,g,v){const I=v||"";try{mm(h,function(V,$){let rt=V;c(V)&&(rt=Ee(V)),g.push(I+$+"="+encodeURIComponent(rt))})}catch(V){throw g.push(I+"type="+encodeURIComponent("_badmap")),V}}function sc(h){this.l=h.Ub||null,this.j=h.eb||!1}m(sc,tt),sc.prototype.g=function(){return new ic(this.l,this.j)},sc.prototype.i=function(h){return function(){return h}}({});function ic(h,g){vt.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(ic,vt),e=ic.prototype,e.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,la(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Em(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Em(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?aa(this):la(this),this.readyState==3&&Em(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,aa(this))},e.Qa=function(h){this.g&&(this.response=h,aa(this))},e.ga=function(){this.g&&aa(this)};function aa(h){h.readyState=4,h.l=null,h.j=null,h.v=null,la(h)}e.setRequestHeader=function(h,g){this.u.append(h,g)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=g.next();return h.join(`\r
`)};function la(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Im(h){let g="";return L(h,function(v,I){g+=I,g+=":",g+=v,g+=`\r
`}),g}function nf(h,g,v){t:{for(I in v){var I=!1;break t}I=!0}I||(v=Im(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):ce(h,g,v))}function ge(h){vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ge,vt);var yA=/^https?$/i,bA=["POST","PUT"];e=ge.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,g,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gh.g(),this.v=this.o?Ct(this.o):Ct(Gh),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch($){Sm(this,$);return}if(h=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)v.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())v.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),V=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bA,g,void 0))||I||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,rt]of v)this.g.setRequestHeader($,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xm(this),this.u=!0,this.g.send(h),this.u=!1}catch($){Sm(this,$)}};function Sm(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,Am(h),rc(h)}function Am(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,It(this,"complete"),It(this,"abort"),rc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rc(this,!0)),ge.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Cm(this):this.bb())},e.bb=function(){Cm(this)};function Cm(h){if(h.h&&typeof o<"u"&&(!h.v[1]||As(h)!=4||h.Z()!=2)){if(h.u&&As(h)==4)we(h.Ea,0,h);else if(It(h,"readystatechange"),As(h)==4){h.h=!1;try{const rt=h.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var I;if(I=rt===0){var V=String(h.D).match(vm)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!yA.test(V?V.toLowerCase():"")}v=I}if(v)It(h,"complete"),It(h,"success");else{h.m=6;try{var $=2<As(h)?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.Z()+"]",Am(h)}}finally{rc(h)}}}}function rc(h,g){if(h.g){xm(h);const v=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||It(h,"ready");try{v.onreadystatechange=I}catch{}}}function xm(h){h.I&&(a.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function As(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<As(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),sn(g)}};function Pm(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function wA(h){const g={};h=(h.g&&2<=As(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(R(h[I]))continue;var v=x(h[I]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=g[V]||[];g[V]=$,$.push(v)}E(g,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(h,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||g}function km(h){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,h),this.cb=ca("retryDelaySeedMs",1e4,h),this.Wa=ca("forwardChannelMaxRetries",2,h),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new hm(h&&h.concurrentRequestLimit),this.Da=new vA,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=km.prototype,e.la=8,e.G=1,e.connect=function(h,g,v,I){Oe(0),this.W=h,this.H=g||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Fm(this,null,this.W),ac(this)};function sf(h){if(Dm(h),h.G==3){var g=h.U++,v=Ss(h.I);if(ce(v,"SID",h.K),ce(v,"RID",g),ce(v,"TYPE","terminate"),ua(h,v),g=new si(h,h.j,g),g.L=2,g.v=nc(Ss(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=Bm(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Zl(g)}$m(h)}function oc(h){h.g&&(of(h),h.g.cancel(),h.g=null)}function Dm(h){oc(h),h.u&&(a.clearTimeout(h.u),h.u=null),lc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function ac(h){if(!fm(h.h)&&!h.s){h.s=!0;var g=h.Ga;ot||z(),mt||(ot(),mt=!0),Nt.add(g,h),h.B=0}}function TA(h,g){return dm(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ni(d(h.Ga,h,g),Vm(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const V=new si(this,this.j,h);let $=this.o;if(this.S&&($?($=b($),A($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=Mm(this,V,g),v=Ss(this.I),ce(v,"RID",h),ce(v,"CVER",22),this.D&&ce(v,"X-HTTP-Session-Id",this.D),ua(this,v),$&&(this.O?g="headers="+encodeURIComponent(String(Im($)))+"&"+g:this.m&&nf(v,this.m,$)),ef(this.h,V),this.Ua&&ce(v,"TYPE","init"),this.P?(ce(v,"$req",g),ce(v,"SID","null"),V.T=!0,Qh(V,v,null)):Qh(V,v,g),this.G=2}}else this.G==3&&(h?Rm(this,h):this.i.length==0||fm(this.h)||Rm(this))};function Rm(h,g){var v;g?v=g.l:v=h.U++;const I=Ss(h.I);ce(I,"SID",h.K),ce(I,"RID",v),ce(I,"AID",h.T),ua(h,I),h.m&&h.o&&nf(I,h.m,h.o),v=new si(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),g&&(h.i=g.D.concat(h.i)),g=Mm(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ef(h.h,v),Qh(v,I,g)}function ua(h,g){h.H&&L(h.H,function(v,I){ce(g,I,v)}),h.l&&mm({},function(v,I){ce(g,I,v)})}function Mm(h,g,v){v=Math.min(h.i.length,v);var I=h.l?d(h.l.Na,h.l,h):null;t:{var V=h.i;let $=-1;for(;;){const rt=["count="+v];$==-1?0<v?($=V[0].g,rt.push("ofs="+$)):$=0:rt.push("ofs="+$);let ne=!0;for(let Ne=0;Ne<v;Ne++){let qt=V[Ne].g;const He=V[Ne].map;if(qt-=$,0>qt)$=Math.max(0,V[Ne].g-100),ne=!1;else try{_A(He,rt,"req"+qt+"_")}catch{I&&I(He)}}if(ne){I=rt.join("&");break t}}}return h=h.i.splice(0,v),g.D=h,I}function Om(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;ot||z(),mt||(ot(),mt=!0),Nt.add(g,h),h.v=0}}function rf(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ni(d(h.Fa,h),Vm(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Nm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ni(d(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),oc(this),Nm(this))};function of(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Nm(h){h.g=new si(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=Ss(h.qa);ce(g,"RID","rpc"),ce(g,"SID",h.K),ce(g,"AID",h.T),ce(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&ce(g,"TO",h.ja),ce(g,"TYPE","xmlhttp"),ua(h,g),h.m&&h.o&&nf(g,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=nc(Ss(g)),v.m=null,v.P=!0,lm(v,h)}e.Za=function(){this.C!=null&&(this.C=null,oc(this),rf(this),Oe(19))};function lc(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Lm(h,g){var v=null;if(h.g==g){lc(h),of(h),h.g=null;var I=2}else if(tf(h.h,g))v=g.D,pm(h.h,g),I=1;else return;if(h.G!=0){if(g.o)if(I==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var V=h.B;I=Es(),It(I,new Ur(I,v)),ac(h)}else Om(h);else if(V=g.s,V==3||V==0&&0<g.X||!(I==1&&TA(h,g)||I==2&&rf(h)))switch(v&&0<v.length&&(g=h.h,g.i=g.i.concat(v)),V){case 1:Xi(h,5);break;case 4:Xi(h,10);break;case 3:Xi(h,6);break;default:Xi(h,2)}}}function Vm(h,g){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*g}function Xi(h,g){if(h.j.info("Error code "+g),g==2){var v=d(h.fb,h),I=h.Xa;const V=!I;I=new Gi(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tc(I,"https"),nc(I),V?gA(I.toString(),v):mA(I.toString(),v)}else Oe(2);h.G=0,h.l&&h.l.sa(g),$m(h),Dm(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function $m(h){if(h.G=0,h.ka=[],h.l){const g=gm(h.h);(g.length!=0||h.i.length!=0)&&(y(h.ka,g),y(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function Fm(h,g,v){var I=v instanceof Gi?Ss(v):new Gi(v);if(I.g!="")g&&(I.g=g+"."+I.g),ec(I,I.s);else{var V=a.location;I=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var $=new Gi(null);I&&tc($,I),g&&($.g=g),V&&ec($,V),v&&($.l=v),I=$}return v=h.D,g=h.ya,v&&g&&ce(I,v,g),ce(I,"VER",h.la),ua(h,I),I}function Bm(h,g,v){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new ge(new sc({eb:v})):new ge(h.pa),g.Ha(h.J),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Um(){}e=Um.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function cc(){}cc.prototype.g=function(h,g){return new bn(h,g)};function bn(h,g){vt.call(this),this.g=new km(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!R(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new zr(this)}m(bn,vt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){sf(this.g)},bn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Ee(h),h=v);g.i.push(new rA(g.Ya++,h)),g.G==3&&ac(g)},bn.prototype.N=function(){this.g.l=null,delete this.j,sf(this.g),delete this.g,bn.aa.N.call(this)};function Hm(h){In.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){t:{for(const v in g){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}m(Hm,In);function jm(){Sn.call(this),this.status=1}m(jm,Sn);function zr(h){this.g=h}m(zr,Um),zr.prototype.ua=function(){It(this.g,"a")},zr.prototype.ta=function(h){It(this.g,new Hm(h))},zr.prototype.sa=function(h){It(this.g,new jm)},zr.prototype.ra=function(){It(this.g,"b")},cc.prototype.createWebChannel=cc.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,wE=function(){return new cc},bE=function(){return Es()},yE=yn,wd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ql.NO_ERROR=0,Ql.TIMEOUT=8,Ql.HTTP_ERROR=6,Kc=Ql,rm.COMPLETE="complete",_E=rm,Kt.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Sa=Kt,ge.prototype.listenOnce=ge.prototype.L,ge.prototype.getLastError=ge.prototype.Ka,ge.prototype.getLastErrorCode=ge.prototype.Ba,ge.prototype.getStatus=ge.prototype.Z,ge.prototype.getResponseJson=ge.prototype.Oa,ge.prototype.getResponseText=ge.prototype.oa,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Ha,vE=ge}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const E_="@firebase/firestore",I_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new Cp("@firebase/firestore");function Jr(){return Tr.logLevel}function ut(e,...t){if(Tr.logLevel<=Bt.DEBUG){const n=t.map(Fp);Tr.debug(`Firestore (${jo}): ${e}`,...n)}}function qs(e,...t){if(Tr.logLevel<=Bt.ERROR){const n=t.map(Fp);Tr.error(`Firestore (${jo}): ${e}`,...n)}}function Eo(e,...t){if(Tr.logLevel<=Bt.WARN){const n=t.map(Fp);Tr.warn(`Firestore (${jo}): ${e}`,...n)}}function Fp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,TE(e,s,n)}function TE(e,t,n){let s=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw qs(s),new Error(s)}function Jt(e,t,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,e||TE(t,i,s)}function Mt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Zs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}}class aO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lO{constructor(t){this.t=t,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Jt(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ki,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ki)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Jt(typeof s.accessToken=="string",31837,{l:s}),new EE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new qe(t)}}class cO{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uO{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new cO(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hO{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Jt(this.o===void 0,3512);const s=r=>{r.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,ut("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new S_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new S_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=fO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%62))}return s}}function Ft(e,t){return e<t?-1:e>t?1:0}function Td(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=e.codePointAt(n),i=t.codePointAt(n);if(s!==i){if(s<128&&i<128)return Ft(s,i);{const r=IE(),o=dO(r.encode(A_(e,n)),r.encode(A_(t,n)));return o!==0?o:Ft(s,i)}}n+=s>65535?2:1}return Ft(e.length,t.length)}function A_(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function dO(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ft(e[n],t[n]);return Ft(e.length,t.length)}function Io(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=-62135596800,x_=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(t){return Se.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*x_);return new Se(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<C_)throw new bt(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x_}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-C_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(t){return new kt(t)}static min(){return new kt(new Se(0,0))}static max(){return new kt(new Se(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="__name__";class is{constructor(t,n,s){n===void 0?n=0:n>t.length&&St(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&St(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return is.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof is?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=is.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Ft(t.length,n.length)}static compareSegments(t,n){const s=is.isNumericId(t),i=is.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?is.extractNumericId(t).compare(is.extractNumericId(n)):Td(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pi.fromString(t.substring(4,t.length-2))}}class me extends is{construct(t,n,s){return new me(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new bt(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const pO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends is{construct(t,n,s){return new Fe(t,n,s)}static isValidIdentifier(t){return pO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P_}static keyField(){return new Fe([P_])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new bt(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new bt(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new bt(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.path=t}static fromPath(t){return new wt(me.fromString(t))}static fromName(t){return new wt(me.fromString(t).popFirst(5))}static empty(){return new wt(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&me.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return me.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new me(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function gO(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(s===1e9?new Se(n+1,0):new Se(n,s));return new Oi(i,wt.empty(),t)}function mO(e){return new Oi(e.readTime,e.key,pl)}class Oi{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Oi(kt.min(),wt.empty(),pl)}static max(){return new Oi(kt.max(),wt.empty(),pl)}}function vO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=wt.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==_O)throw e;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&St(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new j((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):j.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):j.reject(n)}static resolve(t){return new j((n,s)=>{n(t)})}static reject(t){return new j((n,s)=>{s(t)})}static waitFor(t){return new j((n,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},l=>s(l))}),o=!0,r===i&&n()})}static or(t){let n=j.resolve(!1);for(const s of t)n=n.next(i=>i?j.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new j((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(t,n){return new j((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}}function bO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wo(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Sh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=-1;function Ah(e){return e==null}function Iu(e){return e===0&&1/e==-1/0}function wO(e){return typeof e=="number"&&Number.isInteger(e)&&!Iu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="";function TO(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=k_(t)),t=EO(e.get(n),t);return k_(t)}function EO(e,t){let n=t;const s=e.length;for(let i=0;i<s;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case AE:n+="";break;default:n+=r}}return n}function k_(e){return e+AE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function CE(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,n){this.comparator=t,this.root=n||Le.EMPTY}insert(t,n){return new pe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Le.BLACK,null,null))}remove(t){return new pe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Le.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vc(this.root,t,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vc(this.root,t,this.comparator,!0)}}class vc{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Le{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Le.RED,this.left=i??Le.EMPTY,this.right=r??Le.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Le(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Le.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Le.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St(43730,{key:this.key,value:this.value});if(this.right.isRed())throw St(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw St(27949);return t+(this.isRed()?0:1)}}Le.EMPTY=null,Le.RED=!0,Le.BLACK=!1;Le.EMPTY=new class{constructor(){this.size=0}get key(){throw St(57766)}get value(){throw St(16141)}get color(){throw St(16727)}get left(){throw St(29726)}get right(){throw St(36894)}copy(t,n,s,i,r){return this}insert(t,n,s){return new Le(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.comparator=t,this.data=new pe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(t){return new R_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ae)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ae(this.comparator);return n.data=t,n}}class R_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this.fields=t,t.sort(Fe.comparator)}static empty(){return new Wn([])}unionWith(t){let n=new Ae(Fe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Wn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Io(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new xE("Invalid base64 string: "+r):r}}(t);return new Ue(n)}static fromUint8Array(t){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Ue(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ue.EMPTY_BYTE_STRING=new Ue("");const IO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(e){if(Jt(!!e,39018),typeof e=="string"){let t=0;const n=IO.exec(e);if(Jt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:_e(e.seconds),nanos:_e(e.nanos)}}function _e(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Li(e){return typeof e=="string"?Ue.fromBase64String(e):Ue.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="server_timestamp",kE="__type__",DE="__previous_value__",RE="__local_write_time__";function Up(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[kE])===null||n===void 0?void 0:n.stringValue)===PE}function Ch(e){const t=e.mapValue.fields[DE];return Up(t)?Ch(t):t}function gl(e){const t=Ni(e.mapValue.fields[RE].timestampValue);return new Se(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t,n,s,i,r,o,a,l,c,u){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Su="(default)";class ml{constructor(t,n){this.projectId=t,this.database=n||Su}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===Su}isEqual(t){return t instanceof ml&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="__type__",AO="__max__",_c={mapValue:{}},OE="__vector__",Au="value";function Vi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Up(e)?4:xO(e)?9007199254740991:CO(e)?10:11:St(28295,{value:e})}function ms(e,t){if(e===t)return!0;const n=Vi(e);if(n!==Vi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gl(e).isEqual(gl(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Ni(i.timestampValue),a=Ni(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return Li(i.bytesValue).isEqual(Li(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return _e(i.geoPointValue.latitude)===_e(r.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return _e(i.integerValue)===_e(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=_e(i.doubleValue),a=_e(r.doubleValue);return o===a?Iu(o)===Iu(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Io(e.arrayValue.values||[],t.arrayValue.values||[],ms);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(D_(o)!==D_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ms(o[l],a[l])))return!1;return!0}(e,t);default:return St(52216,{left:e})}}function vl(e,t){return(e.values||[]).find(n=>ms(n,t))!==void 0}function So(e,t){if(e===t)return 0;const n=Vi(e),s=Vi(t);if(n!==s)return Ft(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=_e(r.integerValue||r.doubleValue),l=_e(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return M_(e.timestampValue,t.timestampValue);case 4:return M_(gl(e),gl(t));case 5:return Td(e.stringValue,t.stringValue);case 6:return function(r,o){const a=Li(r),l=Li(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ft(a[c],l[c]);if(u!==0)return u}return Ft(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=Ft(_e(r.latitude),_e(o.latitude));return a!==0?a:Ft(_e(r.longitude),_e(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return O_(e.arrayValue,t.arrayValue);case 10:return function(r,o){var a,l,c,u;const f=r.fields||{},d=o.fields||{},p=(a=f[Au])===null||a===void 0?void 0:a.arrayValue,m=(l=d[Au])===null||l===void 0?void 0:l.arrayValue,_=Ft(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:O_(p,m)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===_c.mapValue&&o===_c.mapValue)return 0;if(r===_c.mapValue)return 1;if(o===_c.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const d=Td(l[f],u[f]);if(d!==0)return d;const p=So(a[l[f]],c[u[f]]);if(p!==0)return p}return Ft(l.length,u.length)}(e.mapValue,t.mapValue);default:throw St(23264,{Pe:n})}}function M_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=Ni(e),s=Ni(t),i=Ft(n.seconds,s.seconds);return i!==0?i:Ft(n.nanos,s.nanos)}function O_(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=So(n[i],s[i]);if(r)return r}return Ft(n.length,s.length)}function Ao(e){return Ed(e)}function Ed(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=Ni(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Li(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return wt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Ed(r);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Ed(n.fields[o])}`;return i+"}"}(e.mapValue):St(61005,{value:e})}function Gc(e){switch(Vi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ch(e);return t?16+Gc(t):16;case 5:return 2*e.stringValue.length;case 6:return Li(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+Gc(r),0)}(e.arrayValue);case 10:case 11:return function(s){let i=0;return kr(s.fields,(r,o)=>{i+=r.length+Gc(o)}),i}(e.mapValue);default:throw St(13486,{value:e})}}function Id(e){return!!e&&"integerValue"in e}function Hp(e){return!!e&&"arrayValue"in e}function N_(e){return!!e&&"nullValue"in e}function L_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xc(e){return!!e&&"mapValue"in e}function CO(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[ME])===null||n===void 0?void 0:n.stringValue)===OE}function ja(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return kr(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=ja(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ja(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===AO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.value=t}static empty(){return new Pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Xc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ja(n)}setAll(t){let n=Fe.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=ja(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ms(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];Xc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){kr(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new Pn(ja(this.value))}}function NE(e){const t=[];return kr(e.fields,(n,s)=>{const i=new Fe([n]);if(Xc(s)){const r=NE(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ge(t,0,kt.min(),kt.min(),kt.min(),Pn.empty(),0)}static newFoundDocument(t,n,s,i){return new Ge(t,1,n,kt.min(),s,i,0)}static newNoDocument(t,n){return new Ge(t,2,n,kt.min(),kt.min(),Pn.empty(),0)}static newUnknownDocument(t,n){return new Ge(t,3,n,kt.min(),kt.min(),Pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ge&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,n){this.position=t,this.inclusive=n}}function V_(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=wt.comparator(wt.fromName(o.referenceValue),n.key):s=So(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function $_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ms(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t,n="asc"){this.field=t,this.dir=n}}function PO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{}class Ie extends LE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new DO(t,n,s):n==="array-contains"?new OO(t,s):n==="in"?new NO(t,s):n==="not-in"?new LO(t,s):n==="array-contains-any"?new VO(t,s):new Ie(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new RO(t,s):new MO(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(So(n,this.value)):n!==null&&Vi(this.value)===Vi(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends LE{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new vs(t,n)}matches(t){return VE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function VE(e){return e.op==="and"}function $E(e){return kO(e)&&VE(e)}function kO(e){for(const t of e.filters)if(t instanceof vs)return!1;return!0}function Sd(e){if(e instanceof Ie)return e.field.canonicalString()+e.op.toString()+Ao(e.value);if($E(e))return e.filters.map(t=>Sd(t)).join(",");{const t=e.filters.map(n=>Sd(n)).join(",");return`${e.op}(${t})`}}function FE(e,t){return e instanceof Ie?function(s,i){return i instanceof Ie&&s.op===i.op&&s.field.isEqual(i.field)&&ms(s.value,i.value)}(e,t):e instanceof vs?function(s,i){return i instanceof vs&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&FE(o,i.filters[a]),!0):!1}(e,t):void St(19439)}function BE(e){return e instanceof Ie?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(e):e instanceof vs?function(n){return n.op.toString()+" {"+n.getFilters().map(BE).join(" ,")+"}"}(e):"Filter"}class DO extends Ie{constructor(t,n,s){super(t,n,s),this.key=wt.fromName(s.referenceValue)}matches(t){const n=wt.comparator(t.key,this.key);return this.matchesComparison(n)}}class RO extends Ie{constructor(t,n){super(t,"in",n),this.keys=UE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class MO extends Ie{constructor(t,n){super(t,"not-in",n),this.keys=UE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function UE(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>wt.fromName(s.referenceValue))}class OO extends Ie{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hp(n)&&vl(n.arrayValue,this.value)}}class NO extends Ie{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vl(this.value.arrayValue,n)}}class LO extends Ie{constructor(t,n){super(t,"not-in",n)}matches(t){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vl(this.value.arrayValue,n)}}class VO extends Ie{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Ie=null}}function F_(e,t=null,n=[],s=[],i=null,r=null,o=null){return new $O(e,t,n,s,i,r,o)}function jp(e){const t=Mt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Sd(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Ah(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Ao(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Ao(s)).join(",")),t.Ie=n}return t.Ie}function zp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!PO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!FE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$_(e.startAt,t.startAt)&&$_(e.endAt,t.endAt)}function Ad(e){return wt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function FO(e,t,n,s,i,r,o,a){return new xh(e,t,n,s,i,r,o,a)}function Wp(e){return new xh(e)}function B_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function BO(e){return e.collectionGroup!==null}function za(e){const t=Mt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ee.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Fe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new xu(r,s))}),n.has(Fe.keyField().canonicalString())||t.Ee.push(new xu(Fe.keyField(),s))}return t.Ee}function hs(e){const t=Mt(e);return t.de||(t.de=UO(t,za(e))),t.de}function UO(e,t){if(e.limitType==="F")return F_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new xu(i.field,r)});const n=e.endAt?new Cu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Cu(e.startAt.position,e.startAt.inclusive):null;return F_(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Cd(e,t,n){return new xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ph(e,t){return zp(hs(e),hs(t))&&e.limitType===t.limitType}function HE(e){return`${jp(hs(e))}|lt:${e.limitType}`}function Zr(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>BE(i)).join(", ")}]`),Ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Ao(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Ao(i)).join(",")),`Target(${s})`}(hs(e))}; limitType=${e.limitType})`}function kh(e,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):wt.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(e,t)&&function(s,i){for(const r of za(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(s,i){return!(s.startAt&&!function(o,a,l){const c=V_(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,za(s),i)||s.endAt&&!function(o,a,l){const c=V_(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,za(s),i))}(e,t)}function HO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jE(e){return(t,n)=>{let s=!1;for(const i of za(e)){const r=jO(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function jO(e,t,n){const s=e.field.isKeyField()?wt.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?So(l,c):St(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return St(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){kr(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return CE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new pe(wt.comparator);function Ks(){return zO}const zE=new pe(wt.comparator);function Aa(...e){let t=zE;for(const n of e)t=t.insert(n.key,n);return t}function WE(e){let t=zE;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function ur(){return Wa()}function YE(){return Wa()}function Wa(){return new Dr(e=>e.toString(),(e,t)=>e.isEqual(t))}const WO=new pe(wt.comparator),YO=new Ae(wt.comparator);function Ut(...e){let t=YO;for(const n of e)t=t.add(n);return t}const qO=new Ae(Ft);function KO(){return qO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(t)?"-0":t}}function qE(e){return{integerValue:""+e}}function GO(e,t){return wO(t)?qE(t):Yp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this._=void 0}}function XO(e,t,n){return e instanceof Pu?function(i,r){const o={fields:{[kE]:{stringValue:PE},[RE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Up(r)&&(r=Ch(r)),r&&(o.fields[DE]=r),{mapValue:o}}(n,t):e instanceof _l?GE(e,t):e instanceof yl?XE(e,t):function(i,r){const o=KE(i,r),a=U_(o)+U_(i.Re);return Id(o)&&Id(i.Re)?qE(a):Yp(i.serializer,a)}(e,t)}function QO(e,t,n){return e instanceof _l?GE(e,t):e instanceof yl?XE(e,t):n}function KE(e,t){return e instanceof ku?function(s){return Id(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class Pu extends Dh{}class _l extends Dh{constructor(t){super(),this.elements=t}}function GE(e,t){const n=QE(t);for(const s of e.elements)n.some(i=>ms(i,s))||n.push(s);return{arrayValue:{values:n}}}class yl extends Dh{constructor(t){super(),this.elements=t}}function XE(e,t){let n=QE(t);for(const s of e.elements)n=n.filter(i=>!ms(i,s));return{arrayValue:{values:n}}}class ku extends Dh{constructor(t,n){super(),this.serializer=t,this.Re=n}}function U_(e){return _e(e.integerValue||e.doubleValue)}function QE(e){return Hp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function JO(e,t){return e.field.isEqual(t.field)&&function(s,i){return s instanceof _l&&i instanceof _l||s instanceof yl&&i instanceof yl?Io(s.elements,i.elements,ms):s instanceof ku&&i instanceof ku?ms(s.Re,i.Re):s instanceof Pu&&i instanceof Pu}(e.transform,t.transform)}class ZO{constructor(t,n){this.version=t,this.transformResults=n}}class Hs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Hs}static exists(t){return new Hs(void 0,t)}static updateTime(t){return new Hs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Qc(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Rh{}function JE(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new t1(e.key,Hs.none()):new Hl(e.key,e.data,Hs.none());{const n=e.data,s=Pn.empty();let i=new Ae(Fe.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Rr(e.key,s,new Wn(i.toArray()),Hs.none())}}function t2(e,t,n){e instanceof Hl?function(i,r,o){const a=i.value.clone(),l=j_(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Rr?function(i,r,o){if(!Qc(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=j_(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(ZE(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ya(e,t,n,s){return e instanceof Hl?function(r,o,a,l){if(!Qc(r.precondition,o))return a;const c=r.value.clone(),u=z_(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,s):e instanceof Rr?function(r,o,a,l){if(!Qc(r.precondition,o))return a;const c=z_(r.fieldTransforms,l,o),u=o.data;return u.setAll(ZE(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(f=>f.field))}(e,t,n,s):function(r,o,a){return Qc(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function e2(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=KE(s.transform,i||null);r!=null&&(n===null&&(n=Pn.empty()),n.set(s.field,r))}return n||null}function H_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Io(s,i,(r,o)=>JO(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hl extends Rh{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rr extends Rh{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ZE(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function j_(e,t,n){const s=new Map;Jt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,QO(o,a,n[i]))}return s}function z_(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,XO(r,o,t))}return s}class t1 extends Rh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n2 extends Rh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&t2(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ya(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ya(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=YE();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=JE(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(kt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ut())}isEqual(t){return this.batchId===t.batchId&&Io(this.mutations,t.mutations,(n,s)=>H_(n,s))&&Io(this.baseMutations,t.baseMutations,(n,s)=>H_(n,s))}}class qp{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Jt(t.mutations.length===s.length,58842,{fe:t.mutations.length,ge:s.length});let i=function(){return WO}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new qp(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,zt;function o2(e){switch(e){case q.OK:return St(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return St(15467,{code:e})}}function e1(e){if(e===void 0)return qs("GRPC error has no .code"),q.UNKNOWN;switch(e){case be.OK:return q.OK;case be.CANCELLED:return q.CANCELLED;case be.UNKNOWN:return q.UNKNOWN;case be.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case be.INTERNAL:return q.INTERNAL;case be.UNAVAILABLE:return q.UNAVAILABLE;case be.UNAUTHENTICATED:return q.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case be.NOT_FOUND:return q.NOT_FOUND;case be.ALREADY_EXISTS:return q.ALREADY_EXISTS;case be.PERMISSION_DENIED:return q.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case be.ABORTED:return q.ABORTED;case be.OUT_OF_RANGE:return q.OUT_OF_RANGE;case be.UNIMPLEMENTED:return q.UNIMPLEMENTED;case be.DATA_LOSS:return q.DATA_LOSS;default:return St(39323,{code:e})}}(zt=be||(be={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Pi([4294967295,4294967295],0);function W_(e){const t=IE().encode(e),n=new mE;return n.update(t),new Uint8Array(n.digest())}function Y_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Pi([n,s],0),new Pi([i,r],0)]}class Kp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(s<0)throw new Ca(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Pi.fromNumber(this.pe)}we(t,n,s){let i=t.add(n.multiply(Pi.fromNumber(s)));return i.compare(a2)===1&&(i=new Pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=W_(t),[s,i]=Y_(n);for(let r=0;r<this.hashCount;r++){const o=this.we(s,i,r);if(!this.be(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Kp(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.pe===0)return;const n=W_(t),[s,i]=Y_(n);for(let r=0;r<this.hashCount;r++){const o=this.we(s,i,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,jl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Mh(kt.min(),i,new pe(Ft),Ks(),Ut())}}class jl{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new jl(s,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,n,s,i){this.De=t,this.removedTargetIds=n,this.key=s,this.ve=i}}class n1{constructor(t,n){this.targetId=t,this.Ce=n}}class s1{constructor(t,n,s=Ue.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class q_{constructor(){this.Fe=0,this.Me=K_(),this.xe=Ue.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Ut(),n=Ut(),s=Ut();return this.Me.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:St(38017,{changeType:r})}}),new jl(this.xe,this.Oe,t,n,s)}Qe(){this.Ne=!1,this.Me=K_()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Jt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class l2{constructor(t){this.ze=t,this.je=new Map,this.He=Ks(),this.Je=yc(),this.Ye=yc(),this.Ze=new pe(Ft)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const s=this.rt(n);switch(t.state){case 0:this.it(n)&&s.ke(t.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(t.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(t.resumeToken));break;default:St(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((s,i)=>{this.it(i)&&n(i)})}ot(t){const n=t.targetId,s=t.Ce.count,i=this._t(n);if(i){const r=i.target;if(Ad(r))if(s===0){const o=new wt(r.path);this.tt(n,o,Ge.newNoDocument(o,kt.min()))}else Jt(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(t),l=a?this.lt(a,t,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Li(s).toUint8Array()}catch(l){if(l instanceof xE)return Eo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Kp(o,i,r)}catch(l){return Eo(l instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(t,n,s){return n.Ce.count===s-this.Tt(t,n.targetId)?0:2}Tt(t,n){const s=this.ze.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.tt(n,r,null),i++)}),i}It(t){const n=new Map;this.je.forEach((r,o)=>{const a=this._t(o);if(a){if(r.current&&Ad(a.target)){const l=new wt(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Ge.newNoDocument(l,t))}r.Le&&(n.set(o,r.qe()),r.Qe())}});let s=Ut();this.Ye.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.He.forEach((r,o)=>o.setReadTime(t));const i=new Mh(t,n,this.Ze,this.He,s);return this.He=Ks(),this.Je=yc(),this.Ye=yc(),this.Ze=new pe(Ft),i}et(t,n){if(!this.it(t))return;const s=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,s){if(!this.it(t))return;const i=this.rt(t);this.dt(t,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),s&&(this.He=this.He.insert(n,s))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new q_,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ae(Ft),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ae(Ft),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new q_),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function yc(){return new pe(wt.comparator)}function K_(){return new pe(wt.comparator)}const c2={asc:"ASCENDING",desc:"DESCENDING"},u2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h2={and:"AND",or:"OR"};class f2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xd(e,t){return e.useProto3Json||Ah(t)?t:{value:t}}function Du(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function i1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function d2(e,t){return Du(e,t.toTimestamp())}function fs(e){return Jt(!!e,49232),kt.fromTimestamp(function(n){const s=Ni(n);return new Se(s.seconds,s.nanos)}(e))}function Gp(e,t){return Pd(e,t).canonicalString()}function Pd(e,t){const n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function r1(e){const t=me.fromString(e);return Jt(u1(t),10190,{key:t.toString()}),t}function kd(e,t){return Gp(e.databaseId,t.path)}function kf(e,t){const n=r1(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wt(a1(n))}function o1(e,t){return Gp(e.databaseId,t)}function p2(e){const t=r1(e);return t.length===4?me.emptyPath():a1(t)}function Dd(e){return new me(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function a1(e){return Jt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function G_(e,t,n){return{name:kd(e,t),fields:n.value.mapValue.fields}}function g2(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:St(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Jt(u===void 0||typeof u=="string",58123),Ue.fromBase64String(u||"")):(Jt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ue.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?q.UNKNOWN:e1(c.code);return new bt(u,c.message||"")}(o);n=new s1(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=kf(e,s.document.name),r=fs(s.document.updateTime),o=s.document.createTime?fs(s.document.createTime):kt.min(),a=new Pn({mapValue:{fields:s.document.fields}}),l=Ge.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Jc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=kf(e,s.document),r=s.readTime?fs(s.readTime):kt.min(),o=Ge.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Jc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=kf(e,s.document),r=s.removedTargetIds||[];n=new Jc([],r,i,null)}else{if(!("filter"in t))return St(11601,{Vt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new r2(i,r),a=s.targetId;n=new n1(a,o)}}return n}function m2(e,t){let n;if(t instanceof Hl)n={update:G_(e,t.key,t.value)};else if(t instanceof t1)n={delete:kd(e,t.key)};else if(t instanceof Rr)n={update:G_(e,t.key,t.data),updateMask:S2(t.fieldMask)};else{if(!(t instanceof n2))return St(16599,{ft:t.type});n={verify:kd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ku)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw St(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:d2(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:St(27497)}(e,t.precondition)),n}function v2(e,t){return e&&e.length>0?(Jt(t!==void 0,14353),e.map(n=>function(i,r){let o=i.updateTime?fs(i.updateTime):fs(r);return o.isEqual(kt.min())&&(o=fs(r)),new ZO(o,i.transformResults||[])}(n,t))):[]}function _2(e,t){return{documents:[o1(e,t.path)]}}function y2(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=o1(e,i);const r=function(c){if(c.length!==0)return c1(vs.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:to(d.field),direction:T2(d.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xd(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{gt:n,parent:i}}function b2(e){let t=p2(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Jt(s===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(f){const d=l1(f);return d instanceof vs&&$E(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(m){return new xu(eo(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,Ah(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(f){const d=!!f.before,p=f.values||[];return new Cu(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const d=!f.before,p=f.values||[];return new Cu(p,d)}(n.endAt)),FO(t,i,o,r,a,"F",l,c)}function w2(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function l1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=eo(n.unaryFilter.field);return Ie.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=eo(n.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=eo(n.unaryFilter.field);return Ie.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eo(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return St(61313);default:return St(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ie.create(eo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return St(58110);default:return St(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return vs.create(n.compositeFilter.filters.map(s=>l1(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return St(1026)}}(n.compositeFilter.op))}(e):St(30097,{filter:e})}function T2(e){return c2[e]}function E2(e){return u2[e]}function I2(e){return h2[e]}function to(e){return{fieldPath:e.canonicalString()}}function eo(e){return Fe.fromServerFormat(e.fieldPath)}function c1(e){return e instanceof Ie?function(n){if(n.op==="=="){if(L_(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NAN"}};if(N_(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L_(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NAN"}};if(N_(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(n.field),op:E2(n.op),value:n.value}}}(e):e instanceof vs?function(n){const s=n.getFilters().map(i=>c1(i));return s.length===1?s[0]:{compositeFilter:{op:I2(n.op),filters:s}}}(e):St(54877,{filter:e})}function S2(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function u1(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t,n,s,i,r=kt.min(),o=kt.min(),a=Ue.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Ti(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t){this.wt=t}}function C2(e){const t=b2({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Cd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.Cn=new P2}addToCollectionParentIndex(t,n){return this.Cn.add(n),j.resolve()}getCollectionParents(t,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return j.resolve()}deleteFieldIndex(t,n){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,n){return j.resolve()}getDocumentsMatchingTarget(t,n){return j.resolve(null)}getIndexType(t,n){return j.resolve(0)}getFieldIndexes(t,n){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,n){return j.resolve(Oi.min())}getMinOffsetFromCollectionGroup(t,n){return j.resolve(Oi.min())}updateCollectionGroup(t,n,s){return j.resolve()}updateIndexEntries(t,n){return j.resolve()}}class P2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new Ae(me.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Ae(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h1=41943040;class dn{static withCacheSize(t){return new dn(t,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(h1,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Co(0)}static lr(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LruGarbageCollector",k2=1048576;function J_([e,t],[n,s]){const i=Ft(e,n);return i===0?Ft(t,s):i}class D2{constructor(t){this.Er=t,this.buffer=new Ae(J_),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();J_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){ut(Q_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wo(n)?ut(Q_,"Ignoring IndexedDB error during garbage collection: ",n):await zo(n)}await this.mr(3e5)})}}class M2{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return j.resolve(Sh.le);const s=new D2(n);return this.gr.forEachTarget(t,i=>s.Rr(i.sequenceNumber)).next(()=>this.gr.yr(t,i=>s.Rr(i))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.gr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(X_)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),X_):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let s,i,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(s=f,a=Date.now(),this.removeTargets(t,s,n))).next(f=>(r=f,l=Date.now(),this.removeOrphanedDocuments(t,s))).next(f=>(c=Date.now(),Jr()<=Bt.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:f})))}}function O2(e,t){return new M2(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.changes=new Dr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ge.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?j.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&Ya(s.mutation,i,Wn.empty(),Se.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Ut()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Ut()){const i=ur();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let o=Aa();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=ur();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Ut()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,i){let r=Ks();const o=Wa(),a=function(){return Wa()}();return n.forEach((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Rr)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ya(u.mutation,c,u.mutation.getFieldMask(),Se.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new L2(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const s=Wa();let i=new pe((o,a)=>o-a),r=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||Wn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const f=(i.get(a.batchId)||Ut()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=YE();u.forEach(d=>{if(!r.has(d)){const p=JE(n.get(d),s.get(d));p!==null&&f.set(d,p),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return j.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,i){return function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):BO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):j.resolve(ur());let a=pl,l=r;return o.next(c=>j.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),r.get(u)?j.resolve():this.remoteDocumentCache.getEntry(t,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,Ut())).next(u=>({batchId:a,changes:WE(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new wt(n)).next(s=>{let i=Aa();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=Aa();return this.indexManager.getCollectionParents(t,r).next(a=>j.forEach(a,l=>{const c=function(f,d){return new xh(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next(u=>{u.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ge.newInvalidDocument(u)))});let a=Aa();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&Ya(u.mutation,c,Wn.empty(),Se.now()),kh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return j.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fs(i.createTime)}}(n)),j.resolve()}getNamedQuery(t,n){return j.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(i){return{name:i.name,query:C2(i.bundledQuery),readTime:fs(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.overlays=new pe(wt.comparator),this.Qr=new Map}getOverlay(t,n){return j.resolve(this.overlays.get(n))}getOverlays(t,n){const s=ur();return j.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.St(t,n,r)}),j.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.Qr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Qr.delete(s)),j.resolve()}getOverlaysForCollection(t,n,s){const i=ur(),r=n.length+1,o=new wt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new pe((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=ur(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ur(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return j.resolve(a)}St(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(s.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new i2(n,s));let r=this.Qr.get(n);r===void 0&&(r=Ut(),this.Qr.set(n,r)),this.Qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.sessionToken=Ue.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.$r=new Ae(xe.Ur),this.Kr=new Ae(xe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const s=new xe(t,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.zr(new xe(t,n))}jr(t,n){t.forEach(s=>this.removeReference(s,n))}Hr(t){const n=new wt(new me([])),s=new xe(n,t),i=new xe(n,t+1),r=[];return this.Kr.forEachInRange([s,i],o=>{this.zr(o),r.push(o.key)}),r}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new wt(new me([])),s=new xe(n,t),i=new xe(n,t+1);let r=Ut();return this.Kr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new xe(t,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class xe{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return wt.comparator(t.key,n.key)||Ft(t.Zr,n.Zr)}static Wr(t,n){return Ft(t.Zr,n.Zr)||wt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ae(xe.Ur)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new s2(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Xr=this.Xr.add(new xe(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(t,n){return j.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.ti(s),r=i<0?0:i;return j.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Bp:this.nr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new xe(n,0),i=new xe(n,Number.POSITIVE_INFINITY),r=[];return this.Xr.forEachInRange([s,i],o=>{const a=this.ei(o.Zr);r.push(a)}),j.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ae(Ft);return n.forEach(i=>{const r=new xe(i,0),o=new xe(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([r,o],a=>{s=s.add(a.Zr)})}),j.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;wt.isDocumentKey(r)||(r=r.child(""));const o=new xe(new wt(r),0);let a=new Ae(Ft);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Zr)),!0)},o),j.resolve(this.ni(a))}ni(t){const n=[];return t.forEach(s=>{const i=this.ei(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Jt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return j.forEach(n.mutations,i=>{const r=new xe(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Xr=s})}sr(t){}containsKey(t,n){const s=new xe(n,0),i=this.Xr.firstAfterOrEqual(s);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t){this.ii=t,this.docs=function(){return new pe(wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return j.resolve(s?s.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(t,n){let s=Ks();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ge.newInvalidDocument(i))}),j.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Ks();const o=n.path,a=new wt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vO(mO(u),s)<=0||(i.has(u.key)||kh(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return j.resolve(r)}getAllFromCollectionGroup(t,n,s,i){St(9500)}si(t,n){return j.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new j2(this)}getSize(t){return j.resolve(this.size)}}class j2 extends N2{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(t,i)):this.Br.removeEntry(s)}),j.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t){this.persistence=t,this.oi=new Dr(n=>jp(n),zp),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this._i=0,this.ai=new Xp,this.targetCount=0,this.ui=Co.cr()}forEachTarget(t,n){return this.oi.forEach((s,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),j.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new Co(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,j.resolve()}updateTargetData(t,n){return this.Tr(n),j.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),j.waitFor(r).next(()=>i)}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,n){const s=this.oi.get(n)||null;return j.resolve(s)}addMatchingKeys(t,n,s){return this.ai.Gr(n,s),j.resolve()}removeMatchingKeys(t,n,s){this.ai.jr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),j.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),j.resolve()}getMatchingKeysForTargetId(t,n){const s=this.ai.Yr(n);return j.resolve(s)}containsKey(t,n){return j.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t,n){this.ci={},this.overlays={},this.li=new Sh(0),this.hi=!1,this.hi=!0,this.Pi=new B2,this.referenceDelegate=t(this),this.Ti=new z2(this),this.indexManager=new x2,this.remoteDocumentCache=function(i){return new H2(i)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new A2(n),this.Ei=new $2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new F2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ci[t.toKey()];return s||(s=new U2(n,this.referenceDelegate),this.ci[t.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,s){ut("MemoryPersistence","Starting transaction:",t);const i=new W2(this.li.next());return this.referenceDelegate.di(),s(i).next(r=>this.referenceDelegate.Ai(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ri(t,n){return j.or(Object.values(this.ci).map(s=>()=>s.containsKey(t,n)))}}class W2 extends yO{constructor(t){super(),this.currentSequenceNumber=t}}class Qp{constructor(t){this.persistence=t,this.Vi=new Xp,this.mi=null}static fi(t){return new Qp(t)}get gi(){if(this.mi)return this.mi;throw St(60996)}addReference(t,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),j.resolve()}removeReference(t,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),j.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),j.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.gi.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.gi,s=>{const i=wt.fromPath(s);return this.pi(t,i).next(r=>{r||n.removeEntry(i,kt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return j.or([()=>j.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Ru{constructor(t,n){this.persistence=t,this.yi=new Dr(s=>TO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=O2(this,n)}static fi(t,n){return new Ru(t,n)}di(){}Ai(t){return j.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(i=>s+i))}br(t){let n=0;return this.yr(t,s=>{n++}).next(()=>n)}yr(t,n){return j.forEach(this.yi,(s,i)=>this.Dr(t,s,i).next(r=>r?j.resolve():n(i)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.si(t,o=>this.Dr(t,o,n).next(a=>{a||(s++,r.removeEntry(o,kt.min()))})).next(()=>r.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),j.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.yi.set(s,t.currentSequenceNumber),j.resolve()}removeReference(t,n,s){return this.yi.set(s,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),j.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Gc(t.data.value)),n}Dr(t,n,s){return j.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.yi.get(n);return j.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.ds=s,this.As=i}static Rs(t,n){let s=Ut(),i=Ut();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Jp(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ak()?8:bO(tn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ws(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.bs(t,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new Y2;return this.Ss(t,n,o).next(a=>{if(r.result=a,this.fs)return this.Ds(t,n,o,a.size)})}).next(()=>r.result)}Ds(t,n,s,i){return s.documentReadCount<this.gs?(Jr()<=Bt.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",Zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),j.resolve()):(Jr()<=Bt.DEBUG&&ut("QueryEngine","Query:",Zr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ps*i?(Jr()<=Bt.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",Zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,hs(n))):j.resolve())}ws(t,n){if(B_(n))return j.resolve(null);let s=hs(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cd(n,null,"F"),s=hs(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=Ut(...r);return this.ys.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.vs(n,a);return this.Cs(n,c,o,l.readTime)?this.ws(t,Cd(n,null,"F")):this.Fs(t,c,n,l)}))})))}bs(t,n,s,i){return B_(n)||i.isEqual(kt.min())?j.resolve(null):this.ys.getDocuments(t,s).next(r=>{const o=this.vs(n,r);return this.Cs(n,o,s,i)?j.resolve(null):(Jr()<=Bt.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(n)),this.Fs(t,o,n,gO(i,pl)).next(a=>a))})}vs(t,n){let s=new Ae(jE(t));return n.forEach((i,r)=>{kh(t,r)&&(s=s.add(r))}),s}Cs(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,s){return Jr()<=Bt.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",Zr(n)),this.ys.getDocumentsMatchingQuery(t,n,Oi.min(),s)}Fs(t,n,s,i){return this.ys.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",K2=3e8;class G2{constructor(t,n,s,i){this.persistence=t,this.Ms=n,this.serializer=i,this.xs=new pe(Ft),this.Os=new Dr(r=>jp(r),zp),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(s)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new V2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function X2(e,t,n,s){return new G2(e,t,n,s)}async function d1(e,t){const n=Mt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Ls(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=Ut();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:a}))})})}function Q2(e,t){const n=Mt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,d=f.keys();let p=j.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(_=>{const y=c.docVersions.get(m);Jt(y!==null,48541),_.version.compareTo(y)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=Ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function p1(e){const t=Mt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function J2(e,t){const n=Mt(e),s=t.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const a=[];t.targetChanges.forEach((u,f)=>{const d=i.get(f);if(!d)return;a.push(n.Ti.removeMatchingKeys(r,u.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(r,u.addedDocuments,f)));let p=d.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Ue.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,s)),i=i.insert(f,p),function(_,y,T){return _.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=K2?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(d,p,u)&&a.push(n.Ti.updateTargetData(r,p))});let l=Ks(),c=Ut();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(Z2(r,o,t.documentUpdates).next(u=>{l=u.qs,c=u.Qs})),!s.isEqual(kt.min())){const u=n.Ti.getLastRemoteSnapshotVersion(r).next(f=>n.Ti.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return j.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.xs=i,r))}function Z2(e,t,n){let s=Ut(),i=Ut();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let o=Ks();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(kt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ut(Zp,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function tN(e,t){const n=Mt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Bp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function eN(e,t){const n=Mt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Ti.getTargetData(s,t).next(r=>r?(i=r,j.resolve(i)):n.Ti.allocateTargetId(s).next(o=>(i=new Ti(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.xs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(t,s.targetId)),s})}async function Rd(e,t,n){const s=Mt(e),i=s.xs.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Wo(o))throw o;ut(Zp,`Failed to update sequence numbers for target ${t}: ${o}`)}s.xs=s.xs.remove(t),s.Os.delete(i.target)}function Z_(e,t,n){const s=Mt(e);let i=kt.min(),r=Ut();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Mt(l),d=f.Os.get(u);return d!==void 0?j.resolve(f.xs.get(d)):f.Ti.getTargetData(c,u)}(s,o,hs(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,t,n?i:kt.min(),n?r:Ut())).next(a=>(nN(s,HO(t),a),{documents:a,$s:r})))}function nN(e,t,n){let s=e.Ns.get(t)||kt.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.Ns.set(t,s)}class ty{constructor(){this.activeTargetIds=KO()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sN{constructor(){this.xo=new ty,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,s){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new ty,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="ConnectivityMonitor";class ny{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ut(ey,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){ut(ey,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function Md(){return bc===null?bc=function(){return 268435456+Math.round(2147483648*Math.random())}():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="RestConnection",rN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oN{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${s}/databases/${i}`,this.Go=this.databaseId.database===Su?`project_id=${s}`:`project_id=${s}&database_id=${i}`}zo(t,n,s,i,r){const o=Md(),a=this.jo(t,n.toUriEncodedString());ut(Df,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,r);const{host:c}=new URL(a),u=Bo(c);return this.Jo(t,a,l,s,u).then(f=>(ut(Df,`Received RPC '${t}' ${o}: `,f),f),f=>{throw Eo(Df,`RPC '${t}' ${o} failed with error: `,f,"url: ",a,"request:",s),f})}Yo(t,n,s,i,r,o){return this.zo(t,n,s,i,r)}Ho(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>t[r]=i),s&&s.headers.forEach((i,r)=>t[r]=i)}jo(t,n){const s=rN[t];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze="WebChannelConnection";class lN extends oN{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,i,r){const o=Md();return new Promise((a,l)=>{const c=new vE;c.setWithCredentials(!0),c.listenOnce(_E.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kc.NO_ERROR:const f=c.getResponseJson();ut(ze,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),a(f);break;case Kc.TIMEOUT:ut(ze,`RPC '${t}' ${o} timed out`),l(new bt(q.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const d=c.getStatus();if(ut(ze,`RPC '${t}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const _=function(T){const R=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(R)>=0?R:q.UNKNOWN}(m.status);l(new bt(_,m.message))}else l(new bt(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new bt(q.UNAVAILABLE,"Connection failed."));break;default:St(9055,{h_:t,streamId:o,P_:c.getLastErrorCode(),T_:c.getLastError()})}}finally{ut(ze,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(i);ut(ze,`RPC '${t}' ${o} sending request:`,i),c.send(n,"POST",u,s,15)})}I_(t,n,s){const i=Md(),r=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=wE(),a=bE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");ut(ze,`Creating RPC '${t}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);this.E_(f);let d=!1,p=!1;const m=new aN({Zo:y=>{p?ut(ze,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(d||(ut(ze,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),ut(ze,`RPC '${t}' stream ${i} sending:`,y),f.send(y))},Xo:()=>f.close()}),_=(y,T,R)=>{y.listen(T,D=>{try{R(D)}catch(k){setTimeout(()=>{throw k},0)}})};return _(f,Sa.EventType.OPEN,()=>{p||(ut(ze,`RPC '${t}' stream ${i} transport opened.`),m.__())}),_(f,Sa.EventType.CLOSE,()=>{p||(p=!0,ut(ze,`RPC '${t}' stream ${i} transport closed`),m.u_(),this.d_(f))}),_(f,Sa.EventType.ERROR,y=>{p||(p=!0,Eo(ze,`RPC '${t}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),m.u_(new bt(q.UNAVAILABLE,"The operation could not be completed")))}),_(f,Sa.EventType.MESSAGE,y=>{var T;if(!p){const R=y.data[0];Jt(!!R,16349);const D=R,k=(D==null?void 0:D.error)||((T=D[0])===null||T===void 0?void 0:T.error);if(k){ut(ze,`RPC '${t}' stream ${i} received error:`,k);const O=k.status;let L=function(w){const A=be[w];if(A!==void 0)return e1(A)}(O),E=k.message;L===void 0&&(L=q.INTERNAL,E="Unknown error status: "+O+" with message "+k.message),p=!0,m.u_(new bt(L,E)),f.close()}else ut(ze,`RPC '${t}' stream ${i} received:`,R),m.c_(R)}}),_(a,yE.STAT_EVENT,y=>{y.stat===wd.PROXY?ut(ze,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===wd.NOPROXY&&ut(ze,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.a_()},0),m}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e){return new f2(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t,n,s=1e3,i=1.5,r=6e4){this.xi=t,this.timerId=n,this.A_=s,this.R_=i,this.V_=r,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-s);i>0&&ut("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="PersistentStream";class m1{constructor(t,n,s,i,r,o,a,l){this.xi=t,this.S_=s,this.D_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new g1(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(qs(n.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.v_===n&&this.z_(s,i)},s=>{t(()=>{const i=new bt(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(i)})})}z_(t,n){const s=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{s(()=>this.j_(i))}),this.stream.onMessage(i=>{s(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return ut(sy,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(ut(sy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cN extends m1{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=g2(this.serializer,t),s=function(r){if(!("targetChange"in r))return kt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?kt.min():o.readTime?fs(o.readTime):kt.min()}(t);return this.listener.Y_(n,s)}Z_(t){const n={};n.database=Dd(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Ad(l)?{documents:_2(r,l)}:{query:y2(r,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=i1(r,o.resumeToken);const c=xd(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(kt.min())>0){a.readTime=Du(r,o.snapshotVersion.toTimestamp());const c=xd(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const s=w2(this.serializer,t);s&&(n.labels=s),this.Q_(n)}X_(t){const n={};n.database=Dd(this.serializer),n.removeTarget=t,this.Q_(n)}}class uN extends m1{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=v2(t.writeResults,t.commitTime),s=fs(t.commitTime);return this.listener.ra(s,n)}ia(){const t={};t.database=Dd(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>m2(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{}class fN extends hN{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new bt(q.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.zo(t,Pd(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new bt(q.UNKNOWN,r.toString())})}Yo(t,n,s,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(t,Pd(n,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(q.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class dN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(qs(n),this.ua=!1):ut("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="RemoteStore";class pN{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=r,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Mr(this)&&(ut(Er,"Restarting streams for network reachability change."),await async function(l){const c=Mt(l);c.da.add(4),await zl(c),c.Va.set("Unknown"),c.da.delete(4),await Nh(c)}(this))})}),this.Va=new dN(s,i)}}async function Nh(e){if(Mr(e))for(const t of e.Aa)await t(!0)}async function zl(e){for(const t of e.Aa)await t(!1)}function v1(e,t){const n=Mt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),sg(n)?ng(n):Yo(n).N_()&&eg(n,t))}function tg(e,t){const n=Mt(e),s=Yo(n);n.Ea.delete(t),s.N_()&&_1(n,t),n.Ea.size===0&&(s.N_()?s.k_():Mr(n)&&n.Va.set("Unknown"))}function eg(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yo(e).Z_(t)}function _1(e,t){e.ma.Ke(t),Yo(e).X_(t)}function ng(e){e.ma=new l2({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Yo(e).start(),e.Va.ca()}function sg(e){return Mr(e)&&!Yo(e).O_()&&e.Ea.size>0}function Mr(e){return Mt(e).da.size===0}function y1(e){e.ma=void 0}async function gN(e){e.Va.set("Online")}async function mN(e){e.Ea.forEach((t,n)=>{eg(e,t)})}async function vN(e,t){y1(e),sg(e)?(e.Va.Pa(t),ng(e)):e.Va.set("Unknown")}async function _N(e,t,n){if(e.Va.set("Online"),t instanceof s1&&t.state===2&&t.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ea.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ea.delete(a),i.ma.removeTarget(a))}(e,t)}catch(s){ut(Er,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Mu(e,s)}else if(t instanceof Jc?e.ma.Xe(t):t instanceof n1?e.ma.ot(t):e.ma.nt(t),!n.isEqual(kt.min()))try{const s=await p1(e.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.ma.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.Ea.get(c);u&&r.Ea.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.Ea.get(l);if(!u)return;r.Ea.set(l,u.withResumeToken(Ue.EMPTY_BYTE_STRING,u.snapshotVersion)),_1(r,l);const f=new Ti(u.target,l,c,u.sequenceNumber);eg(r,f)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(s){ut(Er,"Failed to raise snapshot:",s),await Mu(e,s)}}async function Mu(e,t,n){if(!Wo(t))throw t;e.da.add(1),await zl(e),e.Va.set("Offline"),n||(n=()=>p1(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ut(Er,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Nh(e)})}function b1(e,t){return t().catch(n=>Mu(e,n,t))}async function Lh(e){const t=Mt(e),n=$i(t);let s=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Bp;for(;yN(t);)try{const i=await tN(t.localStore,s);if(i===null){t.Ia.length===0&&n.k_();break}s=i.batchId,bN(t,i)}catch(i){await Mu(t,i)}w1(t)&&T1(t)}function yN(e){return Mr(e)&&e.Ia.length<10}function bN(e,t){e.Ia.push(t);const n=$i(e);n.N_()&&n.ea&&n.ta(t.mutations)}function w1(e){return Mr(e)&&!$i(e).O_()&&e.Ia.length>0}function T1(e){$i(e).start()}async function wN(e){$i(e).ia()}async function TN(e){const t=$i(e);for(const n of e.Ia)t.ta(n.mutations)}async function EN(e,t,n){const s=e.Ia.shift(),i=qp.from(s,t,n);await b1(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Lh(e)}async function IN(e,t){t&&$i(e).ea&&await async function(s,i){if(function(o){return o2(o)&&o!==q.ABORTED}(i.code)){const r=s.Ia.shift();$i(s).L_(),await b1(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Lh(s)}}(e,t),w1(e)&&T1(e)}async function iy(e,t){const n=Mt(e);n.asyncQueue.verifyOperationInProgress(),ut(Er,"RemoteStore received new credentials");const s=Mr(n);n.da.add(3),await zl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Nh(n)}async function SN(e,t){const n=Mt(e);t?(n.da.delete(2),await Nh(n)):t||(n.da.add(2),await zl(n),n.Va.set("Unknown"))}function Yo(e){return e.fa||(e.fa=function(n,s,i){const r=Mt(n);return r.oa(),new cN(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{e_:gN.bind(null,e),n_:mN.bind(null,e),i_:vN.bind(null,e),Y_:_N.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),sg(e)?ng(e):e.Va.set("Unknown")):(await e.fa.stop(),y1(e))})),e.fa}function $i(e){return e.ga||(e.ga=function(n,s,i){const r=Mt(n);return r.oa(),new uN(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:wN.bind(null,e),i_:IN.bind(null,e),na:TN.bind(null,e),ra:EN.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Lh(e)):(await e.ga.stop(),e.Ia.length>0&&(ut(Er,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new ig(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(e,t){if(qs("AsyncQueue",`${t}: ${e}`),Wo(e))return new bt(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(t){return new go(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||wt.comparator(n.key,s.key):(n,s)=>wt.comparator(n.key,s.key),this.keyedMap=Aa(),this.sortedSet=new pe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof go)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.pa=new pe(wt.comparator)}track(t){const n=t.doc.key,s=this.pa.get(n);s?t.type!==0&&s.type===3?this.pa=this.pa.insert(n,t):t.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.pa=this.pa.remove(n):t.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):St(63341,{Vt:t,ya:s}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,s)=>{t.push(s)}),t}}class xo{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new xo(t,n,go.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ph(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class CN{constructor(){this.queries=oy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=Mt(n),r=i.queries;i.queries=oy(),r.forEach((o,a)=>{for(const l of a.Sa)l.onError(s)})})(this,new bt(q.ABORTED,"Firestore shutting down"))}}function oy(){return new Dr(e=>HE(e),Ph)}async function xN(e,t){const n=Mt(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.Da()&&t.va()&&(s=2):(r=new AN,s=t.va()?0:1);try{switch(s){case 0:r.ba=await n.onListen(i,!0);break;case 1:r.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=rg(o,`Initialization of query '${Zr(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Sa.push(t),t.Fa(n.onlineState),r.ba&&t.Ma(r.ba)&&og(n)}async function PN(e,t){const n=Mt(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.va()?0:1:!r.Da()&&t.va()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kN(e,t){const n=Mt(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Ma(i)&&(s=!0);o.ba=i}}s&&og(n)}function DN(e,t,n){const s=Mt(e),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(t)}function og(e){e.Ca.forEach(t=>{t.next()})}var Od,ay;(ay=Od||(Od={})).xa="default",ay.Cache="cache";class RN{constructor(t,n,s){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new xo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t){this.key=t}}class I1{constructor(t){this.key=t}}class MN{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ut(),this.mutatedKeys=Ut(),this.Za=jE(t),this.Xa=new go(this.Za)}get eu(){return this.Ha}tu(t,n){const s=n?n.nu:new ry,i=n?n.Xa:this.Xa;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,f)=>{const d=i.get(u),p=kh(this.query,f)?f:null,m=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;d&&p?d.data.isEqual(p.data)?m!==_&&(s.track({type:3,doc:p}),y=!0):this.ru(d,p)||(s.track({type:2,doc:p}),y=!0,(l&&this.Za(p,l)>0||c&&this.Za(p,c)<0)&&(a=!0)):!d&&p?(s.track({type:0,doc:p}),y=!0):d&&!p&&(s.track({type:1,doc:d}),y=!0,(l||c)&&(a=!0)),y&&(p?(o=o.add(p),r=_?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{Xa:o,nu:s,Cs:a,mutatedKeys:r}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const o=t.nu.wa();o.sort((u,f)=>function(p,m){const _=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St(20277,{Vt:y})}};return _(p)-_(m)}(u.type,f.type)||this.Za(u.doc,f.doc)),this.iu(s),i=i!=null&&i;const a=n&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,c=l!==this.Ja;return this.Ja=l,o.length!==0||c?{snapshot:new xo(this.query,t.Xa,r,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ry,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Ut(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return t.forEach(s=>{this.Ya.has(s)||n.push(new I1(s))}),this.Ya.forEach(s=>{t.has(s)||n.push(new E1(s))}),n}au(t){this.Ha=t.$s,this.Ya=Ut();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return xo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ag="SyncEngine";class ON{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class NN{constructor(t){this.key=t,this.cu=!1}}class LN{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Dr(a=>HE(a),Ph),this.Pu=new Map,this.Tu=new Set,this.Iu=new pe(wt.comparator),this.Eu=new Map,this.du=new Xp,this.Au={},this.Ru=new Map,this.Vu=Co.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function VN(e,t,n=!0){const s=k1(e);let i;const r=s.hu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.uu()):i=await S1(s,t,n,!0),i}async function $N(e,t){const n=k1(e);await S1(n,t,!0,!1)}async function S1(e,t,n,s){const i=await eN(e.localStore,hs(t)),r=i.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await FN(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&v1(e.remoteStore,i),a}async function FN(e,t,n,s,i){e.fu=(f,d,p)=>async function(_,y,T,R){let D=y.view.tu(T);D.Cs&&(D=await Z_(_.localStore,y.query,!1).then(({documents:E})=>y.view.tu(E,D)));const k=R&&R.targetChanges.get(y.targetId),O=R&&R.targetMismatches.get(y.targetId)!=null,L=y.view.applyChanges(D,_.isPrimaryClient,k,O);return cy(_,y.targetId,L.ou),L.snapshot}(e,f,d,p);const r=await Z_(e.localStore,t,!0),o=new MN(t,r.$s),a=o.tu(r.documents),l=jl.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);cy(e,n,c.ou);const u=new ON(t,n,o);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function BN(e,t,n){const s=Mt(e),i=s.hu.get(t),r=s.Pu.get(i.targetId);if(r.length>1)return s.Pu.set(i.targetId,r.filter(o=>!Ph(o,t))),void s.hu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Rd(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&tg(s.remoteStore,i.targetId),Nd(s,i.targetId)}).catch(zo)):(Nd(s,i.targetId),await Rd(s.localStore,i.targetId,!0))}async function UN(e,t){const n=Mt(e),s=n.hu.get(t),i=n.Pu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tg(n.remoteStore,s.targetId))}async function HN(e,t,n){const s=GN(e);try{const i=await function(o,a){const l=Mt(o),c=Se.now(),u=a.reduce((p,m)=>p.add(m.key),Ut());let f,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ks(),_=Ut();return l.Bs.getEntries(p,u).next(y=>{m=y,m.forEach((T,R)=>{R.isValidDocument()||(_=_.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(y=>{f=y;const T=[];for(const R of a){const D=e2(R,f.get(R.key).overlayedDocument);D!=null&&T.push(new Rr(R.key,D,NE(D.value.mapValue),Hs.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,T,a)}).next(y=>{d=y;const T=y.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(p,y.batchId,T)})}).then(()=>({batchId:d.batchId,changes:WE(f)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Au[o.currentUser.toKey()];c||(c=new pe(Ft)),c=c.insert(a,l),o.Au[o.currentUser.toKey()]=c}(s,i.batchId,n),await Wl(s,i.changes),await Lh(s.remoteStore)}catch(i){const r=rg(i,"Failed to persist write");n.reject(r)}}async function A1(e,t){const n=Mt(e);try{const s=await J2(n.localStore,t);t.targetChanges.forEach((i,r)=>{const o=n.Eu.get(r);o&&(Jt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?Jt(o.cu,14607):i.removedDocuments.size>0&&(Jt(o.cu,42227),o.cu=!1))}),await Wl(n,s,t)}catch(s){await zo(s)}}function ly(e,t,n){const s=Mt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.hu.forEach((r,o)=>{const a=o.view.Fa(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Mt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const d of f.Sa)d.Fa(a)&&(c=!0)}),c&&og(l)}(s.eventManager,t),i.length&&s.lu.Y_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function jN(e,t,n){const s=Mt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Eu.get(t),r=i&&i.key;if(r){let o=new pe(wt.comparator);o=o.insert(r,Ge.newNoDocument(r,kt.min()));const a=Ut().add(r),l=new Mh(kt.min(),new Map,new pe(Ft),o,a);await A1(s,l),s.Iu=s.Iu.remove(r),s.Eu.delete(t),lg(s)}else await Rd(s.localStore,t,!1).then(()=>Nd(s,t,n)).catch(zo)}async function zN(e,t){const n=Mt(e),s=t.batch.batchId;try{const i=await Q2(n.localStore,t);x1(n,s,null),C1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wl(n,i)}catch(i){await zo(i)}}async function WN(e,t,n){const s=Mt(e);try{const i=await function(o,a){const l=Mt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Jt(f!==null,37113),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,t);x1(s,t,n),C1(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Wl(s,i)}catch(i){await zo(i)}}function C1(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function x1(e,t,n){const s=Mt(e);let i=s.Au[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Au[s.currentUser.toKey()]=i}}function Nd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Pu.get(t))e.hu.delete(s),n&&e.lu.gu(s,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(s=>{e.du.containsKey(s)||P1(e,s)})}function P1(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(tg(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),lg(e))}function cy(e,t,n){for(const s of n)s instanceof E1?(e.du.addReference(s.key,t),YN(e,s)):s instanceof I1?(ut(ag,"Document no longer in limbo: "+s.key),e.du.removeReference(s.key,t),e.du.containsKey(s.key)||P1(e,s.key)):St(19791,{pu:s})}function YN(e,t){const n=t.key,s=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(s)||(ut(ag,"New document in limbo: "+n),e.Tu.add(s),lg(e))}function lg(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new wt(me.fromString(t)),s=e.Vu.next();e.Eu.set(s,new NN(n)),e.Iu=e.Iu.insert(n,s),v1(e.remoteStore,new Ti(hs(Wp(n.path)),s,"TargetPurposeLimboResolution",Sh.le))}}async function Wl(e,t,n){const s=Mt(e),i=[],r=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,l)=>{o.push(s.fu(l,t,n).then(c=>{var u;if((c||n)&&s.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;s.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Jp.Rs(l.targetId,c);r.push(f)}}))}),await Promise.all(o),s.lu.Y_(i),await async function(l,c){const u=Mt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(c,d=>j.forEach(d.ds,p=>u.persistence.referenceDelegate.addReference(f,d.targetId,p)).next(()=>j.forEach(d.As,p=>u.persistence.referenceDelegate.removeReference(f,d.targetId,p)))))}catch(f){if(!Wo(f))throw f;ut(Zp,"Failed to update sequence numbers: "+f)}for(const f of c){const d=f.targetId;if(!f.fromCache){const p=u.xs.get(d),m=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(m);u.xs=u.xs.insert(d,_)}}}(s.localStore,r))}async function qN(e,t){const n=Mt(e);if(!n.currentUser.isEqual(t)){ut(ag,"User change. New user:",t.toKey());const s=await d1(n.localStore,t);n.currentUser=t,function(r,o){r.Ru.forEach(a=>{a.forEach(l=>{l.reject(new bt(q.CANCELLED,o))})}),r.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Wl(n,s.ks)}}function KN(e,t){const n=Mt(e),s=n.Eu.get(t);if(s&&s.cu)return Ut().add(s.key);{let i=Ut();const r=n.Pu.get(t);if(!r)return i;for(const o of r){const a=n.hu.get(o);i=i.unionWith(a.view.eu)}return i}}function k1(e){const t=Mt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=A1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=KN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jN.bind(null,t),t.lu.Y_=kN.bind(null,t.eventManager),t.lu.gu=DN.bind(null,t.eventManager),t}function GN(e){const t=Mt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WN.bind(null,t),t}class Ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Oh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return X2(this.persistence,new q2,t.initialUser,this.serializer)}Su(t){return new f1(Qp.fi,this.serializer)}bu(t){return new sN}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ou.provider={build:()=>new Ou};class XN extends Ou{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Jt(this.persistence.referenceDelegate instanceof Ru,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new R2(s,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new f1(s=>Ru.fi(s,n),this.serializer)}}class Ld{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ly(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=qN.bind(null,this.syncEngine),await SN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new CN}()}createDatastore(t){const n=Oh(t.databaseInfo.databaseId),s=function(r){return new lN(r)}(t.databaseInfo);return function(r,o,a,l){return new fN(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,i,r,o,a){return new pN(s,i,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ly(this.syncEngine,n,0),function(){return ny.C()?new ny:new iN}())}createSyncEngine(t,n){return function(i,r,o,a,l,c,u){const f=new LN(i,r,o,a,l,c);return u&&(f.mu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const r=Mt(i);ut(Er,"RemoteStore shutting down."),r.da.add(5),await zl(r),r.Ra.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ld.provider={build:()=>new Ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):qs("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="FirestoreClient";class JN{constructor(t,n,s,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=SE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{ut(Fi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ut(Fi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=rg(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Mf(e,t){e.asyncQueue.verifyOperationInProgress(),ut(Fi,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await d1(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ZN(e);ut(Fi,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>iy(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>iy(t.remoteStore,i)),e._onlineComponents=t}async function ZN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ut(Fi,"Using user provided OfflineComponentProvider");try{await Mf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Eo("Error using user provided cache. Falling back to memory cache: "+n),await Mf(e,new Ou)}}else ut(Fi,"Using default OfflineComponentProvider"),await Mf(e,new XN(void 0));return e._offlineComponents}async function D1(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ut(Fi,"Using user provided OnlineComponentProvider"),await uy(e,e._uninitializedComponentsProvider._online)):(ut(Fi,"Using default OnlineComponentProvider"),await uy(e,new Ld))),e._onlineComponents}function tL(e){return D1(e).then(t=>t.syncEngine)}async function eL(e){const t=await D1(e),n=t.eventManager;return n.onListen=VN.bind(null,t.syncEngine),n.onUnlisten=BN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$N.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=UN.bind(null,t.syncEngine),n}function nL(e,t,n={}){const s=new ki;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new QN({next:d=>{u.xu(),o.enqueueAndForget(()=>PN(r,f));const p=d.docs.has(a);!p&&d.fromCache?c.reject(new bt(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?c.reject(new bt(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new RN(Wp(a.path),u,{includeMetadataChanges:!0,Qa:!0});return xN(r,f)}(await eL(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(e,t,n){if(!n)throw new bt(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function iL(e,t,n,s){if(t===!0&&s===!0)throw new bt(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function fy(e){if(!wt.isDocumentKey(e))throw new bt(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function cg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":St(12329,{type:typeof e})}function bl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cg(e);throw new bt(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="firestore.googleapis.com",dy=!0;class py{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M1,this.ssl=dy}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:dy;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=h1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<k2)throw new bt(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}iL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R1((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new bt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new bt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new bt(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ug{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new py({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bt(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new bt(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new py(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new oO;switch(s.type){case"firstParty":return new uO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new bt(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=hy.get(n);s&&(ut("ComponentProvider","Removing Datastore"),hy.delete(n),s.terminate())}(this),Promise.resolve()}}function rL(e,t,n,s={}){var i;e=bl(e,ug);const r=Bo(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;r&&(xT(`https://${l}`),PT("Firestore",!0)),o.host!==M1&&o.host!==l&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:r,emulatorOptions:s});if(!_r(c,a)&&(e._setSettings(c),s.mockUserToken)){let u,f;if(typeof s.mockUserToken=="string")u=s.mockUserToken,f=qe.MOCK_USER;else{u=vk(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new bt(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qe(d)}e._authCredentials=new aO(new EE(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new hg(this.firestore,t,this._query)}}class Mn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Mn(this.firestore,t,this._key)}}class wl extends hg{constructor(t,n,s){super(t,n,Wp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Mn(this.firestore,null,new wt(t))}withConverter(t){return new wl(this.firestore,t,this._path)}}function gy(e,t,...n){if(e=Vn(e),arguments.length===1&&(t=SE.newId()),sL("doc","path",t),e instanceof ug){const s=me.fromString(t,...n);return fy(s),new Mn(e,null,new wt(s))}{if(!(e instanceof Mn||e instanceof wl))throw new bt(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(me.fromString(t,...n));return fy(s),new Mn(e.firestore,e instanceof wl?e.converter:null,new wt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="AsyncQueue";class vy{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new g1(this,"async_queue_retry"),this.rc=()=>{const s=Rf();s&&ut(my,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=t;const n=Rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ki;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Wo(t))throw t;ut(my,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(s=>{throw this.Xu=s,this.ec=!1,qs("INTERNAL UNHANDLED ERROR: ",_y(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(t,n,s){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const i=ig.createAndSchedule(this,t,n,s,r=>this.uc(r));return this.Zu.push(i),i}oc(){this.Xu&&St(47125,{cc:_y(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function _y(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class fg extends ug{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new vy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vy(t),this._firestoreClient=void 0,await t}}}function oL(e,t){const n=typeof e=="object"?e:MT(),s=typeof e=="string"?e:Su,i=Pp(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=gk("firestore");r&&rL(i,...r)}return i}function O1(e){if(e._terminated)throw new bt(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||aL(e),e._firestoreClient}function aL(e){var t,n,s;const i=e._freezeSettings(),r=function(a,l,c,u){return new SO(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,R1(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new JN(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Po(Ue.fromBase64String(t))}catch(n){throw new bt(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Po(Ue.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=/^__.*__$/;class cL{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Rr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(t,this.data,n,this.fieldTransforms)}}function L1(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St(40011,{Ic:e})}}class mg{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Ec(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new mg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.dc({path:s,Rc:!1});return i.Vc(t),i}mc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.dc({path:s,Rc:!1});return i.Ec(),i}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Nu(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(L1(this.Ic)&&lL.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class uL{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Oh(t)}bc(t,n,s,i=!1){return new mg({Ic:t,methodName:n,wc:s,path:Fe.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hL(e){const t=e._freezeSettings(),n=Oh(e._databaseId);return new uL(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fL(e,t,n,s,i,r={}){const o=e.bc(r.merge||r.mergeFields?2:0,t,n,i);B1("Data must be an object, but it was:",o,s);const a=$1(s,o);let l,c;if(r.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const f of r.mergeFields){const d=dL(t,f,n);if(!o.contains(d))throw new bt(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);gL(u,d)||u.push(d)}l=new Wn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new cL(new Pn(a),l,c)}function V1(e,t){if(F1(e=Vn(e)))return B1("Unsupported field value:",t,e),$1(e,t);if(e instanceof N1)return function(s,i){if(!L1(i.Ic))throw i.gc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let l=V1(a,i.fc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(s,i){if((s=Vn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return GO(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Se.fromDate(s);return{timestampValue:Du(i.serializer,r)}}if(s instanceof Se){const r=new Se(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Du(i.serializer,r)}}if(s instanceof pg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Po)return{bytesValue:i1(i.serializer,s._byteString)};if(s instanceof Mn){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Gp(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof gg)return function(o,a){return{mapValue:{fields:{[ME]:{stringValue:OE},[Au]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.gc("VectorValues must only contain numeric values.");return Yp(a.serializer,c)})}}}}}}(s,i);throw i.gc(`Unsupported field value: ${cg(s)}`)}(e,t)}function $1(e,t){const n={};return CE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kr(e,(s,i)=>{const r=V1(i,t.Ac(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function F1(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Se||e instanceof pg||e instanceof Po||e instanceof Mn||e instanceof N1||e instanceof gg)}function B1(e,t,n){if(!F1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=cg(n);throw s==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+s)}}function dL(e,t,n){if((t=Vn(t))instanceof dg)return t._internalPath;if(typeof t=="string")return U1(e,t);throw Nu("Field path arguments must be of type string or ",e,!1,void 0,n)}const pL=new RegExp("[~\\*/\\[\\]]");function U1(e,t,n){if(t.search(pL)>=0)throw Nu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dg(...t.split("."))._internalPath}catch{throw Nu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Nu(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new bt(q.INVALID_ARGUMENT,a+e+l)}function gL(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new mL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(j1("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mL extends H1{data(){return super.data()}}function j1(e,t){return typeof t=="string"?U1(e,t):t instanceof dg?t._internalPath:t._delegate._internalPath}class vL{convertValue(t,n="none"){switch(Vi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Li(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw St(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return kr(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(t){var n,s,i;const r=(i=(s=(n=t.fields)===null||n===void 0?void 0:n[Au].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>_e(o.doubleValue));return new gg(r)}convertGeoPoint(t){return new pg(_e(t.latitude),_e(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Ch(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gl(t));default:return null}}convertTimestamp(t){const n=Ni(t);return new Se(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=me.fromString(t);Jt(u1(s),9688,{name:t});const i=new ml(s.get(1),s.get(3)),r=new wt(s.popFirst(5));return i.isEqual(n)||qs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class z1 extends H1{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new bL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(j1("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class bL extends z1{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(e){e=bl(e,Mn);const t=bl(e.firestore,fg);return nL(O1(t),e._key).then(n=>SL(t,e,n))}class TL extends vL{constructor(t){super(),this.firestore=t}convertBytes(t){return new Po(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function EL(e,t,n){e=bl(e,Mn);const s=bl(e.firestore,fg),i=_L(e.converter,t,n);return IL(s,[fL(hL(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Hs.none())])}function IL(e,t){return function(s,i){const r=new ki;return s.asyncQueue.enqueueAndForget(async()=>HN(await tL(s),i,r)),r.promise}(O1(e),t)}function SL(e,t,n){const s=n.docs.get(t._key),i=new TL(e);return new z1(e,i,t._key,s,new yL(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){jo=i})(Uo),To(new yr("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new fg(new lO(s.getProvider("auth-internal")),new hO(o,s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new bt(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(c.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),xi(E_,I_,t),xi(E_,I_,"esm2017")})();const AL={apiKey:"AIzaSyDXxGvAaldYqYysPQHlMkQXbOVTpaxnjuA",authDomain:"chikh-counter.firebaseapp.com",projectId:"chikh-counter",storageBucket:"chikh-counter.firebasestorage.app",messagingSenderId:"600153083247",appId:"1:600153083247:web:f214631934a7f62d25ec9a"},W1=RT(AL),Ir=iO(W1),yy=oL(W1),CL={class:"clock-container"},xL={class:"clock-face",viewBox:"-40 -40 280 280"},PL={id:"clock-bg",cx:"50%",cy:"50%",r:"100%"},kL=["stop-color"],DL=["stop-color"],RL={id:"dot-gradient",x1:"0",y1:"0",x2:"1",y2:"1"},ML=["stop-color"],OL=["stop-color"],NL=["x1","y1","x2","y2"],LL=["cx","cy","r","onClick"],VL=["x","y","fill"],$L={__name:"ClockGroups",props:{groups:{type:Array,required:!0}},setup(e){const t=e;function n(f){const d=new Date(f.start);let p=d.getHours()%12,m=d.getMinutes();return p+m/60}function s(f,d){const p=(f-3)/12*2*Math.PI;return{x:100+d*Math.cos(p),y:100+d*Math.sin(p)}}function i(f){return 17}const r=$t(null),o=$t({});function a(f,d){r.value=f;const p=d.target.ownerSVGElement.getBoundingClientRect(),m=d.target.getBoundingClientRect();o.value={left:`${m.left-p.left+m.width/2}px`,top:`${m.top-p.top-10}px`},setTimeout(()=>{r.value=null},1500)}function l(f){return{transition:`r 0.5s cubic-bezier(.68,-0.55,.27,1.55) ${(f*.07).toFixed(2)}s`,filter:"drop-shadow(0 2px 8px #43705788)"}}function c(){return getComputedStyle(document.documentElement).getPropertyValue("--primary")}function u(){return getComputedStyle(document.documentElement).getPropertyValue("--accent")}return typeof window<"u"&&(window.addDebugGroup=function(f,d=0,p=1){const m=new Date;m.setHours(f),m.setMinutes(d),m.setSeconds(0),m.setMilliseconds(0);const _={start:m.getTime(),count:p};if(Array.isArray(t.groups))t.groups.push(_);else{const y=sT();y&&y.emit&&y.emit("add-debug-group",_)}return _}),(f,d)=>(lt(),gt("div",CL,[(lt(),gt("svg",xL,[X("defs",null,[X("radialGradient",PL,[X("stop",{offset:"0%","stop-color":u(),"stop-opacity":"0.7"},null,8,kL),X("stop",{offset:"100%","stop-color":c(),"stop-opacity":"1"},null,8,DL)]),X("linearGradient",RL,[X("stop",{offset:"0%","stop-color":u()},null,8,ML),X("stop",{offset:"100%","stop-color":c()},null,8,OL)])]),d[0]||(d[0]=X("circle",{cx:"100",cy:"100",r:"90",fill:"url(#clock-bg)"},null,-1)),d[1]||(d[1]=X("circle",{cx:"100",cy:"100",r:"80",class:"clock-outline",fill:"none"},null,-1)),X("g",null,[(lt(),gt(ee,null,gn(12,p=>X("line",{key:p,x1:s(p,120).x,y1:s(p,120).y,x2:s(p,120).x,y2:s(p,120).y,class:"hour-mark"},null,8,NL)),64))]),X("g",null,[(lt(!0),gt(ee,null,gn(e.groups,(p,m)=>(lt(),gt("circle",{key:p.start+"-dot",cx:s(n(p),120).x,cy:s(n(p),120).y,r:i(p.count),class:"group-dot",style:Je(l(m)),onClick:_=>a(m,_),fill:"url(#dot-gradient)"},null,12,LL))),128)),(lt(!0),gt(ee,null,gn(e.groups,(p,m)=>(lt(),gt("text",{key:p.start+"-text",x:s(n(p),120).x,y:s(n(p),120).y,"text-anchor":"middle","dominant-baseline":"central","font-size":"12","font-weight":"bold",fill:u(),style:{"pointer-events":"none","user-select":"none"}},Ze(p.count),9,VL))),128))]),d[2]||(d[2]=X("circle",{cx:"100",cy:"100",r:"7",fill:"#555555",filter:"url(#centerShadow)"},null,-1))])),xt(_h,{name:"fade"},{default:ve(()=>{var p;return[r.value!==null&&e.groups[r.value]?(lt(),gt("div",{key:0,class:"dot-count",style:Je(o.value)},Ze((p=e.groups[r.value])==null?void 0:p.count),5)):Be("",!0)]}),_:1})]))}},FL=Hi($L,[["__scopeId","data-v-55f3784c"]]),BL={class:"menu-panel"},UL={__name:"BurgerMenu",setup(e){const t=$t(!1),n=Ap(),s=async()=>{await qR(Ir),t.value=!1,n.push("/auth")};return(i,r)=>{const o=Os("router-link");return lt(),gt("div",null,[X("button",{class:"burger-btn",onClick:r[0]||(r[0]=a=>t.value=!t.value)},r[5]||(r[5]=[X("span",null,null,-1),X("span",null,null,-1),X("span",null,null,-1)])),xt(_h,{name:"slide"},{default:ve(()=>[t.value?(lt(),gt("div",{key:0,class:"menu-overlay",onClick:r[4]||(r[4]=Ip(a=>t.value=!1,["self"]))},[X("nav",BL,[xt(o,{to:"/stats",class:"menu-link",onClick:r[1]||(r[1]=a=>t.value=!1),"aria-label":""},{default:ve(()=>r[6]||(r[6]=[X("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[X("path",{d:"M4 18V10M9 18V6M15 18V14M20 18V2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_:1,__:[6]}),xt(o,{to:"/calendar",class:"menu-link",onClick:r[2]||(r[2]=a=>t.value=!1),"aria-label":""},{default:ve(()=>r[7]||(r[7]=[X("svg",{viewBox:"0 0 24 24",width:"28",height:"28",fill:"none"},[X("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor","stroke-width":"2"}),X("path",{d:"M16 3v4M8 3v4M3 9h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])),_:1,__:[7]}),xt(o,{to:"/settings",class:"menu-link",onClick:r[3]||(r[3]=a=>t.value=!1),"aria-label":""},{default:ve(()=>r[8]||(r[8]=[X("svg",{viewBox:"0 0 45.973 45.973",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M43.454,18.443h-2.437c-0.453-1.766-1.16-3.42-2.082-4.933l1.752-1.756c0.473-0.473,0.733-1.104,0.733-1.774 c0-0.669-0.262-1.301-0.733-1.773l-2.92-2.917c-0.947-0.948-2.602-0.947-3.545-0.001l-1.826,1.815 C30.9,6.232,29.296,5.56,27.529,5.128V2.52c0-1.383-1.105-2.52-2.488-2.52h-4.128c-1.383,0-2.471,1.137-2.471,2.52v2.607 c-1.766,0.431-3.38,1.104-4.878,1.977l-1.825-1.815c-0.946-0.948-2.602-0.947-3.551-0.001L5.27,8.205 C4.802,8.672,4.535,9.318,4.535,9.978c0,0.669,0.259,1.299,0.733,1.772l1.752,1.76c-0.921,1.513-1.629,3.167-2.081,4.933H2.501 C1.117,18.443,0,19.555,0,20.935v4.125c0,1.384,1.117,2.471,2.501,2.471h2.438c0.452,1.766,1.159,3.43,2.079,4.943l-1.752,1.763 c-0.474,0.473-0.734,1.106-0.734,1.776s0.261,1.303,0.734,1.776l2.92,2.919c0.474,0.473,1.103,0.733,1.772,0.733 s1.299-0.261,1.773-0.733l1.833-1.816c1.498,0.873,3.112,1.545,4.878,1.978v2.604c0,1.383,1.088,2.498,2.471,2.498h4.128 c1.383,0,2.488-1.115,2.488-2.498v-2.605c1.767-0.432,3.371-1.104,4.869-1.977l1.817,1.812c0.474,0.475,1.104,0.735,1.775,0.735 c0.67,0,1.301-0.261,1.774-0.733l2.92-2.917c0.473-0.472,0.732-1.103,0.734-1.772c0-0.67-0.262-1.299-0.734-1.773l-1.75-1.77 c0.92-1.514,1.627-3.179,2.08-4.943h2.438c1.383,0,2.52-1.087,2.52-2.471v-4.125C45.973,19.555,44.837,18.443,43.454,18.443z M22.976,30.85c-4.378,0-7.928-3.517-7.928-7.852c0-4.338,3.55-7.85,7.928-7.85c4.379,0,7.931,3.512,7.931,7.85 C30.906,27.334,27.355,30.85,22.976,30.85z",fill:"currentColor"})],-1)])),_:1,__:[8]}),r[10]||(r[10]=X("div",{class:"menu-spacer"},null,-1)),X("button",{class:"menu-link logout-link",onClick:s,"aria-label":"Logout"},r[9]||(r[9]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M16 17L21 12L16 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),X("path",{d:"M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),X("path",{d:"M12 19C7.58172 19 4 15.4183 4 11C4 6.58172 7.58172 3 12 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))])])):Be("",!0)]),_:1})])}}},HL=Hi(UL,[["__scopeId","data-v-c253f107"]]),jL={key:0,class:"loader-overlay"},zL={__name:"Home",setup(e){const t=["#2F5249","#1976D2","#D32F2F","#7B1FA2","#F57C00","#388E3C","#455A64","#212121"],n=$t(localStorage.getItem("color-primary")&&t.includes(localStorage.getItem("color-primary"))?localStorage.getItem("color-primary"):t[0]);function s(D){let k=D.replace("#","");k.length===3&&(k=k.split("").map(L=>L+L).join(""));const O=parseInt(k,16);return[O>>16,O>>8&255,O&255]}function i([D,k,O]){return"#"+[D,k,O].map(L=>L.toString(16).padStart(2,"0")).join("")}function r(D,k){const[O,L,E]=s(D),b=k<0?0:255,w=Math.abs(k);return i([Math.round((b-O)*w+O),Math.round((b-L)*w+L),Math.round((b-E)*w+E)])}const o=G(()=>{const D=n.value,k=r(D,.5),O=r(D,-.3);return`linear-gradient(135deg, ${k} 0%, ${D} 50%, ${O} 100%)`}),a=$t(0),l=$t(!1),c=$t([]),u=$t({}),f=$t(!0),d=()=>new Date,p=()=>{const D=d();return`${D.getFullYear()}-${D.getMonth()+1}-${D.getDate()}`};function m(){const D=p();c.value=u.value[D]||[];const k=c.value.reduce((O,L)=>O+L.count,0);a.value!==k&&(l.value=!0,setTimeout(()=>{l.value=!1},250)),a.value=k}async function _(){f.value=!0;const D=Ir.currentUser;if(!D){f.value=!1;return}const k=gy(yy,"users",D.uid),O=await wL(k);O.exists()?u.value=O.data().groups||{}:u.value={},m(),f.value=!1}async function y(){const D=Ir.currentUser;if(!D)return;const k=gy(yy,"users",D.uid);await EL(k,{groups:u.value},{merge:!0})}function T(){localStorage.setItem("groups_"+p(),JSON.stringify(c.value))}async function R(){const D=d().getTime(),k=p();u.value[k]||(u.value[k]=[]);const O=u.value[k];if(O.length===0)O.push({start:D,count:1});else{const L=O[O.length-1];D-L.start<60*1e3?L.count++:O.push({start:D,count:1})}c.value=O,a.value=c.value.reduce((L,E)=>L+E.count,0),u.value[k]=O,T(),await y()}return Ap(),bs(()=>{_()}),(D,k)=>(lt(),gt("main",{class:"main-container",style:Je({background:o.value})},[xt(HL),f.value?(lt(),gt("div",jL,k[0]||(k[0]=[X("div",{class:"loader"},null,-1)]))):Be("",!0),X("div",{class:ie(["counter",{animated:l.value}])},Ze(a.value),3),xt(FL,{groups:c.value},null,8,["groups"]),X("button",{class:"tap-btn",onClick:R},"")],4))}},WL=Hi(zL,[["__scopeId","data-v-18eb3ea4"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Yl(e){return e+.5|0}const Ei=(e,t,n)=>Math.max(Math.min(e,n),t);function xa(e){return Ei(Yl(e*2.55),0,255)}function Di(e){return Ei(Yl(e*255),0,255)}function Ns(e){return Ei(Yl(e/2.55)/100,0,1)}function by(e){return Ei(Yl(e*100),0,100)}const Cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vd=[..."0123456789ABCDEF"],YL=e=>Vd[e&15],qL=e=>Vd[(e&240)>>4]+Vd[e&15],wc=e=>(e&240)>>4===(e&15),KL=e=>wc(e.r)&&wc(e.g)&&wc(e.b)&&wc(e.a);function GL(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Cn[e[1]]*17,g:255&Cn[e[2]]*17,b:255&Cn[e[3]]*17,a:t===5?Cn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Cn[e[1]]<<4|Cn[e[2]],g:Cn[e[3]]<<4|Cn[e[4]],b:Cn[e[5]]<<4|Cn[e[6]],a:t===9?Cn[e[7]]<<4|Cn[e[8]]:255})),n}const XL=(e,t)=>e<255?t(e):"";function QL(e){var t=KL(e)?YL:qL;return e?"#"+t(e.r)+t(e.g)+t(e.b)+XL(e.a,t):void 0}const JL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Y1(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function ZL(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function tV(e,t,n){const s=Y1(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function eV(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function vg(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=eV(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function _g(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Di)}function yg(e,t,n){return _g(Y1,e,t,n)}function nV(e,t,n){return _g(tV,e,t,n)}function sV(e,t,n){return _g(ZL,e,t,n)}function q1(e){return(e%360+360)%360}function iV(e){const t=JL.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?xa(+t[5]):Di(+t[5]));const i=q1(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=nV(i,r,o):t[1]==="hsv"?s=sV(i,r,o):s=yg(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function rV(e,t){var n=vg(e);n[0]=q1(n[0]+t),n=yg(n),e.r=n[0],e.g=n[1],e.b=n[2]}function oV(e){if(!e)return;const t=vg(e),n=t[0],s=by(t[1]),i=by(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${Ns(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const wy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ty={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function aV(){const e={},t=Object.keys(Ty),n=Object.keys(wy);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,wy[r]);r=parseInt(Ty[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Tc;function lV(e){Tc||(Tc=aV(),Tc.transparent=[0,0,0,0]);const t=Tc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const cV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function uV(e){const t=cV.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?xa(o):Ei(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?xa(s):Ei(s,0,255)),i=255&(t[4]?xa(i):Ei(i,0,255)),r=255&(t[6]?xa(r):Ei(r,0,255)),{r:s,g:i,b:r,a:n}}}function hV(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ns(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Of=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,qr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function fV(e,t,n){const s=qr(Ns(e.r)),i=qr(Ns(e.g)),r=qr(Ns(e.b));return{r:Di(Of(s+n*(qr(Ns(t.r))-s))),g:Di(Of(i+n*(qr(Ns(t.g))-i))),b:Di(Of(r+n*(qr(Ns(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Ec(e,t,n){if(e){let s=vg(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=yg(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function K1(e,t){return e&&Object.assign(t||{},e)}function Ey(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Di(e[3]))):(t=K1(e,{r:0,g:0,b:0,a:1}),t.a=Di(t.a)),t}function dV(e){return e.charAt(0)==="r"?uV(e):iV(e)}class Tl{constructor(t){if(t instanceof Tl)return t;const n=typeof t;let s;n==="object"?s=Ey(t):n==="string"&&(s=GL(t)||lV(t)||dV(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=K1(this._rgb);return t&&(t.a=Ns(t.a)),t}set rgb(t){this._rgb=Ey(t)}rgbString(){return this._valid?hV(this._rgb):void 0}hexString(){return this._valid?QL(this._rgb):void 0}hslString(){return this._valid?oV(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=fV(this._rgb,t._rgb,n)),this}clone(){return new Tl(this.rgb)}alpha(t){return this._rgb.a=Di(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Yl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ec(this._rgb,2,t),this}darken(t){return Ec(this._rgb,2,-t),this}saturate(t){return Ec(this._rgb,1,t),this}desaturate(t){return Ec(this._rgb,1,-t),this}rotate(t){return rV(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ks(){}const pV=(()=>{let e=0;return()=>e++})();function ae(e){return e==null}function Pe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Gt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function $n(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ts(e,t){return $n(e)?e:t}function Wt(e,t){return typeof e>"u"?t:e}const gV=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function he(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Zt(e,t,n,s){let i,r,o;if(Pe(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Gt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function Lu(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Vu(e){if(Pe(e))return e.map(Vu);if(Gt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Vu(e[n[i]]);return t}return e}function G1(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function mV(e,t,n,s){if(!G1(e))return;const i=t[e],r=n[e];Gt(i)&&Gt(r)?El(i,r,s):t[e]=Vu(r)}function El(e,t,n){const s=Pe(t)?t:[t],i=s.length;if(!Gt(e))return e;n=n||{};const r=n.merger||mV;let o;for(let a=0;a<i;++a){if(o=s[a],!Gt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function qa(e,t){return El(e,t,{merger:vV})}function vV(e,t,n){if(!G1(e))return;const s=t[e],i=n[e];Gt(s)&&Gt(i)?qa(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Vu(i))}const Iy={"":e=>e,x:e=>e.x,y:e=>e.y};function _V(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function yV(e){const t=_V(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function $u(e,t){return(Iy[t]||(Iy[t]=yV(t)))(e)}function bg(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Fu=e=>typeof e<"u",Bi=e=>typeof e=="function",Sy=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function bV(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Re=Math.PI,ds=2*Re,wV=ds+Re,Bu=Number.POSITIVE_INFINITY,TV=Re/180,Yn=Re/2,er=Re/4,Ay=Re*2/3,X1=Math.log10,ko=Math.sign;function Ka(e,t,n){return Math.abs(e-t)<n}function Cy(e){const t=Math.round(e);e=Ka(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(X1(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function EV(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function IV(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Il(e){return!IV(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function SV(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function AV(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function hr(e){return e*(Re/180)}function CV(e){return e*(180/Re)}function xy(e){if(!$n(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function xV(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Re&&(r+=ds),{angle:r,distance:i}}function $d(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function PV(e,t){return(e-t+wV)%ds-Re}function hi(e){return(e%ds+ds)%ds}function Q1(e,t,n,s){const i=hi(e),r=hi(t),o=hi(n),a=hi(r-i),l=hi(o-i),c=hi(i-r),u=hi(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function kn(e,t,n){return Math.max(t,Math.min(n,e))}function kV(e){return kn(e,-32768,32767)}function Pa(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function wg(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const fr=(e,t,n,s)=>wg(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),DV=(e,t,n)=>wg(e,n,s=>e[s][t]>=n);function RV(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const J1=["push","pop","shift","splice","unshift"];function MV(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),J1.forEach(n=>{const s="_onData"+bg(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Py(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(J1.forEach(r=>{delete e[r]}),delete e._chartjs)}function OV(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Z1=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function tI(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,Z1.call(window,()=>{s=!1,e.apply(t,n)}))}}function NV(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Tg=e=>e==="start"?"left":e==="end"?"right":"center",Ye=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,LV=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function VV(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:f,max:d,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(i=Math.min(fr(l,u,f).lo,n?s:fr(t,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,i+1).reverse().findIndex(y=>!ae(y[a.axis]));i-=Math.max(0,_)}i=kn(i,0,s-1)}if(m){let _=Math.max(fr(l,o.axis,d,!0).hi+1,n?0:fr(t,u,o.getPixelForValue(d),!0).hi+1);if(c){const y=l.slice(_-1).findIndex(T=>!ae(T[a.axis]));_+=Math.max(0,y)}r=kn(_,i,s)-i}else r=s-i}return{start:i,count:r}}function $V(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const Ic=e=>e===0||e===1,ky=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ds/n)),Dy=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ds/n)+1,Ga={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Yn)+1,easeOutSine:e=>Math.sin(e*Yn),easeInOutSine:e=>-.5*(Math.cos(Re*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Ic(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ic(e)?e:ky(e,.075,.3),easeOutElastic:e=>Ic(e)?e:Dy(e,.075,.3),easeInOutElastic(e){return Ic(e)?e:e<.5?.5*ky(e*2,.1125,.45):.5+.5*Dy(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ga.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ga.easeInBounce(e*2)*.5:Ga.easeOutBounce(e*2-1)*.5+.5};function Eg(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ry(e){return Eg(e)?e:new Tl(e)}function Nf(e){return Eg(e)?e:new Tl(e).saturate(.5).darken(.1).hexString()}const FV=["x","y","borderWidth","radius","tension"],BV=["color","borderColor","backgroundColor"];function UV(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:BV},numbers:{type:"number",properties:FV}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function HV(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const My=new Map;function jV(e,t){t=t||{};const n=e+JSON.stringify(t);let s=My.get(n);return s||(s=new Intl.NumberFormat(e,t),My.set(n,s)),s}function eI(e,t,n){return jV(t,n).format(e)}const zV={values(e){return Pe(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=WV(e,n)}const o=X1(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eI(e,s,l)}};function WV(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var nI={formatters:zV};function YV(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Sr=Object.create(null),Fd=Object.create(null);function Xa(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Lf(e,t,n){return typeof t=="string"?El(Xa(e,t),n):El(Xa(e,""),t)}class qV{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Nf(i.backgroundColor),this.hoverBorderColor=(s,i)=>Nf(i.borderColor),this.hoverColor=(s,i)=>Nf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Lf(this,t,n)}get(t){return Xa(this,t)}describe(t,n){return Lf(Fd,t,n)}override(t,n){return Lf(Sr,t,n)}route(t,n,s,i){const r=Xa(this,t),o=Xa(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Gt(l)?Object.assign({},c,l):Wt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var ye=new qV({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[UV,HV,YV]);function KV(e){return!e||ae(e.size)||ae(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Oy(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function nr(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function Ny(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Bd(e,t,n,s){sI(e,t,n,s,null)}function sI(e,t,n,s,i){let r,o,a,l,c,u,f,d;const p=t.pointStyle,m=t.rotation,_=t.radius;let y=(m||0)*TV;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(y),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(_)||_<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,s,i/2,_,0,0,ds):e.arc(n,s,_,0,ds),e.closePath();break;case"triangle":u=i?i/2:_,e.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*_),y+=Ay,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*_),y+=Ay,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*_),e.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(y+er)*l,f=Math.cos(y+er)*(i?i/2-c:l),a=Math.sin(y+er)*l,d=Math.sin(y+er)*(i?i/2-c:l),e.arc(n-f,s-a,c,y-Re,y-Yn),e.arc(n+d,s-o,c,y-Yn,y),e.arc(n+f,s+a,c,y,y+Yn),e.arc(n-d,s+o,c,y+Yn,y+Re),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*_,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}y+=er;case"rectRot":f=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(i?i/2:_),e.moveTo(n-f,s-a),e.lineTo(n+d,s-o),e.lineTo(n+f,s+a),e.lineTo(n-d,s+o),e.closePath();break;case"crossRot":y+=er;case"cross":f=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(i?i/2:_),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o);break;case"star":f=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(i?i/2:_),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o),y+=er,f=Math.cos(y)*(i?i/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(i?i/2:_),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o);break;case"line":o=i?i/2:Math.cos(y)*_,a=Math.sin(y)*_,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(y)*(i?i/2:_),s+Math.sin(y)*_);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Sl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ig(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Sg(e){e.restore()}function GV(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function XV(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function QV(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ae(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function JV(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function ZV(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Al(e,t,n,s,i,r={}){const o=Pe(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,QV(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&ZV(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),ae(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),JV(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function Ud(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Re,Re,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Re,Yn,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Yn,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-Yn,!0),e.lineTo(n+o.topLeft,s)}const t$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,e$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function n$(e,t){const n=(""+e).match(t$);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const s$=e=>+e||0;function iI(e,t){const n={},s=Gt(t),i=s?Object.keys(t):t,r=Gt(e)?s?o=>Wt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=s$(r(o));return n}function i$(e){return iI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Qa(e){return iI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Fn(e){const t=i$(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qe(e,t){e=e||{},t=t||ye.font;let n=Wt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Wt(e.style,t.style);s&&!(""+s).match(e$)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Wt(e.family,t.family),lineHeight:n$(Wt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Wt(e.weight,t.weight),string:""};return i.string=KV(i),i}function Sc(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function r$(e,t,n){const{min:s,max:i}=e,r=gV(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Or(e,t){return Object.assign(Object.create(e),t)}function Ag(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=lI("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Ag([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return oI(a,l,()=>d$(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Vy(a).includes(l)},ownKeys(a){return Vy(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Do(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:rI(e,s),setContext:r=>Do(e,r,n,s),override:r=>Do(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return oI(r,o,()=>a$(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function rI(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Bi(n)?n:()=>n,isIndexable:Bi(s)?s:()=>s}}const o$=(e,t)=>e?e+bg(t):t,Cg=(e,t)=>Gt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function oI(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function a$(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return Bi(a)&&o.isScriptable(t)&&(a=l$(t,a,e,n)),Pe(a)&&a.length&&(a=c$(t,a,e,o.isIndexable)),Cg(t,a)&&(a=Do(a,i,r&&r[t],o)),a}function l$(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),Cg(e,l)&&(l=xg(i._scopes,i,e,l)),l}function c$(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Gt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=xg(c,i,e,u);t.push(Do(f,r,o&&o[e],a))}}return t}function aI(e,t,n){return Bi(e)?e(t,n):e}const u$=(e,t)=>e===!0?t:typeof e=="string"?$u(t,e):void 0;function h$(e,t,n,s,i){for(const r of t){const o=u$(n,r);if(o){e.add(o);const a=aI(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function xg(e,t,n,s){const i=t._rootScopes,r=aI(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=Ly(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=Ly(a,o,r,l,s),l===null)?!1:Ag(Array.from(a),[""],i,r,()=>f$(t,n,s))}function Ly(e,t,n,s,i){for(;n;)n=h$(e,t,n,s,i);return n}function f$(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Pe(i)&&Gt(n)?n:i||{}}function d$(e,t,n,s){let i;for(const r of t)if(i=lI(o$(r,e),n),typeof i<"u")return Cg(e,i)?xg(n,s,e,i):i}function lI(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Vy(e){let t=e._keys;return t||(t=e._keys=p$(e._scopes)),t}function p$(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}const g$=Number.EPSILON||1e-14,Ro=(e,t)=>t<e.length&&!e[t].skip&&e[t],cI=e=>e==="x"?"y":"x";function m$(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=$d(r,i),l=$d(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=s*c,d=s*u;return{previous:{x:r.x-f*(o.x-i.x),y:r.y-f*(o.y-i.y)},next:{x:r.x+d*(o.x-i.x),y:r.y+d*(o.y-i.y)}}}function v$(e,t,n){const s=e.length;let i,r,o,a,l,c=Ro(e,0);for(let u=0;u<s-1;++u)if(l=c,c=Ro(e,u+1),!(!l||!c)){if(Ka(t[u],0,g$)){n[u]=n[u+1]=0;continue}i=n[u]/t[u],r=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=r*o*t[u])}}function _$(e,t,n="x"){const s=cI(n),i=e.length;let r,o,a,l=Ro(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ro(e,c+1),!a)continue;const u=a[n],f=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=f-r*t[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=f+r*t[c])}}function y$(e,t="x"){const n=cI(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=Ro(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ro(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?ko(i[o-1])!==ko(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}v$(e,i,r),_$(e,r,t)}function Ac(e,t,n){return Math.max(Math.min(e,n),t)}function b$(e,t){let n,s,i,r,o,a=Sl(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&Sl(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Ac(i.cp1x,t.left,t.right),i.cp1y=Ac(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Ac(i.cp2x,t.left,t.right),i.cp2y=Ac(i.cp2y,t.top,t.bottom)))}function w$(e,t,n,s,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")y$(e,i);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=m$(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&b$(e,n)}function Pg(){return typeof window<"u"&&typeof document<"u"}function kg(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Uu(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Vh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function T$(e,t){return Vh(e).getPropertyValue(t)}const E$=["top","right","bottom","left"];function mr(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=E$[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const I$=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function S$(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(I$(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function or(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=Vh(n),r=i.boxSizing==="border-box",o=mr(i,"padding"),a=mr(i,"border","width"),{x:l,y:c,box:u}=S$(e,n),f=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:p,height:m}=t;return r&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-f)/p*n.width/s),y:Math.round((c-d)/m*n.height/s)}}function A$(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&kg(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Vh(r),l=mr(a,"border","width"),c=mr(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Uu(a.maxWidth,r,"clientWidth"),i=Uu(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Bu,maxHeight:i||Bu}}const Cc=e=>Math.round(e*10)/10;function C$(e,t,n,s){const i=Vh(e),r=mr(i,"margin"),o=Uu(i.maxWidth,e,"clientWidth")||Bu,a=Uu(i.maxHeight,e,"clientHeight")||Bu,l=A$(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const d=mr(i,"border","width"),p=mr(i,"padding");c-=p.width+d.width,u-=p.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Cc(Math.min(c,o,l.maxWidth)),u=Cc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Cc(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Cc(Math.floor(u*s))),{width:c,height:u}}function $y(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const x$=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Pg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Fy(e,t){const n=T$(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ar(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function P$(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function k$(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=ar(e,i,n),a=ar(i,r,n),l=ar(r,t,n),c=ar(o,a,n),u=ar(a,l,n);return ar(c,u,n)}const D$=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},R$=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function mo(e,t,n){return e?D$(t,n):R$()}function uI(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function hI(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function fI(e){return e==="angle"?{between:Q1,compare:PV,normalize:hi}:{between:Pa,compare:(t,n)=>t-n,normalize:t=>t}}function By({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function M$(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=fI(s),l=t.length;let{start:c,end:u,loop:f}=e,d,p;if(f){for(c+=l,u+=l,d=0,p=l;d<p&&o(a(t[c%l][s]),i,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:e.style}}function O$(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=fI(s),{start:u,end:f,loop:d,style:p}=M$(e,t,n),m=[];let _=!1,y=null,T,R,D;const k=()=>l(i,D,T)&&a(i,D)!==0,O=()=>a(r,T)===0||l(r,D,T),L=()=>_||k(),E=()=>!_||O();for(let b=u,w=u;b<=f;++b)R=t[b%o],!R.skip&&(T=c(R[s]),T!==D&&(_=l(T,i,r),y===null&&L()&&(y=a(T,i)===0?b:w),y!==null&&E()&&(m.push(By({start:y,end:b,loop:d,count:o,style:p})),y=null),w=b,D=T));return y!==null&&m.push(By({start:y,end:f,loop:d,count:o,style:p})),m}function N$(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=O$(s[i],e.points,t);r.length&&n.push(...r)}return n}function L$(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function V$(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function $$(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=L$(n,i,r,s);if(s===!0)return Uy(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return Uy(e,V$(n,o,l,c),n,t)}function Uy(e,t,n,s){return!s||!s.setContext||!n?t:F$(e,t,n,s)}function F$(e,t,n,s){const i=e._chart.getContext(),r=Hy(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=r,f=t[0].start,d=f;function p(m,_,y,T){const R=a?-1:1;if(m!==_){for(m+=l;n[m%l].skip;)m-=R;for(;n[_%l].skip;)_+=R;m%l!==_%l&&(c.push({start:m%l,end:_%l,loop:y,style:T}),u=T,f=_%l)}}for(const m of t){f=a?f:m.start;let _=n[f%l],y;for(d=f+1;d<=m.end;d++){const T=n[d%l];y=Hy(s.setContext(Or(i,{type:"segment",p0:_,p1:T,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),B$(y,u)&&p(f,d-1,m.loop,u),_=T,u=y}f<d-1&&p(f,d-1,m.loop,u)}return c}function Hy(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function B$(e,t){if(!t)return!1;const n=[],s=function(i,r){return Eg(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function xc(e,t,n){return e.options.clip?e[n]:t[n]}function U$(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:xc(n,t,"left"),right:xc(n,t,"right"),top:xc(s,t,"top"),bottom:xc(s,t,"bottom")}:t}function H$(e,t){const n=t._clip;if(n.disabled)return!1;const s=U$(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class j${constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Z1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ds=new j$;const jy="transparent",z$={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Ry(e||jy),i=s.valid&&Ry(t||jy);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class W${constructor(t,n,s,i){const r=n[s];i=Sc([t.to,i,r,t.from]);const o=Sc([t.from,r,i]);this._active=!0,this._fn=t.fn||z$[t.type||typeof o],this._easing=Ga[t.easing]||Ga.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Sc([t.to,n,i,t.from]),this._from=Sc([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class dI{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Gt(t))return;const n=Object.keys(ye.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Gt(r))return;const o={};for(const a of n)o[a]=r[a];(Pe(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=q$(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&Y$(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let f=r[c];const d=s.get(c);if(f)if(d&&f.active()){f.update(d,u,a);continue}else f.cancel();if(!d||!d.duration){t[c]=u;continue}r[c]=f=new W$(d,t,c,u),i.push(f)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Ds.add(this._chart,s),!0}}function Y$(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function q$(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function zy(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function K$(e,t,n){if(n===!1)return!1;const s=zy(e,n),i=zy(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function G$(e){let t,n,s,i;return Gt(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function pI(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function Wy(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],$n(c)&&(r||t===0||ko(t)===ko(c))&&(t+=c)}return!u&&!s.all?0:t}function X$(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function Vf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Q$(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function J$(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Z$(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function Yy(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function qy(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=Q$(r,o,s),f=t.length;let d;for(let p=0;p<f;++p){const m=t[p],{[l]:_,[c]:y}=m,T=m._stacks||(m._stacks={});d=T[c]=Z$(i,u,_),d[a]=y,d._top=Yy(d,o,!0,s.type),d._bottom=Yy(d,o,!1,s.type);const R=d._visualValues||(d._visualValues={});R[a]=y}}function $f(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function tF(e,t){return Or(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function eF(e,t,n){return Or(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function pa(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Ff=e=>e==="reset"||e==="none",Ky=(e,t)=>t?e:Object.assign({},e),nF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:pI(n,!0),values:null};class Ja{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&pa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(f,d,p,m)=>f==="x"?d:f==="r"?m:p,r=n.xAxisID=Wt(s.xAxisID,$f(t,"x")),o=n.yAxisID=Wt(s.yAxisID,$f(t,"y")),a=n.rAxisID=Wt(s.rAxisID,$f(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Py(this._data,this),t._stacked&&pa(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Gt(n)){const i=this._cachedMeta;this._data=X$(n,i)}else if(s!==n){if(s){Py(s,this);const i=this._cachedMeta;pa(i),i._parsed=[]}n&&Object.isExtensible(n)&&MV(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Vf(n.vScale,n),n.stack!==s.stack&&(i=!0,pa(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(qy(this,n._parsed),n._stacked=Vf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,f,d;if(this._parsing===!1)s._parsed=i,s._sorted=!0,d=i;else{Pe(i[t])?d=this.parseArrayData(s,i,t,n):Gt(i[t])?d=this.parseObjectData(s,i,t,n):d=this.parsePrimitiveData(s,i,t,n);const p=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=f=d[u],l&&(p()&&(l=!1),c=f);s._sorted=l}o&&qy(this,d)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,f=new Array(i);let d,p,m;for(d=0,p=i;d<p;++d)m=d+s,f[d]={[a]:u||r.parse(c[m],m),[l]:o.parse(n[m],m)};return f}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+s,f=n[u],a[l]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,d,p;for(u=0,f=i;u<f;++u)d=u+s,p=n[d],c[u]={x:r.parse($u(p,a),d),y:o.parse($u(p,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:pI(i,!0),values:n._stacks[t.axis]._visualValues};return Wy(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=Wy(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=nF(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=J$(a);let d,p;function m(){p=i[d];const _=p[a.axis];return!$n(p[t.axis])||u>_||f<_}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],$n(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=G$(Wt(this.options.clip,K$(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=eF(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=tF(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Fu(s);if(a)return Ky(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ye.elements[t]),m=()=>this.getContext(s,i,n),_=c.resolveNamedOptions(d,p,m,f);return _.$shared&&(_.$shared=l,r[o]=Object.freeze(Ky(_,l))),_}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(d,this.getContext(t,s,n))}const c=new dI(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ff(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Ff(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Ff(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&pa(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Lt(Ja,"defaults",{}),Lt(Ja,"datasetElementType",null),Lt(Ja,"dataElementType",null);class Zc extends Ja{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=VV(n,i,o);this._drawStart=a,this._drawCount=l,$V(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,i),d=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,y=Il(m)?m:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||r||i==="none",R=n+s,D=t.length;let k=n>0&&this.getParsed(n-1);for(let O=0;O<D;++O){const L=t[O],E=T?L:{};if(O<n||O>=R){E.skip=!0;continue}const b=this.getParsed(O),w=ae(b[p]),A=E[d]=o.getPixelForValue(b[d],O),x=E[p]=r||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[p],O);E.skip=isNaN(A)||isNaN(x)||w,E.stop=O>0&&Math.abs(b[d]-k[d])>y,_&&(E.parsed=b,E.raw=c.data[O]),f&&(E.options=u||this.resolveDataElementOptions(O,L.active?"active":i)),T||this.updateElement(L,O,E,i),k=b}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Lt(Zc,"id","line"),Lt(Zc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Lt(Zc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function sr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dg{constructor(t){Lt(this,"options");this.options=t||{}}static override(t){Object.assign(Dg.prototype,t)}init(){}formats(){return sr()}parse(){return sr()}format(){return sr()}add(){return sr()}diff(){return sr()}startOf(){return sr()}endOf(){return sr()}}var sF={_date:Dg};function iF(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?DV:fr;if(s){if(i._sharedOptions){const u=r[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const d=c(r,t,n-f),p=c(r,t,n+f);return{lo:d.lo,hi:p.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:d}=e,p=d.slice(0,u.lo+1).reverse().findIndex(_=>!ae(_[f.axis]));u.lo-=Math.max(0,p);const m=d.slice(u.hi).findIndex(_=>!ae(_[f.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:r.length-1}}function $h(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:f,hi:d}=iF(r[a],t,o,i);for(let p=f;p<=d;++p){const m=u[p];m.skip||s(m,c,p)}}}function rF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Bf(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||$h(e,n,t,function(a,l,c){!i&&!Sl(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function oF(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=xV(o,{x:t.x,y:t.y});Q1(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return $h(e,n,t,r),i}function aF(e,t,n,s,i,r){let o=[];const a=rF(n);let l=Number.POSITIVE_INFINITY;function c(u,f,d){const p=u.inRange(t.x,t.y,i);if(s&&!p)return;const m=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(m))&&!p)return;const y=a(t,m);y<l?(o=[{element:u,datasetIndex:f,index:d}],l=y):y===l&&o.push({element:u,datasetIndex:f,index:d})}return $h(e,n,t,c),o}function Uf(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?oF(e,t,n,i):aF(e,t,n,s,i,r)}function Gy(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return $h(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var lF={modes:{index(e,t,n,s){const i=or(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Bf(e,i,r,s,o):Uf(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=or(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Bf(e,i,r,s,o):Uf(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=or(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Bf(e,i,r,s,o)},nearest(e,t,n,s){const i=or(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Uf(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=or(t,e);return Gy(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=or(t,e);return Gy(e,i,"y",n.intersect,s)}}};const gI=["left","top","right","bottom"];function ga(e,t){return e.filter(n=>n.pos===t)}function Xy(e,t){return e.filter(n=>gI.indexOf(n.pos)===-1&&n.box.axis===t)}function ma(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function cF(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function uF(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!gI.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function hF(e,t){const n=uF(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function fF(e){const t=cF(e),n=ma(t.filter(c=>c.box.fullSize),!0),s=ma(ga(t,"left"),!0),i=ma(ga(t,"right")),r=ma(ga(t,"top"),!0),o=ma(ga(t,"bottom")),a=Xy(t,"x"),l=Xy(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ga(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function Qy(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function mI(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function dF(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Gt(i)){n.size&&(e[i]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,e[i]+=n.size}r.getPadding&&mI(o,r.getPadding());const a=Math.max(0,t.outerWidth-Qy(o,e,"left","right")),l=Math.max(0,t.outerHeight-Qy(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function pF(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function gF(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function ka(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,gF(a.horizontal,t));const{same:f,other:d}=dF(t,n,a,s);c|=f&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&ka(i,t,n,s)||u}function Pc(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function Jy(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,d=c.size||l.height;Fu(c.start)&&(o=c.start),l.fullSize?Pc(l,i.left,o,n.outerWidth-i.right-i.left,d):Pc(l,t.left+c.placed,o,f,d),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,d=c.size||l.width;Fu(c.start)&&(r=c.start),l.fullSize?Pc(l,r,i.top,d,n.outerHeight-i.bottom-i.top):Pc(l,r,t.top+c.placed,d,f),c.start=r,c.placed+=f,r=l.right}}t.x=r,t.y=o}var Dn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Fn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=fF(e.boxes),l=a.vertical,c=a.horizontal;Zt(e.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,y)=>y.box.options&&y.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);mI(d,Fn(s));const p=Object.assign({maxPadding:d,w:r,h:o,x:i.left,y:i.top},i),m=hF(l.concat(c),f);ka(a.fullSize,p,f,m),ka(l,p,f,m),ka(c,p,f,m)&&ka(l,p,f,m),pF(p),Jy(a.leftAndTop,p,f,m),p.x+=p.w,p.y+=p.h,Jy(a.rightAndBottom,p,f,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Zt(a.chartArea,_=>{const y=_.box;Object.assign(y,e.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class vI{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class mF extends vI{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const tu="$chartjs",vF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zy=e=>e===null||e==="";function _F(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[tu]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Zy(i)){const r=Fy(e,"width");r!==void 0&&(e.width=r)}if(Zy(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Fy(e,"height");r!==void 0&&(e.height=r)}return e}const _I=x$?{passive:!0}:!1;function yF(e,t,n){e&&e.addEventListener(t,n,_I)}function bF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,_I)}function wF(e,t){const n=vF[e.type]||e.type,{x:s,y:i}=or(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Hu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function TF(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Hu(a.addedNodes,s),o=o&&!Hu(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function EF(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Hu(a.removedNodes,s),o=o&&!Hu(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Cl=new Map;let tb=0;function yI(){const e=window.devicePixelRatio;e!==tb&&(tb=e,Cl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function IF(e,t){Cl.size||window.addEventListener("resize",yI),Cl.set(e,t)}function SF(e){Cl.delete(e),Cl.size||window.removeEventListener("resize",yI)}function AF(e,t,n){const s=e.canvas,i=s&&kg(s);if(!i)return;const r=tI((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),IF(e,r),o}function Hf(e,t,n){n&&n.disconnect(),t==="resize"&&SF(e)}function CF(e,t,n){const s=e.canvas,i=tI(r=>{e.ctx!==null&&n(wF(r,e))},e);return yF(s,t,i),i}class xF extends vI{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(_F(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[tu])return!1;const s=n[tu].initial;["height","width"].forEach(r=>{const o=s[r];ae(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[tu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:TF,detach:EF,resize:AF}[n]||CF;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Hf,detach:Hf,resize:Hf}[n]||bF)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return C$(t,n,s,i)}isAttached(t){const n=t&&kg(t);return!!(n&&n.isConnected)}}function PF(e){return!Pg()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?mF:xF}var Fc;let Nr=(Fc=class{constructor(){Lt(this,"x");Lt(this,"y");Lt(this,"active",!1);Lt(this,"options");Lt(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Il(this.x)&&Il(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},Lt(Fc,"defaults",{}),Lt(Fc,"defaultRoutes"),Fc);function kF(e,t){const n=e.options.ticks,s=DF(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?MF(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return OF(t,c,r,o/i),c;const u=RF(r,t,i);if(o>0){let f,d;const p=o>1?Math.round((l-a)/(o-1)):null;for(kc(t,c,u,ae(p)?0:a-p,a),f=0,d=o-1;f<d;f++)kc(t,c,u,r[f],r[f+1]);return kc(t,c,u,l,ae(p)?t.length:l+p),c}return kc(t,c,u),c}function DF(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function RF(e,t,n){const s=NF(e),i=t.length/n;if(!s)return Math.max(i,1);const r=EV(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function MF(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function OF(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function kc(e,t,n,s,i){const r=Wt(s,0),o=Math.min(Wt(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function NF(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const LF=e=>e==="left"?"right":e==="right"?"left":e,eb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,nb=(e,t)=>Math.min(t||e,e);function sb(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function VF(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function $F(e,t){Zt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function va(e){return e.drawTicks?e.tickLength:0}function ib(e,t){if(!e.display)return 0;const n=Qe(e.font,t),s=Fn(e.padding);return(Pe(e.text)?e.text.length:1)*n.lineHeight+s.height}function FF(e,t){return Or(e,{scale:t,type:"scale"})}function BF(e,t,n){return Or(e,{tick:n,index:t,type:"tick"})}function UF(e,t,n){let s=Tg(e);return(n&&t!=="right"||!n&&t==="right")&&(s=LF(s)),s}function HF(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let f=0,d,p,m;const _=o-i,y=a-r;if(e.isHorizontal()){if(p=Ye(s,r,a),Gt(n)){const T=Object.keys(n)[0],R=n[T];m=u[T].getPixelForValue(R)+_-t}else n==="center"?m=(c.bottom+c.top)/2+_-t:m=eb(e,n,t);d=a-r}else{if(Gt(n)){const T=Object.keys(n)[0],R=n[T];p=u[T].getPixelForValue(R)-y+t}else n==="center"?p=(c.left+c.right)/2-y+t:p=eb(e,n,t);m=Ye(s,o,i),f=n==="left"?-Yn:Yn}return{titleX:p,titleY:m,maxWidth:d,rotation:f}}class qo extends Nr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=ts(t,Number.POSITIVE_INFINITY),n=ts(n,Number.NEGATIVE_INFINITY),s=ts(s,Number.POSITIVE_INFINITY),i=ts(i,Number.NEGATIVE_INFINITY),{min:ts(t,s),max:ts(n,i),minDefined:$n(t),maxDefined:$n(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:ts(n,ts(s,n)),max:ts(s,ts(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){he(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r$(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?sb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){he(this.options.afterUpdate,[this])}beforeSetDimensions(){he(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){he(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),he(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){he(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=he(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){he(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){he(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=nb(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,d=u.highest.height,p=kn(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),f+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-va(t.grid)-n.padding-ib(t.title,this.chart.options.font),c=Math.sqrt(f*f+d*d),o=CV(Math.min(Math.asin(kn((u.highest.height+6)/a,-1,1)),Math.asin(kn(l/c,-1,1))-Math.asin(kn(d/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){he(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){he(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=ib(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=va(r)+l):(t.height=this.maxHeight,t.width=va(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:d}=this._getLabelSizes(),p=s.padding*2,m=hr(this.labelRotation),_=Math.cos(m),y=Math.sin(m);if(a){const T=s.mirror?0:y*f.width+_*d.height;t.height=Math.min(this.maxHeight,t.height+T+p)}else{const T=s.mirror?0:_*f.width+y*d.height;t.width=Math.min(this.maxWidth,t.width+T+p)}this._calculatePadding(c,u,y,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,p=0;l?c?(d=i*t.width,p=s*n.height):(d=s*t.height,p=i*n.width):r==="start"?p=n.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,p=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=t.height/2;r==="start"?(u=0,f=t.height):r==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){he(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ae(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=sb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/nb(n,s));let c=0,u=0,f,d,p,m,_,y,T,R,D,k,O;for(f=0;f<n;f+=l){if(m=t[f].label,_=this._resolveTickFontOptions(f),i.font=y=_.string,T=r[y]=r[y]||{data:{},gc:[]},R=_.lineHeight,D=k=0,!ae(m)&&!Pe(m))D=Oy(i,T.data,T.gc,D,m),k=R;else if(Pe(m))for(d=0,p=m.length;d<p;++d)O=m[d],!ae(O)&&!Pe(O)&&(D=Oy(i,T.data,T.gc,D,O),k+=R);o.push(D),a.push(k),c=Math.max(D,c),u=Math.max(k,u)}$F(r,n);const L=o.indexOf(c),E=a.indexOf(u),b=w=>({width:o[w]||0,height:a[w]||0});return{first:b(0),last:b(n-1),widest:b(L),highest:b(E),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return kV(this._alignToPixels?nr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=BF(this.getContext(),t,s))}return this.$context||(this.$context=FF(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=hr(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),d=va(r),p=[],m=a.setContext(this.getContext()),_=m.display?m.width:0,y=_/2,T=function(at){return nr(s,at,_)};let R,D,k,O,L,E,b,w,A,x,C,S;if(o==="top")R=T(this.bottom),E=this.bottom-d,w=R-y,x=T(t.top)+y,S=t.bottom;else if(o==="bottom")R=T(this.top),x=t.top,S=T(t.bottom)-y,E=R+y,w=this.top+d;else if(o==="left")R=T(this.right),L=this.right-d,b=R-y,A=T(t.left)+y,C=t.right;else if(o==="right")R=T(this.left),A=t.left,C=T(t.right)-y,L=R+y,b=this.left+d;else if(n==="x"){if(o==="center")R=T((t.top+t.bottom)/2+.5);else if(Gt(o)){const at=Object.keys(o)[0],ot=o[at];R=T(this.chart.scales[at].getPixelForValue(ot))}x=t.top,S=t.bottom,E=R+y,w=E+d}else if(n==="y"){if(o==="center")R=T((t.left+t.right)/2);else if(Gt(o)){const at=Object.keys(o)[0],ot=o[at];R=T(this.chart.scales[at].getPixelForValue(ot))}L=R-y,b=L-d,A=t.left,C=t.right}const dt=Wt(i.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/dt));for(D=0;D<f;D+=Q){const at=this.getContext(D),ot=r.setContext(at),mt=a.setContext(at),Nt=ot.lineWidth,z=ot.color,At=mt.dash||[],et=mt.dashOffset,Pt=ot.tickWidth,Rt=ot.tickColor,Yt=ot.tickBorderDash||[],Ht=ot.tickBorderDashOffset;k=VF(this,D,l),k!==void 0&&(O=nr(s,k,Nt),c?L=b=A=C=O:E=w=x=S=O,p.push({tx1:L,ty1:E,tx2:b,ty2:w,x1:A,y1:x,x2:C,y2:S,width:Nt,color:z,borderDash:At,borderDashOffset:et,tickWidth:Pt,tickColor:Rt,tickBorderDash:Yt,tickBorderDashOffset:Ht}))}return this._ticksLength=f,this._borderValue=R,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=r,d=va(s.grid),p=d+u,m=f?-u:p,_=-hr(this.labelRotation),y=[];let T,R,D,k,O,L,E,b,w,A,x,C,S="middle";if(i==="top")L=this.bottom-m,E=this._getXAxisLabelAlignment();else if(i==="bottom")L=this.top+m,E=this._getXAxisLabelAlignment();else if(i==="left"){const Q=this._getYAxisLabelAlignment(d);E=Q.textAlign,O=Q.x}else if(i==="right"){const Q=this._getYAxisLabelAlignment(d);E=Q.textAlign,O=Q.x}else if(n==="x"){if(i==="center")L=(t.top+t.bottom)/2+p;else if(Gt(i)){const Q=Object.keys(i)[0],at=i[Q];L=this.chart.scales[Q].getPixelForValue(at)+p}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")O=(t.left+t.right)/2-p;else if(Gt(i)){const Q=Object.keys(i)[0],at=i[Q];O=this.chart.scales[Q].getPixelForValue(at)}E=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const dt=this._getLabelSizes();for(T=0,R=a.length;T<R;++T){D=a[T],k=D.label;const Q=r.setContext(this.getContext(T));b=this.getPixelForTick(T)+r.labelOffset,w=this._resolveTickFontOptions(T),A=w.lineHeight,x=Pe(k)?k.length:1;const at=x/2,ot=Q.color,mt=Q.textStrokeColor,Nt=Q.textStrokeWidth;let z=E;o?(O=b,E==="inner"&&(T===R-1?z=this.options.reverse?"left":"right":T===0?z=this.options.reverse?"right":"left":z="center"),i==="top"?c==="near"||_!==0?C=-x*A+A/2:c==="center"?C=-dt.highest.height/2-at*A+A:C=-dt.highest.height+A/2:c==="near"||_!==0?C=A/2:c==="center"?C=dt.highest.height/2-at*A:C=dt.highest.height-x*A,f&&(C*=-1),_!==0&&!Q.showLabelBackdrop&&(O+=A/2*Math.sin(_))):(L=b,C=(1-x)*A/2);let At;if(Q.showLabelBackdrop){const et=Fn(Q.backdropPadding),Pt=dt.heights[T],Rt=dt.widths[T];let Yt=C-et.top,Ht=0-et.left;switch(S){case"middle":Yt-=Pt/2;break;case"bottom":Yt-=Pt;break}switch(E){case"center":Ht-=Rt/2;break;case"right":Ht-=Rt;break;case"inner":T===R-1?Ht-=Rt:T>0&&(Ht-=Rt/2);break}At={left:Ht,top:Yt,width:Rt+et.width,height:Pt+et.height,color:Q.backdropColor}}y.push({label:k,font:w,textOffset:C,options:{rotation:_,color:ot,strokeColor:mt,strokeWidth:Nt,textAlign:z,textBaseline:S,translation:[O,L],backdrop:At}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-hr(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,d;this.isHorizontal()?(c=nr(t,this.left,o)-o/2,u=nr(t,this.right,a)+a/2,f=d=l):(f=nr(t,this.top,o)-o/2,d=nr(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Ig(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Al(s,c,0,u,l,a)}i&&Sg(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Qe(s.font),o=Fn(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Gt(n)?(l+=o.bottom,Pe(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:d}=HF(this,l,n,a);Al(t,s.text,0,0,r,{color:s.color,maxWidth:f,rotation:d,textAlign:UF(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Wt(t.grid&&t.grid.z,-1),i=Wt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qo.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Qe(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Dc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;WF(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,jF(t,o,s),this.override&&ye.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in ye[i]&&(delete ye[i][s],this.override&&delete Sr[s])}}function jF(e,t,n){const s=El(Object.create(null),[n?ye.get(n):{},ye.get(t),e.defaults]);ye.set(t,s),e.defaultRoutes&&zF(t,e.defaultRoutes),e.descriptors&&ye.describe(t,e.descriptors)}function zF(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ye.route(r,i,l,a)})}function WF(e){return"id"in e&&"defaults"in e}class YF{constructor(){this.controllers=new Dc(Ja,"datasets",!0),this.elements=new Dc(Nr,"elements"),this.plugins=new Dc(Object,"plugins"),this.scales=new Dc(qo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Zt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=bg(t);he(s["before"+i],[],s),n[t](s),he(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var ss=new YF;class qF{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(he(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=Wt(s.options&&s.options.plugins,{}),r=KF(s);return i===!1&&!n?[]:XF(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function KF(e){const t={},n=[],s=Object.keys(ss.plugins.items);for(let r=0;r<s.length;r++)n.push(ss.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function GF(e,t){return!t&&e===!1?null:e===!0?{}:e}function XF(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=GF(s[l],i);c!==null&&r.push({plugin:a,options:QF(e.config,{plugin:a,local:n[l]},c,o)})}return r}function QF(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hd(e,t){const n=ye.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function JF(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function ZF(e,t){return e===t?"_index_":"_value_"}function rb(e){if(e==="x"||e==="y"||e==="r")return e}function t4(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function jd(e,...t){if(rb(e))return e;for(const n of t){const s=n.axis||t4(n.position)||e.length>1&&rb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function ob(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function e4(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return ob(e,"x",n[0])||ob(e,"y",n[0])}return{}}function n4(e,t){const n=Sr[e.type]||{scales:{}},s=t.scales||{},i=Hd(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Gt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=jd(o,a,e4(o,e),ye.scales[a.type]),c=ZF(l,i),u=n.scales||{};r[o]=qa(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Hd(a,t),u=(Sr[a]||{}).scales||{};Object.keys(u).forEach(f=>{const d=JF(f,l),p=o[d+"AxisID"]||d;r[p]=r[p]||Object.create(null),qa(r[p],[{axis:d},s[p],u[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];qa(a,[ye.scales[a.type],ye.scale])}),r}function bI(e){const t=e.options||(e.options={});t.plugins=Wt(t.plugins,{}),t.scales=n4(e,t)}function wI(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function s4(e){return e=e||{},e.data=wI(e.data),bI(e),e}const ab=new Map,TI=new Set;function Rc(e,t){let n=ab.get(e);return n||(n=t(),ab.set(e,n),TI.add(n)),n}const _a=(e,t,n)=>{const s=$u(t,n);s!==void 0&&e.add(s)};class i4{constructor(t){this._config=s4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=wI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),bI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Rc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Rc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Rc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Rc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(f=>_a(l,t,f))),u.forEach(f=>_a(l,i,f)),u.forEach(f=>_a(l,Sr[r]||{},f)),u.forEach(f=>_a(l,ye,f)),u.forEach(f=>_a(l,Fd,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),TI.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Sr[n]||{},ye.datasets[n]||{},{type:n},ye,Fd]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=lb(this._resolverCache,t,i);let l=o;if(o4(o,n)){r.$shared=!1,s=Bi(s)?s():s;const c=this.createResolver(t,s,a);l=Do(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=lb(this._resolverCache,t,s);return Gt(n)?Do(r,n,void 0,i):r}}function lb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:Ag(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const r4=e=>Gt(e)&&Object.getOwnPropertyNames(e).some(t=>Bi(e[t]));function o4(e,t){const{isScriptable:n,isIndexable:s}=rI(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(Bi(a)||r4(a))||o&&Pe(a))return!0}return!1}var a4="4.5.0";const l4=["top","bottom","left","right","chartArea"];function cb(e,t){return e==="top"||e==="bottom"||l4.indexOf(e)===-1&&t==="x"}function ub(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function hb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),he(n&&n.onComplete,[e],t)}function c4(e){const t=e.chart,n=t.options.animation;he(n&&n.onProgress,[e],t)}function EI(e){return Pg()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const eu={},fb=e=>{const t=EI(e);return Object.values(eu).filter(n=>n.canvas===t).pop()};function u4(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function h4(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var ui;let Fh=(ui=class{static register(...t){ss.add(...t),db()}static unregister(...t){ss.remove(...t),db()}constructor(t,n){const s=this.config=new i4(n),i=EI(t),r=fb(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||PF(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=pV(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=NV(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],eu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ds.listen(this,"complete",hb),Ds.listen(this,"progress",c4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return ae(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$y(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ny(this.canvas,this.ctx),this}stop(){return Ds.stop(this),this}resize(t,n){Ds.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$y(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),he(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Zt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=jd(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Zt(r,o=>{const a=o.options,l=a.id,c=jd(l,a),u=Wt(a.type,o.dtype);(a.position===void 0||cb(a.position,c)!==cb(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in s&&s[l].type===u)f=s[l];else{const d=ss.getScale(u);f=new d({id:l,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,t)}),Zt(i,(o,a)=>{o||delete s[a]}),Zt(s,o=>{Dn.configure(this,o,o.options),Dn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(ub("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Hd(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=ss.getController(a),{datasetElementType:c,dataElementType:u}=ye.datasets[a];Object.assign(l,{dataElementType:ss.getElement(u),datasetElementType:c&&ss.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Zt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),d=!i&&r.indexOf(f)===-1;f.buildOrUpdateElements(d),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Zt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ub("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Zt(this.scales,t=>{Dn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Sy(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;u4(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!Sy(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Dn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Zt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Bi(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ds.has(this)?this.attached&&!Ds.running(this)&&Ds.start(this):(this.draw(),hb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=H$(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Ig(n,i),t.controller.draw(),i&&Sg(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Sl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=lF.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Or(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Fu(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ds.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ny(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete eu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Zt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Zt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Zt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Lu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=bV(t),c=h4(t,this._lastEvent,s,l);s&&(this._lastEvent=null,he(r.onHover,[t,a,this],this),l&&he(r.onClick,[t,a,this],this));const u=!Lu(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},Lt(ui,"defaults",ye),Lt(ui,"instances",eu),Lt(ui,"overrides",Sr),Lt(ui,"registry",ss),Lt(ui,"version",a4),Lt(ui,"getChart",fb),ui);function db(){return Zt(Fh.instances,e=>e._plugins.invalidate())}function II(e,t,n=t){e.lineCap=Wt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Wt(n.borderDash,t.borderDash)),e.lineDashOffset=Wt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Wt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Wt(n.borderWidth,t.borderWidth),e.strokeStyle=Wt(n.borderColor,t.borderColor)}function f4(e,t,n){e.lineTo(n.x,n.y)}function d4(e){return e.stepped?GV:e.tension||e.cubicInterpolationMode==="monotone"?XV:f4}function SI(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function p4(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=SI(i,n,s),u=d4(r);let{move:f=!0,reverse:d}=s||{},p,m,_;for(p=0;p<=c;++p)m=i[(a+(d?c-p:p))%o],!m.skip&&(f?(e.moveTo(m.x,m.y),f=!1):u(e,_,m,d,r.stepped),_=m);return l&&(m=i[(a+(d?c:0))%o],u(e,_,m,d,r.stepped)),!!l}function g4(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=SI(i,n,s),{move:l=!0,reverse:c}=s||{};let u=0,f=0,d,p,m,_,y,T;const R=k=>(o+(c?a-k:k))%r,D=()=>{_!==y&&(e.lineTo(u,y),e.lineTo(u,_),e.lineTo(u,T))};for(l&&(p=i[R(0)],e.moveTo(p.x,p.y)),d=0;d<=a;++d){if(p=i[R(d)],p.skip)continue;const k=p.x,O=p.y,L=k|0;L===m?(O<_?_=O:O>y&&(y=O),u=(f*u+k)/++f):(D(),e.lineTo(k,O),m=L,f=0,_=y=O),T=O}D()}function zd(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?g4:p4}function m4(e){return e.stepped?P$:e.tension||e.cubicInterpolationMode==="monotone"?k$:ar}function v4(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),II(e,t.options),e.stroke(i)}function _4(e,t,n,s){const{segments:i,options:r}=t,o=zd(t);for(const a of i)II(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const y4=typeof Path2D=="function";function b4(e,t,n,s){y4&&!t.options.segment?v4(e,t,n,s):_4(e,t,n,s)}class Da extends Nr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;w$(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$$(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=N$(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=m4(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:d}=o[c],p=r[f],m=r[d];if(p===m){a.push(p);continue}const _=Math.abs((i-p[n])/(m[n]-p[n])),y=l(p,m,_,s.stepped);y[n]=t[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(t,n,s){return zd(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=zd(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),b4(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Lt(Da,"id","line"),Lt(Da,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Lt(Da,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Lt(Da,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function pb(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class nu extends Nr{constructor(n){super();Lt(this,"parsed");Lt(this,"skip");Lt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return pb(this,n,"x",s)}inYRange(n,s){return pb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!Sl(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Bd(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Lt(nu,"id","point"),Lt(nu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Lt(nu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const gb=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},w4=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class mb extends Nr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=he(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Qe(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=gb(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=t;r.textAlign="left",r.textBaseline="middle";let d=-1,p=-u;return this.legendItems.forEach((m,_)=>{const y=s+n/2+r.measureText(m.text).width;(_===0||c[c.length-1]+y+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,p+=u,d++),l[_]={left:0,top:p,row:d,width:y,height:i},c[c.length-1]+=y+a}),f}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,d=0,p=0,m=0,_=0;return this.legendItems.forEach((y,T)=>{const{itemWidth:R,itemHeight:D}=T4(s,n,r,y,i);T>0&&p+D+2*a>u&&(f+=d+a,c.push({width:d,height:p}),m+=d+a,_++,d=p=0),l[T]={left:m,top:p,col:_,width:R,height:D},d=Math.max(d,R),p+=D+a}),f+=d,c.push({width:d,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=mo(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ye(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ye(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ye(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ye(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ig(t,this),this._draw(),Sg(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=ye.color,l=mo(t.rtl,this.left,this.width),c=Qe(o.font),{padding:u}=o,f=c.size,d=f/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:_,itemHeight:y}=gb(o,f),T=function(L,E,b){if(isNaN(m)||m<=0||isNaN(_)||_<0)return;i.save();const w=Wt(b.lineWidth,1);if(i.fillStyle=Wt(b.fillStyle,a),i.lineCap=Wt(b.lineCap,"butt"),i.lineDashOffset=Wt(b.lineDashOffset,0),i.lineJoin=Wt(b.lineJoin,"miter"),i.lineWidth=w,i.strokeStyle=Wt(b.strokeStyle,a),i.setLineDash(Wt(b.lineDash,[])),o.usePointStyle){const A={radius:_*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:w},x=l.xPlus(L,m/2),C=E+d;sI(i,A,x,C,o.pointStyleWidth&&m)}else{const A=E+Math.max((f-_)/2,0),x=l.leftForLtr(L,m),C=Qa(b.borderRadius);i.beginPath(),Object.values(C).some(S=>S!==0)?Ud(i,{x,y:A,w:m,h:_,radius:C}):i.rect(x,A,m,_),i.fill(),w!==0&&i.stroke()}i.restore()},R=function(L,E,b){Al(i,b.text,L,E+y/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},D=this.isHorizontal(),k=this._computeTitleHeight();D?p={x:Ye(r,this.left+u,this.right-s[0]),y:this.top+u+k,line:0}:p={x:this.left+u,y:Ye(r,this.top+k+u,this.bottom-n[0].height),line:0},uI(this.ctx,t.textDirection);const O=y+u;this.legendItems.forEach((L,E)=>{i.strokeStyle=L.fontColor,i.fillStyle=L.fontColor;const b=i.measureText(L.text).width,w=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),A=m+d+b;let x=p.x,C=p.y;l.setWidth(this.width),D?E>0&&x+A+u>this.right&&(C=p.y+=O,p.line++,x=p.x=Ye(r,this.left+u,this.right-s[p.line])):E>0&&C+O>this.bottom&&(x=p.x=x+n[p.line].width+u,p.line++,C=p.y=Ye(r,this.top+k+u,this.bottom-n[p.line].height));const S=l.x(x);if(T(S,C,L),x=LV(w,x+m+d,D?x+A:this.right,t.rtl),R(l.x(x),C,L),D)p.x+=A+u;else if(typeof L.text!="string"){const dt=c.lineHeight;p.y+=AI(L,dt)+u}else p.y+=O}),hI(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Qe(n.font),i=Fn(n.padding);if(!n.display)return;const r=mo(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,f=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,f=Ye(t.align,f,this.right-d);else{const m=this.columnSizes.reduce((_,y)=>Math.max(_,y.height),0);u=c+Ye(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=Ye(a,f,f+d);o.textAlign=r.textAlign(Tg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Al(o,n.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,n=Qe(t.font),s=Fn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Pa(t,this.left,this.right)&&Pa(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Pa(t,i.left,i.left+i.width)&&Pa(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!S4(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=w4(i,s);i&&!r&&he(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&he(n.onHover,[t,s,this],this)}else s&&he(n.onClick,[t,s,this],this)}}function T4(e,t,n,s,i){const r=E4(s,e,t,n),o=I4(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function E4(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function I4(e,t,n){let s=e;return typeof t.text!="string"&&(s=AI(t,n)),s}function AI(e,t){const n=e.text?e.text.length:0;return t*n}function S4(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var A4={id:"legend",_element:mb,start(e,t,n){const s=e.legend=new mb({ctx:e.ctx,options:n,chart:e});Dn.configure(e,s,n),Dn.addBox(e,s)},stop(e){Dn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Dn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Fn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class CI extends Nr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Pe(s.text)?s.text.length:1;this._padding=Fn(s.padding);const r=i*Qe(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=Ye(a,s,r),f=n+t,c=r-s):(o.position==="left"?(u=s+t,f=Ye(a,i,n),l=Re*-.5):(u=r-t,f=Ye(a,n,i),l=Re*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Qe(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Al(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Tg(n.align),textBaseline:"middle",translation:[o,a]})}}function C4(e,t){const n=new CI({ctx:e.ctx,options:t,chart:e});Dn.configure(e,n,t),Dn.addBox(e,n),e.titleBlock=n}var x4={id:"title",_element:CI,start(e,t,n){C4(e,n)},stop(e){const t=e.titleBlock;Dn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Dn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ra={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=$d(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function es(e,t){return t&&(Pe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Rs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function P4(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function vb(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Qe(t.bodyFont),c=Qe(t.titleFont),u=Qe(t.footerFont),f=r.length,d=i.length,p=s.length,m=Fn(t.padding);let _=m.height,y=0,T=s.reduce((k,O)=>k+O.before.length+O.lines.length+O.after.length,0);if(T+=e.beforeBody.length+e.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),T){const k=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=p*k+(T-p)*l.lineHeight+(T-1)*t.bodySpacing}d&&(_+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let R=0;const D=function(k){y=Math.max(y,n.measureText(k).width+R)};return n.save(),n.font=c.string,Zt(e.title,D),n.font=l.string,Zt(e.beforeBody.concat(e.afterBody),D),R=t.displayColors?o+2+t.boxPadding:0,Zt(s,k=>{Zt(k.before,D),Zt(k.lines,D),Zt(k.after,D)}),R=0,n.font=u.string,Zt(e.footer,D),n.restore(),y+=m.width,{width:y,height:_}}function k4(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function D4(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function R4(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),D4(c,e,t,n)&&(c="center"),c}function _b(e,t,n){const s=n.yAlign||t.yAlign||k4(e,n);return{xAlign:n.xAlign||t.xAlign||R4(e,t,n,s),yAlign:s}}function M4(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function O4(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function yb(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:f,bottomLeft:d,bottomRight:p}=Qa(o);let m=M4(t,a);const _=O4(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,d)+i:a==="right"&&(m+=Math.max(f,p)+i),{x:kn(m,0,s.width-t.width),y:kn(_,0,s.height-t.height)}}function Mc(e,t,n){const s=Fn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function bb(e){return es([],Rs(e))}function N4(e,t,n){return Or(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function wb(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const xI={beforeTitle:ks,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ks,beforeBody:ks,beforeLabel:ks,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ae(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ks,afterBody:ks,beforeFooter:ks,footer:ks,afterFooter:ks};function hn(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?xI[t].call(n,s):i}class Wd extends Nr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new dI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=N4(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=hn(s,"beforeTitle",this,t),r=hn(s,"title",this,t),o=hn(s,"afterTitle",this,t);let a=[];return a=es(a,Rs(i)),a=es(a,Rs(r)),a=es(a,Rs(o)),a}getBeforeBody(t,n){return bb(hn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return Zt(t,r=>{const o={before:[],lines:[],after:[]},a=wb(s,r);es(o.before,Rs(hn(a,"beforeLabel",this,r))),es(o.lines,hn(a,"label",this,r)),es(o.after,Rs(hn(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return bb(hn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=hn(s,"beforeFooter",this,t),r=hn(s,"footer",this,t),o=hn(s,"afterFooter",this,t);let a=[];return a=es(a,Rs(i)),a=es(a,Rs(r)),a=es(a,Rs(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(P4(this.chart,n[l]));return t.filter&&(a=a.filter((u,f,d)=>t.filter(u,f,d,s))),t.itemSort&&(a=a.sort((u,f)=>t.itemSort(u,f,s))),Zt(a,u=>{const f=wb(t.callbacks,u);i.push(hn(f,"labelColor",this,u)),r.push(hn(f,"labelPointStyle",this,u)),o.push(hn(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ra[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=vb(this,s),c=Object.assign({},a,l),u=_b(this.chart,s,c),f=yb(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=Qa(a),{x:d,y:p}=t,{width:m,height:_}=n;let y,T,R,D,k,O;return r==="center"?(k=p+_/2,i==="left"?(y=d,T=y-o,D=k+o,O=k-o):(y=d+m,T=y+o,D=k-o,O=k+o),R=y):(i==="left"?T=d+Math.max(l,u)+o:i==="right"?T=d+m-Math.max(c,f)-o:T=this.caretX,r==="top"?(D=p,k=D-o,y=T-o,R=T+o):(D=p+_,k=D+o,y=T+o,R=T-o),O=D),{x1:y,x2:T,x3:R,y1:D,y2:k,y3:O}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=mo(s.rtl,this.x,this.width);for(t.x=Mc(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Qe(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Qe(r.bodyFont),f=Mc(this,"left",r),d=i.x(f),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(r.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=i.leftForLtr(d,c)+c/2,T=m+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Bd(t,_,y,T),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Bd(t,_,y,T)}else{t.lineWidth=Gt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(d,c),y=i.leftForLtr(i.xPlus(d,1),c-2),T=Qa(o.borderRadius);Object.values(T).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ud(t,{x:_,y:m,w:c,h:l,radius:T}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ud(t,{x:y,y:m+1,w:c-2,h:l-2,radius:T}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(_,m,c,l),t.strokeRect(_,m,c,l),t.fillStyle=o.backgroundColor,t.fillRect(y,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,f=Qe(s.bodyFont);let d=f.lineHeight,p=0;const m=mo(s.rtl,this.x,this.width),_=function(b){n.fillText(b,m.x(t.x+p),t.y+d/2),t.y+=d+r},y=m.textAlign(o);let T,R,D,k,O,L,E;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,t.x=Mc(this,y,s),n.fillStyle=s.bodyColor,Zt(this.beforeBody,_),p=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,k=0,L=i.length;k<L;++k){for(T=i[k],R=this.labelTextColors[k],n.fillStyle=R,Zt(T.before,_),D=T.lines,a&&D.length&&(this._drawColorBox(n,t,k,m,s),d=Math.max(f.lineHeight,l)),O=0,E=D.length;O<E;++O)_(D[O]),d=f.lineHeight;Zt(T.after,_)}p=0,d=f.lineHeight,Zt(this.afterBody,_),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=mo(s.rtl,this.x,this.width);for(t.x=Mc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Qe(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:m}=Qa(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ra[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=vb(this,t),l=Object.assign({},o,this._size),c=_b(n,t,l),u=yb(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Fn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),uI(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),hI(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Lu(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!Lu(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Ra[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}Lt(Wd,"positioners",Ra);var L4={id:"tooltip",_element:Wd,positioners:Ra,afterInit(e,t,n){n&&(e.tooltip=new Wd({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const V4=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function $4(e,t,n,s){const i=e.indexOf(t);if(i===-1)return V4(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const F4=(e,t)=>e===null?null:kn(Math.round(e),0,t);function Tb(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Yd extends qo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ae(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:$4(s,t,Wt(n,t),this._addedLabels),F4(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return Tb.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Lt(Yd,"id","category"),Lt(Yd,"defaults",{ticks:{callback:Tb}});function B4(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:d}=e,p=r||1,m=u-1,{min:_,max:y}=t,T=!ae(o),R=!ae(a),D=!ae(c),k=(y-_)/(f+1);let O=Cy((y-_)/m/p)*p,L,E,b,w;if(O<1e-14&&!T&&!R)return[{value:_},{value:y}];w=Math.ceil(y/O)-Math.floor(_/O),w>m&&(O=Cy(w*O/m/p)*p),ae(l)||(L=Math.pow(10,l),O=Math.ceil(O*L)/L),i==="ticks"?(E=Math.floor(_/O)*O,b=Math.ceil(y/O)*O):(E=_,b=y),T&&R&&r&&SV((a-o)/r,O/1e3)?(w=Math.round(Math.min((a-o)/O,u)),O=(a-o)/w,E=o,b=a):D?(E=T?o:E,b=R?a:b,w=c-1,O=(b-E)/w):(w=(b-E)/O,Ka(w,Math.round(w),O/1e3)?w=Math.round(w):w=Math.ceil(w));const A=Math.max(xy(O),xy(E));L=Math.pow(10,ae(l)?A:l),E=Math.round(E*L)/L,b=Math.round(b*L)/L;let x=0;for(T&&(d&&E!==o?(n.push({value:o}),E<o&&x++,Ka(Math.round((E+x*O)*L)/L,o,Eb(o,k,e))&&x++):E<o&&x++);x<w;++x){const C=Math.round((E+x*O)*L)/L;if(R&&C>a)break;n.push({value:C})}return R&&d&&b!==a?n.length&&Ka(n[n.length-1].value,a,Eb(a,k,e))?n[n.length-1].value=a:n.push({value:a}):(!R||b===a)&&n.push({value:b}),n}function Eb(e,t,{horizontal:n,minRotation:s}){const i=hr(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class U4 extends qo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(t){const l=ko(i),c=ko(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=B4(i,r);return t.bounds==="ticks"&&AV(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return eI(t,this.chart.options.locale,this.options.ticks.format)}}class qd extends U4{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=$n(t)?t:0,this.max=$n(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=hr(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Lt(qd,"id","linear"),Lt(qd,"defaults",{ticks:{callback:nI.formatters.numeric}});const Bh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pn=Object.keys(Bh);function Ib(e,t){return e-t}function Sb(e,t){if(ae(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),$n(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Il(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Ab(e,t,n,s){const i=pn.length;for(let r=pn.indexOf(e);r<i-1;++r){const o=Bh[pn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return pn[r]}return pn[i-1]}function H4(e,t,n,s,i){for(let r=pn.length-1;r>=pn.indexOf(n);r--){const o=pn[r];if(Bh[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return pn[n?pn.indexOf(n):0]}function j4(e){for(let t=pn.indexOf(e)+1,n=pn.length;t<n;++t)if(Bh[pn[t]].common)return pn[t]}function Cb(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=wg(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function z4(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function xb(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:z4(e,s,i,n)}class ju extends qo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new sF._date(t.adapters.date);i.init(n),qa(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Sb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=$n(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=$n(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=RV(i,r,o);return this._unit=n.unit||(s.autoSkip?Ab(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):H4(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:j4(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),xb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=kn(n,0,o),s=kn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Ab(r.minUnit,n,s,this._getLabelCapacity(n)),a=Wt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Il(l)||l===!0,u={};let f=n,d,p;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(d=f,p=0;d<s;d=+t.add(d,a,o),p++)Cb(u,d,m);return(d===s||i.bounds==="ticks"||p===1)&&Cb(u,d,m),Object.keys(u).sort(Ib).map(_=>+_)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return he(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],d=s[n],p=c&&f&&d&&d.major;return this._adapter.format(t,i||(p?f:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=hr(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,xb(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Sb(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return OV(t.sort(Ib))}}Lt(ju,"id","time"),Lt(ju,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Oc(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=fr(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=fr(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Pb extends ju{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Oc(n,this.min),this._tableRange=Oc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Oc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Oc(this._table,s*this._tableRange+this._minPos,!0)}}Lt(Pb,"id","timeseries"),Lt(Pb,"defaults",ju.defaults);const PI={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},W4={ariaLabel:{type:String},ariaDescribedby:{type:String}},Y4={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...PI,...W4},q4=oT[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function Kr(e){return Rl(e)?jt(e):e}function K4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Rl(t)?new Proxy(e,{}):e}function G4(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function kI(e,t){e.labels=t}function DI(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function X4(e,t){const n={labels:[],datasets:[]};return kI(n,e.labels),DI(n,e.datasets,t),n}const Q4=en({props:Y4,setup(e,t){let{expose:n,slots:s}=t;const i=$t(null),r=mp(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:f,plugins:d,datasetIdKey:p}=e,m=X4(u,p),_=K4(m,u);r.value=new Fh(i.value,{type:c,data:_,options:{...f},plugins:d})},a=()=>{const c=jt(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return bs(o),Fo(a),ln([()=>e.options,()=>e.data],(c,u)=>{let[f,d]=c,[p,m]=u;const _=jt(r.value);if(!_)return;let y=!1;if(f){const T=Kr(f),R=Kr(p);T&&T!==R&&(G4(_,T),y=!0)}if(d){const T=Kr(d.labels),R=Kr(m.labels),D=Kr(d.datasets),k=Kr(m.datasets);T!==R&&(kI(_.config.data,T),y=!0),D&&D!==k&&(DI(_.config.data,D,e.datasetIdKey),y=!0)}y&&_o(()=>{l(_)})},{deep:!0}),()=>yo("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[yo("p",{},[s.default?s.default():""])])}});function J4(e,t){return Fh.register(t),en({props:PI,setup(n,s){let{expose:i}=s;const r=mp(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>yo(Q4,q4({ref:o},{type:e,...n}))}})}const Z4=J4("line",Zc),t3={class:"statistics-container"},e3={class:"toggle-segment"},n3={class:"stats-chart"},s3={__name:"Statistics",setup(e){Fh.register(Da,nu,qd,x4,Yd,L4,A4);const t=$t("week"),n=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function i(){const c={};for(let u=0;u<localStorage.length;u++){const f=localStorage.key(u);if(f&&f.startsWith("groups_")){const d=f.replace("groups_",""),[p,m,_]=d.split("-").map(Number),T=JSON.parse(localStorage.getItem(f)||"[]").reduce((R,D)=>R+D.count,0);c[d]={year:p,month:m,day:_,count:T}}}return c}const r=$t({});bs(()=>{r.value=i()});const o=G(()=>{const c=new Date;if(t.value==="week"){const u=[],f=[];for(let d=6;d>=0;d--){const p=new Date(c);p.setDate(c.getDate()-d);const m=n[p.getDay()===0?6:p.getDay()-1];u.push(m);const _=`${p.getFullYear()}-${p.getMonth()+1}-${p.getDate()}`,y=r.value[_];f.push(y?y.count:0)}return{labels:u,datasets:[{label:"Clicks",data:f,fill:!1,borderColor:"#fff",backgroundColor:"#fff",tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:"#42b883",pointHoverRadius:7}]}}else{const u=c.getFullYear(),f=Array(12).fill(0);return Object.values(r.value).forEach(d=>{d.year===u&&(f[d.month-1]+=d.count)}),{labels:s,datasets:[{label:"Clicks",data:f,fill:!1,borderColor:"#fff",backgroundColor:"#fff",tension:.4,pointRadius:5,pointBackgroundColor:"#fff",pointBorderColor:"#42b883",pointHoverRadius:7}]}}}),a={responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:"#e0e0e0",font:{size:14}}},y:{grid:{color:"#e0e0e0"},ticks:{color:"#e0e0e0",font:{size:14}}}}},l=Z4;return(c,u)=>(lt(),gt("div",t3,[X("button",{class:"back-btn",onClick:u[0]||(u[0]=f=>c.$router.push("/")),"aria-label":"Back"},u[3]||(u[3]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",e3,[X("button",{class:ie(["toggle-btn",{active:t.value==="week"}]),onClick:u[1]||(u[1]=f=>t.value="week")}," Week ",2),X("button",{class:ie(["toggle-btn",{active:t.value==="month"}]),onClick:u[2]||(u[2]=f=>t.value="month")}," Month ",2)]),X("div",n3,[xt(ft(l),{data:o.value,options:a},null,8,["data"])])]))}},i3=Hi(s3,[["__scopeId","data-v-28cf7a17"]]),r3={key:0,class:"auth-error"},o3={__name:"Auth",setup(e){const t=["#2F5249","#1976D2","#D32F2F","#7B1FA2","#F57C00","#388E3C","#455A64","#212121"],n=$t(localStorage.getItem("color-primary")&&t.includes(localStorage.getItem("color-primary"))?localStorage.getItem("color-primary"):t[0]);function s(m){let _=m.replace("#","");_.length===3&&(_=_.split("").map(T=>T+T).join(""));const y=parseInt(_,16);return[y>>16,y>>8&255,y&255]}function i([m,_,y]){return"#"+[m,_,y].map(T=>T.toString(16).padStart(2,"0")).join("")}function r(m,_){const[y,T,R]=s(m),D=_<0?0:255,k=Math.abs(_);return i([Math.round((D-y)*k+y),Math.round((D-T)*k+T),Math.round((D-R)*k+R)])}const o=G(()=>{const m=n.value,_=r(m,.5),y=r(m,-.3);return`linear-gradient(135deg, ${_} 0%, ${m} 50%, ${y} 100%)`}),a=$t(""),l=$t(""),c=$t(""),u=Ap(),f=async()=>{c.value="";try{await zR(Ir,a.value,l.value),u.push("/")}catch(m){c.value=m.message}},d=async()=>{c.value="";try{await jR(Ir,a.value,l.value),u.push("/")}catch(m){c.value=m.message}},p=()=>{f()};return(m,_)=>(lt(),gt("div",{class:"auth-container",style:Je({background:o.value})},[_[2]||(_[2]=X("h2",null,"Sign In / Register",-1)),X("form",{onSubmit:Ip(p,["prevent"])},[du(X("input",{"onUpdate:modelValue":_[0]||(_[0]=y=>a.value=y),type:"email",placeholder:"Email",required:""},null,512),[[Av,a.value]]),du(X("input",{"onUpdate:modelValue":_[1]||(_[1]=y=>l.value=y),type:"password",placeholder:"Password",required:""},null,512),[[Av,l.value]]),X("div",{class:"auth-actions"},[X("button",{type:"button",onClick:f},"Login"),X("button",{type:"button",onClick:d},"Register")]),c.value?(lt(),gt("div",r3,Ze(c.value),1)):Be("",!0)],32)],4))}},a3=Hi(o3,[["__scopeId","data-v-0ddc495f"]]),l3={class:"palette-section"},c3={class:"palette-scroll-mask"},u3={class:"palette-options"},h3=["onClick"],f3={class:"palette-section"},d3={class:"palette-scroll-mask"},p3={class:"palette-options"},g3=["onClick"],m3={__name:"Settings",setup(e){const t=["#ffffff","#2F5249","#1976D2","#D32F2F","#7B1FA2","#F57C00","#388E3C","#455A64","#212121"],n=["#ffffff","#E3DE61","#64B5F6","#F44336","#BA68C8","#FFB74D","#81C784","#90A4AE","#FFF176"],s=$t(t[0]),i=$t(n[0]);function r(d){s.value=d,a()}function o(d){i.value=d,a()}function a(){document.documentElement.style.setProperty("--primary",s.value),document.documentElement.style.setProperty("--accent",i.value),localStorage.setItem("color-primary",s.value),localStorage.setItem("color-accent",i.value)}bs(()=>{const d=localStorage.getItem("color-primary"),p=localStorage.getItem("color-accent");d&&t.includes(d)&&(s.value=d),p&&n.includes(p)&&(i.value=p),a()});function l(d){let p=d.replace("#","");p.length===3&&(p=p.split("").map(_=>_+_).join(""));const m=parseInt(p,16);return[m>>16,m>>8&255,m&255]}function c([d,p,m]){return"#"+[d,p,m].map(_=>_.toString(16).padStart(2,"0")).join("")}function u(d,p){const[m,_,y]=l(d),T=p<0?0:255,R=Math.abs(p);return c([Math.round((T-m)*R+m),Math.round((T-_)*R+_),Math.round((T-y)*R+y)])}const f=G(()=>{const d=s.value,p=u(d,.5),m=u(d,-.3);return`linear-gradient(135deg, ${p} 0%, ${d} 50%, ${m} 100%)`});return(d,p)=>(lt(),gt("div",{class:"settings-container",style:Je({background:f.value})},[X("button",{class:"back-btn",onClick:p[0]||(p[0]=m=>d.$router.push("/")),"aria-label":"Back"},p[1]||(p[1]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),p[4]||(p[4]=X("h2",null," ",-1)),X("div",l3,[p[2]||(p[2]=X("div",{class:"palette-label"}," :",-1)),X("div",c3,[X("div",u3,[(lt(),gt(ee,null,gn(t,m=>X("button",{key:m,style:Je({background:m}),class:ie({selected:m===s.value}),onClick:_=>r(m)},null,14,h3)),64))])])]),X("div",f3,[p[3]||(p[3]=X("div",{class:"palette-label"},":",-1)),X("div",d3,[X("div",p3,[(lt(),gt(ee,null,gn(n,m=>X("button",{key:m,style:Je({background:m}),class:ie({selected:m===i.value}),onClick:_=>o(m)},null,14,g3)),64))])])])],4))}},v3=Hi(m3,[["__scopeId","data-v-ec1c089e"]]);var vn="top",Bn="bottom",Un="right",_n="left",Rg="auto",ql=[vn,Bn,Un,_n],Mo="start",xl="end",_3="clippingParents",RI="viewport",ya="popper",y3="reference",kb=ql.reduce(function(e,t){return e.concat([t+"-"+Mo,t+"-"+xl])},[]),MI=[].concat(ql,[Rg]).reduce(function(e,t){return e.concat([t,t+"-"+Mo,t+"-"+xl])},[]),b3="beforeRead",w3="read",T3="afterRead",E3="beforeMain",I3="main",S3="afterMain",A3="beforeWrite",C3="write",x3="afterWrite",P3=[b3,w3,T3,E3,I3,S3,A3,C3,x3];function _s(e){return e?(e.nodeName||"").toLowerCase():null}function En(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ar(e){var t=En(e).Element;return e instanceof t||e instanceof Element}function On(e){var t=En(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Mg(e){if(typeof ShadowRoot>"u")return!1;var t=En(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function k3(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},i=t.attributes[n]||{},r=t.elements[n];!On(r)||!_s(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function D3(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var i=t.elements[s],r=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!On(i)||!_s(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}const R3={name:"applyStyles",enabled:!0,phase:"write",fn:k3,effect:D3,requires:["computeStyles"]};function ps(e){return e.split("-")[0]}var vr=Math.max,zu=Math.min,Oo=Math.round;function Kd(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function OI(){return!/^((?!chrome|android).)*safari/i.test(Kd())}function No(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),i=1,r=1;t&&On(e)&&(i=e.offsetWidth>0&&Oo(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&Oo(s.height)/e.offsetHeight||1);var o=Ar(e)?En(e):window,a=o.visualViewport,l=!OI()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/i,u=(s.top+(l&&a?a.offsetTop:0))/r,f=s.width/i,d=s.height/r;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c,x:c,y:u}}function Og(e){var t=No(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function NI(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Mg(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Gs(e){return En(e).getComputedStyle(e)}function M3(e){return["table","td","th"].indexOf(_s(e))>=0}function Wi(e){return((Ar(e)?e.ownerDocument:e.document)||window.document).documentElement}function Uh(e){return _s(e)==="html"?e:e.assignedSlot||e.parentNode||(Mg(e)?e.host:null)||Wi(e)}function Db(e){return!On(e)||Gs(e).position==="fixed"?null:e.offsetParent}function O3(e){var t=/firefox/i.test(Kd()),n=/Trident/i.test(Kd());if(n&&On(e)){var s=Gs(e);if(s.position==="fixed")return null}var i=Uh(e);for(Mg(i)&&(i=i.host);On(i)&&["html","body"].indexOf(_s(i))<0;){var r=Gs(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function Kl(e){for(var t=En(e),n=Db(e);n&&M3(n)&&Gs(n).position==="static";)n=Db(n);return n&&(_s(n)==="html"||_s(n)==="body"&&Gs(n).position==="static")?t:n||O3(e)||t}function Ng(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Za(e,t,n){return vr(e,zu(t,n))}function N3(e,t,n){var s=Za(e,t,n);return s>n?n:s}function LI(){return{top:0,right:0,bottom:0,left:0}}function VI(e){return Object.assign({},LI(),e)}function $I(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var L3=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,VI(typeof t!="number"?t:$I(t,ql))};function V3(e){var t,n=e.state,s=e.name,i=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ps(n.placement),l=Ng(a),c=[_n,Un].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var f=L3(i.padding,n),d=Og(r),p=l==="y"?vn:_n,m=l==="y"?Bn:Un,_=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],T=Kl(r),R=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,D=_/2-y/2,k=f[p],O=R-d[u]-f[m],L=R/2-d[u]/2+D,E=Za(k,L,O),b=l;n.modifiersData[s]=(t={},t[b]=E,t.centerOffset=E-L,t)}}function $3(e){var t=e.state,n=e.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||NI(t.elements.popper,i)&&(t.elements.arrow=i))}const F3={name:"arrow",enabled:!0,phase:"main",fn:V3,effect:$3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Lo(e){return e.split("-")[1]}var B3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function U3(e,t){var n=e.x,s=e.y,i=t.devicePixelRatio||1;return{x:Oo(n*i)/i||0,y:Oo(s*i)/i||0}}function Rb(e){var t,n=e.popper,s=e.popperRect,i=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,d=o.x,p=d===void 0?0:d,m=o.y,_=m===void 0?0:m,y=typeof u=="function"?u({x:p,y:_}):{x:p,y:_};p=y.x,_=y.y;var T=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),D=_n,k=vn,O=window;if(c){var L=Kl(n),E="clientHeight",b="clientWidth";if(L===En(n)&&(L=Wi(n),Gs(L).position!=="static"&&a==="absolute"&&(E="scrollHeight",b="scrollWidth")),L=L,i===vn||(i===_n||i===Un)&&r===xl){k=Bn;var w=f&&L===O&&O.visualViewport?O.visualViewport.height:L[E];_-=w-s.height,_*=l?1:-1}if(i===_n||(i===vn||i===Bn)&&r===xl){D=Un;var A=f&&L===O&&O.visualViewport?O.visualViewport.width:L[b];p-=A-s.width,p*=l?1:-1}}var x=Object.assign({position:a},c&&B3),C=u===!0?U3({x:p,y:_},En(n)):{x:p,y:_};if(p=C.x,_=C.y,l){var S;return Object.assign({},x,(S={},S[k]=R?"0":"",S[D]=T?"0":"",S.transform=(O.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",S))}return Object.assign({},x,(t={},t[k]=R?_+"px":"",t[D]=T?p+"px":"",t.transform="",t))}function H3(e){var t=e.state,n=e.options,s=n.gpuAcceleration,i=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ps(t.placement),variation:Lo(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Rb(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Rb(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const j3={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:H3,data:{}};var Nc={passive:!0};function z3(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,l=En(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,Nc)}),a&&l.addEventListener("resize",n.update,Nc),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Nc)}),a&&l.removeEventListener("resize",n.update,Nc)}}const W3={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:z3,data:{}};var Y3={left:"right",right:"left",bottom:"top",top:"bottom"};function su(e){return e.replace(/left|right|bottom|top/g,function(t){return Y3[t]})}var q3={start:"end",end:"start"};function Mb(e){return e.replace(/start|end/g,function(t){return q3[t]})}function Lg(e){var t=En(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Vg(e){return No(Wi(e)).left+Lg(e).scrollLeft}function K3(e,t){var n=En(e),s=Wi(e),i=n.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var c=OI();(c||!c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+Vg(e),y:l}}function G3(e){var t,n=Wi(e),s=Lg(e),i=(t=e.ownerDocument)==null?void 0:t.body,r=vr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=vr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+Vg(e),l=-s.scrollTop;return Gs(i||n).direction==="rtl"&&(a+=vr(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function $g(e){var t=Gs(e),n=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function FI(e){return["html","body","#document"].indexOf(_s(e))>=0?e.ownerDocument.body:On(e)&&$g(e)?e:FI(Uh(e))}function tl(e,t){var n;t===void 0&&(t=[]);var s=FI(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),r=En(s),o=i?[r].concat(r.visualViewport||[],$g(s)?s:[]):s,a=t.concat(o);return i?a:a.concat(tl(Uh(o)))}function Gd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function X3(e,t){var n=No(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Ob(e,t,n){return t===RI?Gd(K3(e,n)):Ar(t)?X3(t,n):Gd(G3(Wi(e)))}function Q3(e){var t=tl(Uh(e)),n=["absolute","fixed"].indexOf(Gs(e).position)>=0,s=n&&On(e)?Kl(e):e;return Ar(s)?t.filter(function(i){return Ar(i)&&NI(i,s)&&_s(i)!=="body"}):[]}function J3(e,t,n,s){var i=t==="clippingParents"?Q3(e):[].concat(t),r=[].concat(i,[n]),o=r[0],a=r.reduce(function(l,c){var u=Ob(e,c,s);return l.top=vr(u.top,l.top),l.right=zu(u.right,l.right),l.bottom=zu(u.bottom,l.bottom),l.left=vr(u.left,l.left),l},Ob(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function BI(e){var t=e.reference,n=e.element,s=e.placement,i=s?ps(s):null,r=s?Lo(s):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(i){case vn:l={x:o,y:t.y-n.height};break;case Bn:l={x:o,y:t.y+t.height};break;case Un:l={x:t.x+t.width,y:a};break;case _n:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=i?Ng(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Mo:l[c]=l[c]-(t[u]/2-n[u]/2);break;case xl:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function Pl(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=s===void 0?e.placement:s,r=n.strategy,o=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?_3:a,c=n.rootBoundary,u=c===void 0?RI:c,f=n.elementContext,d=f===void 0?ya:f,p=n.altBoundary,m=p===void 0?!1:p,_=n.padding,y=_===void 0?0:_,T=VI(typeof y!="number"?y:$I(y,ql)),R=d===ya?y3:ya,D=e.rects.popper,k=e.elements[m?R:d],O=J3(Ar(k)?k:k.contextElement||Wi(e.elements.popper),l,u,o),L=No(e.elements.reference),E=BI({reference:L,element:D,placement:i}),b=Gd(Object.assign({},D,E)),w=d===ya?b:L,A={top:O.top-w.top+T.top,bottom:w.bottom-O.bottom+T.bottom,left:O.left-w.left+T.left,right:w.right-O.right+T.right},x=e.modifiersData.offset;if(d===ya&&x){var C=x[i];Object.keys(A).forEach(function(S){var dt=[Un,Bn].indexOf(S)>=0?1:-1,Q=[vn,Bn].indexOf(S)>=0?"y":"x";A[S]+=C[Q]*dt})}return A}function Z3(e,t){t===void 0&&(t={});var n=t,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?MI:l,u=Lo(s),f=u?a?kb:kb.filter(function(m){return Lo(m)===u}):ql,d=f.filter(function(m){return c.indexOf(m)>=0});d.length===0&&(d=f);var p=d.reduce(function(m,_){return m[_]=Pl(e,{placement:_,boundary:i,rootBoundary:r,padding:o})[ps(_)],m},{});return Object.keys(p).sort(function(m,_){return p[m]-p[_]})}function t5(e){if(ps(e)===Rg)return[];var t=su(e);return[Mb(e),t,Mb(t)]}function e5(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,_=n.allowedAutoPlacements,y=t.options.placement,T=ps(y),R=T===y,D=l||(R||!m?[su(y)]:t5(y)),k=[y].concat(D).reduce(function(Rt,Yt){return Rt.concat(ps(Yt)===Rg?Z3(t,{placement:Yt,boundary:u,rootBoundary:f,padding:c,flipVariations:m,allowedAutoPlacements:_}):Yt)},[]),O=t.rects.reference,L=t.rects.popper,E=new Map,b=!0,w=k[0],A=0;A<k.length;A++){var x=k[A],C=ps(x),S=Lo(x)===Mo,dt=[vn,Bn].indexOf(C)>=0,Q=dt?"width":"height",at=Pl(t,{placement:x,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),ot=dt?S?Un:_n:S?Bn:vn;O[Q]>L[Q]&&(ot=su(ot));var mt=su(ot),Nt=[];if(r&&Nt.push(at[C]<=0),a&&Nt.push(at[ot]<=0,at[mt]<=0),Nt.every(function(Rt){return Rt})){w=x,b=!1;break}E.set(x,Nt)}if(b)for(var z=m?3:1,At=function(Yt){var Ht=k.find(function(F){var st=E.get(F);if(st)return st.slice(0,Yt).every(function(Z){return Z})});if(Ht)return w=Ht,"break"},et=z;et>0;et--){var Pt=At(et);if(Pt==="break")break}t.placement!==w&&(t.modifiersData[s]._skip=!0,t.placement=w,t.reset=!0)}}const n5={name:"flip",enabled:!0,phase:"main",fn:e5,requiresIfExists:["offset"],data:{_skip:!1}};function Nb(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Lb(e){return[vn,Un,Bn,_n].some(function(t){return e[t]>=0})}function s5(e){var t=e.state,n=e.name,s=t.rects.reference,i=t.rects.popper,r=t.modifiersData.preventOverflow,o=Pl(t,{elementContext:"reference"}),a=Pl(t,{altBoundary:!0}),l=Nb(o,s),c=Nb(a,i,r),u=Lb(l),f=Lb(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const i5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:s5};function r5(e,t,n){var s=ps(e),i=[_n,vn].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[_n,Un].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function o5(e){var t=e.state,n=e.options,s=e.name,i=n.offset,r=i===void 0?[0,0]:i,o=MI.reduce(function(u,f){return u[f]=r5(f,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=o}const a5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:o5};function l5(e){var t=e.state,n=e.name;t.modifiersData[n]=BI({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const c5={name:"popperOffsets",enabled:!0,phase:"read",fn:l5,data:{}};function u5(e){return e==="x"?"y":"x"}function h5(e){var t=e.state,n=e.options,s=e.name,i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,m=n.tetherOffset,_=m===void 0?0:m,y=Pl(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),T=ps(t.placement),R=Lo(t.placement),D=!R,k=Ng(T),O=u5(k),L=t.modifiersData.popperOffsets,E=t.rects.reference,b=t.rects.popper,w=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,A=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),x=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(L){if(r){var S,dt=k==="y"?vn:_n,Q=k==="y"?Bn:Un,at=k==="y"?"height":"width",ot=L[k],mt=ot+y[dt],Nt=ot-y[Q],z=p?-b[at]/2:0,At=R===Mo?E[at]:b[at],et=R===Mo?-b[at]:-E[at],Pt=t.elements.arrow,Rt=p&&Pt?Og(Pt):{width:0,height:0},Yt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:LI(),Ht=Yt[dt],F=Yt[Q],st=Za(0,E[at],Rt[at]),Z=D?E[at]/2-z-st-Ht-A.mainAxis:At-st-Ht-A.mainAxis,ct=D?-E[at]/2+z+st+F+A.mainAxis:et+st+F+A.mainAxis,Ot=t.elements.arrow&&Kl(t.elements.arrow),P=Ot?k==="y"?Ot.clientTop||0:Ot.clientLeft||0:0,M=(S=x==null?void 0:x[k])!=null?S:0,N=ot+Z-M-P,B=ot+ct-M,H=Za(p?zu(mt,N):mt,ot,p?vr(Nt,B):Nt);L[k]=H,C[k]=H-ot}if(a){var U,it=k==="x"?vn:_n,J=k==="x"?Bn:Un,K=L[O],W=O==="y"?"height":"width",pt=K+y[it],nt=K-y[J],ht=[vn,_n].indexOf(T)!==-1,yt=(U=x==null?void 0:x[O])!=null?U:0,vt=ht?pt:K-E[W]-b[W]-yt+A.altAxis,It=ht?K+E[W]+b[W]-yt-A.altAxis:nt,Vt=p&&ht?N3(vt,K,It):Za(p?vt:pt,K,p?It:nt);L[O]=Vt,C[O]=Vt-K}t.modifiersData[s]=C}}const f5={name:"preventOverflow",enabled:!0,phase:"main",fn:h5,requiresIfExists:["offset"]};function d5(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function p5(e){return e===En(e)||!On(e)?Lg(e):d5(e)}function g5(e){var t=e.getBoundingClientRect(),n=Oo(t.width)/e.offsetWidth||1,s=Oo(t.height)/e.offsetHeight||1;return n!==1||s!==1}function m5(e,t,n){n===void 0&&(n=!1);var s=On(t),i=On(t)&&g5(t),r=Wi(t),o=No(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((_s(t)!=="body"||$g(r))&&(a=p5(t)),On(t)?(l=No(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Vg(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function v5(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function i(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&i(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||i(r)}),s}function _5(e){var t=v5(e);return P3.reduce(function(n,s){return n.concat(t.filter(function(i){return i.phase===s}))},[])}function y5(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function b5(e){var t=e.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var Vb={placement:"bottom",modifiers:[],strategy:"absolute"};function $b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function w5(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,i=t.defaultOptions,r=i===void 0?Vb:i;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vb,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,p={state:u,setOptions:function(T){var R=typeof T=="function"?T(u.options):T;_(),u.options=Object.assign({},r,u.options,R),u.scrollParents={reference:Ar(a)?tl(a):a.contextElement?tl(a.contextElement):[],popper:tl(l)};var D=_5(b5([].concat(s,u.options.modifiers)));return u.orderedModifiers=D.filter(function(k){return k.enabled}),m(),p.update()},forceUpdate:function(){if(!d){var T=u.elements,R=T.reference,D=T.popper;if($b(R,D)){u.rects={reference:m5(R,Kl(D),u.options.strategy==="fixed"),popper:Og(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var O=u.orderedModifiers[k],L=O.fn,E=O.options,b=E===void 0?{}:E,w=O.name;typeof L=="function"&&(u=L({state:u,options:b,name:w,instance:p})||u)}}}},update:y5(function(){return new Promise(function(y){p.forceUpdate(),y(u)})}),destroy:function(){_(),d=!0}};if(!$b(a,l))return p;p.setOptions(c).then(function(y){!d&&c.onFirstUpdate&&c.onFirstUpdate(y)});function m(){u.orderedModifiers.forEach(function(y){var T=y.name,R=y.options,D=R===void 0?{}:R,k=y.effect;if(typeof k=="function"){var O=k({state:u,name:T,instance:p,options:D}),L=function(){};f.push(O||L)}})}function _(){f.forEach(function(y){return y()}),f=[]}return p}}var T5=[W3,c5,j3,R3,a5,n5,f5,F3,i5],E5=w5({defaultModifiers:T5}),I5=Object.defineProperty,S5=(e,t,n)=>t in e?I5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t,n)=>(S5(e,typeof t!="symbol"?t+"":t,n),n),Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function UI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A5=Object.prototype,C5=A5.hasOwnProperty;function x5(e,t){return e!=null&&C5.call(e,t)}var P5=x5,k5=Array.isArray,Qn=k5,D5=typeof Lc=="object"&&Lc&&Lc.Object===Object&&Lc,HI=D5,R5=HI,M5=typeof self=="object"&&self&&self.Object===Object&&self,O5=R5||M5||Function("return this")(),ws=O5,N5=ws,L5=N5.Symbol,Hh=L5,Fb=Hh,jI=Object.prototype,V5=jI.hasOwnProperty,$5=jI.toString,ba=Fb?Fb.toStringTag:void 0;function F5(e){var t=V5.call(e,ba),n=e[ba];try{e[ba]=void 0;var s=!0}catch{}var i=$5.call(e);return s&&(t?e[ba]=n:delete e[ba]),i}var B5=F5,U5=Object.prototype,H5=U5.toString;function j5(e){return H5.call(e)}var z5=j5,Bb=Hh,W5=B5,Y5=z5,q5="[object Null]",K5="[object Undefined]",Ub=Bb?Bb.toStringTag:void 0;function G5(e){return e==null?e===void 0?K5:q5:Ub&&Ub in Object(e)?W5(e):Y5(e)}var Ts=G5;function X5(e){return e!=null&&typeof e=="object"}var Jn=X5,Q5=Ts,J5=Jn,Z5="[object Symbol]";function t6(e){return typeof e=="symbol"||J5(e)&&Q5(e)==Z5}var Fg=t6,e6=Qn,n6=Fg,s6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i6=/^\w*$/;function r6(e,t){if(e6(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||n6(e)?!0:i6.test(e)||!s6.test(e)||t!=null&&e in Object(t)}var Bg=r6;function o6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ti=o6,a6=Ts,l6=ti,c6="[object AsyncFunction]",u6="[object Function]",h6="[object GeneratorFunction]",f6="[object Proxy]";function d6(e){if(!l6(e))return!1;var t=a6(e);return t==u6||t==h6||t==c6||t==f6}var Lr=d6,p6=ws,g6=p6["__core-js_shared__"],m6=g6,jf=m6,Hb=function(){var e=/[^.]+$/.exec(jf&&jf.keys&&jf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function v6(e){return!!Hb&&Hb in e}var _6=v6,y6=Function.prototype,b6=y6.toString;function w6(e){if(e!=null){try{return b6.call(e)}catch{}try{return e+""}catch{}}return""}var zI=w6,T6=Lr,E6=_6,I6=ti,S6=zI,A6=/[\\^$.*+?()[\]{}|]/g,C6=/^\[object .+?Constructor\]$/,x6=Function.prototype,P6=Object.prototype,k6=x6.toString,D6=P6.hasOwnProperty,R6=RegExp("^"+k6.call(D6).replace(A6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function M6(e){if(!I6(e)||E6(e))return!1;var t=T6(e)?R6:C6;return t.test(S6(e))}var O6=M6;function N6(e,t){return e==null?void 0:e[t]}var L6=N6,V6=O6,$6=L6;function F6(e,t){var n=$6(e,t);return V6(n)?n:void 0}var Vr=F6,B6=Vr,U6=B6(Object,"create"),jh=U6,jb=jh;function H6(){this.__data__=jb?jb(null):{},this.size=0}var j6=H6;function z6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var W6=z6,Y6=jh,q6="__lodash_hash_undefined__",K6=Object.prototype,G6=K6.hasOwnProperty;function X6(e){var t=this.__data__;if(Y6){var n=t[e];return n===q6?void 0:n}return G6.call(t,e)?t[e]:void 0}var Q6=X6,J6=jh,Z6=Object.prototype,tB=Z6.hasOwnProperty;function eB(e){var t=this.__data__;return J6?t[e]!==void 0:tB.call(t,e)}var nB=eB,sB=jh,iB="__lodash_hash_undefined__";function rB(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sB&&t===void 0?iB:t,this}var oB=rB,aB=j6,lB=W6,cB=Q6,uB=nB,hB=oB;function Ko(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Ko.prototype.clear=aB;Ko.prototype.delete=lB;Ko.prototype.get=cB;Ko.prototype.has=uB;Ko.prototype.set=hB;var fB=Ko;function dB(){this.__data__=[],this.size=0}var pB=dB;function gB(e,t){return e===t||e!==e&&t!==t}var Go=gB,mB=Go;function vB(e,t){for(var n=e.length;n--;)if(mB(e[n][0],t))return n;return-1}var zh=vB,_B=zh,yB=Array.prototype,bB=yB.splice;function wB(e){var t=this.__data__,n=_B(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():bB.call(t,n,1),--this.size,!0}var TB=wB,EB=zh;function IB(e){var t=this.__data__,n=EB(t,e);return n<0?void 0:t[n][1]}var SB=IB,AB=zh;function CB(e){return AB(this.__data__,e)>-1}var xB=CB,PB=zh;function kB(e,t){var n=this.__data__,s=PB(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var DB=kB,RB=pB,MB=TB,OB=SB,NB=xB,LB=DB;function Xo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Xo.prototype.clear=RB;Xo.prototype.delete=MB;Xo.prototype.get=OB;Xo.prototype.has=NB;Xo.prototype.set=LB;var Wh=Xo,VB=Vr,$B=ws,FB=VB($B,"Map"),Ug=FB,zb=fB,BB=Wh,UB=Ug;function HB(){this.size=0,this.__data__={hash:new zb,map:new(UB||BB),string:new zb}}var jB=HB;function zB(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var WB=zB,YB=WB;function qB(e,t){var n=e.__data__;return YB(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Yh=qB,KB=Yh;function GB(e){var t=KB(this,e).delete(e);return this.size-=t?1:0,t}var XB=GB,QB=Yh;function JB(e){return QB(this,e).get(e)}var ZB=JB,tU=Yh;function eU(e){return tU(this,e).has(e)}var nU=eU,sU=Yh;function iU(e,t){var n=sU(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var rU=iU,oU=jB,aU=XB,lU=ZB,cU=nU,uU=rU;function Qo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Qo.prototype.clear=oU;Qo.prototype.delete=aU;Qo.prototype.get=lU;Qo.prototype.has=cU;Qo.prototype.set=uU;var Hg=Qo,WI=Hg,hU="Expected a function";function jg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(hU);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],r=n.cache;if(r.has(i))return r.get(i);var o=e.apply(this,s);return n.cache=r.set(i,o)||r,o};return n.cache=new(jg.Cache||WI),n}jg.Cache=WI;var fU=jg,dU=fU,pU=500;function gU(e){var t=dU(e,function(s){return n.size===pU&&n.clear(),s}),n=t.cache;return t}var mU=gU,vU=mU,_U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yU=/\\(\\)?/g,bU=vU(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_U,function(n,s,i,r){t.push(i?r.replace(yU,"$1"):s||n)}),t}),wU=bU;function TU(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var EU=TU,Wb=Hh,IU=EU,SU=Qn,AU=Fg,Yb=Wb?Wb.prototype:void 0,qb=Yb?Yb.toString:void 0;function YI(e){if(typeof e=="string")return e;if(SU(e))return IU(e,YI)+"";if(AU(e))return qb?qb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var CU=YI,xU=CU;function PU(e){return e==null?"":xU(e)}var kU=PU,DU=Qn,RU=Bg,MU=wU,OU=kU;function NU(e,t){return DU(e)?e:RU(e,t)?[e]:MU(OU(e))}var qI=NU,LU=Ts,VU=Jn,$U="[object Arguments]";function FU(e){return VU(e)&&LU(e)==$U}var BU=FU,Kb=BU,UU=Jn,KI=Object.prototype,HU=KI.hasOwnProperty,jU=KI.propertyIsEnumerable,zU=Kb(function(){return arguments}())?Kb:function(e){return UU(e)&&HU.call(e,"callee")&&!jU.call(e,"callee")},zg=zU,WU=9007199254740991,YU=/^(?:0|[1-9]\d*)$/;function qU(e,t){var n=typeof e;return t=t??WU,!!t&&(n=="number"||n!="symbol"&&YU.test(e))&&e>-1&&e%1==0&&e<t}var Wg=qU,KU=9007199254740991;function GU(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=KU}var Yg=GU,XU=Fg;function QU(e){if(typeof e=="string"||XU(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var qh=QU,JU=qI,ZU=zg,t9=Qn,e9=Wg,n9=Yg,s9=qh;function i9(e,t,n){t=JU(t,e);for(var s=-1,i=t.length,r=!1;++s<i;){var o=s9(t[s]);if(!(r=e!=null&&n(e,o)))break;e=e[o]}return r||++s!=i?r:(i=e==null?0:e.length,!!i&&n9(i)&&e9(o,i)&&(t9(e)||ZU(e)))}var GI=i9,r9=P5,o9=GI;function a9(e,t){return e!=null&&o9(e,t,r9)}var XI=a9,l9=Ts,c9=Jn,u9="[object Date]";function h9(e){return c9(e)&&l9(e)==u9}var f9=h9;function d9(e){return function(t){return e(t)}}var QI=d9,kl={},p9={get exports(){return kl},set exports(e){kl=e}};(function(e,t){var n=HI,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,r=i&&i.exports===s,o=r&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(p9,kl);var g9=f9,m9=QI,Gb=kl,Xb=Gb&&Gb.isDate,v9=Xb?m9(Xb):g9,_9=v9,y9=Ts,b9=Qn,w9=Jn,T9="[object String]";function E9(e){return typeof e=="string"||!b9(e)&&w9(e)&&y9(e)==T9}var Bs=E9;function I9(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var JI=I9,S9=Wh;function A9(){this.__data__=new S9,this.size=0}var C9=A9;function x9(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var P9=x9;function k9(e){return this.__data__.get(e)}var D9=k9;function R9(e){return this.__data__.has(e)}var M9=R9,O9=Wh,N9=Ug,L9=Hg,V9=200;function $9(e,t){var n=this.__data__;if(n instanceof O9){var s=n.__data__;if(!N9||s.length<V9-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new L9(s)}return n.set(e,t),this.size=n.size,this}var F9=$9,B9=Wh,U9=C9,H9=P9,j9=D9,z9=M9,W9=F9;function Jo(e){var t=this.__data__=new B9(e);this.size=t.size}Jo.prototype.clear=U9;Jo.prototype.delete=H9;Jo.prototype.get=j9;Jo.prototype.has=z9;Jo.prototype.set=W9;var qg=Jo,Y9="__lodash_hash_undefined__";function q9(e){return this.__data__.set(e,Y9),this}var K9=q9;function G9(e){return this.__data__.has(e)}var X9=G9,Q9=Hg,J9=K9,Z9=X9;function Wu(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Q9;++t<n;)this.add(e[t])}Wu.prototype.add=Wu.prototype.push=J9;Wu.prototype.has=Z9;var tH=Wu;function eH(e,t){return e.has(t)}var nH=eH,sH=tH,iH=JI,rH=nH,oH=1,aH=2;function lH(e,t,n,s,i,r){var o=n&oH,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(e),u=r.get(t);if(c&&u)return c==t&&u==e;var f=-1,d=!0,p=n&aH?new sH:void 0;for(r.set(e,t),r.set(t,e);++f<a;){var m=e[f],_=t[f];if(s)var y=o?s(_,m,f,t,e,r):s(m,_,f,e,t,r);if(y!==void 0){if(y)continue;d=!1;break}if(p){if(!iH(t,function(T,R){if(!rH(p,R)&&(m===T||i(m,T,n,s,r)))return p.push(R)})){d=!1;break}}else if(!(m===_||i(m,_,n,s,r))){d=!1;break}}return r.delete(e),r.delete(t),d}var ZI=lH,cH=ws,uH=cH.Uint8Array,tS=uH;function hH(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var fH=hH;function dH(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var pH=dH,Qb=Hh,Jb=tS,gH=Go,mH=ZI,vH=fH,_H=pH,yH=1,bH=2,wH="[object Boolean]",TH="[object Date]",EH="[object Error]",IH="[object Map]",SH="[object Number]",AH="[object RegExp]",CH="[object Set]",xH="[object String]",PH="[object Symbol]",kH="[object ArrayBuffer]",DH="[object DataView]",Zb=Qb?Qb.prototype:void 0,zf=Zb?Zb.valueOf:void 0;function RH(e,t,n,s,i,r,o){switch(n){case DH:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case kH:return!(e.byteLength!=t.byteLength||!r(new Jb(e),new Jb(t)));case wH:case TH:case SH:return gH(+e,+t);case EH:return e.name==t.name&&e.message==t.message;case AH:case xH:return e==t+"";case IH:var a=vH;case CH:var l=s&yH;if(a||(a=_H),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;s|=bH,o.set(e,t);var u=mH(a(e),a(t),s,i,r,o);return o.delete(e),u;case PH:if(zf)return zf.call(e)==zf.call(t)}return!1}var MH=RH;function OH(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var NH=OH,LH=NH,VH=Qn;function $H(e,t,n){var s=t(e);return VH(e)?s:LH(s,n(e))}var FH=$H;function BH(e,t){for(var n=-1,s=e==null?0:e.length,i=0,r=[];++n<s;){var o=e[n];t(o,n,e)&&(r[i++]=o)}return r}var UH=BH;function HH(){return[]}var jH=HH,zH=UH,WH=jH,YH=Object.prototype,qH=YH.propertyIsEnumerable,t0=Object.getOwnPropertySymbols,KH=t0?function(e){return e==null?[]:(e=Object(e),zH(t0(e),function(t){return qH.call(e,t)}))}:WH,GH=KH;function XH(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var QH=XH,Vo={},JH={get exports(){return Vo},set exports(e){Vo=e}};function ZH(){return!1}var tj=ZH;(function(e,t){var n=ws,s=tj,i=t&&!t.nodeType&&t,r=i&&!0&&e&&!e.nodeType&&e,o=r&&r.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||s;e.exports=c})(JH,Vo);var ej=Ts,nj=Yg,sj=Jn,ij="[object Arguments]",rj="[object Array]",oj="[object Boolean]",aj="[object Date]",lj="[object Error]",cj="[object Function]",uj="[object Map]",hj="[object Number]",fj="[object Object]",dj="[object RegExp]",pj="[object Set]",gj="[object String]",mj="[object WeakMap]",vj="[object ArrayBuffer]",_j="[object DataView]",yj="[object Float32Array]",bj="[object Float64Array]",wj="[object Int8Array]",Tj="[object Int16Array]",Ej="[object Int32Array]",Ij="[object Uint8Array]",Sj="[object Uint8ClampedArray]",Aj="[object Uint16Array]",Cj="[object Uint32Array]",ue={};ue[yj]=ue[bj]=ue[wj]=ue[Tj]=ue[Ej]=ue[Ij]=ue[Sj]=ue[Aj]=ue[Cj]=!0;ue[ij]=ue[rj]=ue[vj]=ue[oj]=ue[_j]=ue[aj]=ue[lj]=ue[cj]=ue[uj]=ue[hj]=ue[fj]=ue[dj]=ue[pj]=ue[gj]=ue[mj]=!1;function xj(e){return sj(e)&&nj(e.length)&&!!ue[ej(e)]}var Pj=xj,kj=Pj,Dj=QI,e0=kl,n0=e0&&e0.isTypedArray,Rj=n0?Dj(n0):kj,Kg=Rj,Mj=QH,Oj=zg,Nj=Qn,Lj=Vo,Vj=Wg,$j=Kg,Fj=Object.prototype,Bj=Fj.hasOwnProperty;function Uj(e,t){var n=Nj(e),s=!n&&Oj(e),i=!n&&!s&&Lj(e),r=!n&&!s&&!i&&$j(e),o=n||s||i||r,a=o?Mj(e.length,String):[],l=a.length;for(var c in e)(t||Bj.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Vj(c,l)))&&a.push(c);return a}var eS=Uj,Hj=Object.prototype;function jj(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Hj;return e===n}var Gg=jj;function zj(e,t){return function(n){return e(t(n))}}var nS=zj,Wj=nS,Yj=Wj(Object.keys,Object),qj=Yj,Kj=Gg,Gj=qj,Xj=Object.prototype,Qj=Xj.hasOwnProperty;function Jj(e){if(!Kj(e))return Gj(e);var t=[];for(var n in Object(e))Qj.call(e,n)&&n!="constructor"&&t.push(n);return t}var Zj=Jj,tz=Lr,ez=Yg;function nz(e){return e!=null&&ez(e.length)&&!tz(e)}var Gl=nz,sz=eS,iz=Zj,rz=Gl;function oz(e){return rz(e)?sz(e):iz(e)}var Xg=oz,az=FH,lz=GH,cz=Xg;function uz(e){return az(e,cz,lz)}var hz=uz,s0=hz,fz=1,dz=Object.prototype,pz=dz.hasOwnProperty;function gz(e,t,n,s,i,r){var o=n&fz,a=s0(e),l=a.length,c=s0(t),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var d=a[f];if(!(o?d in t:pz.call(t,d)))return!1}var p=r.get(e),m=r.get(t);if(p&&m)return p==t&&m==e;var _=!0;r.set(e,t),r.set(t,e);for(var y=o;++f<l;){d=a[f];var T=e[d],R=t[d];if(s)var D=o?s(R,T,d,t,e,r):s(T,R,d,e,t,r);if(!(D===void 0?T===R||i(T,R,n,s,r):D)){_=!1;break}y||(y=d=="constructor")}if(_&&!y){var k=e.constructor,O=t.constructor;k!=O&&"constructor"in e&&"constructor"in t&&!(typeof k=="function"&&k instanceof k&&typeof O=="function"&&O instanceof O)&&(_=!1)}return r.delete(e),r.delete(t),_}var mz=gz,vz=Vr,_z=ws,yz=vz(_z,"DataView"),bz=yz,wz=Vr,Tz=ws,Ez=wz(Tz,"Promise"),Iz=Ez,Sz=Vr,Az=ws,Cz=Sz(Az,"Set"),xz=Cz,Pz=Vr,kz=ws,Dz=Pz(kz,"WeakMap"),Rz=Dz,Xd=bz,Qd=Ug,Jd=Iz,Zd=xz,tp=Rz,sS=Ts,Zo=zI,i0="[object Map]",Mz="[object Object]",r0="[object Promise]",o0="[object Set]",a0="[object WeakMap]",l0="[object DataView]",Oz=Zo(Xd),Nz=Zo(Qd),Lz=Zo(Jd),Vz=Zo(Zd),$z=Zo(tp),lr=sS;(Xd&&lr(new Xd(new ArrayBuffer(1)))!=l0||Qd&&lr(new Qd)!=i0||Jd&&lr(Jd.resolve())!=r0||Zd&&lr(new Zd)!=o0||tp&&lr(new tp)!=a0)&&(lr=function(e){var t=sS(e),n=t==Mz?e.constructor:void 0,s=n?Zo(n):"";if(s)switch(s){case Oz:return l0;case Nz:return i0;case Lz:return r0;case Vz:return o0;case $z:return a0}return t});var Fz=lr,Wf=qg,Bz=ZI,Uz=MH,Hz=mz,c0=Fz,u0=Qn,h0=Vo,jz=Kg,zz=1,f0="[object Arguments]",d0="[object Array]",Vc="[object Object]",Wz=Object.prototype,p0=Wz.hasOwnProperty;function Yz(e,t,n,s,i,r){var o=u0(e),a=u0(t),l=o?d0:c0(e),c=a?d0:c0(t);l=l==f0?Vc:l,c=c==f0?Vc:c;var u=l==Vc,f=c==Vc,d=l==c;if(d&&h0(e)){if(!h0(t))return!1;o=!0,u=!1}if(d&&!u)return r||(r=new Wf),o||jz(e)?Bz(e,t,n,s,i,r):Uz(e,t,l,n,s,i,r);if(!(n&zz)){var p=u&&p0.call(e,"__wrapped__"),m=f&&p0.call(t,"__wrapped__");if(p||m){var _=p?e.value():e,y=m?t.value():t;return r||(r=new Wf),i(_,y,n,s,r)}}return d?(r||(r=new Wf),Hz(e,t,n,s,i,r)):!1}var qz=Yz,Kz=qz,g0=Jn;function iS(e,t,n,s,i){return e===t?!0:e==null||t==null||!g0(e)&&!g0(t)?e!==e&&t!==t:Kz(e,t,n,s,iS,i)}var rS=iS,Gz=qg,Xz=rS,Qz=1,Jz=2;function Zz(e,t,n,s){var i=n.length,r=i,o=!s;if(e==null)return!r;for(e=Object(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<r;){a=n[i];var l=a[0],c=e[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in e))return!1}else{var f=new Gz;if(s)var d=s(c,u,l,e,t,f);if(!(d===void 0?Xz(u,c,Qz|Jz,s,f):d))return!1}}return!0}var tW=Zz,eW=ti;function nW(e){return e===e&&!eW(e)}var oS=nW,sW=oS,iW=Xg;function rW(e){for(var t=iW(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,sW(i)]}return t}var oW=rW;function aW(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var aS=aW,lW=tW,cW=oW,uW=aS;function hW(e){var t=cW(e);return t.length==1&&t[0][2]?uW(t[0][0],t[0][1]):function(n){return n===e||lW(n,e,t)}}var fW=hW,dW=qI,pW=qh;function gW(e,t){t=dW(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[pW(t[n++])];return n&&n==s?e:void 0}var lS=gW,mW=lS;function vW(e,t,n){var s=e==null?void 0:mW(e,t);return s===void 0?n:s}var dr=vW;function _W(e,t){return e!=null&&t in Object(e)}var yW=_W,bW=yW,wW=GI;function TW(e,t){return e!=null&&wW(e,t,bW)}var EW=TW,IW=rS,SW=dr,AW=EW,CW=Bg,xW=oS,PW=aS,kW=qh,DW=1,RW=2;function MW(e,t){return CW(e)&&xW(t)?PW(kW(e),t):function(n){var s=SW(n,e);return s===void 0&&s===t?AW(n,e):IW(t,s,DW|RW)}}var OW=MW;function NW(e){return e}var Qg=NW;function LW(e){return function(t){return t==null?void 0:t[e]}}var VW=LW,$W=lS;function FW(e){return function(t){return $W(t,e)}}var BW=FW,UW=VW,HW=BW,jW=Bg,zW=qh;function WW(e){return jW(e)?UW(zW(e)):HW(e)}var YW=WW,qW=fW,KW=OW,GW=Qg,XW=Qn,QW=YW;function JW(e){return typeof e=="function"?e:e==null?GW:typeof e=="object"?XW(e)?KW(e[0],e[1]):qW(e):QW(e)}var cS=JW;function ZW(e){return function(t,n,s){for(var i=-1,r=Object(t),o=s(t),a=o.length;a--;){var l=o[e?a:++i];if(n(r[l],l,r)===!1)break}return t}}var t7=ZW,e7=t7,n7=e7(),uS=n7,s7=uS,i7=Xg;function r7(e,t){return e&&s7(e,t,i7)}var hS=r7,o7=Gl;function a7(e,t){return function(n,s){if(n==null)return n;if(!o7(n))return e(n,s);for(var i=n.length,r=t?i:-1,o=Object(n);(t?r--:++r<i)&&s(o[r],r,o)!==!1;);return n}}var l7=a7,c7=hS,u7=l7,h7=u7(c7),f7=h7,d7=f7;function p7(e,t){var n;return d7(e,function(s,i,r){return n=t(s,i,r),!n}),!!n}var g7=p7,m7=Go,v7=Gl,_7=Wg,y7=ti;function b7(e,t,n){if(!y7(n))return!1;var s=typeof t;return(s=="number"?v7(n)&&_7(t,n.length):s=="string"&&t in n)?m7(n[t],e):!1}var Jg=b7,w7=JI,T7=cS,E7=g7,I7=Qn,S7=Jg;function A7(e,t,n){var s=I7(e)?w7:E7;return n&&S7(e,t,n)&&(t=void 0),s(e,T7(t))}var C7=A7,x7=Ts,P7=Jn,k7="[object Boolean]";function D7(e){return e===!0||e===!1||P7(e)&&x7(e)==k7}var R7=D7,M7=Ts,O7=Jn,N7="[object Number]";function L7(e){return typeof e=="number"||O7(e)&&M7(e)==N7}var ys=L7,V7=Vr,$7=function(){try{var e=V7(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fS=$7,m0=fS;function F7(e,t,n){t=="__proto__"&&m0?m0(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Kh=F7,B7=Kh,U7=Go,H7=Object.prototype,j7=H7.hasOwnProperty;function z7(e,t,n){var s=e[t];(!(j7.call(e,t)&&U7(s,n))||n===void 0&&!(t in e))&&B7(e,t,n)}var W7=z7,Y7=Kh,q7=hS,K7=cS;function G7(e,t){var n={};return t=K7(t),q7(e,function(s,i,r){Y7(n,i,t(s,i,r))}),n}var X7=G7;function Q7(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var dS=Q7,J7=dS,v0=Math.max;function Z7(e,t,n){return t=v0(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,r=v0(s.length-t,0),o=Array(r);++i<r;)o[i]=s[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=s[i];return a[t]=n(o),J7(e,this,a)}}var tY=Z7;function eY(e){return function(){return e}}var nY=eY,sY=nY,_0=fS,iY=Qg,rY=_0?function(e,t){return _0(e,"toString",{configurable:!0,enumerable:!1,value:sY(t),writable:!0})}:iY,oY=rY,aY=800,lY=16,cY=Date.now;function uY(e){var t=0,n=0;return function(){var s=cY(),i=lY-(s-n);if(n=s,i>0){if(++t>=aY)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hY=uY,fY=oY,dY=hY,pY=dY(fY),gY=pY,mY=Qg,vY=tY,_Y=gY;function yY(e,t){return _Y(vY(e,t,mY),e+"")}var Zg=yY;function bY(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var wY=bY,TY=ti,EY=Gg,IY=wY,SY=Object.prototype,AY=SY.hasOwnProperty;function CY(e){if(!TY(e))return IY(e);var t=EY(e),n=[];for(var s in e)s=="constructor"&&(t||!AY.call(e,s))||n.push(s);return n}var xY=CY,PY=eS,kY=xY,DY=Gl;function RY(e){return DY(e)?PY(e,!0):kY(e)}var tm=RY,MY=Zg,OY=Go,NY=Jg,LY=tm,pS=Object.prototype,VY=pS.hasOwnProperty,$Y=MY(function(e,t){e=Object(e);var n=-1,s=t.length,i=s>2?t[2]:void 0;for(i&&NY(t[0],t[1],i)&&(s=1);++n<s;)for(var r=t[n],o=LY(r),a=-1,l=o.length;++a<l;){var c=o[a],u=e[c];(u===void 0||OY(u,pS[c])&&!VY.call(e,c))&&(e[c]=r[c])}return e}),y0=$Y,FY=Kh,BY=Go;function UY(e,t,n){(n!==void 0&&!BY(e[t],n)||n===void 0&&!(t in e))&&FY(e,t,n)}var gS=UY,Yu={},HY={get exports(){return Yu},set exports(e){Yu=e}};(function(e,t){var n=ws,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,r=i&&i.exports===s,o=r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var f=c.length,d=a?a(f):new c.constructor(f);return c.copy(d),d}e.exports=l})(HY,Yu);var b0=tS;function jY(e){var t=new e.constructor(e.byteLength);return new b0(t).set(new b0(e)),t}var zY=jY,WY=zY;function YY(e,t){var n=t?WY(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var qY=YY;function KY(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var GY=KY,XY=ti,w0=Object.create,QY=function(){function e(){}return function(t){if(!XY(t))return{};if(w0)return w0(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),JY=QY,ZY=nS,t8=ZY(Object.getPrototypeOf,Object),mS=t8,e8=JY,n8=mS,s8=Gg;function i8(e){return typeof e.constructor=="function"&&!s8(e)?e8(n8(e)):{}}var r8=i8,o8=Gl,a8=Jn;function l8(e){return a8(e)&&o8(e)}var c8=l8,u8=Ts,h8=mS,f8=Jn,d8="[object Object]",p8=Function.prototype,g8=Object.prototype,vS=p8.toString,m8=g8.hasOwnProperty,v8=vS.call(Object);function _8(e){if(!f8(e)||u8(e)!=d8)return!1;var t=h8(e);if(t===null)return!0;var n=m8.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&vS.call(n)==v8}var y8=_8;function b8(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var _S=b8,w8=W7,T8=Kh;function E8(e,t,n,s){var i=!n;n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),i?T8(n,a,l):w8(n,a,l)}return n}var I8=E8,S8=I8,A8=tm;function C8(e){return S8(e,A8(e))}var x8=C8,T0=gS,P8=Yu,k8=qY,D8=GY,R8=r8,E0=zg,I0=Qn,M8=c8,O8=Vo,N8=Lr,L8=ti,V8=y8,$8=Kg,S0=_S,F8=x8;function B8(e,t,n,s,i,r,o){var a=S0(e,n),l=S0(t,n),c=o.get(l);if(c){T0(e,n,c);return}var u=r?r(a,l,n+"",e,t,o):void 0,f=u===void 0;if(f){var d=I0(l),p=!d&&O8(l),m=!d&&!p&&$8(l);u=l,d||p||m?I0(a)?u=a:M8(a)?u=D8(a):p?(f=!1,u=P8(l,!0)):m?(f=!1,u=k8(l,!0)):u=[]:V8(l)||E0(l)?(u=a,E0(a)?u=F8(a):(!L8(a)||N8(a))&&(u=R8(l))):f=!1}f&&(o.set(l,u),i(u,l,s,r,o),o.delete(l)),T0(e,n,u)}var U8=B8,H8=qg,j8=gS,z8=uS,W8=U8,Y8=ti,q8=tm,K8=_S;function yS(e,t,n,s,i){e!==t&&z8(t,function(r,o){if(i||(i=new H8),Y8(r))W8(e,t,o,n,yS,s,i);else{var a=s?s(K8(e,o),r,o+"",e,t,i):void 0;a===void 0&&(a=r),j8(e,o,a)}},q8)}var bS=yS,G8=bS,A0=ti;function wS(e,t,n,s,i,r){return A0(e)&&A0(t)&&(r.set(t,e),G8(e,t,void 0,wS,r),r.delete(t)),e}var X8=wS,Q8=Zg,J8=Jg;function Z8(e){return Q8(function(t,n){var s=-1,i=n.length,r=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(r=e.length>3&&typeof r=="function"?(i--,r):void 0,o&&J8(n[0],n[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++s<i;){var a=n[s];a&&e(t,a,s,r)}return t})}var tq=Z8,eq=bS,nq=tq,sq=nq(function(e,t,n,s){eq(e,t,n,s)}),iq=sq,rq=dS,oq=Zg,aq=X8,lq=iq,cq=oq(function(e){return e.push(void 0,aq),rq(lq,void 0,e)}),qu=cq;function uq(e){return e&&e.length?e[0]:void 0}var TS=uq;function hq(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var io=hq;const fq=e=>Object.prototype.toString.call(e).slice(8,-1),ep=e=>_9(e)&&!isNaN(e.getTime()),Cr=e=>fq(e)==="Object",ES=XI,C0=(e,t)=>C7(t,n=>XI(e,n)),te=(e,t,n="0")=>{for(e=e!=null?String(e):"",t=t||2;e.length<t;)e=`${n}${e}`;return e},gs=e=>Array.isArray(e),pr=e=>gs(e)&&e.length>0,Ku=e=>e==null?null:document&&Bs(e)?document.querySelector(e):e.$el??e,bi=(e,t,n,s=void 0)=>{e.removeEventListener(t,n,s)},wi=(e,t,n,s=void 0)=>(e.addEventListener(t,n,s),()=>bi(e,t,n,s)),iu=(e,t)=>!!e&&!!t&&(e===t||e.contains(t)),$c=(e,t)=>{(e.key===" "||e.key==="Enter")&&(t(e),e.preventDefault())},dq=(e,...t)=>{const n={};let s;for(s in e)t.includes(s)||(n[s]=e[s]);return n},IS=(e,t)=>{const n={};return t.forEach(s=>{s in e&&(n[s]=e[s])}),n};function pq(e,t,n){return Math.min(Math.max(e,t),n)}var Gu={},gq={get exports(){return Gu},set exports(e){Gu=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){if(s===null||s===!0||s===!1)return NaN;var i=Number(s);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}e.exports=t.default})(gq,Gu);const mq=UI(Gu);var Xu={},vq={get exports(){return Xu},set exports(e){Xu=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(s){var i=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return i.setUTCFullYear(s.getFullYear()),s.getTime()-i.getTime()}e.exports=t.default})(vq,Xu);const x0=UI(Xu);function _q(e,t){var n=Tq(t);return n.formatToParts?bq(n,e):wq(n,e)}var yq={year:0,month:1,day:2,hour:3,minute:4,second:5};function bq(e,t){try{for(var n=e.formatToParts(t),s=[],i=0;i<n.length;i++){var r=yq[n[i].type];r>=0&&(s[r]=parseInt(n[i].value,10))}return s}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function wq(e,t){var n=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[s[3],s[1],s[2],s[4],s[5],s[6]]}var Yf={};function Tq(e){if(!Yf[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";Yf[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Yf[e]}function SS(e,t,n,s,i,r,o){var a=new Date(0);return a.setUTCFullYear(e,t,n),a.setUTCHours(s,i,r,o),a}var P0=36e5,Eq=6e4,qf={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Iq(e,t,n){var s,i;if(!e||(s=qf.timezoneZ.exec(e),s))return 0;var r;if(s=qf.timezoneHH.exec(e),s)return r=parseInt(s[1],10),k0(r)?-(r*P0):NaN;if(s=qf.timezoneHHMM.exec(e),s){r=parseInt(s[1],10);var o=parseInt(s[2],10);return k0(r,o)?(i=Math.abs(r)*P0+o*Eq,r>0?-i:i):NaN}if(Cq(e)){t=new Date(t||Date.now());var a=Sq(t),l=np(a,e),c=Aq(t,l,e);return-c}return NaN}function Sq(e){return SS(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function np(e,t){var n=_q(e,t),s=SS(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=e.getTime(),r=i%1e3;return i-=r>=0?r:1e3+r,s-i}function Aq(e,t,n){var s=e.getTime(),i=s-t,r=np(new Date(i),n);if(t===r)return t;i-=r-t;var o=np(new Date(i),n);return r===o?r:Math.max(r,o)}function k0(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var D0={};function Cq(e){if(D0[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),D0[e]=!0,!0}catch{return!1}}var xq=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const Pq=xq;var Kf=36e5,R0=6e4,kq=2,cn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Pq};function Dq(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},s=n.additionalDigits==null?kq:mq(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var i=Rq(e),r=Mq(i.date,s),o=r.year,a=r.restDateString,l=Oq(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,f;if(i.time&&(u=Nq(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(f=Iq(i.timeZone||n.timeZone,new Date(c+u)),isNaN(f))return new Date(NaN)}else f=x0(new Date(c+u)),f=x0(new Date(c+u+f));return new Date(c+u+f)}else return new Date(NaN)}function Rq(e){var t={},n=cn.dateTimePattern.exec(e),s;if(n?(t.date=n[1],s=n[3]):(n=cn.datePattern.exec(e),n?(t.date=n[1],s=n[2]):(t.date=null,s=e)),s){var i=cn.timeZone.exec(s);i?(t.time=s.replace(i[1],""),t.timeZone=i[1].trim()):t.time=s}return t}function Mq(e,t){var n=cn.YYY[t],s=cn.YYYYY[t],i;if(i=cn.YYYY.exec(e)||s.exec(e),i){var r=i[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(i=cn.YY.exec(e)||n.exec(e),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function Oq(e,t){if(t===null)return null;var n,s,i,r;if(e.length===0)return s=new Date(0),s.setUTCFullYear(t),s;if(n=cn.MM.exec(e),n)return s=new Date(0),i=parseInt(n[1],10)-1,O0(t,i)?(s.setUTCFullYear(t,i),s):new Date(NaN);if(n=cn.DDD.exec(e),n){s=new Date(0);var o=parseInt(n[1],10);return $q(t,o)?(s.setUTCFullYear(t,0,o),s):new Date(NaN)}if(n=cn.MMDD.exec(e),n){s=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return O0(t,i,a)?(s.setUTCFullYear(t,i,a),s):new Date(NaN)}if(n=cn.Www.exec(e),n)return r=parseInt(n[1],10)-1,N0(t,r)?M0(t,r):new Date(NaN);if(n=cn.WwwD.exec(e),n){r=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return N0(t,r,l)?M0(t,r,l):new Date(NaN)}return null}function Nq(e){var t,n,s;if(t=cn.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),Gf(n)?n%24*Kf:NaN;if(t=cn.HHMM.exec(e),t)return n=parseInt(t[1],10),s=parseFloat(t[2].replace(",",".")),Gf(n,s)?n%24*Kf+s*R0:NaN;if(t=cn.HHMMSS.exec(e),t){n=parseInt(t[1],10),s=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return Gf(n,s,i)?n%24*Kf+s*R0+i*1e3:NaN}return null}function M0(e,t,n){t=t||0,n=n||0;var s=new Date(0);s.setUTCFullYear(e,0,4);var i=s.getUTCDay()||7,r=t*7+n+1-i;return s.setUTCDate(s.getUTCDate()+r),s}var Lq=[31,28,31,30,31,30,31,31,30,31,30,31],Vq=[31,29,31,30,31,30,31,31,30,31,30,31];function AS(e){return e%400===0||e%4===0&&e%100!==0}function O0(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var s=AS(e);if(s&&n>Vq[t]||!s&&n>Lq[t])return!1}return!0}function $q(e,t){if(t<1)return!1;var n=AS(e);return!(n&&t>366||!n&&t>365)}function N0(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function Gf(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function nn(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ru(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ru=function(n){return typeof n}:ru=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ru(e)}function ei(e){nn(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ru(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ta(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var Fq={};function em(){return Fq}function xr(e,t){var n,s,i,r,o,a,l,c;nn(1,arguments);var u=em(),f=ta((n=(s=(i=(r=t==null?void 0:t.weekStartsOn)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=ei(e),p=d.getDay(),m=(p<f?7:0)+p-f;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}function L0(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var Bq=6048e5;function Uq(e,t,n){nn(2,arguments);var s=xr(e,n),i=xr(t,n),r=s.getTime()-L0(s),o=i.getTime()-L0(i);return Math.round((r-o)/Bq)}function Hq(e){nn(1,arguments);var t=ei(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function jq(e){nn(1,arguments);var t=ei(e);return t.setDate(1),t.setHours(0,0,0,0),t}function zq(e,t){return nn(1,arguments),Uq(Hq(e),jq(e),t)+1}function Wq(e,t){var n,s,i,r,o,a,l,c;nn(1,arguments);var u=ei(e),f=u.getFullYear(),d=em(),p=ta((n=(s=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&s!==void 0?s:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(f+1,0,p),m.setHours(0,0,0,0);var _=xr(m,t),y=new Date(0);y.setFullYear(f,0,p),y.setHours(0,0,0,0);var T=xr(y,t);return u.getTime()>=_.getTime()?f+1:u.getTime()>=T.getTime()?f:f-1}function Yq(e,t){var n,s,i,r,o,a,l,c;nn(1,arguments);var u=em(),f=ta((n=(s=(i=(r=t==null?void 0:t.firstWeekContainsDate)!==null&&r!==void 0?r:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),d=Wq(e,t),p=new Date(0);p.setFullYear(d,0,f),p.setHours(0,0,0,0);var m=xr(p,t);return m}var qq=6048e5;function Kq(e,t){nn(1,arguments);var n=ei(e),s=xr(n,t).getTime()-Yq(n,t).getTime();return Math.round(s/qq)+1}function Qu(e){return nn(1,arguments),xr(e,{weekStartsOn:1})}function Gq(e){nn(1,arguments);var t=ei(e),n=t.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var i=Qu(s),r=new Date(0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);var o=Qu(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Xq(e){nn(1,arguments);var t=Gq(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var s=Qu(n);return s}var Qq=6048e5;function Jq(e){nn(1,arguments);var t=ei(e),n=Qu(t).getTime()-Xq(t).getTime();return Math.round(n/Qq)+1}function an(e,t){nn(2,arguments);var n=ei(e),s=ta(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Ju(e,t){nn(2,arguments);var n=ei(e),s=ta(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var i=n.getDate(),r=new Date(n.getTime());r.setMonth(n.getMonth()+s+1,0);var o=r.getDate();return i>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function V0(e,t){nn(2,arguments);var n=ta(t);return Ju(e,n*12)}const Zq={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function tK({monthComps:e,prevMonthComps:t,nextMonthComps:n},s){const i=[],{firstDayOfWeek:r,firstWeekday:o,isoWeeknumbers:a,weeknumbers:l,numDays:c,numWeeks:u}=e,f=o+(o<r?We:0)-r;let d=!0,p=!1,m=!1,_=0;const y=new Intl.DateTimeFormat(s.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let T=t.numDays-f+1,R=t.numDays-T+1,D=Math.floor((T-1)/We+1),k=1,O=t.numWeeks,L=1,E=t.month,b=t.year;const w=new Date,A=w.getDate(),x=w.getMonth()+1,C=w.getFullYear();for(let S=1;S<=qK;S++){for(let dt=1,Q=r;dt<=We;dt++,Q+=Q===We?1-We:1){d&&Q===o&&(T=1,R=e.numDays,D=Math.floor((T-1)/We+1),k=Math.floor((c-T)/We+1),O=1,L=u,E=e.month,b=e.year,d=!1,p=!0);const at=s.getDateFromParams(b,E,T,0,0,0,0),ot=s.getDateFromParams(b,E,T,12,0,0,0),mt=s.getDateFromParams(b,E,T,23,59,59,999),Nt=at,z=`${te(b,4)}-${te(E,2)}-${te(T,2)}`,At=dt,et=We-dt,Pt=l[S-1],Rt=a[S-1],Yt=T===A&&E===x&&b===C,Ht=p&&T===1,F=p&&T===c,st=S===1,Z=S===u,ct=dt===1,Ot=dt===We,P=VS(b,E,T);i.push({locale:s,id:z,position:++_,label:T.toString(),ariaLabel:y.format(new Date(b,E-1,T)),day:T,dayFromEnd:R,weekday:Q,weekdayPosition:At,weekdayPositionFromEnd:et,weekdayOrdinal:D,weekdayOrdinalFromEnd:k,week:O,weekFromEnd:L,weekPosition:S,weeknumber:Pt,isoWeeknumber:Rt,month:E,year:b,date:Nt,startDate:at,endDate:mt,noonDate:ot,dayIndex:P,isToday:Yt,isFirstDay:Ht,isLastDay:F,isDisabled:!p,isFocusable:!p,isFocused:!1,inMonth:p,inPrevMonth:d,inNextMonth:m,onTop:st,onBottom:Z,onLeft:ct,onRight:Ot,classes:[`id-${z}`,`day-${T}`,`day-from-end-${R}`,`weekday-${Q}`,`weekday-position-${At}`,`weekday-ordinal-${D}`,`weekday-ordinal-from-end-${k}`,`week-${O}`,`week-from-end-${L}`,{"is-today":Yt,"is-first-day":Ht,"is-last-day":F,"in-month":p,"in-prev-month":d,"in-next-month":m,"on-top":st,"on-bottom":Z,"on-left":ct,"on-right":Ot}]}),p&&F?(p=!1,m=!0,T=1,R=c,D=1,k=Math.floor((c-T)/We+1),O=1,L=n.numWeeks,E=n.month,b=n.year):(T++,R--,D=Math.floor((T-1)/We+1),k=Math.floor((c-T)/We+1))}O++,L--}return i}function eK(e,t,n,s){const i=e.reduce((r,o,a)=>{const l=Math.floor(a/7);let c=r[l];return c||(c={id:`week-${l+1}`,title:"",week:o.week,weekPosition:o.weekPosition,weeknumber:o.weeknumber,isoWeeknumber:o.isoWeeknumber,weeknumberDisplay:t?o.weeknumber:n?o.isoWeeknumber:void 0,days:[]},r[l]=c),c.days.push(o),r},Array(e.length/We));return i.forEach(r=>{const o=r.days[0],a=r.days[r.days.length-1];o.month===a.month?r.title=`${s.formatDate(o.date,"MMMM YYYY")}`:o.year===a.year?r.title=`${s.formatDate(o.date,"MMM")} - ${s.formatDate(a.date,"MMM YYYY")}`:r.title=`${s.formatDate(o.date,"MMM YYYY")} - ${s.formatDate(a.date,"MMM YYYY")}`}),i}function nK(e,t){return e.days.map(n=>({label:t.formatDate(n.date,t.masks.weekdays),weekday:n.weekday}))}function sK(e,t){return`${t}.${te(e,2)}`}function iK(e,t,n){return IS(n.getDateParts(n.toDate(e)),Zq[t])}function CS({day:e,week:t,month:n,year:s},i,r,o){if(r==="daily"&&e){const a=new Date(s,n-1,e),l=an(a,i);return{day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()}}else if(r==="weekly"&&t){const l=o.getMonthParts(n,s).firstDayOfMonth,c=an(l,(t-1+i)*7),u=o.getDateParts(c);return{week:u.week,month:u.month,year:u.year}}else{const a=new Date(s,n-1,1),l=Ju(a,i);return{month:l.getMonth()+1,year:l.getFullYear()}}}function os(e){return e!=null&&e.month!=null&&e.year!=null}function sp(e,t){return!os(e)||!os(t)?!1:(e=e,t=t,e.year!==t.year?e.year<t.year:e.month&&t.month&&e.month!==t.month?e.month<t.month:e.week&&t.week&&e.week!==t.week?e.week<t.week:e.day&&t.day&&e.day!==t.day?e.day<t.day:!1)}function Zu(e,t){return!os(e)||!os(t)?!1:(e=e,t=t,e.year!==t.year?e.year>t.year:e.month&&t.month&&e.month!==t.month?e.month>t.month:e.week&&t.week&&e.week!==t.week?e.week>t.week:e.day&&t.day&&e.day!==t.day?e.day>t.day:!1)}function rK(e,t,n){return(e||!1)&&!sp(e,t)&&!Zu(e,n)}function oK(e,t){return!e&&t||e&&!t?!1:!e&&!t?!0:(e=e,t=t,e.year===t.year&&e.month===t.month&&e.week===t.week&&e.day===t.day)}function aK(e,t,n,s){if(!os(e)||!os(t))return[];const i=[];for(;!Zu(e,t);)i.push(e),e=CS(e,1,n,s);return i}function xS(e){const{day:t,week:n,month:s,year:i}=e;let r=`${i}-${te(s,2)}`;return n&&(r=`${r}-w${n}`),t&&(r=`${r}-${te(t,2)}`),r}function lK(e,t){const{month:n,year:s,showWeeknumbers:i,showIsoWeeknumbers:r}=e,o=new Date(s,n-1,15),a=t.getMonthParts(n,s),l=t.getPrevMonthParts(n,s),c=t.getNextMonthParts(n,s),u=tK({monthComps:a,prevMonthComps:l,nextMonthComps:c},t),f=eK(u,i,r,t),d=nK(f[0],t);return{id:xS(e),month:n,year:s,monthTitle:t.formatDate(o,t.masks.title),shortMonthLabel:t.formatDate(o,"MMM"),monthLabel:t.formatDate(o,"MMMM"),shortYearLabel:s.toString().substring(2),yearLabel:s.toString(),monthComps:a,prevMonthComps:l,nextMonthComps:c,days:u,weeks:f,weekdays:d}}function cK(e,t){const{day:n,week:s,view:i,trimWeeks:r}=e,o={...t,...e,title:"",viewDays:[],viewWeeks:[]};switch(i){case"daily":{let a=o.days.find(c=>c.inMonth);n?a=o.days.find(c=>c.day===n&&c.inMonth)||a:s&&(a=o.days.find(c=>c.week===s&&c.inMonth));const l=o.weeks[a.week-1];o.viewWeeks=[l],o.viewDays=[a],o.week=a.week,o.weekTitle=l.title,o.day=a.day,o.dayTitle=a.ariaLabel,o.title=o.dayTitle;break}case"weekly":{o.week=s||1;const a=o.weeks[o.week-1];o.viewWeeks=[a],o.viewDays=a.days,o.weekTitle=a.title,o.title=o.weekTitle;break}default:{o.title=o.monthTitle,o.viewWeeks=o.weeks.slice(0,r?o.monthComps.numWeeks:void 0),o.viewDays=o.days;break}}return o}class $0{constructor(t,n,s){_t(this,"keys",[]),_t(this,"store",{}),this.size=t,this.createKey=n,this.createItem=s}get(...t){const n=this.createKey(...t);return this.store[n]}getOrSet(...t){const n=this.createKey(...t);if(this.store[n])return this.store[n];const s=this.createItem(...t);if(this.keys.length>=this.size){const i=this.keys.shift();i!=null&&delete this.store[i]}return this.keys.push(n),this.store[n]=s,s}}class vo{constructor(t,n=new th){_t(this,"order"),_t(this,"locale"),_t(this,"start",null),_t(this,"end",null),_t(this,"repeat",null);var s;this.locale=n;const{start:i,end:r,span:o,order:a,repeat:l}=t;ep(i)&&(this.start=n.getDateParts(i)),ep(r)?this.end=n.getDateParts(r):this.start!=null&&o&&(this.end=n.getDateParts(an(this.start.date,o-1))),this.order=a??0,l&&(this.repeat=new eh({from:(s=this.start)==null?void 0:s.date,...l},{locale:this.locale}))}static fromMany(t,n){return(gs(t)?t:[t]).filter(s=>s).map(s=>vo.from(s,n))}static from(t,n){if(t instanceof vo)return t;const s={start:null,end:null};return t!=null&&(gs(t)?(s.start=t[0]??null,s.end=t[1]??null):Cr(t)?Object.assign(s,t):(s.start=t,s.end=t)),s.start!=null&&(s.start=new Date(s.start)),s.end!=null&&(s.end=new Date(s.end)),new vo(s,n)}get opts(){const{order:t,locale:n}=this;return{order:t,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:t,end:n}=this;return t&&n&&t.year===n.year&&t.month===n.month&&t.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(t){var n,s;return((n=this.start)==null?void 0:n.dayIndex)===t.dayIndex||!!((s=this.repeat)!=null&&s.passes(t))}intersectsDay(t){return this.intersectsDayRange(t,t)}intersectsRange(t){var n,s;return this.intersectsDayRange(((n=t.start)==null?void 0:n.dayIndex)??-1/0,((s=t.end)==null?void 0:s.dayIndex)??1/0)}intersectsDayRange(t,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<t)}}class uK{constructor(){_t(this,"records",{})}render(t,n,s){var i,r,o,a;let l=null;const c=s[0].dayIndex,u=s[s.length-1].dayIndex;return n.hasRepeat?s.forEach(f=>{var d,p;if(n.startsOnDay(f)){const m=n.daySpan<1/0?n.daySpan:1;l={startDay:f.dayIndex,startTime:((d=n.start)==null?void 0:d.time)??0,endDay:f.dayIndex+m-1,endTime:((p=n.end)==null?void 0:p.time)??ou},this.getRangeRecords(t).push(l)}}):n.intersectsDayRange(c,u)&&(l={startDay:((i=n.start)==null?void 0:i.dayIndex)??-1/0,startTime:((r=n.start)==null?void 0:r.time)??-1/0,endDay:((o=n.end)==null?void 0:o.dayIndex)??1/0,endTime:((a=n.end)==null?void 0:a.time)??1/0},this.getRangeRecords(t).push(l)),l}getRangeRecords(t){let n=this.records[t.key];return n||(n={ranges:[],data:t},this.records[t.key]=n),n.ranges}getCell(t,n){return this.getCells(n).find(r=>r.data.key===t)}cellExists(t,n){const s=this.records[t];return s==null?!1:s.ranges.some(i=>i.startDay<=n&&i.endDay>=n)}getCells(t){const n=Object.values(this.records),s=[],{dayIndex:i}=t;return n.forEach(({data:r,ranges:o})=>{o.filter(a=>a.startDay<=i&&a.endDay>=i).forEach(a=>{const l=i===a.startDay,c=i===a.endDay,u=l?a.startTime:0,f=new Date(t.startDate.getTime()+u),d=c?a.endTime:ou,p=new Date(t.endDate.getTime()+d),m=u===0&&d===ou,_=r.order||0;s.push({...a,data:r,onStart:l,onEnd:c,startTime:u,startDate:f,endTime:d,endDate:p,allDay:m,order:_})})}),s.sort((r,o)=>r.order-o.order),s}}const Xs={ar:{dow:7,L:"D/M/YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYYMD"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};Xs.en=Xs["en-US"];Xs.es=Xs["es-ES"];Xs.no=Xs.nb;Xs.zh=Xs["zh-CN"];const hK=Object.entries(Xs).reduce((e,[t,{dow:n,L:s}])=>(e[t]={id:t,firstDayOfWeek:n,masks:{L:s}},e),{}),fK="MMMM YYYY",dK="W",pK="MMM",gK="h A",mK=["L","YYYY-MM-DD","YYYY/MM/DD"],vK=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],_K=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],yK=["h:mm A"],bK=["HH:mm"],wK="WWW, MMM D, YYYY",TK=["L","YYYY-MM-DD","YYYY/MM/DD"],EK="iso",IK="YYYY-MM-DDTHH:mm:ss.SSSZ",SK={title:fK,weekdays:dK,navMonths:pK,hours:gK,input:mK,inputDateTime:vK,inputDateTime24hr:_K,inputTime:yK,inputTime24hr:bK,dayPopover:wK,data:TK,model:EK,iso:IK},AK=300,CK=60,xK=80,PK={maxSwipeTime:AK,minHorizontalSwipeDistance:CK,maxVerticalSwipeDistance:xK},kK={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:PK,masks:SK,locales:hK,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},ip=$o(kK),DK=G(()=>X7(ip.locales,e=>(e.masks=qu(e.masks,ip.masks),e))),Dl=e=>typeof window<"u"&&ES(window.__vcalendar__,e)?dr(window.__vcalendar__,e):dr(ip,e),RK=12,MK=5;function OK(e,t){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let s;Bs(e)?s=e:ES(e,"id")&&(s=e.id),s=(s||n).toLowerCase();const i=Object.keys(t),r=l=>i.find(c=>c.toLowerCase()===l);s=r(s)||r(s.substring(0,2))||n;const o={...t["en-IE"],...t[s],id:s,monthCacheSize:RK,pageCacheSize:MK};return Cr(e)?qu(e,o):o}class th{constructor(t=void 0,n){_t(this,"id"),_t(this,"daysInWeek"),_t(this,"firstDayOfWeek"),_t(this,"masks"),_t(this,"timezone"),_t(this,"hourLabels"),_t(this,"dayNames"),_t(this,"dayNamesShort"),_t(this,"dayNamesShorter"),_t(this,"dayNamesNarrow"),_t(this,"monthNames"),_t(this,"monthNamesShort"),_t(this,"relativeTimeNames"),_t(this,"amPm",["am","pm"]),_t(this,"monthCache"),_t(this,"pageCache");const{id:s,firstDayOfWeek:i,masks:r,monthCacheSize:o,pageCacheSize:a}=OK(t,DK.value);this.monthCache=new $0(o,iG,rG),this.pageCache=new $0(a,xS,lK),this.id=s,this.daysInWeek=We,this.firstDayOfWeek=pq(i,1,We),this.masks=r,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=Xf("long",this.id),this.dayNamesShort=Xf("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(l=>l.substring(0,2)),this.dayNamesNarrow=Xf("narrow",this.id),this.monthNames=z0("long",this.id),this.monthNamesShort=z0("short",this.id),this.relativeTimeNames=lG(this.id)}formatDate(t,n){return dG(t,n,this)}parseDate(t,n){return W0(t,n,this)}toDate(t,n={}){const s=new Date(NaN);let i=s;const{fillDate:r,mask:o,patch:a,rules:l}=n;if(ys(t)?(n.type="number",i=new Date(+t)):Bs(t)?(n.type="string",i=t?W0(t,o||"iso",this):s):ep(t)?(n.type="date",i=new Date(t.getTime())):tG(t)&&(n.type="object",i=this.getDateFromParts(t)),i&&(a||l)){let c=this.getDateParts(i);if(a&&r!=null){const u=this.getDateParts(this.toDate(r));c=this.getDateParts(this.toDate({...u,...IS(c,YK[a])}))}l&&(c=fG(c,l)),i=this.getDateFromParts(c)}return i||s}toDateOrNull(t,n={}){const s=this.toDate(t,n);return isNaN(s.getTime())?null:s}fromDate(t,{type:n,mask:s}={}){switch(n){case"number":return t?t.getTime():NaN;case"string":return t?this.formatDate(t,s||"iso"):"";case"object":return t?this.getDateParts(t):null;default:return t?new Date(t):null}}range(t){return vo.from(t,this)}ranges(t){return vo.fromMany(t,this)}getDateParts(t){return sG(t,this)}getDateFromParts(t){return FS(t,this.timezone)}getDateFromParams(t,n,s,i,r,o,a){return this.getDateFromParts({year:t,month:n,day:s,hours:i,minutes:r,seconds:o,milliseconds:a})}getPage(t){const n=this.pageCache.getOrSet(t,this);return cK(t,n)}getMonthParts(t,n){const{firstDayOfWeek:s}=this;return this.monthCache.getOrSet(t,n,s)}getThisMonthParts(){const t=new Date;return this.getMonthParts(t.getMonth()+1,t.getFullYear())}getPrevMonthParts(t,n){return t===1?this.getMonthParts(12,n-1):this.getMonthParts(t-1,n)}getNextMonthParts(t,n){return t===12?this.getMonthParts(1,n+1):this.getMonthParts(t+1,n)}getHourLabels(){return aG().map(t=>this.formatDate(t,this.masks.hours))}getDayId(t){return this.formatDate(t,"YYYY-MM-DD")}}var no=(e=>(e.Any="any",e.All="all",e))(no||{}),PS=(e=>(e.Days="days",e.Weeks="weeks",e.Months="months",e.Years="years",e))(PS||{}),kS=(e=>(e.Days="days",e.Weekdays="weekdays",e.Weeks="weeks",e.Months="months",e.Years="years",e))(kS||{}),DS=(e=>(e.OrdinalWeekdays="ordinalWeekdays",e))(DS||{});class NK{constructor(t,n,s){_t(this,"validated",!0),this.type=t,this.interval=n,this.from=s,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(t){if(!this.validated)return!0;const{date:n}=t;switch(this.type){case"days":return nm(this.from.date,n)%this.interval===0;case"weeks":return eG(this.from.date,n)%this.interval===0;case"months":return nG(this.from.date,n)%this.interval===0;case"years":return $S(this.from.date,n)%this.interval===0;default:return!1}}}class ea{constructor(t,n,s,i){_t(this,"components",[]),this.type=t,this.validator=s,this.getter=i,this.components=this.normalizeComponents(n)}static create(t,n){switch(t){case"days":return new LK(n);case"weekdays":return new VK(n);case"weeks":return new $K(n);case"months":return new FK(n);case"years":return new BK(n)}}normalizeComponents(t){if(this.validator(t))return[t];if(!gs(t))return[];const n=[];return t.forEach(s=>{if(!this.validator(s)){console.error(`Component value ${s} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(s)}),n}passes(t){return this.getter(t).some(i=>this.components.includes(i))}}class LK extends ea{constructor(t){super("days",t,jK,({day:n,dayFromEnd:s})=>[n,-s])}}class VK extends ea{constructor(t){super("weekdays",t,rp,({weekday:n})=>[n])}}class $K extends ea{constructor(t){super("weeks",t,zK,({week:n,weekFromEnd:s})=>[n,-s])}}class FK extends ea{constructor(t){super("months",t,WK,({month:n})=>[n])}}class BK extends ea{constructor(t){super("years",t,ys,({year:n})=>[n])}}class UK{constructor(t,n){_t(this,"components"),this.type=t,this.components=this.normalizeComponents(n)}normalizeArrayConfig(t){const n=[];return t.forEach((s,i)=>{if(ys(s)){if(i===0)return;if(!F0(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!rp(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else gs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}normalizeComponents(t){const n=[];return t.forEach((s,i)=>{if(ys(s)){if(i===0)return;if(!F0(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!rp(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],s])}else gs(s)&&n.push(...this.normalizeArrayConfig(s))}),n}passes(t){const{weekday:n,weekdayOrdinal:s,weekdayOrdinalFromEnd:i}=t;return this.components.some(([r,o])=>(r===s||r===-i)&&n===o)}}class HK{constructor(t){_t(this,"type","function"),_t(this,"validated",!0),this.fn=t,Lr(t)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(t){return this.validated?this.fn(t):!0}}class eh{constructor(t,n={},s){_t(this,"validated",!0),_t(this,"config"),_t(this,"type",no.Any),_t(this,"from"),_t(this,"until"),_t(this,"rules",[]),_t(this,"locale",new th),this.parent=s,n.locale&&(this.locale=n.locale),this.config=t,Lr(t)?(this.type=no.All,this.rules=[new HK(t)]):gs(t)?(this.type=no.Any,this.rules=t.map(i=>new eh(i,n,this))):Cr(t)?(this.type=no.All,this.from=t.from?this.locale.getDateParts(t.from):s==null?void 0:s.from,this.until=t.until?this.locale.getDateParts(t.until):s==null?void 0:s.until,this.rules=this.getObjectRules(t)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(t){const n=[];if(t.every&&(Bs(t.every)&&(t.every=[1,`${t.every}s`]),gs(t.every))){const[s=1,i=PS.Days]=t.every;n.push(new NK(i,s,this.from))}return Object.values(kS).forEach(s=>{s in t&&n.push(ea.create(s,t[s]))}),Object.values(DS).forEach(s=>{s in t&&n.push(new UK(s,t[s]))}),t.on!=null&&(gs(t.on)||(t.on=[t.on]),n.push(new eh(t.on,{locale:this.locale},this.parent))),n}passes(t){return this.validated?this.from&&t.dayIndex<=this.from.dayIndex||this.until&&t.dayIndex>=this.until.dayIndex?!1:this.type===no.Any?this.rules.some(n=>n.passes(t)):this.rules.every(n=>n.passes(t)):!0}}function jK(e){return ys(e)?e>=1&&e<=31:!1}function rp(e){return ys(e)?e>=1&&e<=7:!1}function zK(e){return ys(e)?e>=-6&&e<=-1||e>=1&&e<=6:!1}function WK(e){return ys(e)?e>=1&&e<=12:!1}function F0(e){return!(!ys(e)||e<-5||e>5||e===0)}const YK={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},We=7,qK=6,RS=1e3,MS=RS*60,OS=MS*60,ou=OS*24,KK=[31,28,31,30,31,30,31,31,30,31,30,31],GK=["L","iso"],XK={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},NS=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,QK=/\[([^]*?)\]/gm,B0={D(e){return e.day},DD(e){return te(e.day,2)},d(e){return e.weekday-1},dd(e){return te(e.weekday-1,2)},W(e,t){return t.dayNamesNarrow[e.weekday-1]},WW(e,t){return t.dayNamesShorter[e.weekday-1]},WWW(e,t){return t.dayNamesShort[e.weekday-1]},WWWW(e,t){return t.dayNames[e.weekday-1]},M(e){return e.month},MM(e){return te(e.month,2)},MMM(e,t){return t.monthNamesShort[e.month-1]},MMMM(e,t){return t.monthNames[e.month-1]},YY(e){return String(e.year).substr(2)},YYYY(e){return te(e.year,4)},h(e){return e.hours%12||12},hh(e){return te(e.hours%12||12,2)},H(e){return e.hours},HH(e){return te(e.hours,2)},m(e){return e.minutes},mm(e){return te(e.minutes,2)},s(e){return e.seconds},ss(e){return te(e.seconds,2)},S(e){return Math.round(e.milliseconds/100)},SS(e){return te(Math.round(e.milliseconds/10),2)},SSS(e){return te(e.milliseconds,3)},a(e,t){return e.hours<12?t.amPm[0]:t.amPm[1]},A(e,t){return e.hours<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${te(Math.floor(Math.abs(t)/60),2)}`},ZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${te(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)}`},ZZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${te(Math.floor(Math.abs(t)/60),2)}:${te(Math.abs(t)%60,2)}`}},ci=/\d\d?/,JK=/\d{3}/,ZK=/\d{4}/,wa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,U0=()=>{},H0=e=>(t,n,s)=>{const i=s[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(t.month=i)},re={D:[ci,(e,t)=>{e.day=t}],Do:[new RegExp(ci.source+wa.source),(e,t)=>{e.day=parseInt(t,10)}],d:[ci,U0],W:[wa,U0],M:[ci,(e,t)=>{e.month=t-1}],MMM:[wa,H0("monthNamesShort")],MMMM:[wa,H0("monthNames")],YY:[ci,(e,t)=>{const s=+new Date().getFullYear().toString().substr(0,2);e.year=+`${t>68?s-1:s}${t}`}],YYYY:[ZK,(e,t)=>{e.year=t}],S:[/\d/,(e,t)=>{e.milliseconds=t*100}],SS:[/\d{2}/,(e,t)=>{e.milliseconds=t*10}],SSS:[JK,(e,t)=>{e.milliseconds=t}],h:[ci,(e,t)=>{e.hours=t}],m:[ci,(e,t)=>{e.minutes=t}],s:[ci,(e,t)=>{e.seconds=t}],a:[wa,(e,t,n)=>{const s=t.toLowerCase();s===n.amPm[0]?e.isPm=!1:s===n.amPm[1]&&(e.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(e,t)=>{t==="Z"&&(t="+00:00");const n=`${t}`.match(/([+-]|\d\d)/gi);if(n){const s=+n[1]*60+parseInt(n[2],10);e.timezoneOffset=n[0]==="+"?s:-s}}]};re.DD=re.D;re.dd=re.d;re.WWWW=re.WWW=re.WW=re.W;re.MM=re.M;re.mm=re.m;re.hh=re.H=re.HH=re.h;re.ss=re.s;re.A=re.a;re.ZZZZ=re.ZZZ=re.ZZ=re.Z;function LS(e,t){return(pr(e)&&e||[Bs(e)&&e||"YYYY-MM-DD"]).map(n=>GK.reduce((s,i)=>s.replace(i,t.masks[i]||""),n))}function tG(e){return Cr(e)&&"year"in e&&"month"in e&&"day"in e}function j0(e,t=1){const n=e.getDay()+1,s=n>=t?t-n:-(7-(t-n));return an(e,s)}function VS(e,t,n){const s=Date.UTC(e,t-1,n);return nm(new Date(0),new Date(s))}function nm(e,t){return Math.round((t.getTime()-e.getTime())/ou)}function eG(e,t){return Math.ceil(nm(j0(e),j0(t))/7)}function $S(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}function nG(e,t){return $S(e,t)*12+(t.getMonth()-e.getMonth())}function FS(e,t=""){const n=new Date,{year:s=n.getFullYear(),month:i=n.getMonth()+1,day:r=n.getDate(),hours:o=0,minutes:a=0,seconds:l=0,milliseconds:c=0}=e;if(t){const u=`${te(s,4)}-${te(i,2)}-${te(r,2)}T${te(o,2)}:${te(a,2)}:${te(l,2)}.${te(c,3)}`;return Dq(u,{timeZone:t})}return new Date(s,i-1,r,o,a,l,c)}function sG(e,t){let n=new Date(e.getTime());t.timezone&&(n=new Date(e.toLocaleString("en-US",{timeZone:t.timezone})),n.setMilliseconds(e.getMilliseconds()));const s=n.getMilliseconds(),i=n.getSeconds(),r=n.getMinutes(),o=n.getHours(),a=s+i*RS+r*MS+o*OS,l=n.getMonth()+1,c=n.getFullYear(),u=t.getMonthParts(l,c),f=n.getDate(),d=u.numDays-f+1,p=n.getDay()+1,m=Math.floor((f-1)/7+1),_=Math.floor((u.numDays-f)/7+1),y=Math.ceil((f+Math.abs(u.firstWeekday-u.firstDayOfWeek))/7),T=u.numWeeks-y+1,R=u.weeknumbers[y],D=VS(c,l,f);return{milliseconds:s,seconds:i,minutes:r,hours:o,time:a,day:f,dayFromEnd:d,weekday:p,weekdayOrdinal:m,weekdayOrdinalFromEnd:_,week:y,weekFromEnd:T,weeknumber:R,month:l,year:c,date:n,dateTime:n.getTime(),dayIndex:D,timezoneOffset:0,isValid:!0}}function iG(e,t,n){return`${t}-${e}-${n}`}function rG(e,t,n){const s=t%4===0&&t%100!==0||t%400===0,i=new Date(t,e-1,1),r=i.getDay()+1,o=e===2&&s?29:KK[e-1],a=n-1,l=zq(i,{weekStartsOn:a}),c=[],u=[];for(let f=0;f<l;f++){const d=an(i,f*7);c.push(Kq(d,{weekStartsOn:a})),u.push(Jq(d))}return{firstDayOfWeek:n,firstDayOfMonth:i,inLeapYear:s,firstWeekday:r,numDays:o,numWeeks:l,month:e,year:t,weeknumbers:c,isoWeeknumbers:u}}function oG(){const e=[];for(let i=0;i<We;i++)e.push(FS({year:2020,month:1,day:5+i,hours:12}));return e}function Xf(e,t=void 0){const n=new Intl.DateTimeFormat(t,{weekday:e});return oG().map(s=>n.format(s))}function aG(){const e=[];for(let t=0;t<=24;t++)e.push(new Date(2e3,0,1,t));return e}function lG(e=void 0){const t=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(e);return t.reduce((s,i)=>{const r=n.formatToParts(100,i);return s[i]=r[1].unit,s},{})}function BS(){const e=[];for(let t=0;t<12;t++)e.push(new Date(2e3,t,15));return e}function z0(e,t=void 0){const n=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return BS().map(s=>n.format(s))}function cG(e,t,n){return ys(t)?t===e:gs(t)?t.includes(e):Lr(t)?t(e,n):!(t.min!=null&&t.min>e||t.max!=null&&t.max<e||t.interval!=null&&e%t.interval!==0)}function uG(e,t,n){const s=[],[i,r,o]=t;for(let a=i;a<=r;a++)(n==null||cG(a,n,e))&&s.push({value:a,label:te(a,o)});return s}function hG(e,t,n,s){const r=uG(e,t,s).reduce((o,a)=>{if(a.disabled)return o;if(isNaN(o))return a.value;const l=Math.abs(o-n);return Math.abs(a.value-n)<l?a.value:o},NaN);return isNaN(r)?n:r}function fG(e,t){const n={...e};return Object.entries(t).forEach(([s,i])=>{const r=XK[s],o=e[s];n[s]=hG(e,r,o,i)}),n}function W0(e,t,n){return LS(t,n).map(i=>{if(typeof i!="string")throw new Error("Invalid mask");let r=e;if(r.length>1e3)return!1;let o=!0;const a={};if(i.replace(NS,u=>{if(re[u]){const f=re[u],d=r.search(f[0]);~d?r.replace(f[0],p=>(f[1](a,p,n),r=r.substr(d+p.length),p)):o=!1}return re[u]?"":u.slice(1,u.length-1)}),!o)return!1;const l=new Date;a.hours!=null&&(a.isPm===!0&&+a.hours!=12?a.hours=+a.hours+12:a.isPm===!1&&+a.hours==12&&(a.hours=0));let c;return a.timezoneOffset!=null?(a.minutes=+(a.minutes||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hours||0,a.minutes||0,a.seconds||0,a.milliseconds||0))):c=n.getDateFromParts({year:a.year||l.getFullYear(),month:(a.month||0)+1,day:a.day||1,hours:a.hours||0,minutes:a.minutes||0,seconds:a.seconds||0,milliseconds:a.milliseconds||0}),c}).find(i=>i)||new Date(e)}function dG(e,t,n){if(e==null)return"";let s=LS(t,n)[0];/Z$/.test(s)&&(n.timezone="utc");const i=[];s=s.replace(QK,(o,a)=>(i.push(a),"??"));const r=n.getDateParts(e);return s=s.replace(NS,o=>o in B0?B0[o](r,n):o.slice(1,o.length-1)),s.replace(/\?\?/g,()=>i.shift())}let pG=0;class US{constructor(t,n,s){_t(this,"key",""),_t(this,"hashcode",""),_t(this,"highlight",null),_t(this,"content",null),_t(this,"dot",null),_t(this,"bar",null),_t(this,"event",null),_t(this,"popover",null),_t(this,"customData",null),_t(this,"ranges"),_t(this,"hasRanges",!1),_t(this,"order",0),_t(this,"pinPage",!1),_t(this,"maxRepeatSpan",0),_t(this,"locale");const{dates:i}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},t);this.key||(this.key=++pG),this.locale=s,n.normalizeGlyphs(this),this.ranges=s.ranges(i??[]),this.hasRanges=!!pr(this.ranges),this.maxRepeatSpan=this.ranges.filter(r=>r.hasRepeat).map(r=>r.daySpan).reduce((r,o)=>Math.max(r,o),0)}intersectsRange({start:t,end:n}){if(t==null||n==null)return!1;const s=this.ranges.filter(o=>!o.hasRepeat);for(const o of s)if(o.intersectsDayRange(t.dayIndex,n.dayIndex))return!0;const i=this.ranges.filter(o=>o.hasRepeat);if(!i.length)return!1;let r=t;for(this.maxRepeatSpan>1&&(r=this.locale.getDateParts(an(r.date,-this.maxRepeatSpan)));r.dayIndex<=n.dayIndex;){for(const o of i)if(o.startsOnDay(r))return!0;r=this.locale.getDateParts(an(r.date,1))}return!1}}function Y0(e){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:e}))}function nh(e){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:e}))}function gG(e){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:e}))}function mG(e){const{visibility:t}=e,n=t==="click",s=t==="hover",i=t==="hover-focus",r=t==="focus";e.autoHide=!n;let o=!1,a=!1;const l=m=>{n&&(gG({...e,target:e.target||m.currentTarget}),m.stopPropagation())},c=m=>{o||(o=!0,(s||i)&&Y0({...e,target:e.target||m.currentTarget}))},u=()=>{o&&(o=!1,(s||i&&!a)&&nh(e))},f=m=>{a||(a=!0,(r||i)&&Y0({...e,target:e.target||m.currentTarget}))},d=m=>{a&&!iu(m.currentTarget,m.relatedTarget)&&(a=!1,(r||i&&!o)&&nh(e))},p={};switch(e.visibility){case"click":p.click=l;break;case"hover":p.mousemove=c,p.mouseleave=u;break;case"focus":p.focusin=f,p.focusout=d;break;case"hover-focus":p.mousemove=c,p.mouseleave=u,p.focusin=f,p.focusout=d;break}return p}const q0=e=>{const t=Ku(e);if(t==null)return;const n=t.popoverHandlers;!n||!n.length||(n.forEach(s=>s()),delete t.popoverHandlers)},K0=(e,t)=>{const n=Ku(e);if(n==null)return;const s=[],i=mG(t);Object.entries(i).forEach(([r,o])=>{s.push(wi(n,r,o))}),n.popoverHandlers=s},HS={mounted(e,t){const{value:n}=t;n&&K0(e,n)},updated(e,t){const{oldValue:n,value:s}=t,i=n==null?void 0:n.visibility,r=s==null?void 0:s.visibility;i!==r&&(i&&(q0(e),r||nh(n)),r&&K0(e,s))},unmounted(e){q0(e)}},vG=(e,t,{maxSwipeTime:n,minHorizontalSwipeDistance:s,maxVerticalSwipeDistance:i})=>{if(!e||!e.addEventListener||!Lr(t))return null;let r=0,o=0,a=null,l=!1;function c(f){const d=f.changedTouches[0];r=d.screenX,o=d.screenY,a=new Date().getTime(),l=!0}function u(f){if(!l||!a)return;l=!1;const d=f.changedTouches[0],p=d.screenX-r,m=d.screenY-o;if(new Date().getTime()-a<n&&Math.abs(p)>=s&&Math.abs(m)<=i){const y={toLeft:!1,toRight:!1};p<0?y.toLeft=!0:y.toRight=!0,t(y)}}return wi(e,"touchstart",c,{passive:!0}),wi(e,"touchend",u,{passive:!0}),()=>{bi(e,"touchstart",c),bi(e,"touchend",u)}},au={},_G=(e,t=10)=>{au[e]=Date.now()+t},yG=(e,t)=>{if(e in au){const n=au[e];if(Date.now()<n)return;delete au[e]}t()};function jS(){return typeof window<"u"}function bG(e){return jS()&&e in window}function wG(e){const t=$t(!1),n=G(()=>t.value?"dark":"light");let s,i;function r(p){t.value=p.matches}function o(){bG("matchMedia")&&(s=window.matchMedia("(prefers-color-scheme: dark)"),s.addEventListener("change",r),t.value=s.matches)}function a(){const{selector:p=":root",darkClass:m="dark"}=e.value,_=document.querySelector(p);t.value=_.classList.contains(m)}function l(p){const{selector:m=":root",darkClass:_="dark"}=p;if(jS()&&m&&_){const y=document.querySelector(m);y&&(i=new MutationObserver(a),i.observe(y,{attributes:!0,attributeFilter:["class"]}),t.value=y.classList.contains(_))}}function c(){f();const p=typeof e.value;p==="string"&&e.value.toLowerCase()==="system"?o():p==="object"?l(e.value):t.value=!!e.value}const u=ln(()=>e.value,()=>c(),{immediate:!0});function f(){s&&(s.removeEventListener("change",r),s=void 0),i&&(i.disconnect(),i=void 0)}function d(){f(),u()}return Fo(()=>d()),{isDark:t,displayMode:n,cleanup:d}}const TG=["base","start","end","startEnd"],EG=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],IG={base:{},start:{},end:{}};function sm(e,t,n=IG){let s=e,i={};t===!0||Bs(t)?(s=Bs(t)?t:s,i={...n}):Cr(t)&&(C0(t,TG)?i={...t}:i={base:{...t},start:{...t},end:{...t}});const r=qu(i,{start:i.startEnd,end:i.startEnd},n);return Object.entries(r).forEach(([o,a])=>{let l=s;a===!0||Bs(a)?(l=Bs(a)?a:l,r[o]={color:l}):Cr(a)&&(C0(a,EG)?r[o]={...a}:r[o]={}),qu(r[o],{color:l})}),r}class SG{constructor(){_t(this,"type","highlight")}normalizeConfig(t,n){return sm(t,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(t){t.highlights=[],t.content||(t.content=[])}render({data:t,onStart:n,onEnd:s},i){const{key:r,highlight:o}=t;if(!o)return;const{highlights:a}=i,{base:l,start:c,end:u}=o;n&&s?a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]}):n?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]})):s?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...u,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${u.color}`,class:[`vc-highlight vc-highlight-bg-${u.fillMode}`,u.class],contentClass:[`vc-attr vc-highlight-content-${u.fillMode} vc-${u.color}`,u.contentClass]})):a.push({...l,key:`${r}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${l.fillMode}`,l.class],contentClass:[`vc-attr vc-highlight-content-${l.fillMode} vc-${l.color}`,l.contentClass]})}}class im{constructor(t,n){_t(this,"type",""),_t(this,"collectionType",""),this.type=t,this.collectionType=n}normalizeConfig(t,n){return sm(t,n)}prepareRender(t){t[this.collectionType]=[]}render({data:t,onStart:n,onEnd:s},i){const{key:r}=t,o=t[this.type];if(!r||!o)return;const a=i[this.collectionType],{base:l,start:c,end:u}=o;n?a.push({...c,key:r,class:[`vc-${this.type} vc-${this.type}-start vc-${c.color} vc-attr`,c.class]}):s?a.push({...u,key:r,class:[`vc-${this.type} vc-${this.type}-end vc-${u.color} vc-attr`,u.class]}):a.push({...l,key:r,class:[`vc-${this.type} vc-${this.type}-base vc-${l.color} vc-attr`,l.class]})}}class AG extends im{constructor(){super("content","content")}normalizeConfig(t,n){return sm("base",n)}}class CG extends im{constructor(){super("dot","dots")}}class xG extends im{constructor(){super("bar","bars")}}class PG{constructor(t){_t(this,"color"),_t(this,"renderers",[new AG,new SG,new CG,new xG]),this.color=t}normalizeGlyphs(t){this.renderers.forEach(n=>{const s=n.type;t[s]!=null&&(t[s]=n.normalizeConfig(this.color,t[s]))})}prepareRender(t={}){return this.renderers.forEach(n=>{n.prepareRender(t)}),t}render(t,n){this.renderers.forEach(s=>{s.render(t,n)})}}const zS=Symbol("__vc_base_context__"),kG={color:{type:String,default:()=>Dl("color")},isDark:{type:[Boolean,String,Object],default:()=>Dl("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function DG(e){const t=G(()=>e.color??""),n=G(()=>e.isDark??!1),{displayMode:s}=wG(n),i=G(()=>new PG(t.value)),r=G(()=>{if(e.locale instanceof th)return e.locale;const d=Cr(e.locale)?e.locale:{id:e.locale,firstDayOfWeek:e.firstDayOfWeek,masks:e.masks};return new th(d,e.timezone)}),o=G(()=>r.value.masks),a=G(()=>e.minDate),l=G(()=>e.maxDate),c=G(()=>{const d=e.disabledDates?[...e.disabledDates]:[];return a.value!=null&&d.push({start:null,end:an(r.value.toDate(a.value),-1)}),l.value!=null&&d.push({start:an(r.value.toDate(l.value),1),end:null}),r.value.ranges(d)}),u=G(()=>new US({key:"disabled",dates:c.value,order:100},i.value,r.value)),f={color:t,isDark:n,displayMode:s,theme:i,locale:r,masks:o,minDate:a,maxDate:l,disabledDates:c,disabledAttribute:u};return Si(zS,f),f}function RG(e){return mn(zS,()=>DG(e),!0)}function WS(e){return`__vc_slot_${e}__`}function MG(e,t={}){Object.keys(e).forEach(n=>{Si(WS(t[n]??n),e[n])})}function YS(e){return mn(WS(e),null)}const OG={...kG,view:{type:String,default:"monthly",validator(e){return["daily","weekly","monthly"].includes(e)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>Dl("titlePosition")},navVisibility:{type:String,default:()=>Dl("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},NG=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],qS=Symbol("__vc_calendar_context__");function LG(e,{slots:t,emit:n}){const s=$t(null),i=$t(null),r=$t(new Date().getDate()),o=$t(!1),a=$t(Symbol()),l=$t(Symbol()),c=$t(e.view),u=$t([]),f=$t("");let d=null,p=null;MG(t);const{theme:m,color:_,displayMode:y,locale:T,masks:R,minDate:D,maxDate:k,disabledAttribute:O,disabledDates:L}=RG(e),E=G(()=>e.rows*e.columns),b=G(()=>e.step||E.value),w=G(()=>TS(u.value)??null),A=G(()=>io(u.value)??null),x=G(()=>e.minPage||(D.value?et(D.value):null)),C=G(()=>e.maxPage||(k.value?et(k.value):null)),S=G(()=>e.navVisibility),dt=G(()=>!!e.showWeeknumbers),Q=G(()=>!!e.showIsoWeeknumbers),at=G(()=>c.value==="monthly"),ot=G(()=>c.value==="weekly"),mt=G(()=>c.value==="daily"),Nt=()=>{o.value=!0,n("transition-start")},z=()=>{o.value=!1,n("transition-end"),d&&(d.resolve(!0),d=null)},At=(Y,tt,Ct=c.value)=>CS(Y,tt,Ct,T.value),et=Y=>iK(Y,c.value,T.value),Pt=Y=>{!O.value||!Z.value||(Y.isDisabled=Z.value.cellExists(O.value.key,Y.dayIndex))},Rt=Y=>{Y.isFocusable=Y.inMonth&&Y.day===r.value},Yt=(Y,tt)=>{for(const Ct of Y)for(const Kt of Ct.days)if(tt(Kt)===!1)return},Ht=G(()=>u.value.reduce((Y,tt)=>(Y.push(...tt.viewDays),Y),[])),F=G(()=>{const Y=[];return(e.attributes||[]).forEach((tt,Ct)=>{!tt||!tt.dates||Y.push(new US({...tt,order:tt.order||0},m.value,T.value))}),O.value&&Y.push(O.value),Y}),st=G(()=>pr(F.value)),Z=G(()=>{const Y=new uK;return F.value.forEach(tt=>{tt.ranges.forEach(Ct=>{Y.render(tt,Ct,Ht.value)})}),Y}),ct=G(()=>Ht.value.reduce((Y,tt)=>(Y[tt.dayIndex]={day:tt,cells:[]},Y[tt.dayIndex].cells.push(...Z.value.getCells(tt)),Y),{})),Ot=(Y,tt)=>{const Ct=e.showWeeknumbers||e.showIsoWeeknumbers;return Ct==null?"":R7(Ct)?Ct?"left":"":Ct.startsWith("right")?tt>1?"right":Ct:Y>1?"left":Ct},P=()=>{var Y,tt;if(!st.value)return null;const Ct=F.value.find(In=>In.pinPage)||F.value[0];if(!Ct||!Ct.hasRanges)return null;const[Kt]=Ct.ranges,fe=((Y=Kt.start)==null?void 0:Y.date)||((tt=Kt.end)==null?void 0:tt.date);return fe?et(fe):null},M=()=>{if(os(w.value))return w.value;const Y=P();return os(Y)?Y:et(new Date)},N=(Y,tt={})=>{const{view:Ct=c.value,position:Kt=1,force:fe}=tt,In=Kt>0?1-Kt:-(E.value+Kt);let Sn=At(Y,In,Ct),yn=At(Sn,E.value-1,Ct);return fe||(sp(Sn,x.value)?Sn=x.value:Zu(yn,C.value)&&(Sn=At(C.value,1-E.value)),yn=At(Sn,E.value-1)),{fromPage:Sn,toPage:yn}},B=(Y,tt,Ct="")=>{if(Ct==="none"||Ct==="fade")return Ct;if((Y==null?void 0:Y.view)!==(tt==null?void 0:tt.view))return"fade";const Kt=Zu(tt,Y),fe=sp(tt,Y);return!Kt&&!fe?"fade":Ct==="slide-v"?fe?"slide-down":"slide-up":fe?"slide-right":"slide-left"},H=(Y={})=>new Promise((tt,Ct)=>{const{position:Kt=1,force:fe=!1,transition:In}=Y,Sn=os(Y.page)?Y.page:M(),{fromPage:yn}=N(Sn,{position:Kt,force:fe}),Br=[];for(let Es=0;Es<E.value;Es++){const Xl=At(yn,Es),Is=Es+1,na=Math.ceil(Is/e.columns),Oe=e.rows-na+1,Ur=Is%e.columns||e.columns,ni=e.columns-Ur+1,qi=Ot(Ur,ni);Br.push(T.value.getPage({...Xl,view:c.value,titlePosition:e.titlePosition,trimWeeks:e.trimWeeks,position:Is,row:na,rowFromEnd:Oe,column:Ur,columnFromEnd:ni,showWeeknumbers:dt.value,showIsoWeeknumbers:Q.value,weeknumberPosition:qi}))}f.value=B(u.value[0],Br[0],In),u.value=Br,f.value&&f.value!=="none"?d={resolve:tt,reject:Ct}:tt(!0)}),U=Y=>{const tt=w.value??et(new Date);return At(tt,Y)},it=(Y,tt={})=>{const Ct=os(Y)?Y:et(Y);return Object.assign(tt,N(Ct,{...tt,force:!0})),aK(tt.fromPage,tt.toPage,c.value,T.value).map(fe=>rK(fe,x.value,C.value)).some(fe=>fe)},J=(Y,tt={})=>it(U(Y),tt),K=G(()=>J(-b.value)),W=G(()=>J(b.value)),pt=async(Y,tt={})=>!tt.force&&!it(Y,tt)?!1:(tt.fromPage&&!oK(tt.fromPage,w.value)&&(nh({id:a.value,hideDelay:0}),tt.view&&(_G("view",10),c.value=tt.view),await H({...tt,page:tt.fromPage,position:1,force:!0}),n("did-move",u.value)),!0),nt=(Y,tt={})=>pt(U(Y),tt),ht=()=>nt(-b.value),yt=()=>nt(b.value),vt=Y=>{const tt=at.value?".in-month":"",Ct=`.id-${T.value.getDayId(Y)}${tt}`,Kt=`${Ct}.vc-focusable, ${Ct} .vc-focusable`,fe=s.value;if(fe){const In=fe.querySelector(Kt);if(In)return In.focus(),!0}return!1},It=async(Y,tt={})=>vt(Y)?!0:(await pt(Y,tt),vt(Y)),Vt=(Y,tt)=>{r.value=Y.day,n("dayclick",Y,tt)},we=(Y,tt)=>{n("daymouseenter",Y,tt)},Te=(Y,tt)=>{n("daymouseleave",Y,tt)},un=(Y,tt)=>{r.value=Y.day,i.value=Y,Y.isFocused=!0,n("dayfocusin",Y,tt)},Ce=(Y,tt)=>{i.value=null,Y.isFocused=!1,n("dayfocusout",Y,tt)},Hn=(Y,tt)=>{n("daykeydown",Y,tt);const Ct=Y.noonDate;let Kt=null;switch(tt.key){case"ArrowLeft":{Kt=an(Ct,-1);break}case"ArrowRight":{Kt=an(Ct,1);break}case"ArrowUp":{Kt=an(Ct,-7);break}case"ArrowDown":{Kt=an(Ct,7);break}case"Home":{Kt=an(Ct,-Y.weekdayPosition+1);break}case"End":{Kt=an(Ct,Y.weekdayPositionFromEnd);break}case"PageUp":{tt.altKey?Kt=V0(Ct,-1):Kt=Ju(Ct,-1);break}case"PageDown":{tt.altKey?Kt=V0(Ct,1):Kt=Ju(Ct,1);break}}Kt&&(tt.preventDefault(),It(Kt).catch())},Yi=Y=>{const tt=i.value;tt!=null&&Hn(tt,Y)},Ee=(Y,tt)=>{n("weeknumberclick",Y,tt)};H({page:e.initialPage,position:e.initialPagePosition}),bs(()=>{!e.disablePageSwipe&&s.value&&(p=vG(s.value,({toLeft:Y=!1,toRight:tt=!1})=>{Y?yt():tt&&ht()},Dl("touch")))}),Fo(()=>{u.value=[],p&&p()}),ln(()=>T.value,()=>{H()}),ln(()=>E.value,()=>H()),ln(()=>e.view,()=>c.value=e.view),ln(()=>c.value,()=>{yG("view",()=>{H()}),n("update:view",c.value)}),ln(()=>r.value,()=>{Yt(u.value,Y=>Rt(Y))}),Qw(()=>{n("update:pages",u.value),Yt(u.value,Y=>{Pt(Y),Rt(Y)})});const sn={emit:n,containerRef:s,focusedDay:i,inTransition:o,navPopoverId:a,dayPopoverId:l,view:c,pages:u,transitionName:f,theme:m,color:_,displayMode:y,locale:T,masks:R,attributes:F,disabledAttribute:O,disabledDates:L,attributeContext:Z,days:Ht,dayCells:ct,count:E,step:b,firstPage:w,lastPage:A,canMovePrev:K,canMoveNext:W,minPage:x,maxPage:C,isMonthly:at,isWeekly:ot,isDaily:mt,navVisibility:S,showWeeknumbers:dt,showIsoWeeknumbers:Q,getDateAddress:et,canMove:it,canMoveBy:J,move:pt,moveBy:nt,movePrev:ht,moveNext:yt,onTransitionBeforeEnter:Nt,onTransitionAfterEnter:z,tryFocusDate:vt,focusDate:It,onKeydown:Yi,onDayKeydown:Hn,onDayClick:Vt,onDayMouseenter:we,onDayMouseleave:Te,onDayFocusin:un,onDayFocusout:Ce,onWeeknumberClick:Ee};return Si(qS,sn),sn}function $r(){const e=mn(qS);if(e)return e;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const VG=en({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(e,{emit:t}){let n;const s=$t();let i=null,r=null;const o=$o({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function a(z){z&&(o.direction=z.split("-")[0])}function l({placement:z,options:At}){a(z||(At==null?void 0:At.placement))}const c=G(()=>({placement:o.placement,strategy:o.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:l},...o.modifiers||[]],onFirstUpdate:l})),u=G(()=>{const z=o.direction==="left"||o.direction==="right";let At="";if(o.placement){const et=o.placement.split("-");et.length>1&&(At=et[1])}return["start","top","left"].includes(At)?z?"top":"left":["end","bottom","right"].includes(At)?z?"bottom":"right":z?"middle":"center"});function f(){r&&(r.destroy(),r=null)}function d(){_o(()=>{const z=Ku(o.target);!z||!s.value||(r&&r.state.elements.reference!==z&&f(),r?r.update():r=E5(z,s.value,c.value))})}function p(z){Object.assign(o,dq(z,"force"))}function m(z,At){clearTimeout(n),z>0?n=setTimeout(At,z):At()}function _(z){return!z||!r?!1:Ku(z)===r.state.elements.reference}async function y(z={}){o.force||(z.force&&(o.force=!0),m(z.showDelay??e.showDelay,()=>{o.isVisible&&(o.force=!1),p({...z,isVisible:!0}),d()}))}function T(z={}){r&&(z.target&&!_(z.target)||o.force||(z.force&&(o.force=!0),m(z.hideDelay??e.hideDelay,()=>{o.isVisible||(o.force=!1),o.isVisible=!1})))}function R(z={}){z.target!=null&&(o.isVisible&&_(z.target)?T(z):y(z))}function D(z){if(!r)return;const At=r.state.elements.reference;if(!s.value||!At)return;const et=z.target;iu(s.value,et)||iu(At,et)||T({force:!0})}function k(z){(z.key==="Esc"||z.key==="Escape")&&T()}function O({detail:z}){!z.id||z.id!==e.id||y(z)}function L({detail:z}){!z.id||z.id!==e.id||T(z)}function E({detail:z}){!z.id||z.id!==e.id||R(z)}function b(){wi(document,"keydown",k),wi(document,"click",D),wi(document,"show-popover",O),wi(document,"hide-popover",L),wi(document,"toggle-popover",E)}function w(){bi(document,"keydown",k),bi(document,"click",D),bi(document,"show-popover",O),bi(document,"hide-popover",L),bi(document,"toggle-popover",E)}function A(z){t("before-show",z)}function x(z){o.force=!1,t("after-show",z)}function C(z){t("before-hide",z)}function S(z){o.force=!1,f(),t("after-hide",z)}function dt(z){z.stopPropagation()}function Q(){o.isHovered=!0,o.isInteractive&&["hover","hover-focus"].includes(o.visibility)&&y()}function at(){if(o.isHovered=!1,!r)return;const z=r.state.elements.reference;o.autoHide&&!o.isFocused&&(!z||z!==document.activeElement)&&["hover","hover-focus"].includes(o.visibility)&&T()}function ot(){o.isFocused=!0,o.isInteractive&&["focus","hover-focus"].includes(o.visibility)&&y()}function mt(z){["focus","hover-focus"].includes(o.visibility)&&(!z.relatedTarget||!iu(s.value,z.relatedTarget))&&(o.isFocused=!1,!o.isHovered&&o.autoHide&&T())}function Nt(){i!=null&&(i.disconnect(),i=null)}return ln(()=>s.value,z=>{Nt(),z&&(i=new ResizeObserver(()=>{r&&r.update()}),i.observe(z))}),ln(()=>o.placement,a,{immediate:!0}),bs(()=>{b()}),Fo(()=>{f(),Nt(),w()}),{...lC(o),popoverRef:s,alignment:u,hide:T,setupPopper:d,beforeEnter:A,afterEnter:x,beforeLeave:C,afterLeave:S,onClick:dt,onMouseOver:Q,onMouseLeave:at,onFocusIn:ot,onFocusOut:mt}}}),Fr=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};function $G(e,t,n,s,i,r){return lt(),gt("div",{class:ie(["vc-popover-content-wrapper",{"is-interactive":e.isInteractive}]),ref:"popoverRef",onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o)),onMouseover:t[1]||(t[1]=(...o)=>e.onMouseOver&&e.onMouseOver(...o)),onMouseleave:t[2]||(t[2]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onFocusin:t[3]||(t[3]=(...o)=>e.onFocusIn&&e.onFocusIn(...o)),onFocusout:t[4]||(t[4]=(...o)=>e.onFocusOut&&e.onFocusOut(...o))},[xt(_h,{name:`vc-${e.transition}`,appear:"",onBeforeEnter:e.beforeEnter,onAfterEnter:e.afterEnter,onBeforeLeave:e.beforeLeave,onAfterLeave:e.afterLeave},{default:ve(()=>[e.isVisible?(lt(),gt("div",Ol({key:0,tabindex:"-1",class:`vc-popover-content direction-${e.direction}`},e.$attrs),[dh(e.$slots,"default",{direction:e.direction,alignment:e.alignment,data:e.data,hide:e.hide},()=>[mh(Ze(e.data),1)]),X("span",{class:ie(["vc-popover-caret",`direction-${e.direction}`,`align-${e.alignment}`])},null,2)],16)):Be("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const KS=Fr(VG,[["render",$G]]),FG={class:"vc-day-popover-row"},BG={key:0,class:"vc-day-popover-row-indicator"},UG={class:"vc-day-popover-row-label"},HG=en({__name:"PopoverRow",props:{attribute:null},setup(e){const t=e,n=G(()=>{const{content:s,highlight:i,dot:r,bar:o,popover:a}=t.attribute;return a&&a.hideIndicator?null:s?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${s.base.color}`}:i?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${i.base.color}`}:r?{class:`vc-dot vc-attr vc-${r.base.color}`}:o?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${o.base.color}`}:null});return(s,i)=>(lt(),gt("div",FG,[ft(n)?(lt(),gt("div",BG,[X("span",{class:ie(ft(n).class)},null,2)])):Be("",!0),X("div",UG,[dh(s.$slots,"default",{},()=>[mh(Ze(e.attribute.popover?e.attribute.popover.label:"No content provided"),1)])])]))}}),jG={inheritAttrs:!1},as=en({...jG,__name:"CalendarSlot",props:{name:null},setup(e){const n=YS(e.name);return(s,i)=>ft(n)?(lt(),Ln(Lw(ft(n)),NA(Ol({key:0},s.$attrs)),null,16)):dh(s.$slots,"default",{key:1})}}),zG={class:"vc-day-popover-container"},WG={key:0,class:"vc-day-popover-header"},YG=en({__name:"CalendarDayPopover",setup(e){const{dayPopoverId:t,displayMode:n,color:s,masks:i,locale:r}=$r();function o(l,c){return r.value.formatDate(l,c)}function a(l){return r.value.formatDate(l.date,i.value.dayPopover)}return(l,c)=>(lt(),Ln(KS,{id:ft(t),class:ie([`vc-${ft(s)}`,`vc-${ft(n)}`])},{default:ve(({data:{day:u,attributes:f},hide:d})=>[xt(as,{name:"day-popover",day:u,"day-title":a(u),attributes:f,format:o,masks:ft(i),hide:d},{default:ve(()=>[X("div",zG,[ft(i).dayPopover?(lt(),gt("div",WG,Ze(a(u)),1)):Be("",!0),(lt(!0),gt(ee,null,gn(f,p=>(lt(),Ln(HG,{key:p.key,attribute:p},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),qG={},KG={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},GG=X("polyline",{points:"9 18 15 12 9 6"},null,-1),XG=[GG];function QG(e,t){return lt(),gt("svg",KG,XG)}const JG=Fr(qG,[["render",QG]]),ZG={},tX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},eX=X("polyline",{points:"15 18 9 12 15 6"},null,-1),nX=[eX];function sX(e,t){return lt(),gt("svg",tX,nX)}const iX=Fr(ZG,[["render",sX]]),rX={},oX={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},aX=X("polyline",{points:"6 9 12 15 18 9"},null,-1),lX=[aX];function cX(e,t){return lt(),gt("svg",oX,lX)}const uX=Fr(rX,[["render",cX]]),hX={},fX={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},dX=X("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),pX=[dX];function gX(e,t){return lt(),gt("svg",fX,pX)}const mX=Fr(hX,[["render",gX]]),vX=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:uX,IconChevronLeft:iX,IconChevronRight:JG,IconClock:mX},Symbol.toStringTag,{value:"Module"})),sh=en({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(e){const t=e,n=G(()=>t.width||t.size),s=G(()=>t.height||t.size),i=G(()=>vX[`Icon${t.name}`]);return(r,o)=>(lt(),Ln(Lw(ft(i)),{width:ft(n),height:ft(s),class:"vc-base-icon"},null,8,["width","height"]))}}),_X=["disabled"],yX={key:1,class:"vc-title-wrapper"},bX={type:"button",class:"vc-title"},wX=["disabled"],GS=en({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(e){const t=e,{navPopoverId:n,navVisibility:s,canMovePrev:i,movePrev:r,canMoveNext:o,moveNext:a}=$r(),l=G(()=>{switch(t.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),c=G(()=>{const{page:_}=t;return{id:n.value,visibility:s.value,placement:l.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:_},isInteractive:!0}}),u=G(()=>t.page.titlePosition.includes("left")),f=G(()=>t.page.titlePosition.includes("right")),d=G(()=>t.layout?t.layout:u.value?"tu-pn":f.value?"pn-tu":"p-tu-n;"),p=G(()=>({prev:d.value.includes("p")&&!t.hideArrows,title:d.value.includes("t")&&!t.hideTitle,next:d.value.includes("n")&&!t.hideArrows})),m=G(()=>({gridTemplateColumns:d.value.split("").map(y=>{switch(y){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(_,y)=>(lt(),gt("div",{class:ie(["vc-header",{"is-lg":e.isLg,"is-xl":e.isXl,"is-2xl":e.is2xl}]),style:Je(ft(m))},[ft(p).prev?(lt(),gt("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!ft(i),onClick:y[0]||(y[0]=(...T)=>ft(r)&&ft(r)(...T)),onKeydown:y[1]||(y[1]=Cv((...T)=>ft(r)&&ft(r)(...T),["space","enter"]))},[xt(as,{name:"header-prev-button",disabled:!ft(i)},{default:ve(()=>[xt(sh,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,_X)):Be("",!0),ft(p).title?(lt(),gt("div",yX,[xt(as,{name:"header-title-wrapper"},{default:ve(()=>[du((lt(),gt("button",bX,[xt(as,{name:"header-title",title:e.page.title},{default:ve(()=>[X("span",null,Ze(e.page.title),1)]),_:1},8,["title"])])),[[ft(HS),ft(c)]])]),_:1})])):Be("",!0),ft(p).next?(lt(),gt("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!ft(o),onClick:y[2]||(y[2]=(...T)=>ft(a)&&ft(a)(...T)),onKeydown:y[3]||(y[3]=Cv((...T)=>ft(a)&&ft(a)(...T),["space","enter"]))},[xt(as,{name:"header-next-button",disabled:!ft(o)},{default:ve(()=>[xt(sh,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,wX)):Be("",!0)],6))}}),XS=Symbol("__vc_page_context__");function TX(e){const{locale:t,getDateAddress:n,canMove:s}=$r();function i(a,l){const{month:c,year:u}=n(new Date);return BS().map((f,d)=>{const p=d+1;return{month:p,year:a,id:sK(p,a),label:t.value.formatDate(f,l),ariaLabel:t.value.formatDate(f,"MMMM"),isActive:p===e.value.month&&a===e.value.year,isCurrent:p===c&&a===u,isDisabled:!s({month:p,year:a},{position:e.value.position})}})}function r(a,l){const{year:c}=n(new Date),{position:u}=e.value,f=[];for(let d=a;d<=l;d+=1){const p=[...Array(12).keys()].some(m=>s({month:m+1,year:d},{position:u}));f.push({year:d,id:d.toString(),label:d.toString(),ariaLabel:d.toString(),isActive:d===e.value.year,isCurrent:d===c,isDisabled:!p})}return f}const o={page:e,getMonthItems:i,getYearItems:r};return Si(XS,o),o}function QS(){const e=mn(XS);if(e)return e;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const EX={class:"vc-nav-header"},IX=["disabled"],SX=["disabled"],AX={class:"vc-nav-items"},CX=["data-id","aria-label","disabled","onClick","onKeydown"],xX=en({__name:"CalendarNav",setup(e){const{masks:t,move:n}=$r(),{page:s,getMonthItems:i,getYearItems:r}=QS(),o=$t(!0),a=12,l=$t(s.value.year),c=$t(d(s.value.year)),u=$t(null);function f(){setTimeout(()=>{if(u.value==null)return;const et=u.value.querySelector(".vc-nav-item:not(:disabled)");et&&et.focus()},10)}function d(et){return Math.floor(et/a)}function p(){o.value=!o.value}function m(et){return et*a}function _(et){return a*(et+1)-1}function y(){ot.value&&(o.value&&R(),k())}function T(){mt.value&&(o.value&&D(),O())}function R(){l.value--}function D(){l.value++}function k(){c.value--}function O(){c.value++}const L=G(()=>i(l.value,t.value.navMonths).map(et=>({...et,click:()=>n({month:et.month,year:et.year},{position:s.value.position})}))),E=G(()=>i(l.value-1,t.value.navMonths)),b=G(()=>E.value.some(et=>!et.isDisabled)),w=G(()=>i(l.value+1,t.value.navMonths)),A=G(()=>w.value.some(et=>!et.isDisabled)),x=G(()=>r(m(c.value),_(c.value)).map(et=>({...et,click:()=>{l.value=et.year,o.value=!0,f()}}))),C=G(()=>r(m(c.value-1),_(c.value-1))),S=G(()=>C.value.some(et=>!et.isDisabled)),dt=G(()=>r(m(c.value+1),_(c.value+1))),Q=G(()=>dt.value.some(et=>!et.isDisabled)),at=G(()=>o.value?L.value:x.value),ot=G(()=>o.value?b.value:S.value),mt=G(()=>o.value?A.value:Q.value),Nt=G(()=>TS(x.value.map(et=>et.year))),z=G(()=>io(x.value.map(et=>et.year))),At=G(()=>o.value?l.value:`${Nt.value} - ${z.value}`);return Qw(()=>{l.value=s.value.year,f()}),ln(()=>l.value,et=>c.value=d(et)),bs(()=>f()),(et,Pt)=>(lt(),gt("div",{class:"vc-nav-container",ref_key:"navContainer",ref:u},[X("div",EX,[X("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!ft(ot),onClick:y,onKeydown:Pt[0]||(Pt[0]=Rt=>ft($c)(Rt,y))},[xt(as,{name:"nav-prev-button",move:y,disabled:!ft(ot)},{default:ve(()=>[xt(sh,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,IX),X("button",{type:"button",class:"vc-nav-title vc-focus",onClick:p,onKeydown:Pt[1]||(Pt[1]=Rt=>ft($c)(Rt,p))},Ze(ft(At)),33),X("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!ft(mt),onClick:T,onKeydown:Pt[2]||(Pt[2]=Rt=>ft($c)(Rt,T))},[xt(as,{name:"nav-next-button",move:T,disabled:!ft(mt)},{default:ve(()=>[xt(sh,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,SX)]),X("div",AX,[(lt(!0),gt(ee,null,gn(ft(at),Rt=>(lt(),gt("button",{key:Rt.label,type:"button","data-id":Rt.id,"aria-label":Rt.ariaLabel,class:ie(["vc-nav-item vc-focus",[Rt.isActive?"is-active":Rt.isCurrent?"is-current":""]]),disabled:Rt.isDisabled,onClick:Rt.click,onKeydown:Yt=>ft($c)(Yt,Rt.click)},Ze(Rt.label),43,CX))),128))])],512))}}),JS=en({__name:"CalendarPageProvider",props:{page:null},setup(e){return TX(hC(e,"page")),(n,s)=>dh(n.$slots,"default")}}),PX=en({__name:"CalendarNavPopover",setup(e){const{navPopoverId:t,color:n,displayMode:s}=$r();return(i,r)=>(lt(),Ln(KS,{id:ft(t),class:ie(["vc-nav-popover-container",`vc-${ft(n)}`,`vc-${ft(s)}`])},{default:ve(({data:o})=>[xt(JS,{page:o.page},{default:ve(()=>[xt(as,{name:"nav"},{default:ve(()=>[xt(xX)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),kX=en({directives:{popover:HS},components:{CalendarSlot:as},props:{day:{type:Object,required:!0}},setup(e){const{locale:t,theme:n,attributeContext:s,dayPopoverId:i,onDayClick:r,onDayMouseenter:o,onDayMouseleave:a,onDayFocusin:l,onDayFocusout:c,onDayKeydown:u}=$r(),f=G(()=>e.day),d=G(()=>s.value.getCells(f.value)),p=G(()=>d.value.map(Q=>Q.data)),m=G(()=>({...f.value,attributes:p.value,attributeCells:d.value}));function _({data:Q},{popovers:at}){const{key:ot,customData:mt,popover:Nt}=Q;if(!Nt)return;const z=y0({key:ot,customData:mt,attribute:Q},{...Nt},{visibility:Nt.label?"hover":"click",placement:"bottom",isInteractive:!Nt.label});at.splice(0,0,z)}const y=G(()=>{const Q={...n.value.prepareRender({}),popovers:[]};return d.value.forEach(at=>{n.value.render(at,Q),_(at,Q)}),Q}),T=G(()=>y.value.highlights),R=G(()=>!!pr(T.value)),D=G(()=>y.value.content),k=G(()=>y.value.dots),O=G(()=>!!pr(k.value)),L=G(()=>y.value.bars),E=G(()=>!!pr(L.value)),b=G(()=>y.value.popovers),w=G(()=>b.value.map(Q=>Q.attribute)),A=YS("day-content"),x=G(()=>["vc-day",...f.value.classes,{"vc-day-box-center-center":!A},{"is-not-in-month":!e.day.inMonth}]),C=G(()=>{let Q;f.value.isFocusable?Q="0":Q="-1";const at=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":f.value.isDisabled},dr(io(T.value),"contentClass"),dr(io(D.value),"class")||""],ot={...dr(io(T.value),"contentStyle"),...dr(io(D.value),"style")};return{class:at,style:ot,tabindex:Q,"aria-label":f.value.ariaLabel,"aria-disabled":!!f.value.isDisabled,role:"button"}}),S=G(()=>({click(Q){r(m.value,Q)},mouseenter(Q){o(m.value,Q)},mouseleave(Q){a(m.value,Q)},focusin(Q){l(m.value,Q)},focusout(Q){c(m.value,Q)},keydown(Q){u(m.value,Q)}})),dt=G(()=>pr(b.value)?y0({id:i.value,data:{day:f,attributes:w.value}},...b.value):null);return{attributes:p,attributeCells:d,bars:L,dayClasses:x,dayContentProps:C,dayContentEvents:S,dayPopover:dt,glyphs:y,dots:k,hasDots:O,hasBars:E,highlights:T,hasHighlights:R,locale:t,popovers:b}}}),DX={key:0,class:"vc-highlights vc-day-layer"},RX={key:1,class:"vc-day-layer vc-day-box-center-bottom"},MX={class:"vc-dots"},OX={key:2,class:"vc-day-layer vc-day-box-center-bottom"},NX={class:"vc-bars"};function LX(e,t,n,s,i,r){const o=Os("CalendarSlot"),a=OC("popover");return lt(),gt("div",{class:ie(e.dayClasses)},[e.hasHighlights?(lt(),gt("div",DX,[(lt(!0),gt(ee,null,gn(e.highlights,({key:l,wrapperClass:c,class:u,style:f})=>(lt(),gt("div",{key:l,class:ie(c)},[X("div",{class:ie(u),style:Je(f)},null,6)],2))),128))])):Be("",!0),xt(o,{name:"day-content",day:e.day,attributes:e.attributes,"attribute-cells":e.attributeCells,dayProps:e.dayContentProps,dayEvents:e.dayContentEvents,locale:e.locale},{default:ve(()=>[du((lt(),gt("div",Ol(e.dayContentProps,NC(e.dayContentEvents,!0)),[mh(Ze(e.day.label),1)],16)),[[a,e.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),e.hasDots?(lt(),gt("div",RX,[X("div",MX,[(lt(!0),gt(ee,null,gn(e.dots,({key:l,class:c,style:u})=>(lt(),gt("span",{key:l,class:ie(c),style:Je(u)},null,6))),128))])])):Be("",!0),e.hasBars?(lt(),gt("div",OX,[X("div",NX,[(lt(!0),gt(ee,null,gn(e.bars,({key:l,class:c,style:u})=>(lt(),gt("span",{key:l,class:ie(c),style:Je(u)},null,6))),128))])])):Be("",!0)],2)}const VX=Fr(kX,[["render",LX]]),$X={class:"vc-weekdays"},FX=["onClick"],BX={inheritAttrs:!1},UX=en({...BX,__name:"CalendarPage",setup(e){const{page:t}=QS(),{onWeeknumberClick:n}=$r();return(s,i)=>(lt(),gt("div",{class:ie(["vc-pane",`row-${ft(t).row}`,`row-from-end-${ft(t).rowFromEnd}`,`column-${ft(t).column}`,`column-from-end-${ft(t).columnFromEnd}`]),ref:"pane"},[xt(GS,{page:ft(t),"is-lg":"","hide-arrows":""},null,8,["page"]),X("div",{class:ie(["vc-weeks",{[`vc-show-weeknumbers-${ft(t).weeknumberPosition}`]:ft(t).weeknumberPosition}])},[X("div",$X,[(lt(!0),gt(ee,null,gn(ft(t).weekdays,({weekday:r,label:o},a)=>(lt(),gt("div",{key:a,class:ie(`vc-weekday vc-weekday-${r}`)},Ze(o),3))),128))]),(lt(!0),gt(ee,null,gn(ft(t).viewWeeks,r=>(lt(),gt("div",{key:`weeknumber-${r.weeknumber}`,class:"vc-week"},[ft(t).weeknumberPosition?(lt(),gt("div",{key:0,class:ie(["vc-weeknumber",`is-${ft(t).weeknumberPosition}`])},[X("span",{class:ie(["vc-weeknumber-content"]),onClick:o=>ft(n)(r,o)},Ze(r.weeknumberDisplay),9,FX)],2)):Be("",!0),(lt(!0),gt(ee,null,gn(r.days,o=>(lt(),Ln(VX,{key:o.id,day:o},null,8,["day"]))),128))]))),128))],2)],2))}}),HX=en({components:{CalendarHeader:GS,CalendarPage:UX,CalendarNavPopover:PX,CalendarDayPopover:YG,CalendarPageProvider:JS,CalendarSlot:as},props:OG,emit:NG,setup(e,{emit:t,slots:n}){return LG(e,{emit:t,slots:n})}}),jX={class:"vc-pane-header-wrapper"};function zX(e,t,n,s,i,r){const o=Os("CalendarHeader"),a=Os("CalendarPage"),l=Os("CalendarSlot"),c=Os("CalendarPageProvider"),u=Os("CalendarDayPopover"),f=Os("CalendarNavPopover");return lt(),gt(ee,null,[X("div",Ol({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},e.$attrs,{class:["vc-container",`vc-${e.view}`,`vc-${e.color}`,`vc-${e.displayMode}`,{"vc-expanded":e.expanded,"vc-bordered":!e.borderless,"vc-transparent":e.transparent}],onMouseup:t[0]||(t[0]=Ip(()=>{},["prevent"])),ref:"containerRef"}),[X("div",{class:ie(["vc-pane-container",{"in-transition":e.inTransition}])},[X("div",jX,[e.firstPage?(lt(),Ln(o,{key:0,page:e.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):Be("",!0)]),xt(_h,{name:`vc-${e.transitionName}`,onBeforeEnter:e.onTransitionBeforeEnter,onAfterEnter:e.onTransitionAfterEnter},{default:ve(()=>[(lt(),gt("div",{key:e.pages[0].id,class:"vc-pane-layout",style:Je({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})},[(lt(!0),gt(ee,null,gn(e.pages,d=>(lt(),Ln(c,{key:d.id,page:d},{default:ve(()=>[xt(l,{name:"page",page:d},{default:ve(()=>[xt(a)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),xt(l,{name:"footer"})],2)],16),xt(u),xt(f)],64)}const WX=Fr(HX,[["render",zX]]),YX={class:"calendar-container"},qX={class:"calendar-heatmap themed-calendar"},KX={key:0,class:"day-info-box"},GX={key:0},XX={__name:"Calendar",setup(e){const t=$t({}),n=$t([]),s=new Date,i=$t(new Date(s.getFullYear(),s.getMonth(),1)),r=$t(null);function o(p){return p.toString().padStart(2,"0")}function a(){const p={};for(let m=0;m<localStorage.length;m++){const _=localStorage.key(m);if(_&&_.startsWith("groups_")){const y=_.replace("groups_",""),[T,R,D]=y.split("-").map(Number),O=JSON.parse(localStorage.getItem(_)||"[]").reduce((E,b)=>E+b.count,0),L=`${T}-${o(R)}-${o(D)}`;p[L]=O}}return p}async function l(){await _o(),t.value=a(),n.value=Object.entries(t.value).map(([p,m])=>({key:p,highlight:!0,dates:p})),_o(()=>d())}bs(()=>{l()}),ln(i,()=>{l()});let c=null;function u(p){const m=p[0].monthTitle;m!==c&&(t.value=a(),c=m)}const f=G(()=>r.value?t.value[r.value]||0:null),d=()=>{document.querySelectorAll(".vc-day").forEach(m=>{const _=[...m.classList].find(x=>x.includes("id-")).replace("id-","");if(!_)return;const y=t.value[_]||0;if(y===0)return;const T=m.querySelector(".vc-highlights");if(!T)return;const R=.7+.7*Math.min(y/10,1);T.style.transform=`scale(${R})`;const D=getComputedStyle(document.documentElement).getPropertyValue("--accent").split(",").map(Number),k=getComputedStyle(document.documentElement).getPropertyValue("--primary").split(",").map(Number),O=Math.max(0,Math.min(1,(R-.7)/.7)),L=(x,C,S)=>Math.round(x+(C-x)*S),E=L(D[0],k[0],O),b=L(D[1],k[1],O),w=L(D[2],k[2],O),A=`rgb(${E},${b},${w})`;T.style.backgroundColor=A})};return(p,m)=>(lt(),gt("div",YX,[X("button",{class:"back-btn",onClick:m[0]||(m[0]=_=>p.$router.push("/")),"aria-label":"Back"},m[2]||(m[2]=[X("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none"},[X("path",{d:"M15 19l-7-7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),X("div",qX,[xt(ft(WX),{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=_=>i.value=_),attributes:n.value,"show-months":1,"title-position":"left","max-date":ft(s),borderless:"",transparent:"","onUpdate:pages":u},null,8,["modelValue","attributes","max-date"])]),r.value?(lt(),gt("div",KX,[X("span",null,": "+Ze(r.value),1),f.value!==null?(lt(),gt("span",GX,": "+Ze(f.value),1)):Be("",!0)])):Be("",!0)]))}},QX=Hi(XX,[["__scopeId","data-v-1003c716"]]),JX=[{path:"/",component:WL,meta:{requiresAuth:!0}},{path:"/stats",component:i3,meta:{requiresAuth:!0}},{path:"/calendar",component:QX,meta:{requiresAuth:!0}},{path:"/auth",component:a3},{path:"/settings",component:v3,meta:{requiresAuth:!0}}],ZS=rk({history:OP(),routes:JX});ZS.beforeEach((e,t,n)=>{const s=e.matched.some(r=>r.meta.requiresAuth),i=Ir.currentUser;if(s&&!i){const r=Ir.onAuthStateChanged(o=>{r(),o?n():n("/auth")})}else n()});const ZX=localStorage.getItem("color-primary")||"#2F5249",tQ=localStorage.getItem("color-accent")||"#E3DE61";document.documentElement.style.setProperty("--primary",ZX);document.documentElement.style.setProperty("--accent",tQ);Jx(nP).use(ZS).mount("#app");
